{"patent_id": "10-2023-0097798", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0017034", "출원번호": "10-2023-0097798", "발명의 명칭": "UWB에 기반한 방향 탐지 방법 및 이를 수행하기 위한 전자 단말", "출원인": "국민대학교산학협력단", "발명자": "장병준"}}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "UWB 통신을 수행하며, 각각 복수의 안테나들을 구비하는 단말들 간의 방향을 측정하는 방법에 있어서,송신 단말에서 복수의 안테나들을 통해 신호들을 송신하고, 수신 단말에서 복수의 안테나들을 통해 상기 신호들을 수신하는 단계; 및상기 송신 단말 및 수신 단말의 상태(status)에 따라서 AoD (Angle of Departure) 방식 및 AoA (Angle ofArrival) 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 상기 단말들 간의 방향을 측정하는 단계를포함하며,상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테나를 통해 송신된 신호들 간의 위상차(phasedifference)에 기초하여 상기 송신된 신호들의 출발각(angle of departure, AoD)을 측정하는 방식이고, 상기AoA 방식은 상기 수신 단말에서 둘 이상의 서로 다른 안테나를 통해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각(angle of arrival, AoA)을 측정하는 방식인, 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 송신 단말 또는 수신 단말 중 어느 하나의 단말이 이동하는 상태라면,상기 단말들 간의 방향을 측정하는 단계는,상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하는 단계;상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정하는 단계; 및상기 출발각 및 상기 도래각에 기초하여 상기 이동 중인 단말의 지향각(angle of orientation)을 획득하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,상기 송신 단말의 지향각과 상기 수신 단말의 지향각이 이루는 각도가 미리 설정된 일정 범위 이내라면, 상기 단말들 간의 방향을 측정하는 단계는,상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하는 단계;상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정하는 단계;상기 출발각 및 상기 도래각에 기초하여 상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계; 및상기 선택된 방식에 따라 상기 단말들 간의 방향을 측정하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계는,상기 출발각의 크기가 미리 설정된 제1 기준값 이하인 경우 상기 AoD 방식을 선택하고, 상기 도래각의 크기가미리 설정된 제2 기준값 이하인 경우 상기 AoA 방식을 선택하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "공개특허 10-2025-0017034-2-제4항에 있어서,상기 출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 이하이거나, 또는 상기출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 초과인 경우,상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계는,상기 출발각과 상기 도래각의 크기를 비교한 결과에 기초하여 상기 AoD 방식 또는 상기 AoA 방식 중 어느 하나를 선택하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제3항에 있어서,상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계는,상기 출발각과 상기 도래각의 크기를 비교하는 단계; 및상기 출발각의 크기가 상기 도래각의 크기보다 작다면 상기 AoD 방식을 선택하고, 상기 도래각의 크기가 상기출발각의 크기보다 작다면 상기 AoA 방식을 선택하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서,상기 단말을 간의 방향을 측정하는 단계는,상기 송신 단말은 정지하고 상기 수신 단말이 이동하는 상태라면 상기 AoD 방식을 이용하여 상기 단말들 간의방향을 측정하고, 상기 수신 단말은 정지하고 상기 송신 단말이 이동하는 상태라면 상기 AoA 방식을 이용하여상기 단말들 간의 방향을 측정하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항 내지 제7항 중 어느 한 항의 방법을 컴퓨터에서 수행하기 위한 프로그램이 기록된 컴퓨터로 읽을 수 있는기록매체."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "UWB에 기반한 방향 탐지를 수행하기 위한 수신 단말에 있어서,수신하는 신호의 반파장 간격으로 배열된 복수의 안테나들을 포함하는 안테나 모듈;방향 탐지를 수행하기 위한 프로그램이 저장되는 메모리; 및적어도 하나의 프로세서를 포함하며,상기 프로세서는,송신 단말로부터 복수의 안테나들을 통해 송신된 신호들을, 상기 복수의 안테나들을 통해 수신하도록 하며,상기 송신 단말 및 상기 수신 단말의 상태에 따라서 AoD 방식 및 AoA 방식 중 적어도 하나를 선택하고, 선택된방식을 이용하여 상기 단말들 간의 방향을 측정하며,상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테나를 통해 송신된 신호들 간의 위상차에 기초하여 상기 송신된 신호들의 출발각을 측정하는 방식이고, 상기 AoA 방식은 상기 수신 단말에서 둘 이상의 서로 다른 안테나를 통해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각을 측정하는 방식인, 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 프로세서는,상기 송신 단말 또는 수신 단말 중 어느 하나의 단말이 이동하는 상태라면,공개특허 10-2025-0017034-3-상기 단말들 간의 방향을 측정함에 있어서,상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하고,상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정한 후,상기 출발각 및 상기 도래각에 기초하여 상기 이동 중인 단말의 지향각을 획득하는 것을 특징으로 하는 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제9항에 있어서,상기 송신 단말의 지향각과 상기 수신 단말의 지향각이 이루는 각도가 미리 설정된 일정 범위 이내라면, 상기 프로세서는,상기 단말들 간의 방향을 측정함에 있어서,상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하고,상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정한 후,상기 출발각 및 상기 도래각에 기초하여 상기 단말들 간의 방향 측정에 이용할 방식을 선택하고,상기 선택된 방식에 따라 상기 단말들 간의 방향을 측정하는 것을 특징으로 하는 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 프로세서는,상기 단말들 간의 방향 측정에 이용할 방식을 선택함에 있어서,상기 출발각의 크기가 미리 설정된 제1 기준값 이하인 경우 상기 AoD 방식을 선택하고, 상기 도래각의 크기가미리 설정된 제2 기준값 이하인 경우 상기 AoA 방식을 선택하는 것을 특징으로 하는 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 이하이거나, 또는 상기출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 초과인 경우,상기 프로세서는,상기 단말들 간의 방향 측정에 이용할 방식을 선택함에 있어서,상기 출발각과 상기 도래각의 크기를 비교한 결과에 기초하여 상기 AoD 방식 또는 상기 AoA 방식 중 어느 하나를 선택하는 것을 특징으로 하는 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제11항에 있어서,상기 프로세서는,상기 단말들 간의 방향 측정에 이용할 방식을 선택함에 있어서,상기 출발각과 상기 도래각의 크기를 비교하고,상기 출발각의 크기가 상기 도래각의 크기보다 작다면 상기 AoD 방식을 선택하고, 상기 도래각의 크기가 상기출발각의 크기보다 작다면 상기 AoA 방식을 선택하는 것을 특징으로 하는 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "공개특허 10-2025-0017034-4-제9항에 있어서,상기 프로세서는,상기 단말을 간의 방향을 측정함에 있어서,상기 송신 단말은 정지하고 상기 수신 단말이 이동하는 상태라면 상기 AoD 방식을 이용하여 상기 단말들 간의방향을 측정하고, 상기 수신 단말은 정지하고 상기 송신 단말이 이동하는 상태라면 상기 AoA 방식을 이용하여상기 단말들 간의 방향을 측정하는 것을 특징으로 하는 수신 단말."}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "UWB 통신을 수행하며, 각각 복수의 안테나들을 구비하는 단말들 간의 방향을 측정하는 방법은, 송신 단말에서 복 수의 안테나들을 통해 신호들을 송신하고, 수신 단말에서 복수의 안테나들을 통해 상기 신호들을 수신하는 단계 및 상기 송신 단말 및 수신 단말의 상태(status)에 따라서 AoD (Angle of Departure) 방식 및 AoA (Angle of Arrival) 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 상기 단말들 간의 방향을 측정하는 단계를 포함하며, 상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테나를 통해 송신된 신호들 간의 위상차 (phase difference)에 기초하여 상기 송신된 신호들의 출발각(angle of departure, AoD)을 측정하는 방식이고, 상기 AoA 방식은 상기 수신 단말에서 둘 이상의 서로 다른 안테나를 통해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각(angle of arrival, AoA)을 측정하는 방식을 포함할 수 있다."}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 UWB 기반의 위치 측정 기술에서 방향을 탐지하기 위한 방법에 관한 것이며, 특히 서로 다른 안테나를 통해 송수신되는 신호들의 위상차에 기초하여 UWB 단말들 간의 방향을 탐지하는 방법에 관한 것이다."}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "UWB(Ultra Wide Band) 기술이란 시간 영역에서 폭이 좁은 펄스를 이용하는 무선기술로서 주파수 영역에서 보면 기존 무선통신기술보다 대역폭이 매우 넓은 특성을 가진다. 미국 연방통신위원회(Federal Communications Commission, FCC)의 정의에 의하면 500 MHz 이상의 주파수 대역폭을 사용하는 경우 UWB 기술이라고 한다. UWB 기술은 근거리 무선 개인 통신망의 구축에 사용될 수 있으며, 기기 간 무선통신뿐만 아니라, 기기 간 거리 를 측정할 수도 있는 특성으로 인해 측위(positioning)를 활용한 서비스에 널리 사용되고 있다. 한편, HRP(High-Rate Pulse Repetition Frequency) UWB 기술은 기존의 UWB 기술과 다르게 개개의 UWB 펄스 (pulse)를 이용하지 않고, 일련의 UWB 펄스로 이루어진 UWB 심볼(symbol)을 이용하는 기술인데, HRP UWB 기술의 도입으로 거리 측정의 정밀도는 개선될 수 있었다. 다만, HRP UWB 기술을 이용하여 위치 기반 서비스(location based service)를 제공하기 위해서는 UWB 기기 (e.g. UWB 앵커 및 UWB 태그 등)들 간의 거리뿐만 아니라 방향(direction)까지 탐지할 수 있어야 하는데, 방향 탐지(direction finding) 기술은 안테나를 이용한 기술이므로 초기 HRP UWB에는 방향 탐지 기술이 도입되지 않 았다가, 이후에 2개의 UWB 안테나에서 수신되는 전파의 도달 경로의 차이를 이용하는 PDoA (Phase Difference of Arrival) 방식에 의해 방향 탐지가 수행되고 있다."}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 개시의 일 실시예에 따른, UWB 통신을 수행하며, 각각 복수의 안테나들을 구비하는 단말들 간의 방향을 측정 하는 방법은, 송신 단말에서 복수의 안테나들을 통해 신호들을 송신하고, 수신 단말에서 복수의 안테나들을 통 해 상기 신호들을 수신하는 단계 및 상기 송신 단말 및 수신 단말의 상태(status)에 따라서 AoD (Angle of Departure) 방식 및 AoA (Angle of Arrival) 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 상기 단말들 간의 방향을 측정하는 단계를 포함하며, 상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테 나를 통해 송신된 신호들 간의 위상차(phase difference)에 기초하여 상기 송신된 신호들의 출발각(angle of departure, AoD)을 측정하는 방식이고, 상기 AoA 방식은 상기 수신 단말에서 둘 이상의 서로 다른 안테나를 통 해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각(angle of arrival, AoA)을 측정하는 방 식일 수 있다. 본 개시의 일 실시예에 따른, UWB에 기반한 방향 탐지를 수행하기 위한 수신 단말은, 수신하는 신호의 반파장 간격으로 배열된 복수의 안테나들을 포함하는 안테나 모듈, 방향 탐지를 수행하기 위한 프로그램이 저장되는 메 모리 및 적어도 하나의 프로세서를 포함하며, 상기 프로세서는, 송신 단말로부터 복수의 안테나들을 통해 송신 된 신호들을, 상기 복수의 안테나들을 통해 수신하도록 하며, 상기 송신 단말 및 상기 수신 단말의 상태에 따라 서 AoD 방식 및 AoA 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 상기 단말들 간의 방향을 측정하 며, 상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테나를 통해 송신된 신호들 간의 위상차에 기 초하여 상기 송신된 신호들의 출발각을 측정하는 방식이고, 상기 AoA 방식은 상기 수신 단말에서 둘 이상의 서 로 다른 안테나를 통해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각을 측정하는 방식일수 있다. 본 개시의 일 실시예에 따른, 컴퓨터로 읽을 수 있는 기록매체는, 개시된 방법의 실시예들 중에서 적어도 하나 를 컴퓨터에서 실행시키기 위한 프로그램이 저장된 것일 수 있다. 본 개시의 일 실시예에 따른, 컴퓨터 프로그램은, 개시된 방법의 실시예들 중에서 적어도 하나를 컴퓨터에서 수 행하기 위해 매체에 저장된 것일 수 있다."}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 개시를 설명함에 있어서 본 개시가 속하는 기술 분야에 익히 알려져 있고 본 개시와 직접적으로 관련이 없는 기술 내용에 대해서는 설명을 생략한다. 이는 불필요한 설명을 생략함으로써 본 개시의 요지를 흐리지 않고 더 욱 명확히 전달하기 위함이다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이 는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내 용을 토대로 내려져야 할 것이다. 마찬가지 이유로 첨부된 도면에 있어서 일부 구성요소는 과장되거나 생략되거나 개략적으로 도시 되었다. 또한, 각 구성요소의 크기는 실제 크기를 전적으로 반영하는 것이 아니다. 각 도면에서 동일한 또는 대응하는 구성 요 소에는 동일한 참조 번호를 부여하였다. 본 개시의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술 되어 있는 실 시예들을 참조하면 명확해질 것이다. 그러나 본 개시는 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서 로 다른 다양한 형태로 구현될 수 있다. 개시된 실시예들은 본 개시의 개시가 완전하도록 하고, 본 개시가 속하"}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "는 기술분야에서 통상의 지식을 가진 자에게 개시의 범주를 완전하게 알려주기 위해 제공되는 것이다. 본 개시 의 일 실시예는 청구범위에 따라 정의될 수 있다. 명세서 전체에 걸쳐 동일한 참조 부호는 동일한 구성 요소를 나타낸다. 또한, 본 개시의 일 실시예를 설명함에 있어서 관련된 기능 또는 구성에 대한 구체적인 설명이 본 개 시의 요지를 불필요하게 흐릴 수 있다고 판단된 경우 그 상세한 설명은 생략한다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있 다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다.일 실시예에서, 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수 행될 수 있다. 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있고, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로 세서를 통해 수행되는 그 인스트럭션들이 흐름도 블록(들)에서 설명된 기능들을 수행하는 수단을 생성할 수 있 다. 컴퓨터 프로그램 인스트럭션들은 특정 방식으로 기능을 구현하기 위해 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 지향할 수 있는 컴퓨터 이용 가능 또는 컴퓨터 판독 가능 메모리에 저장되는 것도 가능 하고, 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메모리에 저장된 인스트럭션들은 흐름도 블록(들)에서 설명된 기 능을 수행하는 인스트럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭션 들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에 탑재되는 것도 가능하다. 또한, 흐름도 도면의 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션 들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 일 실시예에서, 블록들에 언급된 기능들이 순서를 벗어나서 발생하는 것도 가능하다. 예를 들면, 잇달아 도시되어 있는 두 개의 블록들은 실질적으로 동시 에 수행되는 것도 가능하고 또는 기능에 따라 역순으로 수행되는 것도 가능하다. 본 개시의 일 실시예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 FPGA(Field Programmable Gate Array) 또는 ASIC(Application Specific Integrated Circuit)과 같은 하드웨어 구성요소를 나타낼 수 있고, '~부'는 특정한 역할을 수행할 수 있다. 한편, '~부'는 소프트웨어 또는 하드웨어에 한정되는 의미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구 성될 수도 있다. 일 실시예에서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구 성요소들 및 태스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레이들, 및 변수들을 포함할 수 있다. 특정한 구성요소나 특정한 '~부'를 통해 제공되는 기능은 그 개수를 줄이도록 결합되거나 추가적인 구성요소들로 분리될 수 있다. 또한, 일 실시예에서 ‘~부’는 하나 이상 의 프로세서를 포함할 수 있다. 구체적인 실시예들을 설명하기에 앞서 본 개시에서 자주 사용되는 용어들에 대해서 먼저 설명한다. 본 개시에서 '방향 탐지(direction finding)' 또는 '방향 측정(direction measurement)'이란 신호(전파)의 방 향에 기초하여, 신호를 송신한 단말의 방향을 파악하는 동작을 의미한다. 본 개시의 실시예들에서는 UWB 통신을 수행하는 단말들 간 상대적인 방향을 탐지하는 동작이 수행된다. 예를 들어, 신호를 수신하는 UWB 단말은 신호 의 도래각을 측정함으로써 신호를 송신한 UWB 단말의 방향(신호를 수신한 UWB 단말을 기준으로 한 방향)을 탐지 할 수 있다. 'AoD (Angle of Departure) 방식'이란 송신 단말에서 둘 이상의 서로 다른 안테나를 통해 송신된 신호들 간의 위상차(phase difference)에 기초하여 송신된 신호들의 출발각(angle of departure, AoD)을 측정하는 방식을 의미할 수 있다. 'AoA (Angle of Arrival) 방식'이란 수신 단말에서 둘 이상의 서로 다른 안테나를 통해 수신된 신호들 간의 위 상차에 기초하여 수신된 신호들의 도래각(angle of arrival, AoA)을 측정하는 방식을 의미할 수 있다. 이하에서는 도면들을 참조하여 구체적인 실시예들에 대해서 설명한다. 먼저 도 1을 참조하여 본 개시의 실시예 들이 적용되는 UWB 통신 시스템에 대해서 설명한다. 도 1은 본 개시의 일 실시예에 따른, UWB 기반의 방향 측정을 수행하기 위한 시스템 환경을 도시한 도면이다. 도 1을 참고하면, 시스템에는 UWB 앵커(anchor) 및 UWB 태그(tag), 이렇게 두 개의 UWB 단말 (device)들이 포함될 수 있다. 위치 측정 시 UWB 태그는 신호를 송신하므로 송신 단말이라고도 하고, UWB 앵커는 신호를 수신하므로 수신 단말이라고도 할 수 있다. 본 개시의 일 실시예에 따르면, AoD 방식 및 AoA 방식을 모두 이용 가능하도록 UWB 앵커와 UWB 태그 는 각각 복수의 안테나들을 포함할 수 있다. 도 1에 도시된 실시예에서는 UWB 앵커가 두 개의 안테나들 (111, 112)을 포함하고, UWB 태그도 두 개의 안테나들(211, 212)을 포함하고 있다. UWB 앵커 또는 UWB 태그는 세 개 이상의 안테나들을 포함할 수도 있다. 또한, 시스템은 복수의 UWB 앵커 및 UWB 태 그를 포함하도록 구성될 수도 있다. UWB 태그는 UWB 앵커에 위치정보를 제공하는 역할을 수행할 수 있다. 따라서 이하의 실시예들에서, UWB 태그가 UWB 앵커에 신호(전파)를 송신하면, UWB 앵커는 수신한 신호에 기초하여 UWB 태그 의 위치(거리 및 방향)를 파악할 수 있다. 일 실시예에 따르면, UWB 앵커는 두 단말들 간 신호가 송수신되는 시간인 ToF (Time of Flight)를 이용한 TWR (Two Way Ranging) 방식에 의해 UWB 태그와의 거리를 측정할 수 있다. 또한, UWB 앵커는 이외에 도 다양한 방식을 이용하여 UWB 앵커와 UWB 태그 간 거리를 측정할 수 있다. TWR 방식은 이미 알려진 기술일 뿐만 아니라, 본 개시는 UWB 단말들(100, 200) 간 방향 탐지 방법에 관한 것이므로, 거리 측정 방식에 대한 자세한 설명은 생략한다. 본 개시의 일 실시예에 따르면, AoA 방식을 이용하기 위해 UWB 앵커의 안테나들(111, 112)은 수신되는 신 호의 반파장 거리만큼 이격되어 설치될 수 있다. 마찬가지로 본 개시의 일 실시예에 따르면, AoD 방식을 이용하 기 위해 UWB 태그의 안테나들(211, 212)은 송신되는 신호의 반파장 거리만큼 이격되어 설치될 수 있다. 도 1에 도시된 실시예에서, UWB 태그가 두 개의 안테나들(211, 212)을 스위칭하며 신호(UWB 신호)들을 송 신하면, UWB 앵커는 두 개의 안테나들(111, 112) 중 어느 하나를 통해 신호들을 수신하고, AoD 방식을 이 용하여 신호들의 출발각(UWB 태그로부터 신호가 출발하는 각도)을 구할 수 있다. 또한, UWB 태그가 두 개의 안테나들(211, 212) 중 어느 하나를 통해 신호들을 송신하면, UWB 앵커는 두 개의 안테나들(111, 112)을 스위칭하며 신호들을 수신하고, AoA 방식을 이용하여 신호들의 도래각(UWB 앵커에 신호가 도달하는 각도)을 구할 수 있다. UWB 앵커가 AoD 방식을 이용하여 신호들의 출발각을 측정하거나, AoA 방식을 이용 하여 신호들의 도래각을 측정하는 방법에 대해서는 아래에서 도 3을 참조하여 자세히 설명한다. 본 개시의 실시예들에 따르면, AoD 방식 및 AoA 방식을 모두 이용함으로써 다양한 기술적 효과들을 기대할 수 있다. 첫 번째로 두 단말들(100, 200) 중 어느 하나가 이동하는 경우 UWB 앵커는 이동하는 단말의 지향각 (angle of orientation)을 측정할 수 있다. 이때, 지향각이란 이동하는 단말이 향하는 방향(e.g. 이동하는 단말 의 안테나가 향하는 방향)을 의미할 수 있다. 두 번째로 UWB 앵커가 방향을 측정할 수 있는 범위가 하나의 방식만을 사용할 때에 비해 더 넓어질 수 있다. 세 번째로 두 단말들(100, 200) 중 어느 단말이 이동하는지에 따라 방향 측정 방식을 선택함으로서, UWB 앵커는 이동하는 단말의 지향각 변화로 인한 방향 보정을 할 필 요가 없다. 위 세 가지 효과를 얻기 위한 실시예들에 대해서는 아래에서 도 7 내지 도 9b를 참조하여 자세히 설 명한다. 도 2는 본 개시의 일 실시예에 따른, UWB 단말에 포함되는 구성들을 설명하기 위한 도면이다. 도 2에서는 UWB 앵커와 UWB 태그에 공통적으로 포함되는 구성들을 도시하였다. 도 2를 참고하면, UWB 단말(100, 200)은 안테나 모듈(110, 210), 통신 프로세서(120, 220), 프로세서(130, 230) 및 메모리(140, 240)를 포함할 수 있다. 안테나 모듈(110, 210)은 신호(전파)를 송신하거나 수신하기 위한 구성이다. 도 1에 도시된 바와 같이 안테나 모듈(110, 210)은 복수의 안테나들(111, 112, 211, 212)을 포함할 수 있다. 복수의 안테나들(111, 112, 211, 212)은 UWB 단말들(100, 200)이 송수신하는 신호의 반파장만큼 이격되어 설치될 수 있다. 즉, 안테나 모듈(110, 210)은 복수의 안테나들이 반파장 간격으로 배열된 선형 배열 안테나 또는 원형 배열 안테나일 수 있다. 통신 프로세서(120, 220)는 외부의 다른 기기와 통신을 수행하기 위한 구성이다. 일 실시예에 따르면, 통신 프 로세서(120, 220)는 적어도 하나의 수신기와 적어도 하나의 송신기를 포함할 수 있고, 안테나 모듈(110, 210)을 수신기 또는 송신기 중 어느 하나와 연결되도록 하는 스위치(e.g. RF 스위치)를 포함할 수 있다. 또한, 통신 프 로세서(120, 220)는 안테나 모듈(110, 210)에 포함된 복수의 안테나들(111, 112, 211, 212) 중 신호를 수신(송 신)하는 안테나를 변경하기 위한 스위치(e.g. RF 스위치)를 포함할 수도 있다. 본 개시의 일 실시예에 따르면, UWB 태그에 포함된 통신 프로세서는 하나의 송신기(미도시)와 두 개 의 안테나들(211, 212)을 연결하는 SPDT (Single Pole Double Throw) 스위치(미도시)를 포함할 수 있다. 이 경 우 SPDT 스위치는 전력을 거의 소모하지 않으므로, UWB 태그는 하나의 안테나만을 포함하는 경우와 비교하 여 추가적인 전력 소모가 거의 없게 된다. UWB 태그의 통신 프로세서는 두 개의 안테나들(211, 212) 을 스위칭하면서 신호를 송신할 수 있고, 따라서 UWB 앵커는 AoD 방식을 통해 UWB 태그의 방향을 측 정할 수 있다. AoD 방식 사용 시 UWB 태그가 안테나들(211, 212)을 스위칭하면서 신호(패킷)들을 송신하는 프로세스에 대해서는 아래에서 도 4 및 도 5를 참조하여 자세히 설명한다. 프로세서(130, 230)는 이하에서 설명되는 실시예들에 따라 UWB 단말(100, 200)이 동작하도록 일련의 과정을 제 어하는 구성으로서, 하나 또는 복수의 프로세서로 구성될 수 있다. 이때, 하나 또는 복수의 프로세서는 CPU,AP(Application Processor), DSP(Digital Signal Processor) 등과 같은 범용 프로세서, GPU, VPU(Vision Processing Unit)와 같은 그래픽 전용 프로세서 또는 NPU(Neural Processing Unit)와 같은 인공지능 전용 프로 세서일 수 있다. 예를 들어, 하나 또는 복수의 프로세서가 인공지능 전용 프로세서인 경우, 인공지능 전용 프로 세서는 특정 인공지능 모델의 처리에 특화된 하드웨어 구조로 설계될 수 있다. 프로세서(130, 230)는 후술할 메모리(140, 240)에 데이터를 기록하거나, 메모리(140, 240)에 저장된 데이터를 읽을 수 있으며, 특히 메모리(140, 240)에 저장된 프로그램을 실행함으로써 미리 정의된 동작 규칙 또는 인공지 능 모델에 따라 데이터를 처리할 수 있다. 따라서, 프로세서(130, 230)는 이후의 실시예들에서 설명되는 동작들 을 수행할 수 있으며, 이후의 실시예들에서 UWB 단말(100, 200)이 수행한다고 설명되는 동작들은 특별한 설명이 없는 한 프로세서(130, 230)가 수행하는 것으로 볼 수 있다. 도 2에서는 통신 프로세서(120, 220)와 프로세서(130, 230)가 각각 별도로 존재하는 것으로 도시되었으나, 통신 프로세서(120, 220)는 프로세서(130, 230)에 포함될 수도 있다. 메모리(140, 240)는 다양한 프로그램이나 데이터를 저장하기 위한 구성으로서, 롬(ROM), 램(RAM), 하드디스크, CD-ROM 및 DVD 등과 같은 저장 매체 또는 저장 매체들의 조합으로 구성될 수 있다. 메모리(140, 240)는 별도로 존재하지 않고 프로세서(130, 230)에 포함되도록 구성될 수도 있다. 메모리(140, 240)는 휘발성 메모리, 비휘발 성 메모리 또는 휘발성 메모리와 비휘발성 메모리의 조합으로 구성될 수도 있다. 메모리(140, 240)에는 이후에 서 설명되는 실시예들에 따른 동작들을 수행하기 위한 프로그램이 저장될 수 있다. 메모리(140, 240)는 프로세 서(130, 230)의 요청에 따라 저장된 데이터를 프로세서(130, 230)에 제공할 수도 있다. 도 3은 본 개시의 일 실시예에 따른, UWB 단말들이 AoA 방식을 이용하여 도래각을 측정하는 방법과, AoD 방식을 이용하여 출발각을 측정하는 방법을 설명하기 위한 도면이다. 도 3에서는 설명에 필요한 부분만을 명확하게 나 타내기 위해 단말에 설치된 안테나들만 도시하였다. AoA 방식과 AoD 방식은 모두 UWB 앵커가 수신한 신호들의 전송 경로의 길이 차이로 인해 발생하는 위상차 에 기초하여 신호의 도래각 또는 출발각을 측정하는 PDoA (Phase Difference of Arrival) 방식에 해당된다. 도 3의 제1 영역에는 AoA 방식을 설명하기 위한 도면이 도시되었고, 도 3의 제2 영역에는 AoD 방식을 설명하기 위한 도면이 도시되었다. 먼저 제1 영역을 참조하여 AoA 방식에 대해서 설명한다. UWB 태그가 하나의 안테나(211 또는 212)를 통해 파장 λ인 반송파(carrier wave) 신호들을 송신하면, UWB 앵커는 두 개의 안테나들(111, 112)을 통해 신호들을 수신할 수 있다. UWB 앵커가 원역장(far field)에 위치한다면 두 개의 안테나들(111, 112)에 입사되는 신호들의 도래각은 동일하다고 가정할 수 있다. 두 개의 안테나들(111, 112)에 입사되는 신호들은 도래각 φ에 따라 전송 경로의 길이 차이( )가 발생 하고, 그에 따라 위상차가 발생하게 된다. UWB 앵커를 기준으로 하는 UWB 태그의 방향은 도래각 φ로 표현할 수 있다. 두 안테나들(111, 112) 간의 간격(d)이 반파장(λ/2)이므로 두 안테나들(111, 112)에 입사된 신호들의 위상차 는 다음의 수학식 1과 같다. 수학식 1"}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "수학식 1로부터 UWB 태그의 방향, 즉 도래각 φ는 다음의 수학식 2로 나타낼 수 있다. 수학식 2"}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "이어서 제2 영역을 참조하여 AoD 방식에 대해서 설명한다. UWB 태그가 두 개의 안테나들(211, 212)을 통해 파장 λ인 반송파 신호들을 송신하면, UWB 앵커는 하 나의 안테나(111 또는 112)를 통해 신호들을 수신할 수 있다. 두 개의 안테나들(211, 212)로부터 송신된 신호들 은 출발각 φ에 따라 전송 경로의 길이 차이( )가 발생하고, 그에 따라 위상차가 발생하게 된다. UWB 앵커를 기준으로 하는 UWB 태그의 방향은 출발각 φ로 표현할 수 있다. 두 개의 안테나들(211, 212)로부터 송신된 신호들의 위상차가 라면, AoA 방식과 유사한 원리에 따라 UWB 태 그의 방향, 즉 출발각 φ는 다음의 수학식 3으로 나타낼 수 있다. 수학식 3"}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "본 개시의 일 실시예에 따르면, 도 1에 도시된 바와 같이 UWB 앵커와 UWB 태그 모두 복수의 안테나들 을 포함하므로, 이상 설명한 AoA 방식 및 AoD 방식 중 어느 하나를 선택적으로 이용하거나 또는 두 방식을 동시 에 이용하여 UWB 단말들(100, 200) 간 방향을 측정할 수 있다. AoD 방식을 이용하기 위해서는 UWB 태그에서 두 개의 안테나들(211, 212)을 이용하여 신호들을 송신해야 한다. 이하에서는 도 4 및 도 5를 참조하여 UWB 태그에서 안테나들(211, 212)을 스위칭하면서 신호를 송신 하는 방법에 대해서 설명한다. 도 4는 본 개시의 일 실시예에 따른, AoD 방식이 적용된 UWB 단말이 구간별로 다른 안테나를 이용하여 패킷을 전송하는 방법을 설명하기 위한 도면이다. 도 4를 참고하면, UWB 태그의 통신 프로세서는 송신기 및 RF 스위치를 포함할 수 있다. RF 스위치는 안테나 모듈에 포함된 안테나들(211, 21 2)과 송신기를 연결하며, 신호 송신 시 두 개의 안테나들(211, 212)을 스위칭할 수 있다. 도 4에 도시된 실시예에서 UWB 태그는 안테나들(211, 212)을 스위칭하며 송신 패킷을 전송한다고 가 정한다. 송신 패킷은 프리앰블(preamble) 구간, 갭(gap) 구간 및 STS (Scrambled Timestamp Sequenct) 구간을 포함할 수 있다. 참고로, STS는 2020년에 표준화된 IEEE 802.15.4z-2020 HRP UWB에서 추가된 암호화 기능의 필드이다. 일 실시예에 따르면, UWB 태그의 통신 프로세서는 구간별로 다른 안테나를 통해 송신 패킷을 전 송하도록 RF 스위치를 제어할 수 있다. 예를 들어, 통신 프로세서는 프리앰블 구간은 제1 안테 나를 통해 송신하고, STS 구간은 제2 안테나를 통해 송신하도록 RF 스위치를 제어할 수 있 다. 이를 위해, 통신 프로세서는 갭 구간에서 제1 안테나에서 제2 안테나로 스위칭되도록 RF 스위치를 제어할 수 있다. 통신 프로세서가 송신 패킷의 구간별로 안테나들(211, 212)을 스 위칭하는 프로세스에 대해서는 도 5를 참조하여 자세히 설명한다. 도 5는 본 개시의 일 실시예에 따른, UWB 단말이 AoD 방식의 사용 여부에 따라서 안테나를 스위칭하는 프로세스 를 설명하기 위한 순서도이다. 도 5를 참고하면, 510 단계에서 UWB 태그의 통신 프로세서는 AoD 방식 을 사용할지 여부를 결정한다. AoD 방식의 사용 여부는 사용자의 설정에 의해 결정될 수도 있고, 본 개시에서 설명되는 실시예들에서와 같이 UWB 앵커 및 UWB 태그의 상태(status)에 따라서 결정될 수도 있다. (예를 들어, UWB 앵커가 이동하는 상황이라면 AoD 방식을 사용하고, UWB 태그가 이동하는 상황이라면AoD 방식을 사용하지 않을 수 있음) 510 단계에서 AoD 방식을 사용하는 것으로 결정되면, 521 단계로 진행하여 통신 프로세서는 인터럽트 사용 을 세팅할 수 있다. 예를 들어, 통신 프로세서는 송신 패킷 중 프리앰블 구간의 송신이 완료되 면 IRQ (Interrupt Request) 핀 신호가 발생하도록 세팅할 수 있다. 522 단계에서 통신이 시작되면 통신 프로세서는 복수의 안테나들(211, 212) 중 제1 안테나를 통해 송 신 패킷을 송신하기 시작할 수 있다. 523 단계에서 프리앰블 구간의 송신이 완료되었음이 확인되면, 통신 프로세서는 524 단계에서 인터럽트(IRQ 핀 신호)를 발생시킬 수 있다. 525 단계에서 통신 프로세서 에 포함된 MCU (Micro Controller Unit)는 IRQ 핀 신호를 수신하면 RF 스위치 핀의 출력을 변경함으 로써 526 단계에서 안테나 스위칭(송신기에 연결되는 안테나가 제1 안테나에서 제2 안테나로 변 경)이 수행되도록 할 수 있다. 524 단계부터 526 단계까지는 송신 패킷의 갭 구간 동안에 수행될 수 있다. 따라서, 갭 구간 이 후의 STS 구간은 527 단계에서 제2 안테나를 통해 송신될 수 있다. 이러한 과정을 거쳐 528 단계에서 페이로드(payload) 송신이 완료될 수 있다. 510 단계에서 AoD 방식을 사용하지 않는 것으로 결정되면, 531 단계로 진행하여 통신 프로세서는 복수의 안테나들(211, 212) 중 어느 하나를 통해 송신 패킷을 송신하면서 통신을 시작할 수 있다. 532 단계에서 프리앰블 구간의 송신이 완료되었음이 확인되면, 통신 프로세서는 533 단계에서 STS 구간을 송 신할 수 있다. 이때, 통신 프로세서는 프리앰블 구간 및 STS 구간을 동일한 안테나(211 또는 212)를 통해 송신하게 된다. 534 단계에서 페이로드 송신이 완료됨으로서 송신 프로세스가 종료될 수 있다. 이와 같이, UWB 태그의 통신 프로세서는 AoD 방식 사용 시 송신 패킷의 특정 구간의 전송이 완 료되면 인터럽트가 발생하여 송신 안테나가 스위칭되도록 설정함으로써 송신 패킷의 구간별로 다른 안테나 를 통해 송신되도록 할 수 있다. 다시 도 4로 돌아와서, UWB 태그가 복수의 안테나들(211, 212)을 스위칭하며 송신 패킷을 전송하면, UWB 앵커는 복수의 안테나들(111, 112) 중 어느 하나를 통해 수신 패킷을 수신할 수 있다. 송신 패킷 과 수신 패킷은 실질적으로 동일한 패킷이나 송신단과 수신단에서 다르게 명칭을 붙였다. 따라서, 수 신 패킷도 프리앰블 구간, 갭 구간 및 STS 구간을 포함할 수 있다. UWB 앵커는 수신 패킷의 구간별로 채널 임펄스 응답(Channel Impulse Response, CIR)을 획득할 수 있다. UWB 앵커는 수신 패킷의 프리앰블 구간에 대해서 제1 채널 임펄스 응답(CIR1)을 획득하고, STS 구간에 대해서 제2 채널 임펄스 응답(CIR2)을 획득할 수 있다. UWB 앵커는 제1 채널 임펄스 응답(CIR1)과 제2 채널 임펄스 응답(CIR2) 간의 위상차를 구하고, 위상차에 기초하여 UWB 태그에서 의 신호의 출발각을 산출할 수 있다. UWB 앵커가 위상차에 기초하여 신호의 출발각을 획득하는 방법은 앞 서 도 3을 참조하여 설명한 바와 같다. 본 개시의 일 실시예에 따르면, UWB 앵커는 AoA 방식과 AoD 방식을 동시에 사용하여 UWB 태그의 방향 을 측정할 수 있다. 이하에서는 도 6을 참조하여, UWB 앵커가 AoA 방식과 AoD 방식을 동시에 사용하는 경 우 패킷의 구간별 송수신 및 위상차 비교에 대해서 자세히 설명한다. 도 6은 본 개시의 일 실시예에 따른, UWB 단말이 AoA 방식과 AoD 방식을 동시에 사용하는 경우 신호들의 위상차 를 비교하는 방법을 설명하기 위한 도면이다. 도 6을 참고하면, UWB 태그는 제1 송신 안테나(TX ANT1)와 제2 송신 안테나(TX ANT2)를 이용하여 송신 패킷을 송신하고, UWB 앵커는 제1 수신 안테나(RX ANT 1)와 제2 수신 안테나(RX ANT2)를 이용하여 수신 패킷을 수신할 수 있다. 송신 패킷 및 수신 패킷 은 모두 프리앰블 구간, 제1 갭 구간, 제1 STS 구간, 제2 갭 구간, 제2 STS 구간 및 제3 갭 구간을 포함할 수 있다. UWB 태그는 송신 패킷의 구간별로 다른 안테나를 이용 하여 패킷이 송신되도록 안테나들(TX ANT1, TX ANT2)을 스위칭할 수 있다. 마찬가지로, UWB 앵커는 수신 패킷의 구간별로 다른 안테나를 이용하여 패킷이 수신되도록 안테나들(RX ANT1, RX ANT2)을 스위칭할 수 있다. 먼저 UWB 태그가 송신 패킷을 송신하는 과정을 살펴보면, UWB 태그는 제1 송신 안테나(TX ANT 1)를 이용하여 프리앰블 구간을 송신할 수 있다. 이어서, 제1 갭 구간 동안 UWB 태그가 제1 송 신 안테나(TX ANT1)에서 제2 송신 안테나(TX ANT2)로 안테나를 스위칭하면, 제1 STS 구간 및 제2 STS 구간은 모두 제2 송신 안테나(TX ANT2)를 통해 송신될 수 있다. UWB 앵커가 수신 패킷을 수신하는 과정을 살펴보면, UWB 앵커는 제1 수신 안테나(RX ANT1)를 이 용하여 프리앰블 구간을 수신할 수 있다. 이어서, 제1 갭 구간 동안 UWB 앵커가 제1 수신 안테 나(RX ANT1)에서 제2 수신 안테나(RX ANT2)로 안테나를 스위칭하면, 제1 STS 구간은 제2 수신 안테나(RX ANT2)를 통해 수신될 수 있다. 그리고 이어서, 제2 갭 구간 동안 UWB 앵커가 제2 수신 안테나(RX ANT2)에서 제1 수신 안테나(RX ANT1)로 안테나를 스위칭하면, 제2 STS 구간은 제1 수신 안테나(RX ANT1) 를 통해 수신될 수 있다. UWB 앵커는 수신 패킷의 수신이 완료되면, 구간별로 채널 임펄스 응답을 구할 수 있다. 도 6에 도시 된 실시예에서 프리앰블 구간에 대응되는 채널 임펄스 응답은 제11 채널 임펄스 응답(CIR11)이라고 하고, 제1 STS 구간에 대응되는 채널 임펄스 응답은 제22 채널 임펄스 응답(CIR22)이라고 하고, 제2 STS 구간 에 대응되는 채널 임펄스 응답은 제21 채널 임펄스 응답(CIR21)이라고 한다. UWB 앵커는 획득한 채널 임펄스 응답들(CIR11, CIR22, CIR21) 간의 위상차를 구함으로써 AoA 방식 또는 AoD 방식을 이용하여 UWB 태그의 방향을 측정할 수 있다. AoA 방식을 이용하기 위해서는 동일한 안테나를 통해 송신되고 서로 다른 안테나를 통해 수신된 두 패킷 간의 위상차가 필요하다. 따라서, UWB 앵커는 제22 채널 임펄스 응답(CIR22)과 제21 채널 임펄스 응답(CIR21) 간의 위상차를 구하고, 위상차에 기초하여 신호의 도래각을 획득(산출)할 수 있다. AoD 방식을 이용하기 위해서는 서로 다른 안테나를 통해 송신되고 동일한 안테나를 통해 수신된 두 패킷 간의 위상차가 필요하다. 따라서, UWB 앵커는 제11 채널 임펄스 응답(CIR11)과 제21 채널 임펄스 응답(CIR21) 간의 위상차를 구하고, 위상차에 기초하여 신호의 출발각을 획득(산출)할 수 있다. 이와 같이, 패킷에 포함된 복수의 구간들을 다양한 안테나 조합을 통해 송수신함으로써 UWB 앵커는 AoA 방 식 및 AoD 방식을 이용하여 UWB 태그의 방향을 측정할 수 있다. 다만, 도 6에 도시된 실시예에서의 송수신 안테나들의 스위칭 타이밍은 하나의 예에 불과하고, 이와 다르게 얼마든지 다양하게 설정될 수 있다. 앞서 설명한 바와 같이, 본 개시의 실시예에 따라 AoA 방식과 AoD 방식을 모두 사용 가능한 시스템이라면 다양 한 기술적 효과들을 얻을 수 있다. 특히, UWB 단말들(100, 200)의 상태(status)에 따라서 AoA 방식 및 AoD 방식 중 적어도 하나를 선택하여 방향을 측정함으로써 다음과 같은 효과들을 얻을 수 있다. 1. 이동하는 단말의 지향각을 측정 UWB에 기반한 방향 측정 시스템에서 AoA 방식 및 AoD 방식을 동시에 사용하면, 이동하는 단말의 지향각을 측정 할 수 있다. 도 7을 참조하여 자세히 설명한다. 도 7은 본 개시의 일 실시예에 따른, UWB 단말이 AoA 방식과 AoD 방식을 동시에 사용할 때 이동하는 단말의 지 향각을 측정하는 방법을 설명하기 위한 도면이다. 도 7에서는 설명에 필요한 부분들을 잘 나타낼 수 있도록 각 단말에 포함된 안테나들만을 도시하였다. 도 7에 도시된 실시예에서 UWB 태그는 고정된 상태에서 UWB 앵커 만 움직인다고 가정한다. 먼저 제1 영역 내지 제3 영역의 도면을 참조하여, UWB 태그와 UWB 앵커의 지향각이 동일한 상태에서 AoA 방식 및 AoD 방식 중 적어도 하나를 통해 측정되는 출발각 및 도래각에 대해서 설명한다. 제1 영역에 도시된 상황에서 UWB 앵커는 AoD 방식만을 이용하고, 따라서 UWB 앵커는 신호의 출 발각(φ1)만을 측정할 수 있다. 반대로, 제2 영역에 도시된 상황에서 UWB 앵커는 AoA 방식만을 이용 하고, 따라서 UWB 앵커는 신호의 도래각(θ1)만을 측정할 수 있다. 제3 영역에 도시된 상황에서 UWB 앵커는 AoA 방식과 AoD 방식을 동시에 이용하므로 신호의 출발각(φ1) 및 도래각(θ1)을 모두 측정할 수 있 다. 제3 영역에 도시된 상황에서는 UWB 태그와 UWB 앵커의 안테나가 정렬된 상태이므로, 즉 UWB 태 그의 지향각과 UWB 앵커의 지향각이 동일한 상태이므로 출발각(φ1)과 도래각(θ1)이 서로 동일함을 알 수 있다. UWB 앵커가 이동함에 따라 UWB 앵커의 지향각이 변화하게 되면 신호의 출발각과 도래각은 서로 달라 질 수 있다. 제4 영역에 도시된 상황에서 UWB 앵커가 이동하면서 지향각이 변화하게 되었다. UWB 앵커는 AoA 방식과 AoD 방식을 동시에 이용함으로써 출발각(φ2) 및 도래각(θ2)을 모두 측정할 수 있다. 이 때, 출발각(φ2)과 도래각(θ2)이 서로 다른 이유는 UWB 앵커의 지향각이 UWB 태그의 지향각과 다르기 때문이다. UWB 태그의 지향각을 기준(0도)으로 했을 때 UWB 앵커의 지향각을 α라고 하면, 지향각(α)과 도래각(θ2)의 합은 출발각(φ2)의 관계가 성립된다. 따라서, UWB 앵커는 AoA 방식 및 AoD 방식을 이용하여 출발각(φ2) 및 도래각(θ2)을 측정하고, 그로부터 UWB 앵커의 지향각(α)을 산출할 수 있 다. 도 7에서는 UWB 태그는 고정되고 UWB 앵커가 이동하는 상황에서 UWB 앵커의 지향각을 산출하는 실시예에 대해서 설명했지만, 반대로 UWB 앵커는 고정되고 UWB 태그가 이동하는 상황에서 UWB 태그 의 지향각을 산출할 수도 있다. 동일한 원리로 UWB 앵커는 AoA 방식 및 AoD 방식을 동시에 이용하여 출발각 및 도래각을 모두 구하고, 출발각 및 도래각을 이용하여 UWB 태그의 지향각을 산출할 수 있다. 2. 방향 측정 범위의 확대 두 개의 안테나가 설치된 UWB 단말이 AoA 방식 또는 AoD 방식을 이용하여 신호의 도래각 또는 출발각을 측정하 는 경우, 도래각 또는 출발각의 크기가 45도 이내인 범위에서는 위상차의 변화에 따라 각도(도래각 또는 출발각)가 변화하는 정도가 일정하지만, 그 외의 범위에서는 각도의 변화에 따른 위상차의 변화가 작아 방향 측 정 시 오차가 증가하게 된다. 따라서 AoA 방식 또는 AoD 방식 중 어느 하나만을 이용하여 방향을 측정한다면, 일정 수준 이상의 정확도로 방향을 측정할 수 있는 범위를 넓히기 위해서는 두 개보다 더 많은 안테나가 필요하 게 된다. 본 개시의 일 실시예에서는 UWB 기반 위치 측정 시스템에서 AoA 방식과 AoD 방식을 동시에 이용함으로써 측정 가능한 방향(도래각 또는 출발각)의 범위가 확장될 수 있다. 도 8을 참조하여 자세히 설명한다. 도 8은 본 개시의 일 실시예에 따른, UWB 기반의 위치 측정 시스템에서 AoA 방식 및 AoD 방식을 동시에 이용함 으로써 측정 가능한 방향의 범위가 확대되는 효과를 설명하기 위한 도면이다. 도 8에 도시된 실시예에서 UWB 앵커의 지향각과 UWB 태그의 지향각은 직각을 이룬다. 이와 같이, 단 말들(100, 200)의 지향각이 이루는 각도가 직각인 경우 본 실시예에 따른 방법이 적용될 수 있다. 또한, 단말들 (100, 200)의 지향각이 이루는 각도가 직각이 아니라도 일정 범위(e.g. - 30도에서 + 30도) 이내이고, UWB 앵커 가 그 각도(두 단말들의 지향각이 이루는 각도)를 알 수 있다면 본 실시예의 방법을 적용할 수 있다. 예를 들어, UWB 앵커는 앞서 도 7을 참조하여 설명한 방법을 이용하여 두 단말들(100, 200)의 지향각이 이루는 각도를 측정할 수 있다. 단말들(100, 200)의 지향각이 이루는 각도가 일정 범위 이내인 경우로 제한하는 이유는, 지향각이 이루는 각도가 일정 범위를 벗어나면 방향 측정 범위가 확장되는 효과가 거의 없어지기 때문 이다. (예를 들어, 단말들(100, 200)의 지향각이 이루는 각도가 0도이거나 180도인 경우) 도 8을 참고하면, UWB 앵커는 AoA 방식을 지원하고, UWB 태그는 AoD 방식을 지원한다. 따라서, UWB 앵커는 UWB 태그로부터 수신되는 신호의 도래각과 출발각을 모두 측정할 수 있다. UWB 앵커가 방향을 탐지하는 프로세스를 자세히 설명하면 다음과 같다. UWB 앵커는 UWB 태그로부터 신호들을 수신하면, AoD 방식을 이용하여 신호들의 출발각을 측정하고, AoA 방식을 이용하여 신호들의 출발각을 측정할 수 있다. UWB 앵커는 측정된 출발각 및 도래각에 기초하여 방향 측정에 이용할 방식을 선택할 수 있다. 일 실시예에 따르면, UWB 앵커는 출발각 및 도래각의 크기를 각각 미리 설정된 제1 기준값 및 제2 기준값과 비교한 결 과에 기초하여 방향 측정에 이용할 방식을 선택할 수 있다. 이때, 제1 기준값과 제2 기준값은 동일할 수도 있다. 도 8에 도시된 바와 같이 UWB 앵커의 지향각과 UWB 태그의 지향각이 이루는 각도가 직각이고, 제1 기 준값 및 제2 기준값은 모두 45도라고 가정하고 구체적인 프로세스를 설명한다. UWB 앵커는 출발각 및 도래각을 측정한 결과, 출발각의 크기가 제1 기준값(45도) 이하인 경우 AoD 방식을 선택할 수 있고, 도래각의 크기가 제2 기준값(45도) 이하인 경우 AoA 방식을 선택할 수 있다. 앞서 설명한 바와 같이 두 개의 안테나를 이용하여 방향 측정 시 각도(출발각 또는 도래각)의 크기가 45도 이내라면 높은 정확도 를 기대할 수 있기 때문이다.만약, UWB 앵커가 측정한 출발각 및 도래각의 크기가 각각 제1 기준값(45도) 및 제2 기준값(45도) 이하라 면, UWB 앵커는 출발각과 도래각의 크기 비교를 통해 AoA 방식 또는 AoA 방식 중 어느 하나를 선택할 수 있다. 일 실시예에 따르면, UWB 앵커는 측정된 출발각 및 도래각 중 크기가 작은 것에 대응되는 측정 방식 을 선택할 수 있다. 예를 들어, 측정된 출발각과 도래각 중에서 출발각의 크기가 더 작다면, UWB 앵커는 AoD 방식을 선택할 수 있다. 왜냐하면, 측정된 각도의 크기가 작을수록 정확도가 높다고 볼 수 있기 때문이다. 반대로, UWB 앵커가 측정한 출발각 및 도래각의 크기가 각각 제1 기준값(45도) 및 제2 기준값(45도) 초과 인 경우에도, UWB 앵커는 출발각과 도래각의 크기 비교를 통해 AoA 방식 또는 AoA 방식 중 어느 하나를 선 택할 수 있다. 일 실시예에 따르면, 이 경우에도 UWB 앵커는 측정된 출발각 및 도래각 중 크기가 작은 것 에 대응되는 측정 방식을 선택할 수 있다. 예를 들어, 측정된 출발각과 도래각 중에서 도래각의 크기가 더 작다 면, UWB 앵커는 AoA 방식을 선택할 수 있다. 역시, 측정된 각도의 크기가 작을수록 정확도가 높다고 볼 수 있기 때문이다. 한편 본 개시의 일 실시예에 따르면, UWB 앵커는 출발각 및 도래각을 측정한 후, 측정된 출발각 및 도래각 의 크기를 기준값과 비교하는 과정을 거치지 않고, 바로 출발각과 도래각의 크기 비교를 통해 AoA 방식 또는 AoA 방식 중 어느 하나를 선택할 수도 있다. 예를 들어, 측정된 출발각과 도래각 중에서 도래각의 크기가 더 작 다면, UWB 앵커는 AoA 방식을 선택할 수 있다. 도 8의 우측에는 UWB 앵커가 전방으로 이동함에 따라 UWB 태그로부터 수신되는 신호의 출발각 및 도 래각이 변화하는 예를 도시하였다. 도 8에 표시된 출발각 및 도래각은 실제의 정확한 값에 해당되고, UWB 앵커 에서 측정하게 되는 출발각 및 도래각은 오차로 인해 도 8에 표시된 값들과 차이가 있을 수 있다. 제1 위치에서 신호의 출발각은 60도이고, 신호의 도래각은 30도이다. 이때, UWB 앵커에서 측정한 출 발각 및 도래각은 오차로 인해 실제 값들과는 차이가 있을 수 있다. 예를 들어, 제1 위치에서 UWB 앵커 가 측정한 출발각은 68도이고, 도래각은 31도라고 가정한다. (출발각은 크기가 45도를 초과하므로 도래각 에 비해 상대적으로 큰 오차를 가질 수 있음) UWB 앵커는 측정된 출발각(68도)을 제1 기준값(45도)과 비교 하고, 측정된 도래각(31도)을 제2 기준값(45도)과 비교할 수 있다. UWB 앵커는 도래각(31도)의 크기가 제2 기준값(45도) 이하이므로 AoA 방식을 방향 측정에 사용할 방식으로 선택할 수 있다. 또는 일 실시예에 따르면, UWB 앵커는 측정된 출발각(68도)과 도래각(31도)의 크기를 비교하고, 도래각(31도)의 크기가 더 작으므로 AoA 방식을 선택할 수도 있다. UWB 앵커는 선택된 AoA 방식을 이용하여 방향을 측정할 수 있다. 예를 들어, UWB 앵커는 다시 도래각 을 측정하지는 않고, 앞서 측정한 출발각과 도래각 중에서 출발각(68도)은 무시하고 도래각(31도)을 선택(AoA 방식의 선택)할 수 있다. UWB 앵커는 선택된 도래각(31도)에 기초하여 출발각은 59도라고 추정할 수 있으 며, 이와 같이 획득된 도래각(31도) 및 출발각(59도)에 따라 UWB 태그의 방향을 결정할 수 있다. 제2 위치에서 신호의 출발각 및 도래각은 모두 45도이다. UWB 앵커에서 측정한 출발각 및 도래각은 오차로 인해 실제 값들과는 차이가 있을 수 있다. 이와 같이, 출발각 및 도래각이 각각 제1 기준값(45도) 및 제 2 기준값(45도)에 근접하다면 다음과 같이 다양한 상황들이 발생할 수 있다. 측정된 출발각 또는 도래각 중 어느 하나만 범위를 만족하는 경우 예를 들어, 제2 위치에서 UWB 앵커가 측정한 출발각은 44도이고, 도래각은 47도라고 가정한다. UWB 앵커는 측정된 출발각(44도)을 제1 기준값(45도)과 비교하고, 측정된 도래각(47도)을 제2 기준값(45도)과 비교할 수 있다. UWB 앵커는 출발각(44도)의 크기가 제1 기준값(45도) 이하이므로 AoD 방식을 방향 측정에 사용할 방식으로 선택할 수 있다. 즉, UWB 앵커는 출발각(44도)을 선택하고, 출발각(44도)에 기초하여 도 래각은 46도라고 추정할 수 있으며, 이와 같이 획득된 출발각(44도) 및 도래각(46도)에 따라 UWB 태그의 방향을 결정할 수 있다. 또한 예를 들어, 제2 위치에서 UWB 앵커가 측정한 출발각이 46도이고 도래각은 43도라고 가정하면, 도래각(43도)의 크기가 제2 기준값(45도) 이하이므로 UWB 앵커는 AoA 방식을 방향 측정에 사용할 방식으로 선택할 수 있다. 즉, UWB 앵커는 도래각(43도)을 선택하고, 도래각(43도)에 기초하여 출발각은 47도라고 추정할 수 있으며, 이와 같이 획득된 출발각(47도) 및 도래각(43도)에 따라 UWB 태그의 방향을 결정할 수 있다. 측정된 출발각 및 도래각이 모두 범위를 만족하는 경우 예를 들어, 제2 위치에서 UWB 앵커가 측정한 출발각은 44도이고, 도래각은 43도라고 가정한다. 측정 된 출발각(44도) 및 도래각(43도)은 각각 제1 기준값(45도) 및 제2 기준값(45도) 이하이다. 이와 같이, 출발각 및 도래각이 모두 범위를 만족하는 경우에 UWB 앵커는 출발각(44도)과 도래각(43도)의 크기를 비교한 결과 에 기초하여 AoD 방식 또는 AoA 방식 중 어느 하나를 선택할 수 있다. 일 실시예에 따르면, 도래각(43도)의 크 기가 출발각(44도)의 크기보다 작으므로, UWB 앵커는 AoA 방식을 선택할 수 있다. 따라서, UWB 앵커는 도래각(43도)을 선택하고, 도래각(43도)에 기초하여 출발각은 47도라고 추정할 수 있 으며, 이와 같이 획득된 출발각(47도) 및 도래각(43도)에 따라 UWB 태그의 방향을 결정할 수 있다. 측정된 출발각 및 도래각이 모두 범위를 만족하지 않는 경우 예를 들어, 제2 위치에서 UWB 앵커가 측정한 출발각은 46도 이고, 도래각은 47도라고 가정한다. 측정 된 출발각(46도) 및 도래각(47도)은 각각 제1 기준값(45도) 및 제2 기준값 초과이다. 이와 같이, 출발각 및 도래각이 모두 범위를 만족하지 않는 경우 UWB 앵커는 출발각(46도)과 도래각(47도)의 크기를 비교한 결과 에 기초하여 AoD 방식 또는 AoA 방식 중 어느 하나를 선택할 수 있다. 일 실시예에 따르면, 출발각(46도)의 크 기가 도래각(47도)의 크기보다 작으므로, UWB 앵커는 AoD 방식을 선택할 수 있다. 따라서, UWB 앵커는 출발각(46도)을 선택하고, 출발각(46도)에 기초하여 도래각은 44도라고 추정할 수 있 으며, 이와 같이 획득된 출발각(46도) 및 도래각(44도)에 따라 UWB 태그의 방향을 결정할 수 있다. 제3 위치에서 신호의 출발각은 30도이고, 신호의 도래각은 60도이다. 이때, UWB 앵커에서 측정한 출 발각 및 도래각은 오차로 인해 실제 값들과는 차이가 있을 수 있다. 예를 들어, 제3 위치에서 UWB 앵커 가 측정한 출발각은 29도이고, 도래각은 55도라고 가정한다. UWB 앵커는 측정된 출발각(29도)을 제1 기준값(45도)과 비교하고, 측정된 도래각(55도)을 제2 기준값(45도)과 비교할 수 있다. UWB 앵커는 출발각 (29도)의 크기가 제1 기준값(45도) 이하이므로 AoD 방식을 방향 측정에 사용할 방식으로 선택할 수 있다. 또는 일 실시예에 따르면, UWB 앵커는 측정된 출발각(29도)과 도래각(55도)의 크기를 비교하고, 출발각(29도)의 크기가 더 작으므로 AoD 방식을 선택할 수도 있다. 따라서, UWB 앵커는 출발각(29도)을 선택하고, 출발각(29도)에 기초하여 도래각은 71도라고 추정할 수 있 으며, 이와 같이 획득된 출발각(29도) 및 도래각(71도)에 따라 UWB 태그의 방향을 결정할 수 있다. 제4 위치 및 제5 위치에 대해서도, 제3 위치에 대해서 설명한 방식에 따라 UWB 앵커는 방 향 측정에 이용할 방식을 선택하고, 그에 따라 UWB 태그의 방향을 측정할 수 있다. 3. 지향각의 변화로 인한 방향 보정 불필요 앞서 설명한 바와 같이, UWB 기반의 위치 측정 시스템에서 AoA 방식만 이용한다면, UWB 앵커가 이동하면서 지향각이 변화하는 경우 방향 보정이 필요하다. 예를 들어, UWB 앵커는 내부에 설치된 가속도 센서나 자이 로(Gyro) 센서 등을 이용해서 지향각을 추정하고, 그에 따라 방향(도래각)을 보정할 수 있다. 마찬가지로, UWB 기반의 위치 측정 시스템에서 AoD 방식만 이용한다면, UWB 태그가 이동하면서 지향각이 변화하는 경우 방향 보정이 필요하다. 본 개시의 일 실시예에 따르면, UWB에 기반한 위치 측정 시스템에서 어떤 단말이 이동 중인지에 따라서 AoA 방 식 또는 AoD 방식 중 어느 하나를 선택하여 방향을 측정하고, 따라서 이동 중인 단말의 지향각 변화로 인한 방 향 보정을 할 필요가 없다. 도 9a 및 도 9b는 본 개시의 일 실시예에 따른, UWB 기반의 위치 측정 시스템에서 AoA 방식 및 AoD 방식을 동시 에 이용함으로써 어느 하나의 단말이 이동하더라도 방향을 보정할 필요가 없는 효과를 설명하기 위한 도면이다. 도 9a에 도시된 실시예에서, UWB 앵커는 고정된 상태에서 UWB 태그가 이동한다고 가정한다. UWB 태그 는 이동하면서 지향각이 변화할 수 있고, 따라서 만약 UWB 앵커가 신호의 출발각을 측정한다면 출발 각 측정의 기준도 계속해서 달라질 수 있다. 반면, UWB 앵커의 지향각은 일정하게 유지되므로 UWB 앵커 가 신호의 도래각을 측정한다면 UWB 태그의 이동에도 불구하고 일정한 기준으로 도래각이 측정될 수 있다. 따라서, 도 9a에 도시된 실시예와 같이 UWB 앵커는 고정되고 UWB 태그가 이동하는 상태라면, UWB 앵커는 AoA 방식을 이용하여 방향을 측정할 수 있다. 도 9b에 도시된 실시예에서는, UWB 태그는 고정된 상태에서 UWB 앵커가 이동한다고 가정한다. UWB 앵 커는 이동하면서 지향각이 변화할 수 있고, 따라서 만약 UWB 앵커가 신호의 도래각을 측정한다면 도래각 측정의 기준도 계속해서 달라질 수 있다. 반면, UWB 태그의 지향각은 일정하게 유지되므로 UWB 앵커 가 신호의 출발각을 측정한다면 UWB 앵커의 이동에도 불구하고 일정한 기준으로 출발각이 측정될 수 있다. 따라서, 도 9b에 도시된 실시예와 같이 UWB 태그는 고정되고 UWB 앵커가 이동하는 상태라면, UWB 앵커는 AoD 방식을 이용하여 방향을 측정할 수 있다. 이와 같이, 두 단말들(100, 200) 중 어느 단말이 이동하는지에 따라 방향 측정 방식을 선택하기 위해서는 UWB 앵커가 어떤 단말이 이동 중인지 파악할 수 있어야 한다. UWB 앵커는 다양한 방법에 의해 단말 자신 이 이동 중인지 여부를 알 수 있다. 예를 들어, UWB 앵커는 내부의 가속도 센서 또는 자이로 센서 등을 이 용해서 자신이 이동했는지 여부를 판단할 수 있다. 또는 예를 들어, UWB 앵커는 GPS 모듈이나 셀룰러 통신 을 이용한 위치 측정을 통해 자신이 이동했는지 여부를 판단할 수 있다. UWB 앵커는 만약 자신이 이동하지 않았는데 출발각 또는 도래각 중 어느 하나가 변화한다면 UWB 태그가 이동하는 것으로 판단할 수 있다. 이하에서는 도 10 내지 도 12를 참조하여, 본 개시의 실시예들에 따른 UWB 단말들 간 방향을 탐지하는 방법에 대해서 설명한다. 도 10 내지 도 12의 순서도에 포함된 단계들은 다른 특별한 언급이 없는 한 UWB 앵커, 즉 수신 단말에 의해 수행된다고 가정한다. 도 10 내지 도 12는 UWB 앵커에서 시계열적으로 수행되는 동작 들을 포함하므로, 앞서 도 1 내지 도 9를 참조하여 UWB 앵커에 대해서 설명된 내용들은, 이하에서 생략되 더라도 이하의 실시예들에도 동일하게 적용될 수 있음은 자명하다. 도 10을 참고하면, 1001 단계에서 송신 단말에서 복수의 안테나들을 통해 신호들을 송신하고, 수신 단말에서 복 수의 안테나들을 통해 신호들을 수신할 수 있다. 신호의 송신 시 안테나들을 스위칭하는 방법은 앞서 도 4 및 도 5를 참조하여 설명한 바와 같다. 신호의 수신 시 안테나들을 스위칭하는 방법도 유사하게 구현될 수 있다. 1002 단계에서 수신 단말은, 송신 단말 및 수신 단말의 상태에 따라서 AoD 방식 및 AoA 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 단말들 간의 방향을 측정할 수 있다. 1002 단계에 포함되는 세부 단계들에 대해서는 아래에서 도 11 및 도 12를 참조하여 설명한다. 도 11은 도 10의 1002 단계에 포함되는 세부 단계들을 설명하기 위한 순서도이다. 도 11을 참고하면, 수신 단말 은, 1101 단계에서 AoD 방식을 이용하여 신호들의 출발각을 측정하고, 1102 단계에서 AoA 방식을 이용하여 신호 들의 도래각을 측정할 수 있다. 1103 단계에서 수신 단말은 출발각 및 도래각에 기초하여 이동 중인 단말의 지 향각을 획득(측정)할 수 있다. 도 12도 도 10의 1002 단계에 포함되는 세부 단계들을 설명하기 위한 순서도이다. 도 12의 방법을 이용하기 위 해서는, 송신 단말의 지향각과 수신 단말의 지향각이 이루는 각도가 미리 설정된 일정 범위 이내일 필요가 있다. 도 12를 참고하면, 수신 단말은, 1201 단계에서 AoD 방식을 이용하여 신호들의 출발각을 측정하고, 1202 단계에 서 AoA 방식을 이용하여 신호들의 도래각을 측정할 수 있다. 1203 단계에서 수신 단말은, 측정된 출발각 및 도래각에 기초하여 단말들 간 방향 측정에 이용할 방식을 선택할 수 있다. 일 실시예에 따르면, 송신 단말은, 출발각의 크기가 미리 설정된 제1 기준값 이하인 경우 AoD 방식을 선택하고, 도래각의 크기가 미리 설정된 제2 기준값 이하인 경우 AoA 방식을 선택할 수 있다. 일 실시예에 따르면, 출발각의 크기 및 도래각의 크기가 각각 제1 기준값 및 제2 기준값 이하이거나, 출발각의 크기 및 도래각의 크기가 각각 제1 기준값 및 제2 기준값 초과인 경우, 송신 단말은 출발각과 도래각의 크기를 비교한 결과에 기초하여 AoD 방식 또는 AoA 방식 중 어느 하나를 선택할 수 있다. 예를 들어, 송신 단말은 출발 각과 도래각 중 크기가 작은 것에 대응되는 방식을 선택할 수 있다. 일 실시예에 따르면, 송신 단말은, 출발각 및 도래각을 기준값과 비교하는 과정을 거치지 않고, 출발각과 도래 각의 크기를 비교한 결과에 기초하여 방향 측정에 이용할 방식을 선택할 수도 있다. 예를 들어, 송신 단말은 출 발각의 크기가 도래각의 크기보다 작다면 AoD 방식을 선택하고, 도래각의 크기가 출발각의 크기보다 작다면 AoA 방식을 선택할 수 있다. 1204 단계에서 수신 단말은, 선택된 방식에 따라 단말들 간의 방향을 측정할 수 있다. 한편 일 실시예에 따르면 1002 단계를 수행함에 있어서, 송신 단말은, 송신 단말은 정지하고 수신 단말이 이동 하는 상태라면 AoD 방식을 이용하여 단말들 간의 방향을 측정하고, 수신 단말은 정지하고 송신 단말이 이동하는상태라면 AoA 방식을 이용하여 단말들 간의 방향을 측정할 수도 있다. 본 개시의 일 실시예에 따른, UWB 통신을 수행하며, 각각 복수의 안테나들을 구비하는 단말들 간의 방향을 측정 하는 방법은, 송신 단말에서 복수의 안테나들을 통해 신호들을 송신하고, 수신 단말에서 복수의 안테나들을 통 해 상기 신호들을 수신하는 단계 및 상기 송신 단말 및 수신 단말의 상태(status)에 따라서 AoD (Angle of Departure) 방식 및 AoA (Angle of Arrival) 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 상기 단말들 간의 방향을 측정하는 단계를 포함하며, 상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테 나를 통해 송신된 신호들 간의 위상차(phase difference)에 기초하여 상기 송신된 신호들의 출발각(angle of departure, AoD)을 측정하는 방식이고, 상기 AoA 방식은 상기 수신 단말에서 둘 이상의 서로 다른 안테나를 통 해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각(angle of arrival, AoA)을 측정하는 방 식일 수 있다. 일 실시예에 따르면, 상기 송신 단말 또는 수신 단말 중 어느 하나의 단말이 이동하는 상태라면, 상기 단말들 간의 방향을 측정하는 단계는, 상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하는 단계, 상기 AoA 방 식을 이용하여 상기 신호들의 도래각을 측정하는 단계 및 상기 출발각 및 상기 도래각에 기초하여 상기 이동 중 인 단말의 지향각(angle of orientation)을 획득하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 송신 단말의 지향각과 상기 수신 단말의 지향각이 이루는 각도가 미리 설정된 일정 범위 이내라면, 상기 단말들 간의 방향을 측정하는 단계는, 상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하는 단계, 상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정하는 단계, 상기 출발각 및 상기 도래각 에 기초하여 상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계 및 상기 선택된 방식에 따라 상기 단 말들 간의 방향을 측정하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계는, 상기 출발각의 크기가 미 리 설정된 제1 기준값 이하인 경우 상기 AoD 방식을 선택하고, 상기 도래각의 크기가 미리 설정된 제2 기준값 이하인 경우 상기 AoA 방식을 선택할 수 있다. 일 실시예에 따르면, 상기 출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 이하이거나, 또는 상기 출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 초과 인 경우, 상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계는, 상기 출발각과 상기 도래각의 크기를 비교한 결과에 기초하여 상기 AoD 방식 또는 상기 AoA 방식 중 어느 하나를 선택할 수 있다. 일 실시예에 따르면, 상기 단말들 간의 방향 측정에 이용할 방식을 선택하는 단계는, 상기 출발각과 상기 도래 각의 크기를 비교하는 단계 및 상기 출발각의 크기가 상기 도래각의 크기보다 작다면 상기 AoD 방식을 선택하고, 상기 도래각의 크기가 상기 출발각의 크기보다 작다면 상기 AoA 방식을 선택하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 단말을 간의 방향을 측정하는 단계는, 상기 송신 단말은 정지하고 상기 수신 단말이 이동하는 상태라면 상기 AoD 방식을 이용하여 상기 단말들 간의 방향을 측정하고, 상기 수신 단말은 정지하고 상기 송신 단말이 이동하는 상태라면 상기 AoA 방식을 이용하여 상기 단말들 간의 방향을 측정할 수 있다. 본 개시의 일 실시예에 따른, UWB에 기반한 방향 탐지를 수행하기 위한 수신 단말은, 수신하는 신호의 반파장 간격으로 배열된 복수의 안테나들을 포함하는 안테나 모듈, 방향 탐지를 수행하기 위한 프로그램이 저장되는 메 모리 및 적어도 하나의 프로세서를 포함하며, 상기 프로세서는, 송신 단말로부터 복수의 안테나들을 통해 송신 된 신호들을, 상기 복수의 안테나들을 통해 수신하도록 하며, 상기 송신 단말 및 상기 수신 단말의 상태에 따라 서 AoD 방식 및 AoA 방식 중 적어도 하나를 선택하고, 선택된 방식을 이용하여 상기 단말들 간의 방향을 측정하 며, 상기 AoD 방식은 상기 송신 단말에서 둘 이상의 서로 다른 안테나를 통해 송신된 신호들 간의 위상차에 기 초하여 상기 송신된 신호들의 출발각을 측정하는 방식이고, 상기 AoA 방식은 상기 수신 단말에서 둘 이상의 서 로 다른 안테나를 통해 수신된 신호들 간의 위상차에 기초하여 상기 수신된 신호들의 도래각을 측정하는 방식일 수 있다. 일 실시예에 따르면, 상기 프로세서는, 상기 송신 단말 또는 수신 단말 중 어느 하나의 단말이 이동하는 상태라 면, 상기 단말들 간의 방향을 측정함에 있어서, 상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하고, 상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정한 후, 상기 출발각 및 상기 도래각에 기초하여 상기 이 동 중인 단말의 지향각을 획득할 수 있다. 일 실시예에 따르면, 상기 송신 단말의 지향각과 상기 수신 단말의 지향각이 이루는 각도가 미리 설정된 일정 범위 이내라면, 상기 프로세서는, 상기 단말들 간의 방향을 측정함에 있어서, 상기 AoD 방식을 이용하여 상기 신호들의 출발각을 측정하고, 상기 AoA 방식을 이용하여 상기 신호들의 도래각을 측정한 후, 상기 출발각 및 상 기 도래각에 기초하여 상기 단말들 간의 방향 측정에 이용할 방식을 선택하고, 상기 선택된 방식에 따라 상기 단말들 간의 방향을 측정할 수 있다. 일 실시예에 따르면, 상기 프로세서는, 상기 단말들 간의 방향 측정에 이용할 방식을 선택함에 있어서, 상기 출 발각의 크기가 미리 설정된 제1 기준값 이하인 경우 상기 AoD 방식을 선택하고, 상기 도래각의 크기가 미리 설 정된 제2 기준값 이하인 경우 상기 AoA 방식을 선택할 수 있다. 일 실시예에 따르면, 상기 출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 이하이거나, 또는 상기 출발각의 크기 및 상기 도래각의 크기가 각각 상기 제1 기준값 및 상기 제2 기준값 초과 인 경우, 상기 프로세서는, 상기 단말들 간의 방향 측정에 이용할 방식을 선택함에 있어서, 상기 출발각과 상기 도래각의 크기를 비교한 결과에 기초하여 상기 AoD 방식 또는 상기 AoA 방식 중 어느 하나를 선택할 수 있다. 일 실시예에 따르면, 상기 프로세서는, 상기 단말들 간의 방향 측정에 이용할 방식을 선택함에 있어서, 상기 출 발각과 상기 도래각의 크기를 비교하고, 상기 출발각의 크기가 상기 도래각의 크기보다 작다면 상기 AoD 방식을 선택하고, 상기 도래각의 크기가 상기 출발각의 크기보다 작다면 상기 AoA 방식을 선택할 수 있다. 일 실시예에 따르면, 상기 프로세서는, 상기 단말을 간의 방향을 측정함에 있어서, 상기 송신 단말은 정지하고 상기 수신 단말이 이동하는 상태라면 상기 AoD 방식을 이용하여 상기 단말들 간의 방향을 측정하고, 상기 수신 단말은 정지하고 상기 송신 단말이 이동하는 상태라면 상기 AoA 방식을 이용하여 상기 단말들 간의 방향을 측정 할 수 있다. 본 개시의 다양한 실시예들은 하나 이상의 컴퓨터 프로그램들에 의해 구현 또는 지원될 수 있고, 컴퓨터 프로그 램들은 컴퓨터 판독 가능한 프로그램 코드(code)로부터 형성되고, 컴퓨터로 판독 가능한 매체에 수록될 수 있다. 본 개시에서, \"애플리케이션(application)\" 및 \"프로그램(program)\"은 컴퓨터 판독 가능한 프로그램 코드 에서의 구현에 적합한 하나 이상의 컴퓨터 프로그램, 소프트웨어 컴포넌트, 명령어 세트, 프로시저(procedure), 함수, 개체(object), 클래스, 인스턴스, 관련 데이터, 또는 그것의 일부를 나타낼 수 있다. \"컴퓨터 판독 가능 한 프로그램 코드\"는, 소스 코드, 목적 코드, 및 실행 가능한 코드를 포함하는 다양한 유형의 컴퓨터 코드를 포 함할 수 있다. \"컴퓨터 판독 가능한 매체\"는, ROM(read only memory), RAM(random access memory), 하드 디스 크 드라이브(HDD), CD(compact disc), DVD(digital video disc), 또는 다양한 유형의 메모리와 같이, 컴퓨터에 의해 액세스(access)될 수 있는 다양한 유형의 매체를 포함할 수 있다. 또한, 기기로 읽을 수 있는 저장 매체는, 비일시적(non-transitory) 저장 매체의 형태로 제공될 수 있다. 여기 서, ‘비일시적 저장 매체'는 실재(tangible)하는 장치이고, 일시적인 전기적 또는 다른 신호들을 전송하는 유 선, 무선, 광학적, 또는 다른 통신 링크들을 배제할 수 있다. 한편, 이 '비일시적 저장 매체'는 데이터가 저장 매체에 반영구적으로 저장되는 경우와 임시적으로 저장되는 경우를 구분하지 않는다. 예를 들어, '비일시적 저 장 매체'는 데이터가 임시적으로 저장되는 버퍼를 포함할 수 있다. 컴퓨터 판독 가능한 매체는 컴퓨터에 의해 액세스될 수 있는 임의의 가용 매체일 수 있고, 휘발성 및 비휘발성 매체, 분리형 및 비분리형 매체를 모두 포 함할 수 있다. 컴퓨터 판독 가능한 매체는, 데이터가 영구적으로 저장될 수 있는 매체와 데이터가 저장되고 나 중에 덮어쓰기 될 수 있는 매체, 이를테면 재기입 가능한 광 디스크 또는 소거 가능한 메모리 디바이스를 포함 한다. 일 실시예에 따르면, 본 문서에 개시된 다양한 실시예들에 따른 방법은 컴퓨터 프로그램 제품(computer program product)에 포함되어 제공될 수 있다. 컴퓨터 프로그램 제품은 상품으로서 판매자 및 구매자 간에 거래될 수 있 다. 컴퓨터 프로그램 제품은 기기로 읽을 수 있는 저장 매체(예를 들어, compact disc read only memory (CD- ROM))의 형태로 배포되거나, 또는 어플리케이션 스토어를 통해 또는 두 개의 사용자 장치들(예를 들어, 스마트 폰) 간에 직접, 온라인으로 배포(예를 들어, 다운로드 또는 업로드)될 수 있다. 온라인 배포의 경우에, 컴퓨터 프로그램 제품(예를 들어, 다운로더블 앱(downloadable app))의 적어도 일부는 제조사의 서버, 어플리케이션 스 토어의 서버, 또는 중계 서버의 메모리와 같은 기기로 읽을 수 있는 저장 매체에 적어도 일시 저장되거나, 임시 적으로 생성될 수 있다."}
{"patent_id": "10-2023-0097798", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 6, "content": "전술한 본 개시의 설명은 예시를 위한 것이며, 본 개시가 속하는 기술분야의 통상의 지식을 가진 자는 본 개시 의 기술적 사상이나 필수적인 특징을 변경하지 않고서 다른 구체적인 형태로 쉽게 변형이 가능하다는 것을 이해 할 수 있을 것이다. 예를 들어, 설명된 기술들이 설명된 방법과 다른 순서로 수행되거나, 및/또는 으로 설명된시스템, 구조, 장치, 회로 등의 구성요소들이 설명된 방법과 다른 형태로 결합 또는 조합되거나, 다른 구성요소 또는 균등물에 의하여 대치되거나 치환되더라도 적절한 결과가 달성될 수 있다. 그러므로 이상에서 기술한 실시 예들은 모든 면에서 예시적인 것이며 한정적이 아닌 것으로 이해해야만 한다. 예를 들어, 단일형으로 설명되어 있는 각 구성 요소는 분산되어 실시될 수도 있으며, 마찬가지로 분산된 것으로 설명되어 있는 구성 요소들도 결 합된 형태로 실시될 수 있다. 본 개시의 범위는 상기 상세한 설명보다는 후술하는 특허청구범위에 의하여 나타내어지며, 특허청구범위의 의미 및 범위 그리고 그 균등 개념으로부터 도출되는 모든 변경 또는 변형된 형태가 본 개시의 범위에 포함되는 것으 로 해석되어야 한다."}
{"patent_id": "10-2023-0097798", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시예에 따른, UWB 기반의 방향 측정을 수행하기 위한 시스템 환경을 도시한 도면이다. 도 2는 본 개시의 일 실시예에 따른, UWB 단말에 포함된 구성을 설명하기 위한 도면이다. 도 3은 본 개시의 일 실시예에 따른, UWB 단말들이 AoA 방식을 이용하여 도래각을 측정하는 방법과, AoD 방식을 이용하여 출발각을 측정하는 방법을 설명하기 위한 도면이다. 도 4는 본 개시의 일 실시예에 따른, AoD 방식이 적용된 UWB 단말이 구간별로 다른 안테나를 이용하여 패킷을 전송하는 방법을 설명하기 위한 도면이다. 도 5는 본 개시의 일 실시예에 따른, UWB 단말이 AoD 방식의 사용 여부에 따라서 안테나를 스위칭하는 프로세스 를 설명하기 위한 순서도이다. 도 6은 본 개시의 일 실시예에 따른, UWB 단말이 AoA 방식과 AoD 방식을 동시에 사용하는 경우 신호들의 위상차 를 비교하는 방법을 설명하기 위한 도면이다. 도 7은 본 개시의 일 실시예에 따른, UWB 단말이 AoA 방식과 AoD 방식을 동시에 사용할 때 이동하는 단말의 지 향각을 측정하는 방법을 설명하기 위한 도면이다. 도 8은 본 개시의 일 실시예에 따른, UWB 기반의 위치 측정 시스템에서 AoA 방식 및 AoD 방식을 동시에 이용함 으로써 측정 가능한 방향의 범위가 확대되는 효과를 설명하기 위한 도면이다. 도 9a 및 도 9b는 본 개시의 일 실시예에 따른, UWB 기반의 위치 측정 시스템에서 AoA 방식 및 AoD 방식을 동시 에 이용함으로써 어느 하나의 단말이 이동하더라도 방향을 보정할 필요가 없는 효과를 설명하기 위한 도면이다. 도 10 내지 도 12는 본 개시의 실시예들에 따른, UWB 단말들 간 방향을 탐지하는 방법을 설명하기 위한 순서도 들이다."}
