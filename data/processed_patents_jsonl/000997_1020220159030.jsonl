{"patent_id": "10-2022-0159030", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0077003", "출원번호": "10-2022-0159030", "발명의 명칭": "이기종 툴이 장착된 공작기계 스핀들의 다단계 상태진단 장치 및 방법", "출원인": "한국전자통신연구원", "발명자": "윤성재"}}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "공작기계의 툴이 변경되는 것을 감시하고;툴 변경이 인식되면 공작기계로 하여금 스핀들을 공회전시키도록 하고;스핀들의 공회전 동안에 공작기계에 장착된 센서로부터 센서데이터를 취득하고;상기 취득한 센서데이터를 사전에 기계학습 기술에 의해 학습된 툴 검증 모델에 입력하여 툴의 적합성을 검증하고;툴이 적합한 것으로 검증되었으면, 상기 취득한 센서데이터를 사전에 기계학습 기술에 의해 학습된 스핀들 진단모델에 입력하여 스핀들의 동작상태를 진단하도록 구성되는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에서, 상기 공작기계의 툴이 변경되는지 여부는 NC코드의 설정값을 읽어와서 수행되는 것을 특징으로하는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에서, 상기 공작기계에 장착된 센서는진동센서, 가속도센서, 소음센서, 온도센서, 및 전류센서 중 적어도 하나인 것을 특징으로 하는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에서, 상기 센서데이터를 툴 검증 모델에 입력하기 위하여, 현재 공작기계에서 변경된 툴에 대한 검증 모델을 호출하는 것을 추가로 포함하도록 구성되는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에서, 상기 툴의 적합성을 검증하여 툴이 적합하지 않은 경우에 공작기계를 정지시키는 것을 추가로 포함하도록 구성되는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에서, 상기 툴 검증 모델은 상기 공작기계에 사용될 수 있는 다수 유형의 툴에 대해 구축된 통합된 툴 검증 모델인 것을 특징으로 하는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에서, 상기 툴 검증 모델은 상기 공작기계에 사용될 수 있는 툴별로 개별적으로 구축된 툴 검증 모델인 것을 특징으로 하는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에서, 상기 스핀들 진단 모델은 스핀들에 장착 가능한 다수의 툴에 대해 구축된 통합된 스핀들 진단 모델인 것을 특징으로 하는, 공작기계의 스핀들 진단 장치.공개특허 10-2024-0077003-3-청구항 9 제1항에서, 상기 스핀들 진단 모델은 스핀들에 장착 가능한 툴별로 개별적으로 구축된 스핀들 진단 모델인 것을 특징으로 하는, 공작기계의 스핀들진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항에서, 상기 툴 검증 모델 및 스핀들 진단 모델은 별도로 구축되어 개별적으로 상기 툴 검증 및 스핀들 진단에 사용되는 것을 특징으로 하는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제1항에서, 상기 툴 검증 모델 및 스핀들 진단 모델은 통합적인 툴 검증 및 스핀들 진단 모델로 구축되어 상기툴 검증 및 스핀들 진단에 사용되는 것을 특징으로 하는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제7항에서, 현재 변경된 툴에 해당되는 툴 검증 모델을 선택하여 호출하는 것을 추가로 포함하도록 구성되는,공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제9항에서, 현재 변경된 툴이 장착된 스핀들에 해당되는 스핀들 진단 모델을 선택하여 호출하는 것을 추가로 포함하도록 구성되는, 공작기계의 스핀들 진단 장치."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "공작기계의 툴이 변경되는 것을 감시하고;툴 변경이 인식되면 공작기계로 하여금 스핀들을 공회전시키도록 하고;스핀들의 공회전 동안에 공작기계에 장착된 센서로부터 센서데이터를 취득하고;상기 취득한 센서데이터를 사전에 기계학습 기술에 의해 학습된 툴 검증 모델에 입력하여 툴의 적합성을 검증하고;툴이 적합한 것으로 검증되었으면, 상기 취득한 센서데이터를 사전에 기계학습 기술에 의해 학습된 스핀들 진단모델에 입력하여 스핀들의 동작상태를 진단하는 것을 포함하는, 공작기계의 스핀들 진단 방법."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에서, 상기 공작기계의 툴이 변경되는지 여부는 NC코드의 설정값을 읽어와서 수행되는 것을 특징으로 하는, 공작기계의 스핀들 진단 방법."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제14항에서, 상기 센서데이터를 툴 검증 모델에 입력하기 위하여, 현재 공작기계에서 변경된 툴에 대한 검증 모델을 호출하는 것을 추가로 포함하도록 구성되는, 공작기계의 스핀들 진단 방법."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제14항에서, 상기 툴의 적합성을 검증하여 툴이 적합하지 않은 경우에 공작기계를 정지시키는 것을 추가로 포함하도록 구성되는, 공작기계의 스핀들 진단 방법."}
{"patent_id": "10-2022-0159030", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제14항에서, 상기 툴 검증 모델은 상기 공작기계에 사용될 수 있는 툴별로 개별적으로 구축되며, 현재 변경된 툴에 해당되는 툴 검증 모델을 선택하여 호출하는 것을 추가로 포함하는, 공작기계의 스핀들 진단방법.공개특허 10-2024-0077003-4-청구항 19 제14항에서, 상기 스핀들 진단 모델은 스핀들에 장착 가능한 툴별로 개별적으로 구축되며, 현재 변경된 툴이 장착된 스핀들에 해당되는 스핀들 진단 모델을 선택하여 호출하는 것을 추가로 포함하는, 공작기계의 스핀들 진단 방법."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "이기종 툴이 장착되는 공작기계에서 툴의 적합성을 검증하고 스핀들의 상태를 진단하는 발명으로서, 공작기계의 툴이 변경되는 것을 감시하고; 툴 변경이 인식되면 공작기계로 하여금 스핀들을 공회전시키도록 하고; 스핀들의 공회전 동안에 공작기계에 장착된 센서로부터 센서데이터를 취득하고; 상기 취득한 센서데이터를 사전에 기계학 습 기술에 의해 학습된 툴 검증 모델에 입력하여 툴의 적합성을 검증하고; 툴이 적합한 것으로 검증되었으면, 상 기 취득한 센서데이터를 사전에 기계학습 기술에 의해 학습된 스핀들 진단 모델에 입력하여 스핀들의 동작상태를 진단하도록 구성되는 공작기계의 스핀들 진단 장치 및 방법이 제공된다."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 공작기계에 관한 것으로, 구체적으로는, 이기종 툴이 장착되어 사용되는 공작기계에서 스핀들의 상태 진단을 하는 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "공작기계는 소재를 가공하여 원하는 다양한 형상을 만드는 기계이다. 공작기계는 정해진 코드에 따라 자동으로 동작하기 위해 컴퓨터에 의한 수치제어를 수행하는 CNC(Computer Numerical Control), 공작물 또는 공구(툴)를 장착하여 회전하면서 소재를 가공하는 회전계 요소(스핀들), 한 개 이상의 툴이 장착되는 터렛(turret) 또는 툴 체인저(tool changer), 작업대상물 및 툴을 정확한 위치로 이동시키는 이송계 요소 등으로 구성되어 있다. 처음에 공작기계는 스핀들에 특정 툴을 설치하고 장시간 연속 가동하는 대량 생산에 초점을 맞춰 개발되었으나, 최근에는 다품종 소량 생산이 늘어나면서 단일 공작기계에서 자동으로 툴을 순차적으로 변경하며 가공하는 기술 이 사용되고 있다. 이를 위해서는 운용자(operator)가 사용할 툴을 사전에 터렛 또는 툴체인저에 순서대로 장착 해야 한다. 터렛 또는 툴체인저가 사용되는 공작기계는 다품종 소량 생산에 적합하지만 스핀들 상태진단 관점에서는 아래와 같은 문제점을 가지고 있다. 첫째, 적합하지 않은 툴이 장착되어도 운용자는 알 수 없다. 운용자는 가공 순서에 맞춰 터렛 또는 툴체인저에 툴을 장착해야 한다. 해당 과정에서 실수로 툴을 잘못 장착해도 운용자는 사전에 알기 어렵다. 왜냐하면 툴과 스핀들 간 규격만 맞으면 공작기계는 정상적으로 가공이 진행되기 때문이다. 현재 가공에 적합하지 않은 툴이 장착되면 가공품의 품질이 저하되거나 가공 중 부하가 과도해져 스핀들이 파손될 수 있다. 따라서 가공하기 전 에 현재 스핀들에 장착된 툴이 적합한지 검증해야 한다. 둘째, 툴에 따라 스핀들 상태의 진단 결과가 달라진다. 기존에는 스핀들의 상태를 진단하기 위해 스핀들에 가속 도 센서나 진동 센서를 부착해 진동 데이터를 수집하고, 수집한 데이터를 분석하는 방법이 사용되었다. 해당 기 술을 구현하기 위해서는 스핀들 내에 있는 베어링 등의 기계요소가 특정 상태(불균형, 마모, 소착 등)일 때 측 정되는 진동 데이터 패턴을 사전에 저장하고 있어야 한다. 즉, 해당 기계요소의 제조자가 다양한 실험을 통해 획득한 사전 데이터가 필요하며, 다른 기계요소를 장착한 스핀들에는 적용하기 어렵다는 문제가 있다. 추가적으 로 툴의 종류까지 달라지면 상태 진단 결과의 정확도는 더욱 낮아진다."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "따라서 이기종 툴이 장착되는 공작기계에서 개별 툴의 특성을 고려하여 스핀들의 상태를 진단하여 종래의 문제 를 해결하고자 한다."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 과제를 해결하기 위하여, 본 발명은 개별 툴의 특성을 고려한 스핀들의 상태 진단을 위해 툴이 적합하게 변경되었는지를 먼저 검증한 후에 스핀들의 상태를 진단하는 다단계 진단 기술을 제안한다. 구체적으로 본 발명에 따른 공작기계의 스핀들 진단 장치 및 방법은, 먼저 공작기계의 툴이 변경되는 것을 감시 하고; 툴 변경이 인식되면 공작기계로 하여금 스핀들을 공회전시키도록 하고; 스핀들의 공회전 동안에 공작기계 에 장착된 센서로부터 센서데이터를 취득하고; 상기 취득한 센서데이터를 사전에 기계학습 기술에 의해 학습된툴 검증 모델에 입력하여 툴의 적합성을 검증하고; 툴이 적합한 것으로 검증되었으면, 상기 취득한 센서데이터 를 사전에 기계학습 기술에 의해 학습된 스핀들 진단 모델에 입력하여 스핀들의 동작상태를 진단하도록 구성되 는 공작기계의 툴 검증 및 스핀들 진단 장치 및 방법이 제공된다. 본 발명의 구성과 작용은 이후에 도면과 함께 설명하는 구체적인 실시예를 통하여 더욱 명확해질 것이다."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은 NC코드에 따라 툴을 변경하는 공작기계를 대상으로 하며, 아래와 같은 효과를 제공한다. 운용자가 실수로 툴을 장착해도 실가공 이전에 확인할 수 있다. 이를 통해 가공품의 품질 유지 및 스핀들 수명 연장이 가능해진다. 이기종 툴이 장착되는 스핀들의 상태를 진단할 수 있다. 기존 방식과 비교하여 사용자의 스핀들에 최적화된 상태 진단이 가능하다. 툴 변경이 이루어질 때 스핀들 공회전을 통해 스핀들의 상태를 진단할 수 있다. 실가공 중에 수집한 센서데 이터를 활용하면 데이터 패턴이 달라져 상태진단 정확도가 감소할 수 있다. 이를 위해 스핀들 공회전 루틴을 넣 어서 이 동안에 수집한 센서데이터만을 검증 및 진단에 활용한다."}
{"patent_id": "10-2022-0159030", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 발명의 바람직한 실시예를 첨부 도면을 참조하여 상세히 설명한다. 이하 설명에서 사용된 용어는 본 발명의 실시예를 설명하기 위한 것이며 본 발명을 제한하고자 하는 것이 아니다. 본 명세서에서, 단수형은 특별 히 언급하지 않는 한 복수형도 포함한다. 또한 명세서에 사용된 '포함하다(comprise, comprising 등)'라는 용어 는 언급된 구성요소, 단계, 동작, 및/또는 소자 이외의 하나 이상의 다른 구성요소, 단계, 동작, 및/또는 소자 의 존재 또는 추가를 배제하지 않는 의미로 사용된 것이다. 도 1a와 도 1b의 순서도는 본 발명에 따른 공작기계 스핀들 진단의 개념 설명을 위한 것이다. 먼저 도 1a를 참조하면, 공작기계 운용자는 작업대상물의 가공을 위한 NC코드에 맞춰 필요 툴들을 터렛 또는 툴 체인저에 NC코드에 설정된 순서에 맞게 장착하고, NC코드를 공작기계에 할당한다. 공작기계는 할당된 NC코 드를 실행하여 작업대상물을 가공한다. 공작기계는 가공 과정에서 NC코드에 설정된 작업에 따라 툴을 변경하게 될 것이고, 본 발명의 진단 장치는 공작 기계의 툴이 변경되는 것을 감시한다. 공작기계에서 툴이 변경되는지 여부는 NC코드의 설정값을 읽어옴으로 써 알 수 있다. 툴 변경이 인식되면 본 발명의 진단 장치는 공작기계에 명령을 내려서 스핀들을 특정 속도(예, 2000RPM)로 특정 기간(예, 10초)동안 공회전시킨다. 공회전(즉, 대상물을 가공하지 않고 스핀들을 동작시킨다는 의미) 동안 에 공작기계의 스핀들에 장착된 센서(진동센서, 가속도센서, 소음센서 등) 또는 스핀들 관련 요소(예를 들어, 모터, 와이어 하니스 등)에 장착된 센서(온도센서, 전류센서 등)로부터 센서데이터(예를 들어, 진동패턴, 진동수(주파수), 진폭, 소음, 모터온도, 모터전류 등)를 취득한다. 센서데이터로서 수집된 진동패턴을 도 1c에 도시하였다. 10초 동안의 진동패턴의 변화를 학습한 인공지능 신경 망을 통해 추론하여 툴의 적합성 여부를 검증하고 스핀들의 상태를 진단할 수 있다. 도 1c의 진동패턴을 보면, 초기에는 진동의 변화가 거의 없다가 시간이 지날수록 점점 진동량이 증가함을 볼 수 있다. NC코드를 확인하여 현재 변경된 툴의 검증을 위해 사전에 학습되어 있는 해당 툴에 대한 검증 모델을 호출한다 . 이 툴 검증 모델은 스핀들에 장착된 툴이 동작할 때에 발생하는 작동데이터(예를 들어, 진동 패턴, 진동 수(주파수), 진폭 등)로 사전에 딥러닝, 패턴매칭 등 기계학습 기술에 의해 학습되어 구축된 학습 및 추론 모델 이다. 상기 단계 40에서 취득한 센서데이터를 상기 툴 검증 모델에 입력하여 툴을 검증한다. 현재 변경된 툴이 NC코드와 일치하지 않은 툴이라고 판정되면 공작기계를 정지하거나, 운용자에게 알리기 위하 여 시각화하여 출력하거나 알람 등을 실행할 수 있다. 반면에 툴이 적합한 것으로 검증되었으면, 상기 단계 40에서 취득한 센서데이터를 스핀들 상태진단용 기계학습 모델(이하, 스핀들 진단 모델)에 입력하여 현재 스핀들의 동작상태(정상, 위험, 고장 등의 상태)를 진단한다. 진단 결과는 운용자가 볼 수 있도록 시각화하여 출력하거나 알람 등을 실행한다. 상기 단계 60에서 언급한 것과 같이, 툴 검증의 결과도 이 때에 함께, 또는 다른 시점에 출력할 수 있다. 한편, 도 1a의 단계 50, 즉, 현재 변경된 툴에 해당하는 툴 검증 모델을 호출하는 단계는 생략할 수 있다. 즉, 도 1b에서와 같이 다양한 툴에 대한 검증 모델을 통합적으로 구축해 놓고 이 통합 검증 모델에서 현재 툴의 적 합 여부를 추론하여 검증하게 되면, 현재 변경된 툴에 해당하는 툴 검증 모델을 호출할 필요가 없다. 도 2a, 도 2b는 툴 검증 모델의 구축을 설명하기 위한 것이다. 툴 검증 모델은 앞에서 언급한 것과 같이, 공작기계의 작업 대상물 가공 중에 툴이 NC코드에 설정된 툴로 제대 로 변경되었는지를 검증하기 위한 기계학습 모델이다. 검증 대상 툴이 스핀들에 의해 작동될 때에 발생하는 작 동데이터(예를 들어, 진동 패턴, 진동수(주파수), 진폭 등)를 진동·가속도·소음 센서로 취득한다. 이러한 툴 작동데이터는 각 툴의 무게, 중심, 편심여부, 형상 등에 따른 고유의 특징데이터를 포함하는바, 센서가 취득한 툴 작동데이터에서 기계학습을 위한 특징데이터를 추출하고 신경망을 훈련하여(학습시켜) 툴 검증 모델을 구축 한다. 학습시의 라벨링은 툴 적합 및 부적합으로 설정할 수 있다. 도 2a는 공작기계에 사용될 수 있는 모든 유형의 툴에 대해 하나의 통합된 툴 검증 모델을 구축하는 것을 나타 내고, 도 2b는 각 유형의 툴별로 별개의 툴 검증 모델을 구축하는 것을 나타낸다. 도 2b를 보면 도 2a와 달리 툴1 검증 모델, 툴2 검증 모델, ..., 툴n 검증 모델이 개별적으로 구축된 것을 볼 수 있다. 참고로, 도 1a의 설 명 중, 단계 50에서 현재 툴에 해당하는 툴 검증 모델을 호출하는 단계를 설명한 바 있다. 그리고 이 호출 단계 는 도 2a와 같이 다종의 툴에 대한 검증 모델을 통합적으로 구축해 놓고 이 통합 검증 모델에서 현재 툴을 검증 할 경우에는 생략할 수 있다고 설명하였다. 도 3a와 도 3b는 스핀들 진단 모델의 구축을 설명하기 위한 것이다. 스핀들 진단 모델은 앞에서 언급한 것과 같이, 공작기계의 작업대상물 가공 에 사용되는 툴이 장착된 스핀들의 동작상태(예를 들어, 고장, 위험, 정상 상태)를 진단하기 위한 기계학습 모델이다. 진단 대상 스핀들이 동작할 때에 발생하는 작동데이터(예를 들어, 진동 패턴, 진동수(주파수), 진폭, 소음, 모터온도, 모터전류 등)를 진동 ·가속도·소음·온도·전류 센서로 취득한다. 센서가 취득한 스핀들 작동데이터에서 기계학습을 위한 특징데이 터를 추출하고 신경망을 훈련하여 스핀들 진단 모델을 구축한다. 학습시의 라벨링은 스핀들 정상, 위험, 및 고 장의 3개 라벨로 설정할 수 있다(다른 실시예에서는 스핀들 정상 및 고장으로 라벨링할 수 있다). 상기 툴 검증 모델과 스핀들 진단 모델은 랜덤 포레스트 모델을 사용하여 구축할 수 있다. 센서데이터에서 특징 데이터를 추출하며, 모든 특징을 사용해도 되지만 실제로 현장에 적용하기 위해서는 추론 결과에 영향을 많이 주는 데이터를 선별하여 입력 데이터의 크기를 줄이는 것도 바람직하다. 이를 위해 모든 특징데이터로 랜덤 포 레스트 모델을 생성한 후에, 특징 중요도(feature importance)를 계산해 상위 5개에 해당하는 특징을 선정해서 랜덤 포레스트 모델을 재생성하였다. 스핀들 진단 모델도 툴 검증 모델과 유사하게, 도 3a와 같이 스핀들에 사용 가능한 모든 툴에 대한 통합 스핀들 진단 모델을 구축할 수도 있고, 도 3b와 같이 스핀들에 장착되는 개별 툴별로 구축할 수도 있다(도 3b에서, 툴1에 대한 스핀들 진단 모델, 툴2에 대한 스핀들 진단 모델, ..., 툴n에 대한 스핀들 진단 모델). 도 4a와 도 4b는 또다른 방식의 학습모델 구축 및 추론 방식을 나타낸다. 도 4a는 앞에서 설명한 것과 같이, 툴 검증 모델 및 스핀들 진단 모델이 별도로 구축된 후 별도로 각 모델이 툴 검증 및 스핀들 진단 추론에 사용되는 방식을 나타내고, 도 4b는 통합된 학습모델로서 툴 검증 및 스핀들 진단 모델이 구축되어 이 단일의 모델이 툴 검증 및 스핀들 진단의 추론에 사용되는 방식을 나타낸다. 도 4a의 방식에 따르면 개별 모델의 구축 및 유지관 리의 부담이 있지만, 학습 및 추론시간의 단축, 고장율 감소 등의 이득이 있고, 도 4b의 방식은 도 4a의 장단점 과 반대의 장단점을 가지며, 특히, 학습 및 추론 과정이 복잡해지는 단점을 갖는다. 도 5a는 본 발명의 바람직한 실시예에 따른 공작기계 툴 검증 및 스핀들 진단 장치의 구성도이다. 앞에서 설명 한 내용과 중복되는 내용에 대해서는 상세히 설명하지 않아도 이하의 내용에 적용될 수 있다. 역으로, 이하의 설명에서 새로 기술된 내용은 앞의 설명 내용에도 적용될 수 있다. 본 발명의 스핀들 진단 장치는 공작기계에 연결되어 공작기계 제어부와 통신하고 공작기계(10 0)에 설치된 센서로부터 센서데이터를 수신한다. 공작기계 제어부는 NC코드를 실행하여 작업대상물의 가공을 수행한다. 센서는 앞에서 언급한 것과 같이 스핀들 또는 그 관련 요소(예를 들어, 스핀들 구동 모 터 또는 와이어 하니스 등)에 설치될 수 있다. 스핀들 진단 장치는 다음과 같이 구성된다. - 공작기계 제어부로부터 NC코드에 설정된 작업 유형에 따라 툴이 변경되는지 여부를 감시하는 툴변경 감 시부 - 공작기계에서 툴이 변경되는지 여부는 공작기계 제어부를 통해 NC코드의 설정값을 읽어 옴으로써 알 수 있다, - 툴 변경이 인식되면 공작기계 제어부에 명령을 내려서 스핀들을 특정 속도(예, 2000RPM)로 특정 기간(예, 10초)동안 공회전시키는(즉, 작업대상물을 가공하지 않고 스핀들을 동작시킴) 스핀들 공회전 지시부 , - 스핀들의 공회전 동안에 공작기계의 스핀들에 장착된 센서(진동센서, 가속도센서, 소음센서 등) 또는 스핀들 관련 요소(예를 들어, 모터, 와이어 하니스 등)에 장착된 센서(온도센서, 전류센서 등)로부터 센서데이터(예를 들어, 진동패턴, 진동수(주파수), 진폭, 소음, 모터온도, 모터전류 등)를 취득하는 센서데이터 취득부, - 취득한 센서데이터를 툴 검증 모델에 입력하여 현재 변경된 툴을 검증하는 툴검증부 - 여기서 툴 검증 모델의 추론 결과는 적합/부적합의 2구분일 수 있다. 적합인 경우(즉, 현재 툴이 NC코드에 설정된 것 과 일치)에는 아래에서 설명할 스핀들진단부에 의해 스핀들의 진단이 실행될 수 있고, 부적합인 경우에는 공작기계 제어부에 명령을 보내 공작기계 가동 중지를 시키거나(이를 위해 도 5의 구성에 공작기계 가동중 지부(미도시)를 추가할 수 있다), 결과출력부를 통해 출력하여 운용자에게 알릴 수 있다. - 취득한 센서데이터를 스핀들 진단 모델에 입력하여 스핀들의 상태를 진단하는 스핀들진단부 - 여기 서 스핀들의 상태는 정상, 위험, 고장의 3구분으로 진단할 수도 있고, 정상, 고장의 2구분으로 진단할 수도 있 다. 각 구분에 대해 설정된 임계값을 이용하여 스핀들 진단 모델의 추론 결과를 각각의 구분으로 분류할 수 있을 것이다. - 상기 툴검증부 및/또는 스핀들진단부의 검증 및/또는 진단 결과를 출력하는 결과출력부 - 결 과출력부에서 출력되는 신호는 운용자에게 시각적으로 알리긴 위한 영상 신호 또는 청각적인 오디오 신호 등으로 출력될 수 있고, 별도의 디스플레이가 연결되거나, 또는 결과출력부가 자체적으로 디스플레이 기능 을 수행할 수 있다. 한편, 이상 설명한 도 5a의 구성에서 일부 요소가 추가된 변경 실시예의 구성을 도 5b를 참조하여 설명한다. 도 2b의 경우와 같이 툴 검증 모델이 툴별로 개별적으로 구축되어 있는 경우에, NC코드를 확인하여 현재 변경된 툴에 해당되는 검증 모델을 선택하여 호출하는 툴검증모델 선택부가 추가될 수 있다. 또한 도 3b의 경우와 같이 스핀들 검증 모델이 툴별로 개별적으로 구축되어 있는 경우에, 스핀들에 현재 변경된 툴에 해당되는 스핀들 진단 모델을 선택하여 호출하는 스핀들진단부모델 선택부가 추가될 수 있다. 도 6은 본 발명에 따른 공작기계 스핀들 진단 장치를 제품으로 구현한 구성도로, 앞에서 설명한 도 5a 또는 도 5b의 구성을 학습 및 추론용 데이터를 수집하는 DAQ(data acquisition system)와 인공지능 기능이 내장된 소형컴퓨터 제품인 NVIDIA의 Xavier를 이용한 임베디드 시스템으로 구현하였고, 여기에 공작기계와 디스플레이를 연결하여 제작한 구성 예를 나타낸다. 한편, 본 발명의 컨트롤러 및 이에 프로그램되는 알고리즘은 도 7에 예시한 컴퓨터 시스템에 기반하여 수행될 수 있다. 도 7에 나타낸 컴퓨터 시스템(computer system)은, 공통버스(common bus)를 통해 통신하는 프로세서 (processor), 메모리(memory), 입력 인터페이스 장치(input interface device), 출력 인터페이스 장치(output interface device), 및 저장 장치(storage device) 중 적어도 하나를 포함할 수 있다. 컴퓨터 시스템은 또한 네트워크에 연결되는 통신 장치(communication device)를 포함할 수 있다. 프로세서는 CPU(central processing unit)이거나, 또는 메모리 또는 저장 장치에 저장된 명령을 실행하는 반도체 장치일 수 있다. 통신 장치는 유선 신호 또는 무선 신호를 송신 또는 수신할 수 있다. 메모리 및 저장 장치는 다양한 형태의 휘발성 또는 비휘발성 저장 매체를 포함할 수 있다. 그리고 메모리는 ROM(read only memory) 및 RAM(random access memory)를 포함할 수 있다. 메모리는 프로세서의 내부 또는 외부에 위치할 수 있고, 공지의 다양한 수단을 통해 프로세서와 연결 될 수 있다. 따라서, 본 발명은 컴퓨터에 구현된 방법으로 구현되거나, 컴퓨터 실행가능 명령이 저장된 비일시적 컴퓨터 판 독가능 매체로 구현될 수 있다. 한 실시예에서, 프로세서에 의해 실행될 때, 컴퓨터 판독가능 명령은 본 명세서 에 기재된 적어도 하나의 양태에 따른 방법을 수행할 수 있다. 또한, 본 발명에 따른 방법은 다양한 컴퓨터 수단을 통해 수행될 수 있는 프로그램 명령 형태로 구현되어, 컴퓨 터 판독가능 매체에 기록될 수 있다. 상기 컴퓨터 판독 가능 매체는 프로그램 명령, 데이터 파일, 데이터 구조 등을 단독으로 또는 조합하여 포함할 수 있다. 상기 컴퓨터 판독 가능 매체에 기록되는 프로그램 명령은, 본 발 명의 실시예를 위해 특별히 설계되어 구성된 것이거나, 컴퓨터 소프트웨어 분야의 통상의 기술자에게 공지되어 사용 가능한 것일 수도 있다. 컴퓨터 판독가능 기록 매체는 프로그램 명령을 저장하고 수행하도록 구성된 하드 웨어 장치를 포함할 수 있다. 예를 들어, 컴퓨터 판독가능 기록 매체는 하드 디스크, 플로피 디스크 및 자기 테 이프와 같은 자기 매체(magnetic media), CD-ROM, DVD와 같은 광기록 매체(optical media), 플롭티컬 디스크 (floptical disk)와 같은 자기광 매체(magneto-optical media), 롬(ROM), 램(RAM), 플래시 메모리 등일 수 있 다. 프로그램 명령은 컴파일러에 의해 만들어지는 것과 같은 기계어 코드뿐만 아니라, 인터프리터 등을 통해 컴 퓨터에 의해 실행될 수 있는 고급언어 코드를 포함할 수 있다. 이상에서 본 발명의 사상을 구체적으로 구현한 실시예를 설명하였다. 그러나 본 발명의 기술적 범위는 이상에서 설명한 실시예 및 도면에 한정되는 것이 아니라 특허청구범위의 합리적 해석에 의해 정해지는 것이다."}
{"patent_id": "10-2022-0159030", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1a와 도 1b는 본 발명에 따른 공작기계 스핀들 진단의 개념 설명을 위한 순서도이다. 도 1c는 센서데이터로서 수집된 진동패턴의 예시도이다. 도 2a, 도 2b는 툴 검증 모델의 구축을 설명하기 위한 것이다. 도 3a와 도 3b는 스핀들 진단 모델의 구축을 설명하기 위한 것이다. 도 4a와 도 4b는 또다른 방식의 학습모델 구축 및 추론 방식을 나타낸다. 도 5a는 본 발명의 바람직한 실시예에 따른 공작기계 툴 검증 및 스핀들 진단 장치의 구성도이다. 도 5b는 도 5a의 구성에 일부 요소가 추가된 변경 실시예의 구성도이다. 도 6은 본 발명의 장치 및 방법을 제품으로 구현한 구성도이다. 도 7은 본 발명의 장치 및 방법을 제품으로 구현하는 데 기반이 되는 컴퓨터 시스템의 구성도이다."}
