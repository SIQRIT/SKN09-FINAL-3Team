{"patent_id": "10-2023-0095041", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0014655", "출원번호": "10-2023-0095041", "발명의 명칭": "자연어 쿼리 번역 장치 및 그것의 제어 방법", "출원인": "주식회사 카카오엔터프라이즈", "발명자": "신명철"}}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "명령어들을 저장하는 메모리와 상기 저장된 명령어들, 분류부 및 변환 모델을 실행하도록 설정된 프로세서를 포함하는 자연어 쿼리 번역 장치의 제어 방법에 있어서,상기 프로세서에 의해서 실행되는 분류부가 자연어 쿼리에 기초하여 관련 데이터 베이스를 분류하는 단계; 및상기 프로세서에 의해서 실행되는 변환 모델이 상기 자연어 쿼리를 분류된 관련 데이터 베이스에 대응하는 SQL쿼리로 변환하는 단계를 포함하되,상기 변환 모델은 대규모 언어 모델(LLM, Large Language Model)을 포함하도록 구성되고,상기 변환 모델은 상기 자연어 쿼리를 포함한 자연어 입력을 수신하고, 수신된 자연어 입력에 기초하여 변환된SQL 쿼리를 출력하되,상기 자연어 입력은, 상기 분류된 관련 데이터 베이스에 대한 스키마 및 자연어 쿼리를 포함하는,자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서, 상기 자연어 입력은,엔티티 태깅 정보를 더 포함하도록 구성되는,자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 2 항에 있어서, 상기 자연어 입력은,상기 자연어 쿼리, 상기 엔티티 태깅 정보 및 상기 스키마 중 적어도 둘 이상에 대하여 텍스트 병합(concatenate)한 결과인,자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 3 항에 있어서, 상기 자연어 입력은,상기 자연어 쿼리, 상기 엔티티 태깅 정보 및 상기 스키마 중 적어도 하나에 지정된 라벨을 포함하는,자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 2 항에 있어서, 상기 엔티티 태깅 정보는,상기 분류된 관련 데이터 베이스에서 활용되는 명칭을 정규화시키기 위한 정보인,공개특허 10-2025-0014655-3-자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 1 항에 있어서,상기 분류된 관련 데이터 베이스에 포함된 테이블 중, 상기 자연어 쿼리에 관련없는 테이블을 필터링하여 관련테이블을 출력하는 테이블 필터링 단계를 더 포함하는,자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 6 항에 있어서,상기 관련 테이블상에서 상기 자연어 쿼리에 관련없는 컬럼을 필터링하여 관련 컬럼을 출력하는 컬럼 필터링 단계를 더 포함하는,자연어 쿼리 번역 장치의 제어 방법."}
{"patent_id": "10-2023-0095041", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "명령어들을 저장하는 메모리와 상기 저장된 명령어들, 분류부 및 변환 모델을 실행하도록 설정된 프로세서를 포함하는 자연어 쿼리 번역 장치에 있어서,자연어 쿼리에 기초하여 관련 데이터 베이스를 분류하는 분류부; 및상기 자연어 쿼리를 분류된 관련 데이터 베이스에 대응하는 SQL 쿼리로 변환하는 변환 모델을 포함하되,상기 변환 모델은 대규모 언어 모델(LLM, Large Language Model)을 포함하도록 구성되는,자연어 쿼리 번역 장치."}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 자연어 쿼리를 SQL 쿼리로 변환해주는 자연어 처리 기술에 관한 것이다. 보다 구체적으로 본 발명은, 자연어 쿼리에 기초하여 데이터 베이스를 분류하고, 대규모 언어 모델(LLM, Large Language Model)을 포함하는 변환 모델을 이용하여 상기 자연어 쿼리를 분류된 데이터 베이스에 대응하는 SQL 쿼리로 변환하는 자연어 처리 기술에 관한 것이다."}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 자연어 쿼리 번역 기술에 관한 것으로 보다 구체적으로는 자연어 쿼리를 데이터 베이스를 제어하기 위한 SQL 쿼리로 효과적으로 번역하는 기술에 관한 것이다."}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근 들어 자연어 처리 분야의 기술 발전에 따라, 전통적인 기계 중심의 명령 입출력 방식에 따른 조작에서 벗 어나, 자연어를 매개로 한 대화 방식으로 원하는 서비스를 얻을 수 있도록 하는 활용이 점차 늘어나고 있다. SQL 언어는 데이터의 조회, 저장, 삭제를 위해 데이터베이스와 컴퓨터 언어로 통신을 수행할 수 있도록 하는 언 어를 의미한다. SQL 언어는 표준 SQL 언어를 통해 대다수의 데이터베이스(예를 들어, 오라클, DB2, SQLServer, MySQL 등)에 접속 및 제어를 수행할 수 있다. 자연어 쿼리(질문)을 SQL 쿼리로 번역(이하, NL2SQL이라 함)하는 것은, 자연어 쿼리에 대응하는 SQL 언어로 변 환해 주는 것을 말한다. 최근에는 이러한 NL2SQL을 위해 인공지능 기술을 이용하는 많은 방법들이 개발되고 있 지만, 정확도가 비교적 낮거나 다양한 종류의 자연어를 처리하지 못한다는 문제점이 존재한다. 이에 따라, 다양한 자연어(특히 한국어)를 지원하면서, 보다 정확도를 높이고 효과적으로 NL2SQL을 수행할 수"}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "있는 기술에 대한 연구가 요구되는 실정이다.발명의 내용"}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 해결하고자 하는 과제는 다양한 종류의 자연어를 지원할 수 있는 NL2SQL 기술을 제공하는 것이다. 본 발명이 해결하고자 하는 다른 과제는 NL2SQL 기술의 효율성 및 정확도를 향상시키는 기술을 제공하는 것이다. 본 발명이 해결하고자 하는 또 다른 과제는 대규모 언어 모델(LLM, Large Language Model)을 활용하여 NL2SQL 을 구현하는데 있어서, 변환의 정확도를 높이기 위하여 대규모 언어 모델에 적용되는 사전 조작 프로세스를 제 공하는 것이다. 본 발명에서 이루고자 하는 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급하지 않은"}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 2, "content": "또 다른 기술적 과제들은 아래의 기재로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하 게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 또는 다른 과제를 해결하기 위해 본 발명의 다른 측면에 따르면, 명령어들을 저장하는 메모리와 상기 저장 된 명령어들, 분류부 및 변환 모델을 실행하도록 설정된 프로세서를 포함하는 자연어 쿼리 번역 장치의 제어 방 법에 있어서, 상기 프로세서에 의해서 실행되는 분류부가 자연어 쿼리에 기초하여 관련 데이터 베이스를 분류하 는 단계; 및 상기 프로세서에 의해서 실행되는 변환 모델이 상기 자연어 쿼리를 분류된 관련 데이터 베이스에 대응하는 SQL 쿼리로 변환하는 단계를 포함하되, 상기 변환 모델은 대규모 언어 모델(LLM, Large Language Model)을 포함하도록 구성되고, 상기 변환 모델은 상기 자연어 쿼리를 포함한 자연어 입력을 수신하고, 수신된 자연어 입력에 기초하여 변환된 SQL 쿼리를 출력하되, 상기 자연어 입력은, 상기 분류된 관련 데이터 베이스에 대한 스키마 및 자연어 쿼리를 포함하는, 자연어 쿼리 번역 장치의 제어 방법을 제공한다. 상기 자연어 입력은, 엔티티 태깅 정보를 더 포함하도록 구성될 수 있다. 상기 자연어 입력은, 상기 자연어 쿼리, 상기 엔티티 태깅 정보 및 상기 스키마 중 적어도 둘 이상에 대하여 텍 스트 병합(concatenate)한 결과일 수 있다. 상기 자연어 입력은, 상기 자연어 쿼리, 상기 엔티티 태깅 정보 및 상기 스키마 중 적어도 하나에 지정된 라벨 을 포함할 수 있다. 상기 엔티티 태깅 정보는, 상기 분류된 관련 데이터 베이스에서 활용되는 명칭을 정규화시키기 위한 정보일 수 있다. 상기 분류된 관련 데이터 베이스에 포함된 테이블 중, 상기 자연어 쿼리에 관련없는 테이블을 필터링하여 관련 테이블을 출력하는 테이블 필터링 단계를 더 포함할 수 있다. 상기 관련 테이블상에서 상기 자연어 쿼리에 관련없는 컬럼을 필터링하여 관련 컬럼을 출력하는 컬럼 필터링 단 계를 더 포함할 수 있다. 상기 또는 다른 과제를 해결하기 위해 본 발명의 일 측면에 따르면, 자연어 쿼리에 기초하여 관련 데이터 베이 스를 분류하는 분류부; 및 상기 자연어 쿼리를 분류된 관련 데이터 베이스에 대응하는 SQL 쿼리로 변환하는 변 환 모델을 포함하되, 상기 변환 모델은 대규모 언어 모델(LLM, Large Language Model)을 포함하도록 구성되는, 자연어 쿼리 번역 장치를 제공한다."}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따른 자연어 처리 기술의 효과에 대해 설명하면 다음과 같다. 본 발명의 실시 예들 중 적어도 하나에 의하면, 다양한 종류의 자연어를 지원할 수 있는 NL2SQL 기술을 제공 할 수 있다는 장점이 있다. 또한, 본 발명의 실시 예들 중 적어도 하나에 의하면, NL2SQL 기술의 효율성 및 정확도를 향상시키는 기술을 제 공할 수 있다는 장점이 있다. 추가적으로 본 발명의 실시 예들 중 적어도 하나에 의하면, 대규모 언어 모델(LLM, Large Language Model)을 활 용하여 NL2SQL 을 구현하는데 있어서, 변환의 정확도를 높이기 위하여 대규모 언어 모델에 적용되는 사전 조작 프로세스를 제공할 수 있다는 장점이 있다. 본 발명의 적용 가능성의 추가적인 범위는 이하의 상세한 설명으로부터 명백해질 것이다. 그러나 본 발명의 사 상 및 범위 내에서 다양한 변경 및 수정은 당업자에게 명확하게 이해될 수 있으므로, 상세한 설명 및 본 발명의 바람직한 실시 예와 같은 특정 실시 예는 단지 예시로 주어진 것으로 이해되어야 한다."}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면을 참조하여 본 명세서에 개시된 실시 예를 상세히 설명하되, 도면 부호에 관계없이 동일하거 나 유사한 구성요소는 동일한 참조 번호를 부여하고 이에 대한 중복되는 설명은 생략하기로 한다. 이하의 설명 에서 사용되는 구성요소에 대한 접미사 \"모듈\" 및 \"부\"는 명세서 작성의 용이함만이 고려되어 부여되거나 혼용 되는 것으로서, 그 자체로 서로 구별되는 의미 또는 역할을 갖는 것은 아니다. 또한, 본 명세서에 개시된 실시 예를 설명함에 있어서 관련된 공지 기술에 대한 구체적인 설명이 본 명세서에 개시된 실시 예의 요지를 흐릴 수 있다고 판단되는 경우 그 상세한 설명을 생략한다. 또한, 첨부된 도면은 본 명세서에 개시된 실시 예를 쉽게 이 해할 수 있도록 하기 위한 것일 뿐, 첨부된 도면에 의해 본 명세서에 개시된 기술적 사상이 제한되지 않으며, 본 발명의 사상 및 기술 범위에 포함되는 모든 변경, 균등물 내지 대체물을 포함하는 것으로 이해되어야 한다. 제1, 제2 등과 같이 서수를 포함하는 용어는 다양한 구성요소들을 설명하는데 사용될 수 있지만, 상기 구성요소 들은 상기 용어들에 의해 한정되지는 않는다. 상기 용어들은 하나의 구성요소를 다른 구성요소로부터 구별하는 목적으로만 사용된다. 어떤 구성요소가 다른 구성요소에 \"연결되어\" 있다거나 \"접속되어\" 있다고 언급된 때에는, 그 다른 구성요소에 직접적으로 연결되어 있거나 또는 접속되어 있을 수도 있지만, 중간에 다른 구성요소가 존재할 수도 있다고 이 해되어야 할 것이다. 반면에, 어떤 구성요소가 다른 구성요소에 \"직접 연결되어\" 있다거나 \"직접 접속되어\" 있 다고 언급된 때에는, 중간에 다른 구성요소가 존재하지 않는 것으로 이해되어야 할 것이다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, \"포함한다\" 또는 \"가지다\" 등의 용어는 명세서상에 기재된 특징, 숫자, 단계, 동작, 구성요소, 부 품 또는 이들을 조합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계,동작, 구성요소, 부품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되 어야 한다. 대규모 언어 모델(LLM, Large Language Model)은 대규모 데이터 세트에서 얻은 지식을 기반으로 텍스트와 다양"}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "한 콘텐츠를 인식하고 요약, 번역, 예측, 생성할 수 있는 딥 러닝 알고리즘을 말한다. 대규모 언어 모델은 트랜 스포머 모델(transformer model)의 가장 성공적인 애플리케이션 중 하나로 평가되며, 오픈AI사의 \"Chat-GPT\"나 구글의 바드(Bard)가 대규모 언어 모델의 대표적인 서비스이다. 대규모 언어 모델은 데이터 입출력 집합을 통해 학습된 머신러닝 신경 네트워크로 구성된다. 텍스트는 미분류 상태이며 모델은 자기지도 또는 준 지도학습 방법론을 사용하는 것이 일반적이다. 정보나 콘텐츠가 대규모 언어 모델에 입력되면 알고리즘이 예측한 다음 단어가 출력된다. 본 발명의 일실시예에서는, 이와 같은 대규모 언어 모델에 기초하여 자연어 쿼리를 번역하는 기술을 제안한다. 도 1은 본 발명의 일실시예에 따른 자연어 쿼리 번역 장치의 블록도를 도시하는 도면이다. 도 1에 도시된 바를 참고하면, 본 발명의 일실시예에 따른 자연어 쿼리 번역 장치는, 분류부, 변환 모델, 정규화부, 도메인 특성 추가 모델, 테이블 필터링부, 컬럼 필터링부, 프롬프트 매니저부, 분류 훈련부, 변환 모델 훈련부, 훈련 DB, 스키마 DB, 엔티티 태깅 정보 DB 및 도메인 특성 DB를 포함하도록 구성될 수 있다. 도 1에 도시된 구성요소들은 자연어 쿼리 번역 장치를 구현하는데 있어서 필수적인 것은 아니기 때문에, 본 명세서 상에서 설명되는 자연어 쿼리 번역 장치는 위에서 열거된 구성요소들 보다 많거나, 또는 적은 구성요소들을 가질 수 있다. 분류부는 자연어 쿼리가 입력되었을 때, 입력된 자연어 쿼리와 관련된 데이터 베이스와 관련 없는 데이터 베이스를 분류하는 구성이다. 즉, 분류부는 자연어 쿼리를 입력으로 받고, 입력된 자연어 쿼리에 관련된 데이터 베이스를 결정한다. 변환 모델은 자연어 쿼리를 SQL 쿼리로 변환하는 구성이다. 특히, 본 발명의 일실시예에 따른 변환 모델은 분류부의 분류 결과를 이용하여, 입력된 자연어 쿼리 에 관련된 데이터 베이스(이하, 자연어 쿼리의 관련 데이터 베이스라 함)가 무엇인지 참고하고, 관련 데이터 베 이스에 대응하는(관련 데이터 베이스를 제어 또는 조회하기 위한) SQL 쿼리를 생성할 수 있다. 이하 도 2를 참고하여, 변환 모델을 보다 구체적으로 살펴본다. 도 2는 본 발명의 일실시예에 따른 변환 모델의 개념도를 도시하는 도면이다. 본 발명의 일실시예에 따른 변환 모델은 자연어 쿼리를 입력 받으면, 분류부의 분류 결과 를 참고하여 SQL 쿼리로 변환시킨다. SQL 쿼리는 입력 받은 자연어 쿼리의 관련 데이터 베이스 를 제어하기 위한 명령어일 것이다. 도시된 예시에서 자연어 쿼리는 \"Participates_in\"이라는 명칭을 가진 데이터 베이스를 조회해야 하는 질 문이고, 분류부는 자연어 쿼리를 해석하여 \"Participates_in\"이라는 데이터 베이스가 입력된 자연어 쿼리의 관련 데이터 베이스라는 것을 분류 결과로서 변환 모델에게 전달한다. 이를 전달 받은 변환 모델은, \"Participates_in\"이라는 데이터 베이스를 조회(제어)할 수 있는 SQL 쿼리를 생성할 수 있다.특히, 본 발명의 일실시예에 따른 변환 모델은, 상술한 대규모 언어 모델을 포함하도록 구성될 수 있다. 대규모 언어 모델을 포함하도록 구성되는 변환 모델은 상술한 변환 모델의 역할 뿐만 아니라 정규화 부나 프롬프트 매니저부의 역할을 더 수행할 수도 있다. 프롬프트 매니저부의 구체적인 역할에 대해서는, 이하 도 6과 함께 구체적으로 후술한다. 본 발명의 일실시예에 따른 변환 모델은, 자연어 쿼리와 함께 엔티티 태깅 정보(204, 지식)와 스키마 중 적어도 하나를 더 입력으로 받고, 이를 함께 고려하여 SQL 쿼리로 변환시킬 수 있다. 이하에서는, 변환 모델의 입력으로 제공하기 위하여 자연어 쿼리, 엔티티 태깅 정보 및 스키마 중 적어도 두 개를 조합한 것을 자연어 입력이라고 부르기로 한다. 도 3은 본 발명의 일실시예에 따른 자연어 입력을 생성하는 개념도를 도시하는 도면이다. 도 4은 본 발명의 일실시예에 따른 대규모 언어 모델을 포함하도록 구성된 변환 모델의 자연어 입력 의 예시를 도시한다. 이하 도 3 및 도 4를 함께 참고하여 설명한다. 도 3에 도시된 자연어 입력을 살펴보면, 자연어 쿼리, 엔티티 태깅 정보(204, 지식), 스키마, 페르소나 정보 및 제약 정보를 포함하도록 구성될 수 있다. 대규모 언어 모델은, 특별한 입력의 형태가 요구되는 것이 아니라, 자연어와 같이 인간의 언어와 같은 형태로 입력을 받을 수 있는 것이 특징이다. 이에 따라 본 발명의 일실시예에 따른 자연어 입력은, 자연어 쿼리 , 엔티티 태깅 정보(204, 지식), 스키마, 페르소나 정보 및 제약 정보 중 적어도 하나의 텍스트가 병합(concatenate)된 형태로 구성되도록 제안한다. 본 발명의 일실시예에서는 상술한 텍스트 병합을 하면서, 이하에서 후술하는 라벨을 활용하여 병합할 수 있을 것이다. 도 4에 도시된 자연어 입력은 하나의 예시에 불과하며, 자연어 쿼리와 함께 엔티티 태깅 정보(204, 지식), 스키마, 페르소나 정보 및 제약 정보 중 적어도 하나가 조합되어 자연어 입력을 구 성할 수 있을 것이다. 페르소나 정보는, 변환 모델의 역할 정보(311-1) 및 참고 대상 정보(311-2)를 포함할 수 있다. 역할 정보(311-1)란 변환 모델의 구체적인 역할을 지정하는 정보이며, 참고 대상 정보(311-2)는 변환 모델(10 2)이 역할을 수행하면서 참고해야 할 대상을 지정하기 위한 정보를 의미한다. 도 4에 도시된 예시에서와 같이 SQL로 변환해주는 역할을 지정하면서, 엔티티 태깅 정보(204, 지식), 스키마 및 제약 정보를 참고할 것을 지정할 수 있다. 엔티티 태깅 정보란, 데이터 베이스에서 특정 대상을 다른 용어로 사용할 경우, 혹은 특정 대상을 의미하 는 용어가 복수 개 존재할 경우, 특정 대상과 용어(들)에 대한 매칭 정보를 의미할 수 있다. 엔티티 태깅이란, 엔티티 태깅 정보를 이용하여 다양한 용어들을 데이터 베이스에서 사용되는 명칭으로 변환시키는 것을 의 미한다. 즉, 자연어 쿼리로 들어온 명칭 중 해당 데이터 베이스에서 사용(데이터 베이스 명칭, 테이블 명칭, 컬럼 (column, 속성) 이름 등)하지 않는 명칭이 존재할 경우, 해당 명칭을 데이터 베이스에서 사용하는 명칭으로 변 환하기 위한 일종의 맵핑 정보를 엔티티 태깅 정보라고 할 수 있을 것이다.구체적인 예로, '모모래빗'이라는 대상은 해당 데이터 베이스 상에서 '모모래빗 기저귀'이라는 용어로 사용될 때, 엔티티 태깅 정보는 '모모래빗'과 '모모래빗 기저귀'를 매칭시키는 정보를 포함한다. 그리고 이러한 엔티티 태깅 정보를 이용하여 '모모래빗'을 '모모래빗 기저귀'로 변환시키는 것을 엔티티 태깅이라고 할 수 있다. 스키마란 특정 데이터 베이스에서 자료의 구조, 자료의 표현 방법, 자료 간의 관계를 형식 언어로 정의한 구조를 포함하는 데이터를 말한다. 특정 데이터 베이스를 이용할 수 있는 일종의 사용자 메뉴얼이라고 볼 수 있 다. 도 4에 도시된 예시의 스키마를 참고하면, 특정 데이터 베이스에 두 개의 테이블이 존재하는 것을 알 수 있다. 여기서 특정 데이터 베이스란, 상술한 분류부의 분류 결과에 해당하는 데이터 베이스를 의미할 수 있 을 것이다. 즉, 도 4에 도시된 예시에서의 스키마는, 분류부가 자연어 쿼리를 참고한 결과, 자 연어 쿼리의 관련 데이터 베이스에 대한 스키마일 수 있다. 제1 테이블의 명칭은 \"users\"로, 6개의 속성(attribute, 열)을 가진다. 스키마를 참고하면, 6개의 속성은 'id', 'age', 'gender', 'name', 'occupation' 및 'year'으로 구성되며, 여기서 기본키(Primary Key, PK)는 'id' 속성이라는 것을 확인할 수 있다. 스키마에는 각 속성이 가지는 데이터의 형식(타입)에 대한 정보 역시 포함할 수 있다. 예를 들어, 'id' 속 성의 데이터 형식은 정수(INT, integer)이고, 널(Null)을 허용하지 않고, 순차적으로 증가하는 형태로 구비될 수 있다. 마찬가지로 제2 테이블의 명칭은 \"personal_information\"으로, 3개의 속성을 가진다. 스키마를 참고하면, 3개의 속성은 'id', 'address' 및 'phone_number'로 구성되며, 'id'는 제1 테이블의 'id' 속성을 가리키는 것 을 확인할 수 있다. 이와 같이 데이터 베이스의 스키마는, 해당 데이터 베이스를 구성할 때 사용되는 명세서와 같은 역할을 수 행하는 정보를 포함하고 있기 때문에, 해당 데이터 베이스를 제어하기 위한 SQL 쿼리 생성에 중요한 정보를 포 함할 것이다. 한편 스키마에 포함되어 있는 '속성'들은, 구체적으로 어떤 의미를 나타내는 것인지에 대한 지정이 요구될 것이다. 예를 들어 제1 테이블에 포함되어 있는 'year' 속성에 대응되는 데이터는, '가입 연도', '태어난 연 도'나 '탈퇴 연도' 등 어떤 의미의 정보를 포함하는 것인지 여부를 명확하게 지정해 줄 필요가 있다. 이에 따라 본 발명의 일실시예에 따른 자연어 쿼리 번역 장치는 자연어 쿼리에서 사용되는 단어와 데 이터 베이스의 속성 간에 매칭시키기 위한 정보(또는 지식(knowledge))를 엔티티 태깅 정보라고 하고, 엔 티티 태깅 정보를 스키마와 함께 고려하여 SQL 번역을 수행할 수 있도록, 자연어 입력에 포함시키는 것이다. 제약(constraint) 정보는 SQL 쿼리의 출력 형태를 지정하기 위한 정보를 의미한다. 예를 들어 제약 정보는, 부가적인 문구나 정보를 출력하지 않고 \"SQL만을 출력\"하는 제약 조건 내지 요청일 수 있다. 이러 한 제약 정보에 대응한 출력은, 바로 데이터 베이스에 사용 가능한 SQL 쿼리만이 출력될 수 있을 것이다. 도 4에서와 같은 자연어 입력이 수신되면, 변환 모델은 자연어 쿼리와 함께 엔티티 태깅 정보 (204, 지식), 스키마, 페르소나 정보 및 제약 정보 중 적어도 하나를 고려하여 SQL 쿼리를 출력해 줄 수 있을 것이다. 본 발명의 일실시예에 따른 자연어 입력은, 자연어 쿼리, 엔티티 태깅 정보(204, 지식), 스키마 , 페르소나 정보 및 제약 정보 각각에 라벨링을 포함하도록 제안한다. 라벨링이란, 전체 자연어 입력 상에서 어떤 정보인지를 지정하는 것을 의미한다. 예를 들어, 자연어 쿼리에는 \"question\"이라 는 라벨이 지정되어, 변환 모델에게 자연어 쿼리라는 것을 알려줄 수 있을 것이다. 도시된 예시에서는, 자연어 쿼리에 \"question\", 엔티티 태깅 정보(204, 지식)에 \"knowledge\", 스키마 에는 \"schema\", 페르소나 정보에는 \"persona\" 및 제약 정보에는 \"constraint\"라는 라벨이 지정 되었지만, 반드시 이에 한정되는 것은 아니다. 본 발명의 일실시예에 따른 페르소나 정보에 포함된 참고 대상 정보(311-2)는, 상술한 라벨링에 의해 지정 된 라벨을 활용할 수 있다. 예를 들어, 스키마를 고려하여 변환을 수행하고자 할 때 참고 대상 정보(311- 2)는 스키마의 라벨인 \"schema\"를 고려하도록 지정할 수 있다. 다시 도 1로 복귀하여 나머지 구성에 대해서 설명한다. 정규화부는 변환 모델이 변환한 SQL 쿼리에 정규화를 수행하는 구성이다. 본 발명의 일실시예에 따른 정규화란 데이터 베이스에 표현된 형태와 맞추는 과정을 의미할 수 있다. 즉 데이터 베이스의 종류에 따라 서, 테이블의 명칭이나 테이블 내에 포함된 구체적인 데이터 항목의 명칭, 날짜/시간/숫자 등을 사용하는 포맷 들이 상이한데, 이러한 포맷들을 조회 대상 데이터 베이스의 포맷과 일치시키는 동작을 의미할 수 있다. 예를 들어, '작년' 내지 '지난 해'를 해당 데이터 베이스의 년도 포맷인 '2022년'으로 변환하는 것이 정규화일 수 있을 것이다. 더 나아가, 본 발명의 일실시예에 따른 정규화부는, 도 1과 함께 상술한 엔티티 태깅(entity tagging) 정 보를 고려하여, 엔티티 태깅을 수행하는 것을 더 포함할 수 있다. 또한 상술한 바와 같이, 변환 모델이 대규모 언어 모델을 포함하도록 구성되는 경우, 정규화부는 변 환 모델과 별도의 독립적인 구성이 아니라, 하나의 단일 구성으로 구현될 수 있음은 자명하다. 보다 구체 적으로 설명하면, 대규모 언어 모델을 포함하도록 구성된 변환 모델에 의해서 출력된 결과는, 상술한 엔티 티 태깅 정보를 이용하여 정규화까지 이루어진 SQL 쿼리를 출력해 줄 수 있다. 본 발명의 일실시예에 따른 도메인 특성 추가 모델은 고객의 비즈니스 로직에 따라 다르게 동작하기 위하 여 SQL 쿼리에 도메인 특성을 추가하기 위한 구성이다. 구체적인 예로, 도메인 특성 추가 모델은 출력 컬 럼의 이름을 변경하거나, where 조건절을 추가하는 등의 수정을 통하여 도메인 특성을 추가할 수 있다. 도메인 특성을 추가하기 위하여 도메인 특성 추가 모델은 도메인 특성 DB에 저장되어 있는 도메인 특 성 정보를 이용할 수 있다. 테이블 필터링부란, 데이터 베이스 중에서 입력된 자연어 쿼리에 연관된 테이블과 그렇지 않은 테이블을 구분한다. 즉, 데이터 베이스를 구성되는 복수 개의 테이블 중에서, 입력된 자연어 쿼리와 관련된 테이블(이하 에서는 관련 테이블이라 함)만을 선택하기 위한 구성으로, 상기 분류된 관련 데이터 베이스에 포함된 테이블 중, 상기 자연어 쿼리에 관련없는 테이블을 필터링하여 관련 테이블을 출력한다. 테이블 필터링부에 의해 서 자연어 쿼리에 관련 없는 것으로 판단된 테이블은, 도 4의 자연어 입력에 포함될 필요가 없을 것이기 때문이다. 일반적으로 대규모 언어 모델의 경우 입력으로 들어갈 수 있는 사이즈가 한정적이다. 예를 들어, 트랜스포머의 디코더(Decoder) 아키텍처를 활용한 오픈AI사의 \"Chat-GPT\"의 경우, 입력 토큰의 개수가 4,096개로 제한된다. 즉, 입력된 문자의 개수가 4,096개를 넘을 수 없다. 물론 입력 토큰의 개수를 더 많이 받을 수 있도록 설계를 변경할 수도 있지만, 변경된 모델의 토큰 역시 소정 개수로 제한될 수 밖에 없다. 그렇기 때문에, 대규모 언어 모델을 SQL 번역에 활용하기 위해서는, 입력의 사이즈를 소정 수준 이하로 제한할 필요성이 존재한다. 이에 따라서, 자연어 쿼리 번역 장치는 자연어 입력을 구성할 때, 해당 데이터 베이스의 전체 스키마 를 넣는 것이 아니라, 테이블 필터링부에 의해서 관련 테이블인 것으로 판단된 테이블의 스키마만을 자연 어 입력으로 포함되도록 구성할 수 있다. 이를 위해서, 자연어 쿼리 번역 장치는, 분류부에 의해서 특정된 데이터 베이스의 스키마를 복수 개 의 테이블 스키마로 구분하고, 테이블 필터링부에 의해서 관련 테이블인 것으로 판단된 적어도 하나의 테 이블에 대한 테이블 스키마를 조합하여 부분 스키마를 생성할 수 있다. 그리고 자연어 쿼리 번역 장치는 생성된 부분 스키마가 상술한 자연어 입력에 포함되도록 구성하여, 대규모 언어 모델의 입력 토큰의 개수 가 제한되는 것에 맞출 수 있을 것이다. 더 나아가 본 발명의 일실시예에 따른 자연어 쿼리 번역 장치는, 특정 테이블 상의 컬럼을 필터링하도록 제안한다. 경우에 따라서, 하나의 테이블이라도 컬럼의 개수가 많아지게 되면 제한된 입력 토큰의 개수를 초과 하게 되기 때문이다. 이를 위해서 자연어 쿼리 번역 장치는 컬럼 필터링부를 구비하도록 제안한다. 컬럼 필터링부는 특정 테이블의 스키마에서 입력된 자연어 쿼리에 연관된 컬럼에 관련된 부분과 그렇지 않 은 컬럼에 관련된 부분을 구분한다. 즉, 테이블을 구성되는 복수 개의 컬럼(속성) 중에서, 입력된 자연어 쿼리 와 관련된 컬럼(이하에서는 관련 컬럼이라 함)만을 선택하여 해당 스키마만을 참조하기 위한 구성으로, 상기 관 련 테이블상에서 상기 자연어 쿼리에 관련없는 컬럼을 필터링하여 관련 컬럼을 출력한다. 컬럼 필터링부에 의해서 자연어 쿼리에 관련 없는 것으로 판단된 컬럼의 스키마는, 도 4의 자연어 입력에 포함될 필요가 없 을 것이기 때문이다. 이를 위해서 컬럼 필터링부는, 특정 스키마의 메타데이터를 참고하거나, 속성값이 매칭되는지 여부에 기초 하여 필터링 여부를 판단할 수 있을 것이다. 특히, 자연어 쿼리에 포함된 단어와 속성을 나타내는 텍스트가 정 확하게 매칭되는 것 뿐만 아니라, 어느 정도 대응되는지(유사한 매칭)에 기초하여 필터링을 수행할 수 있을 것 이다. 예를 들어 자연어 쿼리에 '해외사업'이라는 키워드에 매칭되는 컬럼을 판단할 때, 속성값(column value)가 정확 히 '해외사업'인 경우뿐만 아니라, '해외사업(확정)' 등 키워드 일부가 포함된 경우나 '해외사업'과 동일하거나 유사한 의미를 가지는 '국외사업' 등(임베딩 벡터 간 유사도 판단)을 모두 매칭되는 것으로 판단할 수 있을 것 이다. 프롬프트 매니저부는 본 발명의 일실시예에 따라 변환 모델이 변환한 SQL 쿼리에 기초하여 데이 터 베이스를 조회한 결과가 나왔을 때, 조회한 결과를 자연어 쿼리에 맞는 적절한 답변으로 변환해주기 위 한 구성을 의미한다. 상술한 바와 같이, 변환 모델이 대규모 언어 모델을 포함하도록 구성되는 경우, 프롬프트 매니저부는 변환 모델과 별도의 독립적인 구성이 아니라, 하나의 단일 구성으로 구현될 수 있음은 자명할 것이다. 분류 훈련부란 훈련 DB에 저장되어 있는 학습 데이터(training data)를 이용하여 분류부를 훈련 시키는 구성이다. 변환 모델 훈련부는 훈련 DB에 저장되어 있는 학습 데이터 및 스키마 DB에 저장되어 있는 스키마 데 이터에 기초하여, 변환 모델을 훈련시키는 구성이다. 훈련 DB는, 적어도 하나의 학습 데이터를 저장하는 구성이다. 학습 데이터란, 인공 신경망이나 기타 인공 지능 프로그램 활용의 기준이 되는 데이터셋을 말한다. 보다 구체적으로 학습 데이터란, 소정의 입력과 소정의 입력에 정답이 되는 출력이 쌍을 이루는 데이터 셋트로, 정답이 되는 출력이 나올 수 있도록 인공 지능 모델을 훈련시키기 위한 용도로 활용된다. 본 발명의 일실시예에 따른 학습 데이터는, 자연어 쿼리와 이를 변환한 정답 SQL 쿼리가 쌍을 이루는 데이터셋 으로 구성될 수 있을 것이다. 본 발명의 일실시예에 따른 스키마 DB란 각 데이터 베이스에 대한 스키마(또는 스키마 데이터)를 저장하는 구성이다. 상술한 바와 같이 스키마란, 특정 데이터 베이스에서 자료의 구조, 자료의 표현 방법, 자료 간의 관 계를 형식 언어로 정의한 구조를 포함하는 데이터를 말한다. 특정 데이터 베이스를 이용할 수 있는 일종의 사용 자 메뉴얼이라고 볼 수 있다. 엔티티 태깅 정보 DB란, 적어도 하나의 엔티티 태깅 정보를 저장하는 구성이다. 엔티티 태깅 정보란, 상술 한 바와 같이 특정 대상과 용어(들)에 대한 매칭 정보를 의미한다. 도메인 특성 DB란, 도메인 특성 정보를 저장하는 구성이다. 도메인 특성 정보는 상술한 도메인 특성 추가 모델에서, 도메인 특성을 반영하기 위하여 활용된다. 한편, 도 1과 함께 살펴본 블록도에서는 분류부, 변환 모델, 정규화부, 도메인 특성 추가 모델 및 프롬프트 매니저부가 서로 다른 독립된 구성으로 표현되어 있지만, 반드시 이러한 독립된 구성에 한정되는 것은 아니다. 예를 들어, 변환 모델이 정규화부 및 도메인 특성 추가 모델의 역할을 모두 수행하도록 구현될 수도 있을 것이다. 이하에서는 구체적인 순서도를 참고하여, 본 발명의 일실시예에 따른 자연어 처리 기술을 살펴본다. 도 5는 본 발명의 일실시예에 따른 자연어 처리 방법의 순서도를 도시하는 도면이다. S501 단계에서, 분류부는 자연어 쿼리 입력을 수신한다. 자연어 쿼리란, SQL 쿼리로 변환시키기 위한 질문 을 포함하는 자연어로, 복수 개의 데이터 베이스 중 적어도 하나의 데이터 베이스를 제어하거나, 이를 조회하기 위한 SQL 쿼리로 변환되기 위한 대상을 의미한다. 그리고 S502 단계에서 분류부는 입력 받은 자연어 쿼리에 대한 데이터 베이스(자연어 쿼리에 관련된 데이 터 베이스)를 분류한다. 분류부는 상술한 복수 개의 데이터 베이스 중에서, 자연어 쿼리와 관련있는 데이 터 베이스(관련 데이터 베이스)와 관련 없는 데이터 베이스를 구분한다.이어서 테이블 필터링부는 입력 받은 자연어 쿼리에 관련된 테이블에 대한 필터링을 수행(S503)한다. 분류 부에 의해 판단된 관련 데이터 베이스 중 자연어 쿼리에 연관된 테이블과 그렇지 않은 테이블을 구분하여, 상기 자연어 쿼리에 관련없는 테이블을 필터링하여 관련 테이블을 출력한다. 즉, S503 단계는 관련 데이터 베이 스를 구성되는 복수 개의 테이블 중에서, 입력된 자연어 쿼리에 대한 관련 테이블만을 선택한다. S504 단계에서 컬럼 필터링부는 S503 단계에서 선택된 관련 테이블의 스키마에서 입력된 자연어 쿼리에 연 관된 컬럼에 관련된 부분과 그렇지 않은 컬럼에 관련된 부분을 구분한다. 즉, S504 단계에서는 관련 테이블을 구성되는 복수 개의 컬럼(속성) 중에서, 입력된 자연어 쿼리에 대한 관련 컬럼만을 선택한다. 이어서 S505 단계에서 변환 모델은 입력 받은 자연어 쿼리를 SQL 쿼리로 변환한다. 도 2와 함께 상술한 바 와 같이 변환 모델이 수행하는 SQL 쿼리의 변환은 분류부의 분류 결과를 활용하여 변환할 수 있 다. 이때 변환 모델로 제공되는 자연어 입력에는 S503 단계의 관련 테이블에 대한 스키마 또는 S504 단계의 관련 컬럼에 대한 스키마가 포함되어, 변환 모델의 제한된 입력 토큰의 개수에 맞추는 자연어 입력 이 제공될 수 있을 것이다. 이어서 자연어 쿼리 번역 장치는, 변환된 SQL 쿼리에 기초하여 데이터 베이스를 조회(S506)하고, 조회 결 과를 획득한다. 프롬프트 매니저부는 조회 결과에 대한 프롬프트를 구성(S507)한다. 프롬프트 매니저부 의 프롬프트 구성에 대해서는 이하 도 6을 참고하여 설명한다. 도 6은 본 발명의 일실시예에 따른 프롬프트 매니저부의 개념을 도시하는 도면이다. 도 6에 도시된 예시는 자연어 쿼리가 \"저지리 323에 거주하는 남자 예술가는 몇명이야?\"인 경우를 도시한 다. 이와 같은 자연어 쿼리에 대응하여, 자연어 쿼리 번역 장치는 자연어 입력을 생성할 수 있다. 도 3 및 도 4와 관련하여 상술한 바와 같이 자연어 입력은 자연어 쿼리, 엔티티 태깅 정보(204, 지식), 스키마, 페르소나 정보 및 제약 정보 중 적어도 하나의 텍스트가 병합(concatenate)된 형태로 구성될 수 있다. 이와 같이 생성된 자연어 입력은 변환 모델에 입력된다. 변환 모델은 상술한 바와 같이 대규모 언어 모델(LLM, Large Language Model)을 포함하도록 구성될 수 있 다. 변환 모델은 자연어 입력을 SQL 쿼리로 변환시킨다. 특히 변환 모델은 분류부에 의해 서 관련 데이터 베이스로 분류된 데이터 베이스에 대한 SQL 쿼리를 생성하는 형태로 변환을 수행할 수 있 다. 601은 도 6에 도시된 예시에서의 자연어 쿼리인 \"저지리 323에 거주하는 남자 예술가는 몇명이야?\"를 변환 한 SQL 쿼리를 나타낸다. 이어서 자연어 쿼리 번역 장치는 생성된 SQL 쿼리를 데이터 베이스에 전달하여, 조회 결과(60 3)를 획득할 수 있다. 즉 변환 모델에 의해서 변환된 SQL 쿼리는 데이터 베이스에서 조회 결과 를 획득하기 위한 쿼리일 것이다. 도 6에 도시된 예시에서, 자연어 쿼리에 대한 데이터 베이스의 조회 결과가 \"10\"이라는 것을 알 수 있다.이어서 프롬프트 매니저부는, 자연어 쿼리 및 조회 결과를 기초로 프롬프트를 구성한다. 프롬프 트 구성이란, 조회 결과를 사용자가 이해하기 쉬운 표현으로 변환해주는 것을 의미하며, 자연어 쿼리(30 1)를 참고하여 이에 대응하는 표현으로 변환시켜 줄 수 있다. 예를 들어, 도 6에 도시된 예시에서와 같이 \"저지리 323에 거주하는 남자 예술가는 몇명이야?\"라는 자연어 쿼리 에 대한 데이터 베이스 조회 결과가 \"10\"일 때, \"저지리 323에 거주하는 남자 예술가는 10명입니 다.\"라는 표현으로 변환시켜 줄 수 있다. 도 7은 일 실시예에 따른 자연어 쿼리 번역 장치의 구성을 도시한 도면이다. 본 문서에 개시된 다양한 실시예들에 따른 자연어 쿼리 번역 장치는 다양한 형태의 장치가 될 수 있다. 자 연어 쿼리 번역 장치는, 예를 들면, 휴대용 통신 장치(예: 스마트폰), 컴퓨터 장치, 휴대용 멀티미디어 장 치, 휴대용 의료 기기, 카메라, 웨어러블 장치, 가전 장치, 또는 서버를 포함할 수 있다. 본 문서의 실시예에 따른 자연어 쿼리 번역 장치는 전술한 기기들에 한정되지 않는다. 도 7을 참조하면, 자연어 쿼리 번역 장치는 프로세서 및 메모리를 포함한다. 메모리는 프로세서에 의해 실행 가능한 하나 이상의 명령어들과 하나 이상의 구성 요소에서 사용되 는 다양한 데이터를 저장한다. 데이터는 예를 들어, 소프트웨어(예: 프로그램), 이와 관련된 명령어에 대한 입 력 데이터 또는 출력 데이터, 및 트랜스포머 모델에 관한 데이터를 포함할 수 있다. 메모리는 RAM, DRAM, SRAM과 같은 휘발성 메모리 및/또는 플래쉬 메모리와 같은 이 기술 분야에서 알려진 비휘발성 메모리를 포함할 수 있다. 프로세서는 메모리에 저장된 하나 이상의 명령어를 실행한다. 프로세서는 명령어를 실행하는 것에 의해 도 1 내지 도 5와 관련하여 위에서 설명된 하나 이상의 동작을 실행할 수 있다. 또한 도 1과 함께 상술한 본 발명의 구성은 프로세서에 의해서 실행되는 명령어에 의해 서 구현되는 구성일 수 있을 것이다. 일 실시예에서, 프로세서는 트랜스포머 모델을 이용하여 SQL 변환을 수행할 수 있다. 이상으로 본 발명에 따른 자연어 쿼리를 SQL 쿼리로 변환하는 기술의 실시예를 설시하였으나 이는 적어도 하나 의 실시예로서 설명되는 것이며, 이에 의하여 본 발명의 기술적 사상과 그 구성 및 작용이 제한되지는 아니하는 것으로, 본 발명의 기술적 사상의 범위가 도면 또는 도면을 참조한 설명에 의해 한정／제한되지는 아니하는 것 이다. 또한 본 발명에서 제시된 발명의 개념과 실시예가 본 발명의 동일 목적을 수행하기 위하여 다른 구조로"}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "수정하거나 설계하기 위한 기초로써 본 발명이 속하는 기술분야의 통상의 지식을 가진 자에 의해 사용되어질 수"}
{"patent_id": "10-2023-0095041", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "있을 것인데, 본 발명이 속하는 기술분야의 통상의 지식을 가진 자에 의한 수정 또는 변경된 등가 구조는 청구 범위에서 기술되는 본 발명의 기술적 범위에 구속되는 것으로서, 청구범위에서 기술한 발명의 사상이나 범위를 벗어나지 않는 한도 내에서 다양한 변화, 치환 및 변경이 가능한 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7"}
{"patent_id": "10-2023-0095041", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일실시예에 따른 자연어 쿼리 번역 장치의 블록도를 도시하는 도면이다. 도 2는 본 발명의 일실시예에 따른 변환 모델의 개념도를 도시하는 도면이다. 도 3은 본 발명의 일실시예에 따른 자연어 입력을 생성하는 개념도를 도시하는 도면이다. 도 4은 본 발명의 일실시예에 따른 대규모 언어 모델을 포함하도록 구성된 변환 모델의 자연어 입력 의 예시를 도시한다. 도 5는 본 발명의 일실시예에 따른 자연어 처리 방법의 순서도를 도시하는 도면이다. 도 6은 본 발명의 일실시예에 따른 프롬프트 매니저부의 개념을 도시하는 도면이다. 도 7은 일 실시예에 따른 자연어 쿼리 번역 장치의 구성을 도시한 도면이다."}
