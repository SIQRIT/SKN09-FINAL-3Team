{"patent_id": "10-2023-0121823", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0039097", "출원번호": "10-2023-0121823", "발명의 명칭": "이상 탐지 방법 및 시스템", "출원인": "(주)빅아이", "발명자": "장병호"}}
{"patent_id": "10-2023-0121823", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "가공장치에 장착된 센서를 사용하여 데이터를 수집하는 데이터 수집단계와,상기 수집단계에서 수집된 데이터에서 작업공정에 대한 패턴을 추출하는 데이터 전처리단계와,상기 데이터 전처리단계에서 추출된 패턴을 신경망 구조를 가진 인공지능알고리즘을 사용하여 정상패턴을 학습하는 학습단계와,상기 센서에서 측정된 데이터가 상기 학습단계에서 학습된 정상패턴을 벗어나는지 여부를 판단하는 탐지단계를포함하는 것을 특징으로 하는 이상 탐지방법."}
{"patent_id": "10-2023-0121823", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "데이터를 수집할 수 있도록 가공장치에 장착된 복수의 센서부와,상기 센서부에서 수집된 데이터에서 상기 가공장치의 작업공정에 대한 패턴을 추출하는 데이터 전처리부와,상기 데이터 전처리부에서 추출된 패턴을 신경망 구조를 가진 인공지능알고리즘을 사용하여 정상패턴을 학습하는 학습부와,상기 센서에서 측정된 데이터가 상기 학습부에서 학습된 정상패턴을 벗어나는지 여부를 판단하는 탐지부를 포함하는 것을 특징으로 하는 이상 탐지 시스템."}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 이상 탐지 방법 및 시스템에 대한 것으로서, 더욱 상세하게는 가공장치의 작업시 이상 공정을 탐지할 수 있는 이상 탐지 방법과 이상 탐지 시스템에 대한 것이다. 본 발명에 따른 이상 탐지방법은 데이터 수집단계와, 데이터 전처리단계와, 학습단계와, 탐지단계를 포함한다. (뒷면에 계속)"}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 이상 탐지 방법 및 시스템에 대한 것으로서, 더욱 상세하게는 가공장치의 작업시 이상 공정을 탐지할 수 있는 이상 탐지 방법과 이상 탐지 시스템에 대한 것이다."}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "공작물을 가공하는 가공장치가 정상적으로 작동하지 않거나 이상이 발생할 경우 생산 중단이나 불량품 생산 등 의 문제가 발생할 수 있다. 따라서 가공장치의 이상을 조기에 감지하여 고장을 예방하고 생산성을 향상시키기 위하여 이상 탐지 방법 및 시스템이 필요하다. 이러한 이상 탐지 방법 및 시스템은 임계치를 기반방법 또는 시계열분석을 통하여 이상 여부를 탐지한다. 임계 치를 기반으로 이상을 탐지하는 방법은 센서로부터 데이터를 수집하여 수집한 데이터와 설정된 임계치 값을 비 교하여 이상 상태를 감지합니다. 즉 데이터가 임계치를 초과하거나 미달할 경우 이상으로 판단한다. 이 경우 단 순하지만 모든 상황을 고려하기에는 한계가 있다는 문제점이 있다. 시계열 분석은 시간에 따라 변화하는 데이터를 분석하여 통계적 방법을 적용하여 이상 패턴을 판단한다. 선행기술문헌 특허문헌 (특허문헌 0001) 공개특허 제10-2023-0120186호(공개일자 2023년 08월 17일) (특허문헌 0002) 공개특허 제10-2023-0119309호(공개일자 2023년 08월 16일)"}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "발명의 내용"}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "종래의 이상 탐지방법 및 시스템은 정적인 임계치를 설정하여 데이터가 이 임계치를 벗어나면 이상으로 판단하 였다. 이 경우 시스템이 다양한 작동 조건에 대응하기 어렵고, 노이즈와 변동성을 고려하지 못하는 문제점이 있 었다. 또한, 종래의 이상 탐지방법 및 시스템은 데이터의 패턴이 복잡하고 다양할 경우 모든 상황을 정확하게 감지하 기 어려웠으며, 실제 작업 환경에서 발생하는 변동성을 대응하기 어렵다는 문제점이 있었다. 본 발명은 상기의 문제점을 해결하기 위한 것이다. 본 발명은 데이터의 패턴을 학습함으로써 다양한 작동 조건 이나 데이터의 패턴이 복잡한 경우에도 이상 여부를 탐지할 수 있는 탐지방법 및 시스템을 제공하는 것을 목적 으로 한다."}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명에 따른 이상 탐지방법은 데이터 수집단계와, 데이터 전처리단계와, 학습단계와, 탐지단계를 포함한다. 상기 데이터 수집단계는 가공장치에 장착된 센서를 사용하여 데이터를 수집한다. 상기 데이터 전처리단계는 상 기 수집단계에서 수집된 데이터에서 작업공정에 대한 패턴을 추출한다. 상기 학습단계는 상기 데이터 전처리단 계에서 추출된 패턴을 신경망 구조를 가진 인공지능알고리즘을 사용하여 정상패턴을 학습한다. 상기 탐지단계는 상기 센서에서 측정된 데이터가 상기 학습단계에서 학습된 정상패턴을 벗어나는지 여부를 판단한다. 또한, 본 발명에 따른 이상 탐지시스템은 복수의 센서부와, 데이터 전처리부와, 학습부와, 탐지부를 포함한다. 상기 복수의 센서부는 데이터를 수집할 수 있도록 가공장치에 장착된다. 상기 데이터 전처리부는 상기 센서부에 서 수집된 데이터에서 상기 가공장치의 작업공정에 대한 패턴을 추출한다. 상기 학습부는 상기 데이터 전처리부 에서 추출된 패턴을 신경망 구조를 가진 인공지능알고리즘을 사용하여 정상패턴을 학습한다. 상기 탐지부는 상 기 센서에서 측정된 데이터가 상기 학습부에서 학숩된 정상패턴을 벗어나는지 여부를 판단한다."}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따른 이상 탐지방법 및 시스템은 센서에서 수집된 데이터에서 작업공정에 대한 패턴을 추출하고, 추 출된 패턴을 신경망 구조를 가진 인공지능 알고리즘을 사용하여 정상패턴을 학습함으로써, 다양한 작동 조건이 나 데이터의 패턴이 복잡한 경우에도 이상여부를 탐지할 수 있다."}
{"patent_id": "10-2023-0121823", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "item": 1, "content": "도 1을 참조하여 본 발명에 따른 이상 탐지방법 및 이상 탐지시스템의 일 실시예를 설명한다. 본 발명에 따른 이상 탐지시스템은 센서부와, 데이터 전처리부와, 학습부와, 탐지부를 포함한다. 상기 센서부는 데이터를 수집할 수 있도록 가공장치에 복수개가 장착된다. 상기 데이터 전처리부는 상기 센서부 에서 수집된 데이터에서 상기 가공장치의 작업공정에 대한 패턴을 추출한다. 상기 학습부는 상기 데이터 전처리 부에서 추출된 패턴을 신경망 구조를 가진 인공지능알고리즘을 사용하여 정상패턴을 학습한다. 상기 탐지부는 상기 센서에서 측정된 데이터가 상기 학습부에서 학습된 정상패턴을 벗어나는지 여부를 판단한다. 이러한 이상 탐지시스템이 가공장치의 이상을 탐지하는 방법은 데이터 수집단계(S11)와, 데이터 전처리단계 (S13)와, 학습단계(S15) 및 탐지단계(S17)를 포함한다. 데이터 수집단계(S11)는 센서를 사용하여 데이터를 수집한다. 데이터 수집은 크게 2가지로 나뉜다. 하나는 PLC 데이터와 다른 하나는 MCU 데이터이다. PLC는 프로그래머블 로직 컨트롤러(programmable logic controller)로 서 MCT나 CNC 설비의 유지관리 및 자동 제어 및 모니터링에 사용하는 제어 장치이다. PLC로부터 수집되는 데이 터는 통전시간, 운전시간, 절삭시간, 가공수량, 상태정보, 알람정보 등이며 구체적으로는 설비에 대한 RPM, Torque, 기어비 데이터와 설비 가공축에 대한 X, Y, Z축의 절대좌표, 상대좌표, 남은거리가 있다. 또한 각 공정 에 사용되는 공구의 번호와 가공 상태(가동중, 가동중지, 가동대기)가 존재한다. MCU는 설비에 부착된 센서를 통해 수집되는 데이터로서 전력, 유온(유압 유니트 온도), 유압(유압 유니트 압력), 진동, 온도, 습도 등이 있음. 각 센서는 설비의 메인 부, 스핀들 부에 부착되어 각각의 센서 값을 수집한다. 본 실시예에서 해당 데이터 들은 MCT 설비 5대와 CNC 설비 3대로부터 수집된다. 데이터 전처리단계(S13)는 수집단계(S11)에서 수집된 데이터에서 작업공정에 대한 패턴을 추출한다. 이상 탐지 모델을 개발하기 위해서는 정상 데이터의 수집이 필요하다. 수집된 데이터는 각 설비별로 생산되는 제품이 다르고 공정 프로세스 및 공정에 사용되는 공구의 사용 순서도 상이하다. 따라서 제품별로 설비 이상을 탐지하는 모델을 개발하기 위해 각 설비별로 이상 탐지 모델을 개발할 필요성 있다. 이를 위해 수집된 데이터로 부터 설비의 작동 정보와 설비의 가공시간 정보를 활용해 공정에 대한 패턴을 추출하고, 해당 패턴에 대한 데이 터를 모델의 학습데이터로 활용한다. 이를 위해서 데이터 전처리단계(S13)에는 결측치 및 이상치 확인, 데이터 정규화, 시계열 데이터 처리, 데이터 분할 등을 할 수 있다. 결측치 및 이상치 확인은 전체 데이터에서 특정한 날짜에 수집되지 않은 데이터들을 확인하고 이상치가 있는지 검토하여 결측치는 제외시킨다. 데이터 정규화는 각 칼럼에 대해 각각의 데이터 스케일이 다르므로, 각 칼럼의 최대-최소 값을 이용한 최소-최대 스케일링 정규 화를 진행한다. 시계열 데이터 처리는 설비 및 센서 데이터는 시간에 따라 순서대로 수집이 되고 이를 활용하기 때문에 수집된 데이터를 섞지 않고 순차적으로 사용한다. 데이터 스케일링이 끝난 데이터를 활용해 LSTM- AutoEncoder 알고리즘에 활용하기 위해 시퀀스 데이터 형태로 전처리 수행한다. 데이터 분할은 모델의 학습 및 검증을 위해 생성한 시퀀스 데이터들을 학습, 검증, 테스트 데이터셋으로 분할한다. 전체 시퀀스 데이터의 마지 막 20%를 시계열성(순차적)을 유지하여 테스트 데이터로, 남은 80%의 시퀀스 데이터를 활용해 학습 데이터와 검 증 데이터로서 활용한다. 학습단계(S15)는 데이터 전처리단계(S13)에서 추출된 패턴을 신경망 구조를 가진 인공지능알고리즘을 사용하여 정상패턴을 학습한다. 본 실시예에서 인공지능알고리즘을 사용하여 학습하기 위해서 LSTM-AutoEncoder 구성한다. 여기서 LSTM(Long Short-Term Memory)은 RNN (Recurrent Neural Network)의 한 종류이며, RNN은 시퀀스 데이터를 처리하기 위해 설계된 신경망 구조로 이전 시간 스텝의 정보를 현재 시간 스텝의 입력과 함께 처리하는 특징을 가진다. 하지만 RNN은 긴 시퀀스에서 발생하는 기울기 소실 (gradient vanishing) 또는 기울기 폭발 (gradient exploding) 문 제에 취약하다. LSTM은 이러한 문제를 해결하기 위해 고안된 구조로, '게이트' 메커니즘을 통해 어떤 정보를 기 억하고, 어떤 정보를 잊을지 학습하는 특징이 있다. 그리고 AutoEncoder(AE)는 비지도 학습 알고리즘 중 하나로, 입력 데이터를 압축하는 인코더와 압축된 데이터를 복원하는 디코더로 구성된다. AutoEncoder는 입력 데이터를 재구성하는 방식으로 학습하며, 이 과정에서 데이터의 중요한 특성들을 학습한다. 일반적인 AutoEncoder는 고정된 크기의 입력을 받는다. LSTM-AutoEncoder(LSTM-AE)는 시퀀스 데이터를 위한 AutoEncoder 모델로서 LSTM 셀을 사용한다. 인코더 부분에서 시퀀스 데이터가 LSTM을 통해 저차원의 특성으로 압축되고, 디 코더 부분에서 이 저차원의 특성을 다시 원래의 시퀀스 데이터로 복원하는 구조를 가진다. 학습 과정에서는 원 본 시퀀스와 복원된 시퀀스 간의 차이를 최소화하는 방식으로 모델을 업데이트한다. 이러한 차이는 재구성 오류 (reconstruction error)로 표현되며, 이 오류를 기반으로 이상 감지를 수행한다. 그래서 본 실시예에서의 LSTM- AutoEncoder 구성은 모델 학습을 위해 입력 데이터를 복사하여 출력 데이터를 생성한다. 각 시퀀스(입력 데이터)의 길이는 설비별, 공정별로 각각의 공정에 사용되는 공구의 개수에 따라 다르게 설정한다. 인코더와 디 코더의 LSTM 레이어에서의 노드 수는 32로 설정한다. 과적합을 방지하기 위해 인코더, 디코더 LSTM층 사이에 Dropout 비율은 10%로, learning_rate 은 0.001로, batch_size는 64로 설정한다. 인코더의 구성은 양방향 LSTM 레이어로 구성되며 32개의 노드를 사용하고, dropout을 적용한다. 그 다음에 또 다른 양방향 LSTM 레이어를 사 용하고, 여기서는 노드 수를 32의 절반인 16으로 설정한다. 인코더의 최하단에는 RepeatVector를 사용하여 디코 더의 입력으로 사용될 시퀀스를 생성한다. 디코더의 구성은 양방향 LSTM 레이어로 구성되며 16개의 노드를 사용 하고, dropout을 적용한다. 그 다음에는 양방향 LSTM 레이어를 사용하며 32개의 노드를 사용한다. 마지막으로 TimeDistributed를 통한 Dense 레이어를 사용하여 출력 시퀀스를 생성한다. 이 때, 손실 함수는 MAE(Mean Absolute Error)로 설정하고, 최적화 함수로는 Adam을 사용한다. 모델 학습 중에는 ModelCheckpoint를 사용하 여 검증 데이터의 손실을 모니터링하면서 가장 낮은 손실 값을 가진 모델을 저장하고, 검증 손실의 값이 연속적 으로 10번이상 내려가지 않을 경우 학습을 조기에 종료하는 Early Stopping 기능을 활용한다. 탐지단계(S17)는 센서에서 측정된 데이터가 상기 학습단계에서 학습된 정상패턴을 벗어나는지 여부를 판단한다. 최종적으로 실시간으로 수집된 시계열 데이터에서 생성한 시퀀스 데이터가 정상 패턴이 아닌 이상 패턴일 경우, 정상 데이터만 학습시킨 LSTM- AutoEncoder에 해당 시퀀스 데이터를 입력하면 출력된 값과 입력값의 재구성 오 차가 특정 임계값보다 높게 나타나게 된다. 이때 해당 데이터에 의해 설비의 상태를 '이상'으로 판단한다.여기서 Dropout는 신경망 학습 중 일부 노드를 임의로 비활성화하는 것으로 과적합을 방지하기 위해 사용된다. 해당 모델의 경우 은닉층 노드 중 10%를 매 epoch마다 랜덤으로 비활성화해 학습을 진행한다. 그리고 learning_rate는 학습률이라고 하는데, 이는 경사 하강법(학습 모델이 최적의 학습 상태로 파라미터를 수정하는 과정)에서 파라미터를 업데이트 할 때 사용되는 스텝 크기이다. 쉽게 말해 데이터를 학습할 때 모델이 최적의 파라미터 값으로 수렴하기까지 업데이트 하는 변화의 크기로 보면 된다. batch_size는 배치 크기는 각 경사 하강법 반복에서 사용되는 훈련 데이터의 개수를 나타낸다, 예를 들어 배치 크기가 64라면 각 업데이트 마다 64개의 훈련 데이터가 사용된다는 것이다. RepeatVector는 Keras에서 제공하는 레이어로, 출력을 특정 길이로 반복하여 모델에 연속된 입력으로 제공할 수 있게 한다. AutoEncoder 알고리즘의 핵심인 입력된 벡터값을 변환하는 역할을 수행한다. TimeDistributed는 시퀀스 데이터의 각 부분에 대해 동일한 연산을 별도로 적용할 때 사용하는 도구, 디코더 출 력 시퀀스의 각 단계(시퀀스의 길이가 273이라면 273개의 타임 스텝,단계)에서 동일한 연산이 수행되고, 각 타 임스탭에 대한 출력이 생성되도록 하는 역할. 쉽게 말해, 각 단계(시퀀스 데이터 내에 하나의 데이터)에 동일한 'Dense'레이어를 적용하여, 원래의 데이터를 가능한 한 잘 재구성하기 위한 것이다. MAE는 평균 절대 오차(Mean Absolute Error)의 약자로, 예측 값과 실제 값의 차이를 절대값을 구해 해당 오차에 대한 절대값들의 평균을 나타내는 회귀 문제의 손실 함수이다. Adam은 딥러닝에 널리 사용되는 학습 최적화 알고리즘 중 하나로, 경사 하강법의 변형이다. 학습 과정에서 학습 률을 동적으로 조정하는 기능이 있다. ModelCheckpoint는 Keras에서 제공하는 콜백으로, 학습 중간 중간에 모델의 가중치나 전체 모델을 저장할 수 있 게 한다. 주로 검증 손실이 개선될 때 모델을 저장하는 데 사용된다. Early Stopping는 학습 과정에서 성능 개선이 일정 시간동안 관찰되지 않을 때 학습을 조기에 중단하기 위한 기 법이다."}
{"patent_id": "10-2023-0121823", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명에 따른 이상 탐지방법의 개념도이다."}
