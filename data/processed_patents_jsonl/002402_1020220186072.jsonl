{"patent_id": "10-2022-0186072", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0103685", "출원번호": "10-2022-0186072", "발명의 명칭": "포즈 분석 기반 재활운동 모니터링 장치 및 방법", "출원인": "광운대학교 산학협력단", "발명자": "이상민"}}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 포즈 추정부와; 학습을 위해 제공되는 반복 재활운동 영상에 대해 상기 포즈 추정부에서 생성한 프레임별 키포인트의 분포를 2개 이상의 상이한 분포 패턴으로 분류하도록 학습하고 학습된 패턴의 순서를 운동 주기로 설정하며, 분석을 위해 제공되는 실시간 재활운동 영상 프레임의 키포인트 분포를 학습된 패턴으로 분류하고, 분류된 패턴의 시계열적 순서가 설정된 운동 주기에 일치하면 운동 횟수를 증가시키는 운동 횟수 계수부와; 상기 포즈 추정부가 제공하는 프레임의 키포인트 정보의 변화량을 토대로 단위 운동량을 계산한 후 전체 운동기간 동안 누적하여 운동량을 산출하는 운동량 계산부와; 상기 운동 횟수 계수부의 운동 횟수와 상기 운동량 계산부의 운동량을 반영한 운동 결과를 제공하는 운동 결과제공부를 포함하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서, 사용자 입력을 수신하고 특정 정보를 사용자에게 제공하는 사용자 인터페이스부와; 상기 운동 횟수 계수부에서 학습된 분류 정보와 운동 주기 설정 정보를 특정 개인에 대한 특정 운동에 대한 정보로 저장하고, 저장된 특정 개인에 대한 특정 운동 정보를 운동 횟수 계수부에 제공하는 개인별 운동 관리부를더 포함하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 1에 있어서, 상기 포즈 추정부는 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 골격 정보를 산출하는 인체 포즈 판별부와; 상기 인체 포즈 판별부의 골격 정보 중 미리 정의된 종류의 관절들에 대한 3차원 위치 정보를 키포인트 정보로생성하는 특징 추출부를 포함하는 것을 특징으로 하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "에 있어서, 상기 운동 주기 판단부는 상기 분포 기반 운동 상태 학습부에서 제공되는 분포 패턴에 따른분류와 유사도 정보를 기준으로 유사도 정보가 기준 이상이 되는 분포 패턴 분류 정보가 미리 설정된 숫자 이상연속으로 수신될 경우 운동 주기 정보 내 분포 패턴의 시계열적 변화 순서 사이클에 대입하는 것을 특징으로 하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "청구항 1에 있어서, 상기 운동량 계산부는 분석을 위해 제공되는 실시간 재활운동 영상에 대한 포즈 추정부의프레임 키포인트 정보를 순차적으로 수신하여 각 프레임에 대한 단위 운동량 정보를 연산하되 후속되는 복수 프레임의 단위 운동량 정보를 연산한 후 평균을 구하여 현재 프레임의 단위 운동량 정보를 결정하고, 1회 운동 주기에 포함된 모든 프레임의 결정된 단위 운동량 정보를 누적하여 1회 운동에 대한 운동량을 계산하는 것을 특징으로 하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "청구항 6에 있어서, 상기 운동량 계산부는 포즈 추정부가 제공하는 임의의 t 시점 프레임을 기준으로 후속 k개의 프레임에 대해서 각각 t 시점 프레임의 키포인트와 후속되는 각 프레임의 키포인트 간 거리의 합을 구하여구해진 k개의 거리합에 대한 평균으로 해당 t 시점 단위 운동량을 산출하고, 하나의 운동 주기 동안 누적한 단위 운동량을 1회 운동에 따른 운동량으로 계산하되, t 시점 단위 운동량 산출을 위한 각 거리합 중 기준값을 초과하는 크기의 거리합은 키포인트 추정 노이즈로 간주하여 단위 운동량 평균 연산에서 제외시키는 것을 특징으로 하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "청구항 1에 있어서, 상기 운동량 계산부는 분석을 위해 제공되는 실시간 재활운동 영상에 대한 포즈 추정부의프레임 키포인트 정보를 순차적으로 수신하여 각 프레임의 키포인트들이 이전 프레임에서 이동한 방향이 기준이하로 유지될 경우 정상적 운동 궤적으로 추정하고, 정상적 운동 궤적을 벗어나는 경우 운동 횟수 계수부에 운동 궤적 이상 정보를 제공하여 운동 횟수가 증가되지 않도록 하는 것을 특징으로 하는 포즈 분석 기반 재활운동모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "청구항 8에 있어서, 상기 운동량 계산부는 포즈 추정부가 제공하는 임의의 t 시점 프레임의 각 키포인트가 이전프레임에서 이동한 이동 방향의 합산 벡터 값을 얻고, 후속 k개의 프레임의 각 키포인트에 대해서도 이전 프레임에서 이동한 이동 방향의 합산 벡터 값을 얻은 후, t 시점 프레임의 키포인트 방향 벡터와 후속되는 k개의 각프레임의 키포인트 방향 벡터의 차이를 각각 구하여, k개의 벡터 차이값 모두가 기준값 이하인 경우 정상 궤적으로 추정하고, k개의 벡터 차이값 중 하나라도 기준값을 초과하는 경우 비정상 궤적으로 판단하여 궤적 추정을초기화하고 상기 운동 횟수 계수부에 해당 운동은 운동 횟수로 가산하지 않도록 하는 정보를 제공하는 것을 특징으로 하는 포즈 분석 기반 재활운동 모니터링 장치."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "운동 영상을 촬영하여 운동 횟수와 운동 궤적 및 운동량을 제공하는 포즈 분석 기반 재활운동 모니터링 장치를이용한 포즈 분석 기반 재활운동 모니터링 방법으로서, 학습을 위한 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 단계와; 공개특허 10-2024-0103685-4-학습을 위해 제공되는 반복 재활운동 영상에 대해 상기 단계에서 생성한 프레임별 키포인트의 분포를 2개 이상의 상이한 분포 패턴으로 분류하도록 학습하고, 학습된 패턴의 순서를 운동 주기로 설정하는 단계와; 분석을 위한 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 단계와; 분석을 위해 제공되는 실시간 재활운동 영상 프레임의 키포인트 분포를 학습된 패턴으로 분류하는 단계와; 상기 학습된 패턴으로 분류된 패턴의 시계열적 순서가 기 설정된 운동 주기에 일치하면 운동 횟수를 증가시키는단계와; 상기 운동 횟수를 증가시키는 단계를 수행하는 중에 프레임 키포인트 위치의 프레임간 변화량을 누적하여 운동량을 생성하고, 프레임 키포인트 위치의 프레임 간 이동 방향의 변화량이 기준 미만인 경우 정상 운동 궤적으로판단하고 프레임간 키포인트 이동 방향의 변화량이 기준 이상인 경우 비정상 궤적으로 판단하여 운동 횟수를 증가시키지 않도록 하는 단계와; 운동 종료 후 운동 횟수와 운동량 누적 정보를 운동 결과 정보로 제공하는 단계를 포함하는 포즈 분석 기반 재활운동 모니터링 방법."}
{"patent_id": "10-2022-0186072", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "청구항 10에 있어서, 학습을 위한 재활운동 영상과 대응되는 개인정보와 운동 정보를 제공하는 단계와; 상기 학습을 위해 제공된 재활운동 영상을 통해 프레임 키포인트의 분포 패턴 분류 학습과 운동 주기 설정이 완료되면 해당 학습 내용과 운동 주기 설정 내용을 상기 개인정보와 운동 정보에 대응시켜 저장하는 단계와; 분석을 위한 재활 운동 영상 제공 전에 개인정보와 운동 정보를 통해 상기 저장된 프레임 키포인트의 분포 패턴분류 학습 내용과 운동 주기 설정 내용을 인출하여 분석에 이용하도록 하는 단계를 더 포함하는 포즈 분석 기반재활운동 모니터링 방법."}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 재활운동 중인 사람의 포즈를 분석하여 얻은 키포인트들의 분포를 학습하고 키포인트들의 변이를 확인 하여 환자의 운동 자세, 운동 진행의 정확도, 운동 횟수 및 운동량을 자동으로 파악하여 제공할 수 있도록 한 포 즈 분석 기반 재활운동 모니터링 장치 및 방법에 관한 것으로서, 영상에서 판별한 환자의 관절 위치 분포를 비지 도 학습 방식으로 학습하여 운동 상태를 분류하고, 이를 기반으로 운동 주기에 따른 운동 상태 경과를 만족할 경 우 하나의 운동을 완료한 것으로 판단하도록 함과 아울러, 운동 수행 시 운동량과 운동 궤적의 적합성을 판단하 여 운동 결과를 제공함으로써 개인화 학습 부담을 줄이면서도 재활운동을 적절하게 지원할 수 있는 효과가 있다."}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 포즈 분석 기반 재활운동 모니터링 장치 및 방법에 관한 것으로서, 더욱 상세히는 재활운동 중인 사 람의 포즈를 분석하여 얻은 키포인트들의 분포를 학습하고 키포인트들의 변이를 확인하여 환자의 운동 자세, 운 동 진행의 정확도, 운동 횟수 및 운동량을 자동으로 파악하여 제공할 수 있도록 한 포즈 분석 기반 재활운동 모 니터링 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "재활운동이란 부상이나 수술 등으로 운동기능에 제한이 생기는 경우 원래 기능을 회복하고 일상생활에 복귀하는 것을 목표로 시행되는 운동으로서, 일시적 운동 기능 제한의 회복을 위한 운동요법을 포함하여 장애를 가진 환 자의 운동기능을 유지하거나 향상시키기 위한 운동 역시 재활운동에 포함된다. 이와 같은 재활운동의 경우 개인에 대해 적합한 운동 자세와 운동 궤적, 운동량 등의 관리가 필요하기 때문에 전문 보조 인력이 필수적이나, 인구 노령화에 따른 재활운동 수요 증가와 건강한 삶에 대한 높은 관심에 따른 운동 수요 증가에 따라 재활운동의 수요 대비 전문 보조 인력의 비율이 점차 줄어들고 있는 추세이다. 이와 같은 재활운동이 아닌 다이어트나 체형교정, 건강유지를 목적으로 하는 운동에 대한 관심도 높아지고 있어, 퍼스널 트레이닝의 수요도 증가하고 있으며, 개인의 운동 상태를 자동으로 파악하여 정확한 운동 자세나 운동 횟수 등을 확인해 주는 인공지능 트레이너에 대한 기술도 개발되고 있다. 인체에 각종 센서들을 부착하거나 고가의 3D 센서를 이용하여 운동에 따른 인체의 자세나 정확한 관절 위치를 파악한 데이터를 대량으로 수집한 후 이를 분석하여 특정 운동에 대한 정확한 자세 여부를 파악하거나 기준 자 세와 다른 자세를 구분하여 정확한 자세를 유지할 수 있도록 가이드 정보를 제공하는 인공지능 트레이닝 기술들 이 제안되고 있으나, 이와 같은 기존의 인공지능 트레이닝 기술은 복잡하거나 고가의 센서를 이용하여 얻은 방 대한 운동 정보를 기반으로 보편적으로 활용할 수 있는 학습부를 구성하고, 일반적인 신체와 운동 능력을 가진이용자의 운동 상황을 분석하는 기술이어서 각 개인별로 제한 운동 능력이 일반인과 다른 재활운동에 적용할 수 없는 문제가 있다. 특히 이와 같은 인공지능 트레이닝 기술의 경우 복잡한 센서 연동, 고가의 데이터 확보 환경, 방대한 운동 데이 터 수집을 통해서 얻어진 학습데이터를 기반으로 하나의 운동에 대한 학습을 수행하기 때문에 여러 종류의 운동 이 필요한 경우 각 운동에 대한 학습데이터를 마련하는데 많은 시간과 노력 및 비용이 발생하게 된다. 결국, 재활운동을 지원하는 전문 보조 인력의 부족과 국가의 지원 비용의 감소에 따라 재활운동을 위한 환자의 부담이 증가하는 문제를 해결하기 위해서, 복잡한 신체 부착 센서나 고가의 센서들을 통해 많은 양의 운동 데이 터를 수집하여 분석해야만 개인화된 운동 상태 파악 학습기를 생성할 수 있는 기존 방식을 적용할 경우 개인에 대한 재활운동 보조 시스템을 구축하기 위한 시간과 노력 및 비용이 전문 보조 인력을 이용하는 것보다 훨씬 과 도해지는 문제가 있다. 따라서, 재활운동의 특징을 고려하여 개인별 운동 상태 파악을 위한 학습 부담을 줄이면서도 실질적인 재활운동 이 이루어질 수 있도록 지원하는 재활운동 모니터링 기술이 절실하게 필요한 실정이다. 선행기술문헌 특허문헌 (특허문헌 0001) 한국등록특허 제10-2289804호 [발명의 명칭: 3D 센서를 이용한 재활운동 분석 시스템] (특허문헌 0002) 한국등록특허 제10-1545516호 [발명의 명칭: 균형성 재활운동 자세 교정 시스템] (특허문헌 0003) 한국 공개특허 제10-2022-0064739호 [발명의 명칭: 근육 상태와 운동량 분석을 위한 운동 학습 시스템, 방법 및 프로그램]"}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은 영상에서 판별한 환자의 관절 위치 분포를 비지도 학습 방식으로 학습하여 운동 상태를 분류 하고, 이를 기반으로 운동 주기에 따른 운동 상태 경과를 만족할 경우 하나의 운동을 완료한 것으로 판단하도록 함과 아울러, 운동 수행 시 운동량과 운동 궤적의 적합성을 판단하여 운동 결과를 제공함으로써 개인화 학습 부 담을 줄이면서도 재활운동을 적절하게 지원할 수 있는 포즈 분석 기반 재활운동 모니터링 장치 및 방법을 제공 하는 것이다. 본 발명의 다른 목적은 환자가 몇 번의 운동 반복을 수행한 영상을 기반으로 관절을 포함하는 키포인트의 3차원 위치 정보를 프레임 마다 추출하고, 추출된 프레임별 키포인트의 분포 패턴을 둘 이상의 서로 다른 패턴으로 구 분하는 학습을 수행하는 것 만으로 반복적으로 수행되는 운동의 횟수를 강건하게 판단할 수 있도록 하여 개인화 학습에 대한 부담을 크게 줄일 수 있도록 한 포즈 분석 기반 재활운동 모니터링 장치 및 방법을 제공하는 것이다. 본 발명의 또 다른 목적은 영상에서 판별된 프레임별 키포인트 정보의 변화량을 누적하여 운동량을 파악하되, 프레임별 키포인트의 추정 오류나 이동 궤적 오차를 파악하여 정상적 운동 상태로 판단하지 않도록 함으로써 운 동량이나 운동능력에 대한 정보를 제공함과 아울러 정상적이지 않은 운동에 대한 알람 제공이 가능한 포즈 분석 기반 재활운동 모니터링 장치 및 방법을 제공하는 것이다."}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 실시예에 따른 재활운동 모니터링 장치는 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별 하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 포즈 추정부와, 학습을 위해 제공되는 반복 재활운동 영상에 대해 상기 포즈 추정부에서 생성한 프레임별 키포인트의 분포를 2개 이상의 상이한 분포 패턴으로 분류 하도록 학습하고 학습된 패턴의 순서를 운동 주기로 설정하며, 분석을 위해 제공되는 실시간 재활운동 영상 프 레임의 키포인트 분포를 학습된 패턴으로 분류하고, 분류된 패턴의 시계열적 순서가 설정된 운동 주기에 일치하면 운동 횟수를 증가시키는 운동 횟수 계수부와, 상기 포즈 추정부가 제공하는 프레임의 키포인트 정보의 변화 량을 토대로 단위 운동량을 계산한 후 전체 운동 기간 동안 누적하여 운동량을 산출하는 운동량 계산부와, 상기 운동 횟수 계수부의 운동 횟수와 상기 운동량 계산부의 운동량을 반영한 운동 결과를 제공하는 운동 결과 제공 부를 포함한다. 일례로서, 사용자 입력을 수신하고 특정 정보를 사용자에게 제공하는 사용자 인터페이스부와, 상기 운동 횟수 계수부에서 학습된 분류 정보와 운동 주기 설정 정보를 특정 개인에 대한 특정 운동에 대한 정보로 저장하고, 저장된 특정 개인에 대한 특정 운동 정보를 운동 횟수 계수부에 제공하는 개인별 운동 관리부를 더 포함할 수 있다. 일례로서, 포즈 추정부는 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 골격 정보를 산출하는 인체 포즈 판별부와, 인체 포즈 판별부의 골격 정보 중 미리 정의된 종류의 관절들에 대한 3차원 위치 정보를 키포인트 정보로 생성하는 특징 추출부를 포함할 수 있다. 일례로서, 운동 횟수 계수부는 학습 과정 동안 반복 제공되는 재활운동 영상에 대해 상기 포즈 추정부가 제공하 는 프레임별 키포인트 정보를 수신하고, 2개 이상의 운동 자세 변화가 포함되는 운동의 반복에 따라 프레임별 키포인트의 분포 패턴을 2개 이상으로 분류하도록 학습하며, 분석을 위해 제공되는 실시간 재활운동 영상 프레 임의 키포인트를 학습된 분포 패턴에 따라 분류하는 분포 기반 운동 상태 학습부와, 분포 기반 운동 상태 학습 부의 학습 과정에서 분류된 분포 패턴의 시계열적 변화 순서 사이클에 대한 정보를 기반으로 운동 주기 정보를 설정하고, 분석을 위해 연속적으로 제공되는 실시간 재활운동 영상 프레임의 키포인트에 대한 분포 기반 운동 상태 학습부의 분류 정보가 상기 설정된 운동 주기 정보의 순서에 맞추어 시계열적으로 변화되는 지 확인하여 운동 횟수를 증가시키거나 증가시키지 않는 운동 주기 판단부를 포함할 수 있다. 또한, 운동 주기 판단부는 분포 기반 운동 상태 학습부에서 제공되는 분포 패턴에 따른 분류와 유사도 정보를 기준으로 유사도 정보가 기준 이상이 되는 분포 패턴 분류 정보가 미리 설정된 숫자 이상 연속으로 수신될 경우 운동 주기 정보 내 분포 패턴의 시계열적 변화 순서 사이클에 대입할 수도 있다. 일례로서, 운동량 계산부는 분석을 위해 제공되는 실시간 재활운동 영상에 대한 포즈 추정부의 프레임 키포인트 정보를 순차적으로 수신하여 각 프레임에 대한 단위 운동량 정보를 연산하되 후속되는 복수 프레임의 단위 운동 량 정보를 연산한 후 평균을 구하여 현재 프레임의 단위 운동량 정보를 결정하고, 1회 운동 주기에 포함된 모든 프레임의 결정된 단위 운동량 정보를 누적하여 1회 운동에 대한 운동량을 계산할 수 있다. 또한, 운동량 계산부는 포즈 추정부가 제공하는 임의의 t 시점 프레임을 기준으로 후속 k개의 프레임에 대해서 각각 t 시점 프레임의 키포인트와 후속되는 각 프레임의 키포인트 간 거리의 합을 구하여 구해진 k개의 거리합 에 대한 평균으로 해당 t 시점 단위 운동량을 산출하고, 하나의 운동 주기 동안 누적한 단위 운동량을 1회 운동 에 따른 운동량으로 계산하되, t 시점 단위 운동량 산출을 위한 각 거리합 중 기준값을 초과하는 크기의 거리합 은 키포인트 추정 노이즈로 간주하여 단위 운동량 평균 연산에서 제외시킬 수 있다. 일례로서, 운동량 계산부는 분석을 위해 제공되는 실시간 재활운동 영상에 대한 포즈 추정부의 프레임 키포인트 정보를 순차적으로 수신하여 각 프레임의 키포인트들이 이전 프레임에서 이동한 방향이 기준 이하로 유지될 경 우 정상적 운동 궤적으로 추정하고, 정상적 운동 궤적을 벗어나는 경우 운동 횟수 계수부에 운동 궤적 이상 정 보를 제공하여 운동 횟수가 증가되지 않도록 할 수 있다. 또한, 운동량 계산부는 포즈 추정부가 제공하는 임의의 t 시점 프레임의 각 키포인트가 이전 프레임에서 이동한 이동 방향의 합산 벡터 값을 얻고, 후속 k개의 프레임의 각 키포인트에 대해서도 이전 프레임에서 이동한 이동 방향의 합산 벡터 값을 얻은 후, t 시점 프레임의 키포인트 방향 벡터와 후속되는 k개의 각 프레임의 키포인트 방향 벡터의 차이를 각각 구하여, k개의 벡터 차이값 모두가 기준값 이하인 경우 정상 궤적으로 추정하고, k개 의 벡터 차이값 중 하나라도 기준값을 초과하는 경우 비정상 궤적으로 판단하여 궤적 추정을 초기화하고 상기 운동 횟수 계수부에 해당 운동은 운동 횟수로 가산하지 않도록 하는 정보를 제공할 수 있다. 본 발명의 다른 실시예는 운동 영상을 촬영하여 운동 횟수와 운동 궤적 및 운동량을 제공하는 포즈 분석 기반 재활운동 모니터링 장치를 이용한 포즈 분석 기반 재활운동 모니터링 방법으로서, 학습을 위한 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 단계와, 학 습을 위해 제공되는 반복 재활운동 영상에 대해 상기 단계에서 생성한 프레임별 키포인트의 분포를 2개 이상의 상이한 분포 패턴으로 분류하도록 학습하고, 학습된 패턴의 순서를 운동 주기로 설정하는 단계와, 분석을 위한 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 단계와, 분석을 위해 제공되는 실시간 재활운동 영상 프레임의 키포인트 분포를 학습된 패턴으로 분류하 는 단계와, 상기 학습된 패턴으로 분류된 패턴의 시계열적 순서가 기 설정된 운동 주기에 일치하면 운동 횟수를 증가시키는 단계와, 상기 운동 횟수를 증가시키는 단계를 수행하는 중에 프레임 키포인트 위치의 프레임간 변화 량을 누적하여 운동량을 생성하고, 프레임 키포인트 위치의 프레임 간 이동 방향의 변화량이 기준 미만인 경우 정상 운동 궤적으로 판단하고 프레임간 키포인트 이동 방향의 변화량이 기준 이상인 경우 비정상 궤적으로 판단 하여 운동 횟수를 증가시키지 않도록 하는 단계와, 운동 종료 후 운동 횟수와 운동량 누적 정보를 운동 결과 정 보로 제공하는 단계를 포함한다. 일례로서, 학습을 위한 재활운동 영상과 대응되는 개인정보와 운동 정보를 제공하는 단계와, 학습을 위해 제공 된 재활운동 영상을 통해 프레임 키포인트의 분포 패턴 분류 학습과 운동 주기 설정이 완료되면 해당 학습 내용 과 운동 주기 설정 내용을 상기 개인정보와 운동 정보에 대응시켜 저장하는 단계와, 분석을 위한 재활 운동 영 상 제공 전에 개인정보와 운동 정보를 통해 상기 저장된 프레임 키포인트의 분포 패턴 분류 학습 내용과 운동 주기 설정 내용을 인출하여 분석에 이용하도록 하는 단계를 포함할 수 있다."}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은 수 회의 재활운동을 촬영한 영상에서 판별한 환자의 관절 위치 분포를 비지도 학습 방식으로 학습하 여 운동 상태를 분류하고, 이를 기반으로 운동 주기에 따른 운동 상태 경과를 만족할 경우 하나의 운동을 완료 한 것으로 판단하도록 함으로써, 학습 과정에 대한 시간, 노력, 비용을 모두 줄일 수 있어 경제적이고 효율적인 재활운동 모니터링이 가능해지는 효과가 있다. 또한, 재활 운동 수행 중 판별한 환자의 관절 위치 변화를 통해 운동량을 파악하여 재활운동에 따른 운동량과 운동 능력에 대한 정보를 더 제공하되, 영상을 통한 관철 위치 추정 시 포함될 수 있는 오류를 필터링하여 좀 더 정확한 운동량 산출하도록 함으로써 재활운동 모니터링의 품질과 신뢰성을 높일 수 있는 효과가 있다. 나아가 재활 운동 수행 중 판별한 환자의 관절 위치 변화에 대한 방향을 기준으로 운동 궤적을 추정하여 정상적 이지 않은 운동이 수행될 경우 해당 운동은 횟수에 포함시키지 않도록 함으로써, 간단한 학습을 통해 개인화된 학습 방식을 이용하면서도 강건한 운동 횟수 파악, 노이즈가 고려된 정확한 운동량 판단, 궤적 추정을 통한 운 동 진행의 정확도 판단이 모두 가능한 높은 품질의 재활운동 모니터링 서비스를 제공하는 효과가 있다."}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명에서 사용되는 기술적 용어는 단지 특정한 실시예를 설명하기 위해 사용된 것으로, 본 발명을 한정하려 는 의도가 아님을 유의해야 한다. 또한, 본 발명에서 사용되는 기술적 용어는 본 발명에서 특별히 다른 의미로 정의되지 않는 한, 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 의미로 해석되어야 하며, 과도하게 포괄적인 의미로 해석되거나, 과도하게 축소된 의미로 해석되지 않아야 한다. 또한, 본 발명에서 사용되는 기술적인 용어가 본 발명의 사상을 정확하게 표현하지 못하는 잘못된 기술적 용어일 때에 는 당업자가 올바르게 이해할 수 있는 기술적 용어로 대체되어 이해되어야 할 것이다. 또한, 본 발명에서 사용 되는 일반적인 용어는 사전에 정의되어 있는 바에 따라, 또는 전후 문맥상에 따라 해석되어야 하며, 과도하게 축소된 의미로 해석되지 않아야 한다. 또한, 본 발명에서 사용되는 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한 복수의 표현을 포함한다. 본 발명에서 \"구성된다\" 또는 \"포함한다\" 등의 용어는 발명에 기재된 여러 구성 요소들 또는 여러 단계를 반드시 모두 포함하는 것으로 해석되지 않아야 하며, 그 중 일부 구성 요소들 또는 일부 단계들은 포함되지 않을 수 도 있고, 또는 추가적인 구성 요소 또는 단계들을 더 포함할 수 있는 것으로 해석되어야 한다. 또한, 본 발명에서 사용되는 제 1, 제 2 등과 같이 서수를 포함하는 용어는 구성 요소들을 설명하는데 사용될 수 있지만, 구성 요소들은 용어들에 의해 한정되어서는 안 된다. 용어들은 하나의 구성 요소를 다른 구성 요소 로부터 구별하는 목적으로만 사용된다. 예를 들어, 본 발명의 권리 범위를 벗어나지 않으면서 제 1 구성 요소는 제 2 구성 요소로 명명될 수 있고, 유사하게 제 2 구성 요소도 제 1 구성 요소로 명명될 수 있다. 이하, 첨부된 도면을 참조하여 본 발명에 따른 바람직한 실시예를 상세히 설명하되, 도면 부호에 관계없이 동일 하거나 유사한 구성 요소는 동일한 참조 번호를 부여하고 이에 대한 중복되는 설명은 생략하기로 한다. 또한, 본 발명을 설명함에 있어서 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 흐릴 수 있다고 판단되는 경우 그 상세한 설명을 생략한다. 또한, 첨부된 도면은 본 발명의 사상을 쉽게 이해할 수 있도록 하기 위한 것일 뿐, 첨부된 도면에 의해 본 발명의 사상이 제한되는 것으로 해석되어서는 아니 됨을 유의해야 한다. 이하, 도면을 참고하여 본 발명의 상세 실시예를 설명한다. 도 1은 본 발명의 동작 방식을 설명하기 위한 개념도이다. 본 발명은 비용적으로 효율적인 카메라만을 이용하여 개인화가 필수적인 재활운동을 모니터링 하기 위한 것으로, 정확한 재활운동 과정을 수 회 학습하는 것 만으로 환자 혼자라도 재활운동의 횟수, 운동량, 운동 궤적 기반 정상 운동 수행 여부 판단이 가능하도록 한 것이다. 재활운동의 특성 상 운동 능력에 제약이 없는 사람의 운동과는 동일한 운동이라 하더라도 자세, 운동 방향, 운 동 시간, 운동량 등이 다르며, 환자 마다 제한 운동 능력이 다르고 재활 대상이 다르며 신체 역시 다르기 때문 에 표준화된 운동 모니터링 학습 모델을 이용하는 것이 불가능하다. 그렇다고 개인별로 방대한 학습 데이터를 생성한 후 이를 학습하는 방식으로 개인화된 운동 모니터링 학습 모델을 구성하기에는 학습 데이터 생성을 위한 과도한 시간과 노력 및 비용이 발생한다. 따라서 본 발명에서는 대량의 학습 데이터를 이용하지 않고 적은 수의 학습 데이터 만으로 재활운동 상태를 파 악하여 운동 횟수를 판단할 수 있도록 하되, 학습 데이터 역시 카메라 영상 만을 이용하도록 하여 학습 데이터 수집에 대한 편의성을 높이고, 실제 분석 과정에 있어서도 별도의 추가 센서 없이 영상 데이터 만을 이용하도록 한다. 이와 같은 본 발명의 실시예에 따른 재활운동 모니터링 구성은 병원이나 재활 센터에서 트레이너의 도움을 받아 개인에 대한 맞춤식 학습을 수행하고, 집에서 환자 혼자 재활운동을 수행하더라도 재활운동 횟수를 자동으로 계 수하고, 운동 수행이 잘못된 경우 횟수를 계수하지 않도록 하여 잘못된 동작을 파악할 수 있도록 하며, 운동 수 행을 통한 운동량과 운동 능력을 확인할 수 있도록 함으로써 학습을 위한 시간, 노력, 비용을 크게 경감시키면 서도 운동 과정 모니터링을 통해 개인의 특성에 맞는 효율적인 재활 운동이 가능하도록 한다. 도시된 구성과 같이, 본 발명의 실시예에 따른 재활운동 모니터링 방법은 먼저 학습 과정을 수행한 후 학습된 내용을 토대로 실제 학습 내용을 활용하는 분석 과정을 수행한다. 해당 학습 및 분석 과정은 단일 장치에서 수 행될 수도 있고, 학습과 분석 과정이 서로 다른 장치에서 수행될 수도 있으며, 서버 기반으로 수행됨으로써 온 라인 접속 단말에 무관하게 실행될 수도 있다. 먼저, 학습 과정에 관하여 설명한다. 학습을 위한 영상 촬영 과정은 재활운동 대상 환자가 특정 운동을 수행하는 과정을 촬영한다. 학습을 위한 촬영이므로 특정 운동을 수 회 반복하되 가급적 균일하게 운동을 반복한다. 해당 학습 과정에서의 재활운동은 트레이너의 지시를 받아 수행되는 것이 바람직하다. 촬영된 영상은 인체 포즈에 따른 프레임별 키포인트 추정 과정을 통해 프레임별 키포인트 정보가 추정된다. 해당 키포인트 정보는 키포인트 식별 정보와 3차원 위치 정보를 포함한다. 영상을 기반으로 인체 포즈에 따른 골격 정보를 판별하고, 판별된 골격 정보 중에서 미리 정의된 종류의 관절들 에 대한 3차원 위치 정보를 생성한다. 본 발명의 실시예에서는 사용되는 인체 포즈 추정(HPE:Human pose estimation) 모델은 알려져 있는 COCO 토폴로지를 이용하거나 Blazepose 토폴로지를 이용할 수 있다. 예를 들어 Blazepose 토폴로지는 몸체, 팔, 다리 및 얼굴을 포함하여 추정된 사람의 관절 위치에 손, 발에 대한 관절 위치를 더하여 33개의 얼굴 및 관절 위치를 포함한다. 이와 같은 Blazepose 토폴로지를 이용하여 키포인트 를 추정할 경우, 하나의 프레임에 대해서 33개의 키포인트를 추정할 수 있고, 각 키포인트에 대해 3차원 좌표 정보가 대응되므로 99개의 특징정보를 얻을 수 있다. 학습 과정에서, 프레임별 키포인트 정보는 운동횟수 계수 학습과정을 통해 운동 상태를 판단하기 위한 판별 모델에 제공되며, 이를 통해 운동 상태가 판별되면, 판별된 운동 상태의 시계열적 순서를 운동 주기 판단에 이 용하기 위한 운동 주기 설정을 진행한다. 해당 운동 주기는 하나의 운동을 수행하기 위한 서로 다른 운동 상태 의 조합으로써, 예컨대 하나의 운동에 3개의 운동 상태 변화가 필요하다면 해당 3개의 운동 상태가 순차적으로 진행되는 지 판단하는데 이용된다. 운동 상태가 순차적으로 3번 변하고 다시 처음 운동 상태로 복귀하면 운동이 1회 수행된 것으로 판단하게 된다. 제한된 숫자의 학습 데이터를 이용하여 운동 상태를 파악하기 위해서, 본 발명에서는 프레임별 키포인트의 분포 패턴을 이용한다. 특정 재활운동의 몇가지 자세 변화를 대상으로 현재의 키포인트가 어떠한 운동 상태(운동 자 세)에 속하는 것인지를 판단하면 되므로 과도한 학습 정보가 필요하지 않다. 또한, 반복적인 재활운동의 프레임 별 키포인트 정보를 학습 정보로 수집하므로, 해당 학습 정보에 포함된 프레임별 키포인트 정보는 일정한 분포 패턴을 나타내게 된다. 예컨대 MOG(Mixture of Gaussian) 등의 통계적 분포 분석 방식을 이용하면 x개의 자세 변화로 이루어지는 운동은 x개와 유사한 관절 위치 분포 패턴을 나타내게 된다. 이와 같은 키포인트 분포 패턴 을 비지도 학습 방식으로 학습하여 소정의 서로 다른 분포 패턴으로 분류할 수 있도록 분류기를 학습시킨다. 한편, 분류기가 입력되는 프레임 키포인트를 a개의 분류로 구분할 수 있도록 학습되면 해당 a개의 분류 정보를 시계열적으로 나열하여 하나의 운동에 대한 운동 상태 주기를 설정한다. 예컨대 3개의 운동 상태(a1, a2, a3)에 따른 키포인트 분포를 분류할 수 있도록 학습되었고, 그 분류에 따라 a1, a2, a3의 순서로 운동 주기가 설정 될 수 있다. 이후 순차적으로 제공되는 프레임의 키포인트 분류 정보가 a1일 가능성 30%, a1일 가능성 40%, a1일 가능성 60%...a1일 가능성 20%/a2일 가능성 40%, a2일 가능성 55%....a2일 가능성 30%/a3일 가능성 35%, a3일 가능성 60%...a3일 가능성 45%/a1일 가능성 50%... a1일 가능 성 75%...라면 a1→a2→a3→a1의 운동 주기에 일치되도록 변화되었으므로 1회 운동이 이루어졌다고 판단할 수 있게 된다. 이와 같이 관절 정보의 분포를 기준으로 분류기를 학습시키는 방식이고, 실제 분석을 위해 활용할 때 유사한 자 세들에 대한 관절 정보가 제공되므로 위와 같은 분포 기반으로 분류기를 구성하면 적은 학습 데이터 만으로 강 건한 운동 횟수 계수가 가능하게 된다. 이후, 활용 과정으로서 분석할 영상에 대한 운동 모니터링 과정은 앞서 환자의 재활운동을 촬영하는 과정 , 실시간 연속적으로 제공되는 영상을 대상으로 포즈와 프레임별 키포인트를 추정하는 과정, 미리 운동 횟수 계수 학습 과정으로 학습된 분류기와 운동 주기 판단 구성을 이용하여 운동 횟수를 판단하는 과정을 포함하여 진행된다. 하지만 단순히 운동 횟수만을 운동 자세에 따른 키포인트 분포 정보를 통해 판단할 경우, 운동이 정확하게 이루 어지고 있는지, 해당 운동을 통해 어느 정도 운동이 이루어지고 있는지, 이전 운동량/학습 당시 운동량 대비 운 동능력이 어느정도 변화되었는 지와 같은 재활운동에 필수적인 관리가 이루어지지 않게 된다. 따라서, 운동 횟수 판단에 대한 구성과 병렬적으로 프레임 키포인트 정보의 변화를 통해서 운동량을 판단하고, 프레임 키포인트의 변화 방향을 통해서 운동 궤적을 판단하는 구성을 더 적용한다. 한편, 이와 같은 학습과 운동 횟수 판단은 개인과 운동에 따라 각각 개별적으로 수행되어야 하므로 학습되고 설 정된 내용은 특정 개인에 대해 저장되었다가 필요 시 인출하여 재사용할 수 있도록 관리될 수 있다. 도 2은 앞서 설명한 개념적인 포즈 분석 기반 재활운동 모니터링 방법을 구현하기 위한 재활운동 모니터링 장치 의 구성을 보인 것이다. 실질적으로 해당 재활운동 모니터링 장치는 병원이나 재활센터에 구성되는 단독 하드웨어 구성이거나 프로 그램 구성일 수 있으며, 단말에 무관하게 기능을 제공하는 서버 구성일 수 있고, 환자 개인 단말에 설치될 수 있는 구성일 수도 있으며, 해당 구성 요소들은 단일 하드웨어에 구성되거나 복수의 하드웨어에 분산 구성될 수 도 있다. 도시된 바와 같이 재활운동 모니터링 장치는 환자의 재활운동 영상을 촬영하거나 촬영된 영상을 수신하는 영상 수집부를 포함한다. 해당 영상 수집부는 카메라 등의 영상 촬영 장치나 수단일 수 있으며, 통신부를 통해 영상 정보를 수신하는 구성일 수도 있다. 재활운동 모니터링 장치는 영상 수집부를 통해 수집된 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인트 정보를 생성하는 포즈 추정부를 포함한다. 포즈 추정부는 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 골격 정보를 산출하는 인체 포즈 판별부와, 인체 포즈 판별부의 골격 정보 중 미리 정의된 종류의 관절들에 대한 3차원 위치 정 보를 키포인트 정보로 생성하는 특징 추출부를 포함할 수 있다. 키포인트 정보는 키포인트들을 구분하기 위한 식별정보, 3차원 위치에 따른 3개의 좌표 정보를 포함할 수 있다. 재활운동 모니터링 장치는 학습을 위해 제공되는 반복 재활운동 영상에 대해 포즈 추정부에서 생성한 프레임별 키포인트의 분포를 2개 이상의 상이한 분포 패턴으로 분류하도록 학습하고 학습된 패턴의 순서를 운동 주기로 설정하며, 분석을 위해 제공되는 실시간 재활운동 영상 프레임의 키포인트 분포를 학습된 패턴으로 분류 하고, 분류된 패턴의 시계열적 순서가 설정된 운동 주기에 일치하면 운동 횟수를 증가시키는 운동 횟수 계수부 를 포함한다. 도 3을 예로 들면, 도시된 바와 같이 프레임의 키포인트 분포는 도 3a의 운동 상태와 도 3b의 운동 상태가 서로 상이하며, 이와 같은 밴드를 우측 아래로 내리는 운동의 경우 2개의 자세가 반복되는 구성으로 이루어지며, 해 당 프레임 키포인트를 학습할 경우 2개(혹은 그 이상)의 상이한 분포 패턴으로 입력 패턴을 구분할 수 있다. 이러한 운동 횟수 계수부는 학습 과정 동안 반복 제공되는 재활운동 영상에 대해 포즈 추정부가 제공 하는 프레임별 키포인트 정보를 수신하고, 2개 이상의 운동 자세 변화가 포함되는 운동의 반복에 따라 프레임별 키포인트의 분포 패턴을 2개 이상으로 분류하도록 학습하고, 분석을 위해 제공되는 실시간 재활운동 영상 프레 임의 키포인트를 학습된 분포 패턴에 따라 분류하는 분포 기반 운동 상태 학습부와, 분포 기반 운동 상태 학습부의 학습 과정에서 분류된 분포 패턴의 시계열적 변화 순서 사이클에 대한 정보를 기반으로 운동 주 기 정보를 설정하고, 분석을 위해 연속적으로 제공되는 실시간 재활운동 영상 프레임의 키포인트에 대한 분포 기반 운동 상태 학습부의 분류 정보가 상기 설정된 운동 주기 정보의 순서에 맞추어 시계열적으로 변화되 는 지 확인하여 운동 횟수를 증가시키거나 증가시키지 않는 운동 주기 판단부를 포함한다. 한편, 운동 주기 판단부는 분포 기반 운동 상태 학습부에서 제공되는 분포 패턴에 따른 분류와 유사 도 정보를 기준으로 유사도 정보가 기준 이상이 되는 분포 패턴 분류 정보가 미리 설정된 숫자 이상 연속으로 수신될 경우 운동 주기 정보 내 분포 패턴의 시계열적 변화 순서 사이클에 대입할 수 있다. 예컨대 3개의 운동 상태(a1, a2, a3)에 따른 키포인트 분포를 분류할 수 있도록 학습되었고, 그 분류에 따라 a1, a2, a3의 순서로 운동 주기가 설정 된 경우, 수신되는 프레임의 키포인트 분류 정보가 a1일 가능성 30%/a2 일 가능성 12%/a3일 가능성 4%와 같은 방식으로 얻어질 수 있다. 이 경우 해당 프레임에 따른 운동 상태를 가장 확률이 높은 a1 분포에 대응하는 것으로 분류할 수 있다. 좀 더 가변적 변화에 둔감하도록 하기 위한 다른 방식으로서, 특정 분포 패턴에 대응되는 운동 상태 판단 기준 을 50% 이상으로 하고, 임의의 분포 패턴에 대응되지 않을 경우의 판단 기준을 15%로 설정할 수 있으며, 이와 같은 제한 유사도가 5회 이상 연속되는 경우를 판단 시점으로 설정할 수도 있다. 위와 같은 경우, 수신되는 프레임 키포인트가 기 학습된 분류기에서 분류 가능한 분포 중 하나와 50% 이상의 유 사도로 연속 5개 프레임 일치하면 해당 분포에 대응되는 운동 상태를 달성한 것으로 판단할 수 있다. 이와 같은 운동 상태 달성 상태의 변화가 순차적인 운동 주기에 일치되면 일회의 운동을 완성한 것으로 판단할 수 있다. 한편, 수신되는 프레임 키포인트가 학습된 분류기에서 분류될 수 있는 a1~a3 의 어디에도 15% 이상으로 유사하 다고 판정되지 않는 상황이 5개 이상 프레임에서 연속으로 판정되면 자세가 상이한 것으로 판단하여 운동 자세 의 불일치를 통지하거나, 운동 횟수를 증가시키지 않을 수 있다. 즉, 제한된 숫자의 학습 데이터 만을 이용하되, 분포 패턴을 이용한 학습 방식으로 분류모델을 학습시킴으로서 분류의 강건성을 높이며, 운동 주기 정보를 별도로 관리하되 각종 노이즈에 둔감하도록 판정 방식을 설정하는 것으로 학습 데이터 부족이나 입력 정보의 노이즈, 환자의 운동 기능 제한에 따른 고려도 가능한 운동 횟수 판 단이 가능하게 된다. 한편, 위 구성을 통해서 운동 횟수에 대한 강건한 판단이 가능하지만 운동이 정확하게 이루어지고 있는지, 해당 운동을 통해 어느 정도 운동이 이루어지고 있는지, 이전 운동량 대비 운동능력이 어느정도 변화되었는 지와 같은 재활운동에 필수적인 정보를 얻을 수는 없다. 따라서, 도시된 재활운동 모니터링 장치는 운동 횟수 판단에 대한 구성과 병렬적으로 포즈 추정부가 제공하는 프레임 키포인트 정보의 변화를 통해서 운동량을 판단하고, 프레임 키포인트의 변화 방향을 통해서 운 동 궤적을 판단하는 구성으로서 운동량 계산부를 포함한다. 또한, 운동 횟수 계수부의 운동 횟수와 운동량 계산부의 운동량을 반영한 운동 결과를 제공하는 운동 결과 제공부를 포함한다. 운동량 계산부는 분석을 위해 제공되는 실시간 재활운동 영상에 대한 포즈 추정부의 프레임 키포인트 정보를 순차적으로 수신하여 각 프레임에 대한 단위 운동량 정보를 연산하되, 후속되는 복수 프레임의 단위 운 동량 정보를 연산한 후 평균을 구하여 현재 프레임의 단위 운동량 정보를 결정하고, 1회 운동 주기에 포함된 모 든 프레임의 결정된 단위 운동량 정보를 누적하여 1회 운동에 대한 운동량을 계산한다. 즉, 포즈 추정부에서 추정되는 키포인트 정보가 완전 무결한 정보가 아니기 때문에 키포인트 정보 중 일부 가 잘못 추정될 수 있으며, 이 경우 운동량 판정의 왜곡이 커지게 된다. 따라서, 단위 운동량 정보 연산 시 복수 프레임의 운동량 평균을 구하여 이용하되, 짧은 기간(예컨대 30FPS 프 레임의 경우 3개 프레임 간 운동량 평균을 구하더라도 1/10초) 과도한 키포인트 변화는 노이즈로 간주하여 필터 링한다. 도 4를 참고하여 운동량 계산부의 운동량 계산 방식의 일례를 설명한다. 운동 일회의 운동량은 다음의 수학식 1과 같이 구해질 수 있다. 수학식 1"}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "1회 운동량(Scycle)은 1회 운동으로 촬영되는 n개의 프레임에 대해서 각각 구한 단위 운동량(St)의 누적으로 구한 다. 여기서 단위 운동량(St)는 다음의 수학식2를 활용하여 구할 수 있다. 수학식 2"}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "위 수학식 2는 영상 내 객체의 자세 분석을 통한 키포인트 추정의 불확실성을 보정하기 위한 것으로서, 예시적 으로 {k=1, 2, 3}으로 설정할 수 있다. 도 4를 참조하면, 포즈 추정부가 제공하는 임의의 t 시점 프레임을 기준으로 후속 k(예시에서는 3)개의 프 레임에 대해서 각각 t 시점 프레임의 키포인트와 후속되는 각 프레임의 키포인트 간 거리의 합을 구하여 구해진 k개의 거리합( , , )에 대한 평균으로 해당 t 시점 단위 운동량(St)을 산출하고, 하나의 운동 주기 동안 누적한 단위 운동량을 1회 운동에 따른 운동량으로 계산한다. 도 4의 예시에서 t 시점의 프레임 키포인트와 t+1 시점의 프레임 키포인트의 변화 위치에 따른 키포인트별 거리 를 합산하여 를 구하고, t 시점의 프레임 키포인트와 t+2 시점의 프레임 키포인트의 변화 위치에 따른 키포인트별 거리를 합산하여 를 구하고, t 시점의 프레임 키포인트와 t+2 시점의 프레임 키포인트의 변화 위치에 따른 키포인트별 거리를 합산하여 를 구한다. 다만, t 시점 단위 운동량 산출을 위한 각 거리합 중 기준값()을 초과하는 크기의 거리합은 키포인트 추정 노이즈로 간주하여 단위 운동량 평균 연산에서 제외시킨다. 도시된 도 4의 예시에서 키포인트가 급격하게 변화 된 노이즈는 없기 때문에, 각 거리 합은 기준값( )보다 작으므로 3개의 거리합에 대한 평균을 구하여 t 시점 의 단위 운동량(St)을 구할 수 있다. 이를 통해서 영상 분석을 통한 키포인트 추정의 불확실성을 보완하여 보다 정확한 운동량 판단이 가능하도록 한 다. 이와 같이 운동량 계산이 가능할 경우, 학습 과정에서 얻어진 운동량(평균)을 기준으로 분석 대상 재활운동에 대한 운동량 비율을 판단할 수 있으며, 이를 통해 운동능력 변화를 파악할 수 있다. 즉, 비슷한 운동을 수행하 고 있지만 운동 동작이 학습 시점에 비해 작아지는 경우나 더 커지는 경우를 판단할 수 있다. 따라서, 재활운동 에 따른 적절한 운동량이 유지되도록 할 경우 학습 과정에서 수행한 재활운동과 유사해지게 된다. 한편, 운동량 계산부는 분석을 위해 제공되는 실시간 재활운동 영상에 대한 포즈 추정부의 프레임 키 포인트 정보를 순차적으로 수신하여 각 프레임의 키포인트들이 이전 프레임에서 이동한 방향이 기준 이하로 유 지될 경우 정상적 운동 궤적으로 추정하고, 정상적 운동 궤적을 벗어나는 경우 운동 횟수 계수부에 운동 궤적 이상 정보를 제공하여 운동 횟수가 증가되지 않도록 한다. 이와 같은 운동 궤적 추정은 다음의 수학식 3을 이용할 수 있다. 수학식 3"}
{"patent_id": "10-2022-0186072", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "위 수학식 3는 영상 내 객체의 자세 분석을 통해 추정한 키포인트의 이동 방향의 변화량을 통해 궤적을 추적하 기 위한 것으로, 예시적으로 {k=1, 2, 3}으로 설정할 수 있다. 앞서 설명한 바와 같이 프레임 키포인트 정보를 기반으로 하는 운동량 계산 시에는 영상에서 키포인트를 추정하 는 과정에서 하나의 키포인트에 대해서 발생되는 오류라고 하더라도 상당한 왜곡을 발생시키기 때문에 노이즈 필터링을 수행하지만, 키포인트 변화 방향의 경우는 한 두개의 키포인트 오류가 있더라도 전체 변화 방향에 대 해서는 큰 영향을 미치지 않는다. 따라서, 수학식 2를 통해 필터링되는 프레임이라 하더라도 다음의 수학식 3을 이용한 궤적 추적에서는 이용할 수 있다. 도 4를 참조하면, 운동량 계산부는 포즈 추정부가 제공하는 임의의 t 시점 프레임의 각 키포인트가 이전 프레임에서 이동한 이동 방향(t-1 시점 프레임의 키포인트와 t시점 프레임의 키포인트의 이동 방향)의 합 산 벡터 값(directiont)을 얻고, 후속 k개의 프레임의 각 키포인트에 대해서도 이전 프레임에서 이동한 이동 방 향의 합산 벡터 값(directiont+k)을 얻은 후, t 시점 프레임의 키포인트 방향 벡터와 후속되는 k개의 각 프레임 의 키포인트 방향 벡터의 차이를 각각 구하여, k개의 벡터 차이값 모두가 기준값 이하인 경우 정상 궤적으로 추 정하고, k개의 벡터 차이값( , , ) 중 하나라도 기준값()을 초과하는 경우 비정상 궤 적으로 판단하여 궤적 추정을 초기화하고 운동 횟수 계수부에 해당 운동은 운동 횟수로 가산하지 않도록 하는 정보를 제공할 수 있다. 이를 통해서 운동 방향이 다른 방향으로 변화되거나 급격히 변화되는 등의 궤적에 문제가 있는 경우 잘못된 운 동으로 판단함으로서 재활운동을 수행하는 환자가 자신의 운동 상태를 확인할 수 있도록 한다. 나아가, 재활운동 모니터링 장치는 사용자 입력을 수신하고 특정 정보를 사용자에게 제공하는 사용자 인터 페이스부와, 운동 횟수 계수부에서 학습된 분류 정보와 운동 주기 설정 정보를 특정 개인에 대한 특정 운동에 대한 정보로 저장하고, 저장된 특정 개인에 대한 특정 운동 정보를 운동 횟수 계수부에 제공하는 개 인별 운동 관리부를 포함할 수 있다. 이와 같은 구성을 통해서 개인별로 복수의 운동에 대한 학습을 수행하여 운동 세트를 구성하고, 해당 개인 정보 와 실행할 운동에 대한 정보를 입력하여 기 학습된 상태로 운동 횟수 계수부의 설정을 변경한 후 실행할 운동에 대한 분석을 수행할 수 있다. 필요한 경우 해당 개인에 대한 학습 정보를 누적 학습하여 해당 개인에 대한 추가 운동의 학습을 좀 더 용이하 게 진행하거나, 유사한 운동 장애나 재활운동 목표를 가지는 사용자들의 학습 데이터를 통합하여 좀 더 범용적 인 재활운동 학습 모델을 학습시킬 수 있고, 기 학습된 학습 모델을 갱신하는 방식으로 활용하여 개인의 학습 데이터 필요량을 줄일 수도 있다. 도 5는 본 발명의 실시예에 따른 포즈 분석 기반 재활운동 모니터링 방법의 학습 과정을 보인 순서도이다. 도시된 바와 같이 학습을 위한 재활운동 영상을 촬영하거나 수신한다. 이 경우 사용자 인터페이스를 통해서 개 인 정보나 학습할 운동에 대한 정보가 더 수신될 수 있다. 학습을 위한 재활운동 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관절의 3차원 위치 정보인 키포인 트 정보를 생성한다. 해당 학습을 위한 재활운동 영상은 동일한 재활운동을 복수회 반복한 것일 수 있다. 이후 학습을 위해 제공되는 반복 재활운동 영상에 대해 포즈 추정부에서 생성한 프레임별 키포인트의 분포를 2 개 이상의 상이한 분포 패턴으로 분류하도록 학습하고, 학습된 패턴의 순서를 운동 주기로 설정한다. 학습을 위해 제공된 재활운동 영상을 통해 프레임 키포인트의 분포 패턴 분류 학습과 운동 주기 설정이 완료되 면(학습 과정이 완료되면), 해당 학습 내용과 운동 주기 설정 내용을 상기 개인정보와 운동 정보에 대응시켜 저 장한다. 도 6은 본 발명의 실시예에 따른 포즈 분석 기반 재활운동 모니터링 방법의 분석 과정을 보인 순서도이다. 도시된 바와 같이, 분석을 위한 재활 운동 영상 제공 전에 개인정보와 운동 정보를 통해 학습 단계에서 저장된 프레임 키포인트의 분포 패턴 분류 학습 내용과 운동 주기 설정 내용을 인출하여 재활운동 모니터링 장치의 운 동 횟수 계수부에 적용한다. 분석을 위한 재활운동 영상 데이터를 수신하면, 해당 영상의 각 프레임에 존재하는 인체의 포즈를 판별하여 관 절의 3차원 위치 정보인 키포인트 정보를 생성한다. 분석을 위해 제공되는 실시간 재활운동 영상 프레임의 키포인트 분포를 학습된 패턴으로 분류한다. 만일 학습된 패턴으로 분류된 패턴의 시계열적 순서가 기 설정된 운동 주기에 일치하면 운동 횟수를 증가시킨다. 한편, 위 운동 주기 일치를 지속적으로 판단하여 운동 횟수를 증가시키는 과정 중에, 프레임 키포인트 위치의 프레임간 변화량을 누적하여 운동량을 생성하고, 프레임 키포인트 위치의 프레임 간 이동 방향의 변화량이 기준 미만인 경우 정상 운동 궤적으로 판단하고 프레임간 키포인트 이동 방향의 변화량이 기준 이상인 경우 비정상 궤적으로 판단하여 운동 횟수를 증가시키지 않도록 한다. 위 과정을 반복한 후 운동이 종료되면 운동 횟수와 운동량 누적 정보를 운동 결과 정보로 사용자에게 제공한다. 이와 같은 구성을 통해서 제한된 학습 데이터 만으로 정확한 운동 횟수 판단이 가능하도록 하며, 인체 골격이나 관절을 추정한 정보를 토대로 운동량을 계산하고 운동 궤적의 이상 여부를 판단하도록 함으로써 재활 운동을 하 는 환자 스스로 본인의 운동 능력을 평가할 수 있게 된다. 이와 같은 본 발명을 통해서 재활 운동이 필요한 사 람들이 스스로 모니터링 정보를 통해 올바른 자세로 교정할 수 있게 되므로 재활 보조 인력 부족 문제를 완화시 키고 재활 운동에 대한 환자 부담을 경감시킬 수 있다. 이상에서 설명된 재활운동 모니터링 장치는 하드웨어 구성요소, 소프트웨어 구성요소, 및/또는 하드웨어 구성요소 및 소프트웨어 구성요소의 조합으로 구현될 수 있다. 또한, 실시예들에서 설명된 구성요소는, 예를 들어, 프로세서, 콘트롤러, ALU(arithmetic logic unit), 디지털 신호 프로세서(digital signal processor), 마이크로컴퓨터, FPA(field programmable array),PLU(programmable logic unit), 마이크로프로세서, 또는 명령(instruction)을 실행하고 응답할 수 있는 다른 어떠한 장치와 같이, 하나 이상의 범용 컴퓨터 또는 특수 목적 컴퓨터를 이용하여 구현될 수 있다. 한편, 재활운동 모니터링 장치는 통신부, 저장부, 표시부, 음향 출력부, 제어부 등을 포함할 수 있다. 재활운동 모니터링 장치에 포함되는 통신부는 유/무선 통신망을 통해 내부의 임의의 구성 요소 또는 외부 의 임의의 적어도 하나의 단말기와 통신 연결한다. 여기서, 무선 인터넷 기술로는 무선랜(Wireless LAN: WLAN), DLNA(Digital Living Network Alliance), 와이브로(Wireless Broadband: Wibro), 와이맥스(World Interoperability for Microwave Access: Wimax), HSDPA(High Speed Downlink Packet Access), HSUPA(High Speed Uplink Packet Access), IEEE 802.16, 롱 텀 에볼루션(Long Term Evolution: LTE), LTE-A(Long Term Evolution-Advanced), 광대역 무선 이동 통신 서비스(Wireless Mobile Broadband Service: WMBS) 등이 있으며, 통신부는 상기에서 나열되지 않은 인터넷 기술까지 포함한 범위에서 적어도 하나의 무선 인터넷 기술에 따라 데 이터를 송수신하게 된다. 또한, 근거리 통신 기술로는 블루투스(Bluetooth), RFID(Radio Frequency Identification), 적외선 통신(Infrared Data Association: IrDA), UWB(Ultra Wideband), 지그비(ZigBee), 인 접 자장 통신(Near Field Communication: NFC), 초음파 통신(Ultra Sound Communication: USC), 가시광 통신 (Visible Light Communication: VLC), 와이 파이(Wi-Fi), 와이 파이 다이렉트(Wi-Fi Direct) 등이 포함될 수 있다. 또한, 유선 통신 기술로는 전력선 통신(Power Line Communication: PLC), USB 통신, 이더넷(Ethernet), 시리얼 통신(serial communication), 광/동축 케이블 등이 포함될 수 있다. 또한, 통신부는 유니버설 시리얼 버스(Universal Serial Bus: USB)를 통해 임의의 단말과 정보를 상호 전송할 수 있다. 또한, 통신부는 이동통신을 위한 기술표준들 또는 통신방식(예를 들어, GSM(Global System for Mobile communication), CDMA(Code Division Multi Access), CDMA2000(Code Division Multi Access 2000), EV- DO(Enhanced Voice-Data Optimized or Enhanced Voice-Data Only), WCDMA(Wideband CDMA), HSDPA(High Speed Downlink Packet Access), HSUPA(High Speed Uplink Packet Access), LTE(Long Term Evolution), LTE-A(Long Term Evolution-Advanced) 등)에 따라 구축된 이동 통신망 상에서 기지국과 무선 신호를 송수신할 수 있다. 재활운동 모니터링 장치에 포함될 수 있는 저장부(또는 메모리)는 다양한 사용자 인터페이스(User Interface: UI), 그래픽 사용자 인터페이스(Graphic User Interface: GUI) 등을 저장한다. 또한, 저장부는 재활운동 모니터링 장치가 동작하는데 필요한 데이터와 프로그램 등을 저장한다. 즉, 저장부는 재활운동 모니터링 장치에서 구동되는 다수의 응용 프로그램(application program 또는 애플 리케이션), 동작을 위한 데이터들, 명령어들을 저장할 수 있다. 이러한 응용 프로그램 중 적어도 일부는 무선 통신을 통해 외부 서비스 제공 장치로부터 다운로드 될 수 있다. 또한 이러한 응용 프로그램 중 적어도 일부는 기본적인 기능(예를 들어, 전화 착신, 발신 기능, 메시지 수신, 발신 기능)을 위하여 출고 당시부터 재활운동 모니터링 장치 등에 설치되어 동작(또는 기능)을 수행하도록 실행될 수 있다. 또한, 저장부는 플래시 메모리 타입(Flash Memory Type), 하드 디스크 타입(Hard Disk Type), 멀티미디어 카드 마이크로 타입(Multimedia Card Micro Type), 카드 타입의 메모리(예를 들면, SD 또는 XD 메모리 등), 자기 메 모리, 자기 디스크, 광디스크, 램(Random Access Memory: RAM), SRAM(Static Random Access Memory), 롬(Read- Only Memory: ROM), EEPROM(Electrically Erasable Programmable Read-Only Memory), PROM(Programmable Read-Only Memory) 중 적어도 하나의 저장매체를 포함할 수 있다. 또한, 재활운동 모니터링 장치는 인터넷 (internet)상에서 저장부의 저장 기능을 수행하는 웹 스토리지(web storage)를 운영하거나, 또는 웹 스토리지와 관련되어 동작할 수도 있다. 재활운동 모니터링 장치에 포함될 수 있는 표시부는 내부 제어 수단의 제어에 의해 저장부에 저장된 사용 자 인터페이스 및/또는 그래픽 사용자 인터페이스를 이용하여 다양한 메뉴 화면 등과 같은 다양한 콘텐츠를 표 시할 수 있다. 여기서, 표시부에 표시되는 콘텐츠는 다양한 텍스트 또는 이미지 데이터(각종 정보 데이터 포 함)와 아이콘, 리스트 메뉴, 콤보 박스 등의 데이터를 포함하는 메뉴 화면 등을 포함한다. 또한, 표시부는 터치 스크린 일 수 있다. 또한, 표시부는 액정 디스플레이(Liquid Crystal Display: LCD), 박막 트랜지스터 액정 디스플레이(Thin Film Transistor-Liquid Crystal Display: TFT LCD), 유기 발광 다이오드(Organic Light-Emitting Diode: OLED), 플렉시블 디스플레이(Flexible Display), 3차원 디스플레이(3D Display), 전자잉크 디스플레이(e-inkdisplay), LED(Light Emitting Diode) 중에서 적어도 하나를 포함할 수 있다. 재활운동 모니터링 장치에 포함될 수 있는 음향 출력부는 제어수단에 의해 소정 신호 처리된 신호에 포함 된 음향 정보를 출력한다. 여기서, 음향 출력부에는 리시버(receiver), 스피커(speaker), 버저(buzzer) 등이 포 함될 수 있다. 또한, 음향 출력부는 제어부에 의해 생성된 안내 음성을 출력할 수 있다. 재활운동 모니터링 장치에 구성될 수 있는 제어 수단은 전반적인 제어 기능을 실행한다. 이때, 상기 제어 수단은 프로세서(processor) 또는 엔진(engine)일 수 있다. 또한, 제어수단은 저장부에 저장된 프로그램 및 데이터를 이용하여 전반적인 제어 기능을 실행한다. 제어수단은 RAM, ROM, CPU, GPU, 버스를 포함할 수 있으며, RAM, ROM, CPU, GPU 등은 버스를 통해 서로 연결될 수 있다. CPU는 저장부에 액세스하여, 저장부에 저장된 O/S를 이용하여 부팅을 수행할 수 있으며, 저장부에 저장된 각종 프로그램, 콘텐츠, 데이터 등을 이용하여 다양한 동작을 수행할 수 있다. 또한, 재활운동 모니터링 장치는 사용자에 의한 버튼 조작 또는 임의의 기능 선택에 따른 신호를 수신하거 나, 디스플레이되는 화면을 터치/스크롤하는 등의 조작에 의해 생성된 명령 또는 제어 신호를 수신하기 위한 입 력부(미도시)를 더 포함할 수도 있다. 입력부는 사용자의 명령, 선택, 데이터, 정보 중에서 적어도 하나를 입력 받기 위한 수단으로서, 숫자 또는 문 자 정보를 입력 받고 다양한 기능을 설정하기 위한 다수의 입력키 및 기능키를 포함할 수 있다. 또한, 입력부는 키 패드(Key Pad), 돔 스위치 (Dome Switch), 터치 패드(정압/정전), 터치 스크린(Touch Screen), 조그 휠, 조그 스위치, 조그 셔틀(Jog Shuttle), 마우스(mouse), 스타일러스 펜(Stylus Pen), 터치 펜(Touch Pen) 등의 다양한 장치가 사용될 수 있다. 특히, 표시부가 터치스크린 형태로 형성된 경우, 입력의 기 능 중 일부 또는 전부는 표시부를 통해 수행될 수 있다. 또한, 재활운동 모니터링 장치의 각 구성부(또는 모듈)는 장치의 메모리(또는 저장부) 상에 저장되는 소프 트웨어일 수 있다. 메모리는 장치의 내부 메모리 일 수 있으며, 외장형 메모리 또는 다른 형태의 저장 장치일 수 있다. 또한, 메모리는 비휘발성 메모리일 수 있다. 메모리 상에 저장되는 소프트웨어는 실행 시 장치로 하여 금 특정 동작을 수행하도록 하는 명령어 세트를 포함할 수 있다. 또한, 재활운동 모니터링 장치는 웹 서버, 데이터베이스 서버, 프록시 서버 등의 형태로 구현될 수 있다. 또한, 재활운동 모니터링 장치에는 네트워크 부하 분산 메커니즘, 내지 인터넷 또는 다른 네트워크 상에서 동작할 수 있도록 하는 다양한 소프트웨어 중 하나 이상이 설치될 수 있으며, 이를 통해 컴퓨터화된 시스템으로 구현될 수 있다. 또한, 네트워크는 http 네트워크일 수 있으며, 전용 회선(private line), 인트라넷 또는 임의 의 다른 네트워크일 수 있다. 전술된 내용은 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자라면 본 발명의 본질적인 특성에서 벗어 나지 않는 범위에서 수정 및 변형이 가능할 것이다. 따라서, 본 발명에 개시된 실시예들은 본 발명의 기술 사상 을 한정하기 위한 것이 아니라 설명하기 위한 것이고, 이러한 실시예에 의하여 본 발명의 기술 사상의 범위가 한정되는 것은 아니다. 본 발명의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 발명의 권리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2022-0186072", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 동작 방식을 설명하기 위한 개념도. 도 2는 본 발명의 실시예에 따른 재활운동 모니터링 장치의 구성도. 도 3은 본 발명의 실시예를 설명하기 위한 프레임 키포인트 추정 예시도. 도 4는 본 발명의 실시예를 설명하기 위한 일련의 프레임 예시도. 도 5는 본 발명의 실시예에 따른 포즈 분석 기반 재활운동 모니터링 방법의 학습 과정을 보인 순서도. 도 6은 본 발명의 실시예에 따른 포즈 분석 기반 재활운동 모니터링 방법의 분석 과정을 보인 순서도."}
