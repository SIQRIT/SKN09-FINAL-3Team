{"patent_id": "10-2022-0055005", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0155291", "출원번호": "10-2022-0055005", "발명의 명칭": "로밍 단말 에지 컴퓨팅 서비스 과금 지원 방법", "출원인": "삼성전자주식회사", "발명자": "김혜성"}}
{"patent_id": "10-2022-0055005", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "무선 통신 시스템에서 제어 신호 처리 방법에 있어서,기지국으로부터 전송되는 제1 제어 신호를 수신하는 단계;상기 수신된 제1 제어 신호를 처리하는 단계; 및상기 처리에 기반하여 생성된 제2 제어 신호를 상기 기지국으로 전송하는 단계를 포함하는 것을 특징으로 하는제어 신호 처리 방법."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시는 보다 높은 데이터 전송률을 지원하기 위한 5G 또는 6G 통신 시스템에 관련된 것이다."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 무선 통신 시스템에 관련된 것으로, 보다 구체적으로 본 개시는 무선 통신 시스템에서 에지 컴퓨팅 서비스를 사용하는 로밍 단말에 대한 과금 지원 방식을 제안한다."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "5G 이동통신 기술은 빠른 전송 속도와 새로운 서비스가 가능하도록 넓은 주파수 대역을 정의하고 있으며, 3.5 기가헤르츠(3.5GHz) 등 6GHz 이하 주파수('Sub 6GHz') 대역은 물론 28GHz와 39GHz 등 밀리미터파(㎜Wave)로 불 리는 초고주파 대역('Above 6GHz')에서도 구현이 가능하다. 또한, 5G 통신 이후(Beyond 5G)의 시스템이라 불리 어지는 6G 이동통신 기술의 경우, 5G 이동통신 기술 대비 50배 빨라진 전송 속도와 10분의 1로 줄어든 초저 (Ultra Low) 지연시간을 달성하기 위해 테라헤르츠(Terahertz) 대역(예를 들어, 95GHz에서 3 테라헤르츠(3THz) 대역과 같은)에서의 구현이 고려되고 있다. 5G 이동통신 기술의 초기에는, 초광대역 서비스(enhanced Mobile BroadBand, eMBB), 고신뢰/초저지연 통신 (Ultra-Reliable Low-Latency Communications, URLLC), 대규모 기계식 통신 (massive Machine-Type Communications, mMTC)에 대한 서비스 지원과 성능 요구사항 만족을 목표로, 초고주파 대역에서의 전파의 경로 손실 완화 및 전파의 전달 거리를 증가시키기 위한 빔포밍(Beamforming) 및 거대 배열 다중 입출력(Massive MIMO), 초고주파수 자원의 효율적 활용을 위한 다양한 뉴머롤로지 지원(복수 개의 서브캐리어 간격 운용 등)와 슬롯 포맷에 대한 동적 운영, 다중 빔 전송 및 광대역을 지원하기 위한 초기 접속 기술, BWP(Band-Width Part) 의 정의 및 운영, 대용량 데이터 전송을 위한 LDPC(Low Density Parity Check) 부호와 제어 정보의 신뢰성 높은 전송을 위한 폴라 코드(Polar Code)와 같은 새로운 채널 코딩 방법, L2 선-처리(L2 pre-processing), 특정 서 비스에 특화된 전용 네트워크를 제공하는 네트워크 슬라이싱(Network Slicing) 등에 대한 표준화가 진행되었다. 현재, 5G 이동통신 기술이 지원하고자 했던 서비스들을 고려하여 초기의 5G 이동통신 기술 개선(improvement) 및 성능 향상(enhancement)을 위한 논의가 진행 중에 있으며, 차량이 전송하는 자신의 위치 및 상태 정보에 기 반하여 자율주행 차량의 주행 판단을 돕고 사용자의 편의를 증대하기 위한 V2X(Vehicle-to-Everything), 비면허 대역에서 각종 규제 상 요구사항들에 부합하는 시스템 동작을 목적으로 하는 NR-U(New Radio Unlicensed), NR 단말 저전력 소모 기술(UE Power Saving), 지상 망과의 통신이 불가능한 지역에서 커버리지 확보를 위한 단말- 위성 직접 통신인 비 지상 네트워크(Non-Terrestrial Network, NTN), 위치 측위(Positioning) 등의 기술에 대 한 물리계층 표준화가 진행 중이다. 뿐만 아니라, 타 산업과의 연계 및 융합을 통한 새로운 서비스 지원을 위한 지능형 공장 (Industrial Internet of Things, IIoT), 무선 백홀 링크와 액세스 링크를 통합 지원하여 네트워크 서비스 지역 확장을 위한 노드를 제공하는 IAB(Integrated Access and Backhaul), 조건부 핸드오버(Conditional Handover) 및 DAPS(Dual Active Protocol Stack) 핸드오버를 포함하는 이동성 향상 기술(Mobility Enhancement), 랜덤액세스 절차를 간소화하 는 2 단계 랜덤액세스(2-step RACH for NR) 등의 기술에 대한 무선 인터페이스 아키텍쳐/프로토콜 분야의 표준 화 역시 진행 중에 있으며, 네트워크 기능 가상화(Network Functions Virtualization, NFV) 및 소프트웨어 정 의 네트워킹(Software-Defined Networking, SDN) 기술의 접목을 위한 5G 베이스라인 아키텍쳐(예를 들어,Service based Architecture, Service based Interface), 단말의 위치에 기반하여 서비스를 제공받는 모바일 엣지 컴퓨팅(Mobile Edge Computing, MEC) 등에 대한 시스템 아키텍쳐/서비스 분야의 표준화도 진행 중이다. 이와 같은 5G 이동통신 시스템이 상용화되면, 폭발적인 증가 추세에 있는 커넥티드 기기들이 통신 네트워크에 연결될 것이며, 이에 따라 5G 이동통신 시스템의 기능 및 성능 강화와 커넥티드 기기들의 통합 운용이 필요할 것으로 예상된다. 이를 위해, 증강현실(Augmented Reality, AR), 가상현실(Virtual Reality, VR), 혼합 현실 (Mixed Reality, MR) 등을 효율적으로 지원하기 위한 확장 현실(eXtended Reality, XR), 인공지능(Artificial Intelligence, AI) 및 머신러닝(Machine Learning, ML)을 활용한 5G 성능 개선 및 복잡도 감소, AI 서비스 지 원, 메타버스 서비스 지원, 드론 통신 등에 대한 새로운 연구가 진행될 예정이다. 또한, 이러한 5G 이동통신 시스템의 발전은 6G 이동통신 기술의 테라헤르츠 대역에서의 커버리지 보장을 위한 신규 파형(Waveform), 전차원 다중입출력(Full Dimensional MIMO, FD-MIMO), 어레이 안테나(Array Antenna), 대규모 안테나(Large Scale Antenna)와 같은 다중 안테나 전송 기술, 테라헤르츠 대역 신호의 커버리지를 개선 하기 위해 메타물질(Metamaterial) 기반 렌즈 및 안테나, OAM(Orbital Angular Momentum)을 이용한 고차원 공 간 다중화 기술, RIS(Reconfigurable Intelligent Surface) 기술 뿐만 아니라, 6G 이동통신 기술의 주파수 효 율 향상 및 시스템 네트워크 개선을 위한 전이중화(Full Duplex) 기술, 위성(Satellite), AI(Artificial Intelligence)를 설계 단계에서부터 활용하고 종단간(End-to-End) AI 지원 기능을 내재화하여 시스템 최적화를 실현하는 AI 기반 통신 기술, 단말 연산 능력의 한계를 넘어서는 복잡도의 서비스를 초고성능 통신과 컴퓨팅 자 원을 활용하여 실현하는 차세대 분산 컴퓨팅 기술 등의 개발에 기반이 될 수 있을 것이다."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "로밍 단말에 에지 컴퓨팅 서비스를 적용하기 위해서는 해당 세션을 visited 네트워크의 에지 컴퓨팅 서버가 설 치되어 있는 로컬 데이터 네트워크로 단축된 전송 경로를 통해서 연결해야한다. 이때, 로컬 데이터 네트워크와 로밍 단말 사이 교환되는 데이터 트래픽에 대한 과금은 일반 로밍 데이터 트래픽에 적용되는 과금 정책과는 다 른 정책이 적용될 수 있어야 한다. 하지만, visited 네트워크에서 에지 컴퓨팅 세션에 적용되는 과금 정보 획득 방법 및 에지 컴퓨팅 세션 과금 제어 적용 방법이 정의되어 있지 않다. 본 개시는 로밍 단말의 에지 컴퓨팅 세션에 대한 과금 정책을 적용하는 방법을 제공한다. 구체적으로, 로밍 단 말이 HR 세션에 대한 세션 분기를 통해서 에지 컴퓨팅 서비스를 이용할 때, 분기된 세션에 대한 과금을 위한 정 책을 설정하고 관련 사용량 모니터링 정보를 과금 기능 (Charging Function; CHF)에 제공하는 방법을 제안한다. 또한, 본 개시는 visited 네트워크의 SMF 가 에지 컴퓨팅 서비스 세션 관련 과금 정보 또는 정책을 획득하는 절 차 및 visited 네트워크 또는 home 네트워크의 CHF 가 해당 과금 정보를 생성하여 전달하는 절차를 제안한다."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기와 같은 문제점을 해결하기 위한 본 발명은 무선 통신 시스템에서 제어 신호 처리 방법에 있어서, 기지국으 로부터 전송되는 제1 제어 신호를 수신하는 단계; 상기 수신된 제1 제어 신호를 처리하는 단계; 및 상기 처리에 기반하여 생성된 제2 제어 신호를 상기 기지국으로 전송하는 단계를 포함하는 것을 특징으로 한다."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시의 실시 예에 따르면, 로밍 단말에 에지 컴퓨팅 서비스 제공 시 필요한 과금 정보 및 제어 정책을 visited 네트워크에 설정할 수 있다. 또한, 본 개시의 실시 예에 따르면, 로밍 단말에 대한 에지 컴퓨팅 서비스 사용량 조절을 과금 정보에 따라 적 용할 수 있다."}
{"patent_id": "10-2022-0055005", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하 첨부된 도를 참조하여 본 개시의 동작 원리를 상세히 설명한다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들이다. 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있으므로 그 정의는 본 명세서 전반에 걸친 내용에 따라 정해져야 한다. 본 개시에서 사용되는 망 객체(network entity) 및 Edge Computing 시스템의 객체들을 지칭하는 용어, 메시지들 을 지칭하는 용어, 식별 정보들을 지칭하는 용어 등은 설명의 편의를 위해 예시된 것이다. 따라서, 본 개시가 후술되는 용어들에 한정되는 것은 아니며, 동등한 기술적 의미를 가지는 대상을 지칭하는 다른 용어가 사용될 수 있다. 이하 편의를 위하여, 본 발명은 5G 시스템 규격에서 정의하는 용어와 명칭들을 사용하지만 상기 용어 및 명칭들 에 의해 한정되는 것은 아니며, 다른 규격에 따르는 시스템에도 동일하게 적용될 수 있다. 도 1은 본 개시의 일 실시 예에 따른 계층 구별 없이 구성된 Edge Computing 구현 시나리오의 일 예를 도시한다. Home routed (HR) 로밍을 지원하는 5G 시스템 구조는 다양한 네트워크 기능(network function, NF)을 포함할 수 있다. 도 1을 참고하면, HR 로밍을 지원하는 5G 시스템은 액세스 및 이동성 관리 기능(access and mobility management function, AMF), 세션 관리 기능(session management function, SMF), 정책 제어 기능(policy control function, PCF), 어플리케이션 기능(application function, AF), 통합된 데이터 관리(unified data management, UDM), 데이터 네트워크(data network, DN), 사용자 평면 기능(user plane function, UPF), (무선) 액세스 네트워크((radio) access network, (R)AN), 단말 (user equipment, UE)을 포함할 수 있다. 각 NF들은 다음과 같은 기능을 지원할 수 있다. - AMF는 UE 단위의 접속 및 이동성 관리를 위한 기능을 제공하며, 하나의 UE 당 기본적으로 하나의 AMF에 연결 될 수 있다. V-AMF (visited-AMF) 는 단말 가입자를 기준으로 visited 네트워크의 AMF 를 의미한다. H-AMF (home-AMF) 는 단말 가입자의 홈 네트워크의 AMF 를 의미한다. - DN은 예를 들어, 운영자 서비스, 인터넷 접속 또는 서드파티(3rd party) 서비스 등을 의미할 수 있다. DN은 UPF로 하향링크 프로토콜 데이터 유닛(protocol data unit, PDU)을 전송하거나, UE로부터 전송된 PDU를 UPF로 부터 수신할 수 있다. - PCF는 어플리케이션 서버로부터 패킷 흐름에 대한 정보를 수신하여, 이동성 관리, 세션 관리 등의 정책을 결 정하는 기능을 제공할 수 있다. 구체적으로, PCF는 네트워크 동작을 통제하기 위한 단일화된 정책 프레임워크 지원, 제어평면 기능(들)(예를 들어, AMF, SMF 등)이 정책 규칙을 시행할 수 있도록 정책 규칙 제공, 사용자 데 이터 저장소(user data repository, UDR) 내 정책 결정을 위해 관련된 가입 정보에 액세스하기 위한 프론트 엔 드(front end) 구현 등의 기능을 지원할 수 있다. - SMF는 세션 관리 기능을 제공하며, UE가 다수 개의 세션을 가지는 경우 각 세션 별로 서로 다른 SMF에 의해 관리될 수 있다. V-SMF (visited-SMF)는 단말 가입자를 기준으로 visited 네트워크의 SMF 를 의미한다. H-SMF (home-SMF) 는 단말 가입자의 홈 네트워크의 SMF 를 의미한다. - UDM은 사용자의 가입 데이터, 정책 데이터 등을 저장할 수 있다. - UPF는 DN으로부터 수신한 하향링크 PDU를 (R)AN을 경유하여 UE에게 전달하며, (R)AN을 경유하여 UE로부터 수 신한 상향링크 PDU를 DN으로 전달할 수 있다. - AF는 서비스 제공(예를 들어, 트래픽 라우팅 상에서 어플리케이션 영향, 네트워크 능력 노출(network capability exposure)에 대한 접근, 정책 제어를 위한 정책 프레임워크와의 상호동작 등의 기능을 지원)을 위해 3GPP 코어 네트워크와 상호 동작할 수 있다. - CHF (charging function)는 이동 통신 네트워크에 대한 과금 정보 (e.g., 과금 대상 서비스, 과금 타입, 사 용량에 다른 서비스 이용 제한 적용 여부 등) 를 SMF 에 제공할 수 있다. - EASDF (Edge Application Server Discovery Function)는 SMF 로부터 제공받은 규칙에 따라 단말이 전송하는 domain name system 쿼리를 처리할 수 있다. 예를 들어, 단말이 전송한 DNS (domain name system) 쿼리를 DNS 서버에 전달하고, DNS 응답을 수신하고, SMF 에 관련 리포팅을 전송하고, 단말에 DNS 응답을 제공하는 동작을 수행할 수 있다. 도 2 는 본 개시의 일 실시 예에 따른 로밍 단말의 에지 컴퓨팅 서비스 지원을 위한 user plane 경로를 구성하 는 예시를 도시한다. 도 2를 참고하면, PDU 세션 1의 경로와 같이 로밍 단말의 HR 로밍 PDU 세션을 분기하여 에지 데이터 네트워크 (edge data network; EDN) 을 향한 로컬 접속을 지원하는 방법이 있을 수 있다. 또한, PDU 세션 2의 경로와 같 이 로밍 단말이 local breakout 세션을 위해 별도의 PDU 세션을 생성하여 에지 데이터 네트워크를 향한 로컬 접 속을 지원하는 방법이 있을 수 있다. 도 2의 PDU 세션 1의 경우, V-UPF2 를 통해서 전송되는 트래픽 사용량이 에지 컴퓨팅 서비스 사용량으로 계산될 수 있다. 따라서, 로밍 단말에 대한 에지 컴퓨팅 서비스의 과금 정책이 별도의 적용되어야 하는 경우, V-UPF2 의 경로를 통해 전송되는 트래픽 사용량과 V-UPF4 의 경로를 통해 전송되 는 트래픽 사용량을 별도로 모니터링할 필요가 있다. [제1 실시 예] 도 3a 및 도 3b는 본 개시의 일 실시 예에 따른 V-SMF 가 로밍 단말에 대한 에지 컴퓨팅 세션 과금 정보를 획득 하기 위한 시그널링 플로우의 일례를 도시한다. 1. AMF 은 UDM 으로부터 에지 컴퓨팅 로밍 서비스 지원 정보를 획득할 수 있다. 상기 에지 컴퓨팅 로밍 서비스 지원 정보는 다음의 정보 중 적어도 하나 이상을 포함할 수 있다: 해당 로밍 단말에 대한 에지 컴퓨팅 서비스 지원 여부, 에지 컴퓨팅 서비스 지원을 위한 세션 관리 방식 정보, 예를 들어, 에지 컴퓨팅 서비스를 위한 별도의 local breakout session (LBO) 생성 지원 여부 또는 HR 로밍 세 션에 대한 세션 분기 지원 여부가 해당 정보에 의해 지시/설정될 수 있다. 의 정보가 HR 로밍 세션의 세션 분기 지원을 나타내는 경우, HR 로밍 세션의 세션 분기 지원 시, HR 로 밍 세션 분기에 대한 과금 제어 설정 정보 (e.g., HR 로밍 세션에 대한 과금 제어 설정 지시자: V-CHF 로부터 로밍 단말에 대한 에지 컴퓨팅 서비스에 대한 과금 정보를 획득할 것을 지시하는 정보), 및/또는 예를 들어, HR 로밍 세션 분기에 대한 과금 제어 설정 정보는 VPLMN (Visited Public Land Mobile Network) 에 서 자체적으로 과금 정책을 결정할 수 있는 지 (VPLMN 과금 정책 결정) 또는 HPLMN (Home Public Land Mobile Network)에서 결정한 정책을 따라야하는지 (HPLMN 과금 정책 결정) 에 대한 정보를 알려주는 지시자가 포함되어 있을 수 있다. 의 정보가 로밍 단말에 대해서 에지 컴퓨팅 서비스를 위한 별도의 LBO 생성을 지원함을 나타내는 경우, 에지 컴퓨팅 전용 LBO 세션에 대한 슬라이스 또는 data network name 정보와 관련 과금 정보 획득 지시자. 일례로, 에지 컴퓨팅 서비스 지원을 위한 세션 관리 방식 정보가 에지 컴퓨팅 서비스를 위한 별도의 local breakout session (LBO) 생성을 지원하고 HR 로밍 세션에 대한 분기 또한 지원함을 나타낼 수도 있다. 이러한 경우, 로밍 단말의 에지 컴퓨팅 서비스 세션 방식으로 별도의 LBO 세션 생성 및 HR 로밍 세션 분기 방식이 모두적용될 수 있음을 의미한다 (예를 들어, 로밍 단말이 사용하는 어플리케이션 서비스에 따라 LBO 세션 생성 또는 HR 로밍 세션 분기 방식이 각각 적용될 수 있다). 제1 실시 예에서는 HR 로밍 세션 분기 방식만을 지원하는 단말에 대한 절차를 중심으로 설명하나 이에 제한되는 것은 아니며 LBO 생성을 지원하는 단말에 대해서도 제1 실시 예에서 설명하는 내용이 적용 가능할 수 있다. 2a/2b. AMF 는 단말로부터 PDU 세션 생성 요청 (PDU Session Establishment request) 메시지를 수신하고 (2a), SMF 를 선택할 수 있다 (2b). 이 때, AMF 는 에지 컴퓨팅 서비스 세션을 지원할 수 있는 SMF 를 선택할 수 있다. 예를 들어, 단계 1에서 HR 로밍 세션에 대한 분기만이 지원되는 경우, AMF는 SMF 를 선택할 때 HR 로밍 세션 분기를 수행할 수 있는 SMF 를 선택할 수 있다. 3. AMF 는 V-SMF 에 PDUSession_CreateSMContext 요청 메시지를 전송하고 이에 대한 응답을 V-SMF 로부터 수신 할 수 있다. AMF는 단계 1을 통해서 획득한 정보를 V-SMF 에 제공할 수 있다. 4. V-SMF 는 단계 3에서 AMF 로부터 획득한 로밍 단말의 에지 컴퓨팅 서비스 지원 정보를 기반으로 V-PCF 를 선 택할 수 있다. V-SMF 는 V-PCF 를 선택할 때, HR 로밍 세션에 대한 세션 분기 정책 및 세션 분기 관련 과금 정 보를 제공해줄 수 있는 (세션 관리 및 과금에 관여하는) PCF 를 선택할 수 있다. 예를 들어, V-SMF 는 세션 관 리 정책을 제공해 줄 수 있는 V-PCF 를 선택할 수 있고, 선택된 V-PCF로부터 에지 컴퓨팅 서비스 세션 관리 정 책을 획득할 수 있다. 예를 들어, 앞의 단계에서 로밍 단말에 대한 에지 컴퓨팅 서비스를 HR 로밍 세션 분기가 아닌 LBO 세션을 통해서 수행하도록 설정되는 경우, V-SMF 는 UE policy에 관여하고 세션 관리 정책 또한 제공 할 수 있는 V-PCF 를 선택 할 수도 있다. 5-1. V-SMF 는 단계 4에서 선택한 V-PCF 에 SM Policy Association Establishment 요청 메시지를 전송할 수 있 다. 해당 메시지에는 HR 로밍 세션 관리 정책 설정 정보 (e.g., HR 로밍 세션 정책 설정 지시자(e.g., VPLMN 제 어 정책 결정 또는 HPLMN 제어 정책 결정임을 알려주는 지시자), indication to request HR session breakout policy, 또는 해당 세션이 에지 컴퓨팅 서비스와 관련되어있음을 알리는 지시자 등)가 포함될 수 있다. 해당 메 시지는 HR 세션의 분기를 통해서 에지 컴퓨팅 서비스를 지원함을 알리고, 관련 세션 관리 정책과 과금 관련 정 보를 받아오기 위해 이용될 수 있다. 5-2. V-PCF 는 V-SMF 에 SM Policy Association Establishment 요청에 대한 응답 메시지를 전송할 수 있다. 구 체적으로, V-PCF 는 V-SMF 로부터 수신한 HR 로밍 세션 관리 정책 설정 정보를 통해서 HR 로밍 세션의 분기에 관련 정책이 필요함을 인지하고, 관련 HR 로밍 세션 분기 정책 및 HR 로밍 세션 분기 과금 정보를 V-SMF에 제공 할 수 있다. 예를 들어, HR 로밍 세션 분기에 대한 시작 및 종료 감지 및 리포팅 요구 정보 (start and stop of session breakout)를 HR 로밍 세션 분기 정책 또는 HR 로밍 세션 과금 정보에 포함하여 V-SMF 에 5-1 단계에 대응하는 응답 메시지로 전송할 수 있다. 또한, HR 로밍 세션 분기에 대한 시작 및 종료 감지 및 리포팅 요구 정보는 사용 어플리케이션 별 (start and stop of session breakout for an application)로 제공될 수 있다. 이러한 경우, 해당 어플리케이션 트래픽을 식별할 수 있는 traffic description 정보 (e.g., IP address/port number 로 이루어진 5-tuple 정보, DNN/S-NSSAI 정보, application identifier 등) 가 같이 제공될 수 있다. 또한, V-PCF 는 HR 로밍 세션 분기에 대한 과금을 관리하는 V-CHF에 대한 정보를 V-SMF에 제공할 수 있다. 예를 들어, V-CHF 정보는 V-PCF 에 local configuration 되어 있거나, V-NRF (visited-network repository function) 로부터 획득되거나, 또는 UDR 에 저장되어 있는 PDU 세션 정책 제어 subscription 정보 내 포함되어 있는 V-CHF 정보로부터 획득될 수 있다. V-PCF 는 이와 같이 V-CHF 정보를 획득하여 V-SMF에 제공할 때, HR 로 밍 세션에 대한 과금 정보를 제공할 수 있고 에지 컴퓨팅 관련 과금 정보를 제공할 수 있는 V-CHF 를 찾아서 V- SMF 에 제공할 수 있다. 한편, 위의 V-CHF discovery/selection 을 지원하기 위해서, V-CHF 는 HR 로밍 세션에 대한 과금 정보 제공 지 원 여부 또는 에지 컴퓨팅 서비스 관련 과금 정보 제공 여부를 V-CHF 주소 및 식별자 정보와 같이 V-NRF 에 등 록할 수 있다. 이러한 등록 절차는 사전에 수행되어 있을 수 있다. 또한, V-PCF 는 V-SMF 에 로밍 단말에 대한 과금 관련 rule 정보를 제공할 수 있다. V-PCF 가 V-SMF 에 제공하 는 과금 관련 rule 정보는 다음 중 적어도 하나를 포함할 수 있다. - Rule ID - Precedence: 로밍 단말에 대한 에지 컴퓨팅 서비스 과금을 우선적으로 적용하고자 하는 경우, 동일 어플리케 이션 서비스가 에지 컴퓨팅 서비스를 통해서 사용될 때 적용되는 과금 정책이 우선적으로 enforce 되도록precedence 값을 설정할 수 있다. - Service data flow detection: 에지 컴퓨팅 서비스 트래픽을 detection 할 수 있는 정보, 구체적으로 HR 로 밍 세션에서 분기된 세션을 통해서 전송되는 service data flow 에 속하는 패킷을 감지/식별할 수 있는 정보가 포함될 수 있다. 예를 들어, service data flow template 과 같이 VPLMN 내 HR 로밍 세션에서 분기된 세션이 전송되는 에지 데이터 네트워크의 data network access identifier 정보가 같이 제공될 수 있다. 해당 data network access identifier 정보를 통해서 HR 로밍 세션을 통해서 전송되는 service data flow 중 분기된 세션 과 home PLMN 의 UPF 로 전송되는 세션이 구분될 수 있다. 또는, CN tunnel information (e.g., home PLMN 의 UPF 로 연결되는 CN tunnel 주소 정보, visited PLMN UPF 에서 보이는 home PLMN UPF 주소 정보) 이 포함되어 있을 수 있다. - HR 로밍 세션에서 분기된 세션 적용 지시자: 제공된 rule 이 HR 로밍 세션에서 분기된 세션에 한하여 적용되 어야함을 나타내는 정보 - Mute for notification of start and stop of HR session breakout (e.g. for edge computing service for HR roaming UEs): HR 세션에 대한 세션 분기 시작과 종료 관련 notification 에 대한 mute 수행 여부 - Charging key - Service identifier - 에지 컴퓨팅 서비스 전용 과금 적용 지시자: 에지 컴퓨팅 서비스 세션에 대한 별도 과금 방식 적용 여부 - Edge Computing Service Provider 식별자, Application Service Provider 식별자 - 과금 방식: online 또는 offline 또는 비과금 (에지 컴퓨팅 서비스 전용 과금이 적용되는 경우, 에지 컴퓨팅 서비스 세션에 대한 과금 방식 정보가 추가로 포함되어 있을 수 있다) - Online 과금 방식 적용 시 blocking 수행 여부 (사용량 또는 사용 시간에 따른 quota management 수행 영 부): HR 로밍 세션에서 분기된 세션에 대해서만 blocking 을 수행할지, HR 로밍 세션을 통해서 home PLMN 의 UPF 로 전달되는 세션에 대해서만 수행할지, 또는 두 세션에 대해서 모두 적용할 지에 대한 정보가 포함되어 있 을 수 있다. - HR 로밍 세션 분기 전용 measurement method: HR 로밍 세션에서 분기된 세션의 service data flow 의 데이터 사용량, 시간, 사용량과 시간의 조합, 또는 특정 이벤트에 대해서 모니터링 및 측정을 수행 지시 정보 6. V-SMF 는 V-PCF 가 제공한 V-CHF 정보에 기초하여 V-CHF를 선택할 수 있다. 만약, V-PCF 가 V-CHF 정보를 제공하지 않은 경우, V-SMF 가 V-CHF 정보를 획득할 수 있다. V-SMF 는 local configuration 되어 있는 V-CHF 정보 또는 V-NRF 로부터 획득한 V-CHF 정보를 이용하여 V-CHF를 선택할 수 있다. V-SMF 는 이와 같이 V-CHF 정 보를 획득할 때, HR 로밍 세션에 대한 과금 정보를 제공받을 수 있고 에지 컴퓨팅 관련 과금 정보를 제공할 수 있는 V-CHF 를 찾을 수 있다. 참고로, 위의 V-CHF discovery/selection 을 지원하기 위해서, V-CHF 는 HR 로밍 세션에 대한 과금 정보 제공 지원 여부 또는 에지 컴퓨팅 서비스 관련 과금 정보 제공 여부를 V-CHF 주소 및 식별자 정보와 같이 V-NRF 에 등록할 수 있다. 이러한 등록 절차는 사전에 수행되어 있을 수 있다. 7-1. V-SMF 는 V-CHF 에 과금 정보를 요청하는 메시지를 전송할 수 있다. 해당 메시지는 HR 로밍 세션 분기 지 시자, 에지 컴퓨팅 서비스 과금 요청 지시자, 또는 에지 컴퓨팅 로밍 서비스 과금 요청 지시자 중 적어도 하나 의 정보를 포함할 수 있다. 또한, 해당 메시지는 서비스 대상 로밍 단말의 식별자 및 에지 컴퓨팅 서비스 대상 어플리케이션 정보 (e.g., 어플리케이션 식별자, 어플리케이션 서비스 공급자 식별자, 에지 컴퓨팅 서비스 공급 자 식별자 또는 DNN/S-NSSAI 정보)를 포함할 수 있다. 7-2. V-CHF 는 V-SMF 로부터 7-1 단계에서 수신한 정보를 기반으로 V-SMF에게 과금 정보를 제공할 수 있다. 과 금 정보는 roaming charging profile 의 형태로 제공될 수 있으며, 다음의 요소들 중 적어도 하나를 포함할 수 있다: - 과금 적용 방식 타입: ■ Type 1 HR 로밍 세션 동일 적용: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 트래픽과 HR 로밍 세션 분 기를 통해서 V-UPF 로 전달되어 visited PLMN 과 연결된 에지 데이터 네트워크 (visited PLMN 사업자에 의해 제공되는 에지 컴퓨팅 서비스가 호스팅되어 있는 데이터 네트워크)로 전송되는 트래픽에 대해서 동일한 과금 정책 또는 방식 적용 ■ Type 2 HR 로밍 세션 분기를 통한 에지 컴퓨팅 서비스 과금 차별 적용: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 트래픽과 HR 로밍 세션에서 분기된 세션 (V-UPF 를 통해서 visited PLMN 의 에지 데이터 네트워크 로 전송되는 트래픽 세션)에 대해서 다른 과금 정책 또는 방식을 적용 - 과금 종류: online charging 또는 offline charging ■ 과금 적용 방식이 Type 2 인 경우: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 세션과 HR 로밍 세션에서 분기된 세션 각각에 대한 과금 종류 정보가 포함될 수 있다. - 과금 모델: data volume 기반, 사용 시간 기반, 사용량 및 시간 기반, 이벤트 기반, 미과금 중 하나의 모델 ■ 과금 적용 방식이 Type 2 인 경우: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 세션과 HR 로밍 세션에서 분기된 세션 각각에 대한 과금 모델 정보가 포함될 수 있다. 8a/8b. V-SMF 는 V-PCF 및 V-CHF 로부터 받은 정보를 기반으로 user plan 경로를 구성할 수 있다. V-PCF 로부 터 HR 로밍 세션VPLMN 내 세션 분기 수행 지시자를 기반으로 uplink classifier (ULCL) 또는 branch point (BP) 역할을 수행하는 UPF (e.g., 도 3a의 V-UPF1)를 설정하고, VPLMN 의 로컬 데이터 네트워크 (에지 컴퓨팅 서비스 사용을 위해 접속해야하는 데이터 네트워크)로 로컬 접속을 위한 PDU session anchor (PSA) UPF (e.g., 도 3a의 V-UPF2) 를 구성 및 설정할 수 있다. V-SMF 는 V-PCF 로부터 수신한 세션 분기 정책 적용을 위한 규칙 (e.g., HR 로밍 세션이 VPLMN 의 로컬 데이터 네트워크로 분기된 세션에 대한 사용량 threshold, time threshold, 모니터링 기간, threshold 에 사용량 또는 사용 시간이 가까워지는 경우 notification 수행 여부, 정책에서 정한 사용량 또는 시간 threshold 초과 시 blocking 수행 여부 등)을 N4 인터페이스를 통해서 uplink classifier 또는 branch point 역할을 하는 UPF 와 분기된 세션을 로컬 데이터 네트워크로 전달하는 PSA UPF 에 설정할 수 있다. 또한, H-UPF 와 직접 연결되는 V-UPF (e.g., V-UPF3)에 대해서도 앞의 정보에 대한 설정을 진행할 수 있다. 9. V-SMF 는 HR 로밍 단말의 에지 컴퓨팅 서비스를 위한 EASDF (Edge Application Server Discovery Function) 을 선택할 수 있다. 10. V-SMF 는 H-SMF 에 PDU Session 생성 요청 메시지를 전송할 수 있다. V-SMF는 HR 로밍 세션에 대한 세션 분기를 위해 적용된 과금 관련 정보를 H-SMF 에 제공할 수 있다. 해당 정보는 V-CHF 정보 (e.g., 식별자 및 주 소), Charging 식별자 (visited PLMN 에서 생성한 charging 식별자), 과금 정책 또는 roaming charging profile 정보 (HR 세션에 대한 세션 분기 수행에 따른 과금 정책 또는 profile 정보; 단계 5-2 와 단계 7-2에서 V-SMF 가 V-PCF 및 V-CHF 에서 획득한 정보가 전체 또는 일부가 포함될 수 있다), 또는 세션 분기에 적용된 세 션 관리 정책과 V-PCF 정보 등을 포함할 수 있다. 이러한 정보들은 HR 로밍 세션 분기 관련 세션 관리 정책 설 정 리포트 형태로 H-SMF 에 제공될 수 있다. 11. H-SMF 는 V-SMF 로부터 수신한 정보를 기반으로 UDM 내 저장되어 있는 HR 로밍 단말에 대한 가입 정보 및 로밍 관련 정책 정보를 확인할 수 있다. 이를 통해, H-SMF는 해당 로밍 단말에 대한 에지 컴퓨팅 서비스 허용 여부, 해당 로밍 단말에 대해서 HR 세션을 VPLMN 에서 분기할 수 있는지 여부 등을 확인할 수 있다. 12. H-SMF 는 단계 11 에서 확인한 단말 가입 정보 및 로밍 관련 정책 정보를 기반으로 VPLMN 에서의 HR 세션 분기에 대한 허용여부를 판단/결정할 수 있다. 13. H-SMF 는 HR 세션에 대한 정책을 제공해 줄 수 있는 H-PCF 를 선택할 수 있다. H-SMF 는 선택한 H-PCF 와 SM Policy Association Establishment 를 수행할 수 있다. H-SMF 는 V-SMF 로부터 받은 정보 (e.g., HR 로밍 세션에 대한 세션 관리 정책 및 과금 정보)를 H-PCF 에 전달할 수 있다. H-PCF 는 H-SMF 로부터 수신한 해당 정 보 (e.g., VPLMN 에서 적용된 HR 로밍 세션에 대한 정책 정보)를 참고하여 SM policy 를 생성하고 이를 H-SMF에 제공할 수 있다. 14-1. H-SMF 는 V-SMF 로부터 받은 V-CHF 정보를 고려하여 H-CHF 를 선택할 수 있다. H-CHF 를 선택할 때, H- SMF는 V-SMF 로부터 HR 로밍 세션에 대한 세션 분기를 통해서 에지 컴퓨팅 서비스를 지원하고 관련 과금 정책 또한 적용될 것을 나타내는 정보를 고려할 수 있다. 예를 들어, H-SMF는 HR 로밍 세션에서 분기된 세션에 적용 되는 과금 정책에 대한 검증을 수행할 수 있는 H-CHF 를 선택할 수 있다. H-SMF 는 H-CHF 에 V-SMF 로부터 수신 한 HR 로밍 세션에 대한 과금 정보를 전송할 수 있다. 해당 정보는 단계 7-2 에서 V-CHF 로부터 획득한 정보와V-CHF 정보를 포함할 수 있다. 14-2. H-CHF 는 H-SMF 에 HR 로밍 세션에 대한 과금 정보를 제공할 수 있다. 또한, H-CHF 는 V-SMF 를 통해 수 신된 과금 정책 또는 정보에 대한 검증을 수행할 수 있다. 예를 들어, home PLMN 사업자와 visited PLMN 사업자 사이 협약에 부합하는지 확인하거나, UDM 또는 UDR 에 저장되어 있는 subscription 정보에 부합되는 과금이 적 용되는지 확인할 수 있다. H-CHF 는 HR 로밍 세션에 대한 과금 정보를 제공할 때 home 에서 생성한 charging ID 를 제공할 수 있다. H-CHF Home 에서 생성한 charging ID 는 visited PLMN 에서 생성한 charging ID 와 맵핑되 어 저장될 수 있다. 15. H-SMF 는 단계 13 및 단계 14-2에서 H-PCF와 H-CHF 로부터 제공받은 세션 관리 정책과 과금 관련 정책을 기 반으로 H-UPF 를 선택 및 N4 session을 설정할 수 있다. 또한, H-SMF는 VPLMN 내 UPF 정보를 H-UPF 에 제공하 면서 HR 로밍 세션에 대한 과금 정책 또한 적용할 수 있다. 16. H-SMF 는 V-SMF 에 단계 10 에서 수신한 메시지(e.g., PDU 세션 생성 요청 메시지)의 응답 메시지를 전송할 수 있다. 해당 응답 메시지에는 HR 세션 분기를 통한 에지 컴퓨팅 서비스 허용 지시자를 포함할 수 있다. 또는 VPLMN 에서 설정된 정책에 대한 수정 요청 지시자와 수정을 위한 파라미터 값등이 포함되어 있을 수 있다. 17~18. V-SMF 는 H-SMF 로부터 HR 세션 관련 PDU 세션 생성에 대한 성공 여부를 수신하고, HR 세션을 통해서 전 달되는 DNS 메시지를 다루기 위한 DNS 메시지 처리 규칙을 V-EASDF 에 제공할 수 있다. V-SMF 는 DNS 메시지 중 에지 컴퓨팅 서비스와 관련 없는 메시지를 HR으로 홈 네트워크에 있는 DNS 서버로 갈 수 있도록 설정 요청을 V- EASDF 에 전송할 수 있다. V-SMF 는 AMF 를 통해서 PDU 세션 생성 결과와 DNS 서버 주소 정보를 단말에 전송할 수 있다. [제2 실시 예] 도 4는 본 개시의 일 실시 예에 따른 과금 관련 리포팅을 수행하는 절차의 일례를 도시한다. 1. V-SMF 는 V-PCF 와 로밍 단말에 대한 에지 컴퓨팅 서비스 지원을 위한 세션 관리 정책 정보를 획득하기 위해 session management policy association 을 수행할 수 있다. 단계 1은 도 3a의 단계 5와 대응될 수 있다. 따라 서, 도 3a의 단계 5에 대한 설명이 도 4의 단계 1에도 적용/참조될 수 있으며, 중복되는 설명은 편의를 위하여 생략하기로 한다. 2. V-SMF 는 V-CHF 에 로밍 단말에 대한 에지 컴퓨팅 서비스 과금 적용 정책 또는 정보를 요청하여 획득할 수 있다. 3a/3b. V-SMF 는 앞의 단계 1과 단계 2의 동작을 통해서 획득한 정책 정보를 기반으로 로밍 세션 경로에 있는 UPF 에 사용량 모니터링 리포트를 다음과 같이 요청할 수 있다. 3a. V-SMF 가 V-PCF 또는 V-CHF 로부터 로밍 단말에 대한 에지 컴퓨팅 서비스 사용량 제한이 존재하면 (blocking 수행 또는 quota management 수행이 지시되어 있고, 관련 사용량 한계 값 threshold 가 설정되어 있 으면), uplink classifier 또는 branch point 역할을 수행하는 V-UPF1 에서 V-UPF 2 로 전송되는 에지 컴퓨팅 서비스 관련 트래픽 volume 에 대한 모니터링을 수행하도록 지시할 수 있다. 또한, 트래픽 사용량 한계 값을 V- UPF1에 제공하고, 해당 사용량 한계 값에 가까워지면 리포팅을 수행하도록 지시할 수 있다. 예를 들어, usage report reached 이벤트에 대한 리포팅 요청 지시자 또는 policy control request trigger for roaming edge computing service 의 대상 이벤트로서 사용량 한계 값 근접 통지 요청 지시자를 V-UPF1 에 제공하면서 리포팅 수행을 지시할 수 있다. 3b. V-SMF 가 V-PCF 또는 V-CHF 로부터 로밍 단말에 대한 에지 컴퓨팅 서비스 사용량 제한이 존재하면 (blocking 수행 또는 quota management 수행이 지시되어 있고, 관련 사용량 한계 값 threshold 가 설정되어 있 으면), 에지 데이터 네트워크로 전송되는 트래픽에 대한 PDU session anchor (PSA) 역할을 수행하는 V-UPF 2 에 서 에지 컴퓨팅 서비스 관련 트래픽 volume 에 대한 모니터링을 수행하도록 지시할 수 있다. 또한, 트래픽 사용 량 한계 값을 V-UPF2에 제공하고, 해당 사용량 한계 값에 가까워지면 리포팅을 수행하도록 지시할 수 있다. 예 를 들어, usage report reached 이벤트에 대한 리포팅 요청 지시자 또는 policy control request trigger for roaming edge computing service 의 대상 이벤트로서 사용량 한계 값 근접 통지 요청 지시자를 V-UPF1 에 제공 하면서 리포팅 수행을 지시할 수 있다. 단계 3a 또는 단계 3b 수행 시, 단계 1 또는 단계 2 에서 V-SMF 가 로밍 단말에 대한 에지 컴퓨팅 서비스 과금 이 일반 로밍 세션과 다르게 적용되어야 함을 V-PCF 또는 V-CHF 로부터 수신한 정보를 기반으로 인지하면, 3b의 절차가 의무적으로 수행될 수 있다. 다른 예로, 단계 1 또는 단계 2에서 V-SMF 가 로밍 단말의 에지 컴퓨팅 서비스에 대한 과금을 일반 로밍 트래픽과 동일하게 적용됨을 V-PCF 또는 V-CHF 이 제공한 정보를 통해서 인지 하면, 단계 3a 만 수행될 수 있다. 이 경우, 단계 3b를 통해서 HR 로밍 세션에서 분기된 세션의 트래픽 사용량 을 과금 목적을 위해 모니터링 하지 않고, V-SMF로 리포팅 하지 않을 수 있다. 또는, 과금 목적과는 별개로 모 니터링이 수행될 수는 있으나, 과금을 위해 CHF 또는 PCF 로 리포팅하지 않도록 할 수도 있다. 4. V-UPF 1 또는 V-UPF 2 는 단계 3에서 수신한 지시에 따라 모니터링 및 리포팅을 수행할 수 있다. 단계 3 에 서 트래픽 사용량 한계 값을 수신하고, 해당 사용량 한계 값에 가까워지면 리포팅을 수행하도록 지시받았다면 (e.g., usage report reached 이벤트에 대한 리포팅 요청 지시자 또는 policy control request trigger for roaming edge computing service 의 대상 이벤트로서 사용량 한계 값 근접 통지 요청 지시자를 V-SMF 로부터 수신하였다면), 트래픽 사용량이 한계 값에 근접한 경우, 트래픽 사용량이 한계 값에 근접하였음을 V-SMF 에 통 지할 수 있다. 예를 들어, 트래픽 사용량이 설정된 한계 값의 X% (0<X<100, X는 한계 값과 함께 설정되거나 또는 미리 정의될 수 있다)에 도달하였을 경우, 트래픽 사용량이 한계 값에 근접한 것으로 판단할 수 있다. 또 다른 예를 들어, 트래픽 사용량과 한계 값의 차이가 특정 값 이내일 때, 트래픽 사용량이 한계 값에 근접한 것으로 판단할 수 있다. 여기서 특정 값은 한계 값과 함께 설정되거나 또는 미리 정의된 값일 수 있다. 또 다른 예를 들어, 트래픽 사용량이 상기 한계값 이상인 경우, 트래픽 사용량이 한계 값에 근접하였음을 V-SMF 에 통지할 수 있다. 5. V-SMF 는 V-UPF (e.g., V-UPF 1/ V-UPF 2)로부터 수신한 리포팅을 V-PCF 및 V-CHF 에 통지할 수 있다. V- PCF 또는 V-CHF 는 V-SMF 로부터 수신한 트래픽 사용량 한계 값 근접 사실을 인지하고 해당 단말 트래픽에 대한 새로운 세션 관리 정책 정보 또는 과금 정책 정보를 제공할 수 있다. 또는, 사용량 한계 값 도달 시, 이전 설정 한 정책에 따라 blocking 또는 quota management 를 수행하도록 지시할 수 있다. 또는, blocking 을 수행하지 않고 사용량을 지속적으로 모니터링하도록 지시할 수도 있다. 6-1/6-2. V-UPF2 는 단계 4의 리포팅 이후, V-SMF 로부터 수정된 정책 정보를 수신하지 않으면, 기존 설정된 정 책에 따라 blocking 을 수행할 수 있다. 그리고 성공적으로 V-UPF2 를 통해 전송되는 로밍 단말에 대한 에지 컴 퓨팅 서비스가 차단되었음을 V-SMF 에 알릴 수 있다. 사업자 정책에 따라 로밍 단말에 대한 에지 컴퓨팅 서비스 트래픽 blocking 은 V-UPF 1 (세션 분기를 수행하는 UPF) 와 V-UPF 2 모두에서 수행될 수 있다. 즉, V-UPF 1 상향 링크에 대한 blocking 을 수행하고 이를 V-SMF 에 통보하고, V-UPF2 는 하향 링크에 대한 blocking 을 수행하고 V-SMF 에 통보할 수 있다. 7. V-SMF 는 V-UPF 로부터 수신한 blocking 수행 결과를 V-PCF 및 V-CHF 에 전송할 수 있다. 도 5a 및 도 5b 는 본 개시의 일 실시 예에 따른 HPLMN 의 정책에 따라 과금 정책 적용 및 관련 리포팅 수행 방 법의 일례를 도시한다. 1. V-SMF 는 AMF 로부터 PDU 세션 생성 요청을 수신하고 HR 로밍 세션 생성 요청임을 인지하면 H-SMF 에 PDU 세 션 생성 요청 메시지를 전송할 수 있다. 해당 요청 메시지는 V-SMF 가 속한 VPLMN 식별자와 세션 관리 정책 및 과금 관련 정보 요청 지시자, 및/또는 VPLMN 내 로밍 과금 정보 (e.g., V-CHF 주소 및 식별자, VPLMN 생성 charging ID)를 포함할 수 있다. 2. H-SMF 는 UDM 으로부터 로밍 단말에 대한 가입자 정보 내 포함된 HR 로밍 세션에 대한 세션 분기 허용 여부 정보를 확인할 수 있다. HR 로밍 세션에 대한 세션 분기가 허용되는 경우, H-SMF 는 H-PCF 로부터 HR 로밍 세션 에 대한 세션 분기 관련 정책을 획득할 수 있다. 로밍 단말에 대해 HR 로밍 세션에 대한 세션 분기가 허용되는 지 확인하고 세션 관리 정책 및 관련 과금 정보를 H-SMF 에 제공하는 방법은 다양할 수 있다. 예를 들어, H-SMF 가 UDM 내 저장된 가입자 정보 내 HR 로밍 세션에 대한 세션 분기 허용 여부를 확인하거나 UDM 내 저장된 가입 자 정보 내 로밍 단말 에지 컴퓨팅 서비스 허용 여부를 확인하여 판단하고 H-PCF 에 HR 로밍 세션에 대한 세션 분기 관련 정책 및 과금 정보를 요청할 수 있다. 또 다른 예로, H-SMF 는 H-PCF 에 세션 관리 정책을 요청할 때 로밍 단말의 세션이 HR 이며 현재 로밍 중인 PLMN 식별자 (e.g., VPLMN ID) 를 제공하고 H-PCF 가 UDR 에 저장 되어 있는 가입자 정보를 확인하여 관련 정책을 H-SMF 에 제공할 수 있다. 이와 같은 과정을 통해서 H-SMF 가 H-PCF 로부터 획득하는 정보는 도 3a의 단계 5에서 획득하는 정보에 대응될 수 있다. 따라서, 도 3a의 단계 5에 대한 설명이 도 5a의 단계 2에도 적용/참조될 수 있으며, 중복되는 설명은 편의를 위하여 생략하기로 한다.3. H-SMF 는 앞의 단계에서 HR 로밍 세션에 대한 세션 분기가 허용된 경우, H-CHF 로부터 VPLMN 에서 적용될 수 있는 로밍 단말에 대한 에지 컴퓨팅 서비스 과금 적용 정책 또는 정보를 획득할 수 있다 (예를 들어, H-SMF 는 H-CHF 에 VPLMN ID 와 HR 로밍 세션 분기 허용 지시자를 제공하고, H-CHF로부터 VPLMN 에서 HR 로밍 세션 분기 시 적용해야하는 과금 정보를 획득할 수 있다). 과금 정보는 roaming charging profile 의 형태로 제공될 수 있 으며, H-CHF 에서 부여한 charging ID 와 다음의 요소들 중 적어도 하나를 포함할 수 있다: - 과금 적용 방식 타입: ■ Type 1 HR 로밍 세션 동일 적용: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 트래픽과 HR 로밍 세션 분 기를 통해서 V-UPF 로 전달되어 visited PLMN 과 연결된 에지 데이터 네트워크 (visited PLMN 사업자에 의해 제 공되는 에지 컴퓨팅 서비스가 호스팅되어 있는 데이터 네트워크)로 전송되는 트래픽에 대해서 동일한 과금 정책 또는 방식 적용 ■ Type 2 HR 로밍 세션 분기를 통한 에지 컴퓨팅 서비스 과금 차별 적용: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 트래픽과 HR 로밍 세션에서 분기된 세션 (V-UPF 를 통해서 visited PLMN 의 에지 데이터 네트워크 로 전송되는 트래픽 세션)에 대해서 다른 과금 정책 또는 방식을 적용 - 과금 종류: online charging 또는 offline charging ■ 과금 적용 방식이 Type 2 인 경우: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 세션과 HR 로밍 세션에서 분기된 세션 각각에 대한 과금 종류 정보가 포함될 수 있다. - 과금 모델: data volume 기반, 사용 시간 기반, 사용량 및 시간 기반, 이벤트 기반, 미과금 중 하나의 모델 ■ 과금 적용 방식이 Type 2 인 경우: HR 로밍 세션 중 home PLMN 의 UPF 로 전송되는 세션과 HR 로밍 세션에서 분기된 세션 각각에 대한 과금 모델 정보가 포함될 수 있다. 4. H-SMF 는 앞의 단계에서 H-PCF 와 H-CHF 로부터 획득한 세션 관리 정책 (SM policy for HR session breakout for edge computing service), H-PCF 식별자 및 주소 정보, 과금 정보 (HPLMN-provided charging policy/information for HR roaming session breakout), H-CHF 식별자 및 주소 정보, 및/또는 H-CHF 에서 부여 한 charging ID를 V-SMF 에 전송할 수 있다. 5. V-SMF 는 H-SMF 로부터 수신한 HPLMN 제공 과금 정보를 V-CHF 에 제공할 수 있다. V-CHF 는 HPLMN 에서 제 공한 과금 정보를 저장하고, VPLMN 에서 생성하는 과금 정보와 맵핑하여 관리할 수 있다. V-CHF 는 V-SMF 에 성 공적으로 HPLMN 제공 과금 정보가 설정되었음을 전송할 수 있다. 6a. V-SMF 는 H-SMF 를 통해서 수신한 HR 로밍 세션 관리 및 과금 정보 (H-PCF 또는 H-CHF 에서 생성된 세션 관리 및 과금 정보) 내 로밍 단말에 대한 에지 컴퓨팅 서비스 사용량 제한이 존재하면 (blocking 수행 또는 quota management 수행이 지시되어 있고, 관련 사용량 한계 값 threshold 가 설정되어 있으면), uplink classifier 또는 branch point 역할을 수행하는 V-UPF1 에서 V-UPF 2 로 전송되는 에지 컴퓨팅 서비스 관련 트 래픽 volume 에 대한 모니터링을 수행하도록 지시할 수 있다. 또한, 트래픽 사용량 한계 값을 V-UPF1에 제공하 고, 해당 사용량 한계 값에 가까워지면 리포팅을 수행하도록 지시할 수 있다. 예를 들어, usage report reached 이벤트에 대한 리포팅 요청 지시자 또는 policy control request trigger for roaming edge computing service 의 대상 이벤트로서 사용량 한계 값 근접 통지 요청 지시자를 V-UPF1 에 제공하면서 리포팅 수행을 지시할 수 있다. 6b. V-SMF 가 V-PCF 또는 V-CHF 로부터 로밍 단말에 대한 에지 컴퓨팅 서비스 사용량 제한이 존재하면 (blocking 수행 또는 quota management 수행이 지시되어 있고, 관련 사용량 한계 값 threshold 가 설정되어 있 으면), 에지 데이터 네트워크로 전송되는 트래픽에 대한 PDU session anchor (PSA) 역할을 수행하는 V-UPF 2 에 서 에지 컴퓨팅 서비스 관련 트래픽 volume 에 대한 모니터링을 수행하도록 지시할 수 있다. 또한, 트래픽 사용 량 한계 값을 V-UPF2에 제공하고, 해당 사용량 한계 값에 가까워지면 리포팅을 수행하도록 지시할 수 있다. 예 를 들어, usage report reached 이벤트에 대한 리포팅 요청 지시자 또는 policy control request trigger for roaming edge computing service 의 대상 이벤트로서 사용량 한계 값 근접 통지 요청 지시자를 V-UPF1 에 제공 하면서 리포팅 수행을 지시할 수 있다. 일례로, 단계 6a 또는 단계 6b 수행 시, V-SMF 가 로밍 단말에 대한 에지 컴퓨팅 서비스 과금이 일반 로밍 세션 과 다르게 적용되어야 함을 H-SMF 로부터 수신한 정보를 기반으로 인지하면, 6b 의 절차가 의무적으로 수행될 수 있다. 다른 예로, 앞의 단계에서 V-SMF 가 로밍 단말의 에지 컴퓨팅 서비스에 대한 과금을 일반 로밍 트래픽과 동일하게 적용됨을 H-SMF 가 제공한 정보를 통해서 인지하면, 단계 6a 만 수행될 수도 있다. 이 경우, 단계 6b를 통해서 HR 로밍 세션에서 분기된 세션의 트래픽 사용량을 과금 목적을 위해 모니터링 하지 않고, V-SMF로 리포팅 하지 않을 수 있다. 또는, 과금 목적과는 별개로 모니터링이 수행될 수는 있으나, 과금을 위해 V-SMF 를 통해서 H-SMF 또는 V-CHF 로 리포팅하지 않도록 할 수도 있다. 7. V-UPF 1 또는 V-UPF 2 는 단계 6a/ 6b에서 수신한 지시에 따라 모니터링 및 리포팅을 수행할 수 있다. 단계 6a/6b 에서 트래픽 사용량 한계 값을 수신하고, 해당 사용량 한계 값에 가까워지면 리포팅을 수행하도록 지시받 았다면 (e.g., usage report reached 이벤트에 대한 리포팅 요청 지시자 또는 policy control request trigger for roaming edge computing service 의 대상 이벤트로서 사용량 한계 값 근접 통지 요청 지시자를 V-SMF 로부 터 수신하였다면), 트래픽 사용량이 한계 값에 근접한 경우, 트래픽 사용량이 한계 값에 근접하였음을 V-SMF 에 통지할 수 있다. 예를 들어, 트래픽 사용량이 설정된 한계 값의 X% (0<X<100, X는 한계 값과 함께 설정되거나 또는 미리 정의될 수 있다)에 도달하였을 경우, 트래픽 사용량이 한계 값에 근접한 것으로 판단할 수 있다. 또 다른 예를 들어, 트래픽 사용량과 한계 값의 차이가 특정 값 이내일 때, 트래픽 사용량이 한계 값에 근접한 것으로 판단할 수 있다. 여기서 특정 값은 한계 값과 함께 설정되거나 또는 미리 정의된 값일 수 있다. 또 다른 예를 들어, 트래픽 사용량이 상기 한계값 이상인 경우, 트래픽 사용량이 한계 값에 근접하였음을 V-SMF 에 통지할 수 있다. 8a/8b. V-SMF 는 V-UPF (e.g., V-UPF 1/ V-UPF 2)로부터 수신한 리포팅을 V-CHF 및 H-SMF 에 통지할 수 있다. 9. H-SMF 는 V-SMF 로부터 수신한 트래픽 사용량 한계 값 근접 사실을 인지하고, 해당 리포트를 H-PCF 및 H-CHF 에 전달할 수 있다. H-PCF 및 H-CHF 는 해당 단말 트래픽에 대한 새로운 세션 관리 정책 정보 또는 과금 정책 정보를 제공할 수 있다. 또는, 사용량 한계 값 도달 시, 이전 설정한 정책에 따라 blocking 또는 quota management 를 수행하도록 지시할 수 있다. 또는, blocking 을 수행하지 않고 사용량을 지속적으로 모니터링하 도록 지시할 수도 있다. 이러한 지시 정보가 포함된 세션 관리 정책 정보 또는 과금 정보는 H-SMF 로 제공되고 H-SMF 는 이를 V-SMF 에 전달할 수 있다. 이후, V-UPF2 는 단계 7의 리포팅 이후, V-SMF 로부터 수정된 정책 정 보를 수신하지 않으면, 기존 설정된 정책에 따라 blocking 을 수행할 수 있다. 그리고 성공적으로 V-UPF2 를 통 해 전송되는 로밍 단말에 대한 에지 컴퓨팅 서비스가 차단되었음 (blocking 결과 정보)을 V-SMF 에 알릴 수 있 다. V-SMF 에 이러한 blocking 결과를 리포팅한 경우, V-SMF 는 해당 리포팅을 H-SMF 에 전달하고, H-SMF 는 이를 H-PCF 및 H-CHF 에 전송할 수 있다. 사업자 정책에 따라 로밍 단말에 대한 에지 컴퓨팅 서비스 트래픽 blocking 은 V-UPF 1 (세션 분기를 수행하는 UPF) 와 V-UPF 2 모두에서 수행될 수 있다. 즉, V-UPF 1 상향 링크에 대한 blocking 을 수행하고 이를 V-SMF 에 통보하고, V-UPF2 는 하향 링크에 대한 blocking 을 수행하고 V-SMF 에 통보할 수 있다. 상향 링크와 하향 링크에 대한 각각의 blocking 수행 결과는 V-SMF 를 통해서 H-SMF 에 통보되고 H-PCF 및 H-CHF 에 통보될 수 있다. 이하에서는 상술한 제안 방법 및/또는 실시 예에 따라 HR 로밍 세션의 세션 분기를 통해서 에지 컴퓨팅 서비스 에 대한 과금을 적용하기 위한 NF 별 주요 동작의 예시를 설명한다. ■ V-SMF 는 HR 세션에 대한 세션 분기가 허용된 것을 확인함에 기초하여, 아래의 동작들을 수행할 수 있다: V-CHF 선택 (e.g., EC roaming service 에 대한 charging profile 제공 가능한 CHF 선택) V-CHF 에 HR 세션에 대한 세션 분기가 허용됨을 나타내는 정보를 전송 (e.g., HR session breakout indication) V-CHF 로부터 관련 VPLMN HR Session breakout 과금 정보(e.g. roaming charging profile containing V- Session Breakout indication) 수신 V-CHF 로부터 수신한 VPLMN HR Session breakout 과금 정보 를 H-SMF 와 공유 V-ULCL-UPF, V-PSA-UPF configuration 수행 Usage report trigger 가 설정되어 있고, volume 및 time threshold 가 HR 세션의 VPLMN 내 세션 분기된 경로로 전송되는 트래픽에 대해서 별도로 설정되어 있으면, PCF 에 해당 threshold 사용량까지 가까워지는 상황 을 reporting V-PCF 또는 H-SMF 로부터 VPLMN HR 로밍 세션의 세션 분기 관련 세션 관리 정책 및 과금 정보 획득 Start of V-session breakout for an app and Stop of V-session breakout detection triggers for an app 를 PCF 로부터 수신하고, 해당 detection 을 수행하는 경우, HR 세션의 VPLMN 내 세션 분기 경로로 특정 앱 트래픽이 전송되기 시작하면 관련 정보를 PCF 에 리포팅 ■ H-SMF 는 HR 세션에 대한 세션 분기 허용 및 적용 가능 여부를 확인한 후 아래의 동작들을 수행할 수 있다: H-CHF 에 HR 세션에 대한 세션 분기가 허용됨을 전송 (e.g., HR session breakout indication) V-SMF 로부터 수신한 VPLMN HR Session breakout 과금 정보 를 H-CHF 에 전송 H-CHF 로부터 관련 과금 정보 또는 roaming charging profile 수신 ■ CHF 는 EC roaming service 관련 charging profile 제공 가능 여부 또는 HR 로밍 세션의 세션 분기 관련 과 금 정보 가능 여부를 NRF 에 등록할 수 있다. 본 개시에서 제안하는 방법 및/또는 실시예들은 도 6의 단말과 도 7의 네트워크 엔티티에 의해 수행될 수 있다. 도 6는 본 개시의 일 실시 예에 따른 단말의 내부 구조를 도시하는 블록도이다. 도 6를 참고하면, 단말은 RF(Radio Frequency)처리부(6-10), 기저대역(baseband)처리부(6-20), 저장부(6-30), 제어부(6-40)를 포함할 수 있다. 물론 상기 예시에 제한되는 것은 아니며 단말은 도 6에 도시된 구성보다 더 적 은 구성을 포함하거나, 더 많은 구성을 포함할 수 있다. RF처리부(6-10)는 신호의 대역 변환, 증폭 등 무선 채널을 통해 신호를 송수신하기 위한 기능을 수행할 수 있다. 즉, RF처리부(6-10)는 기저대역처리부(6-20)로부터 제공되는 기저대역 신호를 RF 대역 신호로 상향 변환 한 후 안테나를 통해 송신하고, 안테나를 통해 수신되는 RF 대역 신호를 기저대역 신호로 하향 변환할 수 있다. 예를 들어, RF처리부(6-10)는 송신 필터, 수신 필터, 증폭기, 믹서(mixer), 오실레이터(oscillator), DAC(digital to analog convertor), ADC(analog to digital convertor) 등을 포함할 수 있다. 물론 상기 예시 에 제한되지 않는다. 도 6에서는, 하나의 안테나만이 도시되었으나, 단말은 복수의 안테나들을 구비할 수 있다. 또한, RF처리부(6-10)는 복수의 RF 체인들을 포함할 수 있다. 또한, RF처리부(6-10)는 빔포밍(beamforming)을 수행할 수 있다. 빔포밍을 위해, RF처리부(6-10)는 복수의 안테나들 또는 안테나 요소(element)들을 통해 송수 신되는 신호들 각각의 위상 및 크기를 조절할 수 있다. 또한 RF 처리부(6-10)는 MIMO(Multi Input Multi Output)를 수행할 수 있으며, MIMO 동작 수행 시 여러 개의 레이어를 수신할 수 있다. 기저대역처리부(6-20)은 시스템의 물리 계층 규격에 따라 기저대역 신호 및 비트열 간 변환 기능을 수행한다. 예를 들어, 데이터 송신 시, 기저대역처리부(6-20)은 송신 비트열을 부호화 및 변조함으로써 복소 심벌들을 생 성한다. 또한, 데이터 수신 시, 기저대역처리부(6-20)은 RF처리부(6-10)로부터 제공되는 기저대역 신호를 복조 및 복호화를 통해 수신 비트열을 복원할 수 있다. 예를 들어, OFDM(orthogonal frequency division multiplexing) 방식에 따르는 경우, 데이터 송신 시, 기저대역처리부(6-20)는 송신 비트열을 부호화 및 변조함 으로써 복소 심벌들을 생성하고, 복소 심벌들을 부반송파들에 매핑한 후, IFFT(inverse fast Fourier transform) 연산 및 CP(cyclic prefix) 삽입을 통해 OFDM 심벌들을 구성한다. 또한, 데이터 수신 시, 기저대역 처리부(6-20)은 RF처리부(6-10)로부터 제공되는 기저대역 신호를 OFDM 심벌 단위로 분할하고, FFT(fast Fourier transform)를 통해 부반송파들에 매핑된 신호들을 복원한 후, 복조 및 복호화를 통해 수신 비트열을 복원할 수 있다. 기저대역처리부(6-20) 및 RF처리부(6-10)는 상술한 바와 같이 신호를 송신 및 수신한다. 기저대역처리부(6-20) 및 RF처리부(6-10)는 송신부, 수신부, 송수신부 또는 통신부로 지칭될 수 있다. 나아가, 기저대역처리부(6-20) 및 RF처리부(6-10) 중 적어도 하나는 서로 다른 복수의 무선 접속 기술들을 지원하기 위해 복수의 통신 모듈들 을 포함할 수 있다. 또한, 기저대역처리부(6-20) 및 RF처리부(6-10) 중 적어도 하나는 서로 다른 주파수 대역의 신호들을 처리하기 위해 서로 다른 통신 모듈들을 포함할 수 있다. 예를 들어, 서로 다른 무선 접속 기술들은무선 랜(예: IEEE 802.11), 셀룰러 망(예: LTE) 등을 포함할 수 있다. 또한, 상기 서로 다른 주파수 대역들은 극고단파(SHF:super high frequency)(예: 2.NRHz, NRhz) 대역, mm파(millimeter wave)(예: 60GHz) 대역을 포함 할 수 있다. 단말은 기저대역처리부(6-20) 및 RF처리부(6-10)을 이용하여 기지국과 신호를 송수신할 수 있으며, 신호는 제어 정보 및 데이터를 포함할 수 있다. 저장부(6-30)는 단말의 동작을 위한 기본 프로그램, 응용 프로그램, 설정 정보 등의 데이터를 저장한다. 특히, 저장부(6-30)는 제2무선 접속 기술을 이용하여 무선 통신을 수행하는 제2접속 노드에 관련된 정보를 저장할 수 있다. 그리고, 저장부(6-30)는 제어부(6-40)의 요청에 따라 저장된 데이터를 제공한다. 저장부(6-30)는롬 (ROM), 램(RAM), 하드디스크, CD-ROM 및 DVD 등과 같은 저장 매체 또는 저장 매체들의 조합으로 구성될 수 있다. 또한, 저장부(6-30)는 복수 개의 메모리로 구성될 수도 있다. 제어부(6-40)는 단말의 전반적인 동작들을 제어한다. 예를 들어, 제어부(6-40)는 기저대역처리부(6-20) 및 RF처 리부(6-10)을 통해 신호를 송수신한다. 또한, 제어부(6-40)는 저장부(6-40)에 데이터를 기록하고, 읽는다. 이를 위해, 제어부(6-40)는 적어도 하나의 프로세서(processor)를 포함할 수 있다. 예를 들어, 제어부(6-40)는 통신 을 위한 제어를 수행하는 CP(communication processor) 및 응용 프로그램 등 상위 계층을 제어하는 AP(application processor)를 포함할 수 있다. 또한 단말 내의 적어도 하나의 구성은 하나의 칩으로 구현될 수 있다. 도 7은 본 개시의 일 실시예에 따른 네트워크 기능을 수행하는 네트워크 엔티티의 구조를 도시한 도면이다. 예 를 들어, 도 7의 네트워크 엔티티는 네트워크의 node일 수 있다. 예를 들어, 도 7의 네트워크 엔티티는 본 발명 의 실시예들을 통해 전술된 NWDAF, AMF, SMF, UPF, NSSF, AF, NEF, CHF, PCF, UDM 또는 OAM 중 하나일 수 있다. 도 7을 참조하면, 네트워크 기능을 수행하는 네트워크 엔터티는 송수신부, 제어부, 저장부를 포 함할 수 있다. 본 발명에서 제어부는, 회로 또는 애플리케이션 특정 통합 회로 또는 적어도 하나의 프로세서라 고 정의될 수 있다. 송수신부는 다른 네트워크 엔티티와 신호를 송수신할 수 있다. 송수신부는 예를 들어, 단말의 액세스 네트워크에 대한 접근과 이동성을 관리하는 네트워크 엔티티인 AMF와 신호 또는 메시지를 송수신할 수 있다. 제어부는 본 발명에서 제안하는 실시예들에 따른 네트워크 기능을 수행하는 네트워크 엔터티의 전반적인 동작을 제어할 수 있다. 예를 들어, 제어부는 상기에서 기술한 순서도에 따른 동작을 수행하도록 각 블록 간 신호 흐름을 제어할 수 있다. 저장부는 상기 송수신부를 통해 송수신되는 정보 및 제어부을 통해 생성되는 정보 중 적어도 하 나를 저장할 수 있다. 한편, 본 개시의 방법을 설명하는 도면에서 설명의 순서가 반드시 실행의 순서와 대응되지는 않으며, 선후 관계 가 변경되거나 병렬적으로 실행 될 수도 있다. 또는, 본 개시의 방법을 설명하는 도면은 본 개시의 본질을 해치 지 않는 범위 내에서 일부의 구성 요소가 생략되고 일부의 구성요소만을 포함할 수 있다. 한편, 본 명세서와 도면에 개시된 본 개시의 실시 예들은 본 개시의 기술 내용을 쉽게 설명하고 본 개시의 이해 를 돕기 위해 특정 예를 제시한 것일 뿐이며, 본 개시의 범위를 한정하고자 하는 것은 아니다. 즉 본 개시의 기 술적 범위에 바탕을 둔 다른 변형 예들이 실시 가능하다는 것은 본 개시의 속하는 기술 분야에서 통상의 지식을 가진 자에게 자명한 것이다. 또한 상기 각각의 실시 예는 필요에 따라 서로 조합되어 운용할 수 있다. 예컨대, 본 발명의 모든 실시예는 일부분들이 서로 조합되어 기지국과 단말이 운용될 수 있다.도면 도면1 도면2 도면3a 도면3b 도면4 도면5a 도면5b 도면6 도면7"}
{"patent_id": "10-2022-0055005", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시 예에 따른 계층 구별 없이 구성된 Edge Computing 구현 시나리오의 일 예를 도시한다. 도 2 는 본 개시의 일 실시 예에 따른 로밍 단말의 에지 컴퓨팅 서비스 지원을 위한 user plane 경로를 구성하는 예시를 도시한다. 도 3a는 본 개시의 일 실시 예에 따른 V-SMF 가 로밍 단말에 대한 에지 컴퓨팅 세션 과금 정보를 획득하기 위한 시그널링 플로우의 일례를 도시한다. 도 3b는 본 개시의 일 실시 예에 따른 V-SMF 가 로밍 단말에 대한 에지 컴퓨팅 세션 과금 정보를 획득하기 위한 시그널링 플로우의 일례를 도시한다. 도 4는 본 개시의 일 실시 예에 따른 과금 관련 리포팅을 수행하는 절차의 일례를 도시한다. 도 5a는 본 개시의 일 실시 예에 따른 V-SMF 가 H-SMF 로부터 로밍 단말에 대한 에지 컴퓨팅 세션 과금 정보를 획득하고 과금 관련 리포팅을 수행하는 절차의 일례를 도시한다. 도 5b는 본 개시의 일 실시 예에 따른 V-SMF 가 H-SMF 로부터 로밍 단말에 대한 에지 컴퓨팅 세션 과금 정보를 획득하고 과금 관련 리포팅을 수행하는 절차의 일례를 도시한다. 도 6은 본 개시의 일 실시 예에 따른 단말의 내부 구조를 도시하는 블록도이다. 도 7은 본 개시의 일 실시예에 따른 네트워크 기능을 수행하는 네트워크 엔터티의 구조를 도시한 도면이다."}
