{"patent_id": "10-2024-0109152", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0047118", "출원번호": "10-2024-0109152", "발명의 명칭": "이동 통신 시스템에서의 멀티플렉싱 된 데이터 처리 방법 및 장치", "출원인": "삼성전자주식회사", "발명자": "배재현"}}
{"patent_id": "10-2024-0109152", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "무선 통신 시스템의 제어 신호 처리 방법에 있어서, 기지국으로부터 전송되는 제1 제어 신호를 수신하는 단계; 상기 수신된 제1 제어 신호를 처리하는 단계; 및 상기 처리에 기반하여 생성된 제2 제어 신호를 상기 기지국으로 전송하는 단계를 포함하는, 방법."}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시는 보다 높은 데이터 전송률을 지원하기 위한 5G 또는 6G 통신 시스템에 관련된 것이다. 본 개시에 따르 면, 통신 네트워크의 다운로드 패킷들 중 트래픽 특성으로 분류되는 패킷들의 단위인 PDU(protocol data unit) 셋(set)에 기반하여 RAN(radio access network) 스케줄링을 지원하는 PCF(policy control function)의 방법에 (뒷면에 계속)"}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 통신 시스템에서 단말 및 기지국의 동작에 관한 것이다. 보다 구체적으로는 서로 다른 미디어 타입의 패킷(packet)들이 멀티플렉싱(multiplexing) 되어 단일 서비스 플로우(service flow)를 통해 전송될 경우 미디 어 타입 별 패킷들의 특성을 고려한 구분 정보의 생성 및 할당을 통한 RAN(radio access network)의 스케줄링을 지원하는 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "5G(5 generation) 이동통신 기술은 빠른 전송 속도와 새로운 서비스가 가능하도록 넓은 주파수 대역을 정의하고 있으며, 3.5 기가헤르츠(3.5GHz) 등 6GHz 이하 주파수('Sub 6GHz') 대역은 물론 28GHz와 39GHz 등 밀리미터파 (㎜Wave)로 불리는 초고주파 대역('Above 6GHz')에서도 구현이 가능하다. 또한, 5G 통신 이후(Beyond 5G)의 시 스템이라 불리어지는 6G(6 generation) 이동통신 기술의 경우, 5G 이동통신 기술 대비 50배 빨라진 전송 속도와 10분의 1로 줄어든 초저(Ultra Low) 지연시간을 달성하기 위해 테라헤르츠(Terahertz) 대역(예를 들어, 95GHz에 서 3 테라헤르츠(3THz) 대역과 같은)에서의 구현이 고려되고 있다. 5G 이동통신 기술의 초기에는, 초광대역 서비스(enhanced Mobile BroadBand, eMBB), 고신뢰/초저지연 통신 (Ultra-Reliable Low-Latency Communications, URLLC), 대규모 기계식 통신 (massive Machine-Type Communications, mMTC)에 대한 서비스 지원과 성능 요구사항 만족을 목표로, 초고주파 대역에서의 전파의 경로 손실 완화 및 전파의 전달 거리를 증가시키기 위한 빔포밍(Beamforming) 및 거대 배열 다중 입출력(Massive MIMO), 초고주파수 자원의 효율적 활용을 위한 다양한 뉴머롤로지 지원(복수 개의 서브캐리어 간격 운용 등)와 슬롯 포맷에 대한 동적 운영, 다중 빔 전송 및 광대역을 지원하기 위한 초기 접속 기술, BWP(Band-Width Part) 의 정의 및 운영, 대용량 데이터 전송을 위한 LDPC(Low Density Parity Check) 부호와 제어 정보의 신뢰성 높은 전송을 위한 폴라 코드(Polar Code)와 같은 새로운 채널 코딩 방법, L2 선-처리(L2 pre-processing), 특정 서 비스에 특화된 전용 네트워크를 제공하는 네트워크 슬라이싱(Network Slicing) 등에 대한 표준화가 진행되었다. 현재, 5G 이동통신 기술이 지원하고자 했던 서비스들을 고려하여 초기의 5G 이동통신 기술 개선(improvement) 및 성능 향상(enhancement)을 위한 논의가 진행 중에 있으며, 차량이 전송하는 자신의 위치 및 상태 정보에 기 반하여 자율주행 차량의 주행 판단을 돕고 사용자의 편의를 증대하기 위한 V2X(Vehicle-to-Everything), 비면허 대역에서 각종 규제 상 요구사항들에 부합하는 시스템 동작을 목적으로 하는 NR-U(New Radio Unlicensed), NR 단말 저전력 소모 기술(UE Power Saving), 지상 망과의 통신이 불가능한 지역에서 커버리지 확보를 위한 단말- 위성 직접 통신인 비 지상 네트워크(Non-Terrestrial Network, NTN), 위치 측위(Positioning) 등의 기술에 대 한 물리계층 표준화가 진행 중이다. 뿐만 아니라, 타 산업과의 연계 및 융합을 통한 새로운 서비스 지원을 위한 지능형 공장 (Industrial Internet of Things, IIoT), 무선 백홀 링크와 액세스 링크를 통합 지원하여 네트워크 서비스 지역 확장을 위한 노드를 제공하는 IAB(Integrated Access and Backhaul), 조건부 핸드오버(Conditional Handover) 및 DAPS(Dual Active Protocol Stack) 핸드오버를 포함하는 이동성 향상 기술(Mobility Enhancement), 랜덤액세스 절차를 간소화하 는 2 단계 랜덤액세스(2-step RACH for NR) 등의 기술에 대한 무선 인터페이스 아키텍쳐/프로토콜 분야의 표준화 역시 진행 중에 있으며, 네트워크 기능 가상화(Network Functions Virtualization, NFV) 및 소프트웨어 정 의 네트워킹(Software-Defined Networking, SDN) 기술의 접목을 위한 5G 베이스라인 아키텍쳐(예를 들어, Service based Architecture, Service based Interface), 단말의 위치에 기반하여 서비스를 제공받는 모바일 엣지 컴퓨팅(Mobile Edge Computing, MEC) 등에 대한 시스템 아키텍쳐/서비스 분야의 표준화도 진행 중이다. 이와 같은 5G 이동통신 시스템이 상용화되면, 폭발적인 증가 추세에 있는 커넥티드 기기들이 통신 네트워크에 연결될 것이며, 이에 따라 5G 이동통신 시스템의 기능 및 성능 강화와 커넥티드 기기들의 통합 운용이 필요할 것으로 예상된다. 이를 위해, 증강현실(Augmented Reality, AR), 가상현실(Virtual Reality, VR), 혼합 현실 (Mixed Reality, MR) 등을 효율적으로 지원하기 위한 확장 현실(eXtended Reality, XR), 인공지능(Artificial Intelligence, AI) 및 머신러닝(Machine Learning, ML)을 활용한 5G 성능 개선 및 복잡도 감소, AI 서비스 지 원, 메타버스 서비스 지원, 드론 통신 등에 대한 새로운 연구가 진행될 예정이다. 또한, 이러한 5G 이동통신 시스템의 발전은 6G 이동통신 기술의 테라헤르츠 대역에서의 커버리지 보장을 위한 신규 파형(Waveform), 전차원 다중입출력(Full Dimensional MIMO, FD-MIMO), 어레이 안테나(Array Antenna), 대규모 안테나(Large Scale Antenna)와 같은 다중 안테나 전송 기술, 테라헤르츠 대역 신호의 커버리지를 개선 하기 위해 메타물질(Metamaterial) 기반 렌즈 및 안테나, OAM(Orbital Angular Momentum)을 이용한 고차원 공 간 다중화 기술, RIS(Reconfigurable Intelligent Surface) 기술 뿐만 아니라, 6G 이동통신 기술의 주파수 효 율 향상 및 시스템 네트워크 개선을 위한 전이중화(Full Duplex) 기술, 위성(Satellite), AI(Artificial Intelligence)를 설계 단계에서부터 활용하고 종단간(End-to-End) AI 지원 기능을 내재화하여 시스템 최적화를 실현하는 AI 기반 통신 기술, 단말 연산 능력의 한계를 넘어서는 복잡도의 서비스를 초고성능 통신과 컴퓨팅 자 원을 활용하여 실현하는 차세대 분산 컴퓨팅 기술 등의 개발에 기반이 될 수 있을 것이다."}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "개시된 실시 예는 이동통신 시스템에서, 서비스를 효과적으로 제공할 수 있는 방법 및 장치를 제공하고자 한다. 본 개시는 네트워크 엔티티에서 트래픽을 처리하는 과정에서 혼잡한 상황이 발생할 경우, 상기 혼잡한 상황을 효과적으로 해결하는 것을 목적으로 한다. 본 발명에서 발명에서 이루고자 하는 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급"}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 2, "content": "하지 않은 또 다른 기술적 과제들은 아래의 기재로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자 에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상술된 바와 같은 논의를 바탕으로, 본 개시(disclosure)는 이동통신 시스템의 제어 신호 처리 방법으로서, 기 지국으로부터 전송되는 제1 제어 신호를 수신하는 단계; 상기 수신된 제1 제어 신호를 처리하는 단계; 및 상기 처리에 기반하여 생성된 제2 제어 신호를 상기 기지국으로 전송하는 단계를 포함할 수 있다."}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "개시된 실시 예는 이동통신 시스템에서 서비스를 효과적으로 제공할 수 있는 장치 및 방법을 제공한다. 구체적 으로, 본 개시는 서로 다른 미디어 타입의 패킷들이 멀티플렉싱 되어 단일 서비스 플로우를 통해 전송될 경우, 미디어 타입 별 패킷들의 특성을 고려한 구분 정보의 생성 및 할당을 효과적으로 수행할 수 있는 장치 및 방법 을 제공한다. 본 발명에서 얻을 수 있는 효과는 이상에서 언급한 효과들로 제한되지 않으며, 언급하지 않은 또 다른 효과들은 아래의 기재로부터 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 개시의 일 실시예를 첨부된 도면을 참조하여 상세히 설명한다. 본 개시를 설명함에 있어서 본 개시가 속하는 기술 분야에 익히 알려져 있고 본 개시와 직접적으로 관련이 없는 기술 내용에 대해서는 설명을 생략한다. 이는 불필요한 설명을 생략함으로써 본 개시의 요지를 흐리지 않고 더 욱 명확히 송신하기 위함이다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이 는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내 용을 토대로 내려져야 할 것이다. 마찬가지 이유로 첨부된 도면에 있어서 일부 구성요소는 과장되거나 생략되거나 개략적으로 도시되었다. 또한, 각 구성요소의 크기는 실제 크기를 전적으로 반영하는 것이 아니다. 각 도면에서 동일한 또는 대응하는 구성 요 소에는 동일한 참조 번호를 부여하였다. 본 개시의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 개시는 이하에서 개시되는 실시 예들에 한정되는 것이 아니라 서 로 다른 다양한 형태로 구현될 수 있으며, 단지 본 실시 예들은 본 개시의 개시가 완전하도록 하고, 본 개시가"}
{"patent_id": "10-2024-0109152", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "속하는 기술분야에서 통상의 지식을 가진 자에게 개시의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 개시는 청구항의 범주에 의해 정의될 뿐이다. 명세서 전체에 걸쳐 동일 참조 부호는 동일 구성 요소를 지칭한다. 이하, 기지국(base station: BS)은 단말의 자원 할당을 수행하는 주체로서, gNode B, eNode B, Node B, (또는 xNode B (여기서 x는 g, e를 포함하는 알파벳)), 무선 접속 유닛, 기지국 제어기, 위성 (satellite), 비행체 (airborn), 또는 네트워크 상의 노드 중 적어도 하나일 수 있다. 단말(user equipment: UE)은 MS (Mobile Station), 차량 (Vehicular), 위성 (satellite), 비행체 (airborn), 셀룰러폰, 스마트폰, 컴퓨터, 또는 통신기 능을 수행할 수 있는 멀티미디어 시스템을 포함할 수 있다. 본 개시에서 하향링크(Downlink, DL)는 기지국이 단말에게 전송하는 신호의 무선 전송경로이고, 상향링크(Uplink, UL)는 단말이 기국에게 전송하는 신호의 무선 전 송경로를 의미한다. 추가적으로 단말이 또 다른 단말에게 전송하는 신호의 무선 전송 경로를 의미하는 사이드링 크(sidelink, SL)가 존재할 수 있다. 이하 설명에서 사용되는 접속 노드(node)를 식별하기 위한 용어, 망 객체(network entity) 또는 NF(network function)들을 지칭하는 용어, 메시지들을 지칭하는 용어, 망 객체들 간 인터페이스를 지칭하는 용어, 다양한 식별 정보들을 지칭하는 용어 등은 설명의 편의를 위해 예시된 것이다. 따라서, 본 개시가 후술되는 용어들에 한정되는 것은 아니며, 동등한 기술적 의미를 가지는 대상을 지칭하는 다른 용어가 사용될 수 있다. 또한, 이하에서 LTE, LTE-A 또는 5G 시스템을 일 예로서 설명할 수도 있지만, 유사한 기술적 배경 또는 채널형 태를 갖는 여타의 통신시스템에도 본 개시의 실시예가 적용될 수 있다. 예를 들어 5G 이동통신 기술(혹은 new radio, NR) 이후에 개발되는 5G-Advance 또는 NR-Advance 또는 6세대 이동통신 기술(6G)이 이에 포함될 수 있 으며, 이하의 5G는 기존의 LTE, LTE-A 및 유사한 다른 서비스를 포함하는 개념일 수도 있다. 또한, 본 개시는 숙련된 기술적 지식을 가진 자의 판단으로써 본 개시의 범위를 크게 벗어나지 아니하는 범위에서 일부 변형을 통해 다른 통신시스템에도 적용될 수 있다. 이때, 처리 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수행될 수 있음을 이해할 수 있을 것이다. 이들 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기 타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있으므로, 컴퓨터 또는 기타 프로그램 가능 한 데이터 프로세싱 장비의 프로세서를 통해 수행되는 그 인스트럭션들이 흐름도 블록(들)에서 설명된 기능들을 수행하는 수단을 생성하게 된다. 이들 컴퓨터 프로그램 인스트럭션들은 특정 방식으로 기능을 구현하기 위해 컴 퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 지향할 수 있는 컴퓨터 이용 가능 또는 컴퓨터 판독 가능 메모리에 저장되는 것도 가능하므로, 그 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메모리에 저장된 인스트 럭션들은 흐름도 블록(들)에서 설명된 기능을 수행하는 인스트럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭션들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에 탑재 되는 것도 가능하므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에서 일련의 동작 단계들이 수행되어 컴퓨터로 실행되는 프로세스를 생성해서 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 수행하는 인스트럭션들은 흐름도 블록(들)에서 설명된 기능들을 실행하기 위한 단계들을 제공하는 것도 가능하 다. 또한, 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 또, 몇 가지 대체 실행 예들에서는 블록들에서 언급된 기 능들이 순서를 벗어나서 발생하는 것도 가능함을 주목해야 한다. 예를 들면, 잇달아 도시되어 있는 두 개의 블 록들은 사실 실질적으로 동시에 수행되는 것도 가능하고 또는 그 블록들이 때때로 해당하는 기능에 따라 역순으 로 수행되는 것도 가능하다. 이때, 본 실시예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 FPGA(Field Programmable Gate Array) 또는 ASIC(Application Specific Integrated Circuit)과 같은 하드웨어 구성요소를 의미하며, '~부'는 어떤 역할들 을 수행한다. 그렇지만 '~부'는 소프트웨어 또는 하드웨어에 한정되는 의미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구성될 수도 있다. 따라서, 일 예로서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구성요소들 및 태 스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레 이들, 및 변수들을 포함한다. 구성요소들과 '~부'들 안에서 제공되는 기능은 더 작은 수의 구성요소들 및 '~ 부'들로 결합되거나 추가적인 구성요소들과 '~부'들로 더 분리될 수 있다. 뿐만 아니라, 구성요소들 및 '~부'들 은 디바이스 또는 보안 멀티미디어카드 내의 하나 또는 그 이상의 CPU들을 재생시키도록 구현될 수도 있다. 또 한 실시예에서 '~부'는 하나 이상의 프로세서를 포함할 수 있다. 셀룰러 이동통신 표준을 담당하는 3GPP는 4G LTE 시스템에서 5G 시스템으로의 진화를 꾀하기 위해 새로운 코어 네트워크 (Core Network) 구조를 5G Core (5GC) 라는 이름으로 명명하고 표준화를 진행하고 있다. 5GC는 4G를 위한 네트워크 코어인 진화된 패킷 코어 (Evolved Packet Core: EPC) 대비 다음과 같은 차별화된 기능을 지원한 다. 이하 설명의 편의를 위하여, 3GPP(3rd generation partnership project long term evolution) 규격에서 정의하 고 있는 용어 및 명칭들이 일부 사용될 수 있다. 하지만, 본 개시가 상기 용어 및 명칭들에 의해 한정되는 것은아니며, 다른 규격에 따르는 시스템에도 동일하게 적용될 수 있다. 하기에서 본 발명을 설명함에 있어 관련된 공지 기능 또는 구성에 대한 구체적인 설명이 본 발명의 요지를 불필 요하게 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명을 생략할 것이다. 이하 첨부된 도면을 참조하여 본 발명의 실시 예를 설명하기로 한다. 메타버스(metaverse) 및 확장 현실(extended reality: XR) 애플리케이션(application)의 경우, 단말이 Downlink 또는 Uplink 로 많은 양의 트래픽(traffic)을 전송하여야 한다. 따라서 트래픽을 효과적으로 처리하는 것은 기존의 애플리케이션과 달리 해결해야 하는 중요한 기술적인 문제가 될 수 있다. 기존의 연구들은 단말에 다운링크(downlink) 트래픽을 효과적으로 전송하는 것에 중점을 두어왔다. 이와 달리 메타버스/XR 애플리케이션의 경우, 각 패킷별로 서비스 특성을 고려하여 효과적으로 다운링크(downlink)의 트래 픽을 처리 하는 것이 새로운 과제이다. 따라서 본 개시에서는 네트워크 엔티티 (예를 들어, RAN) 에서 트래픽을 처리하는 과정에서 혼잡한 상황이 발생 할 경우, 상기 혼잡한 상황을 해결하기 위한 방법을 제안한다. 기존에는 스케쥴러(scheduler)에서 패킷을 랜덤 하게 드랍(drop)을 하는 방식이였다. 그러나, 본 개시의 XR 서비스에서는 어플리케이션 기능 (Application Function: AF) 엔티티(entity) 또는 어플리케이션 서버 (Application Server: AS) 등을 통해 현재 서비스에서 제공되고 있는 트래픽 특성 정보를 이용할 수 있다. 구체적으로, 패킷 드랍 시 동일한 특성을 가지는 패킷들을 단위(예를 들어, PDU(protocol data unit) set)로 처리할 수 있다. 이때, 서비스 되는 패킷들의 중요도 등을 고 려할 수 있다. 그 결과, 네트워크에서 혼잡한 상황이 발생할 경우 이를 효율적으로 처리할 수 있을 것이다. 본 개시에서는 UPF(user plane function)에서 패킷 처리를 하는 방법을 제안한다. 기존에는 데이터를 단순 5- tuple을 이용하여 포워딩하는 방식을 이용하였다. 그러나, 본 개시에서는 서비스 특성을 이용하여 동일한 특성 을 가지는 패킷들에 대하여 그룹화 처리를 하는 방법을 제안한다. 구체적으로, UPF는 실제 데이터의 RTP(real- time transport protocol) 및 NAL(network adaptation layer) 유닛 헤더(unit header) 정보를 인지 추출할 수 있다. UPF는 해당 인지 및 추출된 정보에 기반하여 동일한 특성을 가지는 패킷들에 대하여 단위 별로 그룹화 (PDU set)하는 과정을 수행할 수 있다. UPF는 해당 인지 및 추출된 정보 또는 AS(application server)로부터 받은 정보에 기반하여 PDU set 정보 (PDU set information)를 생성할 수 있다. UPF는 생성된 PDU set 정보를 GTP(GPRS Tunnelling Protocol)-U 헤더를 통해 RAN에 제공할 수 있다. 이후, 본 개시에 따른 RAN은 상기 제공 된 PDU set 정보에 기반하여 무선자원을 단말에게 스케쥴링을 하는 방법을 제공한다. 본 개시에 따르면, 통신 시스템에서 서비스 트래픽 특성을 고려하여 동일한 특성을 가지는 패킷들을 처리하기 위한 정보를 생성하는 장치 및 방법이 제공될 수 있다. 본 개시에 따르면, 통신 시스템에서 서로 다른 미디어 특성을 가지는 패킷들이 하나의 서비스 플로우를 통해 전 송될 수 있다. 이 경우, UPF는 서비스 트래픽 특성을 고려하여 동일한 특성을 가지는 패킷들에 대하여 각 패킷 별로 이를 처리하기 위한 정보 (예를 들어, PDU set information)를 RAN으로 전송할 수 있다. 또한 하나의 서비 스 플로우 내에서 서로 다른 미디어 특성을 가지는 패킷들이 RAN으로 전송될 경우, UPF는 서로 다른 미디어 특 성을 가지는 패킷들이 RAN으로 전송된다는 사실을 PCF(policy control function)에게 알려줄 수 있다. 이때, UPF에서 하나의 서비스 플로우 내의 패킷들을 검출할 경우, 해당 패킷들을 서로 다른 QoS(quality of service) 플로우로 할당하도록 미디어 타입 별 QFI(QoS flow indentifier) 할당 정보를 포함하는 PCC(primary component carrier) 규칙을 생성을 요청할 수 있다. 상기 PCC 규칙 생성 요청은 SMF에 송신될 수 있다. 해당 PCC 규칙을 수신한 SMF는 UPF로 동일 PDR(packet detection rule) 내에 별도의 QER(QoS enforcement rules) 정보를 송신할 수 있다. 미디어 타입 별 QFI 할당이 수행된 경우, 단일 서비스 플로우로 전송되는 패킷들을 별도의 QoS 플로우 로 맵핑하여 미디어 특성 별 QFI 할당 및 관련 QoS 정보에 기반한 RAN에서의 스케쥴링 수행과 관련된 정보를 송 신할 수 있다. 본 개시에 따르면, 무선 통신 시스템에서 서로 다른 미디어 특성을 가지는 패킷들이 하나의 서비스 플로우를 통 해 전송될 경우, 미디어 특성을 고려하여 단일 QoS 플로우 내의 패킷들을 구분하기 위한 DSCP 마킹 동작이 수행 될 수 있다. AF는 프로토콜 디스크립션을 통해 해당 서비스 플로우 내의 패킷들이 서로 다른 미디어 타입을 가 지는 멀티플렉싱 된 서비스 플로우이며 해당 서비스 플로우 내의 어떠한 미디어 타입 (예를 들어, 비디오와 오 디오) 들이 전송이 되는지 등과 관련된 정보를 PCF로 송신할 수 있다. 이때, 서비스 사업자는 동일 QoS 플로우 내의 미디어 패킷들의 정보를 구분하기 위한 서비스 지원 지시자 정보를 함께 PCF로 송신할 수 있다. 이를 수신 한 PCF는 DSCP 마킹을 통한 동일 QoS 플로우 내의 미디어 패킷들의 구분을 수행하기 위한 PCC 규칙 업데이트 또는 생성 동작을 수행할 수 있다. PCF로부터 해당 DSCP 마킹 관련 요청 지시자 정보를 포함한 PCC 규칙을 수신한 SMF는 해당 DSCP 마킹에 사용할 5QI 및 ARP 정보에 기반하여 DSCP 값을 결정할 수 있다. SMF는 해당 DSCP 마킹 의 동작 요청을 위해 DSCP 마킹 관련 정보를 FAR 내 포함하여 UPF로 송신할 수 있다. UPF는 해당 트래픽을 검출 하여 미디어 타입별 패킷들의 IP 헤더에 DSCP 정보를 마킹하여 RAN으로 송신할 수 있다. RAN은 DSCP 값과 연동 된 QFI 맵핑 정보를 SMF로부터 송신받을 수 있다. 상기 정보에 기반하여 RAN은 DSCP 마킹 정보에 기반하여 적절 한 패킷들의 QoS 정보를 맵핑하여 RAN 스케쥴링 시 관련 정보를 활용할 수 있다. 본 개시에 따르면, 무선 통신 시스템에서 PCF 엔티티에 의해 수행되는 방법은, QoS 세션 관련 메시지를 AF로부 터 수신하는 동작; 및 PCC 규칙 정보를 SMF에게 전송하는 동작을 포함하는 방법이 제안된다. 구체적으로, PCF 엔티티는 다운로드 패킷들 중 트래픽 특성으로 분류되는 패킷들의 단위인 PDU(protocol data unit) 셋(set)에 기반하여 RAN(radio access network) 스케줄링을 지원할 수 있다. 또한, QoS 세션 관련 메시지는 Protocol description 메시지 및 멀티플렉싱 된 서비스 플로우 내의 패킷들을 미 디어 특성 정보에 기반하여 RAN에서 구분하기 위한 동작을 요청하는 지시자 중 적어도 하나를 포함할 수 있다. 또한, protocol description 메시지는 코덱 정보 (Codec type), 샘플링 레이트 (Sampling rate) 등의 RTP 페이 로드 타입 (Payload type) 정보, 서비스 플로우 내의 패킷들이 PDU set information 을 RTP header extension 내에 포함하고 있는지 지시자 (PDU set information supported for all packet within service flow), 멀티플 렉싱 된 서로 다른 미디어 특성을 가지는 패킷들이 단일 서비스 플로우 내로 전송됨을 알려주는 정보 중 적어도 하나를 포함할 수 있다. 또한, PCC 규칙 정보는 멀티플렉싱 된 서비스 플로우 내의 미디어 특성에 기반하여 할당된 QoS 프로화일 정보 및 서로 다른 미디어 특성을 가지는 패킷들을 처리를 위한 PDR(packet detection rule) 중 적어도 하나를 포함 할 수 있다. 본 개시의 일 실시예에 따르면, 무선 통신 시스템에서 AF는 한 개 또는 한 개 이상의 미디어들로 구성된 서비스 제공 시 해당 서비스 특성을 고려하여 RAN에서 PDU set 기반의 스케쥴링을 지원을 요청하기 위하여 해당 서비스 플로우를 구성하는 한 개 또는 한 개 이상의 미디어들의 특성 정보를 포함하는 프로토콜 디스크립션을 제공할 수 있다. PCF는 미디어들의 특성 정보를 포함하는 프로토콜 디스크립션을 바탕으로 해당 서비스 플로우 내 여러 미디어 타입이 멀티플렉싱 되었다는 지시자 정보가 있을 경우 이를 고려한 정책 업데이트를 결정할 수 있다. 해 당 PCC 규칙 내에는 UPF에서 하나의 서비스 플로우 내의 다른 미디어 타입의 패킷들을 처리를 위한 지시자 정보 와 PDU set information 의 생성 또는 패킷 헤더 내에 송신되는 PDU set information을 인지하기 위한 정보, 패킷을 구분하기 위한 미디어 페이로드 타입 정보를 포함하는 프로토콜 디스크립션을 포함할 수 있다. PCF는 이 후 SMF로 Sub QoS 플로우 할당을 위한 지시자 정보를 포함하는 해당 생성 또는 업데이트 된 PCC 규칙 (PCC rule)을 제공하여 UPF에서 해당 Sub QoS 플로우 할당 동작의 수행을 요청하기 위한 정보의 생성 및 송신을 요청 할 수 있다. Sub QoS 플로우 할당 동작은 UPF로 송신되는 하나의 서비스 데이터 플로우내의 미디어 타입별 패킷 을 각각의 QoS 플로우로 맵핑하는 Sub QoS 플로우 생성 요청 동작을 포함할 수 있다. 또한 Sub QoS 플로우 할당 동작은 UPF로 송신되는 하나의 서비스 데이터 플로우내의 미디어 타입별 패킷 별로 SMF에서 생성한 DSCP 값을 바탕으로 패킷별 DSCP value marking 동작을 통하여 동일한 QoS 플로우 내의 패킷들을 구분하기 위한 정보를 마 킹하는 동작을 포함할 수 있다. 본 발명의 실시 예에서 Sub QoS 플로우 할당 동작은 UPF로 송신되는 하나의 서비스 데이터 플로우 내의 미디어 타입별 패킷을 각각의 QoS 플로우로 맵핑하는 sub QoS 플로우 생성 요청 동작의 경우, PCF에서 PCC 규칙 생성 시 미디어 타입에 맞는 적절한 QFI 정보를 할당하며 패킷 별 QFI 정보와 서브 QoS 플로우 생성 지시자 정보를 포함하는 PCC 규칙 내에 포함하여 SMF로 송신할 수 있다. 해당 QFI 정보는 PCF에서 비디오 패킷과 오디오 패킷 의 서비스 특성을 고려하여 5QI 값을 할당한 정보를 송신 받아 활용할 수 있다. 또한 서비스 플로우 내의 미디 어 타입에 따라 여러가지 5QI 값이 할당 될 수 있으며 사업자 정책에 따라 동일한 비디오 또는 오디오 패킷에도 서로 다른 5QI 값을 할당하고 이를 고려한 sub QoS 플로우 생성을 결정할 수 있다. 해당 PCC 규칙 정보를 수신 한 SMF는 UPF에 Packet detection rule (PDR)을 생성시 동일 PDR 내에 프로토콜 디스크립션 정보에 기반하여 미디어 패킷 별 QoS 플로우 할당 정보를 가지는 QER을 각각 생성할 수 있다. 만약 하나의 서비스 플로우 내에 비디오 및 오디오 패킷이 멀티플렉싱 되어 전송될 경우 해당 패킷의 검출을 위한 PDR 정보 내에 프로토콜 디스 크립션 정보를 활용하여 비디오 패킷 및 오디오 패킷을 구분하여 검출하며 해당 패킷들을 각각 비디오 및 오디 오의 특성을 가지는 QoS 플로우로 포워딩하며 해당 QoS 플로우에 맞는 QFI 정보를 마킹할 수 있다. 이후 SMF는 각 서브 QoS 플로우의 QFI 정보를 포함한 QoS profile을 RAN으로 송신하여 RAN에서 서브 QoS 플로우의 정보를활용한 스케쥴링 동작을 수행할 수 있다. 추가적으로 SMF는 QoS rule로 해당 서브 QoS 플로우의 정보를 UE로 송 신할 수 있다. 본 발명의 실시 예에서 Sub QoS 플로우 할당 동작은 UPF로 송신되는 하나의 서비스 데이터 플로우 내의 미디어 타입별 패킷을 하나의 QoS 플로우 내의 패킷들의 미디어 타입을 고려하여 DSCP 마킹을 통한 패킷들의 구분 동작 을 수행할 수 있다. 서비스 사업자 또는 네트워크 사업자의 정책 및 설정에 따라 만약 하나의 서비스 데이터 플 로우를 별도의 sub QoS 플로우를 사용하지 않고 동일한 QoS 플로우를 사용하지만 동일 QoS 플로우 내의 sub QoS 플로우 할당을 요청할 수 있다. 이 때, PCF는 해당 동일 QoS 플로우 내의 미디어 타입별 패킷 구분을 위하여 DSCP 마킹 동작의 수행을 결정할 수 있다. 이후 PCF는 DSCP 마킹을 통한 sub QoS 플로우 구분 지시자 및 해당 서비스 플로우 내의 미디어 특성을 고려하여 관련 5QI와 ARP 정보를 PCC 규칙에 포함하여 이를 SMF로 송신할 수 있다. 상기 DSCP 마킹 지시자를 수신한 SMF는 DSCP 마킹을 위하여 5QI 와 ARP 정보에 기반하여 DSCP 값을 결정 하거나 네트워크 사업자 별로 제공하는 별도의 정형화된 형태의 DSCP 값 정보 (예를 들어, video 의 경우 DSCP value 0, 오디오의 경우 DSCP value 1)를 활용할 수 있다. DSCP 값이 결정 되었으면 SMF는 해당 DSCP 마킹 동 작 요청 및 각 패킷 별 DSCP 값 정보와 프로토콜 디스크립션 정보에 기반하여 해당 패킷을 구분하기 위한 검출 규칙 정보를 PDR내에 포함하여 이를 UPF로 송신할 수 있다. UPF는 상기 멀티플렉싱 된 서비스 플로우가 송신될 경우 서비스 플로우 내의 미디어 타입 별 패킷들을 검출한 뒤 해당 미디어 타입 별 DSCP 값을 마킹하여 이를 RAN으로 송신할 수 있다. SMF는 또한 DSCP 값과 맵핑되는 QFI 정보를 RAN으로 송신할 수 있다. RAN에서는 DSCP 값과 QoS 맵핑 정보에 기반하여 RAN으로 송신되는 특정 QoS 플로우 내의 패킷의 DSCP 값을 보고 각 패킷들의 QoS 맵핑 동작을 수행할 수 있다. 이후 RAN은 패킷별 QoS 맵핑된 정보에 기반하여 각 패킷의 QoS 특성을 파악하 여 이를 고려한 RAN 스케쥴링 동작을 수행할 수 있다. 5GC에서는 네트워크 슬라이스 (network slice) 기능이 도입된다. 5GC는 5G의 요구조건을 충족하기 위하여 다양 한 종류의 단말 타입 및 서비스를 지원할 수 있어야 한다; 5G의 요구조건으로는 예를 들어, 초광대역 이동 통신 (enhanced Mobile Broadband: eMBB), 초고신뢰 저지연 통신 (Ultra Reliable Low Latency Communications: URLLC), 또는 대규모 사물 통신 (massive Machine Type Communications: mMTC) 등이 있을 수 있다. 단말 또는 서비스는 어떠한 서비스를 지원하는지에 따라 각각 코어 네트워크에 요구하는 요구조건이 상이할 수 있다. 예를 들어, eMBB 서비스의 경우에는 높은 데이터 전송 속도 (data rate)를 요구할 수 있다. URLLC 서비스 의 경우에는 높은 안정성과 낮은 지연을 요구할 수 있다. 그 결과, 다양한 서비스 지원에 따른 5G의 요구조건을 만족하기 위해 네트워크 슬라이스 (network slice) 기술이 제안되었다. 구체적으로, 네트워크 슬라이싱은 하나의 물리적인 네트워크를 가상화(virtualization)하여 여러 개의 논리적인 네트워크들(예를 들어, 네트워크 슬라이스들)을 활성화 하는 방법을 의미할 수 있다. 네트워크 슬라이싱을 통해 활성화된 각각의 네트워크 슬라이스는 네트워크 슬라이스 인스턴스(network slice instance: NSI)라 칭할 수 있 다. 각 NSI 는 서로 다른 특성을 가질 수 있다. 이동통신 사업자는 각 NSI마다 NSI의 특성에 맞는 네트워크 기 능(network function: NF)을 구성함으로써 단말 또는 서비스에 따른 다양한 서비스 요구조건을 만족시킬 수 있 다. 예를 들어, 이동통신 사업자는 각 단말마다 요구하는 서비스의 특성에 맞는 NSI를 각 단말에게 할당하여 다 양한 5G 서비스들 (예를 들어, eMBB, URLLC, 또는 mMTC)을 효율적으로 지원 할 수 있다. 5GC는 이동성 관리 기능(mobility management function)과 세션 관리 기능(session management function)의 분 리를 통해 네트워크 가상화 패러다임(paradigm)을 지원 할 수 있다. 4G LTE(long term evolution)에서의 모든 단말들은 등록, 인증, 이동성 관리 및 세션 관리 기능을 담당하는 이동성 관리 엔티티(mobility management entity: MME) 라는 단일 코어 엔티티와의 시그널링 교환을 통해서 네트워크로부터 서비스를 제공받을 수 있다. 그러나 5G에서는 단말들의 수가 폭발적으로 늘어나고 (예를 들어, MTC(machine type communications)를 수행하 는 단말들) 단말들의 타입에 따라 지원해야 하는 이동성 및 트래픽 또는 세션 특성이 세분화될 수 있다. 이에 따라 단일 엔티티(예를 들어, MME)에서 모든 기능들을 지원하게 되면 필요한 기능별로 엔티티를 추가하는 확장 성(scalability)이 떨어질 수 밖에 없다. 따라서, 제어 평면을 담당하는 코어 엔티티의 기능 또는 구현 복잡도 와 시그널링 부하 측면에서 확장성 개선을 위해 이동성 관리 기능과 세션 관리 기능을 분리하는 구조를 기반으 로 다양한 기능들이 개발되고 있다. 도 1은 본 개시의 일 실시예에 따른 5G 시스템의 네트워크 구조 및 인터페이스를 도시한 도면이다. 도 1의 5G 시스템의 네트워크 구조에 포함된 네트워크 엔티티(entity)는 시스템 구현에 따라 네트워크 기능 (network function: NF)를 포함할 수 있다.도 1을 참조하면, 5G 시스템의 네트워크 구조는 다양한 네트워크 엔티티들을 포함할 수 있다. 예를 들어, 5G 시스템은 인증 서버 기능(authentication server function: AUSF) 엔티티, 액세스 및 이동성 관 리 기능((core) access and mobility management function: AMF) 엔티티, 세션 관리 기능(session management function: SMF) 엔티티, 정책 제어 기능(policy control function: PCF) 엔티티, 애플리 케이션 기능(application function: AF) 엔티티, 통합된 데이터 관리(unified data management: UDM) 엔 티티, 데이터 네트워크(data network: DN), 네트워크 노출 기능(network exposure function: NEF) 엔티티, 네트워크 슬라이싱 선택 기능(network slicing selection function; NSSF) 엔티티, 사용자 평면 기능(user plane function: UPF) 엔티티, (무선) 액세스 네트워크((radio) access network: (R)AN), 또는 단말 (예를 들어, 사용자 장치(user equipment: UE)) 중 적어도 하나를 포함할 수 있 다. 5G 시스템의 각 NF 엔티티들은 다음과 같은 기능을 지원할 수 있다. AUSF는 UE의 인증을 위한 데이터를 처리하고 저장할 수 있다. AMF는 UE 단위의 접속 및 이동성 관리를 위한 기능을 제공할 수 있다. 기본적으로 UE는 UE 하나 당 하나의 AMF에 연결될 수 있다. 구체적으로, AMF는 3GPP 액세스 네트워크들 간의 이동성을 위한 CN(core network) 노드 간 시그널링, 무선 액세스 네트워크(radio access network: RAN) CP(control plane) 인터페이스(예를 들어, N2 인터페이스)의 종 단(termination), NAS(non access stratum) 시그널링의 종단(예를 들어, N1 인터페이스), NAS 시그널링 보안 (예를 들어, NAS 암호화(ciphering) 및 무결성 보호(integrity protection)), AS 보안 제어, 등록 관리(예를 들어, 등록 영역(registration area) 관리), 연결 관리, 아이들 모드 UE 접근성(reachability) (예를 들어, 페 이징 재전송의 제어 및 수행을 포함하는), 이동성 관리 제어(예를 들어, 가입 및 정책), 인트라-시스템 이동성 및 인터-시스템 이동성 지원, 네트워크 슬라이싱의 지원, SMF 선택, 합법적 감청(lawful intercept)(예를 들어, AMF 이벤트 및 LI 시스템으로의 인터페이스), UE와 SMF 간의 세션 관리(session management: SM) 메시지의 전 달 제공, SM 메시지 라우팅을 위한 트랜스패런트 프록시(transparent proxy), 액세스 인증(access authentication), 로밍 권한 체크를 포함한 액세스 허가(access authorization), UE와 SMSF 간의 SMS 메시지의 전달 제공, 보안 앵커 기능(security anchor function: SAF) 또는 보안 컨텍스트 관리(security context management: SCM) 중 적어도 하나의 기능을 지원할 수 있다. AMF 엔티티의 일부 또는 전체의 기능들은 하 나의 AMF 엔티티의 단일 인스턴스(instance) 내에서 지원될 수 있다. DN은 운영자 서비스, 인터넷 접속 또는 서드파티(3rd party) 서비스 중 적어도 하나를 의미할 수 있다. DN은 UPF 엔티티로 하향링크 프로토콜 데이터 유닛(protocol data unit: PDU)을 전송하거나, UE로부터 전송된 PDU를 UPF 엔티티로부터 수신할 수 있다. PCF 엔티티는 애플리케이션 서버로부터 패킷 흐름에 대한 정보를 수신할 수 있다. 상기 수신한 정보를 통 해 PCF 엔티티은 이동성 관리, 세션 관리 중 적어도 하나의 정책을 결정하는 기능을 제공할 수 있다. 구체적으로, PCF 엔티티는 네트워크 동작을 통제하기 위해 단일화된 정책 프레임워크 지원, 제어평면 기능 엔티티(들)(예를 들어, AMF 엔티티, SMF 엔티티 등)이 정책 규칙을 시행할 수 있도록 하는 정책 규칙 제공, 사 용자 데이터 저장소(user data repository: UDR) 내 정책 결정을 위해 관련된 가입 정보에 액세스하기 위한 프 론트 엔드(front end) 구현 중 적어도 하나의 기능을 지원할 수 있다. SMF 엔티티는 세션 관리 기능을 제공할 수 있다. 이때, UE가 다수 개의 세션을 가지는 경우 각 세션 별로 서로 다른 SMF 엔티티에 의해 관리될 수 있다. 구체적으로, SMF 엔티티는 세션 관리(예를 들어, UPF 엔티티와 (R)AN 노드 간의 터널(tunnel) 유지를 포함하는 세션 확립, 수정 및 해지), UE IP(internet protocol) 주소 할당 및 관리(예를 들어, 선택적 인증을 포함하는), UP 기능의 선택 및 제어, UPF 엔티티에서의 트래픽을 적절한 목적지로 라우팅하기 위한 트래픽 스티어링(traffic steering) 설정, 정책 제어 기능(policy control functions)를 향한 인터페이스의 종 단, 정책 및 QoS(quality of service)의 제어 부분 시행, 합법적 감청(lawful intercept)(예를 들어, SM 이벤 트 및 LI 시스템으로의 인터페이스), NAS 메시지의 SM 부분의 종단, 하향링크 데이터 통지(downlink data notification), AN 특정 SM 정보의 개시자(예를 들어, AMF 엔티티를 경유하여 N2를 통해 (R)AN에게 송신하는 과정을 포함하는), 세션의 SSC (session and service continuity) 모드 결정, 로밍 기능 중 적어도 하나의 기능을 지원할 수 있다. SMF 엔티티의 일부 또는 전체의 기능들은 하나의 SMF 엔티티의 단일 인스턴스(instance) 내에서 지원될 수 있다. UDM 엔티티는 사용자의 가입 데이터, 정책 데이터 중 적어도 하나를 저장할 수 있다. UDM 엔티티는 2 개의 부분, 예를 들어 애플리케이션 프론트 엔드(front end: FE) 및 사용자 데이터 저장소(user data repository: UDR) 중 적어도 하나를 포함할 수 있다. FE는 위치 관리, 가입 관리, 자격 증명(credential)의 처리 중 적어도 하나를 담당하는 UDM FE와 정책 제어를 담당하는 PCF 엔티티를 포함할 수 있다. UDR은 UDM-FE에 의해 제공되는 기능들을 위해 요구되는 데이터 및 PCF 엔티티에 의해 요구되는 정책 프로필을 저장할 수 있다. UDR 내 저장되는 데이터는 가입 식별자, 보안 자격 증 명(security credential), 액세스, 이동성 관련 가입 데이터, 세션 관련 가입 데이터를 포함하는 사용자 가입 데이터 및 정책 데이터 중 적어도 하나를 포함한다. UDM-FE는 UDR에 저장된 가입 정보에의 액세스, 인증 자격 증명 처리(authentication credential processing), 사용자 식별자 핸들링(user identification handling), 액 세스 인증, 등록 또는 이동성 관리, 가입 관리, SMS 관리 중 적어도 하나의 기능을 지원할 수 있다. UPF 엔티티는 DN으로부터 수신한 하향링크 PDU를 (R)AN을 경유하여 UE에게 송신할 수 있 다. 또한, (R)AN을 경유하여 UE로부터 수신한 상향링크 PDU를 DN으로 송신할 수 있다. 구체적으로, UPF 엔티티는 인트라(intra) 또는 인터(inter) RAT(radio access technology) 이동성을 위한 앵커 포인트, 데이터 네트워크(Data Network)로의 상호연결(interconnect)을 위한 외부 PDU 세션 포인트, 패킷 라우팅 및 포워딩, 패킷 검사(inspection) 및 정책 규칙 시행의 사용자 평면 부분, 합법적 감청(lawful intercept), 트래픽 사용량 보고, 데이터 네트워크로의 트래픽 플로우 라우팅을 지원하기 위한 상향링크 분류자 (classifier), 멀티-홈(multi-homed) PDU 세션을 지원하기 위한 브랜치 포인트(branching point), 사용자 평면 을 위한 QoS 핸들링(handling)(예를 들어, 패킷 필터링, 게이팅(gating), 상향링크/하향링크 레이트 시행 등), 상향링크 트래픽 검증 (예를 들어, 서비스 데이터 플로우(service data flow: SDF) 및 QoS 플로우 간 SDF 매핑), 상향링크 및 하향링크 내 송신 레벨(transport level) 패킷 마킹, 하향링크 패킷 버퍼링 및 하향링크 데 이터 통지 트리거링 기능 중 적어도 하나의 기능을 지원할 수 있다. UPF 엔티티의 일부 또는 전체의 기능 들은 하나의 UPF의 단일 인스턴스(instance) 내에서 지원될 수 있다. AF 엔티티는 서비스 제공을 위해 3GPP 코어 네트워크와 상호 동작할 수 있다. 구체적으로, AF 엔티티은 트래픽 라우팅 상 애플리케이션 영향, 네트워크 능력 노출(network capability exposure)에 대한 접근, 정책 제어를 위한 정책 프레임워크와의 상호동작 중 적어도 하나의 기능에 대한 지원을 할 수 있다. (R)AN은 4G 무선 액세스 기술의 진화된 버전인 진화된 E-UTRA(evolved E-UTRA)와 새로운 무선 액세스 기 술(new radio: NR)(예를 들어, gNB)을 모두 지원하는 새로운 무선 액세스 네트워크를 총칭할 수 있다. gNB은 무선 자원 관리를 위한 기능들, IP(internet protocol) 헤더 압축, 사용자 데이터 스트링 의 암호화 (encryption) 및 무결성 보호(integrity protection), UE에게 제공된 정보로부터 AMF로의 라우팅이 결정되지 않아 UE의 어태치(attachment) 시 AMF의 선택, UPF(들)로의 사용자 평면 데이터 라우팅, AMF로의 제어 평면 정 보 라우팅, 연결 셋업 및 해지, 페이징 메시지의 스케줄링 및 전송(예를 들어, AMF로부터 발생된 페이징 메시지), 시스템 브로드캐스트(broadcast) 정보의 스케줄링 및 전송(예를 들어, AMF 또는 운영 및 유지 (operating and maintenance: O&M)로부터 발생된 시스템 브로드캐스트 정보), 이동성 및 스케줄링을 위한 측정 및 측정 보고 설정, 상향링크에서의 전달 레벨 패킷 마킹(transport level packet marking), 세션 관리, 네트 워크 슬라이싱의 지원, QoS 흐름 관리 및 데이터 무선 베어러로의 매핑, 비활동 모드(inactive mode)인 UE의 지 원, NAS 메시지의 분배 기능, NAS 노드 선택 기능, 무선 액세스 네트워크 공유, 이중 연결성(dual connectivity), NR과 E-UTRA 간의 밀접한 상호동작(tight interworking) 중 적어도 하나의 기능을 지원할 수 있다. gNB는 무선 자원 관리를 위한 기능들로 예를 들어, 무선 베어러 제어(radio bearer control), 무선 허락 제어 (radio admission control), 연결 이동성 제어(connection mobility control), 및 상향링크 또는 하향링크에서 UE에게 자원의 동적 할당(dynamic allocation of resources)(예를 들어, 스케줄링) 중 적어도 하나의 기능을 지원할 수 있다. UE는 사용자 기기를 의미할 수 있다. 사용자 장치는 단말(terminal), ME(mobile equipment), MS(mobile station) 중 적어도 하나의 용어로 언급될 수 있다. 또한, 사용자 장치는 노트북, 휴대폰, PDA(personal digital assistant), 스마트폰, 멀티미디어 기기 등과 같은 휴대 가능한 기기일 수 있다. 또한, PC(personalcomputer), 차량 탑재 장치와 같이 휴대 불가능한 기기일 수 있다. NEF는 3GPP 네트워크 기능들에 의해 제공되는 기능들을 안전하게 노출하기 위한 수단을 제공할 수 있다. 구체적으로, NEF는 제3자(3rd party), 내부 노출(internal exposure) 또는 재노출(re-exposure), 애플리 케이션 기능, 에지 컴퓨팅(Edge Computing)을 위한 서비스들 및 능력들을 안전하게 노출하기 위한 수단을 제공 할 수 있다. NEF는 다른 NF(들)로부터 정보(예를 들어, 다른 NF(들)의 노출된 능력(들)에 기반한 정보)를 수신할 수 있다. NEF는 데이터 저장 네트워크 기능으로의 표준화된 인터페이스를 이용하여 구조화된 데이 터로서 수신된 정보를 저장할 수 있다. 저장된 정보는 NEF 엔티티에 의해 다른 NF 엔티티(들) 및 AF 엔티 티(들)에게 재노출(re-expose)되고, 분석 등과 같은 다른 목적으로 이용될 수 있다. NRF는 서비스 디스커버리 기능을 지원할 수 있다. NRF는 NF 인스턴스로부터 NF 디스커버리 요청 수신 할 수 있다. 또한, 발견된 NF 인스턴스의 정보를 NF 인스턴스에게 제공할 수 있다. 또한, 이용 가능한 NF 인스 턴스들과 그들이 지원하는 서비스를 유지할 수 있다. 한편, 도 1에서는 설명의 편의상 UE가 하나의 PDU 세션을 이용하여 하나의 DN에 엑세스하는 경우에 대한 참조 모델을 예시하나, 본 개시는 이에 한정되지 않는다. UE는 다중의 PDU 세션을 이용하여 2개 이상의(예를 들어, 지역적인(local) 및 중심되는(central)) 데이터 네트워크에 동시에 액세스할 수 있다. 이때, 서로 다른 PDU 세션을 위해 2개 이상의 SMF들이 선택될 수 있다. 다만, 각 SMF는 PDU 세션 내 지역적인 UPF 및 중심되는 UPF를 모두 제어할 수 있는 능력을 가질 수 있다. 또한, UE는 단일의 PDU 세션 내에서 제공되는 2개 이상의(예를 들어, 지역적인 및 중심되는) 데이터 네트 워크에 동시에 액세스할 수 있다. 3GPP 시스템에서는 5G 시스템 내 여러 NF들 간을 연결하는 개념적인 링크를 참조 포인트(reference point)라고 정의할 수 있다. 예를 들어, 도 1의 5G 시스템에 포함된 참조 포인트(들)은 다음과 같을 수 있다. - N1: UE와 AMF간의 참조 포인트 - N2: (R)AN과 AMF간의 참조 포인트 - N3: (R)AN과 UPF간의 참조 포인트 - N4: SMF와 UPF간의 참조 포인트 - N5: PCF와 AF간의 참조 포인트 - N6: UPF와 DN간의 참조 포인트 - N7: SMF와 PCF간의 참조 포인트 - N8: UDM과 AMF간의 참조 포인트 - N9: 2개의 코어 UPF들 간의 참조 포인트 - N10: UDM과 SMF간의 참조 포인트 - N11: AMF와 SMF간의 참조 포인트 - N12: AMF와 AUSF간의 참조 포인트 - N13: UDM과 AUSF간의 참조 포인트 - N14: 2개의 AMF들 간의 참조 포인트 - N15: 비-로밍 시나리오의 경우, PCF와 AMF간의 참조 포인트 또는 로밍 시나리오의 경우 방문 네트워크 (visited network) 내 PCF와 AMF 간의 참조 포인트 도 2는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 패킷들을 그룹화 단위로 구분하기 위한 동작을 도시 한 도면이다. 구체적으로, 단일 서비스 플로우 내 서로 다른 미디어 타입 (예를 들어, 비디오와 오디오)패킷들이 존재할 수 있다. 이 경우, 멀티플렉싱된 서비스 데이터 플로우 내 미디어 타입 정보에 기반하여 Sub QoS 플로우를 생성할 수 있다. 생성된 Sub QoS 플로우에 기반하여 멀티플렉싱 된 패킷들은 그룹화 단위로 구분될 수 있다. 멀티플렉싱 된 패킷들은 Sub QoS 플로우 별로 처리될 수 있다. 이를 위해, 구분 정보 (예를 들어, DSCP 마킹)이 제공될 수 있다. 구체적으로, 단일 서비스 플로우 내 동일한 미디어 타입 패킷들이 존재할 수 있다. 이 경우, 단일 서비스 플로 우 내 PDU set 기반의 처리 (예를 들어, I B P 프레임)와 Sub QoS 플로우 별 처리를 동시에 고려할 수 있다. 이 때, Sub QoS 플로우 기반으로 분류한 단일 Sub QoS 플로우 내의 패킷들은 PDU set 단위로 구분이 필요할 수 있 다. 도 2를 참조하면, AF는 해당 서비스 플로우의 PDU set 핸들링에 기반하여 Sub QoS 플로우 할당 서비스를 요청할 수 있다. AF는 Sub QoS 플로우 할당 서비스 요청을 위하여 PCF에 프로토콜 디스크립션을 송신할 수 있다. 구체적으로, 프로토콜 디스크립션은 PDU set handling indication 및 각 미디어 타입 별 패킷들의 코덱 (codec), 샘플링 레이트(sampling rate), 서비스 플로우 내의 미디어 구성 타입 (예를 들어, Group_RTP_Bundle 와 같은 RTP 패킷 내 멀티플렉싱 여부와 관련된 정보), AS로부터 해당 서비스 플로우 내 패킷들의 PDU set handling 제공 여부 (예를 들어, PDU set handling support for all pdu indication) 중 적어도 하나의 정보를 포함할 수 있다. AF는 패킷의 특성을 고려하여 각 패킷 별 QoS 특성 정보를 RAN에서 활용하기 위한 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 할당 서비스 요청 지시자 (예를 들어, Sub QoS flow support indicator)를 PCF에게 송신할 수 있다. PCF는 AF로부터 수신한 Sub QoS 플로우 할당 서비스 요청 지시자 (예를 들어, Sub QoS flow support indicator) 및 sub QoS 플로우 할당 서비스 요청 지시자와 관련된 정보에 기반하여 sub QoS 플로우 할당 서비스 요청에 대한 수락 여부를 결정할 수 있다. PCF가 상기 sub QoS 플로우 할당 서비스 요청을 수락할 경우, PCC 규칙(rule) 생성 또는 업데이트 시 AF로부터 수신한 Sub QoS 플로우 핸들링을 위한 인지자 (예를 들어, Sub QoS flow support indicator 또는 Sub QoS flow handling indicator) 및 상기 sub QoS 플로우 핸들링을 위한 인지자와 관련된 정보가 포함된 정보를 SMF에게 송 신할 수 있다. PCF가 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링을 지원하지 못할 경우, 상기 sub QoS 플로 우 할당 서비스 요청에 대한 거절 메시지를 AF 요구사항과 관련된 메시지에 대한 응답으로 AF에게 송신할 수 있 다. 여기서, 멀티플렉싱된 서비스 데이터 플로우는 AF로부터 수신한 서비스 요구사항에 기반한 미디어 타 입을 포함할 수 있다. AF는 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링을 지원하지 못할 경우 sub QoS 플로우 할당 서비스 요청에 대한 거절 메시지를 AS로 송신할 수 있다. 이때, sub QoS 플로우 할당 서비스 내의 서로 다 른 미디어 종류의 패킷들은 각 서비스 데이터 플로우를 이용하여 sub QoS 플로우 할당 서비스를 제공을 요청할 수 있다. PCF는 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정할 수 있다. Sub QoS 플로우 핸들링 서비스 제공이 결정된 경우, 서비스 플로우 내 각각의 미디어 특성을 반영하여 서로 다른 QoS를 할당하기로 결정할 수 있다. PCF는 Sub QoS 플로우 핸들링 서비스 데이터 플로우와 관련된 sub QoS 플로 우 생성 요청 및 Sub QoS 플로우 핸들링 서비스와 관련된 정보에 기반하여 PCC 규칙 업데이트를 결정 할 수 있 다. PCF는 상기 AF로부터 수신한 Sub QoS 플로우 핸들링을 위한 인지자로부터 멀티플렉싱 된 서비스 데이터 플로우 내 패킷들의 미디어 타입별 별도의 QoS 플로우 맵핑 및 QFI 정보 마킹 처리가 필요함을 확인 할 수 있다. 서비스 사업자 또는 네트워크 사업자의 정책에 따라 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 핸 들링 서비스 지원을 위하여 도2의 실시예와 같이 UPF에서 미디어 타입 별 별도의 QoS 플로우 할당을 통하지 않 고 도 4의 실시 예와 같이 동일한 QoS 플로우내의 DSCP 마킹 등을 통한 논리적인 패킷 구분 동작을 선택할 수 있다. SMF는 Sub QoS 플로우 핸들링을 위한 서비스 지시자 정보 및 Sub QoS 플로우 핸들링과 관련된 미디어 타입별 별 도의 QFI 할당 정보, 프로토콜 디스크립션 중 적어도 하나를 포함하는 PCC 규칙을 PCF로부터 수신 할 수 있다.SMF는 UPF로 송신할 Sub QoS 플로우 핸들링을 위한 서비스 지원을 위한 PDR 정보를 생성할 수 있다. AF로 전달되는 프로토콜 디스크립션은 서비스 데이터 플로우 내의 패킷들의 미디어 타입 정보들을 포함할 수 있 다. 프로토콜 디스크립션이 서비스 데이터 플로우 내의 패킷들의 미디어 타입 정보 등을 포함할 경우, PCF는 상 기 미디어 타입 정보에 기반하여 각 패킷들의 미디어 타입 별 적절한 5QI 정보를 생성할 수 있다. SMF는 생성된 5QI 정보에 기반하여 해당 서비스 데이터 플로우의 5QI 별 QoS 플로우의 생성 및 패킷 별 미디어 특성에 맞춰 QoS 플로우에 맵핑하기 위한 정보를 UPF로 송신할 수 있다. UPF는 SMF로부터 멀티 플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링을 위한 미디어 타입 별 Sub QoS 플로우 생성 요청 및 각 QoS 플 로우 패킷 맵핑 관련 정보를 수신할 수 있다. UPF는 멀티플렉싱 된 서비스 데이터 플로우를 확인할 수 있다. UPF는 확인된 멀티플렉싱 된 서비스 데이터 플로 우 내의 RTP 패킷 헤더(header)내의 페이로드 타입 정보 또는 프로토콜 디스크립션 내의 정보에 기반하여 각 미 디어 타입 (예를 들어, 비디오와오디오) 별 패킷을 확인 할 수 있다. UPF는 SMF로부터 수신한 PDR 정보에 기반하여 패킷들의 포워딩 동작을 수행할 수 있다. 패킷들의 포워딩 동작은 각 미디어 타입 별로 확인된 각각의 패킷 별로 QoS 특성을 고려하여 생성된 QoS 플로우로 수행될 수 있다. 패킷들의 QoS 맵핑 및 정보의 할당은 미디어의 특성을 고려하여 수행될 수 있다. 이후, UPF는 Sub QoS 플로우의 생성 및 패킷 검출 규칙을 RAN으로 송신할 수 있다. 패킷 검출 규칙 송신은 각 QoS 플로우플로우를 통해 송신될 수 있다. 또한 SMF는 QoS 규칙 정보를 UE로 전송할 수 있다. RAN은 SMF로부터 수신한 QoS 프로화일 내의 QFI 정보에 기반하여 각 Sub QoS 플로우의 QoS 특성을 파악할 수 있 다. RAN은 파악된 Sub QoS 플로우의 QoS 특성에 기반하여 패킷 별 스케쥴링 동작을 수행할 수 있다. 예를 들어, PCF는 AF로부터 수신한 프로토콜 디스트립터 정보에 기반하여 특정 멀티플렉싱된 서비스 데이터 플 로우가 오디오 및 비디오 패킷으로 구성되어 있다는 정보를 전달받을 수 있다. 상기와 같은 정보를 전달받은 경 우, PCF는 Sub QoS 플로우 서비스를 지원하기 위하여 미디어 특성 별 5QI 와 관련된 QoS 특성 값들을 고려하여 오디오 (예를 들어, 5QI = 1) 및 비디오 (예를 들어, 5QI = 2)로 Sub QoS 플로우 정보의 결정이 가능할 수 있다. PCF는 해당 Sub QoS 플로우 생성 지시자, Sub QoS 플로우 정보 (예를 들어, 오디오 (예를 들어, 5QI = 1) 및 비디오 (예를 들어, 5QI = 2)), 및 프로토콜 디스크립션 정보 중 적어도 하나를 포함하는 PCC 규칙 생성 또는 업데이트를 결정할 수 있다. PCF는 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 서비스 지원 정보를 포함하는 정책 정보를 SMF로 전달할 수 있다. 정책 정보 전달을 통해 PCF는 UPF에게 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 서비스 동작의 수행을 요청할 수 있다. SMF는 상기 생성 또는 업데이트 된 PCC 규칙을 바탕으로 UPF에 오디오와 비디오 패킷을 전송하기 위한 서로 다 른 두개의 QoS 플로우 생성을 요청할 수 있다. SMF는 Sub QoS 플로우 서비스를 지원 지시자 및 QoS 플로우 관련 맵핑 정보를 포함하는 PDR 생성하여 UPF로 송신할 수 있다. 여기서, QoS 플로우 관련 맵핑 정보는 프 로토콜 디스트립션을 포함할 수 있다. AS로부터 UPF에게 멀티플렉싱 된 서비스 데이터 플로우가 송신될 수 있다. 이 경우, 프로토콜 디스크립션 내의 미디어 타입 구분 정보에 기반하여 각 패킷이 비디오 패킷인지 오디오 패킷인지를 판단할 수 있다. 그 결 과, UPF는 미디어 타입 별로 패킷을 구분 및 검출할 수 있다. UPF는 QER을 통해 송신된 QFI 정보에 기반하여 오 디오의 경우에는 예를 들어, QFI 1번인 QoS 플로우로 패킷을 포워딩을 수행할 수 있다. 비디오 패킷일 경우에는 예를 들어, QFI 2번인 QoS 플로우로 패킷 포워딩을 수행할 수 있다. RAN에서는 QoS 특성을 이용하여 UPF로부터 각 Sub QoS 플로우로 수신한 패킷들에 대하여 RAN 스케쥴링 동작을 수행할 수 있다. 도 3a, 도 3b 및 도 3c는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방 법을 도시한 도면이다. 구체적으로, PCF에서 AF를 통해 송신된 요구사항을 바탕으로 멀티플렉싱된 서비스 데이터 플로우의 sub QoS 플 로우를 생성할 수 있다. AF를 통해 송신된 sub QoS 플로우에 기반하여 미디어 특성을 고려한 RAN 스케쥴링을 수 행할 수 있다. 단계 301에서, AF는 Sub QoS 플로우 생성 지원을 결정할 수 있다. 구체적으로, Sub QoS 생성 지 원은 PDU set 기반 서비스 지원 및 단일 서비스 플로우 내에서 서로 다른 미디어 타입을 가지는 패킷들을 구분하기 위한 것일 수 있다. 구체적으로, PDU set 기반 서비스 및 단일 서비스 플로우는 PDU set 정보의 활용 및 Sub QoS 플로우를 이용한 RAN에서 스케쥴링을 지원하기 위한 것으로, 사용자의 선택 또는 서비스 사업자의 정책 에 따라 서로 다른 미디어 특성을 가지는 패킷들로 멀티플렉싱된 서비스 데이터 플로우를 통해 서비스를 이용할 수 있다. 단계 302에서, 상기 단계 301에서 결정된 사항에 기반하여 AF은 NEF 로 PDU set 핸들링 및 sub QoS 플로우 핸들 링 관련 정보를 NEF로 송신할 수 있다. 구체적으로, PDU set 핸들링 및 Sub QoS 핸들링 관련 정보는 PDU set 기 반 서비스 지원시 사용할 PDU set 핸들링 지시자 (예를 들어, PDU set handling indication) 및 sub QoS 플로 우 생성 지원 지시자(예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator) 중 적 어도 하나를 포함할 수 있다. PDU set 핸들링 및 sub QoS 플로우 핸들링 관련 정보는 AF세션 관련 QoS 요구사항 요구 메시지 내의 PDU set 핸들링 지시 (예를 들어, PDU set handling indication), sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator) 및 각 미디어 타입 별 패킷들의 코덱, 샘플 링 레이트, 서비스 플로우 내의 멀티플렉싱된 미디어 구성 타입 (예를 들어, Group_RTP_Bundle), AS로부터 해당 서비스 플로우내의 패킷들의 PDU set handling 제공 여부 (예를 들어, PDU set handling support for all pdu indication) 중 적어도 하나의 정보를 포함하는 프로토콜 디스크립션 등으로 구성될 수 있다. AF는 NEF 엔티티로 AF 세션 관련 QoS 요구사항 (예를 들어, AFsessionWithQoS) 메시지를 송신할 수 있다. 구체 적으로, 상기 AF 세션 관련 QoS 요구사항 메시지에는 PDU set 핸들링 지시자 (예를 들어, PDU set handling indication) 및 Sub QoS 플로우 핸들링 지시자(예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator), 프로토콜 디스크립션을 포함하는 정보 중 적어도 하나가 포함될 수 있다. 단계 303에서, NEF는 PCF 엔티티로 정책 인가 (예를 들어, PolicyAuthorization) 메시지를 송신할 수 있다. 구 체적으로, 상기 정책 인가 메시지에는 AF로부터 수신한 PDU set에 기반하여 서비스 지원 시 사용할 PDU set 핸 들링 정보 (예를 들어, PDU set handling information), sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow handling indicator) 및 서비스 관련 요구사항 (예를 들어, PDU set 정보 생성 및 관련 파라미터) 중 적 어도 하나가 포함될 수 있다. 단계 304에서, PCF는 서비스 핸들링 요청의 수락 여부를 판단한 할 수 있다. 이때, PCF는 AF로부터 수신한 PDU set 핸들링을 위한 인지자 및 Sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow handling indicator) 와 프로토콜 디스크립션 내의 정보에 기반하여 서비스 핸들링 요청의 수락 여부를 판단한 할 수 있다. PCF가 서비스 요청을 수락할 경우, PCF는 SMF에게 프로토콜 디스크립션을 송신할 수 있다. 구체적으로, 프로토 콜 디스크립션에는 PCC 규칙(rule) 생성 또는 업데이트 시 AF로부터 수신한 PDU set 핸들링을 위한 인지자 및 sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow handling indicator) 와 서비스 데이터 플로우 관련 정보가 포함될 수 있다. 그러나, PCF가 서비스 플로우에 대한 PDU set 핸들링 또는 sub QoS 플로우 핸들링 서비스를 지원하지 못할 수 있다. 여기서 서비스 플로우에 대한 PDU set 핸들링은 AF로부터 수신한 서비스 요구사항에 기반하여 멀티플렉싱 된 미디어 타입을 포함할 수 있다. PCF가 핸들링 서비스를 지원하지 못할 경우, 단계 305 및 단계 306에서 PCF 는 AF 요구사항과 관련된 메시지에 대한 응답으로 서비스 요청 사항에 대한 거절 메시지를 NEF를 통하여 AF에 송신할 수 있다. 단계 304에서 PCF가 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정할 수 있다. PCF가 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정한 경우, PCF는 서비스 플로우 내의 각각 서로 다른 미디어의 특성을 반영하여 서로 다른 QoS를 할당하기로 결정할 수 있다. 이후, PCF는 서비스 데이터 플로 우와 관련된 Sub QoS 플로우 생성 요청 및 서비스 데이터 플로우와 관련된 정보에 기반하여 PCC 규칙 업데이트 를 결정 할 수 있다. 또한 PCF는 상기 AF로부터 수신한 PDU set 핸들링 지시자로부터 서비스 플로우 내 패킷들의 PDU set handling에 기반한 별도의 Sub QoS 처리(handling) 과정이 RAN에서 수행됨을 확인할 수 있다. PCF는 별도의 Sub QoS 핸들링 과정을 위하여, 프로토콜 디스크립션 또는 사전에 정의된 정보에 기반하여 Sub QoS 플로우 핸들링 및 PDU set 핸들링 관련 정보를 PCC 규칙 생성 또는 업데이트 시 사용할 수 있다. PCF는 상기 sub QoS 플로우 핸들링 및 PDU set 핸들링 관련 정보에 기반하여 PCC 규칙을 업데이트할 수 있다. 단일 서비스 플로우 내 동일한 미디어 타입 패킷들만 존재하여 단일 Sub QoS 핸들링 정보만 존재할 수 있다. 이 경우 미디어 타입별 구분 및 해당 미디어 타입별 Sub QoS 플로우로의 맵핑 동작이 수행될 수 있다. 그러나, PDU set 핸들링 기반의 Sub QoS 핸들링을 처리할 경우, PDU set 정보가 없는 패킷이 존재할 수 있다. PDU set 정보 가 없는 패킷의 경우, 기본 또는 더미 PDU set information을 생성할 수 있다. 이후, 기본 또는 더미 PDU set information을 Sub QoS 플로우에 맵핑할 수 있다. 이때, 기본 PDU set information 정보는 GTP-U 확장 헤더 내 에 마킹될 수 있다. 또한, 동일 Sub QoS 플로우 내에서도 RTP 확장 헤더를 통해 수신된 PDU set information 정보를 GTP-U 확장 헤더 내에 각 PDU set 별로 PDU set information 마킹 할 수 있다. 단계 305 및 단계 306에서, PCF는 NEF를 통하여 AF에게 업데이트 요청 수락과 관련된 메시지를 정책인가 업데이 트 요청 응답 (예를 들어, PolicyAuthorization_update response) 및 AF 세션 관련 요구사항 업데이트 요청 응 답(예를 들어, AFsessionWithQoSCreate response) 메시지를 송신할 수 있다. 구체적으로, 업데이트 요청은 멀 티플렉싱 서비스 데이터 플로우와 관련된 Sub QoS 플로우 핸들링 및 PDU set 핸들링 서비스 관련 정책에 대한 업데이트 요청일 수 있다. 또한, PCF는 AF로부터 단계 302 및 303을 통해 수신한 서비스 요구사항에 기반하여 업데이트 요청 수락과 관련된 메시지를 NEF를 통해 AF에게 송신할 수 있다. 단계 307에서, PCF는 프로토콜 디스크립션 등에 기반하여 업데이트 된 PCC 규칙을 세션 정책 제어 업데이트 통 보 (예를 들어, Npcf_SMPolicyControl_UpdateNotify) 요청 메시지를 통해 SMF에 송신할 수 있다. 구체적으로, 프로토콜 디스립션은 RAN에서의 PDU set handling 서비스 지원을 위한 지시자, PDU set QoS profile 등과 관련 된 정보, Sub QoS 플로우 핸들링 서비스 지원을 위한 Sub QoS 플로우 생성 지시자, 각 Sub QoS 플로우의 QFI 등 과 관련된 정보, 멀티 플렉싱 된 서비스 데이터 플로우와 관련된 프로토콜 정보 및 미디어 타입 정보 중 적어도 하나를 포함할 수 있다. 단계 308에서, SMF는 PDR 정보를 N4 세션 수정 요청 (예를 들어, N4 session Modification Request) 메시지를 통해 UPF로 송신할 수 있다. 구체적으로, PDR 정보는 Sub QoS 플로우 관련 정보, 서비스 플로우내의 미디어 타 입별 패킷 검출을 위한 필터 정보, PCF를 통해 PDU set 기반의 서비스 지원을 위한 PDU set 정보 검출 규칙 및 관련 파라미터 정보를 포함한 PDU Set 핸들링 정보 중 적어도 하나를 포함할 수 있다. 또한, Sub QoS 관련 정보 에는 단계 307에서 PCF를 통해 수신한 Sub QoS 핸들링 지원을 위한 Sub QoS 플로우 생성 지시자 및 Sub QoS 플 로우의 QFI 중 적어도 하나가 포함될 수 있다. PDU set 핸들링 기반의 Sub QoS 핸들링을 처리할 경우, PDU set 정보가 없는 패킷의 경우는 기본 또는 더미 PDU set information을 생성할 수 있다.여 생성된 기본 또는 더미 PDU set information은 Sub QoS 플로우로 맵핑될 수 이 있다. 이때, 기본 PDU set information 정보는 GTP-U 확장 헤더 내에 마킹될 수 있다. 또한, 동일 sub QoS 플로우 내에서도 RTP 확장 헤더를 통해 수신된 PDU set information 정보를 GTP-U 확장 헤더 내에 각 PDU set 별로 PDU set information 마킹할 수 있다. 단계 309에서, UPF는 SMF로 N4 세션 수정 요청 메시지에 대한 응답으로, 서비스 요청에 대한 응답 (예를 들어, N4 Session Modification Response) 메시지를 송신할 수 있다. 단계 310에서, SMF는 N2 SM 정보 및 N1 SM 컨테이너를 N1N2 메세지 전달 (예를 들어, Namf_Communication_N1N2MessageTransfer) 메시지를 통해 AMF로 송신할 수 있다. 구체적으로, N2 SM 정보 및 N1 SM 컨테이너는 PCF로부터 수신한 PCC 규칙에 기반하여 멀티플렉싱 된 서비스 데이터 플로우 내의 Sub QoS 정 보를 이용하여 업데이트된 각 미디어 타입 별 QFI 및 QoS rule 등을 포함할 수 있다. 단계 311에서, AMF는 N2 SM 정보 및 N1 SM 컨테이너를 N2 메시지 (예를 들어, N2 message)를 이용하여 RAN으로 송신할 수 있다. 구체적으로, N2 SM 정보 및 N1 SM 컨테이너에는 상기 단계 310에서 수신한 Sub QoS 플로우 핸 들링, PDU set 핸들링 서비스를 지원하기 위한 업데이트된 QFI, QoS rule, PDU set QoS profile 중 적어도 하 나가 포함될 수 있다. 단계 312에서, RAN은 Sub QoS 플로우 핸들링 서비스를 지원하기 위하여 업데이트 된 QoS rule 등을 포함하는 N1 SM 컨테이너 (예를 들어, AN-specific resource modification of transport)를 UE로 송신할 수 있다. 단계 313에서, AMF는 RAN으로부터 단계 311에서 송신된 정보에 기반하여 UE 및 RAN의 서비스 관련 응답 (예를 들어, N2 message response) 메시지를 수신할 수 있다. 단계 314 에서, AMF는 상기 단계 313에서 수신한 서비스 관련 응답 메시지를 SMF로 송신하여 세션 관련 정보에 대한 업데이트 요청 (예를 들어, Nsmf_PDUSession_UpdateSMContext Request) 메시지를 송신할 수 있다. 단계 315에서 SMF는 상기 단계 314에서 수신한 세션 관련 정보에 대한 업데이트 요청 메시지에 대한 응답으로 AMF로 세션 관련 정보에 대한 업데이트 응답 (예를 들어, Nsmf_PDUSession_UpdateSMContext Response) 메시지 를 송신할 수 있다. 단계 316에서, UPF는 DN 내의 AS로부터 N6 구간을 통해 UPF로 송신되는 RTP 패킷 헤더 정보에 기반하여 멀티플 렉싱 된 패킷들을 미디어 타입 별 특성을 고려하여 구분 및 검출할 수 있다. 구체적으로, 해당 RTP 패킷 헤더 정보를 이용하여 패킷의 검출 동작을 수행하기 위하여, AF로부터 수신한 프로 토콜 디스크립션 내의 정보에 기반할 수 있다. UPF는 상기 단계 308을 통해 SMF로부터 수신한 패킷 검출 규칙 정보에 기반하여 멀티플렉싱 된 서비스 데이터 플로우 내의 패킷들을 미디어 특성을 고려하여 검출할 수 있다. 이후, 검출된 서비스 데이터 플로우 내의 패킷들을 PCF에서 생성된 정보를 바탕으로 Sub QoS 플로우로의 맵핑을 수행할 수 있다. Sub QoS 플로우는 새로운 QoS 플로우 생성을 요청할 수 있다. 또는, 해당 미디어 특성을 고려 한 5QI 기반의 기존의 QoS 플로우가 있을 경우 해당 QoS 플로우로의 맵핑을 수행할 수 있다. UPF는 PDU set 기반의 패킷 핸들링을 지원하기 위하여 DN 내의 AS로부터 N6 구간을 통해 UPF로 전달되는 RTP 패 킷 헤더 확장 필드 내의 PDU set 정보를 검출할 수 있다. PDU set 기반의 정보가 없는 미디어 타입의 패킷일 경우, UPF는 기본 PDU set information을 생성할 수 있다. PDU set 기반의 sub QoS 플로우로의 맵핑 동작을 요청받은 UPF는 검출된 또는 생성된 기본 PDU set 정보를 GTP- U 헤더를 통해 RAN으로 송신할 수 있다. 구체적으로 PDU Set 정보는, PDU 셋 시퀀스 넘버 (예를 들어, PDU Set Sequence Number), PDU 셋의 마지막 PDU (예를 들어, End PDU of the PDU Set), PDU 셋의 바이트 사이즈 (예를 들어, PDU Set Size in bytes), PDU 셋 내 PDU 시퀀스 넘버 (예를 들어, PDU SN within a PDU Set), PDU 셋 중 요도 (예를 들어, PDU Set Importance) 중 적어도 하나로 구성될 수 있다. 또한 UPF는 상기 RTP 패킷 확장 헤더 를 통해 전달 받거나 및 UPF에서 생성한 PDU set information을 GTP-U 확장 헤더 내에 마킹하여 해당 정보를 RAN으로 송신할 수 있다. 단계 317에서, RAN은 상기 단계 311에서 SMF로부터 수신한 Sub QoS 플로우를 구성하는 정보를 이용하여 멀티플 렉싱 된 서비스 플로우내의 패킷들의 미디어 특성을 고려한 RAN 스케쥴링 동작을 수행할 수 있다. 또한 RAN은 SMF로부터 수신한 PDU set QoS profile 및 PDU set information을 바탕으로 PDU set 기반의 RAN 스케쥴링 동작 을 수행할 수 있다. 도 3d, 도 3e 및 도 3f는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방 법을 도시한 도면이다. 구체적으로, PCF에서는 AF를 통해 송신된 멀티플렉싱된 서비스 데이터 플로우의 하나 이상의 QoS 요구사항에 기 반하여 하나 이상의 QoS 플로우를 생성할 수 있다. PCF에서는 AF를 통해 송신된 서로 다른 미디어 특성을 고려 한 하나이상의 QoS 요구사항에 기반하여 생성된 하나 이상의 QoS 플로우에 기반하여 미디어 특성을 고려한 RAN 스케쥴링을 수행할 수 있다. 단계 301에서, AF는 서로 다른 미디어 특성을 고려한 하나이상의 QoS 요구사항에 기반하여 생성된 하나 이상의 QoS 플로우 생성 지원을 결정할 수 있다. 구체적으로, 하나 이상의 QoS 생성 지원은 단일 서비스 플로우 내에서 서로 다른 미디어 타입을 가지는 패킷들을 구분하기 위한 것일 수 있다. 구체적으로, 단일 서비스 플로우는 서 로 다른 미디어 특성을 고려한 하나이상의 QoS 요구사항에 기반하여 생성된 하나 이상의 QoS 플로우들을 이용한 RAN에서 스케쥴링을 지원하기 위한 것으로, 사용자의 선택 또는 서비스 사업자의 정책에 따라 서로 다른 미디어 특성을 가지는 패킷들로 멀티플렉싱된 서비스 데이터 플로우를 통해 서비스를 이용할 수 있다. 멀티플렉싱된 서 비스 데이터 플로우는 RTP-BUNDLE로 구성될 수 있다. RTP-BUNDLE로 구성된 멀티플렉싱된 서비스 데이터 플로우 의 경우 RTP SDES Compact Header Extensions 내 MID (Media Identification)에 기반하여 RTP-BUNDLE로 구성된 서비스 데이터 플로우 내의 패킷들을 구분할 수 있다. 번들링된 RTP 패킷을 구분하기 위한 MID 정보 또는 MID 정보와 맵핑되는 QoS 요구사항 정보 (예를 들어, Bandwidth, Latency 등) 중 적어도 하나 이상의 정보를 protocol description 내에 포함할 수 있다. 또한 상기 protocol description 내에는 RTP SDES Compact Header Extensions를 통해 MID가 전달됨을 지시하는 정보가 포함될 수 있다. 예를 들어 “urn:ietf:params:rtp- hdrext:sdes:mid” 또는 \"urn:3gpp:additional-packet-filter-mid:rel-19\" 중 적어도 하나의 정보 등을 통해 AS로부터 전달되는 RTP 패킷의 확장 헤더 내 MID 정보가 포함됨을 전달 또는 지시할 수 있주고, Additional packet filter에서 해당 정보를 활용할 수 있음을 전달 또는 지시할 수 있다. 단계 302에서, 단계 301에서 결정된 사항에 기반하여 AF은 NEF 로 서로 다른 미디어 특성을 고려한 하나이상의 QoS 요구사항에 기반하여 생성된 하나 이상의 QoS 플로우 핸들링 관련 정보를 NEF로 송신할 수 있다. 구체적으로, 서로 다른 미디어 특성을 고려한 하나이상의 QoS 요구사항에 기반하여 생성된 하나 이상의 QoS 핸들링 관련 정보는 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 생성 지원 지시자 (예를 들어, separate QoS flow support indicator or separate QoS flow handling indicator), Additional packet filter support indication, 또는 서로 다른 미디어 특성을 고려한 하나이상의 QoS 요구사항 중 적어도 하나를 포함할 수 있다. 서로 다른 미디어 특성을 고려한 하나이상의 QoS 요구사항을 바탕으로 생성된 하나 이상의 QoS 플로우 핸들링 관련 정보는 AF세션 관련 QoS 요구사항 요구 메시지 내의 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 지시자 (예를 들어, separate QoS flow support indicator or separate QoS flow handling indicator), 각 미디어 타입 별 패킷들의 코덱, 샘플링 레이트, 서비스 플로우 내의 멀티플렉싱된 미디어 구성 타입 (예를 들어, Group_RTP_Bundle 또는 RTP-BUNDLE 중 적어도 하나), Additional packet filter support indication, 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 요구사항 정보 중 적어도 하나의 정보를 포함하 는 프로토콜 디스크립션 등으로 구성될 수 있다. AF는 NEF 엔티티로 AF 세션 관련 QoS 요구사항 (예를 들어, AFsessionWithQoS update request) 메시지를 송신 할 수 있다. 구체적으로, AF 세션 관련 QoS 요구사항 메시지에는 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 지시자 (예를 들어, separate QoS flow support indicator or Sub QoS flow handling indicator), 서로 다른 미디어 타입으로 구성된 멀티플렉싱된 서비스 데이터 플로우 관련 하나 이상의 QoS 요구 사항, 서비스 데이터 플로우의 프로토콜 타입 및 멀티플렉싱된 서비스 데이터 플로우 내의 패킷들을 구분하기 위한 패킷 구분 정보 (예를 들어, Payload Type, SSRC, 또는 MID 중 적어도 하나), 추가적 패킷 필터 지원 지시 자 (예를 들어, Additional packet filter support indicator)를 포함하는 프로토콜 디스크립션을 포함하는 정 보 중 적어도 하나가 포함될 수 있다.단계 303에서, NEF는 PCF 엔티티로 정책 인가 (예를 들어, PolicyAuthorization update reqeust) 메시지를 송신할 수 있다. 구체적으로, 상기 정책 인가 메시지에는 AF로 부터 수신한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 지시자 (예를 들어, separate QoS flow handling indicator) 또는 서비스 관련 요구사항 중 적어도 하나가 포함될 수 있다. 구체적으로, 서비스 관련 요구사항에는 서로 다른 미디어 타입으로 구성된 멀티플렉싱된 서비스 데이터 플로우 관련 하나 이상의 QoS 요구사항, 서비스 데이터 플로우의 프로토콜 타입, 멀티플렉싱된 서비스 데이터 플로우 내의 패킷들을 구분 하기 위한 패킷 구분 정보 (예를 들어, Payload Type, SSRC, 또는 MID 중 적어도 하나), 추가적 패킷 필터 지원 지시자 (예를 들어, Additional packet filter support indicator)를 포함하는 프로토콜 디스크립션) 중 적어 도 하나가 포함될 수 있다. 단계 304에서, PCF는 서비스 핸들링 요청의 수락 여부를 확인 할 수 있다. 이때, PCF는 AF로부터 수신한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링/지원 지시자 (예를 들어, separate QoS flow handling indicator) 와 프로토콜 디스크립션 내의 정보에 기반하여 서비스 핸들링 요청의 수락 여부를 확인 할 수 있다. 프로토콜 디스트립션 내에는 서로 다른 미디어 타입으로 구성된 멀티플렉싱된 서비스 데이터 플로우 관련 하나 이상의 QoS 요구사항, 서비스 데이터 플로우의 프로토콜 타입, 멀티플렉싱된 서비스 데이터 플로우 내의 패킷들을 구분하기 위한 패킷 구분 정보 (예를 들어, Payload Type, SSRC, 또는 MID 중 적어도 하나)가 포 함될 수 있다. 상기 프로토콜 디스트립션 내의 멀티플렉싱된 서비스 데이터 플로우 내의 패킷들을 구분하기 위 한 패킷 구분 정보 (예를 들어, Payload Type, SSRC, 또는 MID 중 적어도 하나)는 AS별로 다를 수 있다. PCF가 서비스 요청을 수락할 수 있다. PCF가 서비스 요청을 수락하는 경우, PCF는 SMF에게 프로토콜 디스크립션 을 송신할 수 있다. 구체적으로, 프로토콜 디스크립션에는 PCC 규칙(rule) 생성 또는 업데이트 시 AF로부터 수 신한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 지시자 (예를 들어, separate QoS flow handling indicator) 와 서비스 데이터 플로우 관련 정보 중 적어도 하나가 포함될 수 있다. PCF는 프로토콜 디 스크립션 내의 정보에 기반하여 기존 5 Tuple 기반의 IP 패킷 필터 또는 멀티플렉싱된 서비스 데이터 플로우 내 의 패킷들을 구분하기 위한 패킷 구분 정보 (예를 들어, Payload Type, SSRC, 또는 MID)를 이용하는 추가적 패 킷 필터 (Additional packet filter) 등을 포함하는 서비스 데이터 플로우 필터(들)을 생성할 수 있다. PCF는 AF로부터 전달받은 멀티플렉싱된 서비스 데이터 플로우 관련 하나 이상의 QoS 요구사항 및 프로토콜 디스 크립션 내에 RTP-BUNDLE 정보와 패킷 헤더 정보(“urn:ietf:params:rtp-hdrext:sdes:mid” or\"urn:3gpp:additional-packet-filter-mid:rel-19\")를 바탕으로 RTP-BUNDLE로 구성된 멀티플렉싱된 서비스 데 이터 플로우의 경우 RTP SDES Compact Header Extensions 내 MID (Media Identification)에 기반하여 멀티플렉 싱된 서비스 데이터 플로우 내의 패킷들을 구분할 수 있음을 알 수 있다. 상기 정보를 바탕으로 PCF는 Additional packet filter의 5-tuple 기반의 IP 패킷 필터와 MID 정보를 바탕으로 패킷을 검출하는 추가적 패 킷 필터 (Additional packet filter) 정보를 포함하는 하나 이상의 QoS 플로우를 이용한 멀티플렉싱된 서비스데이터 플로우 핸들링 서비스를 지원하기 위한 PCC 규칙의 생성 또는 업데이트 동작을 수행할 수 있다. PCF가 서비스 플로우에 대한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우를 이용한 멀티플렉싱된 서비스 데이터 플로우 핸들링 서비스를 지원하지 못할 수 있다. PCF가 핸들링 서비스를 지원하지 못할 경우, 단 계 305 및 단계 306에서 PCF는 AF 요구사항과 관련된 메시지에 대한 응답으로 서비스 요청 사항에 대한 거절 메 시지를 NEF를 통하여 AF에 송신할 수 있다. 단계 304에서 PCF가 멀티플렉싱 된 서비스 데이터 플로우의 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우를 이용한 패킷 핸들링 서비스를 제공하기로 결정할 수 있다. PCF가 서로 다른 미디어 특성을 고려한 하 나 이상의 QoS 플로우를 이용한 멀티플렉싱된 서비스 데이터 플로우 핸들링 서비스를 제공하기로 결정한 경우, PCF는 서비스 플로우 내의 각각 서로 다른 미디어의 특성에 기반하여 서로 다른 QoS를 할당하기로 결정할 수 있 다. PCF는 서비스 데이터 플로우와 관련된 Sub QoS 플로우 생성 요청 및 서비스 데이터 플로우와 관련된 정보에 기반하여 PCC 규칙 업데이트를 결정할 수 있다. PCF는 상기 AF로부터 수신한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 요구사항 정보 또는 Additional packet filter support indication 정보 중 적어도 하나에 기반하여 별도의 서로 다른 미디어 특성을 고려한 하 나 이상의 QoS 처리(handling) 과정이 RAN에서 수행됨을 확인할 수 있다. PCF는 별도의 서로 다른 미디어 특성 을 고려한 하나 이상의 QoS 핸들링 과정을 위하여, 프로토콜 디스크립션 또는 사전에 정의된 정보 중 적어도 하 나에 기반하여 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 및 관련 정보를 PCC 규칙 생성 또는 업데이트 시 사용할 수 있다. PCF는 상기 sub QoS 플로우 핸들링 및 PDU set 핸들링 관련 정보에 기반하여 PCC 규칙을 업데이트할 수 있다. PCF는 하나의 멀티플렉싱된 서비스 데이터 플로우와 관련하여 하나 이상의 QoS 요구사항을 AF로부터 전달받을 경우, Sub QoS 핸들링 동작을 위한 지시자 또는 Additional packet filter를 포 함하는 서비스 데이터 플로우 필터 정보의 생성 및 추가 패킷 필터 지원 지시자 (예를 들어, Additional packet filter support indication)를 포함하는 PCC 규칙의 생성 및 업데이트를 수행할 수 있다. PCF는 AF로부터 전달 받은 QoS 요구사항에 기반하여 인가된 QoS (예를 들어, Authorized QoS)를 위한 서비스 데이터 플로우 템플릿을 생성하여 PCC 규칙을 통해 SMF로 전달할 수 있다. 단계 305 및 단계 306에서, PCF는 NEF를 통하여 AF에게 업데이트 요청 수락과 관련된 메시지를 정책인가 업데이 트 요청 응답 (예를 들어, PolicyAuthorization_update response) 및 AF 세션 관련 요구사항 업데이트 요청 응 답 (예를 들어, AFsessionWithQoS Create response) 메시지를 송신할 수 있다. 구체적으로, 업데이트 요청은 멀티플렉싱 서비스 데이터 플로우와 관련된 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 및 관련 정책에 대한 업데이트 요청일 수 있다. 또한, PCF는 AF로부터 단계 302 및 303을 통해 수신한 서비스 요구 사항에 기반하여 업데이트 요청 수락과 관련된 메시지를 NEF를 통해 AF에게 송신할 수 있다. 단계 307에서, PCF는 프로토콜 디스크립션 등에 기반하여 업데이트 된 PCC 규칙을 세션 정책 제어 업데이트 통 보 (예를 들어, Npcf_SMPolicyControl_UpdateNotify) 요청 메시지를 통해 SMF에 송신할 수 있다. 구체적으로, 프로토콜 디스립션은 RAN에서의 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링 서비스 지원을 위한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 생성 지시자, 하나 이상의 QoS 플로우의 QoS 관 련 서비스 데이터 플로우 템플릿, 멀티 플렉싱 된 서비스 데이터 플로우와 관련된 프로토콜 정보 및 패킷 구분 정보 (예를 들어, 미디어 타입 정보, MID, 또는 SSRC 등), 추가 패킷 필터 지원 지시자 (예를 들어, Additional Packet filter support indication) 중 적어도 하나를 포함할 수 있다. 단계 308에서, SMF는 PDR 정보를 N4 세션 수정 요청 (예를 들어, N4 session Modification Request) 메시지를 통해 UPF로 송신할 수 있다. 구체적으로, PDR 정보는 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 관련 정보, 멀티플렉싱된 서비스 플로우내의 패킷 검출을 위한 필터 정보 (예를 들어, MID, Payload type, 또는 SSRC)중 적어도 하나를 포함할 수 있다. 또한, Sub QoS 관련 정보에는 단계 307에서 PCF를 통해 수신한 Sub QoS 핸들링 지원을 위한 Sub QoS 플로우 생성 지시자 및 Sub QoS 플로우의 QFI 중 적어도 하나가 포함될 수 있다. 본 발명의 실시 예에 따라 PCF에서 기존 5 tuple 기반의 IP packet 필터 이외에 멀티플렉싱된 서비스 데이터 플 로우 내의 미디어 패킷들을 구분하기 위하여 추가적인 패킷 필터를 생성하여 PDR를 통해 전달할 수 있다. 멀티 플렉싱된 서비스 데이터 플로우 내의 미디어 패킷들을 구분하기 위한 추가적인 패킷 필터 정보는 패킷의 헤더 내의 Payload type, SSRC, MID 정보를 바탕으로 패킷을 구분하여 이를 적절한 QoS 플로우로 포워딩할 수 있다. Bundle 형태로 멀티플렉싱된 RTP 서비스 데이터 플로우의 경우, MID 정보 및 MID 와 관련된 QoS 플로우의 맵핑 정보 중 적어도 하나를 추가적으로 SMF로부터 전달받을 수 있다. 본 발명의 일 실시 예에 따라 UPF는 IP 패킷 필터를 통해 AS로부터 전달되는 RTP-BUNDLE로 구성된 멀티플렉싱된 서비스 데이터 플로우를 먼저 검출할 수 있다. 이후 해당 RTP-BUNDLE로 구성된 멀티플렉싱된 서비스 데이터 플 로우를 PCF로부터 수신한 MID 기반의 추가 패킷 필터 (Additional packet filter)를 이용하여 MID 별 패킷을 검출할 수 있다. MID 별로 검출된 패킷을 AF로부터 전달받은 패킷들의 서비스 특성을 고려한 QoS 요구사항을 바 탕으로 PCF 또는 SMF로부터 생성된 MID 와 QoS 플로우 맵핑 정보를 이용하여 적절한 QoS 플로우로 포워딩 동작 을 수행할 수 있다. 단계 309에서, UPF는 SMF로 N4 세션 수정 요청 메시지에 대한 응답으로, 서비스 요청에 대한 응답 (예를 들어, N4 Session Modification Response) 메시지를 송신할 수 있다. 단계 310에서, SMF는 N2 SM 정보 및 N1 SM 컨테이너를 N1N2 메시지 전달 (예를 들어, Namf_Communication_N1N2MessageTransfer) 메시지를 통해 AMF로 송신할 수 있다. 구체적으로, N2 SM 정보 및 N1 SM 컨테이너는 PCF로부터 수신한 PCC 규칙에 기반하여 멀티플렉싱 된 서비스 데이터 플로우 내의 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 정보에 기반하여 업데이트된 각 미디어 타입 별 QFI 및 QoS rule 등을 포함할 수 있다. 단계 311에서, AMF는 N2 SM 정보 및 N1 SM 컨테이너를 N2 메시지 (예를 들어, N2 message)를 이용하여 RAN으로 송신할 수 있다. 구체적으로, N2 SM 정보 및 N1 SM 컨테이너에는 상기 단계 310에서 수신한 서로 다른 미디어 특성을 고려한 하나 이상의 QoS 플로우 핸들링을 지원하기 위한 업데이트된 QFI, QoS rule, 또는 QoS Profile 중 적어도 하나가 포함될 수 있다. 단계 312에서, RAN은 Sub QoS 플로우 핸들링 서비스를 지원하기 위하여 업데이트 된 QoS rule 등을 포함하는 N1 SM 컨테이너 (예를 들어, AN-specific resource modification of transport)를 UE로 송신할 수 있다. 단계 313에서, AMF는 RAN으로부터 N2 SM 정보 및 N1 SM 컨테이너를 N2 메시지 내의 정보에 기반하여 UE 및 RAN 의 서비스 관련 응답 (예를 들어, N2 message response) 메시지를 수신할 수 있다. 단계 314에서, AMF는 서비스 관련 응답 메시지를 SMF로 송신할 수 있다. 또한, AMF는 SMF에 세션 관련 정보에 대한 업데이트 요청 (예를 들어, Nsmf_PDUSession_UpdateSMContext Request) 메시지를 송신할 수 있다. 단계 315에서 SMF는 세션 관련 정보에 대한 업데이트 요청 메시지에 대한 응답으로 AMF로 세션 관련 정보에 대 한 업데이트 응답 (예를 들어, Nsmf_PDUSession_UpdateSMContext Response) 메시지를 송신할 수 있다. 단계 316에서, UPF는 DN 내의 AS로부터 N6 구간을 통해 UPF로 송신되는 RTP 패킷 헤더 정보에 기반하여 멀티플 렉싱 된 패킷들을 미디어 타입 별 특성에 기반하여 구분 및 검출할 수 있다. 구체적으로, 해당 RTP 패킷 헤더 정보를 이용하여 패킷의 검출 동작을 수행하기 위하여, AF로부터 수신한 프로 토콜 디스크립션 내의 정보에 기반할 수 있다. UPF는 상기 단계 318에서 SMF로부터 수신한 패킷 검출 규칙 정보 에 기반하여 멀티플렉싱 된 서비스 데이터 플로우 내의 패킷들을 미디어 특성에 기반하여 검출할 수 있다. 이후, Additional packet filter를 통해 검출된 서비스 데이트 플로우 내의 패킷들을 PCF에서 생성된 Sub QoS 플로우로의 맵핑을 수행할 수 있다. 서로 다른 미디어 특성을 고려한 QoS 요구사항을 바탕으로 생성된 (Sub) QoS 플로우와 서로 다른 미디어 특성을 고려한 QoS 요구사항 및 패킷 간의 맵핑 정보에 기반하여 UPF는 검출된 패킷을 적절한 QoS 플로우로 맵핑을 수행할 수 있다. Sub QoS 플로우는 새로운 QoS 플로우 생성을 요청할 수 있 다. 또는, 해당 미디어 특성을 고려한 5QI 기반의 기존의 QoS 플로우가 있을 경우 해당 QoS 플로우로의 맵핑을 수행할 수 있다. 단계 317에서, RAN은 Sub QoS 플로우를 구성하는 정보에 기반하여 멀티플렉싱 된 서비스 플로우 내의 패킷들의 미디어 특성을 고려한 RAN 스케쥴링을 수행할 수 있다. 도 4는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 동작을 도시한 도면 이다. 구체적으로, 단일 서비스 플로우 내 서로 다른 미디어 타입 (예를 들어, 비디오와 오디오)이 존재할 수 있다. 이 경우, 패킷들의 5QI 정보 등에 기반하여 생성된 DSCP 값을 이용하여 DSCP 마킹을 수행할 수 있다. 마킹된 DSCP에 기반하여 하나의 QoS 플로우 내의 멀티플렉싱 된 패킷들을 구분 및 구분된 패킷들을 통한 RAN 스케쥴링 을 동작을 수행할 수 있다. 도 4를 참조하면, AF는 프로토콜 디스크립션을 생성하여 PCF로 송신할 수 있다. 구체적으로, 프로토콜 디스크립션은 해당 서비스 플로우의 PDU set 핸들링 기반의 서비스를 요청하기 위한 PDU set handling indication, 각 미디어 타입 별 패킷들의 코덱, 샘플링 레이트, 서비스 플로우 내의 미디어 구성 타입 (예를 들어, Group_RTP_Bundle 등 RTP 패킷내 멀티플렉싱 여부 정보), AS로부터 해당 서비스 플로우내의 패킷들의 PDU set handling 제공 여부 (예를 들어, PDU set handling support for all pdu indication) 등의 정보 중 적어도 하나를 포함할 수 있다. PDU set 핸들링 기반의 Sub QoS 핸들링을 처리할 경우, PDU set 정보가 없는 패킷은 기본 또는 더미 PDU set information을 생성할 수 있다. 생성된 기본 또는 더미 PDU set information은 Sub QoS 플로우로 맵핑할 수 있 다. 이 경우, 기본 PDU set information 정보는 GTP-U 확장 헤더 내에 마킹될 수 있다. 또한 동일 Sub QoS 플 로우 내에서도 RTP 확장 헤더를 통해 수신된 PDU set information 정보를 GTP-U 확장 헤더 내에 각 PDU set 별 로 PDU set information 마킹할 수 있다. AF는 멀티플렉싱 된 서비스 데이터 플로우를 패킷의 특성을 고려하여, 각 패킷 별 QoS 특성 정보를 RAN에서 활용하기 위한 Sub QoS 플로우 할당 서비스 요청 지시자 (예를 들어, Sub QoS flow support indicator)를 PCF로 송신할 수 있다. PCF는 AF로부터 수신한 Sub QoS 플로우 할당 서비스 요청 지시자 (예를 들어, Sub QoS flow support indicator) 및 Sub QoS 플로우 할당 서비스 요청 지시자와 관련된 정보에 기반하여 해당 요청에 대한 수락 여부 를 판단할 수 있다. PCF가 Sub QoS 플로우 할당 서비스 요청을 수락할 수 있을 경우, PCC 규칙(rule) 생성 또는 업데이트 시 AF로부 터 수신한 Sub QoS 플로우 핸들링을 위한 인지자 (예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator) 및 Sub QoS 플로우 핸들링을 위한 인지자와 관련된 정보를 포함하여 SMF로 송신할 수 있다. PCF가 AF로부터 수신한 서비스 요구사항에 기빈하여 서로 다른 미디어 타입을 포함하는 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링을 지원하지 못할 수 있다. 서비스 데이터 플로우의 SuB QoS 플로우 핸 들링을 지원하지 못할 경우, Sub QoS 플로우 할당 서비스 요청 사항에 대한 거절 메시지를 AF 요구사항과 관련 된 메시지에 대한 응답으로 AF에 송신할 수 있다. AF는 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링을 지원하지 못할 경우, Sub QoS 플로우 핸 들링 지원할 수 없음과 관련된 메시지를 AS로 송신할 수 있다. 이때, AF는 AS에게 각 서비스 데이터 플로우를 이용하여 해당 서비스의 서로 다른 미디어 종류의 패킷들에 대한 서비스 제공을 요청할 수 있다. 서비스 사업자 또는 네트워크 사업자의 정책 및 설정에 따라 PCF는 하나의 서비스 데이터 플로우를 별도의 Sub QoS 플로우를 사용하지 않고 동일한 QoS 플로우를 사용함과 동시에 동일 QoS 플로우 내의 Sub QoS 플로우 할당 을 요청할 수 있다. 이 때, PCF는 동일 QoS 플로우 내의 미디어 타입별 패킷 구분을 위하여 DSCP 마킹 동작의 수행을 결정할 수 있다. PCF는 DSCP 마킹을 통한 Sub QoS 플로우 구분 지시자 및 해당 서비스 플로우내의 미디 어 특성을 고려하여 관련 5QI와 ARP 정보를 PCC 규칙에 포함하여 이를 SMF로 송신할 수 있다. PCF는 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정할 수 있다. Sub QoS 플로우 핸들링 서비스 제공이 결정된 경우, PCF는 서비스 플로우 내의 각각 미디어 특성을 반영한 패킷을 구분하기 위한 QoS 정보를 할당을 결정할 수 있다. PCF는 Sub QoS 플로우 핸들링 서비스 데이터 플로우와 관련 된 DSCP 마킹 요청 및 서비스 데이터 플로우와 관련된 정보에 기반하여 PCC 규칙 업데이트를 결정 할 수 있다. PCF는 상기 AF로부터 수신한 Sub QoS 플로우 핸들링을 위한 인지자로부터 해당 서비스 데이터 플로우내 패킷들 의 미디어 타입별 별도의 DSCP 마킹을 통한 패킷 구분 동작이 필요함을 확인 할 수 있다. 서비스 사업자 또는 네트워크 사업자의 정책에 따라 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 핸 들링 서비스 지원을 위하여 도2의 실시예와 같이 UPF에서 미디어 타입 별 별도의 QoS 플로우 할당을 통한 패킷 별 구분을 실시하거나 도 4의 실시 예와 같이 동일한 QoS 플로우내의 DSCP 마킹 등을 통한 논리적인 패킷 구분 동작을 선택할 수 있다. SMF는 Sub QoS 플로우 핸들링을 위한 서비스 지시자 정보 및 Sub QoS 플로우 핸들링과 관련된 미디어 타입별 별 도의 QFI 할당 정보, DSCP 마킹 지시 정보, 프로토콜 디스크립션 중 적어도 하나를 포함하는 PCC 규칙을 PCF로 부터 수신 할 수 있다. SMF는 UPF로 송신할 Sub QoS 플로우 핸들링을 위한 서비스 지원을 위한 PDR 정보를 생성 할 수 있다. AF로 전달되는 프로토콜 디스크립션은 서비스 데이터 플로우 내의 패킷들의 미디어 타입 정보 들을 포함할 수 있다. 프로토콜 디스크립션이 서비스 데이터 플로우 내의 패킷들의 미디어 타입 정보 등을 포함할 경우, PCF는해당 미디어 타입 정보에 기반하여 각 패킷들의 미디어 타입 별 적절한 5QI 정보를 생성할 수 있다. Sub QoS 플로우 할당 동작은 UPF로 전달되는 하나의 서비스 데이터 플로우내의 미디어 타입별 패킷을 하나의 QoS 플로우 내의 패킷들의 미디어 타입을 고려하여 DSCP 마킹을 통한 패킷들의 구분 동작을 수행할 수 있다. 상기 DSCP 마킹 지시자를 수신한 SMF는 DSCP 마킹을 위하여, 5QI 및 ARP 정보에 기반하여 DSCP 값을 결정할 수 있다. 또는, 네트워크 사업자 별로 제공하는 별도의 정형화된 형태의 DSCP 값 정보 (예를 들어, video 의 경우 DSCP value 0, 오디오의 경우 DSCP value 1)에 기반하여 DSCP 값을 결정할 수 있다. SMF는 DSCP 값이 결정된 경우, 해당 DSCP 마킹 동작 요청을 수행할 수 있다. 또한, 각 패킷 별 DSCP 값 정보와 프로토콜 디스크립션 정보에 기반하여 해당 패킷을 구분하기 위한 검출 규칙 정보를 PDR내에 포함하여 UPF로 송 신할 수 있다. SMF는 해당 서비스 데이터 플로우의 5QI 별 QoS 플로우의 생성 및 패킷 별 미디어 특성에 맞춘 QoS 플로우 맵핑 을 위한 정보를 UPF로 송신할 줄 수 있다. SMF는 DSCP 값들과 맵핑되는 QFI 정보를 RAN으로 송신할 수 있다. UPF는 SMF로부터 멀티 플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링을 위해 미디어 타입 별 DSCP 마 킹 및 DSCP 관련 정보 (예를 들어, DSCP value and media type mapping info or DSCP table based on QoS info)를 수신할 수 있다. UPF는 멀티 플렉싱된 서비스 데이터 플로우를 검출한 뒤 해당 서비스 데이터 플로우 내의 RTP 패킷 헤더내의 페 이로드 타입 정보 또는 프로토콜 디스크립션 내의 정보에 기반하여 각 미디어 타입 (예를 들어, 비디오와 오디 오) 별 패킷을 검출 할 수 있다. UPF는 해당 미디어 타입 별 패킷을 SMF로부터 수신한 DSCP 정보에 기반하여 각 미디어 패킷 별로 DSCP 마킹을 수행할 수 있다. UPF는 Outer IP header 내에서 DSCP 마킹을 수행하며 해당 DSCP 값에 기반하여 동일 QoS 플로 우 내의 패킷들을 구분 할 수 있다. 상기 패킷 구분 과정을 통해 서로 다른 미디어 특성을 가지는 패킷들은 서 로 다른 DSCP 값을 가짐을 확인할 수 있다. UPF는 동일 QoS 플로우를 통해 서로 다른 DSCP 값을 RAN으로 송신할 수 있다. RAN은 SMF로부터 수신한 QoS 프로화일 내의 QFI 정보에 기반하여 각 Sub QoS 플로우의 QoS 특성을 파악할 수 있 다. RAN은 파악된 Sub QoS 플로우의 QoS 특성에 기반하여 패킷 별 스케쥴링 동작을 수행할 수 있다. 예를 들어, PCF는 AF로부터 수신한 프로토콜 디스트립터 정보에 기반하여 특정 멀티플렉싱 된 서비스 데이터 플 로우가 오디오 및 비디오 패킷으로 구성되어 있다는 정보를 수신할 수 있다. 상기 정보를 수신한 경우, PCF는 Sub QoS 플로우 서비스를 지원하기 위하여 미디어 특성 별 5QI 와 관련 QoS 특성 값들을 고려하여 오디오 (예를 들어, 5QI = 1) 및 비디오 (예를 들어, 5QI = 2)로 sub QoS 플로우 정보에 기반하여 DSCP 마킹 동작을 결정할 수 있다. PCF는 PCC 규칙을 생성 또는 업데이트를 결정할 수 있다. 여기서 PCC 규칙은 Sub QoS 플로우의 구분을 위한 DSCP 마킹 지시자, Sub QoS 플로우 정보 (예를 들어, 오디오 (예를 들어, 5QI = 1) 및 비디오 (예를 들어, 5QI = 2)), 및 프로토콜 디스크립션 정보 중 적어도 하나를 포함할 수 있다. PCF는 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 서비스의 지원 정보를 포함하는 정책 정보를 SMF로 전달할 수 있다. PCF는 UPF에서 멀티플렉싱 된 서비스 데이터 플로우의 Sub QoS 플로우 서비스 동작의 수행을 SMF에 요청할 수 있다. SMF는 상기 PCC 규칙에 기반하여 UPF에 동일 QoS 플로우 내의 오디오와 비디오 패킷을 구분하기 위한 DSCP 마킹 동작을 요청할 수 있다. SMF는 Sub QoS 플로우 서비스를 지원하기 위한 DSCP 마킹 동작 지시자, 프로토콜 디스크립션을 포함하는 DSCP 값, 오디오 및 비디오 미디어 패킷 간의 맵핑 정보 중 적어도 하나를 포함하는 PDR 을 생성하여 UPF로 송신할 수 있다. 멀티플렉싱 된 서비스 데이터 플로우는 AS로부터 UPF로 송신될 수 있다. UPF는프로토콜 디스크립션 내의 미디어 타입 구분 정보에 기반하여 각 패킷이 비디오 패킷인지 오디오 패킷인지를 판단할 수 있다. UPF는 판단 결과에 기반하여 미디어 타입 별로 패킷을 구분 및 검출할 수 있다. UPF는 FAR을 통해 송신된 DSCP 정보에 기반하여 예 를 들어, 오디오의 경우 DSCP 값 1번으로 outer ip header 내에 DSCP 마킹 동작을 수행할 수 있다. 예를 들어, 비디오 패킷일 경우 DSCP 값 2 번으로 outer ip header 내에 DSCP 마킹 동작을 수행한다. RAN에서는 UPF로부터 동일 QoS 플로우로 송신되는 패킷들을 해당 패킷들의 헤더 내의 DSCP 값에 기반하여 패킷 들을 구분할 수 있다. 예를 들어 DSCP 값 1번인 패킷일 경우 오디오 패킷으로 인지할 수 있다. 예를 들어, DSCP 값이 2번인 패킷일 경우 비디오 패킷으로 인지할 수 있다. RAN은 SMF에서 송신된 DSCP 값 및 5QI 맵핑 정보에 기반하여 RAN으로 송신되는 비디오 및 오디오 패킷의 QoS 특 성을 파악할 수 있다. RAN은 해당 정보에 기반하여 오디오와 비디오와 같이 서로 다른 미디어 타입 별 패킷 별 로 RAN 스케쥴링 동작을 수행할 수 있다. 도 5a. 도 5b 및 도 5c는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링 동작을 수행하기 위 한 방법을 동작을 도시한 도면이다. 구체적으로, RAN 스케줄링 동작은 AF를 통해 송신된 멀티플렉싱 된 서비스 데이터 플로우의 sub QoS 플로우 구 분을 위한 DSCP 마킹 및 RAN 에서 DSCP를 통해 구분되는 패킷들의 미디어 특성에 기반하여 수행될 수 있다. 단계 501에서, AF는 Sub QoS 플로우 생성 지원을 결정할 수 있다. 구체적으로, Sub QoS 생성 지원은 PDU set 기 반 서비스 지원 및 단일 서비스 플로우 내에 서로 다른 미디어 타입을 가지는 패킷들을 구분하기 위한 것일 수 있다. 구체적으로, PDU set 기반 서비스 및 단일 서비스 플로우는 PDU set 정보의 활용 및 Sub QoS 플로우를 이 용한 RAN에서 스케쥴링을 지원하기 위한 것으로, 사용자의 선택 또는 서비스 사업자의 정책에 따라 서로 다른 미디어 특성을 가지는 패킷들로 멀티플렉싱 된 서비스 데이터 프로우를 통해 서비스를 이용할 수 있다. 단계 502에서, 상기 단계 501에서 결정된 사항에 기반하여 AF은 NEF 로 PDU set 핸들링 및 Sub QoS 플로우 핸들링 관 련 정보를 NEF로 송신할 수 있다. 구체적으로, PDU set 핸들링 및 Sub QoS 핸들링 관련 정보는 PDU set 기반 서 비스 지원시 사용할 PDU set 핸들링 지시자 (예를 들어, PDU set handling indication) 및 sub QoS 플로우 생 성 지원 지시자(예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator) 중 적어도 하나를 포함할 수 있다. PDU set 핸들링 및 sub QoS 플로우 핸들링 관련 정보는: AF세션 관련 QoS 요구사항 요구 메시지 내에 PDU set 핸들링 지시 (예를 들어, PDU set handling indication), sub QoS 플로우 핸들링 지시자(예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator) 및 각 미디어 타입 별 패킷들의 코덱, 샘플 링 레이트, 서비스 플로우 내의 멀티플렉싱 된 미디어 구성 타입 (예를 들어, Group_RTP_Bundle), AS로부터 해 당 서비스 플로우내의 패킷들의 PDU set handling 제공 여부 (예를 들어, PDU set handling support for all pdu indication) 중 적어도 하나의 정보를 포함하는 프로토콜 디스크립션 등으로 구성될 수 있다. AF는 NEF 엔티티로 AF 세션 관련 QoS 요구사항 (예를 들어, AFsessionWithQoS) 메시지를 송신할 수 있다. 구체 적으로, 상기 AF 세션 관련 QoS 요구사항 메시지에는 PDU set 핸들링 지시자 (예를 들어, PDU set handling indication) 및 sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow support indicator or Sub QoS flow handling indicator), 프로토콜 디스크립션 중 적어도 하나가 포함될 수 있다. 단계 503에서, NEF는 PCF 엔티티로 정책 인가 (예를 들어, PolicyAuthorization) 메시지를 송신할 수 있다. 구 체적으로, 상기 정책 인가 메시지에는 AF로부터 수신한 PDU set 기반의 서비스 지원 시 사용할 PDU set 핸들링 정보 (예를 들어, PDU set handling information), Sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow handling indicator) 및 서비스 관련 요구사항 (예를 들어, PDU set 정보 생성 및 관련 파라미터) 중 적어도 하 나가 포함될 수 있다. 단계 504에서, PCF는 서비스 핸들링 요청의 수락 여부를 판단한 할 수 있다. 이때, PCF는 AF로부터 수신한 PDU set 핸들링을 위한 인지자 및 Sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow handling indicator) 와 프로토콜 디스크립션 내의 정보에 기반하여 서비스 핸들링 요청의 수락 여부를 판단한 할 수 있다. PCF가 서비스 요청을 수락할 경우, PCF는 SMF에게 프로토콜 디스크립션을 송신할 수 있다. 구체적으로, 프로토 콜 디스크립션에는 PCC 규칙(rule) 생성 또는 업데이트 시 AF로부터 수신한 PDU set 핸들링을 위한 인지자 및 sub QoS 플로우 핸들링 지시자 (예를 들어, Sub QoS flow handling indicator)와 서비스 데이터 플로우 관련 정보가 포함될 수 있다. 그러나, PCF 서비스 플로우에 대한 PDU set 핸들링 또는 sub QoS 플로우 핸들링 서비스를 지원하지 못할 수 있 다. 여기서 서비스 플로우에 대한 PDU set 핸들링은 AF로부터 수신한 서비스 요구사항에 기반하여 멀티플렉싱 된 미디어 타입을 포함할 수 있다. PCF가 핸들링 서비스를 지원하지 못할 경우, 단계 305 및 단계 306에서 PCF 는 AF 요구사항과 관련된 메시지에 대한 응답으로 서비스 요청 사항에 대한 거절 메시지를 NEF를 통하여 AF에 송신할 수 있다. 단계 504에서 PCF가 멀티플렉싱된 서비스 데이터 플로우의 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정할 수 있다. PCF가 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정한 경우, PCF는 서비스 플로우 내의 각각 서로 다른 미디어의 특성을 반영하여 서로 다른 QoS를 할당하기로 결정할 수 있다. 이후, PCF는 서로 다른 미디어 특 성을 가지는 패킷을 구분하기 위한 DSCP 마킹 동작 및 DSCP 마킹 관련 정보 (예를 들어, 5QI, ARP)에 기반하여 PCC 규칙 업데이트를 결정 할 수 있다. 또한 PCF는 상기 AF로부터 수신한 PDU set 핸들링 지시자로부터 해당 서비스 플로우 내 패킷들의 PDU set handling에 기반한 별도의 Sub QoS 처리(handling)를 RAN에서 수행됨을 확인할 수 있다. PCF는 별도의 Sub QoS 핸들링 과정을 위하여, 프로토콜 디스크립션 또는 사전에 정의된 정보에 기반하여 Sub QoS 플로우 핸들링 및 PDU set 핸들링 관련 정보를 PCC 규칙 생성 또는 업데이트 시 사용할 수 있다. PCF는 상기 sub QoS 플로우 핸들 링 및 PDU set 핸들링 관련 정보에 기반하여 PCC 규칙을 업데이트할 수 있다. PCF는 PDU set 기반의 Sub QoS 플로우 핸들링 서비스를 제공하기로 결정할 수 있다. 이 경우, 일부 미디어 타입 의 패킷은 별도의 PDU set 정보를 RTP 확장헤더를 통해 제공하지 않을 수 있다. 별도의 PDU set 정보 제공이 없 는 경우, 기본 또는 더미 PDU set information을 추가하는 동작의 지시 정보를 포함하는 PCC 규칙을 통해 업데 이트 동작을 수행할 수 있다. 단계 505 및 단계 506에서, PCF는 NEF를 통하여 AF에게 업데이트 요청 수락과 관련된 메시지를 정책인가 업데이 트 요청 응답 (예를 들어, PolicyAuthorization_update response)및 AF 세션 관련 요구사항 업데이트 요청 응 답 (예를 들어, AFsessionWithQoSCreate response) 메시지를 송신 할 수 있다. 구체적으로, 업데이트 요청은 멀티플렉싱 서비스 데이터 플로우와 관련된 Sub QoS 플로우 핸들링 및 PDU set 핸들링 서비스 관련 정책에 대한 업데이트 요청일 수 있다. 또한, PCF는 AF로부터 단계 302 및 303을 통해 수신한 서비스 요구사항에 기반하여 업데이트 요청 수락과 관련된 메시지를 NEF를 통해 AF에게 송신할 수 있다. AF로 전달 되는 서비스 요구사항에 따른 업데이트 요청 수락 여부 메시지 내에는 서비스와 관련된 정보가 포함 될 수 있다. 상기 서비스와 관련된 정보는 Sub QoS 플로우 기반의 서비스 또는 PDU set 기반의 Sub QoS 플로우 서비스로 구분되어 제공될 수 있다. 이때, PCF로부터 수락된 서비스 정보를 포함하여 송신될 수 있다. 단계 507에서, PCF는 프로토콜 디스크립션 등에 기반하여 업데이트 된 PCC 규칙 (예를 들어, PCC rule)을 세션 정책 제어 업데이트 통보 (예를 들어, Npcf_SMPolicyControl_UpdateNotify) 요청 메시지를 통해 SMF에 송신할 줄 수 있다. 구체적으로, 프로토콜 디스크립션은 RAN에서 PDU set handling 서비스 지원을 위한 지시자 및 PDU set QoS profile 등 관련 정보와 Sub QoS 플로우 핸들링 서비스 지원을 위한 Sub QoS 플로우 구분을 위한 동일 QoS 플로우내의 서로 다른 미디어 패킷들의 정보에 기반하여 패킷 Outer IP header 내에 DSCP 정보 마킹 동작 지시자 및 각 Sub QoS 플로우의 5QI 등 관련 정보, 멀티 플렉싱 된 서비스 데이터 플로우 관련 프로토콜 정보 및 미디어 타입 정보 중 적어도 하나를 포함할 수 있다. 단계 508에서, PCF로부터 Sub QoS 플로우 구분을 위한 동일 QoS 플로우 내의 서로 다른 미디어 패킷들의 정보에 기반하여 패킷 Outer IP header 내에 DSCP 정보 마킹 동작 지시자를 수신한 SMF는 DSCP 값을 결정할 수 있다. DSCP 값은 마킹시 패킷 간의 구분을 위해 이용되는 정보로, SMF는 5QI 및 ARP 정보에 기반하여 이를 생성할 수 있다. 현재 네트워크의 다른 서비스에서 DSCP 값을 사용 중인 경우, SMF는 PCF에서 수신한 5QI 값에 기반하여 다른 서비스에서 사용하지 않는 DSCP값을 검출하고 5QI와 임의로 맵핑하여 DSCP 값을 할당해 줄 수 있다. 단계 509에서, SMF는 PDR 정보를 N4 세션 수정 요청 (예를 들어, N4 session Modification Request) 메시지를 통해 UPF로 송신할 수 있다. 구체적으로, PDR 정보는 Sub QoS 플로우 관련 정보, 서비스 플로우 내의 미디어 타 입별 패킷 검출을 위한 필터 정보 중 적어도 하나를 포함할 수 있다. PDU set 기반의 Sub QoS 플로우 핸들링 서 비스일 경우 PCF를 통해 PDU set 기반의 서비스 지원을 위한 PDU set 정보 검출 규칙, PDU set 정보가 전달되지 않는 패킷들에 대한 더미 PDU set 정보 생성 규칙 및 관련 파라미터 정보를 포함한 PDU Set 핸들링 정보 중 적 어도 하나를 포함할 수 있다. 또한, Sub QoS 관련 정보에는 단계 307에서 PCF를 통해 수신한 Sub QoS 핸들링 지 원을 위한 Sub QoS 플로우 생성 지시자 및 Sub QoS 플로우의 QFI 중 적어도 하나가 포함될 수 있다. 단계 510에서, UPF는 SMF로 N4 세션 수정 요청 메시지에 대한 응답으로, 서비스 요청에 대한 응답 (예를 들어, N4 Session Modification Response) 메시지를 송신할 수 있다. 단계 511에서, SMF는 N2 SM 정보를 N1N2 메세지 전달 (예를 들어, Namf_Communication_N1N2MessageTransfer) 메시지를 통해 AMF로 송신할 수 있다. 구체적으로, N2 SM 정보 및 N1 SM 컨테이너는 PCF로부터 수신한 정보, 업 데이트된 QFI 및 DSCP 값, 및 5QI 맵핑 정보 중 적어도 하나를 포함할 수 있다. 구체적으로, QFI는 SMF에서 생성된 DSCP 값에 기반하여 멀티플렉싱 된 서비스 데이터 플로우 내의 Sub QoS를 구분하기 위한 정보를 RAN으로 전달하기 위하여 업데이트 될 수 있다. PDU set 기반의 Sub QoS 플로우 핸들링 서비스일 경우, PCF에서 생성하 거나 또는 AF로부터 전달 받은 PDU set QoS profile 정보는 N2 SM 정보에 포함되어 송신될 수 있다. 단계 512에서, AMF는 N2 SM 정보를 N2 메시지 (예를 들어, N2 message)를 이용하여 RAN으로 송신할 수 있다. 구체적으로, N2 SM 정보에는 Sub QoS 플로우 핸들링 및 PDU set 핸들링 서비스를 지원하기 위해 업데이트된 QFI 및 DSCP 값, 5QI 맵핑 정보, 및 PDU set QoS profile 중 적어도 하나가 포함될 수 있다. 단계 513에서, RAN은 PDU set 핸들링 서비스를 지원하기 위하여 업데이트 된 QoS rule 등을 포함하는 N1 SM 컨 테이너 (예를 들어, AN-specific resource modification of transport)를 UE로 전달할 수 있다. 상향링크를 통 해 UE로부터 전달되는 데이터들도 멀티플렉싱 되어 RAN으로 전달된 경우, UPF에서 사용한 DSCP 값과 5QI 맵핑 정보 및 DSCP 마킹 지시 정보를 QoS rule 내에 포함하여 UE로 전달할 수 있다. 단계 514에서, AMF는 RAN으로부터 단계 512에서 송신된 정보에 기반하여 UE 및 RAN의 서비스 관련 응답 메시지 를 수신할 수 있다. 단계 515 에서, AMF는 상기 단계 514에서 수신한 서비스 관련 응답 메시지를 SMF로 송신하여 세션 관련 정보를 업데이트 동작 요청 (예를 들어, Nsmf_PDUSession_UpdateSMContextt Request) 메시지를 송신할 수 있다. 단계 316에서, SMF는 상기 단계 315에서 수신한 세션 관련 정보에 대한 업데이트 요청 메시지에 대한 응답으로 AMF로 세션 관련 정보에 대한 업데이트 응답 (예를 들어, Nsmf_PDUSession_UpdateSMContext Response) 메시지 를 송신할 수 있다. 단계 517에서, UPF는 해당 미디어 타입 별 패킷을 SMF로부터 수신한 DSCP 정보에 기반하여 각 미디어 패킷 별로 DSCP 마킹을 수행할 수 있다. UPF는 Outer IP header내에 DSCP 마킹을 수행하며 해당 DSCP 값에 기반하여 동일 QoS 플로우 내의 패킷들을 구분 할 수 있다. 상기 패킷 구분 과정을 통해 서로 다른 미디어 특성을 가지는 패킷 들은 서로 다른 DSCP 값을 가질 수 있으며, 동일 QoS 플로우를 통해 RAN으로 전달할 수 있다. UPF는 PDU set 기반의 Sub QoS 플로우 패킷 핸들링을 지원하기 위하여 DN 내의 AS로부터 N6 구간을 통해 UPF로 전달되는 RTP 패킷 헤더 확장 필드 내의 PDU set 정보를 검출할 수 있다. PDU set 기반의 정보가 없는 미디어 타입의 패킷일 경우, UPF는 기본 PDU set information을 생성할 수 있다. PDU set 기반의 Sub QoS 플로우로의 맵핑 동작을 요청받은 UPF는 검출된 또는 생성된 기본 PDU set 정보를 GTP- U 헤더를 통해 RAN으로 전달할 수 있다. 구체적으로 PDU Set 정보는, PDU 셋 시퀀스 넘버 (예를 들어, PDU Set Sequence Number), PDU 셋의 마지막 PDU (예를 들어, End PDU of the PDU Set), PDU 셋의 바이트 사이즈 (예를 들어, PDU Set Size in bytes), PDU 셋 내 PDU 시퀀스 넘버 (예를 들어, PDU SN within a PDU Set), PDU 셋 중 요도 (예를 들어, PDU Set Importance) 중 적어도 하나로 구성될 수 있다. 단계 518에서, RAN에서는 UPF로부터 동일 QoS 플로우로 수신한 패킷들을 해당 패킷들의 헤더 내의 DSCP 값에 기 반하여 패킷들을 구분할 수 있다. 이후 RAN에서는 SMF에서 전달된 DSCP 값과 5QI 맵핑 정보에 기반하여 RAN으로 전달되는 패킷들의 QoS 특성을 고려한 RAN 스케쥴링 동작을 수행할 수 있다. 또한 RAN은 SMF로부터 수신한 PDU set QoS profile 및 PDU set information에 기반하여 PDU set 기반의 RAN 스케쥴링 동작을 수행할 수 있다. 구체적으로, PDU set 기반의 Sub QoS 플로우의 경우, 동일한 Sub QoS 플로우 내 패킷들은 PDU set information 에 기반하여 추가적으로 PDU set로 구분될 수 있다. 구분된 Sub QoS 플로우 내 피킷들은 PDU set의 중요도를 바 탕으로 스케쥴링을 수행할 수 있다. 도 6은 본 발명의 일 실시예에 따른 네트워크 엔티티의 구조를 도시한 도면이다. 도 6의 네트워크 엔티티는 전술한 바와 같이 AMF, SMF, PCF, UDM, UPF, NEF, AF 등의 NF 중 하나를 의미할 수 있다. 도 6을 참조하면, 네트워크 엔티티는 송수신부, 제어부 및 저장부를 포함하여 구성될 수 있다. 본 발명에서 제어부는, 회로 또는 어플리케이션 특정 통합 회로 또는 적어도 하나의 프로세서라고 정의될 수 있 다. 송수신부는 다른 네트워크 엔티티와 신호를 송수신할 수 있다. 송수신부는 예를 들어, 단말 또는 타 네트워크 엔티티로부터 신호를 수신할 수 있다.제어부는 본 발명에서 제시하는 실시예에 따른 네트워크 엔티티의 전반적인 동작을 제어할 수 있다. 구체 적으로, 제어부는 도 1 내지 도 5의 흐름도 상에서의 동작을 수행하도록 각 블록 간 신호 흐름을 제어할 수 있다. 저장부는 상기 송수신부를 통해 송수신되는 정보 및 제어부를 통해 생성되는 정보 중 적어도 하 나를 저장할 수 있다. 예를 들어, 저장부는 PDU Session ID, DNN, SM Context ID, old S-NSSAI, Alternative S-NSSAI 정보 등을 저장할 수 있다. 한편, 본 명세서와 도면에 개시된 본 발명의 실시예들은 본 발명의 기술 내용을 쉽게 설명하고 본 발명의 이해 를 돕기 위해 특정 예를 제시한 것일 뿐이며, 본 발명의 범위를 한정하고자 하는 것은 아니다. 즉 본 발명의 기 술적 사상에 바탕을 둔 다른 변형예들이 실시 가능하다는 것은 본 발명의 속하는 기술 분야에서 통상의 지식을 가진 자에게 자명한 것이다. 또한 상기 각각의 실시 예는 필요에 따라 서로 조합되어 운용할 수 있다. 예컨대, 본 발명의 실시예들 각각의 적어도 일부분이 서로 조합되어 기지국, 단말 또는 특정 네트워크 엔티티에 의해 운 용될 수 있다. 상술한 본 개시의 구체적인 실시 예들에서, 개시에 포함되는 구성 요소는 제시된 구체적인 실시 예에 따라 단수 또는 복수로 표현되었다. 그러나, 단수 또는 복수의 표현은 설명의 편의를 위해 제시한 상황에 적합하게 선택된 것으로서, 본 개시가 단수 또는 복수의 구성 요소에 제한되는 것은 아니며, 복수로 표현된 구성 요소라 하더라 도 단수로 구성되거나, 단수로 표현된 구성 요소라 하더라도 복수로 구성될 수 있다. 본 개시의 청구항 또는 명세서에 기재된 실시예들에 따른 방법들은 하드웨어, 소프트웨어, 또는 하드웨어와 소 프트웨어의 조합의 형태로 구현될(implemented) 수 있다. 소프트웨어로 구현하는 경우, 하나 이상의 프로그램(소프트웨어 모듈)을 저장하는 컴퓨터 판독 가능 저장 매체 가 제공될 수 있다. 컴퓨터 판독 가능 저장 매체에 저장되는 하나 이상의 프로그램은, 전자 장치(device) 내의 하나 이상의 프로세서에 의해 실행 가능하도록 구성된다(configured for execution). 하나 이상의 프로그램은, 전자 장치로 하여금 본 개시의 청구항 또는 명세서에 기재된 실시예에 따른 방법들을 실행하게 하는 명령어 (instructions)를 포함할 수 있다. 이러한 프로그램(소프트웨어 모듈, 소프트웨어)은 랜덤 액세스 메모리 (random access memory), 플래시(flash) 메모리를 포함하는 불휘발성(non-volatile) 메모리, 롬(ROM: Read Only Memory), 전기적 삭제가능 프로그램가 능 롬(EEPROM: Electrically Erasable Programmable Read Only Memory), 자기 디스크 저장 장치(magnetic disc storage device), 컴팩트 디스크 롬(CD-ROM: Compact Disc-ROM), 디지털 다목적 디스크(DVDs: Digital Versatile Discs) 또는 다른 형태의 광학 저장 장치, 마그네틱 카세트(magnetic cassette)에 저장될 수 있다. 또는, 이들의 일부 또는 전부의 조합으로 구성된 메모리에 저장될 수 있다. 또한, 각각의 구성 메모리는 복수 개 포함될 수도 있다. 또한, 프로그램은 인터넷(Internet), 인트라넷(Intranet), LAN(Local Area Network), WLAN(Wide LAN), 또는 SAN(Storage Area Network)과 같은 통신 네트워크, 또는 이들의 조합으로 구성된 통신 네트워크를 통하여 접근 (access)할 수 있는 부착 가능한(attachable) 저장 장치(storage device)에 저장될 수 있다. 이러한 저장 장치 는 외부 포트를 통하여 본 개시의 실시예를 수행하는 장치에 접속할 수 있다. 또한, 통신 네트워크 상의 별도의 저장 장치가 본 개시의 실시예를 수행하는 장치에 접속할 수도 있다. 상술한 본 개시의 구체적인 실시 예들에서, 본 개시에 포함되는 구성 요소는 제시된 구체적인 실시 예에 따라 단수 또는 복수로 표현되었다. 그러나, 단수 또는 복수의 표현은 설명의 편의를 위해 제시한 상황에 적합하게 선택된 것으로서, 본 개시가 단수 또는 복수의 구성 요소에 제한되는 것은 아니며, 복수로 표현된 구성 요소라 하더라도 단수로 구성되거나, 단수로 표현된 구성 요소라 하더라도 복수로 구성될 수 있다. 개시의 상세한 설명에서는 구체적인 실시 예에 관해 설명하였으나, 본 개시의 범위에서 벗어나지 않는 한도 내 에서 여러 가지 변형이 가능함은 물론이다. 그러므로 본 개시의 범위는 설명된 실시 예에 국한되어 정해져서는 아니 되며 후술하는 특허청구의 범위만 아니라 이 특허청구의 범위와 균등한 것들에 의해 정해져야 한다.도면 도면1 도면2 도면3a 도면3b 도면3c 도면3d 도면3e 도면3f 도면4 도면5a 도면5b 도면5c 도면6"}
{"patent_id": "10-2024-0109152", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시예에 따른 5G 시스템의 네트워크 구조 및 인터페이스를 도시한 도면이다. 도 2는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 패킷들을 그룹화 단위로 구분하기 위한 동작을 도시한 도면이다. 도 3a은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방법을 도시한 도면 이다. 도 3b은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방법을 도시한 도면 이다. 도 3c은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방법을 도시한 도면 이다. 도 3d는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방법을 도시한 도면 이다. 도 3e는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방법을 도시한 도면 이다. 도 3f는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 방법을 도시한 도면 이다. 도 4는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링을 수행하기 위한 동작을 도시한 도면 이다. 도 5a은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링 동작을 수행하기 위한 방법을 동작을 도시한 도면이다. 도 5b은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링 동작을 수행하기 위한 방법을 동작을 도시한 도면이다. 도 5c은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 RAN 스케쥴링 동작을 수행하기 위한 방법을 동작을 도시한 도면이다. 도 6은 본 발명의 일 실시예에 따른 네트워크 엔티티의 구조를 도시한 도면이다."}
