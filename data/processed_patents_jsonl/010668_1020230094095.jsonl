{"patent_id": "10-2023-0094095", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0014317", "출원번호": "10-2023-0094095", "발명의 명칭": "카메라 캘리브레이션 방법 및 장치", "출원인": "현대자동차주식회사", "발명자": "이중현"}}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "호스트 차량의 카메라에 의해 촬영되는 영상을 수신하는 단계;상기 영상에서 상기 호스트 차량의 차량 영역을 검출하는 단계; 및상기 차량 영역을 기반으로 상기 카메라의 자세를 추정하는 단계를 포함하고,상기 차량 영역을 검출하는 단계는,상기 영상으로부터 각 영역에 대한 에지 포인트를 검출하고, RANSAC(RANdom SAmple Consensus)을 이용하여 상기각 영역의 에지 포인트에 대한 이상치(outlier) 개수를 측정하며, 상기 이상치 개수가 미리 설정된 일정값 이하인 영역을 상기 차량 영역으로 검출하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 카메라의 자세를 추정하는 단계는,상기 차량 영역을 기반으로 상기 차량 영역의 기울기를 추정하고 상기 차량 영역의 특징점을 추출하며, 상기 기울기와 상기 특징점을 이용하여 상기 카메라의 자세를 추정하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 카메라의 자세를 추정하는 단계는,상기 차량 영역의 테두리에 대한 기울기를 추정하고, 상기 추정된 테두리의 기울기를 기반으로 상기 카메라의롤(roll)을 추정하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 카메라의 자세를 추정하는 단계는,상기 차량 영역의 에지 포인트를 상기 추정된 롤로 보상하고, 상기 롤로 보상된 에지 포인트의 3차원 원과 상기카메라의 광축의 3차원 원을 생성한 후 두 3차원 원의 제1 끼인각을 계산하며, 상기 카메라의 미리 설정된 설계치값과 상기 롤로 보상된 에지 포인트의 제2 끼인각을 계산하고, 상기 제1 끼인각과 상기 제2 끼인각을 이용하여 상기 카메라의 팬(pan)을 추정하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 카메라의 자세를 추정하는 단계는,공개특허 10-2025-0014317-3-상기 차량 영역의 에지 포인트와 상기 특징점을 상기 추정된 롤과 팬으로 보상하고, 상기 롤과 팬으로 보상된상기 차량 영역의 테두리와 상기 특징점을 이용하여 상기 테두리에 수직인 특징점 벡터를 계산하며, 상기 특징점 벡터의 3차원 원과 상기 카메라의 광축의 3차원 원의 제3 끼인각을 계산하고, 상기 설계치값과 상기 롤과 팬으로 보상된 특징점의 제4 끼인각을 계산하며, 상기 제3 끼인각과 상기 제4 끼인각을 이용하여 상기 카메라의틸트(tilt)를 추정하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 카메라의 자세를 추정하는 단계는,상기 차량 영역을 기반으로 소실선에 대응하는 직선을 검출하고, 상기 검출된 직선과 상기 호스트 차량의 주행중 상기 영상을 통해 검출된 소실점을 이용하여 상기 카메라의 자세를 추정하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 카메라의 자세를 추정하는 단계는,상기 차량 영역을 통해 곡선이 검출되는 경우, 상기 곡선과 상기 차량 영역에 대한 곡선 정보를 이용하여 상기직선에 대응하는 가상선을 생성하며, 상기 가상선과 상기 소실점을 이용하여 상기 카메라의 자세를 추정하는,카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 카메라의 자세를 추정하는 단계는,상기 차량 영역을 기반으로 상기 차량 영역에 대한 수평 방향 정보와 수직 방향 정보가 검출되는 경우, 상기 수평 방향 정보와 상기 수직 방향 정보를 기반으로 상기 카메라의 자세를 추정하는, 카메라 캘리브레이션 방법."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "호스트 차량의 카메라에 의해 촬영되는 영상을 수신하는 수신부;상기 영상에서 상기 호스트 차량의 차량 영역을 검출하는 검출부; 및상기 차량 영역을 기반으로 상기 카메라의 자세를 추정하는 추정부를 포함하고,상기 검출부는,상기 영상으로부터 각 영역에 대한 에지 포인트를 검출하고, RANSAC을 이용하여 상기 각 영역의 에지 포인트에대한 이상치 개수를 측정하며, 상기 이상치 개수가 미리 설정된 일정값 이하인 영역을 상기 차량 영역으로 검출하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 추정부는,공개특허 10-2025-0014317-4-상기 차량 영역을 기반으로 상기 차량 영역의 기울기를 추정하고 상기 차량 영역의 특징점을 추출하며, 상기 기울기와 상기 특징점을 이용하여 상기 카메라의 자세를 추정하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서,상기 추정부는,상기 차량 영역의 테두리에 대한 기울기를 추정하고, 상기 추정된 테두리의 기울기를 기반으로 상기 카메라의롤(roll)을 추정하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 추정부는,상기 차량 영역의 에지 포인트를 상기 추정된 롤로 보상하고, 상기 롤로 보상된 에지 포인트의 3차원 원과 상기카메라의 광축의 3차원 원을 생성한 후 두 3차원 원의 제1 끼인각을 계산하며, 상기 카메라의 미리 설정된 설계치값과 상기 롤로 보상된 에지 포인트의 제2 끼인각을 계산하고, 상기 제1 끼인각과 상기 제2 끼인각을 이용하여 상기 카메라의 팬(pan)을 추정하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 추정부는,상기 차량 영역의 에지 포인트와 상기 특징점을 상기 추정된 롤과 팬으로 보상하고, 상기 롤과 팬으로 보상된상기 차량 영역의 테두리와 상기 특징점을 이용하여 상기 테두리에 수직인 특징점 벡터를 계산하며, 상기 특징점 벡터의 3차원 원과 상기 카메라의 광축의 3차원 원의 제3 끼인각을 계산하고, 상기 설계치값과 상기 롤과 팬으로 보상된 특징점의 제4 끼인각을 계산하며, 상기 제3 끼인각과 상기 제4 끼인각을 이용하여 상기 카메라의틸트(tilt)를 추정하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제9항에 있어서,상기 추정부는,상기 차량 영역을 기반으로 소실선에 대응하는 직선을 검출하고, 상기 검출된 직선과 상기 호스트 차량의 주행중 상기 영상을 통해 검출된 소실점을 이용하여 상기 카메라의 자세를 추정하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서,상기 추정부는,상기 차량 영역을 통해 곡선이 검출되는 경우, 상기 곡선과 상기 차량 영역에 대한 곡선 정보를 이용하여 상기직선에 대응하는 가상선을 생성하며, 상기 가상선과 상기 소실점을 이용하여 상기 카메라의 자세를 추정하는,카메라 캘리브레이션 장치.공개특허 10-2025-0014317-5-청구항 16 제9항에 있어서,상기 추정부는,상기 차량 영역을 기반으로 상기 차량 영역에 대한 수평 방향 정보와 수직 방향 정보가 검출되는 경우, 상기 수평 방향 정보와 상기 수직 방향 정보를 기반으로 상기 카메라의 자세를 추정하는, 카메라 캘리브레이션 장치."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법은, 호스트 차량의 카메라에 의해 촬영되는 영상을 수신 하는 단계; 상기 영상에서 상기 호스트 차량의 차량 영역을 검출하는 단계; 및 상기 차량 영역을 기반으로 상기 카메라의 자세를 추정하는 단계를 포함하고, 상기 차량 영역을 검출하는 단계는, 상기 영상으로부터 각 영역에 대한 에지 포인트를 검출하고, RANSAC(RANdom SAmple Consensus)을 이용하여 상기 각 영역의 에지 포인트에 대 한 이상치(outlier) 개수를 측정하며, 상기 이상치 개수가 미리 설정된 일정값 이하인 영역을 상기 차량 영역으 로 검출하는 것을 특징으로 한다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 카메라 캘리브레이션 기술에 관한 것으로, 보다 구체적으로 호스트 차량의 주행 중 촬영되는 호스트 차량의 차량 형상 또는 차량 영역을 기반으로 카메라의 자세를 추정할 수 있는 카메라 캘리브레이션 방법 및 장 치에 관한 것이다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "자율주행 차량의 운행을 위해서는 여러가지 영상 인식 기술이 필요하다. 일 예로 주행 중의 차선을 파악하고, 소실점(vanishing point)을 파악하는 것도 중요한 요소 중 하나이다. 소실점이란 3차원 공간상에서 평행하는 직선들을 무한히 연장하고 이를 2차원 평면으로 투영하였을 때 그 평면 상의 한 점에서 만나게 되는 지점을 가리킨다. 소실점 검출을 활용한 예로는, 세 개의 서로 직교하는 방향의 소 실점과 소실선을 구함으로써, 인공구조물(architectural)을 해석하여 건물을 재해석할 수도 있다. 인공 구조물 이 포함된 2차원 영상의 3차원 변환에서는 소실점을 검출함으로써 깊이 맵(depth map)를 생성할 수 있다. 이는 3차원 공간이 2차원 영상으로 변하면서 소실점이 위치하는 부분은 일반적으로 영상 내에서 가장 먼 곳에 해당하 므로 상대적인 깊이 추정이 가능하기 때문이다. 그리고, 소실점 정보는 자율주행 차량에 있어서 차선 검출(lane detection)의 기준 또는 로봇 등의 자율 주행 시스템에서 위치 정보 분석에 중요한 기반이 된다. 이는 소실점에서 이어지는 주요한 에지(edge)를 연결하여 도 로를 검출할 수 있기 때문이다. 차량은 주행 중 영상 내의 라인 세그먼트(line segments)로 소실점을 추정하고, 추정된 소실점을 바탕으로 하나 의 소실선을 추정함으로써, 카메라와 노면의 외부 파라미터(extrinsic parameters)를 추정하고, 이를 통해 카메 라의 자세를 추정할 수 있다. 하지만, 차량의 주행 중에는 영상 왜곡으로 인한 소실점 정확도가 저하되고, 주행 중 차량 거동에 따른 소실점 바운딩 현상으로 인해 정확한 소실선을 추정하기 어려운 문제가 있다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시의 기술적 과제는, 호스트 차량의 주행 중 촬영되는 호스트 차량의 차량 형상 또는 차량 영역을 기반으 로 카메라의 자세를 추정할 수 있는 카메라 캘리브레이션 방법 및 장치를 제공하는데 그 목적이 있다. 본 개시의 기술적 과제는, 카메라에 의해 촬영되는 호스트 차량의 차량 영역에 대한 정보 예를 들어, 수평 방향 정보와 수직 방향 정보 중 적어도 하나의 정보와 주행 중 취득이 가능한 소실점을 이용하여 카메라 자세를 추정 할 수 있는 카메라 캘리브레이션 방법 및 장치를 제공하는데 그 목적이 있다. 본 개시의 기술적 과제는, 카메라에 의해 촬영되는 호스트 차량의 차량 영역에 대한 수평 방향 정보 예를 들어, 손잡이, 보닛 등의 정보와 수직 방향 정보 예를 들어, 차량 옆면 등에 대한 정보를 취득 가능한 경우 소실점을 검출하지 않아도, 두 방향 정보만으로 카메라 자세를 추정할 수 있는 카메라 캘리브레이션 방법 및 장치를 제공 하는데 그 목적이 있다.본 개시의 기술적 과제는, 맨해튼 월드 가정(Manhattan World Assumption, MWA)에 위배되는 곡선과 직선이 검출 되는 경우 MWA에 적합한 직선으로 변형 또는 생성하거나 보정함으로써, 차량에서 검출할 수 있는 모든 곡선과 직선들을 활용하여 카메라의 자세를 추정할 수 있는 카메라 캘리브레이션 방법 및 장치를 제공하는데 그 목적이 있다. 본 개시에서 이루고자 하는 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급하지 않은"}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 2, "content": "또 다른 기술적 과제들은 아래의 기재로부터 본 개시가 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하 게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법은, 호스트 차량의 카메라에 의해 촬영되는 영상을 수신 하는 단계; 상기 영상에서 상기 호스트 차량의 차량 영역을 검출하는 단계; 및 상기 차량 영역을 기반으로 상기 카메라의 자세를 추정하는 단계를 포함하고, 상기 차량 영역을 검출하는 단계는, 상기 영상으로부터 각 영역에 대한 에지 포인트를 검출하고, RANSAC(RANdom SAmple Consensus)을 이용하여 상기 각 영역의 에지 포인트에 대 한 이상치(outlier) 개수를 측정하며, 상기 이상치 개수가 미리 설정된 일정값 이하인 영역을 상기 차량 영역으 로 검출하는 것을 특징으로 한다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역을 기반으로 상기 차량 영역의 기 울기를 추정하고 상기 차량 영역의 특징점을 추출하며, 상기 기울기와 상기 특징점을 이용하여 상기 카메라의 자세를 추정할 수 있다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역의 테두리에 대한 기울기를 추정 하고, 상기 추정된 테두리의 기울기를 기반으로 상기 카메라의 롤(roll)을 추정할 수 있다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역의 에지 포인트를 상기 추정된 롤 로 보상하고, 상기 롤로 보상된 에지 포인트의 3차원 원과 상기 카메라의 광축의 3차원 원을 생성한 후 두 3차 원 원의 제1 끼인각을 계산하며, 상기 카메라의 미리 설정된 설계치값과 상기 롤로 보상된 에지 포인트의 제2 끼인각을 계산하고, 상기 제1 끼인각과 상기 제2 끼인각을 이용하여 상기 카메라의 팬(pan)을 추정할 수 있다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역의 에지 포인트와 상기 특징점을 상기 추정된 롤과 팬으로 보상하고, 상기 롤과 팬으로 보상된 상기 차량 영역의 테두리와 상기 특징점을 이용하 여 상기 테두리에 수직인 특징점 벡터를 계산하며, 상기 특징점 벡터의 3차원 원과 상기 카메라의 광축의 3차원 원의 제3 끼인각을 계산하고, 상기 설계치값과 상기 롤과 팬으로 보상된 특징점의 제4 끼인각을 계산하며, 상기 제3 끼인각과 상기 제4 끼인각을 이용하여 상기 카메라의 틸트(tilt)를 추정할 수 있다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역을 기반으로 소실선에 대응하는 직선을 검출하고, 상기 검출된 직선과 상기 호스트 차량의 주행 중 상기 영상을 통해 검출된 소실점을 이용하여 상기 카메라의 자세를 추정할 수 있다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역을 통해 곡선이 검출되는 경우, 상기 곡선과 상기 차량 영역에 대한 곡선 정보를 이용하여 상기 직선에 대응하는 가상선을 생성하며, 상기 가상 선과 상기 소실점을 이용하여 상기 카메라의 자세를 추정할 수 있다. 일 실시 예에 따르면, 상기 카메라의 자세를 추정하는 단계는, 상기 차량 영역을 기반으로 상기 차량 영역에 대 한 수평 방향 정보와 수직 방향 정보가 검출되는 경우, 상기 수평 방향 정보와 상기 수직 방향 정보를 기반으로 상기 카메라의 자세를 추정할 수 있다. 본 개시의 다른 실시 예에 따른 카메라 캘리브레이션 장치는, 호스트 차량의 카메라에 의해 촬영되는 영상을 수 신하는 수신부; 상기 영상에서 상기 호스트 차량의 차량 영역을 검출하는 검출부; 및 상기 차량 영역을 기반으 로 상기 카메라의 자세를 추정하는 추정부를 포함하고, 상기 검출부는, 상기 영상으로부터 각 영역에 대한 에지 포인트를 검출하고, RANSAC을 이용하여 상기 각 영역의 에지 포인트에 대한 이상치 개수를 측정하며, 상기 이상 치 개수가 미리 설정된 일정값 이하인 영역을 상기 차량 영역으로 검출하는 것을 특징으로 한다. 일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역을 기반으로 상기 차량 영역의 기울기를 추정하고 상기 차 량 영역의 특징점을 추출하며, 상기 기울기와 상기 특징점을 이용하여 상기 카메라의 자세를 추정할 수 있다.일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역의 테두리에 대한 기울기를 추정하고, 상기 추정된 테두리 의 기울기를 기반으로 상기 카메라의 롤(roll)을 추정할 수 있다. 일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역의 에지 포인트를 상기 추정된 롤로 보상하고, 상기 롤로 보상된 에지 포인트의 3차원 원과 상기 카메라의 광축의 3차원 원을 생성한 후 두 3차원 원의 제1 끼인각을 계 산하며, 상기 카메라의 미리 설정된 설계치값과 상기 롤로 보상된 에지 포인트의 제2 끼인각을 계산하고, 상기 제1 끼인각과 상기 제2 끼인각을 이용하여 상기 카메라의 팬(pan)을 추정할 수 있다. 일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역의 에지 포인트와 상기 특징점을 상기 추정된 롤과 팬으로 보상하고, 상기 롤과 팬으로 보상된 상기 차량 영역의 테두리와 상기 특징점을 이용하여 상기 테두리에 수직인 특징점 벡터를 계산하며, 상기 특징점 벡터의 3차원 원과 상기 카메라의 광축의 3차원 원의 제3 끼인각을 계산 하고, 상기 설계치값과 상기 롤과 팬으로 보상된 특징점의 제4 끼인각을 계산하며, 상기 제3 끼인각과 상기 제4 끼인각을 이용하여 상기 카메라의 틸트(tilt)를 추정할 수 있다. 일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역을 기반으로 소실선에 대응하는 직선을 검출하고, 상기 검 출된 직선과 상기 호스트 차량의 주행 중 상기 영상을 통해 검출된 소실점을 이용하여 상기 카메라의 자세를 추 정할 수 있다. 일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역을 통해 곡선이 검출되는 경우, 상기 곡선과 상기 차량 영 역에 대한 곡선 정보를 이용하여 상기 직선에 대응하는 가상선을 생성하며, 상기 가상선과 상기 소실점을 이용 하여 상기 카메라의 자세를 추정할 수 있다. 일 실시 예에 따르면, 상기 추정부는, 상기 차량 영역을 기반으로 상기 차량 영역에 대한 수평 방향 정보와 수 직 방향 정보가 검출되는 경우, 상기 수평 방향 정보와 상기 수직 방향 정보를 기반으로 상기 카메라의 자세를 추정할 수 있다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 2, "content": "본 개시에 대하여 위에서 간략하게 요약된 특징들은 후술하는 본 개시의 상세한 설명의 예시적인 양상일 뿐이며, 본 개시의 범위를 제한하는 것은 아니다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시에 따르면, 호스트 차량의 주행 중 촬영되는 호스트 차량의 차량 형상 또는 차량 영역을 기반으로 카메 라의 자세를 추정할 수 있는 카메라 캘리브레이션 방법 및 장치를 제공할 수 있다. 본 개시에 따르면, 카메라에 의해 촬영되는 호스트 차량의 차량 영역에 대한 정보 예를 들어, 수평 방향 정보와 수직 방향 정보 중 적어도 하나의 정보와 주행 중 취득이 가능한 소실점을 이용하여 카메라 자세를 추정할 수 있다. 본 개시에 따르면, 카메라에 의해 촬영되는 호스트 차량의 차량 영역에 대한 수평 방향 정보 예를 들어, 손잡이, 보닛 등의 정보와 수직 방향 정보 예를 들어, 차량 옆면 등에 대한 정보를 취득 가능한 경우 소실점을 검출하지 않아도, 두 방향 정보만으로 카메라 자세를 추정할 수 있다. 본 개시에 따르면, MWA에 위배되는 곡선과 직선이 검출되는 경우 MWA에 적합한 직선으로 변형 또는 생성하거나 보정함으로써, 차량에서 검출할 수 있는 모든 곡선과 직선들을 활용하여 카메라의 자세를 추정할 수 있다. 본 개시에서 얻을 수 있는 효과는 이상에서 언급한 효과들로 제한되지 않으며, 언급하지 않은 또 다른 효과들은 아래의 기재로부터 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0094095", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하에서는 첨부한 도면을 참고로 하여 본 개시의 실시 예에 대하여 본 개시가 속하는 기술 분야에서 통상의 지 식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나, 본 개시는 여러 가지 상이한 형태로 구현 될 수 있으며 여기에서 설명하는 실시 예에 한정되지 않는다. 본 개시의 실시 예를 설명함에 있어서 공지 구성 또는 기능에 대한 구체적인 설명이 본 개시의 요지를 흐릴 수 있다고 판단되는 경우에는 그에 대한 상세한 설명은 생략한다. 그리고, 도면에서 본 개시에 대한 설명과 관계없 는 부분은 생략하였으며, 유사한 부분에 대해서는 유사한 도면 부호를 붙였다. 본 개시에 있어서, 어떤 구성요소가 다른 구성요소와 \"연결\", \"결합\" 또는 \"접속\"되어 있다고 할 때, 이는 직접 적인 연결 관계 뿐만 아니라, 그 중간에 또 다른 구성요소가 존재하는 간접적인 연결관계도 포함할 수 있다. 또 한 어떤 구성요소가 다른 구성요소를 \"포함한다\" 또는 \"가진다\"고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소를 배제하는 것이 아니라 또 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 본 개시에 있어서, 제1, 제2 등의 용어는 하나의 구성요소를 다른 구성요소로부터 구별하는 목적으로만 사용되 며, 특별히 언급되지 않는 한 구성요소들 간의 순서 또는 중요도 등을 한정하지 않는다. 따라서, 본 개시의 범 위 내에서 일 실시 예에서의 제1 구성요소는 다른 실시 예에서 제2 구성요소라고 칭할 수도 있고, 마찬가지로 일 실시 예에서의 제2 구성요소를 다른 실시 예에서 제1 구성요소라고 칭할 수도 있다. 본 개시에 있어서, 서로 구별되는 구성요소들은 각각의 특징을 명확하게 설명하기 위한 것일 뿐, 구성요소들이 반드시 분리되는 것을 의미하지는 않는다. 즉, 복수의 구성요소가 통합되어 하나의 하드웨어 또는 소프트웨어 단위로 이루어질 수도 있고, 하나의 구성요소가 분산되어 복수의 하드웨어 또는 소프트웨어 단위로 이루어질 수 도 있다. 따라서, 별도로 언급하지 않더라도 이와 같이 통합된 또는 분산된 실시 예도 본 개시의 범위에 포함된 다. 본 개시에 있어서, 다양한 실시 예에서 설명하는 구성요소들이 반드시 필수적인 구성요소들을 의미하는 것은 아 니며, 일부는 선택적인 구성요소일 수 있다. 따라서, 일 실시 예에서 설명하는 구성요소들의 부분집합으로 구성 되는 실시 예도 본 개시의 범위에 포함된다. 또한, 다양한 실시 예에서 설명하는 구성요소들에 추가적으로 다른 구성요소를 포함하는 실시 예도 본 개시의 범위에 포함된다. 본 개시에 있어서, 본 명세서에 사용되는 위치 관계의 표현, 예컨대 상부, 하부, 좌측, 우측 등은 설명의 편의 를 위해 기재된 것이고, 본 명세서에 도시된 도면을 역으로 보는 경우에는, 명세서에 기재된 위치 관계는 반대 로 해석될 수도 있다. 본 개시에 있어서, \"A 또는 B\", \"A 및 B 중 적어도 하나\", \"A 또는 B 중 적어도 하나\", \"A, B 또는 C\", \"A, B 및 C 중 적어도 하나\", 및 \"A, B, 또는 C 중 적어도 하나\"와 같은 문구들 각각은 그 문구들 중 해당하는 문구에 함께 나열된 항목들 중 어느 하나, 또는 그들의 모든 가능한 조합을 포함할 수 있다. 본 개시의 실시 예들은, 차량 주행 중 정확한 소실선을 추정하기 어려운 문제를 해결하기 위해, 카메라에 의해 촬영되는 호스트 차량의 차량 형상 또는 차량 영역 예를 들어, 손잡이, 보닛, 차량 옆면 등을 검출하고, 검출된 차량 영역을 소실선 나아가 소실점 대신 활용함으로써, 카메라의 자세 예를 들어, 3축 각도(roll, pan, tilt)에 대한 추정 정확도를 향상시키는 것을 그 요지로 한다. 본 개시의 실시 예들은, 영상 도메인과 가우시안 구체 도메인 간의 변환에 대한 맨해튼 월드 가정(MWA)을 기반 으로, 카메라 자세를 추정할 수 있는데, 구체적으로 MWA를 통해 카메라 광축(optical axis)과 차량 영역의 직선 간의 끼인각을 기반으로 카메라의 팬을 추정할 수 있고, 카메라 광축과 손잡이 등과 같이 특징점 벡터 간의 끼 인각을 기반으로 카메라의 틸트를 추정할 수 있다. 본 개시의 실시 예들은, 영상 내에서 검출되는 호스트 차량의 차량 영역을 분석함으로써, 분석된 차량 영역을 소실점/소실선 대용으로 사용하고, 이를 통해 카메라의 자세를 추정할 수 있다. 이하, 본 개시의 실시 예들에 따른 방법 및 장치에 대하여, 도 1 내지 도 12를 참조하여 설명한다. 도 1은 본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법에 대한 동작 흐름도를 나타낸 것으로, 호스트 차량에 구비되는 카메라 캘리브레이션 장치에 의해 수행될 수 있다. 도 1을 참조하면, 본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법은, 호스트 차량의 주행 중 영상 촬영 수단 예를 들어, 카메라에 의해 촬영되는 영상을 실시간으로 수신하고, 수신된 영상에서 호스트 차량의 차량 영 역을 검출한다(S110, S120). 실시 예에 따라, 단계 S110은 전방 카메라, 후방 카메라, 전측방 카메라와 후측방 카메라 중 적어도 하나의 카 메라에 의해 촬영되는 영상을 수신할 수 있으며, 본 개시의 설명에서는 후측방 카메라에 의해 촬영되는 영상을 수신하는 것으로 설명한다. 실시 예에 따라, 단계 S120은 시간에 따라 변화하지 않는 에지 포인트를 검출함으로써, 영상 내에서 호스트 차 량의 차량 영역을 검출할 수 있다. 단계 S120에 의해 차량 영역이 검출되면, 검출된 차량 영역의 테두리에 대한 기울기를 추정하고, 검출된 차량 영역의 특징점을 추출한 후 추정된 기울기와 추출한 특징점을 기반으로 카메라의 자세 예를 들어, 롤(roll), 팬 (pan)과 틸트(tilt)의 3축 각도를 추정한다(S130, S140, S150). 실시 예에 따라, 단계 S150은, 추정된 기울기를 기반으로 카메라의 롤을 추정할 수 있고, 차량 영역의 테두리의 위치를 기반으로 카메라의 팬을 추정할 수 있으며, 차량 영역의 특징점을 기반으로 카메라의 틸트를 추정함으로 써, 카메라의 자세를 추정할 수 있다. 이러한 본 개시의 실시 예에 따른 방법에 대하여 도 2 내지 도 9를 참조하여 상세히 설명한다. 도 2는 호스트 차량의 차량 영역을 검출하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것으로, 도 1의 단계 S120에 대한 일 실시 예의 동작 흐름도를 나타낸 것이다. 도 2를 참조하면, 호스트 차량의 차량 영역을 검출하는 단계(S120)는, 차량이 일정 속도 이상으로 주행 중인 상 태에서 카메라에 의해 촬영되는 영상 데이터를 호출 또는 수신하여, 영상 왜곡을 보정한 후 왜곡이 보정된 영상 에서 에지 포인트(edge point)를 검출한다(S210, S220, S230). 여기서, 차량이 정지 상태인 경우에는, 시간에 따라 변화하지 않은 시불변의 에지 포인트에 대한 확인이 불가능 하기 때문에, 차량의 속도가 일정 값 이상인 경우에 영상으로부터 에지 포인트를 검출할 수 있다. 단계 S230에 의해 영상 내의 에지 포인트가 검출되면, 시간에 따라 검출된 에지 포인트에 특정 로직 예를 들어, AND 로직을 적용하고, AND 로직이 적용된 에지 포인트에 대하여 RANSAC(RANdom SAmple Consensus)을 적용함으 로써, 이상치(outlier) 개수를 판단하기 위하여, 에지 포인트에 대한 1차 직선을 추출한다(S240). 실시 예에 따라, 단계 S240에서 에지 포인트에 AND 로직을 적용하는 것은, 차량이 이동 또는 주행 중이라도 차 량 영역의 에지 포인트의 위치가 유지되지만, 차량 영역 이외의 에지 포인트는 움직이기에, 차량 영역을 용이하 게 검출하기 위한 것이다. 여기서, RANSAC은 데이터셋에서 노이즈를 제거하고 모델을 예측하는 알고리즘으로, 특정 임계값 이상의 데이터 를 완전히 무시해버리는 특성이 있어 이상치(outlier)에 강건한 알고리즘이며, 노이즈를 반영하지 않고 최대 데 이터가 일치하는 이상적인 모델 예를 들어, 1차 직선을 추출해낼 수 있다. 이러한 RANSAC은 본 개시의 기술 분 야에 종사하는 당업자라면 알 수 있는 내용이기에, 그 상세한 설명은 생략한다. 단계 S240에 의해 에지 포인트에 대한 1차 직선이 추출되면, RANSAC 결과를 이용하여 이상치(outlier) 개수를 측정하고, 이상치 개수가 미리 설정된 일정값 이하인 경우 해당 에지 포인트를 호스트 차량의 차량 영역으로 판 단하고, 이를 통해 호스트 차량의 차량 영역을 검출한다(S250, S260, S270). 예컨대, 이상치가 일정값을 초과한 다는 것 즉, 이상치가 많다는 것은 호스트 차량 외 영역에서 에지 포인트가 검출되었다는 것을 의미하기 때문에, 이상치가 일정값 이하인 경우 해당 영역의 에지 포인트를 차량 영역의 에지 포인트로 판단할 수 있다. 예를 들어, 카메라에 의해 촬영된 영상이 도 4a와 같은 경우, 도 2의 과정을 통해 호스트 차량의 테두리 영역 을 차량 영역으로 검출할 수 있다. 이때, 호스트 차량의 테두리 영역은 도 4a에 도시된 바와 같이, 특징점에 해당하는 손잡이 영역을 포함할 수 있다. 도 3은 카메라 롤을 추정하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것으로, 도 2의 과정에 의해 검 출된 차량 영역을 기반으로 카메라 롤을 추정하는 과정에 대한 동작 흐름도를 나타낸 것이다. 도 3에 도시된 바와 같이, 카메라 롤을 추정하는 과정은, 검출된 차량 영역의 에지 포인트에 대한 RANSAC 결과 인 1차 직선을 호출하고, 차량 영역에 대한 1차 직선에 대하여 수직선 대비 기울기를 계산함으로써, 카메라 롤 을 추정한다(S130, S320, S330). 실시 예에 따라, 단계 S330은, 3차원 공간에서 차량의 옆면을 노면과 수직으로 보고, 차량 영역의 기울기를 카 메라의 롤로 가정할 수 있기에, 차량 영역의 1차 직선 기울기를 카메라 롤로 추정할 수 있다. 예컨대, 도 4b에 도시된 바와 같이, 차량 영역의 테두리에 대한 직선에 대한 기울기, 즉, 수직선 대비 차량 테두리 직선 에 대한 기울기를 카메라 롤로 추정할 수 있다. 실시 예에 따라, 단계 S330은, 수직선 대비 1차 직선 기울기를 계산하고, 영상 그래디언트(image gradient)의 히스토그램(histogram)을 생성하여 히스토그램의 피크에 해당하는 그래디언트를 출력한 후 90도 회전함으로써, 이를 통해 카메라 롤을 추정할 수도 있다. 실시 예에 따라, 단계 S330은, 차량 영역에 포함된 특징점(또는 특징점 벡터 또는 특징점 직선)을 이용하여 카 메라 롤을 추정할 수도 있는데, 도 4c에 도시된 바와 같이, 차량 영역에 포함된 특징인 손잡이 영역을 이 용하여 카메라 롤을 추정할 수도 있다. 예컨대, 차량 영역에 포함된 특징인 손잡이 영역은, 차량 영역의 테두리와 직각을 이루기 때문에, 수평선과 손잡이 영역의 끼인각을 카메라의 롤로 추정할 수도 있다. 실시 예에 따라, 단계 S330은, 수직선의 3차원 원을 생성하고, 차량 테두리의 3차원을 생성한 후 두 3차원 원 간의 끼인각을 계산함으로써, 카메라의 롤을 추정할 수도 있다. 여기서, 수직선은 노면과 수직하기에 수직선과 차량 테두리의 끼인각이 카메라의 롤과 동일하다고 추정할 수 있는데, 이는 수직선이 카메라 롤에 의해 회전되 었기 때문이다. 해당 방식은, MWA를 이용하는 방식으로, MWA에 대해서는 도 7에서 설명한다. 도 5는 카메라 팬을 추정하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것으로, 추정된 롤을 이용하여 카메라 팬을 추정하는 과정의 동작 흐름도를 나타낸 것이다. 도 5를 참조하면, 카메라 팬을 추정하는 과정은, 차량 영역으로 검출된 에지 포인트를 호출하고, 차량 영역의 에지 포인트를 추정된 카메라 롤로 보상한다(S510, S520). 단계 S520에 의해, 차량 영역의 에지 포인트가 추정된 카메라 롤에 의해 보상되면, 카메라 롤이 보상된 에지 포 인트에 대하여 3차원 원을 생성하고, 카메라 광축의 3차원을 생성하여, 두 3차원 원의 끼인각(β1)을 계산한다 (S530, S540, S550). 그리고, 카메라에 대해 미리 설정된 설계치값 예를 들어, 해당 차량에서의 카메라 위치와 카메라 롤로 보상된 에지 포인트를 이용하여, 카메라와 에지 포인트 간의 선과 차량 옆면 간의 끼인각(α1)을 계산하고, 두 끼인각 의 차이(β1-α1)를 이용하여 카메라의 팬을 추정한다(S560, S570). 즉, 카메라 팬을 추정하는 과정은, 도 6에 도시된 바와 같이, 카메라 광축과 카메라와 에지 포인트 간의 끼인각(β1), 카메라의 설계치값 예를 들어, 카메라 위치와 에지 포인트 간의 선과 차량 옆면 간의 끼인각 (α1)을 계산하여, 두 끼인각 차이(β1-α1)를 기반으로 카메라의 팬을 추정하는 것이다. 여기서, 카메라 광축과 에지 포인트 간의 끼인각(β1)은, 도 7a에 도시된 바와 같이, MWA(Manhattan World Assumption)를 기반으로 계산될 수 있다. 즉, MWA를 기반으로, 영상 도메인에서의 직선 성분은 가우시안 구체 도메인에서 하나의 원으로 표현될 수 있으며, 영상 도메인의 직선 성분과 가우시안 구체 도메인의 원은 양방향 으로 변환 가능하다. 즉, 카메라 광축에 대한 직선 성분은, 도 7b에 도시된 바와 같이, 가우시안 구체 도 메인에서 하나의 원으로 생성 또는 표현되고, 카메라와 에지 포인트 간의 직선 성분 또한 하나의 원 으로 생성 또는 표현됨으로써, 두 원(710, 720)을 이용하여 카메라 광축과 차량 영역에 대한 에지 포인트 간의 끼인각(β1)을 계산할 수 있다. MWA에 대하여 간략하게 설명하면 다음과 같다. 임의의 면은 그 면과 수직인 벡터로 표현될 수 있다. 육면체의 6 개의 면은 6개의 벡터로 표현될 수 있으며, 방향성을 무시하면 3개의 벡터로 표현될 수 있다. 이렇게 3개의 벡 터에 소속된 면으로만 형성된 가상의 공간을 MWA라고 하며, 어떠한 직선 성분도 3개의 벡터 중 하나를 통과하게 된다. 카메라 자세가 변경되면, 육면체 또한 회전하게 되며 동일하게 3개의 벡터도 회전하게 된다. 따라서, 3개 의 벡터가 얼마만큼 회전되었는지를 알면 카메라의 자세를 추정할 수 있다. 본 개시의 실시 예들은, 차량을 육 면체로 가정한 MWA에서 차량의 3개 벡터를 찾아 카메라의 자세를 추정하는 것이다. 그리고, 도 7a에서와 같이, 영상 도메인의 직선 성분과 가우시안 구체 도메인의 원을 표현하는 방식은, 본 개시의 기술 분야에 종사하는 당 업자에게 있어서 자명하기에, 그 설명은 생략한다. 도 8은 카메라 틸트를 추정하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것으로, 상술한 과정을 통해 추정된 카메라 롤과 팬을 이용하여 카메라 틸트를 추정하는 과정의 동작 흐름도를 나타낸 것이다. 도 8을 참조하면, 카메라 틸트를 추정하는 과정은, 차량 영역으로 검출된 에지 포인트와 특징점 예를 들어, 손 잡이에 대한 특징점을 호출하고, 에지 포인트와 특징점을 상술한 과정에 의해 추정된 카메라 롤과 팬으로 보상 한다(S810, S820). 카메라 롤과 팬으로 보상된 에지 포인트와 특징점을 기반으로, 차량 테두리와 수직인 벡터 즉, 특징점 벡터를 계산하고, 특징점 벡터에 대한 3차원 원과 카메라 광축의 3차원 원을 생성하여, 두 3차원 원의 끼인각(β2)을 계산한다(S830, S840, S850, S860). 그리고, 카메라에 대해 미리 설정된 설계치값 예를 들어, 해당 차량에서의 카메라 위치와 카메라 롤과 팬으로 보상된 특징점 벡터를 이용하여, 카메라와 특징점 벡터 간의 선과 차량 윗면 간의 끼인각(α2)을 계산하고, 두 끼인각의 차이(β2-α2)를 이용하여 카메라의 틸트를 추정한다(S870, S880). 즉, 카메라 틸트를 추정하는 과정은, 도 9에 도시된 바와 같이, 카메라 광축과 카메라와 특징점 벡터 간의 끼인각(β2), 카메라의 설계치값 예를 들어, 카메라 위치와 특징점 간의 선인 특징점 벡터와 차량 윗 면 간의 끼인각(α2)을 계산하여, 두 끼인각 차이를 기반으로 카메라의 틸트를 추정하는 것이다. 상술한 바와 같이, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, 주행 중인 차량에 의해 촬영되는 영 상 내에서 차량 영역을 검출하고, 차량 영역에 대한 기울기, 특징점 그리고 카메라 광축 및 설계치값을 이용하 여 MWA를 기반으로, 카메라 자세를 추정할 수 있다. 그리고, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방 법은, 노면과 수직 또는 수평한 차량의 모든 특징을 활용할 수 있으며, 예를 들어, 차량 옆면, 차량 앞 범퍼, 차량 뒤 범퍼, 유리와 차량 윗면 연결부 등을 카메라에 의해 촬영되는 차량 영역으로 이용할 수 있다. 상술한 내용은, MWA를 만족하는 경우를 설명한 것으로, MWA에 위배되는 곡선이나 직선이 검출되는 경우에도 적 용할 수 있으며, 이에 대하여 도 10 내지 도 11을 참조하여 설명한다. 도 10은 맨해튼 월드 가정(MWA)에 위배되는 일 실시 예의 경우 카메라 자세를 추정하는 방식을 설명하기 위한 예시도를 나타낸 것으로, MWA에 위배되는 곡선이 검출되는 경우 곡선을 이용하여 카메라 자세를 추정하는 방식 을 설명하기 위한 예시도를 나타낸 것이다. 도 10a에 도시된 바와 같이, 카메라에 의해 촬영되는 영상에서 검출되는 차량 영역에서 곡선이 검출될 수 있는데, 직선이 아닌 곡선들은 MWA에 위배된다. 본 개시의 실시 예에서는, 곡선을 MWA에 적합한 직선으로 변형 하여 카메라 자세를 추정할 수 있다. 예컨대, 해당 차량에 대한 도면을 통해 MWA에 적합하면서 검출된 곡선과 가장 가까운 직선을 생성할 수 있다. 즉, 해당 차량의 도면을 이용하여 검출된 곡선과 직선의 관계 를 알 수 있으며, 이를 통해 검출된 곡선에 대하여 검출된 곡선과 매칭되는 가상의 선을 생성함으 로써, 검출된 곡선을 직선으로 변형할 수 있다. 일 예로, 도 10b에 도시된 바와 같이, 영상 내에 검출된 차량 영역이 전방 보닛인 경우 전방 보닛이 데칼코마니처럼 좌우가 대칭이므로, 검출된 곡선이 대 칭되도록 하는 직선을 찾고, 직선과 수직이면서 검출된 곡선의 접선이 되는 직선을 생 성한다. 이때, 생성된 직선은, MWA를 만족할 수 있다. 따라서, 본 개시의 실시 예에 따른 방법은, 곡선을 변형한 직선을 기반으로 카메라의 자세를 추정할 수 있다. 도 11은 맨해튼 월드 가정(MWA)에 위배되는 다른 실시 예의 경우 카메라 자세를 추정하는 방식을 설명하기 위한 예시도를 나타낸 것으로, MWA에 위배되는 직선이 검출되는 경우 직선의 보정을 이용하여 카메라 자세를 추정하 는 방식을 설명하기 위한 예시도를 나타낸 것이다. 도 11a에 도시된 바와 같이, 카메라에 의해 촬영되는 영상에서 검출되는 차량 영역에서 곡선이 아닌 직선이 검 출되지만, 검출된 직선이 형성하는 면이 MWA에 위반될 수 있다. MWA에 위반되는 직선 또한 해당 차량에 대한 도면을 통해 보정함으로써, MWA를 만족하면서 카메라 자세를 추정할 수 있다. 예를 들어, 도 11a에 도시된 바와 같이, 영상 내에서 검출된 차량 영역을 통해 조수석 유리창 쪽의 직선 을 검출한 경우, 수직선과의 끼인각(α3)을 해당 차량의 도면을 통해 알 수 있다. 따라서, 직선으 로 롤 값을 추정한 이후, 끼인각(α3)만큼 보정함으로써, MWA에 위반되는 직선이 검출되더라도, 차량의 도면을 활용하여 카메라 자세를 추정할 수 있다. 상술한 바와 같이, MWA를 위반하는 곡선 또는 직선이 검출되는 경우라도, 상술한 두 가지 방법을 결합하면, 차 량에서 검출할 수 있는 모든 곡선과 직선을 이용하여 카메라 자세를 명확하게 추정할 수 있다. 즉, 도 11b에 도시된 바와 같이, 임의의 차량 선분을 MWA에 적합한 직선으로 피팅함으로써, 차량에서 검 출 가능한 모든 곡선과 직선을 이용하여 카메라 자세를 추정할 수 있다. 이와 같이, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, 주행 중 촬영되는 영상 내에서 호스트 차량 의 차량 영역이 검출되고 차량 영역을 통해 수평 방향 정보와 수직 방향 정보 중 어느 하나의 정보가 획득되는 경우, 어느 하나의 정보에 의해 획득되는 직선과 주행 중 취득이 가능한 소실점을 이용하여 카메라 자세를 추정 할 수 있다. 또한, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, 카메라에 의해 촬영되는 호스트 차량의 차량 영 역에 대한 수평 방향 정보 예를 들어, 손잡이, 보닛 등의 정보와 수직 방향 정보 예를 들어, 차량 옆면 등에 대 한 정보를 취득 가능한 경우 소실점을 검출하지 않아도, 두 방향 정보만으로 카메라 자세를 추정할 수 있다. 또한, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, MWA에 위배되는 곡선과 직선이 검출되는 경우 MWA에 적합한 직선으로 변형 또는 생성함으로써, 차량에서 검출할 수 있는 모든 곡선과 직선들을 활용하여 카메 라의 자세를 추정할 수 있다. 나아가, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, 카메라에 의해 촬영되는 영상에서 차량 영역을 검출하는 방식으로, 인공지능 네트워크 예를 들어, 딥 러닝 기반 네트워크를 이용할 수도 있으며, 인공지능 네 트워크를 이용하여 차량 영역을 검출하는 경우 세그먼테이션(segmentation)이 용이할 수 있다. 또한, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, 차량 영역을 기반으로 소실선에 대응하는 직선을 검출하고, 검출된 직선과 호스트 차량의 주행 중 영상을 통해 검출된 소실점을 이용하여 카메라의 자세를 추정 할 수도 있다. 또한, 본 개시의 실시 예에 따른 카메라 캘리브레이션 방법은, 차량 영역을 기반으로 차량 영역에 대한 수평 방 향 정보와 수직 방향 정보가 검출되는 경우, 수평 방향 정보와 수직 방향 정보를 기반으로 카메라의 자세를 추 정할 수 있다. 이때, 본 개시의 방법은, 소실선 뿐만 아니라 소실점을 검출할 필요없이 수평 방향 정보와 수직 방향 정보만으로 카메라의 자세를 추정할 수 있다.도 12는 본 개시의 다른 실시 예에 따른 카메라 캘리브레이션 장치에 대한 구성을 나타낸 것으로, 도 1 내지 도 11의 방법을 수행하는 장치에 대한 구성을 나타낸 것이다. 도 12를 참조하면, 본 개시의 다른 실시 예에 따른 카메라 캘리브레이션 장치는, 수신부, 검출부 , 추정부와 저장부를 포함한다. 저장부는, 본 개시의 기술과 관련된 모든 데이터를 저장하는 구성 수단으로, 카메라에 의해 촬영되는 영 상, 본 개시의 기술과 관련된 알고리즘 예를 들어, RANSAC, 에지 포인트, RANSAC 결과, 차량 도면, 차량 데이터, 카메라 설계치값 등과 같은 데이터를 저장할 수 있다. 수신부는, 호스트 차량의 카메라에 의해 촬영되는 영상을 수신한다. 실시 예에 따라, 수신부는 호스트 차량이 일정 속도 이상인 경우 카메라에 의해 촬영되는 영상을 수신할 수 있다. 검출부는, 수신부로 수신되는 영상에서 호스트 차량의 차량 영역을 검출한다. 실시 예에 따라, 검출부는, 영상으로부터 각 영역에 대한 에지 포인트를 검출하고, RANSAC을 이용하여 각 영역의 에지 포인트에 대한 이상치 개수를 측정하며, 이상치 개수가 미리 설정된 일정값 이하인 영역을 차량 영 역으로 검출할 수 있다. 추정부는, 검출부에 의해 검출된 차량 영역을 기반으로 카메라의 자세를 추정한다. 실시 예에 따라, 추정부는, 차량 영역을 기반으로 차량 영역의 기울기를 추정하고 차량 영역의 특징점을 추출하며, 기울기와 특징점을 이용하여 카메라의 자세를 추정할 수 있다. 실시 예에 따라, 추정부는, 차량 영역의 테두리에 대한 기울기를 추정하고, 추정된 테두리의 기울기를 기 반으로 카메라의 롤을 추정할 수 있다. 실시 예에 따라, 추정부는, 차량 영역의 에지 포인트를 추정된 롤로 보상하고, 롤로 보상된 에지 포인트 의 3차원 원과 카메라의 광축의 3차원 원을 생성한 후 두 3차원 원의 제1 끼인각을 계산하며, 카메라의 미리 설 정된 설계치값과 롤로 보상된 에지 포인트의 제2 끼인각을 계산하고, 제1 끼인각과 상기 제2 끼인각을 이용하여 카메라의 팬을 추정할 수 있다. 실시 예에 따라, 추정부는, 차량 영역의 에지 포인트와 특징점을 추정된 롤과 팬으로 보상하고, 롤과 팬 으로 보상된 차량 영역의 테두리와 특징점을 이용하여 테두리에 수직인 특징점 벡터를 계산하며, 특징점 벡터의 3차원 원과 카메라의 광축의 3차원 원의 제3 끼인각을 계산하고, 카메라의 설계치값과 롤과 팬으로 보상된 특징 점의 제4 끼인각을 계산하며, 제3 끼인각과 제4 끼인각을 이용하여 카메라의 틸트를 추정할 수 있다. 실시 예에 따라, 추정부는, 차량 영역을 기반으로 소실선에 대응하는 직선을 검출하고, 검출된 직선과 호 스트 차량의 주행 중 영상을 통해 검출된 소실점을 이용하여 카메라의 자세를 추정할 수 있다. 실시 예에 따라, 추정부는, 차량 영역을 통해 곡선이 검출되는 경우, 곡선과 차량 영역에 대한 곡선 정보 예를 들어, 해당 차량의 도면 정보를 이용하여 직선에 대응하는 가상선을 생성하며, 가상선과 소실점을 이용하 여 카메라의 자세를 추정할 수 있다. 실시 예에 따라, 추정부는, 차량 영역을 기반으로 차량 영역에 대한 수평 방향 정보와 수직 방향 정보가 검출되는 경우, 수평 방향 정보와 수직 방향 정보를 기반으로 카메라의 자세를 추정할 수 있다. 비록, 본 개시의 다른 실시 예에 따른 장치에서 그 설명이 생략되더라도, 본 개시의 다른 실시 예에 따른 장치 는 도 1 내지 도 11의 방법에서 설명한 모든 내용을 포함할 수 있으며, 이는 본 개시의 기술 분야에 종사하는 당업자에게 있어서 자명하다. 도 13은 본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법을 실행하기 위한 컴퓨팅 시스템의 블록도를 나 타낸 것이다. 도 13을 참조하면, 상술한 본 개시의 다른 실시 예에 따른 소실점 추정 방법은 컴퓨팅 시스템을 통해서도 구현 될 수 있다. 컴퓨팅 시스템은 시스템 버스를 통해 연결되는 적어도 하나의 프로세서, 메모리, 사용자 인터페이스 입력 장치, 사용자 인터페이스 출력 장치, 스토리지, 및 네트워 크 인터페이스를 포함할 수 있다. 프로세서는 중앙 처리 장치(CPU) 또는 메모리 및/또는 스토리지에 저장된 명령어들에 대한 처리를 실행하는 반도체 장치일 수 있다. 메모리 및 스토리지는 다양한 종류의 휘발성 또는 비휘발 성 저장 매체를 포함할 수 있다. 예를 들어, 메모리는 ROM(Read Only Memory) 및 RAM(Random Access Memory)을 포함할 수 있다. 따라서, 본 명세서에 개시된 실시 예들과 관련하여 설명된 방법 또는 알고리즘의 단계는 프로세서에 의해 실행되는 하드웨어, 소프트웨어 모듈, 또는 그 2 개의 결합으로 직접 구현될 수 있다. 소프트웨어 모듈은 RAM 메모리, 플래시 메모리, ROM 메모리, EPROM 메모리, EEPROM 메모리, 레지스터, 하드 디스크, 착탈형 디스크, CD-ROM과 같은 저장 매체(즉, 메모리 및/또는 스토리지)에 상주할 수도 있다. 예시적인 저장 매체 는 프로세서에 커플링되며, 그 프로세서는 저장 매체로부터 정보를 판독할 수 있고 저장 매체에 정 보를 기입할 수 있다. 다른 방법으로, 저장 매체는 프로세서와 일체형일 수도 있다. 프로세서 및 저장 매체는 주문형 집적회로(ASIC) 내에 상주할 수도 있다. ASIC는 사용자 단말기 내에 상주할 수도 있다. 다 른 방법으로, 프로세서 및 저장 매체는 사용자 단말기 내에 개별 컴포넌트로서 상주할 수도 있다. 이상의 설명은 본 개시의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 개시가 속하는 기술 분야에 서 통상의 지식을 가진 자라면 본 개시의 본질적인 특성에서 벗어나지 않는 범위에서 다양한 수정 및 변형이 가 능할 것이다. 따라서, 본 개시에 개시된 실시 예들은 본 개시의 기술 사상을 한정하기 위한 것이 아니라 설명하 기 위한 것이고, 이러한 실시 예에 의하여 본 개시의 기술 사상의 범위가 한정되는 것은 아니다. 본 개시의 보 호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 개시 의 권리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2023-0094095", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법에 대한 동작 흐름도를 나타낸 것이다. 도 2는 호스트 차량의 차량 영역을 검출하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것이다. 도 3은 카메라 롤을 추정하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것이다. 도 4는 카메라 롤을 추정하는 과정을 설명하기 위한 예시도를 나타낸 것이다. 도 5는 카메라 팬을 추정하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것이다.도 6은 카메라 팬을 추정하는 과정을 설명하기 위한 예시도를 나타낸 것이다. 도 7은 영상 도메인과 가우시안 구체 도메인의 관계를 설명하기 위한 예시도를 나타낸 것이다. 도 8은 카메라 틸트를 추정하는 과정에 대한 일 실시 예의 동작 흐름도를 나타낸 것이다. 도 9는 카메라 틸트를 추정하는 과정을 설명하기 위한 예시도를 나타낸 것이다. 도 10은 맨해튼 월드 가정(MWA)에 위배되는 일 실시 예의 경우 카메라 자세를 추정하는 방식을 설명하기 위한 예시도를 나타낸 것이다. 도 11은 맨해튼 월드 가정(MWA)에 위배되는 다른 실시 예의 경우 카메라 자세를 추정하는 방식을 설명하기 위한 예시도를 나타낸 것이다. 도 12는 본 개시의 다른 실시 예에 따른 카메라 캘리브레이션 장치에 대한 구성을 나타낸 것이다. 도 13은 본 개시의 일 실시 예에 따른 카메라 캘리브레이션 방법을 실행하기 위한 컴퓨팅 시스템의 블록도를 나 타낸 것이다."}
