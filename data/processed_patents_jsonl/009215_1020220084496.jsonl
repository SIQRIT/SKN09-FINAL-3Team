{"patent_id": "10-2022-0084496", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0007504", "출원번호": "10-2022-0084496", "발명의 명칭": "의료영상 정합방법 및 그 장치", "출원인": "메디컬아이피 주식회사", "발명자": "김종민"}}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "조영제를 사용하여 촬영한 의료영상을 입력받는 단계;분류모델을 이용하여 상기 의료영상의 페이즈(phase)를 파악하는 단계; 및정합모델을 이용하여 상기 의료영상과 기준영상을 정합하는 단계;를 포함하고,상기 분류모델은 상기 의료영상의 페이즈를 출력하는 인공지능모델이고,상기 정합모델은 상기 의료영상과 상기 기준영상을 정합하는 인공지능모델인 것을 특징으로 하는 의료영상정합방법."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1항에 있어서,상기 의료영상 및 상기 기준영상은 각각 복수의 단면영상을 포함하는 3차원 영상인 것을 특징으로 하는 의료영상정합방법."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1항에 있어서,상기 의료영상 및 상기 기준영상은 CT 영상 또는 MRI 영상인 것을 특징으로 하는 의료영상정합방법."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 1항에 있어서, 서로 다른 페이즈의 영상들을 정합하는 복수 개의 정합모델을 포함하고,상기 정합하는 단계는,상기 의료영상의 페이즈와 상기 기준영상의 페이즈를 기준으로 상기 복수 개의 정합모델 중 정합에 사용할 하나의 정합모델을 선택하는 단계;를 포함하는 것을 특징으로 하는 의료영상정합방법."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 4항에 있어서, 상기 페이즈를 파악하는 단계는,상기 분류모델을 이용하여 상기 기준영상의 페이즈를 파악하는 단계;를 더 포함하는 것을 특징으로 하는 의료영상정합방법."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "조영제를 사용하여 촬영한 의료영상을 입력받는 영상입력부;분류모델을 이용하여 상기 의료영상의 페이즈(phase)를 파악하는 페이즈파악부; 및정합모델을 이용하여 상기 의료영상과 기준영상을 정합하는 정합부;를 포함하고,상기 분류모델은 의료영상의 페이즈를 출력하는 인공지능모델이고,상기 정합모델은 상기 의료영상과 상기 기준영상을 정합하는 인공지능모델인 것을 특징으로 하는 의료영상정합장치."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "공개특허 10-2024-0007504-3-제 6항에 있어서, 서로 다른 페이즈의 영상들을 정합하는 복수 개의 정합모델을 포함하고,상기 의료영상의 페이즈와 상기 기준영상의 페이즈를 기준으로 상기 복수 개의 정합모델 중 정합에 사용할 하나의 정합모델을 선택하는 모델선택부;를 더 포함하는 것을 특징으로 하는 의료영상정합장치."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 6항에 있어서, 상기 페이즈파악부는,상기 분류모델을 이용하여 상기 기준영상의 페이즈를 파악하는 것을 특징으로 하는 의료영상정합장치."}
{"patent_id": "10-2022-0084496", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제 1항 내지 제 5항 중 어느 한 항에 기재된 방법을 수행하기 위한 컴퓨터 프로그램을 기록한 컴퓨터로 읽을 수있는 기록매체."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "의료영상 정합방법 및 그 장치가 개시된다. 의료영상정합장치는 조영제를 사용하여 촬영한 의료영상을 입력받으 면, 분류모델을 이용하여 의료영상의 페이즈(phase)를 파악하고, 정합모델을 이용하여 기 의료영상과 기준영상을 정합한다."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명의 실시 예는 의료영상을 정합하는 방법 및 그 장치에 관한 것으로, 보다 상세하게는 인공지능모델을 이 용한 의료영상 정합방법 및 그 장치에 관한 것이다."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "CT(Computed Tomography) 또는 MRI(Magnetic Resonance Imaging)의 촬영시에 특정 조직이나 혈관, 또는 병변 등이 보다 잘 보이도록 조영제(contrast agents)를 투여하여 촬영한다. 예를 들어, 조영제 주입 전에 복부 CT를 촬영하고, 조영제 주입 후에 다시 복부 CT를 촬영할 수 있다. 조영제의 투여 후 조영 증강 정도에 따라 CT 등의 의료영상은 복수의 페이즈(phase)(예를 들어, pre, artery, post, delay 등)로 구분될 수 있다. 의료진은 여러 페이즈의 의료영상을 비교하여 진단을 수행할 수 있다. 예를 들어, 의료진은 여러 페이즈의 의료영상에 나타나 는 간과 병변의 크기 및 위치를 기반으로 간암을 진단될 수 있다. 그러나 CT 또는 MRI를 촬영할 때 환자의 움직 임이나 호흡 등으로 인하여 각 페이즈의 의료영상에 나타나는 간과 병변의 위치 및 크기가 서로 다를 수 있다. 이 경우에 진단의 정확도가 떨어지는 문제점이 존재한다."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 실시 예가 이루고자 하는 기술적 과제는, 조영제를 투여하여 촬영한 의료영상을 정합하는 방법 및 그 장치를 제공하는 데 있다."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기의 기술적 과제를 달성하기 위한, 본 발명의 실시 예에 따른 의료영상정합방법의 일 예는, 조영제를 사용하 여 촬영한 의료영상을 입력받는 단계; 분류모델을 이용하여 상기 의료영상의 페이즈(phase)를 파악하는 단계; 및 정합모델을 이용하여 상기 의료영상과 기준영상을 정합하는 단계;를 포함하고, 상기 분류모델은 상기 의료영 상의 페이즈를 출력하는 인공지능모델이고, 상기 정합모델은 상기 의료영상과 상기 기준영상을 정합하는 인공지 능모델이다. 상기의 기술적 과제를 달성하기 위한, 본 발명의 실시 예에 따른 의료영상정합장치의 일 예는, 조영제를 사용하 여 촬영한 의료영상을 입력받는 영상입력부; 분류모델을 이용하여 상기 의료영상의 페이즈(phase)를 파악하는 페이즈파악부; 및 정합모델을 이용하여 상기 의료영상과 기준영상을 정합하는 정합부;를 포함하고, 상기 분류모 델은 의료영상의 페이즈를 출력하는 인공지능모델이고, 상기 정합모델은 상기 의료영상과 상기 기준영상을 정합 하는 인공지능모델이다."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시 예에 따르면, 의료영상의 페이즈에 적합한 정합모델을 이용하여 의료영상정합의 정확도를 높일 수 있다. 또한 다양한 페이즈의 의료영상의 정합을 통해 진단의 정확도를 향상시킬 수 있다. 예를 들어, 여러 페이즈의 의료영상에 나타나는 간과 병변의 크기 및 위치를 정합하여 간암 진단의 정확도를 높일 수 있다."}
{"patent_id": "10-2022-0084496", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하에서, 첨부된 도면들을 참조하면 본 발명의 실시 예에 따른 의료영상정합방법 및 그 장치에 대해 상세히 살 펴본다. 도 1은 조영제를 투여하여 촬영한 의료영상의 페이즈(phase)의 예를 도시한 도면이다. 도 1을 참조하면, 특정 조직이나 혈관, 또는 병변 등이 보다 잘 보이도록 환자에게 조영제를 투여하여 의료영상 을 촬영할 수 있다. 의료영상은 CT 또는 MRI 영상일 수 있으며, 이하에서는 설명의 편의를 위하여 CT 영상을 기 준으로 설명한다. 조영제를 환자에 투여한 후 시간이 경과함에 따라 조영 증강 정도가 달라지며, 그 조영 증강 정도에 따라 의료 영상의 페이즈가 구분된다. 예를 들어, 조영제를 투여하여 촬영한 의료영상은 동맥기(arterial phase), 문 맥기(portal phase), 지연기(delayed phase) 등으로 구분될 수 있다. 조영제의 투여 이전에 촬영한 의료영상은 조영전단계(unenhanced phase)로 구분할 수 있다. 본 실시 예는 조영제 투입 전후의 각 페이즈(phase)(100,110,120,130)를 조영 증강 정도에 따라 복수의 구간으 로 구분할 수 있음을 설명하기 위한 하나의 예일 뿐 페이즈의 개수와 종류 등은 실시 예에 따라 다양하게 설정 가능하다. 예를 들어, 문맥기를 다시 복수의 구간, 즉 초기 문맥기, 중기 문맥기, 후기 문맥기 등의 다수 의 구간으로 세분화할 수 있다. 다만 이하에서는 설명의 편의를 위하여 의료영상의 페이즈를 도 1을 기준으로 설명한다. 도 2는 본 발명의 실시 예에 따른 의료영상정합장치의 일 예를 도시한 도면이다. 도 2를 참조하면, 의료영상정합장치는 의료영상과 기준영상을 입력받으면, 의료영상과 기 준영상을 정합한다. 의료영상은 정합을 위하여 이동, 회전, 또는 크기 조정 등을 적용하는 영상 으로, 조영제의 투여 전에 촬영한 영상이거나 조영제의 투여 후에 촬영한 영상일 수 있다. 기준영상은 고 정된 영상으로 조영제의 투영 전에 촬영한 영상이거나 조영제의 투여 후에 촬영한 영상일 수 있다. 다양한 페이즈의 영상이 촬영된 경우에, 의료영상 및 기준영상은 다양하게 선택될 수 있다. 예를 들 어, 도 1의 예에서, 의료영상정합장치는 문맥기의 영상을 기준영상으로 선택하고, 동맥기의 영상을 의료영상으로 입력받을 수 있다. 도 1에서 살핀 바와 같이, 페이즈별 의료영상은 조영 증강 정도에 따라 영상 내 각종 조직의 모양이 다르게 나 타난다. 그러므로 종래의 영상정합 알고리즘을 그대로 이용할 경우 정합의 정확도가 떨어진다. 예를 들어, 동맥 기와 문맥기의 두 영상을 정합하는데 사용되는 정합 알고리즘을 문맥기와 지연기의 두 영상을 정합하는데 사용 하면 그 정확도가 떨어질 수 있다. 이에 본 실시 예는 서로 다른 페이즈 영상 사이의 정합을 수행하는 복수의정합모델을 이용하여 정합하는 방법을 제시한다. 본 실시 예에 따른 정합모델에 대해서는 도 5에서 다시 살펴본 다. 복수의 서로 다른 페이즈 사이의 정합을 본 실시 예의 정합모델을 이용하여 수행할 때 의료영상과 기준영 상이 정확히 어떤 페이즈의 영상인지 구별하는 것이 중요할 수 있다. 조영제의 투여 이후 시간이 지남에 따라 조영 증강 정도는 변화하는데 이는 환자에 따라 서로 다를 수 있다. 예를 들어, 제1 환자는 조영제 투여 후 t1 시간 경과 후 문맥기에 도달하고 제1 환자는 t2 시간 경과 후 문맥기에 도달할 수 있다. 따라서 의료영상 의 페이즈를 정확히 파악하여야 그에 맞는 정확한 정합모델의 사용이 가능할 수 있다. 이에 본 실시 예는 의료 영상의 페이즈를 파악하는 분류모델을 포함하며, 이에 대해서는 도 4에서 설명한다. 도 3은 본 발명의 실시 예에 따른 의료영상의 일 예를 도시한 도면이다. 도 3을 참조하면, 의료영상은 복수의 단면 영상(310,312,314)으로 구성될 수 있다. 예를 들어, 환자의 복 부 CT를 촬영하는 경우에, 의료영상은 복부를 일정 간격으로 촬영한 복수의 단면 영상(310,312,314)으로 구성될 수 있다. 예를 들어, 동맥기의 의료영상은 조영제의 투여 후 동맥기에 복부를 일정 간격으로 촬영하여 얻은 복수의 단면 영상으로 구성될 수 있다. 의료영상이 복수의 단면 영상(310,312,314)으로 구성된 경우에, 서로 다른 페이즈의 영상 정합은 복수의 단면 영상을 모두 정합하는 과정일 수 있다. 예를 들어, 의료영상이 동맥기의 N개(N은 2 이상의 자연수)의 단면 영상으로 구성되고, 기준영상이 지연기의 M개(M은 N가 동일하거나 다를 수 있음)의 단면영상으로 구성된 경우에, 의료영상정합장치는 동맥기의 N개의 단면영상을 모두 지연기의 M개의 단면영상에 정합할 수 있다. 본 실시 예는 의료영상이 복수 개의 단면 영상(310,312,324)을 포함하는 경우를 제시하고 있으나, 이는 하 나의 예일 뿐 정합 대상이 되는 의료영상과 기준영상은 하나의 단면 영상으로 구성될 수 있다. 다만, 이하에서 는 설명의 편의를 위하여 의료영상 및 기준영상이 모두 복수의 단면 영상으로 구성된 경우를 가정하여 설명한다. 도 4는 본 발명의 실시 예에 따른 분류모델의 일 예를 도시한 도면이다. 도 4를 참조하면, 분류모델은 의료영상(또는 기준영상)을 입력받으면 페이즈를 예측하여 출력하 는 인공지능모델이다. 분류모델은 CNN(Convolutional Neural Network) 등 다양한 인공신경망으로 구현될 수 있다. 예를 들어, 분류모델은 VGG(Visual Geometry Group)로 구현될 수 있다. 분류모델은 다양한 페이즈의 의료영상을 페이즈로 라벨링한 학습데이터를 이용하여 훈련시켜 생성할 수 있 다. 예를 들어, 조영전단계, 동맥기, 문맥기, 지연기의 4개의 페이즈에 대한 다양한 의료 영상을 학습데이터로 이용하여 분류모델을 지도학습방법으로 훈련시킬 수 있다. 학습데이터를 이용하여 인 공지능모델을 훈련시켜 생성하는 방법 그 자체는 이미 널리 알려진 방법이므로 이에 대한 추가적인 설명은 생략 한다. 도 5는 본 발명의 실시 예에 따른 정합모델의 일 예를 도시한 도면이다. 도 5를 참조하면, 정합모델은 서로 다른 페이즈의 영상을 입력받으면 정합된 의료영상을 출력하는 인 공지능모델이다. 분류모델은 CNN 등 다양한 인공신경망으로 구현될 수 있다. 정합모델은 두 종류의 페이즈에 대한 영상(예를 들어, 의료영상 및 기준영상)과 정합된 의료영상을 포함하는 학습데이 터로 훈련시켜 생성할 수 있다. 예를 들어, 문맥기와 지연기의 두 의료영상과 문맥기의 의료영상을 지연기의 영 상에 맞도록 정합한 의료영상을 포함하는 학습데이터를 이용하여, 문맥기와 지연기의 두 의료영상을 정합하는 정합모델을 생성할 수 있다. 학습이 완료된 정합모델은 의료영상과 기준영상을 입력받으면, 의료영상을 기준영상 에 맞게 이동, 회전 또는 크기 조정하여 출력한다. 예를 들어, 의료영상의 페이즈가 문맥기이고 기준영상 의 페이즈가 지연기이면, 정합모델은 문맥기의 의료영상의 위치나 크기 등을 기준영상에 맞도록 조정하여 출력한다. 하나의 정합모델이 다양한 페이즈 사이의 모든 정합을 수행하기는 어렵다. 이 에 본 실시 예는 각 페이즈 사이의 정합을 위한 복수의 정합모델을 포함하며 이에 대한 예가 도 6에 도시되어 있다. 도 6은 본 발명의 실시 예에 따른 복수의 정합모델의 일 예를 도시한 도면이다. 도 6을 참조하면, 서로 다른 페이즈의 영상을 정합하기 위한 복수의 정합모델이 존재한다. 예를 들어, 제1 정합모델은 제1 페이즈와 제2 페이즈의 영상들 사이의 정합을 수행하는 모델이고, 제2 정합모델은 제2 페이즈와 제3 페이즈의 영상들 사이의 정합을 수행하는 모델이고, 제N 정합모델은 제N 페이즈와 제1 페이즈의 영상들 사 이의 정합을 수행하는 모델일 수 있다. 정합모델의 개수는 페이즈의 수에 따라 다양할 수 있다. 복수의 정합모 델은 도 5에서 살핀 방법으로 각각 생성될 수 있다. 도 7은 본 발명의 실시 예에 따른 의료영상정합방법의 일 예를 도시한 흐름도이다. 도 7을 참조하면, 의료영상정합장치는 의료영상을 입력받는다(S700). 의료영상은 조영제를 이용하여 촬영 한 의료영상일 수 있다. 의료영상정합장치는 의료영상의 페이즈를 파악한다(S710). 예를 들어, 의료영상정합장치는 도 4의 분 류모델을 이용하여 의료영상의 페이즈를 파악할 수 있다. 다른 실시 예로, 의료영상정합장치는 기준 영상의 페이즈를 추가적으로 파악할 수 있다. 예를 들어, 기준영상의 정확한 페이즈를 모를 경우에, 의료영상정 합장치는 분류모델을 이용하여 기준영상의 페이즈를 파악할 수 있다. 기준영상의 페이즈 정보가 미리 파악되어 있다면 기준영상의 페이즈 파악 과정은 생략될 수 있다. 의료영상정합장치는 미리 지정된 기준영상과 의료영상을 정합모델을 이용하여 정합한다(S720). 복수의 페 이즈 사이의 정합이 필요한 경우에 도 6에서 살핀 복수의 정합모델이 존재할 수 있다. 이 경우에, 의료영 상정합장치는 의료영상의 페이즈와 기준영상의 페이즈를 이용하여 정합에 사용할 정합모델을 선택할 수 있 다. 예를 들어, 도 6의 예에서, 의료영상의 페이즈가 제2 페이즈이고, 기준영상의 페이즈가 제3 페이즈이면, 의 료영상정합장치는 제2 정합모델을 이용하여 의료영상과 기준영상의 정합을 수행한다. 도 8은 본 발명의 실시 예에 따른 의료영상정합장치의 일 예의 구성을 도시한 도면이다. 도 8을 참조하면, 의료영상정합장치는 영상입력부, 페이즈파악부, 모델선택부, 정합부 , 분류모델, 적어도 하나 이상의 정합모델을 포함한다. 의료영상정합장치는 메모리, 프로 세서, 입출력장치 등을 포함하는 컴퓨팅 장치로 구현될 수 있다. 이 경우에 각 구성은 소프트웨어로 구현되어 메모리에 탑재된 후 프로세서에 의해 수행될 수 있다. 영상입력부는 의료영상 및 기준영상을 입력받는다. 의료영상 및 기준영상은 조영제를 이용하여 촬영한 3차 원의 의료영상일 수 있다. 페이즈파악부는 분류모델을 이용하여 의료영상의 페이즈를 파악한다. 기준영상의 페이즈를 모르는 경우에, 페이즈파악부는 분류모델을 이용하여 기준영상의 페이즈를 추가적으로 파악할 수 있다. 모델선택부는 의료영상의 페이즈와 기준영상의 페이즈를 기준으로 복수 개의 정합모델 중 정합에 사 용할 하나의 정합모델을 선택한다. 다른 실시 예로, 의료영상정합장치가 기 정의된 페이즈 사이의 정합만 을 수행하도록 하나의 정합모델을 포함한다면, 모델선택부는 생략될 수 있다. 정합부는 정합모델을 이용하여 의료영상과 기준영상을 정합한다. 도 9는 본 발명의 실시 예에 따른 의료영상정합방법을 이용하여 영상을 정합한 결과의 예를 도시한 도면이다. 도 9를 참조하면, 지연기의 의료영상을 본 실시 예의 의료영상정합방법으로 문맥기의 기준영상에 정 합하도록 변형한 영상이 도시되어 있다. 본 실시 예는 설명의 편의를 위하여 각 페이즈의 영상을 하나씩 도시하고 있으나, 각 페이즈의 영상은 도 3에서 살핀 바와 같이 복수 개의 단면영상으로 구성될 수 있다. 각 영상(900,910,920)의 네모 박스(902,912,922) 부분을 살펴보면, 지연기의 의료영상에 비해 정합 후 의 료영상이 기준영상과 정확하게 비교될 수 있음을 알 수 있다. 예를 들어, 간암 진단을 위하여 페이즈 별 의료영상을 이용하는 경우에, 의료진은 간암의 사이즈와 위치를 좀 정확하게 비교할 수 있어 진단의 정확도 를 높일 수 있다. 본 발명은 또한 컴퓨터로 읽을 수 있는 기록매체에 컴퓨터가 읽을 수 있는 프로그램 코드로서 구현하는 것이 가 능하다. 컴퓨터가 읽을 수 있는 기록매체는 컴퓨터 시스템에 의하여 읽혀질 수 있는 데이터가 저장되는 모든 종 류의 기록장치를 포함한다. 컴퓨터가 읽을 수 있는 기록매체의 예로는 ROM, RAM, CD-ROM, 자기 테이프, 플로피 디스크, 광데이터 저장장치 등이 있다. 또한 컴퓨터가 읽을 수 있는 기록매체는 네트워크로 연결된 컴퓨터 시스 템에 분산되어 분산방식으로 컴퓨터가 읽을 수 있는 코드가 저장되고 실행될 수 있다. 이제까지 본 발명에 대하여 그 바람직한 실시 예들을 중심으로 살펴보았다. 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자는 본 발명이 본 발명의 본질적인 특성에서 벗어나지 않는 범위에서 변형된 형태로 구현 될 수 있음을 이해할 수 있을 것이다. 그러므로 개시된 실시 예들은 한정적인 관점이 아니라 설명적인 관점에서 고려되어야 한다. 본 발명의 범위는 전술한 설명이 아니라 특허청구범위에 나타나 있으며, 그와 동등한 범위 내 에 있는 모든 차이점은 본 발명에 포함된 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2022-0084496", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 조영제를 투여하여 촬영한 의료영상의 페이즈(phase)의 일 예를 도시한 도면, 도 2는 본 발명의 실시 예에 따른 의료영상정합장치의 일 예를 도시한 도면, 도 3은 본 발명의 실시 예에 따른 의료영상의 일 예를 도시한 도면, 도 4는 본 발명의 실시 예에 따른 분류모델의 일 예를 도시한 도면, 도 5는 본 발명의 실시 예에 따른 정합모델의 일 예를 도시한 도면, 도 6은 본 발명의 실시 예에 따른 복수의 정합모델의 일 예를 도시한 도면, 도 7은 본 발명의 실시 예에 따른 의료영상정합방법의 일 예를 도시한 흐름도, 도 8은 본 발명의 실시 예에 따른 의료영상정합장치의 일 예의 구성을 도시한 도면, 그리고, 도 9는 본 발명의 실시 예에 따른 의료영상정합방법을 이용하여 영상을 정합한 결과의 예를 도시한 도면이다."}
