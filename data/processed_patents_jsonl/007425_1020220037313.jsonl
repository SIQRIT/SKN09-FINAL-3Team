{"patent_id": "10-2022-0037313", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0135483", "출원번호": "10-2022-0037313", "발명의 명칭": "닫힌 포트에 활성화된 프로파일을 처리하는 방법 및 장치", "출원인": "삼성전자주식회사", "발명자": "강수정"}}
{"patent_id": "10-2022-0037313", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "무선 통신 시스템에서 제어 신호 처리 방법에 있어서,기지국으로부터 전송되는 제1 제어 신호를 수신하는 단계;상기 수신된 제1 제어 신호를 처리하는 단계; 및상기 처리에 기반하여 생성된 제2 제어 신호를 상기 기지국으로 전송하는 단계를 포함하는 것을 특징으로 하는제어 신호 처리 방법."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시는 보다 높은 데이터 전송률을 지원하기 위한 5G 또는 6G 통신 시스템에 관련된 것이다. 본 개시는 단말 과 eUICC에서 논리 인터테이스를 사용하여 복수 프로파일의 동시 활성화(MEP)하도록 지원하는 경우에, 단말과 eUICC가 eUICC에 활성화 상태인 프로파일의 개수들을 참조하여 초기화 과정을 완료하고 이후 설정된 방식에 따라 서 단말 그리고/또는 eUICC의 설정을 구성하여 사용자의 혼선이 없도록 닫힌 포트에서의 활성화된 프로파일을 처 리해 주는 방법 및 장치 제공하는 방법 및 장치에 대한 것이다."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 무선 통신 시스템에서 단말-범용 통합 회로 카드(Universal Integrated Circuit Card: UICC)간 논리 인터페이스를 사용하는 경우에, 활성화된 프로파일을 처리하기 위한 방법에 대한 것이다."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "5G 이동통신 기술은 빠른 전송 속도와 새로운 서비스가 가능하도록 넓은 주파수 대역을 정의하고 있으며, 3.5 기가헤르츠(3.5GHz) 등 6GHz 이하 주파수('Sub 6GHz') 대역은 물론 28GHz와 39GHz 등 밀리미터파(㎜Wave)로 불 리는 초고주파 대역('Above 6GHz')에서도 구현이 가능하다. 또한, 5G 통신 이후(Beyond 5G)의 시스템이라 불리 어지는 6G 이동통신 기술의 경우, 5G 이동통신 기술 대비 50배 빨라진 전송 속도와 10분의 1로 줄어든 초저 (Ultra Low) 지연시간을 달성하기 위해 테라헤르츠(Terahertz) 대역(예를 들어, 95GHz에서 3 테라헤르츠(3THz) 대역과 같은)에서의 구현이 고려되고 있다. 5G 이동통신 기술의 초기에는, 초광대역 서비스(enhanced Mobile BroadBand, eMBB), 고신뢰/초저지연 통신 (Ultra-Reliable Low-Latency Communications, URLLC), 대규모 기계식 통신 (massive Machine-Type Communications, mMTC)에 대한 서비스 지원과 성능 요구사항 만족을 목표로, 초고주파 대역에서의 전파의 경로 손실 완화 및 전파의 전달 거리를 증가시키기 위한 빔포밍(Beamforming) 및 거대 배열 다중 입출력(Massive MIMO), 초고주파수 자원의 효율적 활용을 위한 다양한 뉴머롤로지 지원(복수 개의 서브캐리어 간격 운용 등)와 슬롯 포맷에 대한 동적 운영, 다중 빔 전송 및 광대역을 지원하기 위한 초기 접속 기술, BWP(Band-Width Part) 의 정의 및 운영, 대용량 데이터 전송을 위한 LDPC(Low Density Parity Check) 부호와 제어 정보의 신뢰성 높은 전송을 위한 폴라 코드(Polar Code)와 같은 새로운 채널 코딩 방법, L2 선-처리(L2 pre-processing), 특정 서 비스에 특화된 전용 네트워크를 제공하는 네트워크 슬라이싱(Network Slicing) 등에 대한 표준화가 진행되었다. 현재, 5G 이동통신 기술이 지원하고자 했던 서비스들을 고려하여 초기의 5G 이동통신 기술 개선(improvement) 및 성능 향상(enhancement)을 위한 논의가 진행 중에 있으며, 차량이 전송하는 자신의 위치 및 상태 정보에 기 반하여 자율주행 차량의 주행 판단을 돕고 사용자의 편의를 증대하기 위한 V2X(Vehicle-to-Everything), 비면허 대역에서 각종 규제 상 요구사항들에 부합하는 시스템 동작을 목적으로 하는 NR-U(New Radio Unlicensed), NR 단말 저전력 소모 기술(UE Power Saving), 지상 망과의 통신이 불가능한 지역에서 커버리지 확보를 위한 단말- 위성 직접 통신인 비 지상 네트워크(Non-Terrestrial Network, NTN), 위치 측위(Positioning) 등의 기술에 대 한 물리계층 표준화가 진행 중이다. 뿐만 아니라, 타 산업과의 연계 및 융합을 통한 새로운 서비스 지원을 위한 지능형 공장 (Industrial Internet of Things, IIoT), 무선 백홀 링크와 액세스 링크를 통합 지원하여 네트워크 서비스 지역 확장을 위한 노드를 제공하는 IAB(Integrated Access and Backhaul), 조건부 핸드오버(Conditional Handover) 및 DAPS(Dual Active Protocol Stack) 핸드오버를 포함하는 이동성 향상 기술(Mobility Enhancement), 랜덤액세스 절차를 간소화하 는 2 단계 랜덤액세스(2-step RACH for NR) 등의 기술에 대한 무선 인터페이스 아키텍쳐/프로토콜 분야의 표준화 역시 진행 중에 있으며, 네트워크 기능 가상화(Network Functions Virtualization, NFV) 및 소프트웨어 정 의 네트워킹(Software-Defined Networking, SDN) 기술의 접목을 위한 5G 베이스라인 아키텍쳐(예를 들어, Service based Architecture, Service based Interface), 단말의 위치에 기반하여 서비스를 제공받는 모바일 엣지 컴퓨팅(Mobile Edge Computing, MEC) 등에 대한 시스템 아키텍쳐/서비스 분야의 표준화도 진행 중이다. 이와 같은 5G 이동통신 시스템이 상용화되면, 폭발적인 증가 추세에 있는 커넥티드 기기들이 통신 네트워크에 연결될 것이며, 이에 따라 5G 이동통신 시스템의 기능 및 성능 강화와 커넥티드 기기들의 통합 운용이 필요할 것으로 예상된다. 이를 위해, 증강현실(Augmented Reality, AR), 가상현실(Virtual Reality, VR), 혼합 현실 (Mixed Reality, MR) 등을 효율적으로 지원하기 위한 확장 현실(eXtended Reality, XR), 인공지능(Artificial Intelligence, AI) 및 머신러닝(Machine Learning, ML)을 활용한 5G 성능 개선 및 복잡도 감소, AI 서비스 지 원, 메타버스 서비스 지원, 드론 통신 등에 대한 새로운 연구가 진행될 예정이다. 또한, 이러한 5G 이동통신 시스템의 발전은 6G 이동통신 기술의 테라헤르츠 대역에서의 커버리지 보장을 위한 신규 파형(Waveform), 전차원 다중입출력(Full Dimensional MIMO, FD-MIMO), 어레이 안테나(Array Antenna), 대규모 안테나(Large Scale Antenna)와 같은 다중 안테나 전송 기술, 테라헤르츠 대역 신호의 커버리지를 개선 하기 위해 메타물질(Metamaterial) 기반 렌즈 및 안테나, OAM(Orbital Angular Momentum)을 이용한 고차원 공 간 다중화 기술, RIS(Reconfigurable Intelligent Surface) 기술 뿐만 아니라, 6G 이동통신 기술의 주파수 효 율 향상 및 시스템 네트워크 개선을 위한 전이중화(Full Duplex) 기술, 위성(Satellite), AI(Artificial Intelligence)를 설계 단계에서부터 활용하고 종단간(End-to-End) AI 지원 기능을 내재화하여 시스템 최적화를 실현하는 AI 기반 통신 기술, 단말 연산 능력의 한계를 넘어서는 복잡도의 서비스를 초고성능 통신과 컴퓨팅 자 원을 활용하여 실현하는 차세대 분산 컴퓨팅 기술 등의 개발에 기반이 될 수 있을 것이다. 범용 통합 회로 카드(UICC: Universal Integrated Circuit Card)는 단말, 일 예로 이동 통신 단말기 등에 삽입 되어 사용되는 스마트카드(smart card)이고 UICC 카드라고도 칭해진다. 상기 UICC에 이동 통신 사업자의 네트워 크에 접속하기 위한 접속 제어 모듈이 포함될 수 있다. 이러한 접속 제어 모듈의 예제들은 범용 가입자 식별 모 듈(USIM: Universal Subscriber Identity Module), 가입자 식별 모듈(SIM: Subscriber Identity Module), 인 터넷 프로토콜 멀티미디어 서비스 식별 모듈(ISIM: IP (Internet Protocol) Multimedia Service Identity Module) 등을 포함한다. USIM이 포함된 UICC를 통상 USIM 카드라고 부르기도 한다. 마찬가지로 SIM 모듈이 포함된 UICC를 통상적으로 SIM카드라고 부르기도 한다. 하기의 설명에서 SIM 카드라 함은 UICC 카드, USIM 카드, ISIM이 포함된 UICC 등을 포함하는 통상의 의미로 사용될 수 있음에 유의하여야만 할 것이다. SIM 카드라 하여도 그 기술적 적용이 USIM 카드 또는 ISIM 카드 또는 일반적인 UICC 카드에도 동일하게 적용될 수 있음은 물론이다. 상기 SIM 카드는 이동 통신 가입자의 개인 정보를 저장하고, 이동 통신 네트워크에 접속 시 가입자 인증 및 트 래픽 (traffic) 보안 키(key) 생성을 수행하여 안전한 이동통신 이용을 가능하게 한다. 상기 SIM 카드는 일반적으로 상기 SIM 카드를 제조할 때 특정 이동 통신 사업자의 요청에 의해 해당 이동 통신 사업자를 위한 전용 카드로 제조되며, 해당 사업자의 네트워크 접속을 위한 인증 정보, 예를 들어, USIM (Universal Subscriber Identity Module) 어플리케이션 및 IMSI (International Mobile Subscriber Identity), K 값, OPc 값 등이 사전에 카드에 탑재되어 출고된다. 따라서 제조된 상기 SIM 카드는 해당 이동 통 신 사업자가 납품 받아 가입자에게 제공되며, 이후 필요 시에는 OTA (Over The Air) 등의 기술을 활용하여 상기 UICC 내 어플리케이션의 설치, 수정, 삭제 등의 관리도 수행할 수 있다. 가입자는 소유한 이동 통신 단말기에 상기 UICC 카드를 삽입하여 해당 이동 통신 사업자의 네트워크 및 응용 서 비스의 이용이 가능하다. 그리고 가입자는 이동 통신 단말기 교체 시 상기 UICC 카드를 기존 이동 통신 단말기 에서 새로운 이동 통신 단말기로 이동 삽입함으로써 상기 UICC 카드에 저장된 인증 정보, 이동통신 전화번호, 개인 전화번호부 등을 새로운 이동 통신 단말기에서 그대로 사용이 가능하다. 그러나, 상기 SIM 카드는 이동 통신 단말기 사용자가 다른 이동 통신사의 서비스를 제공받는데 있어 불편한 점 이 있다. 이동 통신 단말기 사용자는 이동 통신 사업자로부터 서비스를 받기 위해 SIM 카드를 물리적으로 획득 해야 되는 불편함이 있다. 예를 들면, 다른 나라로 여행을 했을 때 현지 이동통신 서비스를 받기 위해서는 현지 SIM 카드를 구해야 하는 불편함이 있다. 로밍 서비스의 경우 상기 불편함을 어느 정도 해결해 주지만, 비싼 요 금 및 통신사간 계약이 되어 있지 않은 경우 서비스를 받을 수 없는 문제도 있다. 한편, UICC 카드에 상기 SIM 모듈을 원격으로 다운로드 받아서 설치할 경우, 이러한 불편함을 상당 부분 해결할 수 있다. 예를 들면, 사용자가 원하는 시점에 사용하고자 하는 이동통신 서비스의 SIM 모듈을 UICC 카드에 다운 로드 받을 수 있다. 이러한 UICC 카드는 또한 복수 개의 SIM 모듈을 다운로드 받아서 설치하고 그 중의 적어도 한 개의 SIM 모듈만을 선택하여 사용할 수 있다. 이러한 UICC 카드는 단말기에 고정하거나 고정하지 않을 수 있 다. 단말에 고정하여 사용하는 UICC를 eUICC라고 하는데, 통상적으로 eUICC는 단말에 고정하여 사용하고, 원격 으로 SIM 모듈을 다운로드 받아서 선택할 수 있는 UICC 카드를 의미한다. 본 개시에서는 원격으로 SIM 모듈을 다운로드 받아 선택할 수 있는 UICC 카드를 eUICC로 통칭한다. 원격으로 SIM 모듈을 다운로드 받아 선택할 수 있는 UICC 카드 중 단말에 고정하는 UICC 카드 및 고정하지 않는 UICC 카드를 통칭하여 eUICC로 사용한다. 또한 다운로드 받는 SIM 모듈정보를 통칭하여 프로파일(Profile) 이라는 용어로 사용한다. 상기 eUICC내의 프로파일은 1개 이상이 존재하더라도 동시에 1개만 활성화(Enabled)가 가능하다. 따라서, 단말 에서 2개 이상의 기저대역(들)을 지원하고, 해당 eUICC에 2개 이상의 프로파일이 존재하더라도 해당 단말에서는 프로파일 2개를 하나의 휴대 전화에서 동시에 사용 가능하게 하는 듀얼 SIM 기능을 지원하지 못한다. 이를 해결 하기 위한 방법으로 eUICC내의 프로파일이 1개 이상이 존재하고 동시에 1개 이상 활성화(Enabled)가 가능하도록 하는 MEP(Multiple Enabled Profiles)에 대한 필요성이 대두되었다. 하지만, 현재 단말과 eUICC간에 MEP 지원 시 단말에서 eUICC내 프로파일 관리 명령을 처리하는 ISD-R(Issuer Security Domain Root)로의 접근 방식 선택 및 해당 결정에 따라서 단말 또는 eUICC에서 처리해야 할 동작이 정 의되어 있지 않다. 단말의 eUICC 제어 애플리케이션인 LPA(Local Profile Assistant)에서는 eUICC의 ISD-R로, 전송하는 프로파일 관리 명령에 관리 대상 프로파일의 ID인 ICCID(Integrated Circuit Card ID)를 포함해 명령 을 전송한다. 해당 명령을 수신한 eUICC는 해당 ICCID에 대한 프로파일 관리 명령을 처리하고 프로파일 상태 변 경 또는 eUICC 전체 상태 변경 등이 발생했음을 단말 모뎀에 전송하여 단말 모뎀으로 하여금 해당 명령 전송에 따른 필요한 절차를 수행하도록 한다. 일반적으로 단말 모뎀의 Baseband 1개가 eUICC 1개(의 프로파일 1개)와 하나의 물리 인터페이스로 연결되어 있었기 때문에 프로파일에 대한 명령을 처리할 때 Baseband 맵핑을 고려할 필요가 없다. 하자만, MEP 지원하는 경우에 단말에 복수 개의 Basebands, eUICC에 복수 개의 프로파일들, 그리 고 단말과 eUICC간에 복수 개의 eSIM Port들(eSIM Port는 후술할 바와 같이 1개의 물리 인터페이스를 의미하는 용어로 사용하였다)이 존재하므로 이를 모두 고려하여 단말-eUICC간 프로파일 관리 메시지를 전송하고 처리하는 방법이 고안되어야 한다."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "일반적으로 무선 통신 시스템에서는 단말과 eUICC 모두가 상기 eUICC에 1개의 프로파일만 동시에 활성화 가능한 경우를 가정하여 단말 및 eUICC간의 초기화(Initialization)를 핸들링하는 방안이 고려된다. 1개 eUICC에서 2개 이상의 프로파일을 동시 활성화하는 방안이 논의가 시작되었으며, 이를 위한 논리 인터페이스를 사용하여 단말 과 eUICC의 프로파일간에 메시지를 주고 받을 수 있도록 제공하는 방법이 논의된다. 이에 따라, 본 발명에서는 논리 인터페이스와 프로파일의 연결 관계를 고려하여 논리 인터페이스 및 프로파일의 상태를 처리하는 방법을 제안한다."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기와 같은 문제점을 해결하기 위한 본 발명은 무선 통신 시스템에서 제어 신호 처리 방법에 있어서, 기지국으 로부터 전송되는 제1 제어 신호를 수신하는 단계; 상기 수신된 제1 제어 신호를 처리하는 단계; 및 상기 처리에 기반하여 생성된 제2 제어 신호를 상기 기지국으로 전송하는 단계를 포함하는 것을 특징으로 한다."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시 예에 따르면, 단말은 복수의 프로파일을 동시에 사용함으로써 사용자 편의성을 제고할 수 있게 된다. 그리고 단말은 사용자에게 정확한 프로파일의 사용 가능 여부에 대한 정보를 구성하여 제공할 수 있게 된 다."}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하 첨부된 도면을 참조하여 본 개시의 동작 원리를 상세히 설명한다. 하기에서 본 개시를 설명하기에 있어 관 련된 공지 기능 또는 구성에 대한 구체적인 설명이 본 개시의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우 에는 그 상세한 설명을 생략할 것이다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어 들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반 에 걸친 내용을 토대로 내려져야 할 것이다. 마찬가지 이유로 첨부된 도면에 있어서 일부 구성요소는 과장되거 나 생략되거나 개략적으로 도시되었다. 또한, 각 구성요소의 크기는 실제 크기를 전적으로 반영하는 것이 아니 다. 각 도면에서 동일한 또는 대응하는 구성 요소에는 동일한 참조 번호를 부여하였다. 본 개시에 따른 기술적 사상의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예 들을 참조하면 명확해질 것이다. 그러나 본 개시는 이하에서 개시되는 실시 예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있으며, 단지 본 실시 예들은 본 개시가 완전하도록 하고, 본 개시가 속하는 기 술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 개시는 청 구항의 범주에 의해 정의될 뿐이다. 명세서 전체에 걸쳐 동일 참조 부호는 동일 구성 요소를 지칭한다. 또한 본 개시를 설명함에 있어서 관련된 기능 또는 구성에 대한 구체적인 설명이 본 개시에 따른 기술적 사상의 요지를 불필요하게 흐릴 수 있다고 판단된 경우 그 상세한 설명은 생략한다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므 로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 이하, 기지국은 단말의 자원할당을 수행하는 주체로서, gNode B, eNode B, Node B, BS (Base Station), 무선 접속 유닛, 기지국 제어기, 또는 네트워크 상의 노드 중 적어도 하나일 수 있다. 단말은 UE (User Equipment), MS (Mobile Station), 셀룰러폰, 스마트폰, 컴퓨터, 또는 통신 기능을 수행할 수 있는 멀티미디어 시스템을 포 함할 수 있다. 본 개시에서 하향링크(Downlink; DL)는 기지국이 단말에게 전송하는 신호의 무선 전송 경로이고, 상향링크는(Uplink; UL)는 단말이 기국에게 전송하는 신호의 무선 전송경로를 의미한다. 또한, 이하에서 LTE 혹 은 LTE-A 시스템을 일 예로서 설명할 수도 있지만, 유사한 기술적 배경 또는 채널 형태를 갖는 다른 통신시스템 에도 본 개시의 실시예가 적용될 수 있다. 예를 들어 LTE-A 이후에 개발되는 5세대 이동통신 기술(5G, new radio, NR)이 본 개시의 실시예가 적용될 수 있는 시스템에 포함될 수 있으며, 이하의 5G는 기존의 LTE, LTE-A 및 유사한 다른 서비스를 포함하는 개념일 수도 있다. 또한, 본 개시는 숙련된 기술적 지식을 가진 자의 판단으 로써 본 개시의 범위를 크게 벗어나지 아니하는 범위에서 일부 변형을 통해 다른 통신시스템에도 적용될 수 있다. 이 때, 처리 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수행될 수 있음을 이해할 수 있을 것이다. 이들 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있으므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서를 통해 수행되는 그 인스트럭션들이 흐름도 블록(들)에서 설명된 기능들을 수행하는 수단을 생성하게 된다. 이들 컴퓨터 프로그램 인스트럭션들은 특정 방식으로 기능을 구현하기 위해 컴퓨터 또는 기타 프로그램 가능한 데이 터 프로세싱 장비를 지향할 수 있는 컴퓨터 이용 가능 또는 컴퓨터 판독 가능 메모리에 저장되는 것도 가능하므 로, 그 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메모리에 저장된 인스트럭션들은 흐름도 블록(들)에서 설명된 기능을 수행하는 인스트럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭 션들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에 탑재되는 것도 가능하므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에서 일련의 동작 단계들이 수행되어 컴퓨터로 실행되는 프로세 스를 생성해서 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 수행하는 인스트럭션들은 흐름도 블 록(들)에서 설명된 기능들을 실행하기 위한 단계들을 제공하는 것도 가능하다. 또한, 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 또, 몇 가지 대체 실행 예들에서는 블록들에서 언급된 기 능들이 순서를 벗어나서 발생하는 것도 가능함을 주목해야 한다. 예를 들면, 잇달아 도시되어 있는 두 개의 블 록들은 사실 실질적으로 동시에 수행되는 것도 가능하고 또는 그 블록들이 때때로 해당하는 기능에 따라 역순으 로 수행되는 것도 가능하다. 이 때, 본 실시 예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 FPGA(Field Programmable Gate Array) 또는 ASIC(Application Specific Integrated Circuit)과 같은 하드웨어 구성요소를 의미하며, '~부'는 어떤 역할들을 수행할 수 있다. 그렇지만 '~부'는 소프트웨어 또는 하드웨어에 한정되는 의 미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서 들을 재생시키도록 구성될 수도 있다. 따라서, 일 예로서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨 어 구성요소들, 클래스 구성요소들 및 태스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이 터베이스, 데이터 구조들, 테이블들, 어레이들, 및 변수들을 포함한다. 구성요소들과 '~부'들 안에서 제공되는 기능은 더 작은 수의 구성요소들 및 '~부'들로 결합되거나 추가적인 구성요소들과 '~부'들로 더 분리될 수 있다. 뿐만 아니라, 구성요소들 및 '~부'들은 디바이스 또는 보안 멀티미디어카드 내의 하나 또는 그 이상의 CPU들을 재생시키도록 구현될 수도 있다. 또한 실시예에서 '~부'는 하나 이상의 프로세서를 포함할 수 있다. 먼저, 본 개시에서 사용되는 용어에 대해서 정의한다. 본 개시에서 UICC는 이동통신 단말기에 삽입하여 사용하는 스마트카드로서 이동통신 가입자의 네트워크 접속 인 증 정보, 전화번호부, SMS와 같은 개인정보가 저장되어 GSM, WCDMA, LTE, 5G 등과 같은 이동통신 시스템에 접속 시 가입자 인증 및 트래픽 보안 키 생성을 수행하여 안전한 이동통신 이용을 가능케 하는 칩을 의미한다. UICC 에는 가입자가 접속하는 이동통신 네트워크의 종류에 따라 SIM(Subscriber Identification Module), USIM(Universal SIM), ISIM(IP Multimedia SIM)등의 통신 어플리케이션이 탑재되며, 또한 전자지갑, 티켓팅, 전자여권 등과 같은 다양한 응용 어플리케이션의 탑재를 위한 상위 레벨의 보안 기능을 제공할 수 있다. 본 개시에서 eUICC(embedded UICC)는 단말에 내장된 보안 모듈로 한정하지 않으며 단말에 삽입 및 탈거가 가능 한 착탈식 보안 모듈을 포함한다. eUICC는 OTA(Over The Air)기술을 이용하여 프로파일을 다운받아 설치할 수 있다. eUICC는 프로파일 다운로드 및 설치가 가능한 UICC로 명명할 수 있다. 본 개시에서 eUICC에 OTA 기술을 이용하여 프로파일을 다운받아 설치하는 방법은 전술한 바와 같이 단말에 삽입 및 탈거가 가능한 착탈식 UICC에도 적용될 수 있다. 예를 들면, 본 개시의 실시 예는 OTA 기술을 이용하여 프 로파일을 다운 받아 설치 가능한 착탈식 UICC에 적용될 수 있다. 본 개시에서 용어 UICC는 SIM과 혼용될 수 있고, 용어 eUICC는 eSIM과 혼용될 수 있다. 본 개시에서 프로파일(Profile)은 UICC내에 저장되는 어플리케이션, 파일시스템, 인증키 값 등을 소프트웨어 형 태로 패키징 한 것을 의미할 수 있다. 또한, 프로파일을 접속정보로 명명할 수 있다. 본 개시에서 USIM 프로파일은 프로파일과 동일한 의미 또는 프로파일 내 USIM 어플리케이션에 포함된 정보를 소 프트웨어 형태로 패키징 한 것을 의미할 수 있다. 본 개시에서 프로파일 서버는 프로파일을 생성하거나, 생성된 프로파일을 암호화하거나, 프로파일 원격관리 명 령어를 생성하거나, 생성된 프로파일 원격관리 명령어를 암호화하는 기능을 제공하거나, 단말의 복수 프로파일 활성화 지원 기능을 포함할 수 있는 서버로, SM-DP(Subscription Manager Data Preparation), SM-DP+ (Subscription Manager Data Preparation plus), SM-SR (Subscription Manager Secure Routing)으로 표현될 수 있다. 본 개시에서 사용하는 용어 '단말' 또는 '기기'는 이동국(MS), 사용자 장비(UE; User Equipment), 사용자 터미 널(UT; User Terminal), 무선 터미널, 액세스 터미널(AT), 터미널, 가입자 유닛(Subscriber Unit), 가입자 스 테이션(SS; Subscriber Station), 무선 기기(wireless device), 무선 통신 디바이스, 무선 송수신 유닛(WTRU; Wireless Transmit/Receive Unit), 이동 노드, 모바일 또는 다른 용어들로서 지칭될 수 있다. 단말의 다양한 실시 예들은 셀룰러 전화기, 무선 통신 기능을 가지는 스마트 폰, 무선 통신 기능을 가지는 개인 휴대용 단말기 (PDA), 무선 모뎀, 무선 통신 기능을 가지는 휴대용 컴퓨터, 무선 통신 기능을 가지는 디지털 카메라와 같은 촬 영장치, 무선 통신 기능을 가지는 게이밍 장치, 무선 통신 기능을 가지는 음악저장 및 재생 가전제품, 무선 인 터넷 접속 및 브라우징이 가능한 인터넷 가전제품뿐만 아니라 그러한 기능들의 조합들을 통합하고 있는 휴대형 유닛 또는 단말기들을 포함할 수 있다. 또한, 단말은 M2M(Machine to Machine) 단말, MTC(Machine Type Communication) 단말/디바이스를 포함할 수 있으나, 이에 한정되는 것은 아니다. 본 개시에서 상기 단말은 전자 장치 또는 단순히 디바이스라 지칭할 수도 있다. 본 개시에서 상기 단말 또는 기기는 UICC 또는 eUICC를 제어하도록 단말 또는 기기 내에 설치된 소프트웨어 또 는 애플리케이션을 포함할 수 있다. 상기 소프트웨어 또는 애플리케이션은, 예를 들어 Local Profile Assistant(LPA)라 지칭할 수 있다. 본 개시에서 eUICC 식별자(eUICC ID)는, 단말에 내장된 eUICC의 고유 식별 자일 수 있고, EID로 지칭될 수 있다. 본 개시에서 APDU(application protocol data unit)는 단말 또는 기기 내의 제어부(Controller)가 eUICC와 연 동하기 위한 메시지일 수 있다. APDU는 Command와 Response의 한 쌍이며, APDU Command와 APDU Response는 ISO 7816을 참조하여 ETSI 102.221에 정의되어 있다. ETSI 102.221에 정의된 바와 같이 APDU Command는 APDU의 헤 더로 CLA(Class of Instruction), INS(Instruction), P1(Instruction Parameter 1), P2(Instruction Parameter 2), Body로 Lc(Number of bytes in the command data field), Data, Le(Number of bytes expected in response of the command)의 구조를 가지며, APDU Response는 Optional Data field와, SW1(Status byte 1), SW2 (Status byte 2)의 구조를 가지며 이에 대한 상세한 설명은 ETSI 102.221 규격을 참조한다. 본 개시에서 프로파일 패키지(Profile Package)는 프로파일과 혼용되거나 특정 프로파일의 데이터 객체(data object)를 나타내는 용어로 사용될 수 있으며, 프로파일 TLV 또는 프로파일 패키지 TLV (Profile Package TL V)로 명명될 수 있다. 프로파일 식별자는, 프로파일의 고유 식별 번호로 ICCID로 지칭될 수 있다. 프로파일 패 키지가 암호화 파라미터를 이용해 암호화된 경우 보호된 프로파일 패키지(Protected Profile Package (PPP)) 또 는 보호된 프로파일 패키지 TLV (PPP TLV)로 명명될 수 있다. 프로파일 패키지가 특정 eUICC에 의해서만 복호화 가능한 암호화 파라미터를 이용해 암호화된 경우 묶인 프로파일 패키지(Bound Profile Package (BPP)) 또는 묶 인 프로파일 패키지 TLV (BPP TLV)로 명명될 수 있다. 프로파일 패키지 TLV는 TLV (Tag, Length, Value) 형식 으로 프로파일을 구성하는 정보를 표현하는 데이터 세트 (set) 일 수 있다. 본 개시에서 AKA는 인증 및 키 합의 (Authentication and Key agreement)를 나타낼 수 있으며, 3GPP 및 3GPP2 망에 접속하기 위한 인증 알고리즘을 나타낼 수 있다. K는 AKA 인증 알고리즘에 사용되는 eUICC에 저장되는 암 호키 값이며, 본 개시에서 OPc는 AKA 인증 알고리즘에 사용되는 eUICC에 저장될 수 있는 파라미터 값이다. 본 개시에서 NAA는 네트워크 접속 어플리케이션 (Network Access Application) 응용프로그램으로, UICC에 저장 되어 망에 접속하기 위한 USIM 또는 ISIM과 같은 응용프로그램일 수 있다. NAA는 망접속 모듈일 수 있다. 본 개시에서 End user, 사용자, 가입자, 서비스 가입자, user는 해당 단말의 사용자로 혼용되어 사용될 수 있다. 본 개시에서 eSIM 포트(port)는 eUICC - 모뎀과 연결된 물리 인터페이스를 다중화(Multiplexing)하여 나누어 사 용하는 가상 인터페이스를 의미하며, eSIM port, 포트, SIM 포트. 이포트, ePort, 이심포트, logical interface(논리 인터페이스), LSI(Logical SE Interface)와 혼용되어 사용될 수 있다. 본 발명에서 논리 인터 페이스는 eSIM 포트를 포괄하는 단말-카드(eUICC 또는 eUICC가 아닌 다른 카드) 간에 생성하는 논리 인터페이스 로 설명될 수도 있다. ISD-R이 사용하는 eSIM 포트를 ISD-R eSIM 포트로 칭하여 표현할 수 있고, 프로파일이 사용하는 eSIM 포트는 프 로파일 eSIM Port로 구분하여 사용할 수도 있다. 본 개시에서 GetProfileInfo()를 통해서 LPA에 회신될 수 있는 프로파일에 대한 정보는 프로파일 메타데이터 또 는 프로파일 정보 라는 용어로 사용될 수 있다. 해당 정보는 SM-DP+에서 단말에 프로파일 설치 시에 제공해 주 는 프로파일의 정보 또는 LPA로부터 eUICC가 ES10c 명령을 수신 받아 처리한 프로파일의 상태 또는 설정 정보, 또는 eUICC가 특정 조건을 만족하는 경우에, 처리한 프로파일의 상태/설정 정보일 수 있다. 본 개시에서 단일 eUICC에 존재하는 복수 개의 프로파일을 활성화하고 관리하는 기능을 통칭하여 Multiple Enabled Profile (MEP) 기능이라 칭한다. 종래 eUICC는 최대 1개의 프로파일만 활성화가 가능하여, 단일 eUICC 로는 듀얼(Dual) SIM 또는 멀티(Multi) SIM 기능을 지원하지 못한다. 단일 eUICC로 듀얼 SIM 또는 멀티 SIM 기 능을 지원하기 위해, 단일 eUICC에서 복수 개의 프로파일이 활성화되고 이를 관리하는 기능이 필요하다. MEP 기 능이 구현된 eUICC를 MEP 지원 eUICC라 칭할 수 있다. MEP 기능이 구현된 모뎀과, 이를 지원할 수 있는 단말 소 프트웨어, 예를 들어 LPA를 포함하는 단말을 MEP 지원 단말이라 칭할 수 있다. 본 개시에서 단말과 eUICC간에 초기화 과정을 통해 단일 물리 인터페이스에서 1개 이상의 논리적 인터페이스 (logical interface)가 사용 가능하도록 분할 다중화하여 전송할 수 있도록 동작하기로 결정한 모드를 MEP 모드 라고 칭할 수 있다. MEP 지원 단말 또는 MEP 지원 eUICC라고 하더라도, 단말과 eUICC간의 초기화 과정에서 MEP 모드로 동작을 결정하지 않은 경우 MEP 모드로 동작하지 않음에 유의해야 한다. 해당 모드로 동작하는 경우는 SEP(Single Enabled Profile)모드로 칭할 수 있다. 그리고, 본 개시를 설명함에 있어서, 관련된 공지 기능 또는 구성에 대한 구체적인 설명이 본 개시의 요지를 불 필요하게 흐릴 수 있다고 판단된 경우, 그 상세한 설명은 생략한다. 이하에서는 도면들을 통해 본 개시에서 제안하는 실시 예(들)을 설명한다. 도 1은 본 개시의 실시 예에 따른 무선 통신 시스템의 구성 요소들을 나타낸 도면이다. 단말은 일반 앱와 LPA, 단말 프레임워크(Framework) , MEP 지원 모뎀 을 포함할 수 있다. 여기서 일반 앱은 통신사업자 앱 또는 SIM 카드 매니저 앱과 같이 단말에 미리 저장(pre-loaded)되 어 있거나 다운로드하여 설치 가능한 앱으로 물리 심카드(pSIM: physical SIM) 또는 eUICC 의 프로 파일에 접근 권한을 가지는 앱을 나타낸다. 한편, LPA는 eUICC 제어를 담당하는 앱으로, SM- DP+와 단말 사용자, 그리고 eUICC내의 ISD-R과 통신하면서 프로파일에 대한 관리를 처리한 다. LPA는 단독 또는 다른 일반 단말 애플리케이션에 통합 구현될 수 있다. LPA에서는 사용자 인터페 이스 (user interface, UI)를 구성하여 프로파일의 로컬 관리에 대한 사용자의 입력(Input)을 획득하거나 또는 SM-DP+ 원격 관리 명령어를 SM-DP+서버로부터 수신한 후, 해당 명령에 대한 UI를 구성하여 사용자 입력을 획득한 후, LPA에서 eUICC의 ISD-R로 프로파일의 관리 명령을 전달하여 프로파일 의 활성화/비활성화/삭제/업데이트를 처리할 수 있다. LPA는 단독 또는 다른 일반 단말 애플리케이션에 통합 구현된 경우(일 예로 심카드 매니저 앱의 구분이 필 요하지 않는 경우) 에도 본 발명에서 LPA라고 표현하기로 한다. 원격 프로파일 관리(RPM: Remote Profile Management)는 SM-DP+에서 단말로 전송하는 명령어에 의해 프로파일 설치/활성화/비활성화/삭제 및 기타 기능이 수행되는 일련의 절차를 통칭한다. RPM은 통신 사업자, 서비스 제공자, 또는 단말의 소유자에 의해 요청 되어 SM-DP+에 의해 명령어가 생성될 수 있다. 단말의 통신 모뎀는 정보 전달을 위해 신호를 변조하여 송신하고 수신 측에서 원래의 신호로 복구하 기 위해 복조하는 장치로 MEP 지원 모뎀의 경우 무선통신을 위한 기저대역 프로세서(Baseband Processor) (이하 기저대역(Baseband))가 2개 이상 탑재될 수 있다. 기저대역은 모뎀 안에 논리적으로 구현될 수 있다. 모뎀(12 5)은 현재 UICC 또는 eUICC와 각 1개의 물리 핀 (스마트 카드 인터페이스로 ISO-7816 규격을 준용)으로 연결되 어 있으며, 해당 인터페이스를 통해서 모뎀이 명령(Command)에 대한 APDU(Application Protocol Data Unit)을 eUICC에 송신하면 이에 대해 eUICC가 결과 값을 응답하는 방식으로 동작한다. SIM Card(pSIM)는 물 리 핀 1개를 통해 모뎀의 기저대역 1개를 점유하며 pSIM 1개는 SIM 포트 하나를 가진다. SIM 포트는 SIM 카드 슬롯(Slot)과 혼용되어 사용될 수 있으며, GSMA TS(Technical Specification).37에 \"physical and electronic housing provided on a device to accommodate a physical SIM card\"로 정의되어 있다. MEP 지원 eUICC 는 MEP 지원 모뎀과 1개의 물리 핀으로 연결되어 있으며 eUICC 내의 프로파일은 MEP 지원 모뎀 내의 기저대역 1개를 점유한다. 각 프로파일 1개는 eSIM 포트 1개를 통해서 eSIM 포트에 맵핑된 기저대역 과 통신을 수행한다. 예를 들어 도 1에서 프로파일 1은 활성화된 상태로 eSIM 포트 1을 사용하여 기저대역1을 점유하고, 프로파일2는 활성화된 상태로 eSIM 포트 2을 사용하여 기저대역 2를 점유하여 사용할 수 있 다. 이 경우에, 도 1에서 pSIM은 삽입되어 있으나 기저대역과 연결이 없는 상태가 될 수 있다. 한편 ISD- R은 LPA 또는 모뎀에서만 선택 가능한 eUICC내 엔티티(Entity)로 프로파일의 메타데이터 또는 eUICC내 프로파일의 상태 및 설정 정보를 저장 또는 eUICC 내부 동작을 통해 수집하여 LPA 또는 단말(10 5)로부터 명령을 수신하는 경우에 회신해 줄 수 있다. 일 예로, ISD-R 선택 명령 APDU 또는 APDU의 메시지로 GetProfileInfo()등과 같은 프로파일 관리와 같은 명령을 수신하는 경우를 포함할 수 있다. 한편, LPA는 단말 프레임워크위에서 동작하는 소프트웨어로 LPA의 기능은 단말 프레임워크에 일부 통합될 수 있다. LPA에서 eUICC로 전송하는 메시지는 단말 프레임워크와 모뎀을 경유하여 eUICC로 최종 전송되며, 해당 메시지를 수신한 eUICC은 LPA에서 전송된 APDU에서 ES10x 명령을 확인하여 eUICC의 프로파일 관리 동작을 수행한다. 도 1에서는 이하 설명의 편의를 위해 eUICC에 프로파일 1과 프로파일 2의 2개 프로파일들이 존재하는 경우 를 가정하여 도시하였으나 이에 한정하지 않고 eUICC의 메모리 능력(Capability)에 따라서 더 많은 프로파 일이 존재할 수 있고 또한 2개 이상의 프로파일이 활성화 상태로 존재할 수 있음에 유의해야 한다. MEP지원 eUICC에서는 프로파일 1과 프로파일 2가 동시에 활성화될 수 있다. MEP 미지원 eUICC인 경우에는 프 로파일 1 또는 프로파일 2 중 1개의 프로파일만 활성화 상태가 가능하다. ISD-R은 신규 ISD- P(프로파일의 호스팅을 위한 보안 도메인(Security Domain)을 의미)를 생성하고 전술한 바와 같이 LPA 기능에 의해 요구되는 필요한 eUICC 데이터 및 서비스(예를 들어 로컬 프로파일 관리, 프로파일의 정보 등)를 저장 또 는 eUICC내에서 수집하여 LPA에 제공한다. 한편, 도 1에서는 단말의 eUICC에는 설명의 편의를 위해 도시하지 않았으나, eUICC의 보안 도메인들 에서 요구하는 인증서들(Credentials), 예를 들어 SM-DP+ 인증서를 검증하기 위한 증명서 발급자의 루트 공개 키(Certificate Issuer's Root public Key), eUICC 제조사의 키 셋(keyset) 등을 저장하는 공간인 ECASD(Embedded UICC Controlling Authority Security Domain), eSIM 운영 플랫폼 등이 포함될 수 있다. 단말 프레임워크는 단말의 운영 체제를 의미하며 모뎀 및 기타 단말 시스템과 일반 앱 및 LPA간에 존재한 다. 단말 프레임워크은 모뎀으로부터 eUICC에 대한 정보를 획득하여 가지고 있다가 일반 앱 또는 LPA 에서 단말 또는 eUICC에 대한 정보를 요청 시 해당 정보를 회신해 줄 수 있다. 또한 단말 프레임워크은 일 반 앱 또는 LPA에서 수신 받은 채널 오픈 또는 포트 오픈 명령에 따라 Command APDU를 생성하여 모뎀에 전송하 고 모뎀으로부터 해당 APDU에 대한 응답 메시지를 수신 받아 다시 일반 앱 또는 LPA에 전달할 수 있다. 포트 오 픈 명령에 따라 모뎀에서 생성하는 Command APDU의 일 예는 명시적인 포트 오픈에 대한 Command일 수 있고, 다 른 일 예는 이미 열려 있는 포트의 상태를 변경(비활성화에서 활성화 상태로 변경)하는 포트 리셋 Command일 수 도 있다. 본 발명에서 오픈된 포트 또는 포트를 오픈한다는 의미는 해당 포트에서 APDU 송수신이 가능한 상태로 단말과 카드가 초기화한 상태를 지칭하여 사용되었다. 예를 들면, 포트를 오픈한다는 의미는 단말의 모뎀-eUICC 간 오픈된 포트이나 비활성화된 상태로 단말-카드 간 카드 세션에서 해당 포트에서 APDU 송수신이 발생하지 않 는 경우에서, 단말이 APDU를 전송 가능하도록 해당 포트를 선택 또는/그리고 초기화하는 과정을 거쳐, 사용 상 태로 진입하는 것도 포함한다. 한편, 단말의 모뎀에서 특정 활성화된 프로파일과의 APDU 송수신을 위해서 포트 를 제공하지 않는 경우, 해당 활성화된 프로파일은 닫힌 포트에 있다고 기술하였다. 닫힌 포트는 단말의 모뎀- eUICC간 오픈된 포트이나 비활성화된 상태로 있는 포트도 포함할 수 있다. 또한, 단말 프레임워크은 일반 앱 또는 LPA에서 호출된 channel.transmit(Command APDU)를 수신 받아 channel.transmit(Response APDU)포맷으로 일반 앱 또는 LPA에서 전달해 줄 수 있다. SM-DP+서버는 전술한 바와 같이 프로파일을 생성하거나, 생성된 프로파일을 암호화하거나, 프로파일 원격 관리 명령어를 생성하거나, 생성된 프로파일 원격관리 명령어를 암호화하는 기능을 포함하고 있거나, 단말의 복 수 프로파일 활성화 지원 기능을 포함하는 서버를 의미한다. 도 2는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 MEP를 지원하지 않는 현재 v2 내장 범용 통합 회로 카드(embedded Universal Integrated Circuit Card: eUICC)와 모뎀 간 연결에 대한 예시를 개략적으로 도시하 고 있는 도면이다. 일반적으로 v2 eUICC에서는 eUICC에서 단일(1개) 프로파일만 활성화가 가능하며, 기 설치된 프로파일의 활성화/ 비활성화/삭제/업데이트 등을 처리하기 위해 SM-DP+의 개입이 없는 사용자의 로컬 프로파일 관리만 가능하다. MEP 미 지원 모뎀인 경우에, 물리적 SIM 카드를 eUICC 와 동시 사용하는 경우 등을 고려하면 기지대역을 1 개 이상 가질 수 있으나, 본 개시에서는 1개의 기저대역을 가정하여 설명한다. 단말과 eUICC간 초기화 과정에서모뎀은 eUICC로 수신한 ATR(Answer to Reset) 정보를 통해서 최대 오픈 가능한 채널을 개수를 확인할 수 있으며, 기존 최대 20(0번 내지 19번)개의 채널을 생성할 수 있다. 모뎀과 eUICC간 초기화 과정에서 모뎀은 eUICC내 ISD-R을 선택하여 APDU를 전송하기 위한 채널을 MANAGE CHANNNEL Open Command를 통해 생성할 수 있으 며, 이후 특정 시점에 단말 프레임워크로부터 채널 오픈에 대한 요청을 수신하는 경우, 모뎀은 추가적으로 애플 리케이션과 eUICC간의 프로파일 또는 LPA와 ISD-R간 APDU 전송을 처리하기 위한 각 독립적인 채널을 오픈하여 APDU를 전송할 수 있다. 기존에 모뎀과 카드 간에는 1개의 물리적인 인터페이스만을 사용하므로 모뎀은 해당 인 터페이스안에서 애플리케이션과 eUICC 간의 프로파일 내의 특정 애플릿(Applet)간, 또는 LPA와 ISD-R간에 종단 으로 APDU 전송을 처리할 수 있도록 독립된 채널을 할당하여 APDU를 전송 처리한다. v2 eUICC까지의 eUICC에서는 1개의 프로파일만 동시에 활성화가 가능하다. Case 1 또는 Case 2와 같이 활성화된 1개의 프로파일은 모뎀의 1개의 기저대역를 점유하고 있으며 eUICC의 활성화된 프로파일에서 모뎀에 Refresh Proactive Command 전송이 필요한 경우에, 모뎀에서 해당 프 로파일의 App ID에 기 할당한 채널을 통해서 APDU를 송신할 수 있다. 예를 들어, Case 1인 경우 프로파일 1의 USIM 애플리케이션은 기저대역 1간에 모뎀이 할당한 임의의 채널 #0을 통해서 APDU를 송신 할 수 있다. 한편, ISD-R이 LPA로부터 프로파일의 상태 변경, 예를 들어 Case 1에서 Case 2로 상태 변경 에 대한 ES10c.EnableProfile(프로파일2) 요청을 수신하는 경우에 또는 eUICC 메모리 리셋(Reset)을 요청 받는 경우, ISD-R은 모뎀으로 기존에 캐시된 프로파일의 데이터 삭제 처리 및/또는 애플리케이션 세션 재 시작을 위해 REFRESH Proactive Command를 통해 UICC 리셋 및/또는 프로파일 상태 변경(eUICC Profile State Change)을 포함하는 Proactive Command를 전송할 수 있다. 이 경우 ISD-R은 모뎀이 ISD- R에 전송하는 APDU에 대한 회신 값으로 Proactive Command가 있음을 알리는 응답 APDU를 전송하고, 모뎀 이 이를 받아 베이직 채널로 FETCH APDU 명령을 내려서 해당 메시지의 응답 APDU의 본문으로 상기 UICC 리 셋 또는 프로파일 상태 변경(eUICC Profile State Change)에 대한 Proactive Command를 회신할 수 있다. Case 1에서 Case 2로 상태 변경이 완료되면 Case 2에서 프로파일 2의 USIM 애플리케이션은 기저대역 1간에 모뎀이 할당한 임의의 채널을 통해서 APDU를 송신할 수 있다. 도 3A 내지 도 3C는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 가상 인터페이스 개념 도입에 따른 eUICC와 모뎀 간 ISD-R 접근 방법을 도시하고 있는 도면이다. 도 3A 내지 도 3C에서 eUICC은 동시에 복수개의 프로파일 활성화가 가능한 MEP기능을 지원하는 eUICC를 가 정하였다. 한편, 모뎀역시 MEP 기능을 지원하는 모뎀을 가정한다. 도 3A 내지 도 3C에서는 기저대역 2개 (기저대역 1 및 기저대역 2)와 활성화된 프로파일이 2개(프로파일 1 및 프로파일 2) 있는 상황을 예로 들어 설명하며 모뎀내의 기저대역과 eSIM 포트 간의 맵핑은 스위칭 가능할 수 있으나, 도 3A 내지 도 3C에서는 논점을 흐리지 않기 위해 모뎀내 논리적 단말 엔드포인트(logical terminal endpoint)의 맵핑을 기저대역 1과 채널 1 간 및 기저대역 2와 채널 2간으로 한 정하여 설명한다. MEP를 지원하는 eUICC은 복수의 프로파일들을 활성화할 수 있으며, 해당 각 활성화된 프로파일은 모뎀의 특정 기저대역을 점유하여 사용할 수 있다. MEP에서는 2개 이상의 프로파일이 동시에 활성화가 가능하므로 기존 의 물리적 인터페이스를 다중화하여 활성화된 프로파일 별로 구분해 APDU를 전송하기 위한 논리적 인터페 이스(logical interface) 개념이 도입될 수 있다. 이하 설명의 편의를 위해 해당 논리적 인터페이스를 eSIM 포 트로 칭하고, eSIM 포트 #1, eSIM 포트 #2 및 eSIM 포트 #0로 구분하여 설명한다. 단말과 카드간 초기화 결과로 모뎀과 eUICC간 APDU 전송을 위한 포트 및 포트 내 전송 채널을 생성할 수 있으며, 이 때, 각 기저대역과 맵핑된 eSIM 포트 ID를 설정할 수 있다. 해당 포트 ID는 모뎀 또는 단말 플랫폼 에서 설정하여 LPA에 전달해 줄 수 있다. 포트 ID는 본 개시에서 설명의 편의를 위해 포트 번호로 혼용되어 사 용하고 있다. 모뎀은 기저대역의 개수보다 더 큰 개수의 eSIM 포트의 개수를 열 수 있고, eUICC에서 활용 하는 eSIM 포트의 개수는 해당 eUICC에서 동시에 활성화 가능한 프로파일의 수와 동일하거나 작을 수 있다. 프 로파일은 해당 eSIM 포트 중 1개를 사용하여 단말과 APDU 메시지를 송수신 할 수 있고 모뎀에 proactive command를 전송할 수 있다. 도 3A 내지 도 3C의 경우의 예에서 모뎀은 APDU Command를 eSIM 포트 #1을 통해서 활성화된 프로파 일 1로 전송할 수 있다. 프로파일 1은 eSIM 포트 #1을 통해서 기저대역 1에 영향을 끼치는 관련된 Proactive Command를 전송할 수 있다. 모뎀은 APDU Command를 eSIM 포트 #2을 통해서 활성화된 프로파일 2로 전송할 수 있다. 프로파일 2은 eSIM 포트 #2을 통해서 기저대역 2에 영향 을 끼치는 관련된 Proactive Command를 전송할 수 있다. 한편, 이하에서 설명되는 도 3A의 Case 1, 도 3B의 Case 2 또는 도 3C의 Case 3과 같이 단 말(모뎀 또는 LPA)은 ISD-R에 APDU를 전송할 eSIM Port를 다음 3가지 Case 중의 한 가지 방법으로 설정할 수 있 다. - 도 3A의 Case1: ISD-R이 eSIM 포트 중 하나를 통해서만 선택 (이하 도 3A의 Case 1은 Dedicated Port로 설명 또는 MEP-B' 방식으로 설명). ISD-R이 사용하는 eSIM 포트는 프로파일과 포트를 공유하나 포 트 내에서 독립적인 단일 채널을 사용한다. 이 경우 예를 들어, LPA 또는 모뎀은 포트 #1내의 ISD- R에 할당된 채널을 통해서만 ISD-R과 APDU를 송수신한다. - 도 3B의 Case2: ISD-R이 프로파일이 점유하고 있는 어떤 eSIM 포트를 통해서든 선택(이하 도 3B 의 Case 2는 Any Port로 설명 또는 MEP-B 방식으로 설명). ISD-R이 사용하는 eSIM 포트는 해당 포트를 점 유하고 있는 프로파일과 포트를 공유하나 포트 내에서 독립적인 단일 채널을 사용한다. 이 경우, 예를 들어 LPA 또는 모뎀은 포트 #1내의 ISD-R에 할당된 채널(355-1) 또는 포트 #2내 ISD-R에 할당된 채 널(355-2) 중 하나를 선택하여 동시 또는 비 동시적으로 ISD-R과 APDU를 송수신한다. - 도 3C의 Case 3: ISD-R이 ISD-R 전용 포트를 통해서 선택되며 프로파일이 점유하고 있는 포트와 포트를 공유하지 않는다 (이하 도 3C의 Case 3은 Exclusive Port 또는 MEP-A 방식으로 설명). 한편, MEP-A 방 식은 LPA가 프로파일을 활성화할 포트를 결정해서 eUICC에 알려 주는 경우, MEP-A1 방식 또는 프로파일 활성화 할 포트를 eUICC가 결정하는 경우 MEP-A2 방식으로 추가로 구분할 수도 있다. 이하 도면에서 ISD-R 선택 방식이 라고 표현하는 경우는, 활성화할 포트를 결정할 주체를 결정하는 것도 포함하여 설명될 수 있다. 예를 들어 도 4 내지 도 5에서 ISD-R 선택 방식을 결정 또는 모드를 결정한다고 할 때, 이는 MEP-A1, MEP-A2와 같은 활성화할 포트를 결정하는 주체를 포함하는 용어로 설명하였다. 상기 전용 포트는 프로파일이 사용하는 eSIM 포트와 독립 적으로 존재하며 해당 포트 내에서 단일 채널을 사용한다. 이 경우, 예를 들어 모뎀 또는 LPA는 독립적인 ISD-R 전용 포트 내의 할당된 채널을 사용해 ISD-R과 APDU를 송수신하고 eUICC는 ISD-R 전용 포트가 아닌 다른 포트로 수신된 프로파일 관리 명령 메시지는 LPA에 에러를 리턴해야 한다. 단말에서 ISD-R에 APDU를 송수신을 위해 어떤 ISD-R 접근 방식으로 선택할지는 도 5에서 후술한 바와 같이 단말 -eUICC 초기화 과정에서 결정되어 단말 Framework를 통해서 LPA가 수신할 수 있다. 단말- eUICC 초기화 과정에 서 결정은 단말-카드간 성능 협상을 통해서 결정하거나, 단말이 결정하여 eUICC에 알려주는 방식으로 eUICC가 설정하거나, eUICC가 단말에 알려주는 방식으로 단말이 설정하는 방식일 수 있다. 또는 초기화 과정에서 결정하 지 않고 LPA는 단말에 사전 사용하도록 정의된 방식으로 ISD-R 접근 방식을 결정하는 것도 가능할 수 있다, 이 는 단말 제조 시 단말사-eUICC 제조사가 결정하여 기설정(pre-configure)한 방법일 수 있다. 또는, 단말에서 결 정한 방식을 모르더라도 eUICC가 처리할 수 있도록 eUICC가 구현하는 것도 가능할 수 있다. 도 4는 본 개시의 일 실시 예에 따른, 단말-카드 간 초기화 과정에서 eUICC로부터 수집한 지원 가능한 포트의 개수 및 활성화된 프로파일에 대한 정보를 참조하여 단말에서 활성화된 프로파일을 위해 사용할 포트의 개수와 닫힌 포트에 활성화된 프로파일에 대한 처리 방법을 결정하는 단계를 설명하는 위한 도면이다. 일반적으로 단말-Card간 초기화(initialization) 절차는 다음과 같다. eUICC 가 단말에 삽입되면 단말의 모뎀(미도시)은 해당 카드를 인지하고 해당 카드를 사용하기 위해 전원 공급, Clock 동기화, 전류, 전압 등 eUICC 카드와의 동작을 위한 운영환경을 설정하는 Activation 및 Cold Reset(4020 단계) 을 수 행할 수 있다. 해당 카드를 사용하기 위한 운영 환경 설정이 완료되면 eUICC는 Answer to Reset(ATR) 메 시지를 단말의 모뎀(미도시)에 회신(4030 단계)할 수 있다. Answer to Reset은 카드가 단말에 처음으로 전송되는 메시지로, 최대 32byte로 구성된 메시지 블록들이 연속적인 체인으로 전송될 수 있다. eUICC는 ATR 메시지의 메시지 블록 들에서 Interface Byte로 정의된 메시지 블록 중 하나로 GSMA SGP.22에서 정의한 eUICC functionality를 지원하는지 여부를 포함하여 단말의 모뎀(미도시)에 전송할 수 있다. 또한, 카드 가 Logical Interface를 지원하는 경우에, 카드는 ATR로 Logical Interface 지원을 표기하여 단말의 모 뎀(미도시)에 전송할 수 있다. 한편, 해당 ATR 메시지(4030 단계)로 eUICC는 지원하는 전송 프로토콜 및 해당 전송 프로토콜의 변경 가 능 여부 등 정보를 함께 포함하여 회신할 수도 있다. 단말의 모뎀(미도시)은 이에 따라 카드에서 지원하 는 전송 프로토콜을 그대로 사용하는 것으로 결정하거나 또는 ATR에 전송 프로토콜 변경 가능에 대한 식별자가있는 경우에, 추가적으로 전송 프로토콜 및 파라미터 결정을 위한 요청을 eUICC에 전송함으로써, 단말 -eUICC간 사용할 전송 프로토콜을 협의하는 과정을 통해서 단말에서 최종 결정할 수 있다. 이제 단말과 카드는 ISO 7816-3에서 정의된 전송 프로토콜인 T=0 또는 T=1 중 하나를 사용하여 APDU(Application Protocol Data Unit) 메시지를 전송할 수 있다. APDU는 명령-응답의 한 쌍으로 구성된 데이 터 Unit으로, 애플리케이션에서 다른 애플리케이션간 메시지 처리를 위해 사용된다. Answer to Reset을 수신(4030 단계)하게 되면, 단말과 eUICC간 Card session이 생성되며 이 시점부터 단말 모 뎀과 eUICC간에 APDU 송수신이 가능하다. 단말 모뎀이 eUICC와 Card session을 맺고 나면 단말 모뎀과 eUICC 간에 APDU 송수신이 가능해 지므로 모뎀은 이후 특정 시점의 Initialization 과정에 SELECT Master File, Terminal Capability Command를 eUICC에 전송할 수 있다. SELECT Master File, Terminal Capability Command를 전송하기 전에 단말은 LSI 관리 Command로 LSI 설정에 대한 정보를 획득하기 위한 메시지를 eUICC에 전송할 수 있다. 또한 해당 SELECT Master File 를 전송하기 이전 시점에, 단말은 ATR(4030 단계)를 통해 수신한 정보로 LSI를 지원하는 카 드라는 정보를 획득하는 경우, 단말이 LSI를 지원하면, 해당 Manage LSI(Instruction = Configure LSI, DATA = LSI에 대한 단말의 Configuration 정보)와 같은 APDU Command를 전송할 수 있다. 앞서 ATR로 수신된 메 시지를 통해(4030 단계)에서 eUICC functionality를 지원하는 경우, 단말은 해당 DATA에 GSMA의 MEP 지 원을 위한 정보를 포함하여 전송할 수 있다. ETSI에서는 단말의 모뎀(미도시)와 카드 간의 Interface를 정의하며 물리적인 Interface를 LSI로 칭할 수 있다. 상기 카드라 함은 eUICC, UICC, 또는 eSE와 같은 카드일 수 있다. 예를 들면, GSMA의 SGP.21/22에서 MEP 지원을 위해 정의하는 논리 인터페이스는 eSIM Port로 eSIM Port는 LSI이지만, ETSI에서 정의하는 LSI는 eSIM Port를 포함하는 더 큰 개념 임에 유의해야 한다. 따라서, 4040단계에서 전송되는 Manage LSI(Instruction = Configure LSI, DATA = LSI에 대한 단말의 Configuration 정 보)의 DATA에는 GSMA의 SGP.21/22에서 정의한 MEP를 정보가 포함되어 전송될 수 있다. 또한, 4040 단계에서 전 송되는 DATA 필드로 앞서 도 3에서 제시한 ISD-R 접근 방식 중에 어떤 방식을 단말이 지원하는지에 대한 정보를 함께 포함하여 전송할 수도 있다. 예를 들어 상기 DATA 필드는 하기의 표 1과 같은 형태일 수 있다. 한편, 단말 -카드 간 활성화된 프로파일을 위해 오픈 가능한 포트의 개수는 ISD-R 선택 방식에 따라서 달라질 수 있다. 예 를 들어 단말이 MEP-A1과 MEP-B를 지원한다고 전송하고, LSI는 3이라고 전송하는 경우, MEP-A1로 동작하 게 되면, 하기의 표 1에 기반하면 단말이 단말-카드 간 활성화된 프로파일을 위해 최대 열수 있는 포트의 개수 는 4개 (ISD-R용 포트를 포함하여), MEP-B를 위해 최대 열 수 있는 포트이 개수는 3개가 될 수 있다. 표 1 Byte(s) Description Value Length 1 Tag for MEP mode(s) of the Device '90' 1 2 Length of next field N 1 3 to N+2MEP mode(s) supported by the Device in the order of priority '01': MEP-A1 '02': MEP-A2 '03': MEP-B '04': MEP-B'- N = 1 to 4 N+3 Tag for maximum number of LSIs for Enabled Profiles of the Device'91' 1 N+4 Length of next field 1 1 N+5 Maximum number of LSIs supported for Enabled Profiles 1 한편, 이에 대한 응답으로 eUICC는 Manage LSI(Configure LSI)의 Response Data Field 중 앞서 4040 단 계에서 수신한 메시지에 대한 응답으로 공통으로 지원 가능한 LSI 개수를 포함하여 단말로 회신(4050 단 계)해 줄 수 있다. 그리고 공통으로 지원 가능한 ISD-R 선택 방식을 표기하여 함께 회신해 줄 수도 있다. 하기 의 표 2는 일 예시에 따라, 상기 eUICC가 상기 단말로 회신하는 응답 메시지에 포함된 정보이다. 표 2 Byte(s) Description Value Length 1 Tag for MEP modes '90' 1 2 Length of next field 1+M 1 3 Jointly supported MEP mode, coding see table above Set to '00' in case of no jointly supported MEP mode.- 1 4 to M+3All MEP modes supported by the UICC (including the mode given in byte 3 in arbitrary order, coding see table above- M M+4 Tag for jointly supported maximum number of LSIs for Enabled Profiles'91' 1 M+5 Length of next field 1 1 M+6 Maximum number of LSIs jointly supported for Enabled Profiles- 1 해당 응답 메시지를 수신하는 단말은 단말-카드 간 활성화된 프로파일을 위해 오픈 가능한 포트의 개수를 확인할 수 있고 또한 공통으로 지원 가능한 MEP 모드를 확인할 수 있다. 만약 공통으로 지원 가능한 모드가 없 다고 수신되면 단말은 SEP 모드로 동작으로 처리하여 이후 MEP 모드 초기화를 위한 추가 동작을 진행하지 않고 종료할 수도 있다. (4060 단계). 그리고, 이후 시점에 단말은 오픈할 포트의 번호를 지정하여 포트 오픈 을 수행하는 Command를 eUICC에 전송할 수 있다. 오픈할 포트는 0,1,2 와 같이 순차적인 번호로 지정해 줄 수도 있고 또는 단말이 임의로 지정해서 포트 오픈에 대한 Command의 포함하 eUICC에 제공해 주 는 것도 가능할 수 있다. eUICC은 4040 단계의 메시지를 수신하여 단말에서 선호하는 ISD-R 접근 방식을 확인하고 공통으로 지원 가능한 ISD-R 접근 방식(예를 들면, 지원할 MEP 모드)이 있는지 확인할 수 있다. 그리고 eUICC는 단말에서 선호하는 순으로 공통으로 지원 가능한 접근 방식으로 지원 방식을 결정 하고 해당 모드로 설정을 처리해 줄 수 있다. 예를 들어, MEP-A1으로 설정되는 경우, eUICC는 포트 번호 가 포함되어 프로파일 활성화 메시지가 수신되는 것으로 인지하도록 처리, ISD-R을 0번 포트를 통해서만 접근 가능하도록 설정 등 MEP-A1 지원을 위한 설정을 해 줄 수 있다 (4070단계). 또는 4070 단계에서 eUICC가 단말과 공통으로 지원 가능한 ISD-R 접근 방식이 없다고 판단하는 경우, eUICC는 4070 단계에서 공통으로 지원하는 방식이 없음을 알리고 MEP가 아닌 SEP 지원 모드로 동작하도록 설정할 수도 있다. 상기의 동작은, 4040 단계를 수신한 이후 Response를 보내기 이전에 수행될 수도 있다. 한편, 단말의 모뎀(미도시)는 오 픈 가능한 포트 개수 및 번호를 판단한 다음에 바로 포트를 오픈하기로 결정하여 포트 오픈에 대한 명령을 전송 할 수도 있고 또는 추가적으로 ISD-R 선택(4080단계)을 통해서 eUICC으로부터 정보를 회신(4090단계) 받 은 다음에 처리할 수도 있다. 단말 모뎀(미도시)은 초기화 과정 중에 eUICC에 대한 추가 정보를 받아 오기 위해 Select ISD-R에 대한 APDU Command를 전송하여 ISD-R을 선택(4080 단계)할 수 있다. 단말에서 ISD-R을 선택하면, ISD- R은 이에 대한 회신 값으로 ISDR ProprietaryApplicationTemplate으로 eUICC 정보를 단말에 제공 (4090 단계)해 줄 수 있다. 해당 선택한 결과로, eUICC은 (4090단계)에서 회신하는 정보로 활성화된 프로파일의 개수 그리고 또는 활 성화된 프로파일에 할당된 포트의 번호를 포함하여 전송해 줄 수도 있다. 아래의 예시에 한정되지 않으나 표기 되는 방식의 일 예로 하기의 표 3과 같은 형태를 포함할 수도 있다. (활성화된 프로파일의 개수와 포트 번호를 함께 제공해 주는 경우의 일 예)표 3 ISDRProprietaryApplicationTemplate ::= [PRIVATE 0] SEQUENCE { -- Tag 'E0' lowestSvn [2] VersionType, euiccConfiguration BIT STRING { lpaeUsingCatSupported, -- LPA in the eUICC using Card Application Toolkit lpaeUsingScwsSupported, -- LPA in the eUICC using Smartcard Web Server enabledProfile, -- eUICC contains an Enabled Profile lpaeUsingE4ESupported, -- LPA in the eUICC using 'E4' ENVELOPEs isdrIsMepSelectable -- #SupportedForMEPv3.0.0# the ISD-R can be selected on any open eSIM Port } OPTIONAL,-- #MandatoryFromV3.0.0# listEnabledProfiles SEQUENCE (SIZE(1..16)) OF INTEGER (0..15) OPTIONAL -- #SupportedForMEPV3.0.0# the eSIM Port associated with an Enabled Profile is listed in ascending order } 또는, 표기되는 방식의 일 예로 하기의 표 4와 같은 형태를 포함할 수도 있다. (활성화된 프로파일의 개수만 제 공해 주는 경우의 일 예) 표 4 ISDRProprietaryApplicationTemplate ::= [PRIVATE 0] SEQUENCE { -- Tag 'E0' lowestSvn [2] VersionType, euiccConfiguration BIT STRING { lpaeUsingCatSupported, -- LPA in the eUICC using Card Application Toolkit lpaeUsingScwsSupported, -- LPA in the eUICC using Smartcard Web Server enabledProfile, -- eUICC contains an Enabled Profile lpaeUsingE4ESupported, -- LPA in the eUICC using 'E4' ENVELOPEs isdrIsMepSelectable -- #SupportedForMEPv3.0.0# the ISD-R can be selected on any open eSIM Port } OPTIONAL,-- #MandatoryFromV3.0.0# numOfEnabledProfiles INTEGER (0..15) OPTIONAL -- #SupportedForMEPV3.0.0# the number of currently Enabled Profiles} 단말은 활성화 상태인 프로파일들을 위해 오픈이 필요한 개수를 판단(4100단계)할 수 있다. 단말의 설정 및 판단에 따라(4110 단계) 초기화 과정에서 모두 다 열거나 아니면 다 못 여느 경우도 발생할 수 있다. 단말에서 모두 다 여는 경우는 단말의 설정에서 활성화된 프로파일에 대해서는 모두 포트를 제공하는 것으로 결정한 경우 일 수 있다. 모두 다 열지 못하거나 열지 않겠다고 판단하는 경우는, 예를 들어 단말에 서 제공 가능한 베이스밴드의 개수가 2개인 경우로 단말에서 4040 단계의 정보를 참조하여 MEP-B 모드로 동작하기로 하고 4040 단계를 참조하여 공통으로 활성화된 프로파일에 제공 가능한 LSI 개수가 최대 2개이나, 4090 단계에서 회신하는 활성화된 프로파일의 개수가 3개인 경우일 수 있다. 또는, 단말에서 ETSI에서 정 의한 최대 개수로 LSI 개수를 지정하여, 예를 들어 (4040 단계)에서 15개를 지원, 알려 주어 eUICC에서 15개로 회신(4050 단계)하였으나, 활성화된 프로파일의 개수가 16개인 경우일 수도 있다. 단말에서 활성화된 프로파일들을 고려하여 활성화된 프로파일의 개수 또는 해당 개수보다 더 많은 수의 합의된 LSI 개수를 모두 열 수 있는 경우에 있어서 단말은 닫힌 포트에 활성화된 프로파일을 지원하지 않 는 경우에는 적어도 활성화된 프로파일들의 수와 동일한 개수의 포트를 사용할 수 있도록 처리할 수 있다. 이는 일 예로 Manage LSI (Reset) 명령을 eUICC에 전송하거나 (2개를 열어야 하는 경우 2번 수행) 또는 명시적으로 포트를 여는 명령 또는 해당 새로운 포트에서 단말이 해당 포트를 활성화하여 사용함을 나타내는 임의의 APDU Command 중 하나일 수 있다. eUICC가 활성화된 프로파일들에 대해 포트를 모두 할당 받을 수 있도록 처리 하여 초기화 과정을 완료(4120 단계)할 수 있다. 이 경우, 단말은 LPA에서 프로파일 활성화 상태인 경우, 항상 네트워크 접속 가능한 상태로 인지하도록 user experience (UX)를 처리해 줄 수 있다. 한편, 4120 단계로 진입할 수 있도록 하는 일 예로, 단말은 닫힌 포트에서의 활성화된 프로파일을 허용하지 않도록 단말이 eUICC에 활성화된 프로파일 대신 물리 심카드로 변경하여 사용하고자 하는 경우 GSMA SGP.22 의 거하여 MEP에서 오픈 포트에 활성화된 프로파일의 상태를 먼저 비활성화 처리하는 동작을 수행하고 난 후에, 물 리 심카드로 변경을 처리하는 동작으로 수행하는 것으로 설정되어 있을 수 있다. 또는 그렇게 설정하지 않더라 도 단말과 eUICC간 초기화 절차를 수행할 때(재부팅을 포함) 4030 단계를 처리한 이후의 특정 시점 에 이전 카드 세션에 사용했던 LSI 개수와 동일한 개수로 LSI 개수를 항상 유지하여 오픈하도록 설정되어 있을 수 있다, 이 경우 단말은 도 4에서 4100과 4110의 판단에 따라 (4120 단계)로 진입할 수 있으므로 활성화 된 프로파일들에 모두 포트를 오픈하여 닫힌 포트에 활성화된 프로파일이 없도록 처리할 수 있다. 이는 후술할 도 5의 5120 단계로 진입하기 위한 방법으로 도 5의 단말과 eUICC간 동일하게 적용할 수 있다. 한편, 활성화된 프로파일을 위한 포트들을 모두 제공하지 못하거나 또는 제공할 수 있더라도 활성화된 프로파일 들 모두를 위해 포트를 제공하고 싶지 않은 경우(4110 단계)에 있어서 단말은 단말에서 결정한 수만큼 포 트를 오픈할 수 있다. 이 경우 닫힌 포트에 프로파일 활성화 상태가 존재할 수 있다. 이 경우, 단말 은 닫힌 포트에 활성화된 프로파일은 처리를 판단하는 방법으로 4140 단계와 같이 활성화된 프로파일을 비활성화로 상태 변경 처리를 요구하는지를 확인할 수도 있다. 4140 단계는 다음과 같은 다시 나누어 처리될 수 도 있다. 만약 닫힌 포트에 있는 프로파일의 활성화 상태를 단말이 허용하지 않도록 설정된 경우, 단말은 단말의 LPA에서 프로파일 비활성화 처리가 필요하다는 화면을 나타내어, 사용자로 하여금 프로파일의 비 활성화로 진입하도록 제공하고, 비활성화를 반드시 처리해야 함을 공지하여 사용자가 프로파일 비활성화 동작을 강제화 할 수도 있다. 만약 닫힌 포트에 있는 프로파일의 활성화 상태를 단말이 허용하도록 설정된 경우 에, 단말은 추가적으로 사용자에게 해당 닫힌 포트에서 활성화된 프로파일의 비활성화 처리를 요청하는 화면을 나타내어 사용자가 프로파일 비활성화 처리하는 것으로 진입하도록 유도할 수도 있다. 4140단계에서 사용자가 상기 닫힌 포트에 활성화된 프로파일 비활성화를 선택하는 경우에 단말은 MEP-A로 동작하는 경우에 오픈된 ISD-R 전용 포트, MEP-B로 동작하는 경우에, 오픈된 포트 중 하나를 통해서 해당 프로 파일의 비활성화를 처리 명령을 전송할 수 있다. 4140 단계에서 만약, 사용자가 상기 프로파일 비활성화를 선택 하지 않는 경우에는 단말의 LPA에서는 4150 단계와 같이 닫힌 포트의 프로파일을 그대로 유지하고 단말 Framework로부터 수신된 Baseband에 연결 상태와 eUICC으로부터 획득한 프로파일의 상태 정보를 조합하여 활성화 상태이나 네트워크 미 접속 상태를 사용자가 인지할 수 있도록 구성하여 사용자 화면에 표시하거나 나타 내 줄 수 있다. 다음으로 4140 단계에서 단말과 eUICC가 프로파일 비활성화를 처리하는 동작을 상세 기술하도록 한 다. 단말과 eUICC가 프로파일 비활성화를 처리하는 동작은 4140 단계에서 단말과 eUICC가 초기화를 수행하는 과정 중에 처리될 수도 있고, 또는 옵션 2 (4150 단계)로 바로 진입하여 단말 과 eUICC이 초기화 과정을 완료하는 경우에 있어서, 초기화 과정 후 특정 시점에 사용자가 LPA의 프로파일 관리를 위한 메뉴를 진입하여 프로파일 비활성화를 처리하고자 하는 경우에 단말과 eUICC(410 0)간 수행할 수도 있다. 단말에서 단말의 모뎀이 획득한 정보를 단말 Framework를 통해 LPA에 전달함으로써, LPA가 사용자 에게 해당 프로파일의 비활성화 처리가 필요함을 알리는 메시지를 추가적으로 생성하여, 사용자 또는 사용자의 동의에 의거하여 단말 설정에 따라서 해당 프로파일의 비활성화 처리를 위한 ES10c.DisableProfile (닫힌 포트 에 활성화된 프로파일의 ID)를 eUICC에 전송할 수 있다. 이를 수신한 eUICC가 해당 정보를 가지고 상기 프로파일의 상태 정보를 disabled 상태로 변경하여 LPA에 비활성화로 처리를 완료하였음을 회신하도록 처 리하는 단계를 설명한다. 만약에 ES10c.DisableProfile (닫힌 포트에 활성화된 프로파일의 ID, RefreshFlag)로 RefreshFlag에 대한 식별자가 추가되어 전송된 경우에 있어서, eUICC 은 해당 프로파일이 닫힌 포트에 있 는 경우에 모뎀에 REFRESH Proactive Command를 전송할 수가 없다. 프로파일이 열린 포트에 있는 경우에, eUICC 는 모뎀에 프로파일 상태 변경을 위한 REFRESH Proactive Command를 전송해야 하며, 만약 이를 처리하지 못하는 경우에 Error를 LPA에 회신해야 하나, eUICC 가 프로파일이 닫힌 포트에 있다고 판단하는 경우에 있어서 eUICC 는 RefreshFlag를 수신하였으나 처리하지 못하는 경우에 있어서, 에러를 LPA에 리턴하지 않 고, 정상응답으로 LPA에 처리했음을 회신하여 처리를 완료할 수 있다. 상기 ES10c.DisableProfile (닫힌 포트에 활성화된 프로파일의 ID)를 eUICC에 전송할 때, 단말의 LPA는 단말과 eUICC가 초기화 과정에서 동 작하기로 합의한 모드(4040 단계와 4050 단계에서 결정, 또는 4040 또는 4050 단계를 사용하지 않는 경우에 pre-agreed된 모드로 결정될 수도 있음)가 MEP-B 모드인 경우에 있어서 단말은 활성화 또는 비활성화 처 리를 할 포트로 명령을 전송할 수 있다. 그러나 LPA는 단말 Framework를 통해서 앞서 획득한 정보를 통해서 해 당 포트가 닫힌 포트임을 감지하고 추가적으로 단말에서 포트를 오픈할 수 없음을 알 수 있다. 따라서LPA는 포트 오픈에 대한 요청 Command를 모뎀에 전송하지 않고, LPA는 해당 시점에서 오픈된 포트 중에 하나를 골라서 eUICC명령을 전송할 수 있다. 이를 수신 받은 MEP-B로 동작하는 eUICC는 수신 받은 포트에 활성화된 프로파일에 대한 명령이 아니므로, 에러를 리턴할 수 있으나, 다른 포트(닫힌)에 있는 프로파일에 대한 명령 임을 감지하여 에러를 리턴하지 않고 처리할 수 있다. 또한 이 경우에 특히 명령을 수신한 포트 정보에 의거하여 프로파일에 대한 명령을 처리하지 않고, ES10c.DisableProfile (닫힌 포트에 활성화된 프로파일의 ID)에 포함된 프로파일의 ID에 의거하여 해당 비활성화 명령을 처리해야 함에 유의해야 한다. eUICC는 수신 받은 포트에 활성화된 프로파일에 대한 명 령을 처리하지 않는 것으로 설정된 경우에, eUICC는 LPA를 통해 수신한 해당 비활성화 명령 응답으로 LPA에 에 러를 리턴하고 종료할 수 있다. 앞서 eUICC로부터 정보를 수신한 단말의 모뎀(미도시)은 eUICC로부터 획득한 정보들을 단말 의 Framework(미도시)로 전달해 주어 단말의 애플리케이션 또는 시스템에서 활용할 수 있도록 제공해 준 다. 단말의 모뎀(미도시)은 eUICC로부터 정보를 획득하는 시점 이후의 특정 시점에 획득한 정보 들 을 순차적으로 또는 통합하여 단말의 애플리케이션 또는 시스템에서 활용할 수 있도록 제공해 주어 초기화 과정 을 완료할 수 있다. 한편, 본 도면에서 표기하지 않았으나 단말과 eUICC은 pre-agreed된 설정을 사 용할 수도 있다. 이 경우에 4040 단계와 4050 단계의 negotiation 절차를 스킵하는 것이 가능할 수도 있다. 또 는/그리고 4090 단계에서 활성화된 프로파일의 정보가 포함되지 않고 수신되는 것도 가능할 수 있다. 이 경우에, 단말은 미리 설정된 지원할 MEP 모드, 활성화된 프로파일을 위해 오픈 가능한 포트의 개수 및 번 호를 사용하여 4060 단계를 진행할 있다. eUICC은 사전 설정된 정보를 가지고 ISD-R 접근 방식으로 결정 및 설정(eUICC 역시 활성화된 프로파일을 위해 오픈 가능한 포트의 개수 및 번호가 사전에 설정됨)을 가 지고 4070 단계를 진행할 수 있다. 또한, 추가적으로 닫힌 포트에 활성화된 프로파일을 지원하는 않는 것으로 단말과 eUICC가 설정된 경우에, 단말은 eUICC에 활성화된 프로파일 대신 물리 심카드 로 변경하여 사용하고자 하는 경우 GSMA SGP.22 의거하여 MEP에서 오픈 포트에 활성화된 프로파일의 상태를 먼 저 비활성화 처리하는 동작을 수행하고 난 후에, 물리 심카드로 변경을 처리하는 동작으로 수행하는 것으로 설 정하여 처리해 주도록 할 수 있다. 또는 그렇게 설정하지 않더라도 단말과 eUICC간 초기화 절차를 수행할 때(재부팅을 포함) 4030 단계를 처리한 이후의 특정 시점에 이전 카드 세션에 사용했던 LSI 개수와 동일 한 개수로 LSI 개수를 항상 유지하여 오픈하도록 설정함으로써, (4120 단계)에서와 같이 활성화된 프로파일들에 모두 포트를 오픈하여 닫힌 포트에 활성화된 프로파일이 없도록 처리하거나 또는 그렇게 하지 않을 수도(4130 단계) 있다. 단말과 eUICC 상호 사용할 포트의 개수 및 번호가 사전 설정되어 있으면 단말과 eUICC은 4030 단계를 수행한 이후에 사전 협의된 포트를 모두 오픈, 예를 들면 사용 가능한 상태로 두어 개별로 포트를 오픈하는 절차를 수행하지 않는 것도 가능할 수 있다. 일 실시 예에 따르면, 해당 포트에서 APDU 송수신이 가능한 상태로 사용할 포트 별로 Manage LSI (reset) APDU를 전송하여 이에 대한 회신으로 해당 포트 에서 ATR을 수신하는 동작을 수행하지 않고, 해당 상태로 단말과 eUICC가 진입하여 준비하는 것을 의미할 수 있다. Pre-agree 방식을 적용에 대한 설명은 도 4에서 기술하였으나, 이는 도 5 내지 도 7, 도8에도 모두 동일하게 적용될 수 있다. 도 5는 본 개시의 다른 실시 예에 따른, 단말-카드 간 초기화 과정에서 eUICC로부터 수집한 지원 가능한 포트의 개수 및 활성화된 프로파일에 대한 정보를 참조하여 단말에서 활성화된 프로파일을 위해 사용할 포트의 개수와 닫힌 포트에 활성화된 프로파일에 대한 처리 방법을 결정하는 단계를 설명하는 위한 도면이다. 앞서 도 4에서 이미 설명한 경우 도 5에서 관련 설명을 생략할 수 있으며, 동 5에서 추가 설명이 되지 않은 부 분은 도 4에 언급된 설명을 참조하여 수행될 수도 있음에 유의해야 한다. 앞서 도 4에서 상세 설명한 바와 같이 단말-카드 간에 initialization 절차를 수행하면서 Manage LSI(Instruction = Configure LSI, DATA = LSI에 대한 단말의 Configuration 정보)의 DATA에는 GSMA의 SGP.21/22에서 정의한 MEP를 정보가 포함되어 전송될 수 있다. 도 5의 5020 단계 내지 5040 단계는 앞서 도 4의 도 4020 단계 내지 4040 단계로 동일하게 설명될 수 있어 설명을 생략하기로 한다. 5040 단계에서 전송되는 DATA 필드로 앞서 도 3에서 제시한 ISD-R 접근 방식 중에 어떤 방식을 단말이 지원하는 지에 대한 정보를 함께 포함하여 전송할 수도 있다. 일 실시 예에 따르면, 상기 DATA 필드는 하기의 표 5와 같 은 형태일 수 있다. 한편, 단말-카드 간 활성화된 프로파일을 위해 오픈 가능한 포트의 개수는 ISD-R 선택 방식 에 따라서 달라질 수 있다. 예를 들어 단말이 하기의 표 5의 예시에서 MEP-A1과 MEP-B를 지원한다고 전송하고, 활성화된 프로파일을 위해 오픈 가능한 LSI는 3이라고 전송하는 경우, MEP-A1로 동작하게 되면 단말이 최 대 열수 있는 포트의 개수는 4개 (ISD-R용 포트를 포함하여), MEP-B를 위해 최대 열 수 있는 포트이 개수는 3개 가 될 수 있다. 표 5 Byte(s) Description Value Length 1 Tag for MEP mode(s) of the Device '90' 1 2 Length of next field N 1 3 to N+2MEP mode(s) supported by the Device in the order of priority '01': MEP-A1 '02': MEP-A2 '03': MEP-B '04': MEP-B'- N = 1 to 4 N+3 Tag for maximum number of LSIs for Enabled Profiles of the Device'91' 1 N+4 Length of next field 1 1 N+5 Maximum number of LSIs supported for Enabled Profiles- 1 한편, eUICC는 Manage LSI(Configure LSI)의 Response Data Field 중 앞서 5040 단계에서 수신한 메시지 에 대한 응답으로 공통으로 지원 가능한 LSI 개수를 포함하여 단말로 회신해 줄 수 있다. 그리고 eUICC는 공통으로 지원 가능한 ISD-R 선택 방식을 표기하여 함께 단말로 회신해 줄 수도 있다. 그 리고, 추가적으로 현재 활성화된 프로파일이 있는 경우 eUICC는 활성화된 프로파일의 개수 또는/그리고 활성화된 프로파일이 가지고 있는 포트의 번호(들)의 리스트를 포함하여 함께 회신해 줄 수도 있다. 일 실시 예 에 따르면, 상기 eUICC의 응답 메시지는 하기의 표 6과 같은 형태를 포함할 수도 있다. 표 6 Byte(s) Description Value Length 1 Tag for MEP modes '90' 1 2 Length of next field 1+M 1 3 Jointly supported MEP mode, coding see table above Set to '00' in case of no jointly supported MEP mode.- 1 4 to M+3All MEP modes supported by the UICC (including the mode given in byte 3 in arbitrary order, coding see table above- M M+4 Tag for jointly supported maximum number of LSIs for Enabled Profiles'91' 1 M+5 Length of next field 2+X 1 M+6 Maximum number of LSIs jointly supported for Enabled Profiles- 1 M+7 Number of currently Enabled Profiles - 1 M+8 to M+XPort number in ascending order associated to the Enabled Profiles indicated in the M+7X=the Value of M+7 해당 응답 메시지를 수신하는 단말은 단말-카드 간 활성화된 프로파일을 위해 오픈 가능한 포트의 개수를 확인할 수 있고 앞서 도 4에서 설명한 바와 같이 공통으로 지원 가능한 MEP 모드를 확인할 수 있다. 만약 공통 으로 지원 가능한 모드가 없으면 SEP 모드로 동작으로 처리하여 이후 동작을 진행하지 않고 종료할 수도 있다. (단계 5060) 한편, eUICC은 5040 단계의 메시지를 수신하여 단말에서 선호하는 ISD-R 접근 방식을 확인하 고 공통으로 지원 가능한 ISD-R 접근 방식(예를 들면, 지원할 MEP 모드)이 있는지 확인할 수 있다. 그리고 eUICC 는 단말에서 선호하는 순으로 공통으로 지원 가능한 접근 방식으로 지원 방식을 결정하고 해당 모 드로 설정을 처리해 줄 수 있다. 예를 들어, MEP-A1으로 설정되는 경우, eUICC은 포트 번호가 포함되어프로파일 활성화 메시지가 수신되는 것으로 인지하도록 처리, ISD-R을 0번 포트를 통해서만 접근 가능하도록 설 정 등 MEP-A1 지원을 위한 설정을 해 줄 수 있다 (5070단계). 이는, 5040 단계를 수신한 이후 Response를 보내 기 이전에 수행될 수도 있다. 그리고, 이후 시점에 단말은 오픈할 포트의 번호를 지정하여 포트 오픈을 수행하는 Command를 eUICC에 전송할 수 있다. 도 1에서 전술한 바와 같이 포트 오픈을 수행하는 Command 라 함은 오픈된 포트에서 APDU를 송수신이 가능한 상태로 변경함으로 포함한다. 이는 본 발명에서 동일하게 적 용될 수 있다. 오픈할 포트는 0,1,2 와 같이 순차적인 번호로 지정될 수도 있고 또는 단말이 임의로 지정 해서 포트 오픈에 대한 Command의 포함해 eUICC에 제공해 주는 것도 가능할 수 있다. 한편, 단말의 모뎀(미도시)는 오픈할 포트 개수 및 번호를 결정한 다음에 바로 포트를 오픈하는 것으로 처리할 수도 있다. 한편, 앞서 도 4에서 상세 기술하지 않았으나 도 4 내지 도 5에서 eUICC가 활성화된 프로파일의 포트 번 호를 제공하는 경우, 단말은 포트 번호가 낮은 순서대로 순차적으로 포트를 오픈(예. 0 1 2 3 4) 또는 단 말은 eUICC로 부터 수신한 추가적인 소정의 정보를 참조하여 (예. Enterprise 용도 Profile) 먼저 연결 처리하고, 번호가 낮은 순서대로 순차적으로 오픈 (예. 0 5 1 3 7)할 수 있다. 만약, eUICC가 활성화된 포트 번호를 제공하지 않고 프로파일 개수만 제공하는 경우, 단말은 포트 번호가 낮은 순서대로 순차적으로 포트를 오픈(예. 0 1 2 3 4)하거나 또는 이전 연결에서의 정보가 있는 경우 해당 정보를 참조하여 순차적으로 포트를 오픈 (예. 0 1 2 3 4)할 수도 있다. eUICC는 수신된 포트 번호 에 따라 기존 활성화된 프로파일에 설정된 포트 번호를 재 할당 (예를 들면, 단말에서 0 1 2 3 수신 시 기존 eUICC에 0 3 5 7 9가 있는 경우, 0 1 2 3 로 번호 재 할당하고 포트 미할당 프로파일은 9로 유지)하는 것도 가 능한 방법일 수 있다. 단말은 (5050 단계)를 통해서 수신한 프로파일 활성화 정보를 추가적으로 확인하여 해당 정보가 있는 경 우, Maximum number of LSIs jointly supported for Enabled Profiles 개수가 Number of currently Enabled Profiles 의 수와 같거나 크다고 판단하는 경우(5100 단계), 그리고 초기화 과정에서 활성화 상태인 프로파일에 는 모두 포트를 제공하기로 결정하는 경우(5110 단계) 최소 Number of currently Enabled Profiles 수만큼 활 성화된 프로파일을 위한 포트를 사용할 수 있도록 처리할 수 있다. 이는 일 실시 예에 따라, 단말은 포 트 오픈을 위해서 Manage LSI (Reset) Command를 필요한 수만큼 반복해서 전송, 2개를 열어야 하는 경우 2번 수 행 하거나 또는 명시적으로 포트를 여는 명령 또는 해당 새로운 포트에서 단말이 해당 포트를 활성화하여 사용 함을 나타내는 임의의 APDU Command 중 하나일 수 있다. eUICC가 활성화된 프로파일들에 대해 포트를 모두 할당 받을 수 있도록 처리하여 초기화 과정을 완료(5120단계)할 수 있다. 이 경우, 단말은 LPA에서 프로파일 활성화 상태인 경우, 항상 네트워크 접속 가능한 상태로 인지하도록 UX를 처리해 줄 수 있다. 한편, 단말은 (5050 단계)를 통해서 수신한 프로파일 활성화 정보를 추가적으로 확인하여 해당 정보가 있 는 경우, 상기 단계 5100의 판단 결과, Maximum number of LSIs jointly supported for Enabled Profiles 개수 가 Number of currently Enabled Profiles 의 수보다 작다고 판단하는 경우, 단말에서 결정한 수만큼(예 를 들어 number of LSIs jointly supported for Enabled Profiles까지 또는 그 보다 작은 수만큼) 포트를 오픈 하고 닫힌 포트에서 프로파일 활성화 상태를 유지하도록 결정할 수 있다. (단계 5130) 예를 들면, 단말이 추가적으로 포트를 열지 못하거나 또는 단말의 상태에 따라 열지 않겠다고 판단할 수도 있다. 예를 들어 단말 에서 제공 가능한 베이스밴드의 개수가 2개인 경우로 eUICC에서 수신된 5050 단계를 참조하여 단말 이 MEP-B 모드로 동작하기로 하고 5050 단계를 참조하여 활성화된 프로파일에 제공 가능한 LSI 개수가 최 대 2개이나, 5050 단계에서 회신하는 활성화된 프로파일의 개수가 3개인 경우일 수 있다. 또는, 단말에서 ETSI에서 정의한 최대 개수로 LSI 개수를 지정하여, 예를 들어 전술한 5040 단계에서 단말이 15개를 지원 하는 것으로 eUICC 에 알려주고, 전술한 5050단계에서 eUICC에서 15개로 회신(5050 단계)하였으나, 활성화된 프로파일의 개수가 16개인 경우일 수도 있다. 해당 경우에 단말에서 결정한 수만큼 포트를 오픈하는 명령을 전송하는 경우에 활성화 상태인 프로파일 중에 닫힌 포트에 활성화 상태로 남아 있는 프로파일이 존재할 수 있다. (5130 단계) 한편, 활성화된 프로파일을 위한 포트들을 모두 제공하지 못하거나 제공할 수 있더라도 활성화된 프로파일들 모 두를 위해 포트를 제공하고 싶지 않은 경우에 있어서 단말은 닫힌 포트에 활성화된 프로파일은 처리를 판 단하는 방법으로 5140 단계와 같이 활성화된 프로파일을 비활성화로 상태 변경 처리를 요구하는지를 확인할 수 도 있다. 5140 단계에서 만약 닫힌 포트에 있는 프로파일의 활성화 상태를 단말이 허용하지 않도록 설정된 경우, 단말은 단말의 LPA에서 프로파일 비활성화 처리가 필요하다는 화면을 제공하여, 사용자로 하여금 프로파일의 비활성화로 진입하도록 하고, 비활성화를 처리해야 함을 공지하여 사용자가 프로파일 비활성화 동작을 강 제화 할 수도 있다. 만약 닫힌 포트에 있는 프로파일의 활성화 상태를 단말이 허용하도록 설정된 경우에, 단말 은 추가적으로 사용자에게 해당 닫힌 포트에서 활성화된 프로파일의 비활성화 처리를 요청하는 화면을 띄 워서 사용자가 프로파일 비활성화 처리하는 것으로 진입하도록 유도할 수도 있다. 5140단계에서 사용자가 상기 닫힌 포트에 활성화된 프로파일 비활성화를 선택하는 경우 단말은 MEP-A로 동작하는 경우에 오픈된 ISD-R 전용 포트, MEP-B로 동작하는 경우에, 오픈된 포트 중 하나를 통해서 해당 프로 파일의 비활성화를 처리 명령을 전송할 수 있다. 5120 단계에서 만약, 사용자가 상기 프로파일 비활성화를 선택 하지 않는 경우에는 단말의 LPA 또는 LPA가 통합된 SIM관리 앱에서는 5150 단계와 같이 단말 Framework로 부터 수신된 Baseband에 연결 상태와 eUICC으로부터 획득한 프로파일의 상태 정보를 조합하여 활성화 상 태이나 네트워크 미 접속 상태를 사용자가 인지할 수 있도록 구성하여 사용자 화면에 나타낼 수 있다. 5140 단 계에서 단말과 eUICC가 프로파일 비활성화를 처리하는 동작을 앞서 도 4에서 상세 기술한 바에 의 거하여 처리하므로 이에 대한 상세 설명은 도 5에서 생략하기로 한다. 앞서 도 4에서 기술한 바와 같이 옵션 1: 닫힌 포트에 있는 프로파일의 비활성화를 요청하는 처리(5140 단계)는 단말-eUICC간 초기화 과정 중에 발생할 수도 있다. 또는 옵션 2로 진입(5150 단계)하여 상기 단말 -eUICC간 프로파일 비 활성화를 처리하는 단계를 포함하지 않고 닫히 포트에 활성화된 프로파일을 그대로 유지하는 상태로 초기화를 완료한 이후, 특정 시점에 사용자가 단말의 LPA에 닫힌 포트에 있는 상 기 프로파일의 비활성화를 요청하는 Input을 제공하여 LPA가 eUICC에 상기 프로파일의 비활성화를 요청함 으로써 처리될 수도 있다. 앞서 eUICC로부터 정보를 수신한 단말의 모뎀(미도시)은 eUICC로부터 획득한 정보들을 단말 의 Framework(미도시)로 전달하여 단말의 애플리케이션 또는 시스템에서 활용할 수 있도록 한다. 단말 의 모뎀(미도시)은 eUICC로부터 정보를 획득하는 시점 이후의 특정 시점에 획득한 정보 들을 순차 적으로 또는 통합하여 단말의 애플리케이션 또는 시스템에서 활용할 수 있도록 제공하여 초기화 과정을 완료할 수 있다. 앞서 도 4에서 기술한 바와 동일하게 본 도면에서 표기하지 않았으나 단말과 eUICC은 pre-agreed된 설정을 사용할 수도 있다. 이 경우에 5040 단계와 5050 단계의 negotiation 절차를 스킵하는 것이 가능할 수도 있다. 이 경우에, 단말은 설정된 지원할 MEP 모드, 활성화된 프로파일을 위해 오픈 가능한 포트의 개수 및 번호를 사용하여 5060 단계를 진행할 있으며, eUICC은 사전 설정된 정보를 가지고 ISD-R 접근 방식으 로 결정 및 설정(eUICC 역시 활성화된 프로파일을 위해 오픈 가능한 포트의 개수 및 번호가 사전에 설정 됨)을 가지고 5070 단계를 진행할 수 있다. 또한, 추가적으로 닫힌 포트에 활성화된 프로파일을 지원하는 않는 것으로 단말과 eUICC가 설정된 경우에, 단말은 eUICC에 활성화된 프로파일 대신 물리 심카드로 변경하여 사용하고자 하는 경우 GSMA SGP.22 의거하여 MEP에서 오픈 포트에 활성화된 프로파일의 상태 를 먼저 비활성화 처리하는 동작을 수행하고 난 후에, 물리 심카드로 변경을 처리하는 동작으로 수행하는 것으 로 설정하여 처리해 주도록 할 수 있다. 또는 그렇게 설정하지 않더라도 단말과 eUICC간 초기화 절 차를 수행할 때(재부팅을 포함) 5030 단계를 처리한 이후의 특정 시점에 이전 카드 세션에 사용했던 LSI 개수와 동일한 개수로 LSI 개수를 항상 유지하여 오픈하도록 설정함으로써, (5120 단계)에서와 같이 활성화된 프로파일 들에 모두 포트를 오픈하여 닫힌 포트에 활성화된 프로파일이 없도록 처리하거나 또는 그렇게 처리하지 않을 수 도(5130단계) 있다. 한편, 본 도면에서 표기하지 않았으나 단말과 eUICC은 pre-agreed된 설정을 사용할 수도 있으며, 이 경우에 5040 단계와 5050 단계의 negotiation 절차를 스킵하는 것이 가능할 수도 있다. 이 경우에, 단말 은 설정된 지원할 MEP 모드, 활성화된 프로파일을 위해 오픈 가능한 포트의 개수 및 번호를 사용하여 5060 단계를 진행할 있다. eUICC은 사전 설정된 ISD-R 접근 방식으로 결정 및 설정을 가지고 5070 단계를 진행할 수 있다. 또한, 추가적으로 닫힌 포트에 활성화된 프로파일을 지원하는 것으로 단말과 카드(510 0)가 설정된 경우에, 단말은 eUICC에 활성화된 프로파일 대신 물리 심카드로 변경하여 사용하고자 하는 경우 GSMA SGP.22 의거하여 MEP에서 오픈 포트에 활성화된 프로파일의 상태를 먼저 비활성화 처리하는 동 작을 수행하지 않고 , 물리 심카드로 변경을 처리하는 동작으로 수행하는 것으로 설정하여 처리해 주도록 하거 나 또는 그렇게 설정하지 않더라도 단말과 eUICC간 초기화 절차를 수행할 때(재부팅을 포함) 5030 단계를 처리한 이후의 특정 시점에 이전 카드 세션에 사용했던 LSI 개수와 다른 (더 적은)개수로 LSI 개수를 변 경하여 오픈하고, 단말의 추가 설정에 따라 5140 내지 5150의 동작으로 진입하는 처리할 수도있다. 도 6은 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 단말의 내부 구조를 개략적으로 도시한 도면이다. 도 6을 참고하면, 단말은 송수신부, 메시지 처리부, 제어부, 메모리 및 화면 표시부 를 포함할 수 있다. 다만 단말의 구성 요소가 전술한 예에 한정되는 것은 아니다. 예를 들어, 기지 국은 전술한 구성 요소보다 더 많은 구성 요소를 포함하거나 더 적은 구성 요소를 포함할 수 있다. 뿐만 아니라, 단말의 적어도 하나의 구성이 하나의 칩 형태로 구현될 수 있다. 일부 실시 예에 따르면, 송수신 부는 신호의 대역 변환, 증폭 등 무선 채널을 통해 신호를 송수신하기 위한 기능을 수행할 수 있다. 예를 들면, 송수신부는 기저대역 신호를 RF 대역 신호로 상향 변환한 후 안테나를 통해 송신하고, 안테나를 통 해 수신되는 RF 대역 신호를 기저대역 신호로 하향 변환하는 RF 처리부를 포함하며, 송신 필터, 수신 필터, 증 폭기, 믹서(mixer), 오실레이터(oscillator), DAC(digital to analog convertor), ADC(analog to digital convertor) 등을 더 포함할 수 있다. 또한, 송수신부는 무선 채널을 통해 신호를 수신하여 프로세서로 출력하고, 제어부로부터 출력 된 신호를 무선 채널을 통해 전송할 수 있다. 송수신부는 빔포밍(beamforming)을 수행할 수 있다. 빔포밍 을 위해, 송수신부는 복수의 안테나들 또는 안테나 요소(element)들을 통해 송수신되는 신호들 각각의 위 상 및 크기를 조절할 수 있다. 또한 송수신부 내의 기저대역 처리부는 시스템의 물리 계층 규격에 따라 기 저대역 신호 및 비트열 간 변환 기능을 수행할 수 있다. 예를 들어, 데이터 송신 시, 기저대역 처리부는 송신 비트열을 부호화 및 변조함으로써 복소 심벌들을 생성한다. 또한, 데이터 수신 시, 기저대역 처리부는 RF처리부 로부터 제공되는 기저대역 신호를 복조 및 복호화를 통해 수신 비트열을 복원한다. 예를 들어, OFDM(orthogonal frequency division multiplexing) 방식에 따르는 경우, 데이터 송신 시, 기저대역 처리부는 송신 비트열을 부 호화 및 변조함으로써 복소 심벌들을 생성하고, 복소 심벌들을 부반송파들에 매핑한 후, IFFT(inverse fast Fourier transform) 연산 및 CP(cyclic prefix) 삽입을 통해 OFDM 심벌들을 구성한다. 또한, 데이터 수신 시, 기저대역 처리부는 RF처리부로부터 제공되는 기저대역 신호를 OFDM 심벌 단위로 분할하 고, FFT(fast Fourier transform) 연산을 통해 부반송파들에 매핑된 신호들을 복원한 후, 복조 및 복호화를 통 해 수신 비트열을 복원할 수 있다. 송수신부는 송수신기(transceiver)로 정의될 수 있으며, 메시지 송수신부를 포함할 수 있다. 메시지 처리 부는 송수신부를 통해 송신하거나 혹은 수신한 데이터가 어떠한 메시지인지를 판단하는 동작을 수행 할 수 있다. 예를 들어, 상기 메시지 처리부는 수신한 메시지가 (SIB(System Information Block)를 포함 한) RRC(Radio Resource Control) 계층의 제어 메시지인지 혹은 사용자의 데이터 메시지인지를 판단할 수 있다. 메시지 처리부는 제어부에 포함될 수 있다. 제어부는 단말의 전반적인 동작들을 제어할 수 있다. 예를 들어, 제어부는 메시지 처리부 를 통해 신호를 송수신할 수 있다. 또한, 제어부는 메모리에 데이터를 기록하고 읽는다. 제어부(63 0)는 적어도 하나일 수 있다. 예를 들어, 제어부는 통신을 위한 제어를 수행하는 CP(communication processor) 및 응용 프로그램 등 상위 계층을 제어하는 AP(application processor)를 포함할 수 있다. 일부 실 시 예에 따르면, 메모리에 사전에 저장된 LSI 구성(Configuration) 정보가 있는 경우에 제어부는 해 당 정보를 메모리에 요청하여 화면 표시부가 표시하거나 해당 정보를 받아서 추가적인 동작을 처리할 수 있다. 상기 제어부 및 메시지 처리부, 송수신부는 사용자 또는 단말 설정에 따라 선택한 사업자 망으 로의 접속을 수행하도록 단말을 제어할 수 있다. 또한, 일부 실시예에 따르면, 제어부는 메모리(64 0)를 통해서 읽은 데이터 기록, 또는 제어부 및 메시지 처리부, 송수신부를 통해 수집된 정보를 매칭하여 서비스 선택에 참조할 수 있는 정보를 단말이 추론하는 처리 과정을 수행할 수 있다. 일부 실시 예에 따르면, 제어부는 단말에 저장된 특정 정보에 대한 사용자 동의가 필요한지 여부를 판단하고, 화면 표시부에 표시할 수 있다. 또한, 제어부는 이에 대응하는 동작을 수행하도록 단말을 제어할 수 있다. 일부 실시 예에 따르면, 제어부는 eUICC의 구동 및 제어를 담당하는 LPA, LPA가 통합 구현된 애플리케이션을 포함할 수 있다. 또한, 일부 실시 예에 따르면, 제어부는 LPA로 또는 애플리케이션에 수신된 정보를 해석하여 CP(communication processor)에 특정 Command APDU 요청을 처리하거나 요청된 정보의 일부 또는 전체를 메모리 로부터 수집하여 LPA 또는 애플리케이션에 회신하는 단말 프레임워크를 포함할 수 있다. 제어부는 단말과 송수신부을 통해 eUICC으로부터 획득한 소정의 정보를 종합하여 MEP 모드 로 동작함과 ISD-R 접근 방식을 결정하여 eUICC에 회신해 줄 수 있다. eUICC은 제어부에 의해 제어되며, 본 개시의 실시 예에 따라 eUICC는 각 관리 명령을 수행하고, 모뎀 등으로 Proactive Command를 전달할 수 있다. 상기 도 6 및 전술한 도 1에서 eUICC는 단말에 포함되는 LPA, Framework, 모뎀과 구분하여, 단말과 eUICC간의 동작을 설명하기 위해서 단말 외부에 있는 별도의 모듈로 표기하였으나, eUICC은 단말의 일부로 포함되어 구성될 수 있으며 eUICC내에서도 제어부, 메시지 처리부, 메모 리, 메시지 송수신부를 구성할 수 있음에 유의해야 한다. 메모리는 단말의 동작을 위한 기본 프로그램, 응용 프로그램, 설정 정보 등의 데이터를 저장할 수 있 다. 실시 예에서는 메모리는 롬(ROM), 램(RAM), 하드디스크, CD-ROM 및 DVD 등과 같은 저장 매체 또는 저 장 매체들의 조합으로 구성되며 제어부의 요청에 따라 Configure LSI를 위해 저장한 데이터를 제공할 수 있다. 또한, 메모리은 제어부와 SoC(System on Chip)으로 통합 구현되어 있을 수 있다. 한편, 본 개시의 실시 예에서는 eUICC은 단말 외부에 별도의 모듈로 존재하여 단말에 삽입될 수 있다. eUICC은 또한 내부에 단말의 모듈에서 화면 표시부를 제외한 다른 부분의 일부 또는 전체 를 포함하여 구성될 수 있다. 예를 들어, 본 개시의 일 실시 예에 따라서 eUICC의 제어부는 메시지 송수신 부를 통해서 수신된 단말의 Manage LSI (Configure LSI) 정보를 메시지 처리부를 통해서 처리하여 획득한 후, 해당 메시지 정보를 통해서 단말의 ISD-R 접근 방식 및 MEP 지원, 그리고 지원 방식 및 지원 가능한 포트의 개수 등 소정의 정보를 획득하고 eUICC가 공통으로 지원 가능한 ISD-R 접근 지원 방식 및 MEP 지원 여부, 공통으로 지원 가능한 포트의 개수 및 활성화된 프로파일의 개수를 참조하여 동작을 결정하고 이에 따라 포트별 프로파일의 활성화 권한 또는 포트별로 ISD-R AID(Application ID)로 접근을 허용하는지에 대한 권한, 포트별 프로파일의 접근 권한 등을 설정할 수도 있다. 한편, 단말은 내장된 하드웨어 보안 모듈로 UICC, eUICC, iSSP, iUICC를 포함할 수 있음에 유의해야 한다. 화면표시부는 제어부에서 처리/가공한 정보를 표시하거나 제어부 처리를 통해 단말이 수행 하는 동작에 대한 진행 과정 또는 사용자에게 수행을 요청하는 이벤트에 대한 동의 등을 표시할 수 있다. 일부 실시 예에 따르면, 저장된 프로파일 정보, 닫힌 프로파일에 대한 메시지 표기, 프로파일 비활성화 요청 입력 및 입력된 결과를 사용자에게 회신하여 표시할 수 있다. 일부 실시 예에 따르면, LPA 또는 LPA가 통합 구현된 애플 리케이션은 화면표시부와 제어부를 포함할 수 있다. 도 7은 eUICC가 닫힌 포트에서의 프로파일 활성화를 지원하는 않는 eUICC일 경우에 가능한 추가 실시 예를 나타 내는 도면이다. 도 4 내지 도 5에서 eUICC가 닫힌 포트에서의 프로파일 활성화를 지원하는 않는 eUICC일 수도 있다. 도 5를 들 어 예를 들어 설명하면, 도 5에서 단말은 5130 단계로 진입하지 않고 다시 initialization을 시작하여 5120 단계(활성화된 프로파일들에 모두 포트 오픈) 하는 단계로 진입할 수도 있다. 도 7은 해당 절차를 구체적 으로 표현한 도면이다. 단말과 eUICC은 앞서 도 4내지 도 5에서 설명한 것과 같이 7020 단계와 7030 단계를 수행하여 initialization을 시작할 수 있다. Initialization 시작하고 나서 단말은 앞서 도4 내지 도 5에서 기술 한 바와 같이 manage LSI (Configure LSI)를 전송하여 단말에서 지원하는 MEP 모드 및 활성화된 프로파일을 위해 지원하는 LSI 개수를 eUICC 제공 할수 있다 (7040 단계). MEP 지원 eUICC는 활성 화된 프로파일의 개수 > 7040 단계에서 수신된 공통으로 지원 가능한 LSI 개수가 되는 경우에, Response 에 error 또는 re-intilalization하는 indication을 추가 또는 대신(예. 활성화된 프로파일의 개수 대신) 할 수 있다. 또는 프로파일의 개수 > 7040 단계에서 수신된 공통으로 지원 가능한 LSI 개수와 상관없이 또는 해당 경 우가 발생한 경우에, 닫힌 포트에서 활성화된 프로파일 지원 여부에 대한 indication을 추가하여 회신할 수 있 다(7050 단계). 단말은 7050 단계에서 회신된 메시지를 통해 오픈 가능 개수 < 활성화된 Profiles인지 확인하고 eUICC가 닫힌 포트에 활성화된 프로파일 미지원하는 것을 감지할 수 있다. (7060 단계) 이 경우, 단말이 추가적으 로 포트를 더 열 수 있는 경우에 단말은 Initialization을 다시 시작하여 오픈 가능 개수 > = 활성화된 Profiles되는 숫자로 Manage LSI (Configure LSI)을 전송할 수 있다. 이는 앞서 도 5를 예로 들어 설명하면 5120 단계로 진입하도록 설정하도록 동작(7070 단계)을 처리하여 닫힌 포트에서는 활성화된 프로파일들이 없도 록 처리할 수도 있다. 또는, 단말은 initialization을 다시 시작하지 않고 오픈 가능 개수 > = 활성화된 Profiles 되도록 추가적으로 포트를 오픈하는 Manage LSI (Reset) Command를 전송하여, 이는 앞서 도 5를 예로들어 설명하면, 5120 단계로 진입하도록 설정하도록 동작(7070 단계)을 처리하여 닫힌 포트에서는 활성화된 프 로파일들이 없도록 처리할 수도 있다. 도 8은 eUICC가 닫힌 포트에서의 프로파일 활성화를 지원하는 않는 eUICC일 경우에 가능한 추가 실시 예를 나타 내는 도면이다. 도 4 내지 도 5에서 eUICC가 닫힌 포트에서의 프로파일 활성화를 지원하는 않는 eUICC일 수도 있다. 도 5를 예 를 들어 설명하면, 단말은 eUICC가 닫힌 포트에서 활성화된 프로파일의 지원하지 않는다고 판단하면 항상 활성화된 프로파일의 개수 또는 그 이상의 개수를 eUICC 에 제공할 수 있다. 도 8은 해당 절차를 구체적 으로 표현한 도면이다. 단말과 eUICC은 앞서 도 4 내지 도 5에서 설명한 것과 같이 8020 단계와 8030 단계를 수행하여 초 기화(initialization)을 시작할 수 있다. Initialization 시작하고 나서 단말은 앞서 도4 내지 도 5에서 기술한 바와 같이 manage LSI (Configure LSI)를 전송하여 단말에서 지원하는 MEP 모드 및 활성화 된 프로파일을 위해 지원하는 LSI 개수를 eUICC 제공 할 수 있다 (8040 단계). MEP 지원 eUICC는 활성화된 프로파일의 정보에 추가로 닫힌 포트에 활성화된 프로파일 지원 여부에 대한 indication을 추가(EP on a CP: Enabled Profile on a Closed Port)하여 회신할 수도 있다 (8050 단계). 한편, 도 5에서 표 5에 대한 상기 eUICC의 응답 메시지의 일 예로 표 6과 같은 형태를 포함하는 것을 들 었으며, 여기에 indication이 추가되는 경우 일 예는 다음의 표 7에 개시된 바와 같은 형태를 포함할 수도 있다. 표 7 Byte(s) Description Value Length 1 Tag for MEP modes '90' 1 2 Length of next field 1+M 1 3 Jointly supported MEP mode, coding see table above Set to '00' in case of no jointly supported MEP mode. 1 4 to M+3All MEP modes supported by the UICC (including the mode given in byte 3 in arbitrary order, coding see table above M M+4 Tag for jointly supported maximum number of LSIs for Enabled Profiles'91' 1 M+5 Length of next field 3+X 1 M+6 Maximum number of LSIs jointly supported for Enabled Profiles 1 M+7 Number of currently Enabled Profiles 1 M+8 to M+XPort number in ascending order associated to the Enabled Profiles indicated in the M+7 X=the Value of M+7 M+X+1 Indication of EP on a CP(Enabled Profile on a Closed Port) support 1 단말은 8050 단계에서 회신된 메시지를 통해 오픈 가능 개수 >= 활성화된 Profiles인지 확인하고 eUICC가 닫힌 포트에 활성화된 프로파일 미지원하는 것을 감지할 수 있다. (8060 단계) 이 경우, 단말은 초기화 과정에서 활성화된 Profiles에 모두 포트 제공(도 5의 5110 단계)하도록 판단하여 닫힌 포트에 활성화된 프로파 일이 없도록 처리하도록 (도 5의 5120 단계)로 진입하여 완료하여 초기화 절차를 완료할 수 있다. 한편, 도 7 내지 도 8에서 도 5의 예를 들어 설명하였으나, 도 4에도 동일하게 적용될 수 있으며 이 경우, 도 4의 4090단계에서 ISD-R template의 값으로 닫힌 포트에서 활성화된 프로파일 지원 여부 indication이 또는 error, re-initialization에 대한 indication 포함되어 회신될 수도 있다. 본 발명은 무선 통신 시스템에서 단말에 의해 수행되는 방법에 있어서, 단말에서 지원 가능한 ISD-R 접근 방식, 활성화된 프로파일을 위해 지원하는 포트의 개수를 포함하는 제1 메시지를 생성하는 단계; 상기 보안 모듈로,상기 제1 메시지를 전송하는 단계; 및 상기 보안 모듈로부터, 상기 제1 메시지에 응답하여 제2 메시지를 수신하 는 단계를 포함하는 것을 특징으로 한다. 일부의 예들에서는, 무선 통신 시스템에서 단말에 의해 수행되는 방법에 있어서, 상기 보안 모듈로부터 제 2 메 시지로 단말과 공통으로 지원 가능한 프로파일 관리 명령 접근 방식, 공통으로 지원 가능한 포트의 개수, 그리 고 추가적으로 상기 보안 모듈에 활성화 상태로 저장된 프로파일의 개수 또는/그리고 프로파일의 개수를 포함한 메시지를 수신하여, 프로파일 활성화를 위해 오픈할 포트의 개수 및 번호를 판단하고, 또한 오픈 가능한 포트의 개수가 제 2 메시지를 통해서 수신된 활성화된 프로파일의 개수 대비 적은 수인 경우, 포트를 할당하지 않은 프 로파일을 처리하는 동작을 수행하여 제공하는 방법 및 장치를 제공할 수 있다. 본 발명의 다른 예에서는, 무선 통신 시스템에서 보안 모듈에 의해 수행되는 방법에 있어서, 단말로부터, 지원 가능한 프로파일 관리 명령 접근 방식, 지원할 포트의 개수에 대한 제 1 메시지를 수신하는 단계; 및 상기 단말 로, 상기 제1 메시지에 응답하여, 공통으로 지원 가능한 프로파일 관리 명령 접근 방식, 프로파일 활성화를 위 해 공통으로 지원 가능한 포트의 개수, 그리고 상기 보안 모듈에 활성화 상태로 저장된 프로파일의 개수 또는/ 그리고 프로파일의 개수를 포함한 제2 메시지를 전송하는 단계를 포함하고, 상기 제1 메시지는 상기 단말의 설 정 정보에 의거하여 생성되는 것을 특징으로 한다. 본 발명의 다른 예에서는, 무선 통신 시스템에서 보안 모듈에 의해 수행되는 방법에 있어서, 단말로부터, 지원 가능한 프로파일 관리 명령 접근 방식, 지원할 포트의 개수에 대한 제 1 메시지를 수신하는 단계; 및 상기 단말 로, 상기 제1 메시지에 응답하여, 공통으로 지원 가능한 포트의 개수를 포함한 제2 메시지를 전송하는 단계를 포함하고, 추가적으로 단말로로부터 수신된 제 3 메시지를 더 수신하는 단계; 및 해당 메시지에 대한 회신된 제 4 메시지로 상기 보안 모듈에 활성화 상태로 저장된 프로파일의 개수 또는/그리고 프로파일의 개수를 더 제공하 는 방법을 포함하는 것을 특징으로 한다. 본 발명의 다른 예에서는, 단말에서 보안 모듈로부터 수신한 제 2 메시지 또는 제 2메시지와 제 4메시지를 조합 하여 단말에서 프로파일 활성화를 위해 오픈한 포트의 개수가 보안 모듈에 활성화 상태로 있는 프로파일의 개수 와 작은 경우에 있어서 단말은 해당 활성화 상태인 프로파일을 처리하는 방법으로, eUICC에 프로파일 비활성화 명령을 요청하여 처리하거나 또는 닫힌 포트에 있는 프로파일의 활성화 상태를 유지하되 이를 처리하도록 도 1 에서 기술한 단말의 구성 모듈들 중의 하나 이상을 해당 활성화 상태를 유지 하되 처리할 수 있도록 하는 설정 을 방법을 포함할 수 있다. 본 발명의 다른 예에서는, 보안 모듈에서 단말로부터 수신한 제1 메시지, 그리고 제2 또는 제4 메시지를 보안 모듈에서 단말에서 회신한 이후 특정 시점에서 단말로부터 프로파일의 활성화를 위해 수신 받는 포트 오픈 명령 의 개수(Manage LSI(reset) Command의 개수)를 참조하여, 활성화 상태인 프로파일의 개수보다 작은 경우, 추가 적으로 도 3에서 언급한 접근 방식을 참고하여 오픈된 포트 중의 하나로 닫힌 포트에 활성화된 프로파일의 비활 성화 요청 명령 수신을 허용하고 이를 처리할 수 있도록 설정을 제공하여 처리할 수도 있다. 본 개시에서 이루고자 하는 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급하지 않은"}
{"patent_id": "10-2022-0037313", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "또 다른 기술적 과제들은 아래의 기재로부터 본 개시가 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하 게 이해될 수 있을 것이다. 본원 발명에 개시된 실시 예 들을 통해서 단말-카드간 MEP 모드로 진입하기로 결정하고, 오픈할 포트 개수를 생 성하여 단말-카드간 메시지를 주고 받는 경우에 다음을 기대할 수 있다. 1개의 물리핀을 통해서 단말에서 eUICC로 통신사 프로파일에 대한 활성화/비활성화 등 관리 메시지가 전송되는 경우, 단말과 eUICC는 eUICC에 여러 개의 통신사 프로파일이 있더라도 어떤 프로파일에 대한 것인지 논리 인터 페이스로 구분하여 프로파일 관리를 처리해 줄 수 있다. 또한, 단말은 상기 통신사 프로파일을 단말의 어떤 Baseband와 맵핑하여 관리 명령을 처리할지 결정할 수 있다. 또한, 이를 통해서 궁극적으로 사용자는 1개 eUICC 가 탑재된 단말에서 여러 통신사의 프로파일을 동시에 사용할 수 있어 사용자 편의성을 제고할 수 있다. 예를 들어, 해외 여행 시, 1개 eUICC로 기존 국내 통신사 Profile과 여행지 로컬 Profile 동시에 사용 가능하며, 국 내에서 1개 eUICC로 동일 통신사의 2개 Profiles을 Subscription을 구분해 사용도 가능하다. 단말 제조사는 1개 eUICC를 1개의 물리 핀을 통해 모뎀(2개 이상의 baseband들을 제공하는)과 연결하여 추가적인 단말 실장 공간 없이 Dual SIM 기능을 제공할 수 있다. 여기서는 Dual SIM으로 언급하였으나, 사용 가능한 baseband의 개수에 따라서 triple, quadruple SIM 기능으로도 사용할 수 있음을 유의해야 한다. 또한, 단말이 eUICC에 활성화된 프로파일(들)에 대해 eUICC에 단말과 메시지 송수신을 위한 통로를 제공해 주지 못하는 경우에, 상기 닫힌 포트에 활성화된 프로파일을 처리하는 단말의 동작 및 처리를 정의함으로써, 궁극적 으로 단말은 사용자에게 정확한 프로파일의 사용 가능 여부에 대한 정보를 구성하여 제공할 수 있다. 본 문서에 개시된 다양한 실시 예들에 따른 단말은 전자 디바이스가 될 수 있으며, 상기 전자 디바이스는 다양 한 형태의 디바이스가 될 수 있다. 상기 전자 디바이스는, 예를 들면, 휴대용 통신 디바이스 (예: 스마트폰), 컴퓨터 디바이스, 휴대용 멀티미디어 디바이스, 휴대용 의료 기기, 카메라, 웨어러블 디바이스, 또는 가전 디바 이스를 포함할 수 있다. 본 문서의 일 실시 예에 따른 전자 디바이스는 전술한 기기들에 한정되지 않는다. 본 문서의 다양한 실시 예들 및 이에 사용된 용어들은 본 문서에 기재된 기술적 특징들을 특정한 실시 예들로 한정하려는 것이 아니며, 해당 실시예의 다양한 변경, 균등물, 또는 대체물을 포함하는 것으로 이해되어야 한다. 도면의 설명과 관련하여, 유사한 또는 관련된 구성요소에 대해서는 유사한 참조 부호가 사용될 수 있다. 아이템에 대응하는 명사의 단수 형은 관련된 문맥상 명백하게 다르게 지시하지 않는 한, 상기 아이템 한 개 또 는 복수 개를 포함할 수 있다. 본 문서에서, \"A 또는 B\", \"A 및 B 중 적어도 하나\",\"A 또는 B 중 적어도 하 나,\"\"A, B 또는 C,\" \"A, B 및 C 중 적어도 하나,\"및 \"A, B, 또는 C 중 적어도 하나\"와 같은 문구들 각각은 그 문구들 중 해당하는 문구에 함께 나열된 항목들 중 어느 하나, 또는 그들의 모든 가능한 조합을 포함할 수 있다. \"제 1\", \"제 2\", 또는 \"첫째\" 또는 \"둘째\"와 같은 용어들은 단순히 해당 구성요소를 다른 해당 구성요소 와 구분하기 위해 사용될 수 있으며, 해당 구성요소들을 다른 측면(예: 중요성 또는 순서)에서 한정하지 않는다. 어떤(예: 제 1) 구성요소가 다른(예: 제 2) 구성요소에, \"기능적으로\" 또는 \"통신적으로\"라는 용어와 함께 또는 이런 용어 없이, \"커플드\" 또는 \"커넥티드\"라고 언급된 경우, 그것은 상기 어떤 구성요소가 상기 다 른 구성요소에 직접적으로(예: 유선으로), 무선으로, 또는 제 3 구성요소를 통하여 연결될 수 있다는 것을 의미 한다. 본 문서에서 사용된 용어 \"모듈\"은 하드웨어, 소프트웨어 또는 펌웨어로 구현된 유닛을 포함할 수 있으며, 예를 들면, 로직, 논리 블록, 부품, 또는 회로 등의 용어와 상호 호환적으로 사용될 수 있다. 모듈은, 일체로 구성된 부품 또는 하나 또는 그 이상의 기능을 수행하는, 상기 부품의 최소 단위 또는 그 일부가 될 수 있다. 예를 들 면, 일 실시 예에 따르면, 모듈은 ASIC(application-specific integrated circuit)의 형태로 구현될 수 있다. 본 문서의 다양한 실시 예들은 머신(machine)(예: 전자 디바이스) 의해 읽을 수 있는 저장 매체(storage medium)(예: 내장 메모리 또는 외장 메모리)에 저장된 하나 이상의 명령어들을 포함하는 소프트웨어(예: 프로그 램)로서 구현될 수 있다. 예를 들면, 머신(예: 전자 디바이스)의 프로세서는, 저장 매체로부터 저장된 하나 이 상의 명령어들 중 적어도 하나의 명령을 호출하고, 그것을 실행할 수 있다. 이것은 기기가 상기 호출된 적어도 하나의 명령어에 따라 적어도 하나의 기능을 수행하도록 운영되는 것을 가능하게 한다. 상기 하나 이상의 명령 어들은 컴파일러에 의해 생성된 코드 또는 인터프리터에 의해 실행될 수 있는 코드를 포함할 수 있다. 기기로 읽을 수 있는 저장매체는, 비일시적(non-transitory) 저장매체의 형태로 제공될 수 있다. 여기서, '비일시적'은 저장매체가 실재(tangible)하는 디바이스고, 신호(signal)(예: 전자기파)를 포함하지 않는다는 것을 의미할 뿐 이며, 이 용어는 데이터가 저장매체에 반영구적으로 저장되는 경우와 임시적으로 저장되는 경우를 구분하지 않 는다. 일 실시 예에 따르면, 본 문서에 개시된 다양한 실시 예들에 따른 방법은 컴퓨터 프로그램 제품(computer program product)에 포함되어 제공될 수 있다. 컴퓨터 프로그램 제품은 상품으로서 판매자 및 구매자 간에 거래 될 수 있다. 컴퓨터 프로그램 제품은 기기로 읽을 수 있는 저장 매체(예: compact disc read only memory (CD- ROM))의 형태로 배포되거나, 또는 어플리케이션 스토어(예: 플레이 스토어TM)를 통해 또는 두 개의 사용자 디바 이스들(예: 스마트폰들) 간에 직접, 온라인으로 배포(예: 다운로드 또는 업로드)될 수 있다. 온라인 배포의 경 우에, 컴퓨터 프로그램 제품의 적어도 일부는 제조사의 서버, 어플리케이션 스토어의 서버, 또는 중계 서버의 메모리와 같은 기기로 읽을 수 있는 저장 매체에 적어도 일시 저장되거나, 임시적으로 생성될 수 있다. 다양한 실시 예들에 따르면, 상기 기술한 구성요소들의 각각의 구성요소(예: 모듈 또는 프로그램)는 단수 또는 복수의 개체를 포함할 수 있다. 다양한 실시 예들에 따르면, 전술한 해당 구성요소들 중 하나 이상의 구성요소 들 또는 동작들이 생략되거나, 또는 하나 이상의 다른 구성요소들 또는 동작들이 추가될 수 있다. 대체적으로 또는 추가적으로, 복수의 구성요소들(예: 모듈 또는 프로그램)은 하나의 구성요소로 통합될 수 있다. 이런 경우, 통합된 구성요소는 상기 복수의 구성요소들 각각의 구성요소의 하나 이상의 기능들을 상기 통합 이전에 상기 복수의 구성요소들 중 해당 구성요소에 의해 수행되는 것과 동일 또는 유사하게 수행할 수 있다. 다양한 실시 예들에 따르면, 모듈, 프로그램 또는 다른 구성요소에 의해 수행되는 동작들은 순차적으로, 병렬적으로, 반복적으로, 또는 휴리스틱하게 실행되거나, 상기 동작들 중 하나 이상이 다른 순서로 실행되거나, 생략되거나,또는 하나 이상의 다른 동작들이 추가될 수 있다. 상술한 본 개시의 구체적인 실시 예들에서, 본 개시에 포함되는 구성 요소는 제시된 구체적인 실시 예에 따라 단수 또는 복수로 표현되었다. 그러나, 단수 또는 복수의 표현은 설명의 편의를 위해 제시한 상황에 적합하게 선택된 것으로서, 본 개시가 단수 또는 복수의 구성 요소에 제한되는 것은 아니며, 복수로 표현된 구성 요소라 하더라도 단수로 구성되거나, 단수로 표현된 구성 요소라 하더라도 복수로 구성될 수 있다. 한편 본 개시의 상세한 설명에서는 구체적인 실시 예에 관해 설명하였으나, 본 개시의 범위에서 벗어나지 않는 한도 내에서 여러 가지 변형이 가능함은 물론이다. 그러므로 본 개시의 범위는 설명된 실시 예에 국한되어 정해 져서는 아니 되며 후술하는 특허청구의 범위뿐만 아니라 이 특허청구의 범위와 균등한 것들에 의해 정해져야 한 다.도면 도면1 도면2 도면3a 도면3b 도면3c 도면4 도면5 도면6 도면7 도면8"}
{"patent_id": "10-2022-0037313", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시 예에 따른 무선 통신 시스템의 구성 요소들을 나타낸 도면이다. 도 2는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 MEP를 지원하지 않는 현재 v2 내장 범용 통합 회로카드(embedded Universal Integrated Circuit Card: eUICC)와 모뎀 간 연결에 대한 예시를 개략적으로 도시하 고 있는 도면이다. 도 3A는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 가상 인터페이스 개념 도입에 따른 eUICC와 모뎀 간 ISD-R 접근 방법을 도시하고 있는 도면이다. 도 3B는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 가상 인터페이스 개념 도입에 따른 eUICC와 모뎀 간 ISD-R 접근 방법을 도시하고 있는 도면이다. 도 3C는 본 개시의 일 실시 예에 따른 무선 통신 시스템에서 가상 인터페이스 개념 도입에 따른 eUICC와 모뎀 간 ISD-R 접근 방법을 도시하고 있는 도면이다. 도 4는 본 개시의 일 실시 예에 따른, 단말-카드 간 초기화 과정에서 eUICC로부터 수집한 지원 가능한 포트의 개수 및 활성화된 프로파일에 대한 정보를 참조하여 단말에서 활성화된 프로파일을 위해 사용할 포트의 개수와 닫힌 포트에 활성화된 프로파일에 대한 처리 방법을 결정하는 단계를 설명하는 위한 도면이다. 도 5는 본 개시의 다른 실시 예에 따른, 단말-카드 간 초기화 과정에서 eUICC로부터 수집한 지원 가능한 포트의 개수 및 활성화된 프로파일에 대한 정보를 참조하여 단말에서 활성화된 프로파일을 위해 사용할 포트의 개수와 닫힌 포트에 활성화된 프로파일에 대한 처리 방법을 결정하는 단계를 설명하는 위한 도면이다. 도 6은 본 개시의 일 실시 예들에 따른 무선 통신 시스템에서 단말의 내부 구조를 개략적으로 도시한 도면이다. 도 7은 eUICC가 닫힌 포트에서의 프로파일 활성화를 지원하는 않는 eUICC일 경우에 가능한 추가 실시 예를 나타 낸 도면이다. 도 8은 eUICC가 닫힌 포트에서의 프로파일 활성화를 지원하는 않는 eUICC일 경우에 가능한 추가 실시 예를 나타 내는 도면이다."}
