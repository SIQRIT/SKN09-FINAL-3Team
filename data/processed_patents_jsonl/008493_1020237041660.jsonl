{"patent_id": "10-2023-7041660", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0034690", "출원번호": "10-2023-7041660", "발명의 명칭": "특징량 출력 모델 생성 시스템, 특징량 출력 모델 생성 방법, 특징량 출력 모델 생성 프로그", "출원인": "하마마츠 포토닉스 가부시키가이샤", "발명자": "이토 아카리"}}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 시스템으로서,촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득하는 학습용 화상 취득 수단과,상기 학습용 화상 취득 수단에 의해서 취득된 학습용 화상으로부터, 기계 학습에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 수단을 구비하고,상기 특징량 출력 모델 생성 수단은, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행하는 특징량 출력 모델 생성 시스템."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서, 상기 특징량 출력 모델 생성 수단은 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행하는 특징량 출력 모델 생성 시스템."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 1 또는 청구항 2에 있어서, 상기 학습용 화상 취득 수단은 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로서 취득하는 특징량 출력 모델 생성 시스템."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "청구항 3에 있어서, 상기 학습용 화상 취득 수단은 특정 파장의 광을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로서 취득하는 특징량 출력 모델 생성 시스템."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "청구항 1 내지 청구항 4 중 어느 한 항에 있어서, 상기 학습용 화상 취득 수단은 취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정보를 취득하고,상기 학습용 화상 취득 수단에 의해서 취득된 합초 위치 정보로부터, 기계 학습에 의해서, 상기 특징량 출력 모델 생성 수단에 의해서 생성되는 특징량 출력 모델로부터 출력되는 특징량을 입력하여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 초점 위치 추정 모델을 생성하는 초점 위치 추정 모델 생성 수단을 더 구비하는 특징량 출력 모델 생성 시스템."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 방법으로서,공개특허 10-2024-0034690-3-촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득하는 학습용 화상 취득 스텝과,상기 학습용 화상 취득 스텝에서 취득된 학습용 화상으로부터, 기계 학습에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 스텝을 포함하고,상기 특징량 출력 모델 생성 스텝에 있어서, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행하는 특징량 출력 모델생성 방법."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "청구항 6에 있어서, 상기 특징량 출력 모델 생성 스텝에 있어서, 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행하는 특징량 출력 모델 생성 방법."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "청구항 6 또는 청구항 7에 있어서, 상기 학습용 화상 취득 스텝에 있어서, 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로서 취득하는 특징량 출력 모델 생성 방법."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "청구항 8에 있어서, 상기 학습용 화상 취득 스텝에 있어서, 특정 파장의 광을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로서 취득하는 특징량 출력 모델 생성 방법."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "청구항 6 내지 청구항 9 중 어느 한 항에 있어서, 상기 학습용 화상 취득 스텝에 있어서, 취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초위치 정보를 취득하고,상기 학습용 화상 취득 스텝에서 취득된 합초 위치 정보로부터, 기계 학습에 의해서, 상기 특징량 출력 모델 생성 스텝에서 생성되는 특징량 출력 모델로부터 출력되는 특징량을 입력하여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 초점 위치 추정 모델을 생성하는 초점 위치 추정 모델 생성 스텝을 더 포함하는 특징량 출력 모델 생성 방법."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "컴퓨터를, 화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 시스템으로서 동작시키는 특징량 출력 모델 생성 프로그램으로서,해당 컴퓨터를,촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득하는 학습용 화상 취득 수단과,상기 학습용 화상 취득 수단에 의해서 취득된 학습용 화상으로부터, 기계 학습에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 수단으로서 기능시키고,상기 특징량 출력 모델 생성 수단은, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행하는 특징량 출력 모델 생성 프공개특허 10-2024-0034690-4-로그램."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "청구항 11에 있어서, 상기 특징량 출력 모델 생성 수단은 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행하는 특징량 출력 모델 생성 프로그램."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "청구항 11 또는 청구항 12에 있어서, 상기 학습용 화상 취득 수단은 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로서 취득하는 특징량 출력 모델 생성 프로그램."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "청구항 13에 있어서, 상기 학습용 화상 취득 수단은 특정 파장의 광을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로서 취득하는 특징량 출력 모델 생성 프로그램."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "청구항 11 내지 청구항 14 중 어느 한 항에 있어서, 상기 학습용 화상 취득 수단은 취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정보를 취득하고,상기 컴퓨터를,상기 학습용 화상 취득 수단에 의해서 취득된 합초 위치 정보로부터, 기계 학습에 의해서, 상기 특징량 출력 모델 생성 수단에 의해서 생성되는 특징량 출력 모델로부터 출력되는 특징량을 입력하여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 초점 위치 추정 모델을 생성하는 초점 위치 추정 모델 생성 수단으로서도 기능시키는 특징량 출력 모델 생성 프로그램."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하도록 컴퓨터를 기능시키기 위한 특징량 출력 모델로서,촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상으로부터, 기계 학습에 의해서 생성되고,서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량이 비교되고, 비교 결과에 기초하여 기계 학습이 행해지는, 특징량 출력 모델."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "청구항 16에 있어서, 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관한 것인 경우, 해당2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습이 행해져 생성되는 특징량 출력 모델."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "청구항 16 또는 청구항 17에 있어서, 공개특허 10-2024-0034690-5-촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로 하여 기계 학습이 행해져 생성되는 특징량 출력 모델."}
{"patent_id": "10-2023-7041660", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "청구항 18에 있어서,특정 파장의 광을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로 하여 기계 학습이 행해져 생성되는 특징량 출력 모델."}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "초점 위치 추정 등의 화상에 기초하는 추정에 이용하는 학습 완료 모델을 단시간 학습으로 생성 가능하게 한다. 특징량 출력 모델 생성 시스템은 화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 시스템으로서, 촬상시 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상 을 취득하는 학습용 화상 취득부와, 취득된 학습용 화상으로부터 기계 학습에 의해 특징량 출력 모델을 생성 하는 특징량 출력 모델 생성부를 구비하고, 특징량 출력 모델 생성부는 서로 상이한 2개의 학습용 화상 에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행한다."}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징 량 출력 모델 생성 시스템, 특징량 출력 모델 생성 방법 및 특징량 출력 모델 생성 프로그램, 그리고 해당 특징 량 출력 모델에 관한 것이다."}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "종래, 슬라이드 글라스를 촬상(스캔)하여 얻어진 화상을, 가상적인 현미경 화상으로서 이용하는 버추얼 슬라이 드 스캐너가 이용되고 있다. 이러한 장치에서는, 초점 위치가 샘플에 맞은 상태에서 촬상이 행해질 필요가 있다. 이것에 대해서, 샘플을 촬상한 화상에 기초하여 적절한 초점 위치를 추정하는 것이 제안되어 있다. 예를 들면, 특허 문헌 1에는, 기계 학습 알고리즘을 이용한 추정이 나타내져 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 특허 문헌 1: 일본 특개 2013－50713호 공보"}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "그렇지만, 적절한 초점 위치를 추정하는 학습 완료 모델을 생성하는 경우, 단순히 화상과 적절한 초점 위치를 나타내는 정보와 교사 데이터로서 이용하여 기계 학습을 행하는 것만으로는, 학습에 장시간을 필요로 해 버린다. 그 때문에, 단시간의 학습으로의 적절한 초점 위치의 추정이 곤란하여, 단시간의 학습으로의 추정이 요 구되고 있었다. 본 발명의 일 실시 형태는, 상기를 감안하여 이루어진 것으로, 초점 위치의 추정 등의 화상에 기초하는 추정에 이용하는 학습 완료 모델을 단시간의 학습으로 생성 가능하게 할 수 있는 특징량 출력 모델 생성 시스템, 특징 량 출력 모델 생성 방법 및 특징량 출력 모델 생성 프로그램, 그리고 해당 특징량 출력 모델을 제공하는 것을 목적으로 한다."}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기의 목적을 달성하기 위해서, 본 발명의 일 실시 형태에 따른 특징량 출력 모델 생성 시스템은, 화상에 기초 하는 정보를 입력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 시 스템으로서, 촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득하는 학습용 화상 취득 수단과, 학습용 화상 취득 수단에 의해서 취득된 학습용 화상으로부터, 기계 학습에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 수단을 구비하고, 특징량 출력 모델 생성 수단은, 서로 상이한 2 개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행한다. 본 발명의 일 실시 형태에 따른 특징량 출력 모델 생성 시스템에서는, 기계 학습에 의해서, 화상의 특징량을 출 력하는 특징량 출력 모델이 생성된다. 이 때, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량이 비교되고, 기계 학습은 비교 결과에 기초하여 행해진다. 해당 생성에 의하면, 예를 들면, 화상에 기초하는 정보를 입력하는 기존의 학습 완료 모델을 이용함으로써, 단시간에 특징량 출력 모델을 생성할 수 있다. 즉, 본 발명의 일 실시 형태에 따른 특징량 출력 모델 생성 시스템에 의하면, 초 점 위치의 추정 등의 화상에 기초하는 추정에 이용하는 학습 완료 모델을 단시간의 학습으로 생성 가능하게 할 수 있다. 특징량 출력 모델 생성 수단은, 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해 당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초 점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행하는 것으로 해 도 된다. 이 구성에 의하면, 확실하고 또한 적절하게 특징량 출력 모델을 생성할 수 있다. 학습용 화상 취득 수단은, 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로서 취득하는 것으로 해도 된다. 나아가, 학습용 화상 취득 수단은 특정 파장의 광을 촬 상 대상물에 조사했을 때의 화상을, 학습용 화상으로서 취득하는 것으로 해도 된다. 이러한 구성에 의하면, 이 용되는 화상에 종류에 따른 적절한 특징량 출력 모델을 생성할 수 있다. 학습용 화상 취득 수단은 취득하는 학습용 화상 각각에 대응하는 합초(合焦)시의 초점 위치에 관한 합초 위치 정보를 취득하고, 특징량 출력 모델 생성 시스템은 학습용 화상 취득 수단에 의해서 취득된 합초 위치 정보로부 터, 기계 학습에 의해서, 특징량 출력 모델 생성 수단에 의해서 생성되는 특징량 출력 모델로부터 출력되는 특 징량을 입력하여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 초점 위치 추정 모델을 생성하는 초점 위치 추정 모델 생성 수단을 더 구비하는 것으로 해도 된다. 이 구성에 의하면, 화상으로부터 합 초시의 초점 위치를 추정하는 초점 위치 추정 모델을 생성할 수 있다. 즉, 이 구성에 의하면, 특징량 출력 모델 과 함께, 화상에 기초하는 초점 위치의 추정에 이용하는 학습 완료 모델을 단시간의 학습으로 생성 가능하게 할 수 있다. 그런데, 본 발명의 일 실시 형태는, 상기와 같이 특징량 출력 모델 생성 시스템의 발명으로서 기술할 수 있는 것 외에, 이하와 같이 특징량 출력 모델 생성 방법 및 특징량 출력 모델 생성 프로그램의 발명으로서도 기술할 수 있다. 이것들은 카테고리가 다를 뿐, 실질적으로 동일한 발명이며, 마찬가지의 작용 및 효과를 달성한다. 즉, 본 발명의 일 실시 형태에 따른 특징량 출력 모델 생성 방법은, 화상에 기초하는 정보를 입력하여 해당 화 상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 방법으로서, 촬상시의 초점 위치 에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득하는 학습용 화상 취득 스텝과, 학습용 화상 취득 스텝에서 취득된 학습용 화상으로부터, 기계 학습에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모 델 생성 스텝을 포함하고, 특징량 출력 모델 생성 스텝에 있어서, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행한 다. 특징량 출력 모델 생성 스텝에 있어서, 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상 이한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행하는 것으로 해도 된다. 학습용 화상 취득 스텝에 있어서, 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검 출한 화상을, 학습용 화상으로서 취득하는 것으로 해도 된다. 학습용 화상 취득 스텝에 있어서, 특정 파장의 광 을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로서 취득하는 것으로 해도 된다. 학습용 화상 취득 스텝에 있어서, 취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정보를 취득하고, 특징량 출력 모델 생성 방법은 학습용 화상 취득 스텝에서 취득된 합초 위치 정보로부터, 기 계 학습에 의해서, 특징량 출력 모델 생성 스텝에서 생성되는 특징량 출력 모델로부터 출력되는 특징량을 입력 하여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 초점 위치 추정 모델을 생성하는 초점 위치 추정 모델 생성 스텝을 더 포함하는 것으로 해도 된다. 또, 본 발명의 일 실시 형태에 따른 특징량 출력 모델 생성 프로그램은, 컴퓨터를, 화상에 기초하는 정보를 입 력하여 해당 화상의 특징량을 출력하는 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 시스템으로서 동작 시키는 특징량 출력 모델 생성 프로그램으로서, 해당 컴퓨터를, 촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득하는 학습용 화상 취득 수단과, 학습용 화상 취득 수단에 의해서 취득된 학습용 화상으로부터, 기계 학습에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 수단으로서 기 능시키고, 특징량 출력 모델 생성 수단은 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량을 비교하고, 비교 결과에 기초하여 기계 학습을 행한다. 특징량 출력 모델 생성 수단은 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해 당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초 점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행하는 것으로 해 도 된다. 학습용 화상 취득 수단은 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대 상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화 상을, 학습용 화상으로서 취득하는 것으로 해도 된다. 학습용 화상 취득 수단은 특정 파장의 광을 촬상 대상물 에 조사했을 때의 화상을, 학습용 화상으로서 취득하는 것으로 해도 된다. 학습용 화상 취득 수단은 취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정보를 취득하고, 특징량 출력 모델 생성 프로그램은, 컴퓨터를, 학습용 화상 취득 수단에 의해서 취득된 합초 위치 정 보로부터, 기계 학습에 의해서, 특징량 출력 모델 생성 수단에 의해서 생성되는 특징량 출력 모델로부터 출력되 는 특징량을 입력하여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 초점 위치 추정 모 델을 생성하는 초점 위치 추정 모델 생성 수단으로서도 기능시키는 것으로 해도 된다. 또, 본 발명의 일 실시 형태에 따른 특징량 출력 모델 생성 시스템에 의해서 생성되는 특징량 출력 모델 자체도, 신규 구성을 가지는 발명이다. 즉, 본 발명의 일 실시 형태에 따른 특징량 출력 모델은, 화상에 기초하 는 정보를 입력하여 해당 화상의 특징량을 출력하도록 컴퓨터를 기능시키기 위한 특징량 출력 모델로서, 촬상시 의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상으로부터, 기계 학습에 의해서 생성되고, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량이 비교 되고, 비교 결과에 기초하여 기계 학습이 행해진다. 특징량 출력 모델은 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해당 2개의 학 습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관 한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습이 행해져 생성되는 것으로 해도 된다. 특징량 출력 모델은 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물 로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로 하여 기계 학습이 행해져 생성되는 것으로 해도 된다. 특징량 출력 모델은, 특정 파장 의 광을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로 하여 기계 학습이 행해져 생성되는 것으로 해도 된다."}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 일 실시 형태에 의하면, 초점 위치의 추정 등의 화상에 기초하는 추정에 이용하는 학습 완료 모델을 단시간의 학습으로 생성 가능하게 할 수 있다."}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 도면과 함께 본 발명에 따른 특징량 출력 모델 생성 시스템, 특징량 출력 모델 생성 방법, 특징량 출력 모델 생성 프로그램 및 특징량 출력 모델의 실시 형태에 대해 상세하게 설명한다. 또한, 도면의 설명에 있어서 는 동일 요소에는 동일 부호를 부여하고, 중복하는 설명을 생략한다. 도 1에 본 실시 형태에 따른 특징량 출력 모델 생성 시스템인 컴퓨터를 나타낸다. 컴퓨터는 화상에 대 한 정보 처리를 행하는 장치(시스템)이다. 구체적으로는, 컴퓨터는 검사 장치 및 관찰 장치 중 적 어도 어느 것에 의해서 촬상되는 화상에 대한 정보 처리를 행한다. 또한, 컴퓨터는 검사 장치 및 관찰 장치 이외의 장치에 의해서 촬상된 화상에 대한 정보 처리를 행해도 된다. 즉, 컴퓨터는 검사 장치 및 관찰 장치 이외의 촬상을 행하는 장치에 대해서 적용되어도 된다. 검사 장치는 반도체 디바이스를 촬상하고, 촬상한 화상에 기초하여 반도체 디바이스를 검사하는 장치이다. 예를 들면, 검사 장치는 반도체 디바이스의 고장 해석을 행한다. 검사 대상의 반도체 디바이스는, 예를 들 면, μLED(Light Emitting Diode)가 깔린 웨이퍼이다. 고장 해석은, 예를 들면, 발광 해석, 발열 해석, 패턴 화 상을 이용한 해석 또는 레이저에 의한 해석(OBIRCH, OBIC 또는 DALS 등)에 의해서 행해진다. 검사 장치는 종래의 검사 장치여도 된다. 이하에 설명하는 구성도 모두 종래의 검사 장치가 구비하는 것일 수 있다. 도 2에, 예를 들면, 발광 해석을 행하는 검사 장치의 일부의 구성을 나타낸다. 도 2에 나타내는 것처럼 검 사 장치는 카메라와, 재치부와, 광원과, 광학계와, 대물 렌즈와, 스테이지를 구비 하고 있다. 카메라는 촬상 대상물인 반도체 디바이스를 촬상하는 촬상 장치이다. 카메라는 예를 들면, InGaAs 카메라이다. 재치부는 촬상 대상물인 반도체 디바이스를 재치하기 위한 구성이다. 도 2에 있어서, 재치부에 재치되어 있는 표준 샘플은, 검사 대상물은 아니고, 후술하는 초점 위치에 따른 화상에 대응 하는 것이다. 표준 샘플은 인공적인 모양(예를 들면, 도 2에 나타내는 것처럼 방사 모양의 줄무늬)이 가해 진 샘플이다. 광원은 촬상 대상물에 조사되는 조사광을 출력하는 장치이다. 광원은 특정 파장(예를 들면, 표준 파장 인 1100nm, 그리고 표준 파장과는 상이한 파장인 900nm 및 1300nm)의 조사광을 출력하는 것이어도 된다. 또, 복 수의 광원을 준비해 두는 등, 조사광의 파장을 전환할 수 있도록 되어 있어도 된다. 광학계는 광원(4 3)으로부터 출력된 조사광을, 촬상 대상물인 반도체 디바이스에 조사하기 위한 광학계이다. 대물 렌즈는 카 메라에 의한 촬상에 이용되는 대물 렌즈이며, 예를 들면, 고침 렌즈(SIL)이다. 스테이지는 카메라 에 의한 촬상시의 초점 위치를 조정하기 위한 부재이다. 스테이지는 촬상 방향(초점 위치 방향, Z축 방향) 뿐만이 아니라 삼차원 중 어느 방향으로 이동할 수 있는 것(즉, XYZ 스테이지)이어도 된다. 검사 장치에 있 어서의 촬상시의 초점 위치는, 후술하는 것처럼 컴퓨터에 의해서 제어된다. 검사 장치는 상술한 구성에 의해서 얻어진 화상을 이용하여, 반도체 디바이스의 검사부를 행하는 검사부를 구비하고 있다. 또한, 검사 장치의 구성은, 상술한 것일 필요는 없고, 해석 방법에 따라서는, 다른 것이 이용되어도 된다. 예를 들면, 발열 해석에서는, 조명(광원)을 불요로 하고, 촬상 장치(카메라)로서 InSb 카메라를 이용해 도 된다. 또, 패턴 화상을 이용한 해석을 행하는 경우에는, 조명(광원)으로서, 인코히런트 광원 또는 코히런트 광원을 이용하고, 촬상 장치로서, 이차원 검출기, 혹은 광 주사를 행하는 장치 및 포토 다이오드를 이용해 도 된다. 레이저 해석을 행하는 경우에는, 조명(광원)으로서, 인코히런트 광원 또는 코히런트 광원을 이용 하고, 촬상 장치로서, 반도체 디바이스의 전기 특성 취득 장치를 이용해도 된다. 관찰 장치는 슬라이드 글라스에 실린 생체 샘플을 촬상하고, 촬상한 생체 샘플의 화상을 관찰하는 장치이다. 관찰 장치는 종래의 관찰 장치여도 된다. 예를 들면, 관찰 장치는 상술한 종래의 버추얼 슬 라이드 스캐너이다. 관찰 장치는 촬상 대상물인 생체 샘플을 촬상하는 촬상 장치와, 촬상 대상물인 생체 샘 플을 재치하는 재치부와, 촬상된 화상에 의해서 생체 샘플을 관찰하는 관찰부를 구비하고 있다. 관찰 장치 에 있어서의 촬상시의 초점 위치는, 후술하는 것처럼 컴퓨터에 의해서 제어된다. 검사 장치 및 관찰 장치에 의한 촬상은, 촬상 대상물에 초점이 맞은 상태에서 행해질 필요가 있다. 촬 상 대상물의 검사 또는 관찰을 적절히 행하기 위함이다. 도 3에 초점 위치에 따른 촬상된 화상의 예를 나타낸다. 이 화상은, 도 2에 나타내는 표준 샘플을 촬상한 것이다. 도 3의 (a)는 합초시의 초점 위치에서 촬상한 화상이다. 도 3의 (b)는 초점 위치가, 합초시의 초점 위치로부터 100μm 떨어진 경우의 화상이다. 도 3 의 (c)는, 초점 위치가, 도 3의 (b)의 경우보다도 더 떨어진 경우의 화상이다. 도 3의 (d)는, 초점 위치가, 도 3의 (c)의 경우보다도 더 떨어져 합초시의 초점 위치로부터 500μm 떨어진 경우의 화상이다. 즉, 도 3의 (a)는 포커스 화상의 예이고, 도 3의 (b)~(d)는 디포커스 화상의 예이다. 컴퓨터는 검사 장치 및 관찰 장치에 의한 촬상이, 촬상 대상물에 초점이 맞은 상태에서 행해지도록 하기 위한 정보 처리를 행한다. 컴퓨터는, 기능적인 구성으로서 기계 학습에 의해서 학습 완료 모델을 생성 하는 특징량 출력 모델 생성 시스템과, 특징량 출력 모델 생성 시스템에 의해서 생성된 학습 완료 모델 을 이용하여 상기의 촬상을 가능하게 하기 위한 정보 처리를 행하는 초점 위치 추정 시스템을 포함한다. 특 징량 출력 모델 생성 시스템은, 상세하게는 후술하는 것처럼, 화상에 기초하는 정보를 입력하여 해당 화상 의 특징량을 출력하는 특징량 출력 모델을 생성하는 시스템(장치)이다. 초점 위치 추정 시스템은, 상세하게 는 후술하는 것처럼, 추정 대상 화상에 대응하는 합초시의 초점 위치를 추정하는 시스템(장치)이다. 또한, 본 실시 형태에서는, 촬상을 행하는 장치로서, 검사 장치 및 관찰 장치를 나타냈지만, 촬상 대상물에 초점 이 맞은 상태에서 촬상을 행하는 장치(시스템)이면 상기 이외의 것이 이용되어도 된다. 컴퓨터는, 예를 들면, CPU(Central Processing Unit), 메모리, 통신 모듈 등의 하드웨어를 포함하는 종래 의 컴퓨터이다. 또, 컴퓨터는 복수의 컴퓨터를 포함하는 컴퓨터 시스템이어도 된다. 또, 컴퓨터는 클라 우드 컴퓨팅으로 구성되어 있어도 된다. 컴퓨터의 후술하는 각 기능은, 이러한 구성요소가 프로그램 등에 의해 동작함으로써 발휘된다. 컴퓨터와 검사 장치 및 관찰 장치는, 정보의 송수신이 가능하도록 서 로 접속되어 있다. 이어서, 본 실시 형태에 따른 컴퓨터에 포함되는 특징량 출력 모델 생성 시스템과 초점 위치 추정 시스 템의 기능을 설명한다. 도 1에 나타내는 것처럼 특징량 출력 모델 생성 시스템은, 학습용 화상 취득부 와, 특징량 출력 모델 생성부와, 초점 위치 추정 모델 생성부를 구비하여 구성된다. 특징량 출력 모델 생성 시스템의 각 기능을 설명하기 전에 특징량 출력 모델 생성 시스템에 의해서 생 성되는 학습 완료 모델을 설명한다. 특징량 출력 모델 생성 시스템에 의해서 생성되는 학습 완료 모델은, 특징량 출력 모델 및 초점 위치 추정 모델의 2개이다. 특징량 출력 모델은 화상에 기초하는 정보를 입력하여 해당 화상의 특징량을 출력하는 모델이다. 특징량 출력 모델로의 입력에 이용되는 화상은, 검사 장치 및 관찰 장치에 의해서 촬상된 화상 또는 그 부분 화상이 다. 특징량 출력 모델로부터의 출력인 특징량은, 입력에 관한 화상의 특징을 나타내는 정보이다. 본 실시 형태 에서는, 해당 특징은 화상이 촬상되었을 때의 초점 위치를 반영한 것이다. 즉, 특징량 출력 모델은 광학적인 특 징에 관한 광학 모델이다. 해당 특징량은, 예를 들면, 미리 설정된 차원수(예를 들면, 1024차원)의 벡터이다. 해당 특징량은, 후술하는 것처럼 초점 위치 추정 모델로의 입력에 이용된다. 특징량 출력 모델은, 예를 들면, 뉴럴 네트워크를 포함하여 구성된다. 뉴럴 네트워크는 다층의 것이어도 된다. 즉, 특징량 출력 모델은 심층 학습(딥 러닝)에 의해서 생성되어도 된다. 또, 뉴럴 네트워크는 콘볼루션 뉴럴 네 트워크(CNN：Convolutional Neural Network)여도 된다. 특징량 출력 모델에는, 입력층에 화상에 기초하는 정보를 입력하기 위한 뉴런이 마련된다. 예를 들면, 특징량 출력 모델에 입력되는 정보는, 화상의 각 화소의 화소값이다. 이 경우, 입력층에는, 화상의 화소의 수의 뉴런이 마련되고, 각각의 뉴런에는 대응하는 화소의 화소값이 입력된다. 후술하는 것처럼 특징량 출력 모델에 입력되는정보에 관한 화상은, 미리 설정된 사이즈의 화상(예를 들면, 224×224화소의 화상)이 된다. 또한, 특징량 출력 모델에 입력되는 정보는, 화상에 기초하는 것이면 각 화소의 화소값 이외여도 된다. 예를 들 면, 해당 정보는, 촬상 환경에 의한 영향을 경감시키기 위해서 화상에 대해서 종래의 화상 처리 등의 전처리를 행해 얻어지는, 특징량 출력 모델로의 입력용의 특징량으로 해도 된다. 이러한 전처리를 행함으로써, 기계 학습 의 효율 및 생성되는 특징량 출력 모델의 정밀도의 향상 등을 도모할 수 있다. 특징량 출력 모델에는, 출력층에 특징량을 출력하기 위한 뉴런이 마련된다. 예를 들면, 특징량의 벡터의 차원수 의 뉴런이 마련된다. 초점 위치 추정 모델은 특징량 출력 모델로부터 출력되는 특징량을 입력하여, 해당 특징량에 관한 화상에 대응 하는 합초시의 초점 위치를 추정하는 모델이다. 초점 위치 추정 모델은, 예를 들면, 입력되는 특징량에 관한 화 상이 촬상되었을 때의 초점 위치와, 합초시의 초점 위치의 차분을 나타내는 정보를, 합초시의 초점 위치의 추정 결과로서 출력한다. 차분은, 예를 들면, 합초시의 초점 위치에 대응하는 초점 거리로부터, 특징량에 관한 화상 이 촬상되었을 때의 초점 위치에 대응하는 초점 거리를 뺀 값이다. 즉, 이 경우, 합초시의 초점 위치의 위치를 0으로 한 좌표계에 있어서의 화상이 촬상되었을 때의 초점 위치를 나타내는 값이 출력값이 된다. 합초시의 초점 위치란, 입력되는 특징량에 관한 화상에 찍힌 촬상 대상물에 초점을 맞춰 촬상하기 위한 초점 위치이다. 입력되 는 특징량에 관한 디포커스 화상을 촬상했을 때의 초점 위치로부터, 상기의 차분만큼 초점 위치를 변경하여 촬 상함으로써 포커스 화상을 촬상할 수 있다. 이 경우, 상기의 차분의 후보를 미리 설정해 두고, 초점 위치 추정 모델은, 그러한 후보에 대해 후보가 타당한 정도를 나타내는 값을 출력해도 된다. 예를 들면, 차분의 후보를 ＋50μm, 0μm, －50μm, －100μm, …라고 하 고, 초점 위치 추정 모델은 각각의 후보에 대해서 타당한 정도를 나타내는 값을 출력한다. 예를 들면, 해당 값 이 가장 높은 후보를 상기의 차분으로 한다. 혹은, 초점 위치 추정 모델은 상기의 차분의 값 자체를 출력하는 것이어도 된다. 혹은, 초점 위치 추정 모델은, 합초시의 초점 위치 자체를 나타내는 정보(예를 들면, 합초시의 초점 위치에 대 응하는 초점 거리)를 출력해도 된다. 이 경우, 합초시의 초점 위치 자체의 후보를 미리 설정해 두고, 초점 위치 추정 모델은 그러한 후보에 대해 후보가 타당한 정도를 나타내는 값을 출력해도 된다. 혹은, 초점 위치 추정 모 델은 상기의 합초시의 초점 위치의 값 자체를 출력하는 것이어도 된다. 초점 위치 추정 모델은, 예를 들면, 뉴럴 네트워크를 포함하여 구성된다. 뉴럴 네트워크는 다층의 것이어도 된 다. 즉, 초점 위치 추정 모델은 심층 학습(딥 러닝)에 의해서 생성되어도 된다. 또, 뉴럴 네트워크는 콘볼루션 뉴럴 네트워크(CNN)여도 된다. 초점 위치 추정 모델에는, 입력층에 특징량을 입력하기 위한 뉴런이 마련된다. 예를 들면, 입력층에는, 특징량 출력 모델의 출력층에 마련된 뉴런에 대응하는 뉴런이 마련된다. 즉, 입력층에는, 특징량 출력 모델의 출력층에 마련된 수의 뉴런이 마련된다. 초점 위치 추정 모델에는, 상술한 합초시의 초점 위치의 추정 결과를 출력하기 위한 뉴런이 마련된다. 예를 들면, 후보의 수의 뉴런(후보마다의 값을 출력하는 경우) 또는 1개의 뉴런(상기의 차분 또는 합초시의 초점 위치 자체를 출력하는 경우)이 마련된다. 또한, 특징량 출력 모델 및 초점 위치 추정 모델은, 뉴럴 네트워크 이외에 의해서 구성되어 있어도 된다. 특징량 출력 모델 및 초점 위치 추정 모델은, 인공지능 소프트웨어의 일부인 프로그램 모듈로서의 이용이 상정 된다. 특징량 출력 모델 및 초점 위치 추정 모델은, 예를 들면, CPU 및 메모리를 구비하는 컴퓨터에서 이용되고, 컴퓨터의 CPU가, 메모리에 기억된 모델로부터의 지령에 따라서 동작한다. 예를 들면, 컴퓨터의 CPU가, 해당 지령에 따라서, 모델에 대해서 정보를 입력하고, 모델에 따른 연산을 행하여, 모델로부터 결과를 출력하도록 동작한다. 구체적으로는, 컴퓨터의 CPU가, 해당 지령에 따라서, 뉴럴 네트워크의 입력층에 정보를 입력하고, 뉴럴 네트워크에 있어서의 학습 완료된 가중치 계수 등의 파라미터에 기초하는 연산을 행하여, 뉴럴 네트워크의 출력층으로부터 결과를 출력하도록 동작한다. 학습용 화상 취득부는 촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어진 복수의 학습용 화상을 취득 하는 학습용 화상 취득 수단이다. 학습용 화상 취득부는 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대 상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬 상 대상물의 전기 특성을 검출한 화상을, 학습용 화상으로서 취득해도 된다. 학습용 화상 취득부는 특정 파 장의 광을 촬상 대상물에 조사했을 때의 화상을, 학습용 화상으로서 취득해도 된다. 학습용 화상 취득부는취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정보를 취득한다. 예를 들면, 학습용 화상 취득부는 검사 장치 또는 관찰 장치에 의해서 촬상된 화상을 취득한다. 이 화상은, 학습용 화상용의 촬상 대상물이 찍혀 있는 것이다. 학습용 화상용의 촬상 대상물은, 예를 들면, 도 2에 나타내는 표준 샘플이어도 된다. 혹은, 학습용 화상용의 촬상 대상물은 그 외의 것(예를 들면, 검사 장치 또는 관찰 장치에 의해서 촬상하는 것)이어도 된다. 예를 들면, 도 4에 나타내는 것처럼, 학습용 화상 취득부는 취득한 화상으로부터 부분 화상을 잘라내어 학습용 화상으로 한다. 학습용 화상은 상 술한 2개의 학습 완료 모델을 생성하기 위한 기계 학습에 이용되는 화상이다. 이를 위해, 학습용 화상 취득부 는 적절히 학습 완료 모델을 생성할 수 있는 정도의 수의 복수의 학습용 화상을 취득한다. 본 실시 형태는 디포커스 화상으로부터 합초시의 초점 위치를 추정하는 것이기 때문에, 복수의 학습용 화상(7 1)에는, 디포커스 화상이 포함되도록 한다. 또, 해당 디포커스 화상은 복수이며, 그것들에 관한 초점 위치는, 다양한 위치여도 된다. 즉, 그것들에 관한 초점 위치에 대응하는 초점 거리는, 다양한 거리여도 된다. 또, 복수 의 학습용 화상에는, 포커스 화상이 포함되어 있어도 된다. 도 4에서는, 취득한 화상이 3개인 예를 나 타내고 있다. 도 4의 화상을 나타낸 부분의 세로 방향은, 촬상 방향(초점 위치 방향, Z축 방향)이다. 학습용 화상은 특징량 출력 모델로의 입력에 이용되는 화상에 대응한다. 이 경우, 특징량 출력 모델은 검사 장치 또는 관찰 장치에 의해서 촬상된 화상 전체가 아니고, 해당 화상의, 학습용 화상과 동일한 사 이즈인 부분 화상에 기초하는 정보를 입력한다. 따라서, 학습용 화상 취득부는 특징량 출력 모델의 입력에 이용되는, 미리 설정된 사이즈의 부분 화상인 학습용 화상을 취득한 화상으로부터 잘라낸다. 화상 에 있어서의, 학습용 화상이 잘라내지는 위치는, 촬상 대상물이 찍혀 있는 부분이다. 단, 학습용 화상 에는, 촬상 대상물이 찍혀 있지 않은 학습용 화상이 포함되어 있어도 된다. 화상에 있어서의 학습용 화 상이 잘라내지는 위치는, 미리 설정되어 있어도 된다. 또, 화상에 대해서 화상 인식을 행하여 촬상 대 상물이 찍혀 있다고 추정되는 위치를 학습용 화상이 잘라내지는 위치로 해도 된다. 도 4에 나타내는 것처럼, 학습용 화상 취득부는 1개의 화상으로부터 복수의 학습용 화상을 잘라내 도 된다. 화상으로부터 복수의 학습용 화상을 잘라내는 경우, 학습용 화상의 위치가 중복되어 있어 도 된다. 검사 장치 또는 관찰 장치에서는, 촬상이 행해져서 학습용 화상의 바탕이 되는 화상이 생성된다. 그 때, 예를 들면, 검사 장치 또는 관찰 장치에서는, 촬상 방향(Z축 방향) 이외의 촬상시의 위치(XY)를 고정하고, 초점 위치가 상이한 복수 회의 연속한 촬상이 행해진다. 그 때, 도 4에 나타내는 것처럼, 일정한 간 격(스텝)(ΔZ)으로 초점 위치가 상이하도록 된다. 검사 장치 또는 관찰 장치에 있어서의 학습용 화상 을 위한 촬상은, 상기 이외의 방법으로 행해져도 된다. 또, 학습용 화상 취득부는 검사 장치 또는 관찰 장치에 의해서 촬상된 화상 자체를 학습용 화 상으로 해도 된다. 그 경우, 특징량 출력 모델로의 입력에 이용되는 화상도, 화상의 사이즈로 한다. 또, 학 습용 화상 취득부는 검사 장치 또는 관찰 장치 이외로부터 화상을 취득해도 된다. 또, 상기와 같이, 학습용 화상은 촬상 대상물로부터의 방사를 검출한 화상(발광·발열 해석에 이용되는 화 상), 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상(패턴 해석에 이용되는 화상), 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상(레이저 해석에 이용되는 화 상)이어도 된다. 또, 학습용 화상은 특정 파장의 광(예를 들면, 검사에 이용하는 특정 파장의 광)을 촬상 대상물에 조사했을 때의 화상이어도 된다. 이것들은, 검사 장치 또는 관찰 장치에서 통상 이용되는 화 상의 타입이다. 단, 1세트의 특징량 출력 모델 및 초점 위치 추정 모델을 생성하는 경우에는, 어느 타입의 화상 만을 학습용 화상으로 해도 된다. 이 경우, 생성되는 1세트의 특징량 출력 모델 및 초점 위치 추정 모델은, 특정 화상의 타입에 대응한 것이 된다. 발광 해석에서 이용되는 광의 파장은, 검사 장치의 구동 전압 및 설계 룰에 따라서 상이하다. 또, 실제의 광학계에서는, 조정 및 광학 소자의 특성에 기인한 파장마다의 초점 어긋남이 발생한다. 또, 패턴 이미지(화 상)를 관찰하는 초점 위치와 상이한 위치에서 검출 감도가 최대로 되는 경우가 있다. 이것들을 고려하여, 상기 와 같이 특정 파장마다의 화상을 이용하여, 파장마다의 특징량 출력 모델을 생성해도 된다. 예를 들면, 표준 파 장(1100nm) 및 표준 파장과는 상이한 파장(900nm, 1300nm) 마다의 화상을 이용하여, 파장마다의 특징량 출력 모 델을 생성해도 된다. 또, 1세트의 특징량 출력 모델 및 초점 위치 추정 모델을 생성하는 경우에는, 검사 장치 또는 관찰 장치 의 어느 기종(타입)에 의해서 촬상된 화상(부분 화상도 포함함)만을 학습용 화상으로 해도 된다. 이 경 우, 생성되는 1세트의 특징량 출력 모델 및 초점 위치 추정 모델은, 특정 기종의 검사 장치 또는 관찰 장치 에 대응한 것이 된다. 즉, 특징량 출력 모델 및 초점 위치 추정 모델은, 검사 장치 또는 관찰 장치(5 0)의 특징을 반영한 것이 된다. 이와 같이 학습용 화상을, 특정 타입의 화상 또는 특정 기종의 검사 장치 또는 관찰 장치에 대응하는 것으로 함으로써, 보다 정밀도가 높은 학습 완료 모델로 할 수 있다. 혹은, 초 점 위치 추정 모델에 대해서는, 복수의 화상의 타입 또는 기종에서 공통된 것으로 해도 된다. 각 학습용 화상에는, 학습용 화상의 촬상시의 초점 위치에 관한 초점 위치 정보가 대응지어져 있다. 초 점 위치 정보는, 예를 들면, 상기의 초점 위치를 나타내는 정보이다. 단, 초점 위치 정보는 초점 위치에 관한 정보이며, 상술한 학습 완료 모델의 생성에 이용할 수 있는 것이면 상기 이외의 것이어도 된다. 초점 위치 정보 는, 예를 들면, 검사 장치 또는 관찰 장치에 있어서의 화상의 촬상시의 정보로서 얻어진다. 예를 들면, 학습용 화상 취득부는 초점 위치 정보가 대응지어진 화상을 검사 장치 또는 관찰 장치로부터 수신 하여 취득한다. 또, 학습용 화상 취득부는 취득하는 학습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정 보를 취득한다. 합초 위치 정보는, 예를 들면, 합초시의 초점 위치를 나타내는 정보이다. 단, 합초 위치 정보는 합초시의 초점 위치에 관한 정보이며, 상술한 학습 완료 모델의 생성에 이용할 수 있는 것이면 상기 이외의 것 이어도 된다. 합초 위치 정보는 종래의 합초시의 초점 위치를 측정하는 방법 등으로 얻어진다. 예를 들면, 학습 용 화상 취득부는 측정에 의해서 얻어진 합초 위치 정보의 유저에 의한 컴퓨터에 대한 입력 조작을 접 수함으로써 합초 위치 정보를 취득한다. 학습용 화상 취득부는 취득한 각 정보를 특징량 출력 모델 생성부 및 초점 위치 추정 모델 생성부 에 출력한다. 특징량 출력 모델 생성부는 학습용 화상 취득부에 의해서 취득된 학습용 화상으로부터, 기계 학습 에 의해서 특징량 출력 모델을 생성하는 특징량 출력 모델 생성 수단이다. 특징량 출력 모델 생성부는 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량을 비 교하고, 비교 결과에 기초하여 기계 학습을 행한다. 특징량 출력 모델 생성부는 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상 의 특징량의 차분이 커지도록 기계 학습을 행해도 된다. 특징량 출력 모델 생성부는 이하와 같이 특징량 출력 모델을 생성한다. 특징량 출력 모델 생성부는 학 습용 화상 취득부로부터 학습용 화상, 및 해당 학습용 화상에 관한 초점 위치 정보를 입력한다. 특 징량 출력 모델 생성부는 입력한 복수의 학습용 화상으로부터 선택한 2개의 학습용 화상을 1개의 세트로서 이용하여, 특징량 출력 모델 생성을 위한 기계 학습을 행한다. 기계 학습에 이용되는 세트에는, 서로 동일한 초점 위치에 관한 학습용 화상 세트와, 서로 상이한 초점 위치에 관한 학습용 화상 세트 모두가 포함되도록 한다. 예를 들면, 동일한 초점 위치에 관한 학습용 화상 세트는, 예를 들면 도 4에 나타내는 것 처럼 동일한 화상으로부터 잘라내진 학습용 화상이어도 된다. 학습용 화상 세트의 선택은, 상기의 조건을 만족하도록 미리 설정된 방법으로 행해지면 된다. 또, 학습용 화상 세트는, 촬상 방향(Z축 방향) 이 외의 촬상시의 위치(XY)가 동일한 화상으로부터 선택되어도 된다. 특징량 출력 모델 생성부는 선택한 세트의 학습용 화상에 기초하는 정보를, 특징량 출력 모델로의 입력 으로서 기계 학습을 행한다. 도 4에 나타내는 것처럼 1개의 세트의 학습용 화상 각각을 특징량 출력 모델 에 입력하면, 학습용 화상 각각에 대해 특징량이 출력으로서 얻어진다. 도 4에서는, 특징량인 벡터의 각 요소의 값을 막대 그래프로 나타내고 있다. 이 때, 일방의 학습용 화상을 입력하는 특징량 출력 모델 을 학습 대상으로 하고, 다른 일방의 학습용 화상을 입력하는 특징량 출력 모델을 비교 대상으로 한다. 단, 이러한 특징량 출력 모델은 학습 도중의 동일한 것이다. 특징량 출력 모델 생성부는 초점 위치 정보를 참조하여, 출력되는 2개의 특징량을 비교하고 비교 결과에 기 초하여 기계 학습을 행한다. 특징량 출력 모델 생성부는 초점 위치 정보에 의해서 나타내지는 2개의 학습용 화상의 초점 위치가 서로 동일한 초점 위치인(즉, 동일 평면인) 경우, 해당 2개의 학습용 화상의 특징 량의 차분이 작아지도록 기계 학습을 행한다. 특징량 출력 모델 생성부는 초점 위치 정보에 의해서 나타내 지는 2개의 학습용 화상의 초점 위치가 서로 상이한 초점 위치인(즉, Z위치가 상이한) 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 기계 학습을 행한다. 또한, 동일한 화상으로부터 잘라내진 2개의 학습용화상인 경우, 2개의 학습용 화상의 초점 위치는 서로 동일한 초점 위치가 된다. 또, 2개의 학습용 화상 의 초점 위치가 서로 동일하다고 볼 수 있을 정도로 근접해 있는 경우도, 2개의 학습용 화상의 초점 위 치는 서로 동일한 초점 위치로 보아도 된다. 즉, 동일한 초점면에 있는 화상으로부터 잘라내진 부분 화상끼리의 특징량은, 잘라낸 위치에 의존하지 않고 상 관이 크게 되도록 된다. 한편으로, 상이한 초점면에 있는 화상으로부터 잘라내진 부분 화상끼리의 특징량은, 상 관이 작게 되도록 된다. 이와 같이 기계 학습됨으로써, 특징량 출력 모델로부터 출력되는 특징량은, 초점 위치 에 따른 특징을 반영한 것이 된다. 구체적으로는, 2개의 학습용 화상의 초점 위치가 서로 동일한 초점 위치인 경우, 특징량 출력 모델 생성부 는, 이하의 loss＿xy를 손실 함수로서 기계 학습을 행한다. [수 1]"}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "여기서, i(0~n)는 특징량의 백터 요소를 나타내는 서픽스(첨자)이다. 특징량의 벡터의 채널수(차원수)는 n+1이 다. Ft0~Ftn는 학습 대상의 특징량 출력 모델로부터 출력되는 특징량의 벡터의 각 요소값이다. Fc0~Fcn는 비교 대상의 특징량 출력 모델로부터 출력되는 특징량의 벡터의 각 요소값이다. SDi는 각 특징량의 요소 i에 대 한 표준 편차이다. 상기와 같이 차분을 표준 편차로 나눠 errori를 산출함으로써, 채널마다의 차분의 편차를 같 게 한다. 손출은 각 채널의 오차의 평균(의 양의 제곱근)이다. 2개의 학습용 화상의 초점 위치가 서로 상이한 초점 위치인 경우, 특징량 출력 모델 생성부는 이하의 loss＿z를 손실 함수로서 기계 학습을 행한다. [수 2]"}
{"patent_id": "10-2023-7041660", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "즉, 이 경우의 손출 함수는 2개의 학습용 화상의 초점 위치가 서로 동일한 초점 위치일 경우의 손실 함수의 역수이다. 손실 함수에 기초하는 학습 자체, 즉 특징량 출력 모델의 파라미터 갱신은, 종래와 마찬가지로 행해 지면 된다. 또한, 손출 함수는 반드시 상기일 필요는 없으며, 상술한 기준을 따른 것이면 된다. 특징량 출력 모델 생성부는 학습용 화상 세트의 선택과 기계 학습을 반복하여 행하여 특징량 출력 모델 을 생성한다. 예를 들면, 특징량 출력 모델 생성부는 종래와 마찬가지로 특징량 출력 모델의 생성이 미리 설정한 조건에 기초하여 수렴할 때까지, 혹은 미리 설정된 규정 횟수, 상기의 반복을 행하여 특징량 출력 모델 을 생성한다. 특징량 출력 모델 생성부는 기계 학습에서 생성된 기존의 학습 완료 모델을 이용하여 특징량 출력 모델을 생성해도 된다. 기존의 학습 완료 모델로서는, 본 실시 형태에 따른 특징량 출력 모델과 마찬가지로, 화상에 기 초하는 정보를 입력하는 모델이 이용된다. 즉, 본 실시 형태에 따른 특징량 출력 모델과 입력이 공통인 기존의 학습 완료 모델을 이용해도 된다. 기존의 학습 완료 모델은, 예를 들면, 화상 인식을 행하기 위한 모델이며, 구 체적으로는, ResNet, VGG, Mobile Net 등이다. 특징량 출력 모델의 생성에는, 기존의 학습 완료 모델의 일부가 이용된다. 도 5에 나타내는 것처럼, 기존의 학습 완료 모델의 출력측의 층을 삭제하고, 기존의 학습 완료 모델의 중간층까지의 부분을 특징량 출력 모델의 생성에 이용한다. 특징량 출력 모델의 생성에 이용되는 기 존의 학습 완료 모델에는, 중간층의 모두가 포함되어 있어도 되고, 중간층의 일부만이 포함되어 있어도 된 다. 특징량 출력 모델 생성부는 기존의 학습 완료 모델의 상기의 일부를 입력하여, 기계 학습의 개시 시점에서 의 특징량 출력 모델로 한다. 즉, 특징량 출력 모델 생성부는 기존의 학습 완료 모델의 상기의 일부를, 특 징량 출력 모델의 초기 파라미터로서 이용하여 파인 튜닝을 행한다. 또, 학습 완료 모델의 상기의 일부의 출력 측에, 새로운 출력층을 더한 것을 기계 학습의 개시 시점에서의 특징량 출력 모델로 해도 된다. 또, 새로운 출 력층을 더하는 경우, 학습 완료 모델의 상기의 일부의 출력측과 새로운 출력층의 사이에, 새로운 중간층을 더한 것을 기계 학습의 개시 시점에서의 특징량 출력 모델로 해도 된다. 또한, 특징량 출력 모델 생성부는 기존의 학습 완료 모델을 이용하지 않고 특징량 출력 모델을 생성해도 된 다. 예를 들면, 종래의 기계 학습과 마찬가지로 랜덤한 값을 초기 파라미터로 한 모델을 기계 학습의 개시 시점 에서의 특징량 출력 모델로 해도 된다. 기존의 학습 완료 모델을 특징량 출력 모델의 생성에 이용함으로써, 이하의 이점이 있다. 학습 시간을 큰 폭으 로 단축할 수 있다. 적은 학습용 화상으로도 정밀도가 높은 특징량 출력 모델, 즉, 보다 적절한 특징량을 출력할 수 있는 특징량 출력 모델을 생성할 수 있다. 상술한 기존의 학습 완료 모델은, 이미 추상도가 낮은 특 징을 분리하는 능력을 획득하고 있다. 따라서, 새로운 학습용 화상을 이용한 추상도가 높은 특징을 중심으 로 한 학습만 하면 되기 때문이다. 특징량 출력 모델 생성부는 생성한 특징량 출력 모델을 초점 위치 추정 모델 생성부 및 초점 위치 추정 시스템에 출력한다. 또한, 생성한 특징량 출력 모델은 본 실시 형태에서의 용도 이외에 이용되어도 된다. 그 경우, 예를 들면, 특징량 출력 모델 생성부는 특징량 출력 모델을 이용하는 다른 장치 또는 모듈에 특징 량 출력 모델을 송신 또는 출력한다. 혹은, 특징량 출력 모델 생성부는 컴퓨터 또는 그 외의 장치에 생 성한 특징량 출력 모델을 기억시키고, 특징량 출력 모델을 이용하는 다른 장치 또는 모듈에 이용할 수 있도록 해도 된다. 초점 위치 추정 모델 생성부는 학습용 화상 취득부에 의해서 취득된 합초 위치 정보로부터, 기계 학습 에 의해서, 초점 위치 추정 모델을 생성하는 초점 위치 추정 모델 생성 수단이다. 초점 위치 추정 모델은 상술 한 것처럼 특징량 출력 모델 생성부에 의해서 생성되는 특징량 출력 모델로부터 출력되는 특징량을 입력하 여, 해당 특징량에 관한 화상에 대응하는 합초시의 초점 위치를 추정하는 것이다. 초점 위치 추정 모델 생성부는, 이하와 같이 초점 위치 추정 모델을 생성한다. 초점 위치 추정 모델 생성부 는 학습용 화상 취득부로부터 학습용 화상, 및 해당 학습용 화상에 관한 합초 위치 정보를 입 력한다. 초점 위치 추정 모델 생성부는 특징량 출력 모델 생성부로부터 특징량 출력 모델을 입력한다. 초점 위치 추정 모델 생성부는, 학습용 화상에 기초하는 정보를 특징량 출력 모델에 입력하고, 특징량 출력 모델로부터의 출력인 해당 학습용 화상의 특징량을 취득한다. 초점 위치 추정 모델 생성부는 취득 한 특징량을 초점 위치 추정 모델로의 입력으로 하고, 입력한 특징량에 관한 학습용 화상의 합초 위치 정보 에 기초하는 정보를 초점 위치 추정 모델의 출력으로서 기계 학습을 행한다. 합초 위치 정보에 기초하는 정보는 초점 위치 추정 모델의 출력에 대응하는 정보가 된다. 초점 위치 추정 모델이 상술한 후보마다의 값을 출력하는 것이었을 경우, 합초 위치 정보에 기초하는 정보는, 예를 들면, 합초 위치 정보에 해당하는 후보의 값을 1로 하 고, 합초 위치 정보에 해당하지 않는 후보의 값을 0으로 한 후보마다의 값(원 핫 벡터)이다. 초점 위치 추정 모 델이, 상술한 차분 또는 초점 위치 자체의 값을 출력하는 것이었을 경우, 합초 위치 정보에 기초하는 정보는, 합초 위치 정보 자체 또는 합초 위치 정보로부터 산출되는 해당 값이다. 초점 위치 추정 모델 생성부는 기 계 학습을 행하기 전에 초점 위치 추정 모델의 출력에 상당하는 합초 위치 정보에 기초하는 정보를 생성한다. 기계 학습 자체, 즉, 초점 위치 추정 모델의 파라미터의 갱신은, 종래와 마찬가지로 행해지면 된다. 초점 위치 추정 모델 생성부는 종래와 마찬가지로 초점 위치 추정 모델의 생성이 미리 설정한 조건에 기초하여 수렴할 때까지, 혹은 미리 설정된 규정 횟수, 기계 학습의 처리의 반복을 행하여 초점 위치 추정 모델을 생성한다. 초점 위치 추정 모델 생성부는 생성한 초점 위치 추정 모델을 초점 위치 추정 시스템에 출력한다. 또한, 생성한 초점 위치 추정 모델은 본 실시 형태에서의 용도 이외에 이용되어도 된다. 그 경우, 예를 들면, 초점 위치 추정 모델 생성부는 초점 위치 추정 모델을 이용하는 다른 장치 또는 모듈에 초점 위치 추정 모 델을 송신 또는 출력한다. 혹은, 초점 위치 추정 모델 생성부는 컴퓨터 또는 그 외의 장치에 생성한 초 점 위치 추정 모델을 기억시키고, 초점 위치 추정 모델을 이용하는 다른 장치 또는 모듈에 이용할 수 있도록 해 도 된다. 이상이, 특징량 출력 모델 생성 시스템의 기능이다. 이어서, 본 실시 형태에 따른 초점 위치 추정 시스템의 기능을 설명한다. 도 1에 나타내는 것처럼 초점 위 치 추정 시스템은, 추정 대상 화상 취득부와, 초점 위치 추정부와, 제어부를 구비하여 구성된다. 초점 위치 추정 시스템은 검사 장치 또는 관찰 장치에서 촬상 대상물의 촬상이 행해질 때 합초시의 초점 위치를 추정한다. 이 추정은, 먼저, 검사 장치 또는 관찰 장치에서 촬상 대상물의 촬상(합초용의 촬상)이 행해진다. 이 촬상에서는, 초점 위치는 반드시 촬상 대상물에 초점이 맞은 것, 즉, 합초시의 초점 위치 일 필요는 없다. 따라서, 이 촬상에서 얻어지는 화상은 디포커스 화상이어도 된다. 예를 들면 이 화상은, 도 6 의 (a)에 나타내는 것 같은 디포커스 화상이어도 된다. 도 6은 반도체 디바이스의 화상이다. 도 6의 (a)에 나타 내는 디포커스 화상은, 촬상시의 초점 위치가 합초시의 초점 위치로부터 ＋5nm인 경우의 화상이다. 초점 위치 추정 시스템은 이 화상으로부터 합초시의 초점 위치를 추정한다. 추정된 합초시의 초점 위치를 이용하여, 검사 장치 또는 관찰 장치에서 촬상이 행해짐으로써, 촬상 대상물에 초점이 맞은 화상, 즉, 포커스 화상을 얻을 수 있다. 예를 들면 도 6의 (b)에 나타내는 것 같은 포커스 화상이 얻어진다. 도 6의 (b)에 나타내는 포커스 화상은, 도 6의 (a)의 디포커스 화상에 대응하는 것이다. 추정 대상 화상 취득부는 추정 대상 화상을 취득하는 추정 대상 화상 취득 수단이다. 추정 대상 화상은 초 점 위치 추정 시스템에 있어서 합초시의 초점 위치의 추정에 이용되는 화상이다. 또, 추정 대상 화상은 특 징량 출력 모델로의 입력에 이용되는 화상이다. 즉, 추정 대상 화상은, 상술한 학습용 화상에 대응한다. 추정 대상 화상 취득부는 검사 장치 또는 관찰 장치에 의해서 촬상된 화상을 취득한다. 이 때의 검 사 장치 또는 관찰 장치에 의한 촬상은, 상기의 합초용의 촬상이다. 예를 들면, 추정 대상 화상 취득부 는 취득한 화상으로부터 부분 화상을 잘라내어 추정 대상 화상으로 한다. 추정 대상 화상 취득부는 특징량 출력 모델의 입력에 이용되는, 미리 설정된 사이즈의 부분 화상인 추정 대 상 화상을 취득한 화상으로부터 잘라낸다. 화상에 있어서의, 추정 대상 화상이 잘라내지는 위치는, 촬상 대상물 이 찍혀 있는 부분이다. 화상에 있어서의 추정 대상 화상이 잘라내지는 위치는, 미리 설정되어 있어도 된다. 또, 화상에 대해서 화상 인식을 행하여 촬상 대상물이 찍혀 있다고 추정되는 위치를 추정 대상 화상이 잘라내지 는 위치로 해도 된다. 특징량 출력 모델로의 입력에 이용되는 화상이, 검사 장치 또는 관찰 장치에 의해서 촬상되는 화상의 사이즈인 경우, 추정 대상 화상 취득부는, 검사 장치 또는 관찰 장치에 의해서 촬상된 화상 자체를 추정 대상 화상으로 해도 된다. 또, 추정 대상 화상의 타입은, 상술한 학습용 화상과 마찬가지의 타입이다. 예를 들면, 추정 대상 화상은, 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상일 수 있다. 또, 추정 대 상 화상은 특정 파장의 광(예를 들면, 검사에 이용하는 특정 파장의 광)을 촬상 대상물에 조사했을 때의 화상이 어도 된다. 추정 대상 화상 취득부는 취득한 복수의 추정 대상 화상을 초점 위치 추정부에 출력한다. 초점 위치 추정부는 특징량 출력 모델을 이용하여, 추정 대상 화상 취득부에 의해서 취득된 추정 대상 화상으로부터 추정 대상 화상의 특징량을 출력하고, 출력된 특징량으로부터 추정 대상 화상에 대응하는 합초시 의 초점 위치를 추정하는 초점 위치 추정 수단이다. 초점 위치 추정부는 초점 위치 추정 모델을 이용하여, 특징량 출력 모델로부터 출력되는 특징량으로부터 추정 대상 화상에 대응하는 합초시의 초점 위치를 추정해도 된다. 초점 위치 추정부는 특징량 출력 모델 생성 시스템에 의해서 생성된 특징량 출력 모델 및 초점 위치 추 정 모델을 입력하여 기억해 두고, 추정에 이용한다. 초점 위치 추정부는 추정 대상 화상 취득부로부터 추정 대상 화상을 입력한다. 초점 위치 추정부는 추정 대상 화상에 기초하는 정보를 특징량 출력 모델로 입력하고, 특징량 출력 모델로 부터의 출력인 추정 대상 화상의 특징량을 취득한다. 초점 위치 추정부는 취득한 특징량을 초점 위치 추정 모델로 입력하고, 초점 위치 추정 모델로부터의 출력인, 추정 대상 화상에 대응하는 합초시의 초점 위치를 나타 내는 정보를 해당 초점 위치의 추정 결과로서 취득한다. 초점 위치 추정부는 취득한 추정 대상 화상에 대응 하는 합초시의 초점 위치를 나타내는 정보를 제어부에 출력한다. 제어부는 초점 위치 추정부에 의해 추정된 초점 위치에 기초하여, 촬상 대상물의 촬상시의 초점 위치를 제어하는 제어 수단이다. 제어부는 초점 위치 추정부로부터, 추정 대상 화상에 대응하는 합초시의 초점위치를 나타내는 정보를 입력한다. 제어부는, 검사 장치 또는 관찰 장치에 대해서, 촬상할 때의 초 점 위치가, 입력한 정보에 의해서 나타내지는 합초시의 초점 위치가 되도록 제어한다. 제어를 받은 검사 장치 또는 관찰 장치는, 예를 들면, 스테이지를 동작시켜 촬상할 때의 초점 위치를 조정한다. 이것에 의해서, 검사 장치 또는 관찰 장치에 의해서 촬상되는 화상은 포커스 화상이 된다. 이와 같이 제어부 는, 검사 장치 또는 관찰 장치에 있어서의 오토 포커스의 제어를 행한다. 이상이, 초점 위치 추정 시스템의 구성이다. 이어서, 도 7 및 도 8의 순서도를 이용하여, 본 실시 형태에 따른 컴퓨터에서 실행되는 처리(컴퓨터가 행하는 동작 방법)를 설명한다. 먼저, 도 7의 순서도를 이용하여, 특징량 출력 모델 및 초점 위치 추정 모델을 생성할 때 실행되는 처리, 즉, 본 실시 형태에 따른 특징량 출력 모델 생성 시스템에서 실행되는 처리인 특 징량 출력 모델 생성 방법을 설명한다. 본 처리에서는, 먼저, 학습용 화상 취득부에 의해서, 촬상시의 초점 위치에 관한 초점 위치 정보가 대응지 어진 복수의 학습용 화상이 취득된다(S01, 학습용 화상 취득 스텝). 또, 학습용 화상 취득부에 의해서, 학 습용 화상 각각에 대응하는 합초시의 초점 위치에 관한 합초 위치 정보가 취득된다. 이어서, 특징량 출력 모델 생성부에 의해서, 학습용 화상으로부터 기계 학습에 의해서 특징량 출력 모델이 생성된다(S02, 특징량 출력 모델 생성 스텝). 이 때, 서로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습 용 화상의 특징량이 비교되고, 비교 결과에 기초하여 기계 학습이 행해진다. 이어서, 초점 위치 추정 모델 생성부에 의해서, 합초 위치 정보로부터, 기계 학습에 의해서, 초점 위치 추정 모델이 생성된다(S03, 초점 위치 추정 모델 생성 스텝). 생성된 특징량 출력 모델 및 초점 위치 추정 모델은, 특징량 출력 모델 생성 시스템으로부터 초점 위치 추 정 시스템에 출력된다. 초점 위치 추정 시스템에서는, 특징량 출력 모델 및 초점 위치 추정 모델이 기 억되어, 이하의 처리에서 이용된다. 이상이, 본 실시 형태에 따른 특징량 출력 모델 생성 시스템에서 실행 되는 처리인 특징량 출력 모델 생성 방법이다. 이어서, 도 8의 순서도를 이용하여, 추정 대상 화상에 대응하는 합초시의 초점 위치를 추정할 때에 실행되는 처 리, 즉, 본 실시 형태에 따른 초점 위치 추정 시스템에서 실행되는 처리인 초점 위치 추정 방법을 설명한다. 본 처리에서는, 먼저, 추정 대상 화상 취득부에 의해서, 추정 대상 화상이 취득된다(S11, 추정 대상 화상 취득 스텝). 추정 대상 화상은, 검사 장치 또는 관찰 장치의 합초용의 촬상에 의해서 얻어진 화상에 기 초하는 것이다. 이어서, 초점 위치 추정부에 의해서, 특징량 출력 모델이 이용되어, 추정 대상 화상으로부 터 추정 대상 화상의 특징량이 출력된다. 이어서, 초점 위치 추정부에 의해서, 초점 위치 추정 모델이 이용 되어, 추정 대상 화상의 특징량으로부터 추정 대상 화상에 대응하는 합초시의 초점 위치가 추정된다(S12, 초점 위치 추정 스텝). 이어서, 제어부에 의해서, 추정된 상기의 초점 위치에 기초하여, 검사 장치 또는 관찰 장치에 의한 촬상 대상물의 새로운 촬상시의 초점 위치가 제어된다(S13, 제어 스텝). 이것에 의해서, 검사 장치 또는 관 찰 장치에 의해서 촬상되는 화상은 포커스 화상이 된다. 이상이, 본 실시 형태에 따른 초점 위치 추정 시스 템에서 실행되는 처리인 초점 위치 추정 방법이다. 본 실시 형태에서는, 기계 학습에 의해서, 화상의 특징량을 출력하는 특징량 출력 모델이 생성된다. 이 때, 서 로 상이한 2개의 학습용 화상에 대응지어진 초점 위치 정보에 따라 해당 2개의 학습용 화상의 특징량이 비교되 고, 기계 학습은 비교 결과에 기초하여 행해진다. 해당 생성에 의하면, 예를 들면, 화상에 기초하는 정보를 입 력하는 기존의 학습 완료 모델을 이용함으로써, 단시간에 특징량 출력 모델을 생성할 수 있다. 즉, 본 실시 형 태에 의하면, 초점 위치의 추정 등의 화상에 기초하는 추정에 이용하는 학습 완료 모델인 특징량 출력 모델을 단시간의 학습으로 생성 가능하게 할 수 있다. 단, 상술한 것처럼 특징량 출력 모델의 생성에는, 반드시 기존의 학습 완료 모델이 이용될 필요는 없다. 그 경 우에도, 초점 위치에 따른 적절한 특징량을 출력할 수 있는 특징량 출력 모델을 생성할 수 있다. 또, 상술한 것처럼, 특징량 출력 모델 생성을 위한 기계 학습은, 서로 상이한 2개의 학습용 화상이 서로 동일한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 작아지도록, 또한, 서로 상이한 2개의 학습용 화상이 서로 상이한 초점 위치에 관한 것인 경우, 해당 2개의 학습용 화상의 특징량의 차분이 커지도록 행해져도 된다. 이 구성에 의하면, 확실하고 또한 적절하게 특징량 출력 모델을 생성할 수 있다. 단, 기계 학습은, 반드시 상기와 같이 행해질 필요는 없고, 2개의 학습용 화상의 특징량의 비교 결과에 기초하여 행해지면 된 다. 또, 상술한 것처럼, 학습용 화상 및 추정 대상 화상은, 촬상 대상물로부터의 방사를 검출한 화상, 촬상 대상물 에 광을 조사했을 때의 촬상 대상물로부터의 광을 검출한 화상, 또는 촬상 대상물에 광을 조사했을 때의 촬상 대상물의 전기 특성을 검출한 화상이어도 된다. 나아가, 학습용 화상 및 추정 대상 화상은, 특정 파장의 광을 촬상 대상물에 조사했을 때의 화상이어도 된다. 이러한 구성에 의하면, 이용되는 화상에 종류에 따른 적절한 특 징량 출력 모델의 생성, 및 특징량 출력 모델의 이용을 행할 수 있다. 단, 학습용 화상 및 추정 대상 화상은, 상기의 것으로 한정되지 않고, 초점 위치에 따른 화상이면 된다. 또, 본 실시 형태와 같이, 특징량 출력 모델 생성 시스템은 초점 위치 추정 모델을 생성하는 초점 위치 추 정 모델 생성부를 더 구비하고 있어도 된다. 이 구성에 의하면, 화상으로부터 합초시의 초점 위치를 추정하 는 초점 위치 추정 모델을 생성할 수 있다. 즉, 이 구성에 의하면, 특징량 출력 모델과 함께, 화상에 기초하는 초점 위치의 추정에 이용하는 학습 완료 모델을 단시간의 학습으로 생성 가능하게 할 수 있다. 단, 특징량 출력 모델 생성 시스템은 초점 위치 추정 모델 생성부를 구비하고 있지 않아도 된다. 즉, 특징량 출력 모델 생성 시스템은 특징량 출력 모델만을 생성하는 구성이어도 된다. 또, 생성되는 특징량 출 력 모델은, 합초시의 초점 위치의 추정 이외의 용도에 이용되어도 된다. 본 실시 형태에 따른 초점 위치 추정 시스템에서는, 합초시의 초점 위치의 추정에 상술한 특징량 출력 모델 이 이용된다. 따라서, 본 실시 형태에 의하면, 화상에 기초하는 합초시의 초점 위치의 추정을 단시간의 준비 시 간으로 행할 수 있다. 또, 본 실시 형태에 따른 초점 위치 추정 시스템에 의하면, 1회의 합초용의 촬상에 의해서 합초시의 초점 위치를 추정할 수 있다. 그 때문에, 초점 위치를 바꾸면서 복수 회의 촬상을 행해 합초시 의 초점 위치를 탐색하는 경우와 비교해서, 신속하게 합초시의 초점 위치를 추정할 수 있다. 또, 합초시의 초점 위치의 추정에는, 상술한 초점 위치 추정 모델이 이용되어도 된다. 이 구성에 의하면, 확실 하고 또한 적절하게 합초시의 초점 위치를 추정할 수 있다. 단, 합초시의 초점 위치의 추정에는, 상술한 초점 위치 추정 모델이 이용될 필요는 없고, 특징량 출력 모델로부터 출력되는 특징량으로부터 추정이 행해지면 된다. 또, 본 실시 형태와 같이, 초점 위치 추정 시스템은, 추정된 초점 위치에 기초하여, 검사 장치 또는 관 찰 장치에 있어서의 촬상 대상물의 촬상시의 초점 위치를 제어하는 제어부를 더 구비하고 있어도 된다. 이 구성에 의하면, 검사 장치 또는 관찰 장치에 있어서 초점이 맞은 촬상 대상물의 촬상을 행할 수 있 다. 단, 초점 위치 추정 시스템은 제어부를 구비하고 있지 않아도 된다. 즉, 초점 위치 추정 시스템 은 합초시의 초점 위치를 추정하는 것이면 된다. 또, 본 실시 형태에 따른 초점 위치 추정 시스템과, 상술한 검사 장치 또는 관찰 장치를 포함하여 일련의 시스템으로서 구성할 수 있다. 즉, 본 실시 형태에 따른 반도체 검사 시스템은, 초점 위치 추정 시스템 과, 검사 장치를 포함하는 시스템으로 해도 된다. 또, 본 실시 형태에 따른 생체 관찰 시스템은 초점 위치 추정 시스템과, 관찰 장치를 포함하는 시스템으로 해도 된다. 초점 위치 추정 시스템에 의한 합초시의 초점 위치의 추정은, 검사 장치 또는 관찰 장치에 촬상된 화상에 대한 복수의 위치에 대해서 행해져도 된다. 그 경우, 추정 대상 화상 취득부는 검사 장치 또는 관찰 장치에 촬상된 화상의 복수의 위치 각각으로부터, 복수의 추정 대상 화상을 잘라내어 취득한다. 예를 들면, 추정 대상 화상 취득부는 화상의 촬상 대상물이 찍힌 복수의 부분으로부터 추정 대상 화상을 잘라낸 다. 초점 위치 추정부는 복수의 추정 대상 화상 각각에 대해 합초시의 초점 위치를 추정한다. 예를 들면, 초점 위치 추정부는 위치마다의 합초시의 초점 위치를 나타내는 포커스 맵을 생성해도 된다. 제어부는 위치마다의 합초시의 초점 위치에 기초하여, 검사 장치 또는 관찰 장치에 있어서, 위치마다 초점 위치 가 조정되어 촬상이 행해지도록 제어해도 된다. 도 9에 위치마다 추정된 합초시의 초점 위치(포커스 맵)를 나타낸다. 도 9의 (a)는 촬상 방향(Z축 방향)과 수직 인 면(XY평면)에서의, 촬상 대상물의 위치마다의 합초시의 초점 위치를 나타낸다. 도 9의 (b)는 촬상 방향 (Z축 방향)을 측면(Y축)에서 본 면(XZ평면)에서의, 촬상 대상물의 위치마다의 합초시의 초점 위치를 나타낸 다. 도 9에 있어서의 각 값은, 추정 대상 화상의 촬상시의 초점 위치와, 합초시의 초점 위치의 차분을 나타낸다. μLED가 깔린 웨이퍼를 검사하는 경우, 예를 들면, 웨이퍼의 중심에서 초점 위치의 위치 맞춤을 행해도, 웨이퍼 의 변에 가까운 부분에서는 흐릿함이 생겨 버린다. 그 때문에, 상기와 같이 포커스 맵을 생성하여 제어함으로써, 위치마다 적절히 검사에 이용할 수 있는 화상을 촬상할 수 있다. 또한, 촬상 대상이 상기와 같은 반도체 디바이스 이외, 예를 들면, 생체 샘플 등에 대해서도 상기의 구성을 취하도록 해도 된다. 또한, 본 실시 형태에서는, 컴퓨터는 특징량 출력 모델 생성 시스템과, 초점 위치 추정 시스템을 포함하는 것으로 했지만, 특징량 출력 모델 생성 시스템과, 초점 위치 추정 시스템이 독립적으로 각각 실시되어도 된다. 이어서, 상술한 일련의 특징량 출력 모델 생성 시스템 및 초점 위치 추정 시스템에 의한 처리를 실행시 키기 위한 특징량 출력 모델 생성 프로그램 및 초점 위치 추정 프로그램을 설명한다. 도 10에 나타내는 것처럼, 특징량 출력 모델 생성 프로그램은, 컴퓨터에 삽입되어 액세스되는, 혹은 컴퓨터가 구비하는, 컴퓨터 판독 가능한 기록 매체에 형성된 프로그램 격납 영역 내에 격납된다. 기록 매체는 비일시적인 기록 매 체여도 된다. 특징량 출력 모델 생성 프로그램은 학습용 화상 취득 모듈과, 특징량 출력 모델 생성 모듈과, 초점 위치 추정 모델 생성 모듈을 구비하여 구성된다. 학습용 화상 취득 모듈과, 특징량 출력 모델 생성 모듈과, 초점 위치 추정 모델 생성 모듈을 실행시킴으로써 실현되는 기능은, 상술한 특징량 출 력 모델 생성 시스템의 학습용 화상 취득부와, 특징량 출력 모델 생성부와, 초점 위치 추정 모델 생성부의 기능과 각각 마찬가지이다. 도 11에 나타내는 것처럼, 초점 위치 추정 프로그램은 컴퓨터에 삽입되어 액세스되는, 혹은 컴퓨터가 구비 하는, 컴퓨터 판독 가능한 기록 매체에 형성된 프로그램 격납 영역 내에 격납된다. 기록 매체는 비일시적인 기록 매체여도 된다. 또한, 기록 매체는 기록 매체와 동일해도 된다. 초점 위치 추정 프로그램은 추정 대상 화상 취득 모듈과, 초점 위치 추정 모듈과, 제어 모듈 을 구비하여 구성된다. 초점 위치 추정 모듈과, 제어 모듈을 실행시킴으로써 실현되는 기능은, 상술한 초점 위치 추정 시스템의 추정 대상 화상 취득부와, 초점 위치 추정부와, 제어부의 기 능과 각각 마찬가지이다. 또한, 특징량 출력 모델 생성 프로그램 및 초점 위치 추정 프로그램은, 그 일부 또는 전부가, 통신 회선 등의 전송 매체를 통해서 전송되고, 다른 기기에 의해 수신되어 기록(인스톨을 포함함)되는 구성으로 해도 된다. 또, 특징량 출력 모델 생성 프로그램 및 초점 위치 추정 프로그램의 각 모듈은, 1개의 컴퓨터 가 아니고, 복수의 컴퓨터 중 어느 것에 인스톨되어도 된다. 그 경우, 해당 복수의 컴퓨터에 의한 컴퓨터 시스 템에 의해 상술한 일련의 처리가 행해진다."}
{"patent_id": "10-2023-7041660", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 실시 형태에 따른 특징량 출력 모델 생성 시스템 및 초점 위치 추정 시스템의 구성을 나타내 는 도면이다. 도 2는 검사 장치의 일부의 구성의 예를 나타내는 도면이다. 도 3은 초점 위치마다의 촬상되는 화상의 예이다. 도 4는 기계 학습에 의한 특징량 출력 모델의 생성을 설명하기 위한 도면이다. 도 5는 특징량 출력 모델의 생성의 생성에 이용되는 기존의 학습 완료 모델을 나타내는 도면이다. 도 6은 디포커스 화상 및 포커스 화상의 예를 나타내는 도면이다. 도 7은 본 발명의 실시 형태에 따른 특징량 출력 모델 생성 시스템에서 실행되는 처리인 특징량 출력 모델 생성 방법을 나타내는 순서도이다. 도 8은 본 발명의 실시 형태에 따른 초점 위치 추정 시스템에서 실행되는 처리인 초점 위치 추정 방법을 나타내 는 순서도이다. 도 9는 생성되는 포커스 맵을 모식적으로 나타내는 도면이다. 도 10은 본 발명의 실시 형태에 따른 특징량 출력 모델 생성 프로그램의 구성을, 기록 매체와 함께 나타내는 도 면이다. 도 11은 본 발명의 실시 형태에 따른 초점 위치 추정 프로그램의 구성을, 기록 매체와 함께 나타내는 도면이다."}
