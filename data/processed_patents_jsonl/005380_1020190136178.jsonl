{"patent_id": "10-2019-0136178", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0051207", "출원번호": "10-2019-0136178", "발명의 명칭": "종단 간 통신에 보안을 제공하기 위한 장치 및 방법", "출원인": "주식회사 케이티", "발명자": "김형주"}}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "정책 관리 장치와 연동하여 제 1 종단 통신 장치 및 제 2 종단 통신 장치 간 통신에 보안을 제공하는 보안 장치에 있어서,IP 주소와, 서브 ID 및 마스터 ID의 매핑 정보를 저장하는 저장부; 상기 제 1 종단 통신 장치로부터, 상기 제 2 종단 통신 장치로 향하는 제 1 패킷을 수신하는 수신부;상기 제 1 패킷의 목적지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터 ID를 수신하며, 상기 제 1 패킷의 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하는 ID 확인부;상기 목적지 IP 주소에 대응하는 마스터 ID와, 상기 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하는 정책 조회부; 상기 승인 응답의 수신에 따라 상기 제 1 패킷을 상기 제 2 종단 통신 장치 측으로 전송하는 전송부; 및세션 유지 패킷을 생성하여 상기 제 2 종단 통신 장치 측으로 전송하는 세션 유지부를 포함하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,상기 세션 유지부는,상기 제 2 종단 통신 장치 측에서 상기 세션 유지 패킷을 세션 유지를 위한 패킷으로 판단하고 삭제하도록 상기세션 유지 패킷의 헤더에 특정 플래그를 포함시키는 것을 특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고,하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며,상기 복수의 제 1 종단 통신 장치 각각에 서로 다른 상기 서브 ID가 할당되고,상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 하위에 설치되는 것을특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 1 항에 있어서,복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고,하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며,상기 복수의 제 1 종단 통신 장치 각각에 동일한 서브 ID가 할당되고,상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 상위에 설치되는 것을특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 1 항에 있어서,상기 수신부는, 상기 제 2 종단 통신 장치 측으로부터 상기 제 1 종단 통신 장치로 향하는 제 2 패킷을 수신하공개특허 10-2021-0051207-3-고,상기 ID 확인부는, 상기 제 2 패킷의 출발지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터ID를 수신하며, 상기 제 2 패킷의 목적지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하고,상기 정책 조회부는, 상기 제 2 패킷의 출발지 IP 주소에 대응하는 마스터 ID와, 상기 제 2 패킷의 목적지 IP주소에 대응하는 서브 ID 및 마스터 ID를 상기 정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하며,상기 전송부는, 상기 제 2 패킷을 상기 제 1 종단 통신 장치로 전송하는 것을 특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 1 항에 있어서,상기 정책 조회부는, 상기 승인 응답에 토큰 시드를 포함하여 수신하고, 상기 토큰 시드를 이용하여 토큰을 생성하며, 상기 제 1 패킷에 상기 토큰을 삽입하는 것을 특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 6 항에 있어서,상기 정책 조회부는,넌스(Nonce), 상기 제 1 패킷의 페이로드, 타임스탬프, 상기 서브 ID, 상기 토큰 시드를 이용하여 토큰을 생성하는 것을 특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 1 항에 있어서,상기 정책 관리 장치는, 정책 정보로서, 서로 통신이 허용된 각 종단 통신 장치의 서브 ID 및 마스터 ID마다 타 종단 통신 장치의 마스터 ID의 매핑 정보를 저장하고, 그 정책 정보를 기초로 상기 승인 응답을 회신하며,IP 주소 정보로서, 마스터 ID 및 IP 주소의 매핑 정보를 저장하고, 그 IP 주소 정보를 기초로 상기 ID 확인부로부터 수신되는 IP 주소에 대응하는 마스터 ID를 상기 ID 확인부로 회신하는 것을 특징으로 하는 보안 장치."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "보안 장치에서 정책 관리 장치와 연동하여 제 1 종단 통신 장치 및 제 2 종단 통신 장치 간 통신에 보안을 제공하는 방법으로서,IP 주소와, 서브 ID 및 마스터 ID의 매핑 정보를 저장하는 단계; 상기 제 1 종단 통신 장치로부터, 상기 제 2 종단 통신 장치로 향하는 제 1 패킷을 수신하는 단계;상기 제 1 패킷의 목적지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터 ID를 수신하며, 상기 제 1 패킷의 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하는 단계;상기 목적지 IP 주소에 대응하는 마스터 ID와, 상기 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하는 단계; 상기 승인 응답의 수신에 따라 상기 제 1 패킷을 상기 제 2 종단 통신 장치 측으로 전송하는 단계; 및세션 유지 패킷을 생성하여 상기 제 2 종단 통신 장치 측으로 전송하는 단계를 포함하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 9 항에 있어서,공개특허 10-2021-0051207-4-상기 세션 유지 패킷을 생성하여 상기 제 2 종단 통신 장치 측으로 전송하는 단계는,상기 제 2 종단 통신 장치 측에서 상기 세션 유지 패킷을 세션 유지를 위한 패킷으로 판단하고 삭제하도록 상기세션 유지 패킷의 헤더에 특정 플래그를 포함시키는 것을 특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제 9 항에 있어서,복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고,하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며,상기 복수의 제 1 종단 통신 장치 각각에 서로 다른 상기 서브 ID가 할당되고,상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 하위에 설치되는 것을특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제 9 항에 있어서,복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고,하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며,상기 복수의 제 1 종단 통신 장치 각각에 동일한 서브 ID가 할당되고,상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 상위에 설치되는 것을특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제 9 항에 있어서,상기 제 2 종단 통신 장치 측으로부터 상기 제 1 종단 통신 장치로 향하는 제 2 패킷을 수신하는 단계;상기 제 2 패킷의 출발지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터 ID를 수신하며, 상기 제 2 패킷의 목적지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하는 단계;상기 제 2 패킷의 상기 출발지 IP 주소에 대응하는 마스터 ID와, 상기 제 2 패킷의 목적지 IP 주소에 대응하는서브 ID 및 마스터 ID를 상기 정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하는 단계; 및상기 제 2 패킷을 상기 제 1 종단 통신 장치로 전송하는 단계를 더 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제 9 항에 있어서,상기 승인 응답에 포함된 토큰 시드를 이용하여 토큰을 생성하며, 상기 제 1 패킷에 상기 토큰을 삽입하는 단계를 더 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제 14 항에 있어서,상기 토큰을 삽입하는 단계는,넌스(Nonce), 상기 제 1 패킷의 페이로드, 타임스탬프, 상기 서브 ID, 상기 토큰 시드를 이용하여 토큰을 생성하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제 9 항에 있어서,공개특허 10-2021-0051207-5-상기 정책 관리 장치는, 정책 정보로서, 서로 통신이 허용된 각 종단 통신 장치의 서브 ID 및 마스터 ID마다 타 종단 통신 장치의 마스터 ID의 매핑 정보를 저장하고, 그 정책 정보를 기초로 상기 승인 응답을 회신하며,IP 주소 정보로서, 마스터 ID 및 IP 주소의 매핑 정보를 저장하고, 그 IP 주소 정보를 기초로 상기 보안 장치로부터 수신되는 IP 주소에 대응하는 마스터 ID를 상기 보안 장치로 회신하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "일 실시예에 따른 정책 관리 장치와 연동하여 제 1 종단 통신 장치 및 제 2 종단 통신 장치 간 통신에 보안을 제 공하는 보안 장치는, IP 주소와, 서브 ID 및 마스터 ID의 매핑 정보를 저장하는 저장부; 상기 제 1 종단 통신 장 치로부터, 상기 제 2 종단 통신 장치로 향하는 제 1 패킷을 수신하는 수신부; 상기 제 1 패킷의 목적지 IP 주소 (뒷면에 계속)"}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 IoT(Internet of Things) 기술에 관한 것으로서, 보다 구체적으로 IoT 단말과 IoT 서비스 서버 등과 같은 종단 통신 장치 간의 통신에 보안을 제공하기 위한 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "인터넷은 인간이 정보를 생성하고 소비하는 인간 중심의 네트워크에서, 사물 등 분산된 구성 요소들 간에 정보 를 주고받아 처리하는 IoT(Internet of Things, 사물인터넷) 네트워크로 진화하고 있다. IoT(Internet of Things)란, 통신 가능한 모든 사물들을 네트워크에 연결하여 상호 통신 수행이 가능한 개념을 의미한다. 시스템 적으로 인지할 수 있는 모든 객체인 Things는 근거리 및 원거리 통신 기능을 탑재하고, 센서 등을 통해 데이터 를 생산할 수 있다. IoT를 구현하기 위해서, 센싱 기술, 유무선 통신 및 네트워크 인프라, 서비스 인터페이스 기술 및 보안 기술과 같은 기술 요소들이 요구된다. 최근에는 사물 간의 연결을 위한 센서 네트워크(sensor network), 사물 통신(Machine to Machine, M2M), MTC(Machine Type Communication)등의 기술이 연구되고 있다. 이러한 IoT 서비스는 퍼블릭 네트워크(Public Network) 환경에서 제공된다. 즉 누구나 언제든지 IoT 네트워크에 접속할 수 있다. 이와 같이 IoT 서비스는 퍼블릭 네트워크 환경에서 제공되기 때문에 IoT 디바이스(IoT 단말이 나 IoT 서비스 서버)는 퍼블릭 네트워크에 노출되어 보안이 취약할 수 있다."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 상술한 문제점을 해결하기 위해 제안된 것으로, IoT 단말과 IoT 서비스 서버 등과 같은 종단 통신 장 치 간의 통신에서 식별자(ID : Identifier) 기반의 정책을 기초로 보안을 제공하기 위한 장치 및 방법을 제공하 는 데 목적이 있다."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "일 실시예에 따른 정책 관리 장치와 연동하여 제 1 종단 통신 장치 및 제 2 종단 통신 장치 간 통신에 보안을 제공하는 보안 장치는, IP 주소와, 서브 ID 및 마스터 ID의 매핑 정보를 저장하는 저장부; 상기 제 1 종단 통신 장치로부터, 상기 제 2 종단 통신 장치로 향하는 제 1 패킷을 수신하는 수신부; 상기 제 1 패킷의 목적지 IP 주 소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터 ID를 수신하며, 상기 제 1 패킷의 출발지 IP 주소 에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하는 ID 확인부; 상기 목적지 IP 주소에 대응하는 마 스터 ID와, 상기 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하는 정책 조회부; 상기 승인 응답의 수신에 따라 상기 제 1 패킷을 상기 제 2 종단 통신 장치 측으로 전송하는 전송부; 및 세션 유지 패킷을 생성하여 상기 제 2 종단 통신 장치 측으로 전송하는 세션 유지부를 포함한다. 상기 세션 유지부는, 상기 제 2 종단 통신 장치 측에서 상기 세션 유지 패킷을 세션 유지를 위한 패킷으로 판단 하고 삭제하도록 상기 세션 유지 패킷의 헤더에 특정 플래그를 포함시킬 수 있다. 상기 세션 유지부는, 상기 세션 유지 패킷의 헤더에 특정 플래그가 포함되어 있는 경우 세션 유지 패킷으로 판 단한 후 삭제할 수 있다. 복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고, 하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며, 상기 복수의 제 1 종단 통신 장치 각각에 서로 다른 상기 서브 ID가 할 당되고, 상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 하위에 설치될수 있다. 복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고, 하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며, 상기 복수의 제 1 종단 통신 장치 각각에 동일한 서브 ID가 할당되고, 상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 상위에 설치될 수 있다. 상기 수신부는, 상기 제 2 종단 통신 장치 측으로부터 상기 제 1 종단 통신 장치로 향하는 제 2 패킷을 수신하 고, 상기 ID 확인부는, 상기 제 2 패킷의 출발지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마 스터 ID를 수신하며, 상기 제 2 패킷의 목적지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확 인하고, 상기 정책 조회부는, 상기 제 2 패킷의 출발지 IP 주소에 대응하는 마스터 ID와, 상기 제 2 패킷의 목 적지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 정책 관리 장치로 전송하여 정책을 질의하고 승인 응답 을 수신하며, 상기 전송부는, 상기 제 2 패킷을 상기 제 1 종단 통신 장치로 전송할 수 있다. 상기 정책 조회부는, 상기 승인 응답에 토큰 시드를 포함하여 수신하고, 상기 토큰 시드를 이용하여 토큰을 생 성하며, 상기 제 1 패킷에 상기 토큰을 삽입할 수 있다. 상기 정책 조회부는, 넌스(Nonce), 상기 제 1 패킷의 페이로드, 타임스탬프, 상기 서브 ID, 상기 토큰 시드를 이용하여 토큰을 생성할 수 있다. 상기 정책 관리 장치는, 정책 정보로서, 서로 통신이 허용된 각 종단 통신 장치의 서브 ID 및 마스터 ID마다 타 종단 통신 장치의 마스터 ID의 매핑 정보를 저장하고, 그 정책 정보를 기초로 상기 승인 응답을 회신하며, IP 주소 정보로서, 마스터 ID 및 IP 주소의 매핑 정보를 저장하고, 그 IP 주소 정보를 기초로 상기 ID 확인부로부 터 수신되는 IP 주소에 대응하는 마스터 ID를 상기 ID 확인부로 회신할 수 있다. 일 실시예에 따른 보안 장치에서 정책 관리 장치와 연동하여 제 1 종단 통신 장치 및 제 2 종단 통신 장치 간 통신에 보안을 제공하는 방법은, IP 주소와, 서브 ID 및 마스터 ID의 매핑 정보를 저장하는 단계; 상기 제 1 종 단 통신 장치로부터, 상기 제 2 종단 통신 장치로 향하는 제 1 패킷을 수신하는 단계; 상기 제 1 패킷의 목적지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터 ID를 수신하며, 상기 제 1 패킷의 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하는 단계; 상기 목적지 IP 주소에 대응하는 마 스터 ID와, 상기 출발지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하는 단계; 상기 승인 응답의 수신에 따라 상기 제 1 패킷을 상기 제 2 종단 통신 장 치 측으로 전송하는 단계; 및 세션 유지 패킷을 생성하여 상기 제 2 종단 통신 장치 측으로 전송하는 단계를 포 함한다. 상기 세션 유지 패킷을 생성하여 상기 제 2 종단 통신 장치 측으로 전송하는 단계는, 상기 제 2 종단 통신 장치 측에서 상기 세션 유지 패킷을 세션 유지를 위한 패킷으로 판단하고 삭제하도록 상기 세션 유지 패킷의 헤더에 특정 플래그를 포함시킬 수 있다. 상기 세션 유지 패킷을 수신하는 단계는, 상기 세션 유지 패킷의 헤더에 특정 플래그가 포함되어 있는 경우 세 션 유지 패킷으로 판단한 후 삭제하는 단계를 포함할 수 있다. 복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고, 하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며, 상기 복수의 제 1 종단 통신 장치 각각에 서로 다른 상기 서브 ID가 할 당되고, 상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 하위에 설치할 수 있다. 복수의 상기 제 1 종단 통신 장치들이 하나의 서비스 그룹에 속하고, 하나의 상기 마스터 ID가, 공인 IP 주소가 할당되는 상기 서비스 그룹에 할당되며, 상기 복수의 제 1 종단 통신 장치 각각에 동일한 서브 ID가 할당되고, 상기 보안 장치는, 이동통신 코어망에서 통신 계층상 NAT(Network Address Translation) 상위에 설치될 수 있다. 상기 방법은, 상기 제 2 종단 통신 장치 측으로부터 상기 제 1 종단 통신 장치로 향하는 제 2 패킷을 수신하는 단계; 상기 제 2 패킷의 출발지 IP 주소를 상기 정책 관리 장치로 전송하여 이에 대응하는 마스터 ID를 수신하 며, 상기 제 2 패킷의 목적지 IP 주소에 대응하는 서브 ID 및 마스터 ID를 상기 저장부에서 확인하는 단계; 상 기 제 2 패킷의 상기 출발지 IP 주소에 대응하는 마스터 ID와, 상기 제 2 패킷의 목적지 IP 주소에 대응하는 서 브 ID 및 마스터 ID를 상기 정책 관리 장치로 전송하여 정책을 질의하고 승인 응답을 수신하는 단계; 및 상기제 2 패킷을 상기 제 1 종단 통신 장치로 전송하는 단계를 더 포함할 수 있다. 상기 방법은, 상기 승인 응답에 포함된 토큰 시드를 이용하여 토큰을 생성하며, 상기 제 1 패킷에 상기 토큰을 삽입하는 단계를 더 포함할 수 있다. 상기 토큰을 삽입하는 단계는, 넌스(Nonce), 상기 제 1 패킷의 페이로드, 타임스탬프, 상기 서브 ID, 상기 토큰 시드를 이용하여 토큰을 생성할 수 있다. 상기 정책 관리 장치는, 정책 정보로서, 서로 통신이 허용된 각 종단 통신 장치의 서브 ID 및 마스터 ID마다 타 종단 통신 장치의 마스터 ID의 매핑 정보를 저장하고, 그 정책 정보를 기초로 상기 승인 응답을 회신하며, IP 주소 정보로서, 마스터 ID 및 IP 주소의 매핑 정보를 저장하고, 그 IP 주소 정보를 기초로 상기 보안 장치로부 터 수신되는 IP 주소에 대응하는 마스터 ID를 상기 보안 장치로 회신할 수 있다."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "일 실시예에서, 네트워크 구조에 따라 변동성이 높은 IP 주소 기반의 정책을 탈피하여 식별자(ID : Identifier) 기반 정책을 이용함으로써 퍼블릭 네트워크를 통한 IoT 서비스의 보안을 높인다. 일 실시예에서, 종단 통신 장치에 연결되는 보안 모듈에서 송수신되는 패킷에 토큰을 삽입하고 또는 삽입된 토 큰을 검증함으로써 종단 통신 장치로 악성 패킷이 수신되는 것을 차단하여 종단 통신 장치에 대한 해킹을 차단 할 수 있다. 일 실시예에서, 보안 모듈 간의 세션이 연결된 상태에서 세션이 드롭되는 것을 방지하여 원활한 통신이 가능하 도록 한다."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "상술한 목적, 특징 및 장점은 첨부된 도면과 관련한 다음의 상세한 설명을 통하여 보다 분명해 질 것이며, 그에"}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "따라 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자가 본 발명의 기술적 사상을 용이하게 실시할 수 있 을 것이다. 또한, 본 발명을 설명함에 있어서 본 발명과 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우에 그 상세한 설명을 생략하기로 한다. 이하, 첨부된 도면을 참조하여 본 발명에 따른 바람직한 일 실시예를 상세히 설명하기로 한다. 도 1은 본 발명의 일 실시예에 따른 종단(End-to-End) 간 통신 시스템을 나타낸 도면이다. 도 1을 참조하면, 본 실시예에 따른 종단 간 통신 시스템은, 종단 통신 장치들(110, 150), 보안 모듈들(120, 140) 및 정책 관리 장치 를 포함한다. 종단 통신 장치들(110, 150)은 통신 경로 상의 끝에 존재하는 통신 장치로서, 예를 들어, 가스 센서, 화재 감지 센서, 카메라, 인공지능 스피커, 차량에 설치되는 디바이스 등의 IoT 단말이나, 이러한 IoT 단말과 통신하여 IoT 서비스를 제공하는 IoT 서비스 서버를 포함한다. IoT 단말은 메모리와 프로세서 및 통신 회로 등을 포함하 여 IoT 서비스 서버와 통신할 수 있고, 또는 다른 IoT 단말과 P2P 통신을 할 수 있다. IoT 서비스 서버는 IoT 단말과 연결되어 IoT 단말로부터 주기적으로 상태 정보를 수신하고 또한 IoT 단말의 펌웨어를 업데이트하며 IoT 단말로 콘텐츠 스트리밍 등의 서비스를 제공할 수 있다. 본 실시예에서 종단 통신 장치들은 IoT 단말들이고, 종단 통신 장치는 IoT 서비스 서버로서, 하나의 서비스 그룹을 구성한다. 종단 통신 장치들은 종단 통신 장치와 통신을 한다. 예를 들어, 종단 통신 장치들은 자동차들에 설치되는 단말들이고, 종단 통신 장치는 자동차 회사에서 운영하는 서버이다. 종단 통신 장치들은 NAT(Network Address Translation) 기준으로 사설 IP 주소와 공인 IP 주소를 사용한 다. 바람직하게, 공인 IP 주소는 1.1.1.1 ~ 1.1.1.10과 같은 IP 주소 대역이 할당되고, 각 종단 통신 장치들 은 내부적으로 지정된 사설 IP 주소 대역에서 선택된 사설 IP 주소가 할당된다. 다른 서비스 그룹에 대해 서는 다른 공인 IP 주소 대역이 할당되고, 또한 다른 사설 IP 주소 대역 내에서 내부적으로 사설 IP 주소가 할 당된다. 보안 모듈들(120, 140)은 종단 통신 장치(110, 150)를 통신망을 통한 외부 공격으로부터 보호한다. 보안 모듈들 (120, 140)은 통신 계층상 종단 통신 장치들(110, 150)의 상위 계층에 위치한다. 제 1 보안 모듈은, 이동 통신망의 코어망에 설치되고, 제 2 보안 모듈은 물리적인 어댑터 형태로 제작되어 종단 통신 장치들 에 물리적으로 연결될 수 있다. 바람직하게, 제 1 보안 모듈은, 5G 엣지 서버에 설치될 수 있다. 제 1 보 안 모듈과 통신하는 종단 통신 장치들에는 제 1 보안 모듈의 APN(Access Point Name)이 설정된 다. 보안 모듈들(120, 140)은 메모리 및 프로세서 그리고 통신 회로를 포함할 수 있다. 또는 보안 모듈들(120, 140)은 소프트웨어로 제작되어 종단 통신 장치(110, 150)의 메모리에 저장되어 실행될 수 있다. 이동통신망의 코어망은 인증, 접속 및 이동성 제어 기능을 수행하는 AMF(Access and Mobility Management Function)와, 세션 제어 기능을 수행하는 SMF(Session Management Function), 무선 액세스 네트워크를 수용하 는 데이터 평면의 네트워크 엔티티인 UPF(User Plane Function) 등을 포함한다. UPF와 무선 액세스 네트워크는 SMF로부터 N4 및 N2 인터페이스를 통해 단말에 대한 라우팅 룰을 수신하며, 수신한 라이팅 룰을 통해 IP 라우팅 기능을 수행한다. 또한, IP 주소의 변환을 담당하는 NAT(Network Address Translation)을 포함한다. 제 1 보안 모듈은, 종단 통신 장치들을 기준으로 통신 계층상 NAT의 상위에 위치할 수 있고, 또는 NAT의 하위에 위치할 수 있다. 종단 통신 장치들(110, 150)은 서브 ID와 마스터 ID가 할당된다. 서브 ID는 종단 통신 장치들(110, 150)에 대응 하는 식별자이고, 마스터 ID는 보안 모듈(120, 140)을 기준으로 보안 모듈(120, 140)에 연결된 종단 통신 장치 들(110, 150)의 서비스 그룹에 대응하는 식별자이다. IoT 단말인 종단 통신 장치들에 할당되는 서브 ID는 실시 형태에 따라 동일할 수 있고 또는 서로 다를 수 있다. 제 1 보안 모듈의 설치 위치에 따라 결정된다. 제 1 보안 모듈이 NAT의 하위에 설치되는 경우, 즉 종단 통신 장치들로부터 제 1 보안 모듈로 전송되는 패킷의 출발지 IP 주소가 NAT에 의해 공인 IP 주소로 변경되지 않고 제 1 보안 모듈로 수신된다면, 종단 통신 장치들에 할당되는 서브 ID는 모두 다르다. 반면, 제 1 보안 모듈이 NAT의 상위에 설치되는 경우, 즉 종단 통신 장치들로부터 제 1 보안 모듈로 전송되는 패킷의 출발지 IP 주소가 NAT에 의해 공인 IP 주소로 변경되어 제 1 보안 모듈로 수 신된다면, 종단 통신 장치들에 할당되는 서브 ID는 동일하다. 마스터 ID는 제 1 보안 모듈의 설치 위치와는 무관하다. 제 1 보안 모듈의 하위에 위치하여 동일한 서비스 그룹에 속하는 종단 통신 장치들은 동일한 마스터 ID가 할당되고, 제 2 보안 모듈의 하위에 위치하는 종단 통신 장치는 다른 마스터 ID가 할당된다. 보안 모듈들(120, 140)은, 종단 통신 장치들(110, 150)로부터 수신된 패킷을 외부로 전송할 때, 정책 관리 장치 로 정책을 질의하고, 정책 조회 결과에 따라 패킷의 외부로의 전송 여부를 결정한다. 또한, 보안 모듈들 (120, 140)은, 외부로부터 종단 통신 장치들(110, 150)로 향하는 패킷이 수신될 때, 마찬가지로 정책 관리 장치 로 정책을 질의하고, 정책 조회 결과에 따라 패킷의 내부로의 전송 여부를 결정한다. 이때, 정책은, ID 기 반의 종단 통신 연결 정책으로서, 각 서브 ID마다 생성되고, 상호 통신이 허용된 종단 통신 장치들 간의 ID 매 핑 정보이다. 보안 모듈(120, 140)은, 종단 통신 장치(110, 150)로부터 수신된 패킷을 외부로 전송할 때, 정책 관리 장치 로 토큰 시드를 요청하고 정책 관리 장치로부터 수신된 토큰 시드를 이용하여 생성한 토큰을 패킷에 삽입하여 전송할 수 있다. 또한, 보안 모듈들(120, 140)은, 외부로부터 종단 통신 장치들(110, 150)로 향하는 패킷이 수신될 때, 정책 관리 장치로 패킷을 전송한 측에서 사용한 토큰 시드를 요청하고, 정책 관리 장치 로부터 수신된 토큰 시드를 이용하여 패킷에 포함된 토큰을 검증한다. 보안 모듈들(120, 140)은, 토큰 검 증에 성공시에 외부로부터 수신된 패킷에서 토큰을 제거하여 내부의 종단 통신 장치(110, 150)로 전달한다. 정책 관리 장치는, 종단 통신 장치들(110, 150)의 정보, ID 기반의 종단 통신 연결 정책, IP 주소 정보를 저장한다. 도 2는 본 발명의 일 실시예에 따른 정책 관리 장치에서 관리하는 정보를 나타낸 도면으로, 제 1 보안 모듈 이 NAT 상위에 설치될 때의 예이다. 본 실시예에서 제 1 보안 모듈의 하위에 위치하는 특정 서비스 그룹에 속하는 종단 통신 장치들은 동일한 서브 ID인 DevID1이 할당되고, 마스터 ID로서 MasterID1가 할당 된다. 제 1 보안 모듈이 NAT의 상위에 설치되기 때문에, 제 1 보안 모듈에서는 하위의 종단 통신 장 치들의 서로 다른 사설 IP 주소가 보이지 않고 공인 IP 주소만 보이기 때문에, 정책 관리 장치에서 해당 종단 통신 장치들의 서브 ID가 동일하게 관리되는 것이다. 제 2 보안 모듈의 하위에 위치하는 종단 통신 장치는 서브 ID로 DevID2가 할당되고 마스터 ID로 MasterID2가 할당된다. 도 2에 도시된 바와 같이, 종단 통신 장치들(110, 150)의 정보는, 종단 통신 장치의 공인 IP 주소와 서브 ID를 포함한다. 도 2에서 서브 ID가 DevID1인 종단 통신 장치들은 1.1.1.1 ~ 1.1.1.10의 공인 IP 주소 대역이 할당되고, 서브 ID가 DevID2인 종단 통신 장치는 지정된 사설 IP 주소 대역 내에서 2.2.2.2의 공인 IP 주 소가 할당된 것을 나타낸다. 종단 통신 연결 정책은, 상호 통신이 허용된 종단 통신 장치들(110, 150)의 ID 매핑 정보로서 서브 ID 기준으로 생성된다. 도 2의 예에서, {DevID1, MasterID1, MasterID2}는, 제 1 보안 모듈에 연결된 종단 통신 장치 들 중 서브 ID가 DevID1이고 마스터 ID가 MasterID1인 서비스 그룹의 종단 통신 장치들은, 마스터 ID가 MasterID2인 종단 통신 장치와 통신이 가능한 것을 나타낸다. {DevID2, MasterID2, MasterID1}은, 서브 ID가 DevID2이고 마스터 ID가 MasterID2인 종단 통신 장치는, 마스터 ID가 MasterID1인 종단 통신 장치 와 통신이 가능한 것을 나타낸다. 상기 종단 통신 연결 정책은, 종단 통신 장치(110, 150)가 패킷을 외부 로 전송하고, 또는 외부로부터 패킷을 수신할 때, 패킷 전송 또는 패킷 수신의 허용 여부를 확인하는데 사용된 다. IP 주소 정보는, 마스터 ID를 기준으로 한 IP 주소 정보이다. 도 2에서 MasterID1의 마스터 ID에는 1.1.1.1 ~ 1.1.1.10의 공인 IP 주소 대역이 할당되고, MasterID2의 마스터 ID에는 2.2.2.2의 공인 IP 주소 대역이 할당된 다. 상기 IP 주소 정보는, 종단 통신 장치(110, 150)가, 패킷을 외부로 전송하고, 또는 외부로부터 패킷을 수신 할 때, 정책을 질의하기 전에, 외부로 전송하는 패킷의 목적지 IP 주소에 대응하는 마스터 ID를 확인하거나, 또 는 외부로부터 수신하는 패킷의 출발지 IP 주소에 대응하는 마스터 ID를 확인하는데 사용된다. 도 3은 본 발명의 다른 실시예에 따른 정책 관리 장치에서 관리하는 정보를 나타낸 도면으로, 제 1 보안 모듈 이 NAT 하위에 설치될 때의 예이다. 본 실시예에서 제 1 보안 모듈의 하위에 위치하는 특정 서비스 그룹에 속하는 종단 통신 장치들은 서로 다른 서브 ID가 할당된다. 두 개의 종단 통신 장치는 각각 DevID1, DevID3이 서브 ID로서 할당되고, 마스터 ID로서 MasterID1가 할당된다. 그리고 제 2 보안 모듈의 하위에 위치하는 종단 통신 장치는 서브 ID로 DevID2가 할당되고 마스터 ID로 MasterID2가 할당된다. 제 1 보안 모듈이 NAT 하위에 설치되기 때문에, 제 1 보안 모듈에서는 하위의 종단 통신 장치들의 서 로 다른 사설 IP 주소가 보이기 때문에, 정책 관리 장치에서 해당 종단 통신 장치들의 서브 ID가 서 로 다르게 관리되는 것이다. 도 3에 도시된 바와 같이, 종단 통신 장치들(110, 150)의 정보는, 종단 통신 장치의 사설 IP 주소 또는 공인 IP 주소와 서브 ID를 포함한다. 도 3에서 서브 ID가 DevID1, DevID3인 종단 통신 장치들은 각각 0.0.0.1, 0.0.0.2의 사설 IP 주소가 기록되고, 서브 ID가 DevID2인 종단 통신 장치는 2.2.2.2의 공인 IP 주소가 기 록된다. 제 1 보안 모듈의 하위에 속하는 두 개의 종단 통신 장치는 각각 서로 다른 서브 ID가 할당 되므로, 도 3에 도시된 바와 같이, 총 3개의 종단 통신 연결 정책이 설정된다. IP 주소 정보는 마스터 ID를 기 준으로 한 IP 주소 정보이다. 도 3에서 MasterID1의 마스터 ID에는 0.0.0.1 ~ 0.0.0.256의 사설 IP 주소 대역 과 1.1.1.1 ~ 1.1.1.10의 공인 IP 주소 대역이 할당되고, MasterID2의 마스터 ID에는 2.2.2.2의 공인 IP 주소 대역이 할당된다. 도 4는 본 발명의 일 실시예에 따른 제 1 보안 모듈 및 정책 관리 장치의 블럭도로서, 제 1 보안 모 듈이 NAT의 상위에 설치되고, 제 1 보안 모듈이 제 1 종단 통신 장치로부터 제 2 종단 통신 장 치로 향하는 패킷을 수신할 때의 블록도이다. 도 4를 참조하면, 제1 보안 모듈은 수신부, ID 확 인부, 정책 조회부 및 전송부를 포함하고, 정책 관리 장치는 IP 주소 관리부, 정책 관리부 및 저장부를 포함한다. 이들은 소프트웨어로 구현되어 메모리에 저장되어 프로세서에 의해 실 행될 수 있다. 도 4를 참조한 실시예에서는 패킷의 흐름 순서대로 각 구성요소의 동작을 설명한다. 단계 S301에서, 수신부는, 제 1 종단 통신 장치로부터 제 2 종단 통신 장치로 향하는 패킷을 수 신한다. 이 패킷에는 출발지(Src) IP 주소로서 제 1 종단 통신 장치의 공인 IP 주소인 1.1.1.1이 설정되고, 목적지(Dst) IP 주소로서 외부에서 보이는 제 2 종단 통신 장치의 공인 IP 주소인 2.2.2.2가 설 정된다. 단계 S302에서, ID 확인부는, 상기 수신부에서 수신한 패킷에 포함된 목적지 IP 주소에 대응하는 마 스터 ID를 확인하기 위해, 해당 목적지 IP 주소를 정책 관리 장치로 전송하여 마스터 ID를 요청한다. 단계 S303에서, 정책 관리 장치의 IP 주소 관리부는, 저장부에서 상기 목적지 IP 주소에 대응하는 마 스터 ID를 조회하고 조회된 마스터 ID를 제 1 보안 모듈의 상기 ID 확인부로 응답한다. 정책 관리 장 치의 저장부에는 도 2에 도시된 바와 같이 IP 주소 정보가 저장되어 있으므로, 상기 IP 주소 관리부 는 상기 목적지 IP 주소에 대응하는 마스터 ID를 조회할 수 있다. 도 2를 참조하면, 마스터 ID로서, MasterID2를 조회한다. 단계 S304에서, ID 확인부는, 저장부에서 제 1 종단 통신 장치의 서브 ID 및 마스터 ID를 확인 한다. 저장부에는 종단 통신 장치들의 ID 및 공인 IP 주소의 매핑 정보가 저장되어 있으므로, ID 확 인부는 패킷의 출발지 IP 주소, 즉 제 1 종단 통신 장치의 공인 IP 주소를 이용하여 저장부에서 제 1 종단 통신 장치의 서브 ID 및 마스터 ID를 확인한다. 본 실시예에서, 제 1 종단 통신 장치의 서 브 ID는 DevID1이고, 마스터 ID는 MasterID1이다. 단계 S305에서, 정책 조회부는, 패킷을 목적지 IP 주소로 전송해도 되는지를 확인하기 위해, 정책 관리 장 치로 정책을 질의한다. 정책 조회부는, 상기 ID 확인부에서 확인한 제 1 종단 통신 장치의 서브 ID/마스터 ID(DevID1, MasterID1) 그리고 제 2 종단 통신 장치의 마스터 ID(MasterID2)를 정책 관리 장치로 전송하여 정책을 질의한다. 단계 S306에서, 정책 관리 장치의 정책 관리부는 상기 정책 조회부의 정책 질의에 따라 상기 ID 들을 이용하여 저장부에서 정책을 확인한다. 저장부에는 도 2에 도시된 정책 정보를 저장한다. 저장 부에는 {DevID1, MasterID1, MasterID2}의 정책 정보를 저장하고 있으므로, 정책 관리부는, 단계 S307에서, 제 1 보안 모듈의 정책 조회부로 승인(Allow) 응답을 전송한다. 이때, 정책 관리부는, 승인 응답에 토큰 시드를 포함하여 전송한다. 제 1 보안 모듈의 정책 조회부는, 정책 관리 장치로부터 수신된 승인 응답에 포함된 토큰 시드 를 이용하여 토큰을 생성한다. 보다 구체적으로, 정책 조회부는, 토큰의 재사용 방지를 위한 랜덤 값인 넌 스(Nonce)와 타임스탬프(Timestamp)를 생성한 후, 다음과 같이 토큰을 생성한다. 토큰(Token) = sign(hmac(seed xor Nonce, Payload)∥Nonce∥Timestamp∥ID) 여기서 hmac(seed xor Nonce, Payload)는 패킷의 페이로드를 해시한 값을 토큰 시드(seed)와 Nonce를 xor한 값 으로 암호화한 것을 의미하며, '∥'는 평문으로 이어붙이기를 의미한다. 그리고 ID는 제 1 종단 통신 장치(11 0)의 서브 ID이고, sign은 제 1 보안 모듈의 개인키로 서명하는 것을 의미한다. 전송부는, 상기 정책 조회부에서 생성된 토큰을 패킷에 삽입하여 통신망을 통해 제 2 종단 통신 장치 측으로 전송한다. 한편, 도 4를 참조한 실시예에서, 제 2 종단 통신 장치로부터 제 1 종단 통신 장치로 패킷이 전송될 경우, 제 1 보안 모듈의 ID 확인부는, 출발지 IP 주소를 이용하여 정책 관리 장치로부터 대응하 는 마스터 ID, 즉 제 2 종단 통신 장치의 마스터 ID를 확인하고, 저장부로부터 목적지 IP 주소에 대 응하는 서브 ID 및 마스터 ID, 즉 제 1 종단 통신 장치의 서브 ID 및 마스터 ID를 확인한다. 그리고 정책 조회부는 이 ID들을 이용하여 정책 관리 장치에서 정책을 조회하여 승인 응답을 수신하고, 전송부 는 패킷을 제 1 종단 통신 장치 측으로 전송한다. 토큰 검증은 앞서 설명한 바와 같이 동일하게 수행 한다. 도 5는 본 발명의 다른 실시예에 따른 제 2 보안 모듈 및 정책 관리 장치의 블럭도로, 도 4의 제 1 보안 모듈에서 전송된 패킷을 수신하여 처리할 때의 블럭도이다. 도 4를 참조하면, 제 2 보안 모듈은 수신부, ID 확인부, 정책 조회부 및 전송부를 포함한다. 정책 관리 장치는, 도 3을 참조하여 설명한 구성요소를 동일하게 포함한다. 이들은 소프트웨어로 구현되어 메모리에 저장되어 프로세서에 의해 실행될 수 있다. 도 5를 참조한 실시예에서는 패킷의 흐름 순서대로 각 구성요소의 동작을 설명한다. 단계 S401에서, 수신부는, 제 2 종단 통신 장치로 향하는 패킷을 수신한다. 이 패킷에는 출발지(Src) IP 주소로서 제 1 종단 통신 장치의 공인 IP 주소인 1.1.1.1이 설정되고, 목적지(Dst) IP 주소로서 제 2 종단 통신 장치의 공인 IP 주소인 2.2.2.2가 설정되어 있다. 단계 S402에서, ID 확인부는, 상기 수신부에서 수신한 패킷에 포함된 출발지 IP 주소에 대응하는 마 스터 ID를 확인하기 위해, 해당 출발지 IP 주소를 정책 관리 장치로 전송하여 마스터 ID를 요청한다. 단계 S403에서, 정책 관리 장치의 IP 주소 관리부는, 저장부에서 상기 출발지 IP 주소에 대응하는 마 스터 ID를 조회하고 조회된 마스터 ID를 제 2 보안 모듈의 상기 ID 확인부로 응답한다. 정책 관리 장 치의 저장부에는 도 2에 도시된 바와 같이 IP 주소 정보가 저장되어 있으므로, 상기 IP 주소 관리부 는 상기 출발지 IP 주소 1.1.1.1에 대응하는 마스터 ID로서 MasterID1를 조회할 수 있다. 단계 S404에서, ID 확인부는, 저장부에서 제 2 종단 통신 장치의 서브 ID 및 마스터 ID를 확인 한다. 저장부에는 ID 및 공인 IP 주소의 매핑 정보를 저장하고, ID 확인부는 제 2 종단 통신 장치 의 공인 IP 주소를 이용하여 저장부에서 제 2 종단 통신 장치의 서브 ID 및 마스터 ID를 확인한 다. 본 실시예에서, 제 2 종단 통신 장치의 서브 ID는 DevID2이고, 마스터 ID는 MasterID2이다. 단계 S405에서, 정책 조회부는, 패킷을 목적지 IP 주소, 즉 제 2 종단 통신 장치로 전송해도 되는지 를 확인하기 위해, 정책 관리 장치로 정책을 질의한다. 정책 조회부는, 상기 ID 확인부에서 확 인한 제 2 종단 통신 장치의 서브 ID/마스터 ID(DevID2, MasterID2) 그리고 제 1 종단 통신 장치의 마스터 ID(MasterID1)를 정책 관리 장치로 전송하여 정책을 질의한다. 단계 S406에서, 정책 관리 장치의 정책 관리부는 상기 정책 조회부의 정책 질의에 따라 상기 ID 들을 이용하여 저장부에서 정책을 확인한다. 저장부에는 도 2에 도시된 정책 정보를 저장한다. 저장 부에는 {DevID2, MasterID2, MasterID1}의 정책 정보를 저장하고 있으므로, 정책 관리부는, 단계 S407에서, 제 2 보안 모듈의 정책 조회부로 승인(Allow) 응답을 전송한다. 바람직하게, 제 2 보안 모듈의 정책 조회부는, 상기 수신된 패킷에 삽입되어 있는 토큰에서 평문으로 삽입되어 있는 제 1 종단 통신 장치의 서브 ID(즉, DevID1)를 추출하고, 그 서브 ID, 그리고 상기 ID 확인 부에서 확인한 제 1 종단 통신 장치의 마스터 ID(즉, MasterID1) 및 제 2 종단 통신 장치의 마 스터 ID(즉, MasterID2)를 함께 정책 관리 장치로 전송하여 송신측에서 사용한 토큰 시드를 요청하여 수신 한다. 정책 조회부는, 동시에 정책 관리 장치로부터 제 1 보안 모듈의 공개키를 함께 수신한다. 정책 조회부는, 패킷에 삽입되어 있는 토큰에 평문으로 삽입되어 있는 넌스(Nonce), 타임스탬프 (Timestamp) 그리고 제 1 종단 통신 장치의 서브 ID와, 상기 수신된 토큰 시드를 이용하여 토큰을 생성하 여 상기 패킷에 삽입되어 있는 토큰과 동일하는지 확인한다. 또한 정책 조회부는 상기 수신된 제 1 보안 모듈의 공개키로 토큰의 서명을 검증할 수 있다. 토큰 검증 실패시에 패킷을 폐기한다. 전송부는 토큰 검증에 성공한 상기 패킷에서 토큰을 제거하여 제 2 종단 통신 장치로 전송한다. 한편, 도 5를 참조한 실시예에서, 제 2 종단 통신 장치로부터 제 1 종단 통신 장치로 패킷이 전송될 경우, 제 2 보안 모듈의 ID 확인부는, 목적지 IP 주소를 이용하여 정책 관리 장치로부터 대응하 는 마스터 ID, 즉 제 1 종단 통신 장치의 마스터 ID를 확인하고, 저장부로부터 출발지 IP 주소에 대 응하는 서브 ID 및 마스터 ID, 즉 제 2 종단 통신 장치의 서브 ID 및 마스터 ID를 확인한다. 정책 조회부 는 이 ID들을 이용하여 정책 관리 장치에서 정책을 조회하여 승인 응답을 수신하고, 전송부는 패킷을 제 1 종단 통신 장치 측으로 전송한다. 토큰 검증은 마찬가지로 수행된다. 이상의 도 4 및 도 5에서 제 1, 2 보안 모듈(120, 140)을 구분하여 설명하였으나 도 4 및 도 5에서 설명한 기능 들은 하나의 보안 모듈에 모두 포함되는 것으로 이해하여야 한다. 도 6은 본 발명의 또 다른 실시예에 따른 제 1 보안 모듈 및 정책 관리 장치의 블럭도로서, 제 1 보 안 모듈이 NAT의 하위에 설치되고, 제 1 보안 모듈이 제 1 종단 통신 장치로부터 제 2 종단 통 신 장치로 향하는 패킷을 수신할 때의 블록도이다. 도 6을 참조하면, 제1 보안 모듈은 수신부, ID 확인부, 정책 조회부 및 전송부를 포함하고, 정책 관리 장치는 IP 주소 관리부, 정책 관리부 및 저장부를 포함한다. 이들은 소프트웨어로 구현되어 메모리에 저장되어 프로세서에 의 해 실행될 수 있다. 도 6을 참조한 실시예에서는 패킷의 흐름 순서대로 각 구성요소의 동작을 설명한다. 단계 S601에서, 수신부는, 제 1 종단 통신 장치로부터 제 2 종단 통신 장치로 향하는 패킷을 수 신한다. 이 패킷에는 출발지(Src) IP 주소로서 제 1 종단 통신 장치의 사설 IP 주소인 0.0.0.1이 설정되고, 목적지(Dst) IP 주소로서 외부에서 보이는 제 2 종단 통신 장치의 공인 IP 주소인 2.2.2.2가 설 정된다. 단계 S602에서, ID 확인부는, 상기 수신부에서 수신한 패킷에 포함된 목적지 IP 주소에 대응하는 마 스터 ID를 확인하기 위해, 해당 목적지 IP 주소를 정책 관리 장치로 전송하여 마스터 ID를 요청한다. 단계 S603에서, 정책 관리 장치의 IP 주소 관리부는, 저장부에서 상기 목적지 IP 주소에 대응하는 마 스터 ID를 조회하고 조회된 마스터 ID를 제 1 보안 모듈의 상기 ID 확인부로 응답한다. 정책 관리 장 치의 저장부에는 도 3에 도시된 바와 같이 IP 주소 정보가 저장되어 있으므로, 상기 IP 주소 관리부 는 상기 목적지 IP 주소에 대응하는 마스터 ID를 조회할 수 있다. 도 3을 참조하면, 마스터 ID로서, MasterID2를 조회한다. 단계 S604에서, ID 확인부는, 저장부에서 제 1 종단 통신 장치의 서브 ID 및 마스터 ID를 확인 한다. 저장부에는 종단 통신 장치들의 ID 및 사설 IP 주소의 매핑 정보가 저장되어 있으므로, ID 확 인부는 패킷의 출발지 IP 주소, 즉 제 1 종단 통신 장치의 사설 IP 주소를 이용하여 저장부에서 제 1 종단 통신 장치의 서브 ID 및 마스터 ID를 확인한다. 본 실시예에서, 제 1 종단 통신 장치의 서 브 ID는 DevID1이고, 마스터 ID는 MasterID1이다. 단계 S605에서, 정책 조회부는, 패킷을 목적지 IP 주소로 전송해도 되는지를 확인하기 위해, 정책 관리 장 치로 정책을 질의한다. 정책 조회부는, 상기 ID 확인부에서 확인한 제 1 종단 통신 장치의 서브 ID/마스터 ID(DevID1, MasterID1) 그리고 제 2 종단 통신 장치의 마스터 ID(MasterID2)를 정책 관리 장치로 전송하여 정책을 질의한다. 단계 S606에서, 정책 관리 장치의 정책 관리부는 상기 정책 조회부의 정책 질의에 따라 상기 ID 들을 이용하여 저장부에서 정책을 확인한다. 저장부에는 도 3에 도시된 정책 정보를 저장한다. 저장 부에는 {DevID1, MasterID1, MasterID2}의 정책 정보를 저장하고 있으므로, 정책 관리부는, 단계 S607에서, 제 1 보안 모듈의 정책 조회부로 승인(Allow) 응답을 전송한다. 이때, 정책 관리부는, 승인 응답에 토큰 시드를 포함하여 전송한다. 제 1 보안 모듈의 정책 조회부는, 정책 관리 장치로부터 수신된 승인 응답에 포함된 토큰 시드 를 이용하여 토큰을 생성한다. 보다 구체적으로, 정책 조회부는, 토큰의 재사용 방지를 위한 랜덤 값인 넌 스(Nonce)와 타임스탬프(Timestamp)를 생성한 후, 다음과 같이 토큰을 생성한다. 토큰(Token) = sign(hmac(seed xor Nonce, Payload)∥Nonce∥Timestamp∥ID) 여기서 hmac(seed xor Nonce, Payload)는 패킷의 페이로드를 해시한 값을 토큰 시드(seed)와 Nonce를 xor한 값 으로 암호화한 것을 의미하며, '∥'는 평문으로 이어붙이기를 의미한다. 그리고 ID는 제 1 종단 통신 장치(11 0)의 서브 ID이고, sign은 제 1 보안 모듈의 개인키로 서명하는 것을 의미한다. 전송부는, 상기 정책 조회부에서 생성된 토큰을 패킷에 삽입하여 통신망을 통해 제 2 종단 통신 장치 측으로 전송한다. 한편, 상기 전송부에서 전송된 패킷은 NAT를 통과하면서 출발지 IP 주소가 사설 IP 주소에서 공인 IP 주소 로 변경된다. 따라서, 제 2 보안 모듈로 수신되는 패킷의 출발지 주소는 공인 IP 주소가 기록되어 있으므 로, 제 2 보안 모듈에서 패킷을 처리하는 구성은 도 5를 참조하여 설명한 실시예와 동일하다. 한편, 도 6을 참조한 실시예에서, 제 2 종단 통신 장치로부터 제 1 종단 통신 장치로 패킷이 전송될 경우, 제 1 보안 모듈의 ID 확인부는, 출발지 IP 주소를 이용하여 정책 관리 장치로부터 대응하 는 마스터 ID, 즉 제 2 종단 통신 장치의 마스터 ID를 확인하고, 저장부로부터 목적지 IP 주소에 대 응하는 서브 ID 및 마스터 ID, 즉 제 1 종단 통신 장치의 서브 ID 및 마스터 ID를 확인한다. 그리고 정책 조회부는 이 ID들을 이용하여 정책 관리 장치에서 정책을 조회하여 승인 응답을 수신하고, 전송부 는 패킷을 제 1 종단 통신 장치 측으로 전송한다. 토큰 검증은 앞서 설명한 바와 같이 동일하게 수행 한다. 보안 모듈(120, 140) 간에 통신시 UDP(User Datagrm Protocol) 세션이 유지되어야 한다. 보안 모듈(120, 140) 사이에 위치한 NAT에서는 보안 모듈(120, 140) 간에 일정한 시간 동안 패킷 송수신이 없으면 UDP 세션을 드롭시 킨다. 따라서, 보안 모듈(120, 140)은 UDP 세션을 유지시킬 수 있는 방안이 필요하고, 보안 모듈(120, 140)은UDP 세션을 유지하기 위한 세션 유지 패킷을 주기적으로 송수신한다. 도 7은 본 발명의 일 실시예에 따른 세션 유지 방법을 설명하는 도면으로, 도 7을 참조하면, 제 1 보안 모듈은 세션 유지를 위한 패킷임을 나타내는 헤더(GS header)를 포함하는 세션 유지 패킷을 주기적으로 제 2 보안 모듈로 전송한다. 상기 헤더에는 해 당 패킷이 세션 유지를 위한 패킷임을 나타내는 플래그를 포함하고 또한 토큰을 포함한다. 토큰은 앞서 설명한 실시예와 마찬가지로 정책 관리 장치로부터 수신하여 삽입되고 검증된다. 제 2 보안 모듈은 패킷 수 신시 상기 헤더 그리고 상기 헤더에 세션 유지를 나타내는 플래그가 포함되어 있는지 확인하고 포함되어 있으면 해당 패킷을 바로 삭제한다. 이를 위해 보안 모듈(120, 140)은 상기와 같은 패킷을 생성하고 수신하며 삭제하는 세선 유지부를 포함한다. 상기 세션 유지 패킷은 두 개의 보안 모듈(120, 140) 중 어느 한쪽에서 주기적으로 전 송할 수 있고, 또는 서로 번갈아가며 주기적으로 전송될 수 있다. 본 명세서는 많은 특징을 포함하는 반면, 그러한 특징은 본 발명의 범위 또는 특허청구범위를 제한하는 것으로 해석되어서는 안 된다. 또한, 본 명세서에서 개별적인 실시예에서 설명된 특징들은 단일 실시예에서 결합되어 구현될 수 있다. 반대로, 본 명세서에서 단일 실시예에서 설명된 다양한 특징들은 개별적으로 다양한 실시예에 서 구현되거나, 적절히 결합되어 구현될 수 있다. 도면에서 동작들이 특정한 순서로 설명되었으나, 그러한 동작들이 도시된 바와 같은 특정한 순서로 수행되는 것으로, 또는 일련의 연속된 순서, 또는 원하는 결과를 얻기 위해 모든 설명된 동작이 수행되는 것으로 이해되어 서는 안 된다. 특정 환경에서 멀티태스킹 및 병렬 프로세싱이 유리할 수 있다. 아울러, 상술한 실시예에서 다양 한 시스템 구성요소의 구분은 모든 실시예에서 그러한 구분을 요구하지 않는 것으로 이해되어야 한다. 상술한 프로그램 구성요소 및 시스템은 일반적으로 단일 소프트웨어 제품 또는 멀티플 소프트웨어 제품에 패키지로 구 현될 수 있다. 상술한 바와 같은 본 발명의 방법은 프로그램으로 구현되어 컴퓨터로 읽을 수 있는 형태로 기록매체(시디롬, 램, 롬, 플로피 디스크, 하드 디스크, 광자기 디스크 등)에 저장될 수 있다. 이러한 과정은 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자가 용이하게 실시할 수 있으므로 더 이상 상세히 설명하지 않기로 한다."}
{"patent_id": "10-2019-0136178", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "이상에서 설명한 본 발명은, 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 있어 본 발명의 기술적 사상을 벗어나지 않는 범위 내에서 여러 가지 치환, 변형 및 변경이 가능하므로 전술한 실시예 및 첨부된 도면 에 의해 한정되는 것이 아니다."}
{"patent_id": "10-2019-0136178", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 종단(End-to-End) 간 통신 시스템을 나타낸 도면이다. 도 2는 본 발명의 일 실시예에 따른 정책 관리 장치에서 관리하는 정보를 나타낸 도면이다. 도 3은 본 발명의 다른 실시예에 따른 정책 관리 장치에서 관리하는 정보를 나타낸 도면이다. 도 4는 본 발명의 일 실시예에 따른 보안 모듈 및 정책 관리 장치의 블럭도이다. 도 5는 본 발명의 다른 실시예에 따른 보안 모듈 및 정책 관리 장치의 블럭도이다. 도 6은 본 발명의 또 다른 실시예에 따른 보안 모듈 및 정책 관리 장치의 블럭도이다. 도 7은 본 발명의 일 실시예에 따른 세션 유지 방법을 설명하는 도면이다."}
