{"patent_id": "10-2022-0069630", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0168849", "출원번호": "10-2022-0069630", "발명의 명칭": "카메라를 이용한 오브젝트 길이 측정 시스템 및 방법", "출원인": "(주)피플앤드테크놀러지", "발명자": "전병흡"}}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "카메라를 이용한 오브젝트 길이 측정 시스템으로, 카메라(100); 상기 카메라로부터 얻은 오브젝트의 영상이미지로부터 오브젝트의 경계지점의 픽셀에 대응하는 제1 좌표를 찾는 이미지좌표설정부(200); 상기 제 1 좌표에 투영변환행렬을 적용하여 이를 공간상의 또 다른 제 2좌표로 맵핑하는 좌표맵핑부(300); 상기 좌표맵핑부(300)에 의하여 맵핑된 제 2 좌표로부터 길이측정에 필요한좌표를 출력하는 레이블링부(400); 및 상기 레이블된 좌표로부터 길이를 연산하는 길이연산부(500)를 포함하는,카메라를 이용한 오브젝트 길이 측정 시스템."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1항에 있어서, 상기 투영변환행렬은 기존 길이를 알고 있는 오브젝트의 영상 이미지로부터 사전 설정된 값인 것을 특징으로 하는, 카메라를 이용한 오브젝트 길이 측정 시스템."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1항에 있어서, 상기 레이블링부(400)는 상기 오브젝트의 상단면을 딥러닝 기반으로 분리하는 것을 특징으로 하는, 카메라를 이용한 오브젝트 길이 측정 시스템."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 3항에 있어서, 상기 레이블링부(400)는 상기 분리된 상단면의 픽셀 영역 정보를 바탕으로 끝지점의 위치를 딥러닝 모델을 통하여 출력하는 것을 특징으로 하는, 카메라를 이용한 오브젝트 길이 측정 시스템."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 3항에 있어서, 상기 레이블링부(400)는 평균제곱오차(Mean Square Error)를 사용한 딥러닝 모델을 이용, 끝지점의 위치를 출력하여 오차를 줄이는 것을 특징으로 하는, 카메라를 이용한 오브젝트 길이 측정 시스템."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 1항에 있어서, 상기 카메라는 CCTV이며, 상기 투영변환행렬은 상기 카메라의 고정된 위치를 기준으로 사전 설정된 값인 것을특징으로 하는, 카메라를 이용한 오브젝트 길이 측정 시스템."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 1항 내지 제 6항 중 어느 한 항에 따른 카메라를 이용한 오브젝트 길이 측정 시스템을 이용한 오브젝트 길이측정 방법으로, 상기 카메라(100)로부터 얻은 오브젝트의 영상이미지로부터 오브젝트의 경계지점의 픽셀에 대응하는 제 1 좌표를 인식하는 단계;상기 인식된 제 1 좌표에 투영변환행렬을 적용하여 이를 공간상의 또 다른 제 2 좌표로 맵핑하는 단계;상기 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 단계; 및 공개특허 10-2023-0168849-3-상기 출력된 좌표로부터 길이를 연산하는 단계를 포함하는 것을 특징으로 하는 오브젝트 길이 측정 방법."}
{"patent_id": "10-2022-0069630", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 7항에 있어서, 상기 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 단계는, 상기 오브젝트의 상단면을 딥러닝을 통하여 분리하는 단계; 및상기 분리된 상단면의 끝지점을 출력하는 단계를 포함하는 것을 특징으로 하는 오브젝트 길이 측정 방법."}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "카메라를 이용한 오브젝트 길이 측정 시스템으로, 카메라; 상기 카메라로부터 얻은 오브젝트의 영상이미지 로부터 오브젝트의 경계지점의 픽셀에 대응하는 제 1 좌표를 찾는 이미지좌표설정부; 상기 제 1 좌표에 투 영변환행렬을 적용하여 이를 공간상의 또 다른 제 2 좌표로 맵핑하는 좌표맵핑부; 상기 좌표맵핑부에 의하여 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 레이블링부; 및 상기 레이블된 좌표로 부터 길이를 연산하는 길이연산부를 포함하는, 카메라를 이용한 오브젝트 길이 측정 시스템이 제공된다."}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 카메라를 이용한 오브젝트 길이 측정 시스템 및 방법에 관한 것으로, 보다 상세하게는 단일 렌즈 카 메라 영상을 이용하는 경우 발생하는 차원축소에서 기인하는 문제점이나 거리 예측 모델에서 생기는 오차 증폭 문제를 해결할 수 있는 카메라를 이용한 오브젝트 길이 측정 시스템 및 방법에 관한 것이다."}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "과거에는 공장 등 일정한 규격의 물건(오브젝트)이 만들어지는 곳에서 숙련된 전문 인력이 제품의 검수 등을 맡 았었지만 근래 들어서는 자동화를 통한 인간 오류 제거와 숙련된 인력의 단순 업무 투입에 따른 비용의 절감을 위해 머신 비전 검사나 인공지능(AI) 기반 비전 검사가 도입되는 추세이다. 머신비전과 AI를 접목한 검사기법은 측정 대상인 오브젝트의 영상 내 영역과 픽셀 위치를 파악하고 사전에 설정 된 지표의 분석을 이용해야 하기 때문에 카메라를 정확한 위치에 설치해야 하고 측정 환경에 대한 통제도 필요 하다. 일반적인 환경의 공장에서 다루는 대형 자재의 경우, 인력에 의존하는 측정은 안전 문제가 발생할 여지가 있고 환경 통제가 되지 않아 기존의 머신비전 솔루션을 적용하기에는 다양한 변수가 발생하는 점에서 그 한계가 있다. 더 나아가 공장이나 현장에 설치되어 있는 일반적인 CCTV 영상을 단순 활용하는 경우 차원 축소에서 오는 정보 손실로 인하여 측정이 쉽지 않다는 문제도 있다. 근래에는 LiDAR, ToF등의 거리 측정 센서의 발달에 힘입어 2차원의 단일 렌즈 카메라 영상을 3차원 공간에서 재 구현하고 그 안의 사물의 길이를 측정하는 방법이 도입되었으나 추가된 센서의 융합에 따른 기술적 어려움과 비 용 상승의 문제점이 있다. 그리고 별도의 센서를 추가하지 않고 순수하게 영상만을 이용하여 공간을 재구성하여 거리, 길이를 측정하는 방 법으로 다수 렌즈의 시차를 이용하는 양안 기반 측정 방법이 있지만 동일 오브젝트를 두 대 이상의 카메라로 촬 영해야 하며, 센서를 추가하는 경우와 마찬가지로 설정을 일치시키는 등, 설계 및 제작, 설치 상의 어려움이 있 다. 기존에 이용되는 일반적인 단일 렌즈 카메라를 사용하는 단안 기반 측정의 경우, 상기 차원 축소로 인한 공간 정보 손실을 보완하기 위해 딥뉴럴 네트워크를 이용해 거리를 예측하고 그 값을 이용해 길이를 측정하는데, 이 과정에서 오차가 증폭되며 학습 데이터 문제로 인해 정확성을 보장할 수 없어 정밀한 측정에 이용하기 힘들다는 문제점이 있다. 또한 딥뉴럴 네트워크의 경우 일반화의 문제로 인해 학습 데이터에 포함되어 있지 않은 환경에 서는 성능이 떨어지는 위험성이 존재한다. 선행기술문헌 특허문헌 (특허문헌 0001) 1. 대한민국 특허출원 10-2007-0040348호"}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "(특허문헌 0002) 2. 국제출원 WO2012118274A1 발명의 내용"}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "따라서, 본 발명이 해결하고자 하는 과제는 고정된 위치에 설치된 CCTV와 같은 카메라를 이용하여 오브젝트의 길이를 정확하게 측정할 수 있는 시스템과 그 방법을 제공하는 것이다."}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 과제를 해결하기 위하여, 본 발명은 카메라를 이용한 오브젝트 길이 측정 시스템으로, 카메라; 상기 카메라로부터 얻은 오브젝트의 영상이미지로부터 오브젝트의 경계지점의 픽셀에 대응하는 제 1 좌표를 찾는 이 미지좌표설정부; 상기 제 1 좌표에 투영변환행렬을 적용하여 이를 공간상의 또 다른 제 2 좌표로 맵핑하는 좌표맵핑부; 상기 좌표맵핑부에 의하여 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 레이블링부; 및 상기 레이블된 좌표로부터 길이를 연산하는 길이연산부를 포함하는, 카메라를 이용한 오브젝트 길이 측정 시스템을 제공한다. 본 발명의 일 실시예에서, 상기 투영변환행렬은 기존 길이를 알고 있는 오브젝트의 영상 이미지로부터 사전 설 정된 값이며, 상기 레이블링부는 상기 오브젝트의 상단면을 딥러닝 기반으로 분리한다. 본 발명의 일 실시예에서, 상기 레이블링부는 상기 분리된 상단면의 픽셀 영역 정보를 바탕으로 끝지점의 위치를 딥러닝 모델을 통하여 출력하며, 상기 레이블링부는 평균제곱오차(Mean Square Error)를 사용한 딥 러닝 모델을 이용, 끝지점의 위치를 출력하여 오차를 줄인다. 본 발명의 일 실시예에서, 상기 카메라는 CCTV이며, 상기 투영변환행렬은 상기 카메라의 고정된 위치를 기준으 로 사전 설정된 값이다. 본 발명은 또한 상술한 카메라를 이용한 오브젝트 길이 측정 시스템을 이용한 오브젝트 길이 측정 방법으로, 상 기 카메라로부터 얻은 오브젝트의 영상이미지로부터 오브젝트의 경계지점의 픽셀에 대응하는 제 1 좌표를 인식하는 단계; 상기 인식된 제 1 좌표에 투영변환행렬을 적용하여 이를 공간상의 또 다른 제 2 좌표로 맵핑하 는 단계; 상기 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 단계; 및 상기 출력된 좌표로부터 길이를 연산하는 단계를 포함하는 것을 특징으로 하는 오브젝트 길이 측정 방법을 제공한다. 본 발명의 일 실시예에서, 상기 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 단계는, 상기 오브 젝트의 상단면을 딥러닝을 통하여 분리하는 단계; 및 상기 분리된 상단면의 끝지점을 출력하는 단계를 포함한다."}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따른 시스템은, 단일 렌즈 카메라 영상을 이용하는 경우 발생하는 차원축소에서 기인하는 문제점이나 거리 예측 모델에서 생기는 오차 증폭 문제를 해결할 수 있다. 더 나아가, 고비용의 별도 센서를 사용하거나 이 를 융합하여야 하는 번거로움을 피할 수 있으며,통상적인 조건에서 설치한 CCTV를 활용하여 대상 물체인 오브젝 트의 길이를 정확히 측정할 수 있는 효과를 갖는다."}
{"patent_id": "10-2022-0069630", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부한 도면을 참고로 하여 본 발명의 바람직한 실시예에 대하여 상세히 설명하면 다음과 같다. 본 발명을 상세하게 설명하기 전에, 본 명세서에서 사용된 용어나 단어는 통상적이거나 사전적인 의미로 무조건 한정하여 해석되어서는 아니 되며, 본 발명의 발명자가 자신의 발명을 가장 최선의 방법으로 설명하기 위해서 각종 용어의 개념을 적절하게 정의하여 사용할 수 있다. 더 나아가 이들 용어나 단어는 본 발명의 기술적 사상에 부합하는 의미와 개념으로 해석되어야 함을 알아야 한 다. 즉, 본 명세서에서 사용된 용어는 본 발명의 바람직한 실시예를 설명하기 위해서 사용되는 것일 뿐이고, 본 발 명의 내용을 구체적으로 한정하려는 의도로 사용된 것이 아니다. 이들 용어는 본 발명의 여러 가지 가능성을 고려하여 정의된 용어임을 알아야 한다. 또한, 본 명세서에 있어서, 단수의 표현은 문맥상 명확하게 다른 의미로 지시하지 않는 이상, 복수의 표현을 포 함할 수 있다. 또한, 유사하게 복수로 표현되어 있다고 하더라도 단수의 의미를 포함할 수 있음을 알아야 한다. 본 명세서의 전체에 걸쳐서 어떤 구성 요소가 다른 구성 요소를 \"포함\"한다고 기재하는 경우에는, 특별히 반대 되는 의미의 기재가 없는 한 임의의 다른 구성 요소를 제외하는 것이 아니라 임의의 다른 구성 요소를 더 포함 할 수도 있다는 것을 의미할 수 있다. 본 발명은 상술한 문제를 해결하기 위한 것으로, 단일 카메라를 이용하여 사물의 길이를 측정할 수 있는 시스템 을 제공한다. 즉, 현장 등에서 설치되어 있는 통상의 단안렌즈 CCTV를 통하여 얻어진 영상을 이용하여 물체의 길이를 측정할 수 있는데, 이 경우 단안렌즈 카메라를 이용하며 다른 센서와의 일치화 기술이 요구되지 않아 계측 장비의 설치 와 개발 및 설정 등에서 작업 절차가 간소화되는 이점이 있다. 또한 영상의 정확한 기하학적 변환을 이용하기 때문에 정확한 설정을 통하여 이론 상 오차를 원하는 정도로 낮게 제어할 수 있다. 이하 본 발명의 일 실시예에 따른 사물 길이 측정 시스템과 이를 이용한 측정방법을 상세히 설명한다. 하지만, 본 발명의 범위는 하기 실시예 등에 의하여 제하되지 않는다. 본 발명의 일 실시예에 따른 사물 길이 측정 시스템은, 기하 변환을 통한 데이터 생성 방법과 딥러닝을 이용하 며, 이로써 카메라 영상 속 길이 측정이 하기 단계를 통하여 구현될 수 있다. 하기 도면에서는 직육면체 형태를 가진 자재의 길이를 측정하는 경우에 대하여 기술하였지만 통상적인 지식을 가진 자는 조건을 만족시키는 기타 형태의 자재에 대해서도 간단한 변형을 통하여 알고리즘을 구현하는 것이 가 능하여 직육면체 형태의 자재 측정에 본 발명의 범위가 제한되지 않는다. 도 1은 본 발명의 일 실시예에 따른 단일 카메라를 이용한 공장 내 대형 자재 길이 측정 시스템의 블록도이다. 도 1을 참조하면, 본 발명의 일 실시예에 따른 오브젝트 길이 측정시스템은, 카메라, 상기 카메라로부터 얻은 영상이미지로부터 제 1 좌표를 찾는 이미지좌표설정부; 상기 제 1 좌표에 투영변환행렬을 적용하여 이를 공간상의 또 다른 제 2 좌표로 맵핑하는 좌표맵핑부; 및 상기 좌표맵핑부에 의하여 맵핑된 좌표 로부터 길이측정에 필요한 좌표를 레이블링하는 하는 레이블링부; 및 상기 레이블된 좌표로부터 길이를 연 산하는 길이연산부를 포함한다. 본 발명은 투영변환행렬을 통하여 길이를 측정하려는 자재 등의 이미지에 원근투영 변환을 수행하여 공간상의 좌표로 매핑, 길이 측정에 고려되는 픽셀 영역을 분리하고, 이를 인공지능으로 학습하여 길이 측정에 필요한 상 단면의 공간 좌표로부터 길이를 연산한다. 본 발명에서 카메라는 영상내에 측정 대상 자재의 양쪽 끝을 명확히 파악할 수 있는 위치와 기타 조건을 고려하여 설치한다. 만일 측정 대상의 양끝이 단일 카메라 영상 범위에 포함되어 있지 않으면 추가로 카메라를 설치하여 길이를 측정할 양끝이 영상에 명확히 나오게 할 수 있으며, 이는 본 발명에서 하나의 영상으로 해석되 며 적어도 길이 측정을 위한 오브젝트 이미지 전체를 얻는 한 카메라 갯수와 관계 없이 이는 모두 본 발명의 범 위에 속한다. 본 발명은 이미지좌표설정부와 좌표맵핑부를 통한 화면 변환을 통해 측정 대상 물체의 위치를 정렬하 고, 그 후 레이블링부는 대상 물체의 영역을 딥러닝 모델을 통해 분리하며 추가로 구성된 딥러닝 모델을 이용하여 양쪽 끝 지점의 위치를 검출하고, 길이연산부는 길이를 측정한다 각 단계별로 보다 구체적으로 설명하면 다음과 같다. 자재 상단면을 포함한 실제 공간 속 평면(이하 상단면 평면)의 카메라 화면 속 이미지를 찾아, 그 평면의 이미 지를 실제 공간 상의 상단면 평면 위로 보내주는 원근 투영 변환을 적용한다(좌표맵핑부). 이때 공간 내 상단면 평면 위의 점은 화면 속 이미지를 원근 투영 변환시켜주면 공간 속의 원 위치로 옮겨진다. 즉, 본 발명 은 실제 공간 속의 길이와 매핑된 좌표를 설정해주면 그 좌표를 이용하여 길이를 측정할 수 있다는 사실에 기초 한 것이다. 원근투영 변환 행렬은 화면 속 픽셀들 중 같은 상단면 평면에 속하며 실제 평면 위 위치를 정확히 알고 있는 점 네 개를 통하여 계산할 수 있다. 특히 미리 길이와 폭을 아는 자재가 주어진 경우, 상단면 평면 위 네 지점의 좌표를 이용하여 원근투영 변환 행 렬을 구하고 이를 동일 카메라에 계속 적용시킬 수 있다. 여기서 얻어진 투영 변환을 통해 자재 상단면의 높이가 일정한 대상에 대해 같은 카메라의 설정으로 동일하게 다음의 과정을 통해 길이를 측정할 수 있다. 앞의 원근투영 변환을 통해 얻어진 영상 속의 상단면에 해당하는 픽셀 영역을 분리한다. 상단면의 영역분리는 별도로 학습한 딥러닝 모델을 통하여 이루어진다. 상기 딥러닝 모델의 학습은 변환 전 자재의 영상에 대하여 상 단면 영역이 표시된 데이터를 통하여 학습을 진행하거나 변환된 영상에 영역을 표시하여 얻어진 레이블을 통해 지도학습으로 이루어진다. 앞에서 얻어진 대상의 상단면 영역 픽셀 분할 정보로부터 끝 지점의 위치를 측정하여 파악해 길이를 계산해 낼 수 있다. 특별히 상단면이 사각형으로 주어지는 경우에는 상단면 사각형을 회귀 예측하는 딥러닝 모델을 이용한 다. 해당 딥러닝 모델은 별도로 사각형의 꼭지점 위치 레이블링을 진행한 데이터를 통해 지도학습으로 이루어진 다. 일반적인 경우에는 영역의 끝지점 좌표를 분할 영역 영상 내에서 회귀하는 딥러닝 모델을 이용한다. 마찬가 지로 영상에 끝지점을 표시한 레이블링을 준비하고 이를 이용하여 지도학습을 통해 모델의 학습을 진행한다. 이 후 최종적으로 자재의 길이는 양끝지점의 좌표로부터 계산 가능하다. 이하 본 발명의 바람직한 일 실시예를 통하여 본 발명을 보다 상세히 설명한다. 도 2 내지 3은 본 발명의 일 실시예에 따른 투영 변환 행렬을 이용하여 이미지상 좌표를 공간상의 좌표로 맵핑 하는 방법을 설명하는 도면이다. 도 2를 참조하면, 먼저 단일 카메라(고정된 위치에 설치되어 전체 사물 전체를 촬상할 수 있는 CCTV)로부터 사 물이 촬상된다(도 2의 (a)). 이후 사물의 상단면이 투영변환된다(도 2의 (b)). 즉, 도 2에서 사물의 상단면의 각 꼭지점에 해당되는 픽셀(제 1 좌표)이 분리된 후, 투영변환행렬이 적용된다. 그 결과 각 픽셀 위치는 또 다 른 제 2 좌표인 공간상의 좌표값 (0,0), (W,0), (O,L), (W,L)로 맵핑된다. 도 3은 원근 투영 방법에 따라 촬영 이미지(d)로부터 각 꼭지점에 대응하는 픽셀이 공간상의 좌표인 제 2 좌표 (0,0),(0,L),(W,L),(W,0)로 맵핑되는 과정을 설명하는 모식도이다. 기준 자재 상단면의 실제 폭과 길이를 모두 아는 경우는, 화면 사각형 영역의 꼭지점들이 갖는 영상 속 픽셀 좌 표(제 1 좌표)인 입력값과 타겟값(제 2 좌표)를 알고 있는 경우이며, 이를 기준으로 투영변환행렬값이 사전 설 정된다. 즉, 본 발명에서 투영 변환 행렬은 기존 길이를 알고 있는 물체의 영상으로부터 미리 계산되어 동일 카 메라(위치나 각도가 동일)의 영상에 모두 적용되는 기설정된 값이다. 도 4는 본 발명에 따른 시스템과 그 구동방법을 길이를 측정하려는 자재가 포함된 화면에 적용해 투영 변환된 화면이다. 본 발명은 더 나아가 길이 측정에 필요한 상단부를 분할하는 분할 모델을 적용하여 길이 측정의 정확도를 향상 시킨다. 도 5 및 6은 자재의 상단부위 영상 영역 분리 정보(도4)를 이용하는 모델을 설명하는 도면과, 그 결과이다. 도 5 및 6을 참조하면, 실제 평면상의 이미지상에는 다양한 좌표가 표시되나, 이 중 길이를 측정에 필요한 좌표 만을 분리하게 된다(도 5). 도 6의 동일한 투영변환을 거친 일반적인 자재 이미지로부터 상단 부위의 영역이 분리되어 길이 측정에 필요한 좌표값 추출에 이용된다. 본 발명의 일 실시예에서 분리 모델은, 투영변환 된 화면 내에서 자재의 상단부 픽셀 영역을 딥러닝 모델을 통 하여 분리하는 방식이며, 본 발명의 일 실시예에 따른 딥러닝 모델의 학습은 자재의 상단부위 영상 영역 분리 정보(도 5)와 일반화 성능 향상을 위해 확장한 데이터(도 6)를 바탕으로 하는 지도학습을 통하여 이루어진다. 본 발명에서 “상단면”은 길이를 측정할 모든 자재의 양끝지점이 같은 평면에 위치하는 면을 의미하며, 길이 측정의 기준이 되는 면을 의미한다. 이후 자재와 같은 길이 측정 대상이 되는 오브젝트의 상단부 픽셀 영역 정보를 바탕으로 끝지점의 위치를 딥러 닝 모델을 통하여 출력한다. 끝지점의 위치를 출력하는 딥러닝 모델은 도 6에서 분리된 영역 정보를 입력 받아 별도로 자재의 끝부분에 대한 레이블링을 통한 지도학습을 통하여 이루어진다. 상단면의 모양에 대한 가정에 따라 끝부분 레이블링은 끝점의 좌표 형태가 되기도 하고 사각형 형태의 정보가 되기도 한다. 도 7에서 (a)는 투영변환된 이미지이고 (b)는 상기 영역분리 딥러닝 모델을 통과하여 얻어낸 상단면 영역을 표 시한 것이다. 도 8에서 (a),(b)는 길이 회귀 모델 입출력 화면이고, 도 8의 (c)는 길이 회귀 모델 타겟값 중 양끝점 혹은 에 워싸는 사각형을 나타내는 도면이다. 도 7, 도 8의 과정은 동일한 이미지 프레임에 대해 동일한 출력을 가지지만, 자재가 정지해 있는 경우라도 연속 된 이미지 프레임에 대하여 동일한 결과를 내는 것은 아니다. 알고리즘의 픽셀 단위 측정오차를 감소시키기 위 해 필요한 경우, 카메라에서 다수의 영상 프레임을 획득하여 각각의 프레임에 대해 자재의 상기 동일 알고리즘 으로 길이 측정을 수행한 후에 평균을 취하여 오차를 줄일 수 있다. 즉, 길이측정에 필요한 좌표는 평균제곱오차(Mean Square Error)를 사용한 딥러닝 모델을 이용하여 양끝단의 실 제 공간 상 좌표를 얻어내고 두 좌표의 차이를 이용해 자재의 길이를 연산한다. 즉, 본 발명의 일 실시예에서는 연속된 5 프레임에 대하여 자재의 길이측정을 수행하는 경우 오차의 기대값은 평균제곱오차를 적용하여 로 줄일 수 있다. 또한 프레임 각각의 측정 오차는 연속된 프레임에 대한 양끝 위치 측정값에 대하여 이상치를 제거하여 중간값 부근의 측정값을 이용하여 오차를 줄일 수 있다. 도 9는 본 발명의 일 실시예에 따른 시스템을 이용한 오브젝트 길이 측정 방법을 설명하는 단계도이다. 도 9를 참조하면, 본 발명의 일 실시예에 따른 오브젝트 길이 측정방법은, 카메라로부터 얻은 오브젝트의 영상이미지로부터 오브젝트의 경계지점의 픽셀에 대응하는 제 1 좌표를 인식하는 단계; 상기 인식된 제 1 좌표 에 투영변환행렬을 적용하여 이를 공간상의 또 다른 제 2 좌표로 맵핑하는 단계; 상기 맵핑된 제 2 좌표로부터 길이측정에 필요한 좌표를 출력하는 단계; 및 상기 출력된 좌표로부터 길이를 연산하는 단계를 포함한다. 본 발명은 고정된 카메라 위치에 대응되도록 사전 설정된 투영변환행렬값을 활용함과 동시에, 좌표 출력 시 길 이 측정에 핵심이 되는 경계지점의 픽셀을 가지고 있는 상단면을 딥러닝으로 분리하고, 분리된 상단면의 픽셀 위치 출력의 오류를 평균제곱 모델 등을 통하여 최소화한다. 도 10은 도 9에 따른 방법에 따라 실제 딥러닝 모델과, 길이 추정 회귀 모델과 오차 보정을 통한 길이 값을 출 력하는 일 실시예의 단계도이다. 이상 살핀 바와 같이 본 발명에 따른 시스템은, 단일 렌즈 카메라 영상을 이용하는 경우 발생하는 차원축소에 서 기인하는 문제점이나 거리 예측 모델에서 생기는 오차 증폭 문제를 해결할 수 있다. 더 나아가, 고비용의 별 도 센서를 사용하거나 이를 융합하여야 하는 번거로움을 피할 수 있으며,통상적인 조건에서 설치한 CCTV를 활용 하여 대상 물체인 오브젝트의 길이를 정확히 측정할 수 있는 효과를 갖는다."}
{"patent_id": "10-2022-0069630", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 단일 카메라를 이용한 공장 내 대형 자재 길이 측정 시스템의 블록도이다. 도 2 내지 3은 본 발명의 일 실시예에 따른 투영 변환 행렬을 이용하여 이미지상 좌표를 공간상의 좌표로 맵핑 하는 방법을 설명하는 도면이다. 도 4는 본 발명에 따른 시스템과 그 구동방법을 길이를 측정하려는 자재가 포함된 화면에 적용해 투영 변환된 화면이다. 도 5는 도4의 투영 변환된 화면에서 상단부위 영상 영역 분리 모델을 설명하는 도면과 그 결과이다. 도 6은 위 영역 분리 모델의 학습을 위한 데이터 레이블링의 예를 보여주는 도면이다. 도 7은 길이 측정을 위한 자재의 이미지 내 측정 대상 부위면의 영역을 딥러닝 영역분리 모델을 통해 분리한 예를 보여주는 도면이다. 도 8은 도 7의 결과로 분리된 대상 영역의 다각형(직사각형) 좌표를 회귀하는 예를 보여주는 도면이다. 도 9는 본 발명의 일 실시예에 따른 시스템을 이용한 오브젝트 길이 측정 방법을 설명하는 단계도이다. 도 10은 도 9에 따른 방법에 따라 실제 딥러닝 모델과, 길이 추정 회귀 모델과 오차 보정을 통한 길이 값을 출 력하는 일 실시예의 단계도이다."}
