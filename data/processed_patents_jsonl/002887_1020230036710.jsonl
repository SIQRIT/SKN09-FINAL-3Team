{"patent_id": "10-2023-0036710", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0142124", "출원번호": "10-2023-0036710", "발명의 명칭": "안테나 빔 패턴의 차이를 이용하는 UWB 기반의 방향 탐지 방법 및 이를 수행하기 위한 전자기", "출원인": "국민대학교산학협력단", "발명자": "장병준"}}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "안테나 빔 패턴의 차이를 이용하여 UWB 기기의 방향을 탐지하는 방법에 있어서,서로 다른 복수의 빔 패턴을 형성하는 적어도 하나의 안테나를 통해 목표기기로부터 신호를 수신하는 단계;상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하는 단계; 및상기 채널 임펄스 응답에 기초하여 상기 목표기기의 방향을 탐지하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 목표기기의 방향을 탐지하는 단계는,서로 다른 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비교를 통해 상기 목표기기의 방향을 탐지하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 목표기기의 방향을 탐지하는 단계는,제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비(magnitude ratio)를 획득하는 단계;상기 획득한 크기 비에 대응되는 신호의 입사각을 획득하는 단계; 및상기 신호의 입사각에 기초하여 상기 목표기기의 방향을 결정하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서,상기 목표기기의 방향을 탐지하는 단계는,상기 신호의 직접파 및 반사파 각각에 대해서, 제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에대응되는 채널 임펄스 응답의 크기 비를 획득하는 단계;상기 획득한 크기 비에 기초하여, 상기 직접파 및 반사파의 입사각을 각각 획득하는 단계; 및상기 직접파 및 반사파의 입사각 조합에 대응되는 상기 목표기기의 위치를 결정하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서,상기 목표기기로부터 신호를 수신하는 단계는,상기 적어도 하나의 안테나에 제1 빔 패턴이 형성된 상태에서 상기 신호의 제1 구간을 수신하는 단계;상기 제1 구간의 수신이 완료되면, 상기 적어도 하나의 안테나에 제2 빔 패턴이 형성되도록 변경하는 단계; 및상기 적어도 하나의 안테나에 제2 빔 패턴이 형성된 상태에서 상기 신호의 제2 구간을 수신하는 단계를 포함하는 것을 특징으로 하는 방법.공개특허 10-2024-0142124-3-청구항 6 제1항에 있어서,상기 안테나는 하나의 방사체에 복수의 급전부(feed point)가 형성된 형태의 안테나인 것을 특징으로 하는방법."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서,상기 안테나는 동일한 빔 패턴을 갖는 복수의 안테나가 180도 하이브리드 모듈을 통해 연결된 형태이며, 상기복수의 안테나에 흐르는 전류의 방향을 조절함으로써 상기 동일한 빔 패턴의 합 패턴(sum pattern) 및 차 패턴(delta pattern) 구현이 가능한 것을 특징으로 하는 방법."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항 내지 제7항 중 어느 한 항의 방법을 컴퓨터에서 수행하기 위한 프로그램이 기록된 컴퓨터로 읽을 수 있는기록매체."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "안테나 빔 패턴의 차이를 이용하여 방향을 탐지하는 전자 기기에 있어서,서로 다른 복수의 빔 패턴을 형성하기 위한 안테나;방향 탐지를 수행하기 위한 프로그램이 저장되는 메모리; 및적어도 하나의 프로세서를 포함하며,상기 프로세서는,상기 안테나를 통해 목표기기로부터 신호를 수신하면, 상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하고, 상기 채널 임펄스 응답에 기초하여 상기 목표기기의 방향을 탐지하는, 전자기기."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 프로세서는 상기 목표기기의 방향을 탐지함에 있어서,서로 다른 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비교를 통해 상기 목표기기의 방향을 탐지하는 것을 특징으로 하는 전자기기."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서,상기 프로세서는,제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비(magnitude ratio)를 획득하고, 상기 획득한 크기 비에 대응되는 신호의 입사각을 획득하고, 상기 신호의 입사각에 기초하여 상기 목표기기의 방향을 결정하는 것을 특징으로 하는 전자기기."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제10항에 있어서,상기 프로세서는,상기 신호의 직접파 및 반사파 각각에 대해서, 제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에대응되는 채널 임펄스 응답의 크기 비를 획득하고, 상기 획득한 크기 비에 기초하여 상기 직접파 및 반사파의입사각을 각각 획득하고, 상기 직접파 및 반사파의 입사각 조합에 대응되는 상기 목표기기의 위치를 결정하는공개특허 10-2024-0142124-4-것을 특징으로 하는 전자기기."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제9항에 있어서,상기 프로세서는 상기 목표기기로부터 신호를 수신함에 있어서,상기 적어도 하나의 안테나에 제1 빔 패턴이 형성된 상태에서 상기 신호의 제1 구간을 수신하고, 상기 제1 구간의 수신이 완료되면 상기 적어도 하나의 안테나에 제2 빔 패턴이 형성되도록 변경한 후, 상기 적어도 하나의 안테나에 제2 빔 패턴이 형성된 상태에서 상기 신호의 제2 구간을 수신하는 것을 특징으로 하는 전자기기."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제9항에 있어서,상기 안테나는 하나의 방사체에 복수의 급전부(feed point)가 형성된 형태의 안테나인 것을 특징으로 하는 전자기기."}
{"patent_id": "10-2023-0036710", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제9항에 있어서,상기 안테나는 동일한 빔 패턴을 갖는 복수의 안테나가 180도 하이브리드 모듈을 통해 연결된 형태이며, 상기복수의 안테나에 흐르는 전류의 방향을 조절함으로써 상기 동일한 빔 패턴의 합 패턴(sum pattern) 및 차 패턴(delta pattern) 구현이 가능한 것을 특징으로 하는 전자기기."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "일 실시예에 따른 안테나 빔 패턴의 차이를 이용하여 UWB 기기의 방향을 탐지하는 방법은, 서로 다른 복수의 빔 패턴을 형성하는 적어도 하나의 안테나를 통해 목표기기로부터 신호를 수신하는 단계, 상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하는 단계 및 상기 채널 임펄스 응답에 기초하여 상기 목표기기의 방향을 탐지하는 단계를 포함할 수 있다."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 UWB 기반의 위치 측정 기술에서 방향을 탐지하기 위한 방법에 관한 것이며, 특히 안테나의 빔 패턴의 차이를 이용하여 UWB 기기들 간의 방향을 탐지하는 방법에 관한 것이다. 본 연구는 삼성미래기술육성사업의 지원을 받아 수행되었음(과제번호: SRFC-IT1801-51)."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "UWB(Ultra Wide Band) 기술이란 시간 영역에서 폭이 좁은 펄스를 이용하는 무선기술로서 주파수 영역에서 보면 기존 무선통신기술보다 대역폭이 매우 넓은 특성을 가진다. 미국 연방통신위원회(Federal Communications Commission, FCC)의 정의에 의하면 500 MHz 이상의 주파수 대역폭을 사용하는 경우 UWB 기술이라고 한다. UWB 기술은 근거리 무선 개인 통신망의 구축에 사용될 수 있으며, 기기 간 무선통신뿐만 아니라, 기기 간 거리 를 측정할 수도 있는 특성으로 인해 측위(positioning)를 활용한 서비스에 널리 사용되고 있다. 한편, HRP(High-Rate Pulse Repetition Frequency) UWB 기술은 기존의 UWB 기술과 다르게 개개의 UWB 펄스 (pulse)를 이용하지 않고, 일련의 UWB 펄스로 이루어진 UWB 심볼(symbol)을 이용하는 기술인데, HRP UWB 기술의 도입으로 거리 측정의 정밀도는 개선될 수 있었다. 다만, HRP UWB 기술을 이용하여 위치 기반 서비스(location based service)를 제공하기 위해서는 UWB 기기 (e.g. UWB 앵커 및 UWB 태그 등)들 간의 거리뿐만 아니라 방향(direction)까지 탐지할 수 있어야 하는데, 방향 탐지(direction finding) 기술은 안테나를 이용한 기술이므로 초기 HRP UWB에는 방향 탐지 기술이 도입되지 않 았다가, 이후에 2개의 UWB 안테나에서 수신되는 전파의 도달 경로의 차이를 이용하는 PDoA (Phase Difference of Arrival) 방식에 의해 방향 탐지가 수행되었다. 하지만, PDoA 방식의 경우 복수의 동일한 안테나를 반송파의 반파장 간격으로 위치시켜야만 하므로 안테나 설치 를 위한 공간이 커지는 문제가 발생하고, 위상 오차에 취약한 단점들을 가지고 있다."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "안테나 설계 시의 제약을 줄이고, 위상 오차의 영향으로부터 자유로울 수 있는, HRP UWB 기반의 방향 탐지 방법 을 제공하고자 한다."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "기술적 과제를 달성하기 위한 기술적 수단으로서 개시된 안테나 빔 패턴의 차이를 이용하여 UWB 기기의 방향을 탐지하는 방법은, 서로 다른 복수의 빔 패턴을 형성하는 적어도 하나의 안테나를 통해 목표기기로부터 신호를 수신하는 단계, 상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하는 단계 및 상기 채널 임펄스 응답에 기초하여 상기 목표기기의 방향을 탐지하는 단계를 포함할 수 있다. 기술적 과제를 달성하기 위한 기술적 수단으로서 개시된 안테나 빔 패턴의 차이를 이용하여 방향을 탐지하는 전 자 기기는, 서로 다른 복수의 빔 패턴을 형성하기 위한 안테나, 방향 탐지를 수행하기 위한 프로그램이 저장되 는 메모리 및 적어도 하나의 프로세서를 포함하며, 상기 프로세서는, 상기 안테나를 통해 목표기기로부터 신호 를 수신하면, 상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하고, 상기 채널 임펄스 응 답에 기초하여 상기 목표기기의 방향을 탐지할 수 있다. 기술적 과제를 달성하기 위한 기술적 수단으로서 개시된, 컴퓨터로 읽을 수 있는 기록매체는, 개시된 방법의 실 시예들 중에서 적어도 하나를 컴퓨터에서 실행시키기 위한 프로그램이 저장된 것일 수 있다. 기술적 과제를 달성하기 위한 기술적 수단으로서 개시된, 컴퓨터 프로그램은, 개시된 방법의 실시예들 중에서 적어도 하나를 컴퓨터에서 수행하기 위해 매체에 저장된 것일 수 있다."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 개시를 설명함에 있어서 본 개시가 속하는 기술 분야에 익히 알려져 있고 본 개시와 직접적으로 관련이 없는 기술 내용에 대해서는 설명을 생략한다. 이는 불필요한 설명을 생략함으로써 본 개시의 요지를 흐리지 않고 더 욱 명확히 전달하기 위함이다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이 는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내 용을 토대로 내려져야 할 것이다. 마찬가지 이유로 첨부된 도면에 있어서 일부 구성요소는 과장되거나 생략되거나 개략적으로 도시 되었다. 또한, 각 구성요소의 크기는 실제 크기를 전적으로 반영하는 것이 아니다. 각 도면에서 동일한 또는 대응하는 구성 요 소에는 동일한 참조 번호를 부여하였다. 본 개시의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술 되어 있는 실 시예들을 참조하면 명확해질 것이다. 그러나 본 개시는 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서 로 다른 다양한 형태로 구현될 수 있다. 개시된 실시예들은 본 개시의 개시가 완전하도록 하고, 본 개시가 속하"}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "는 기술분야에서 통상의 지식을 가진 자에게 개시의 범주를 완전하게 알려주기 위해 제공되는 것이다. 본 개시 의 일 실시예는 청구범위에 따라 정의될 수 있다. 명세서 전체에 걸쳐 동일한 참조 부호는 동일한 구성 요소를 나타낸다. 또한, 본 개시의 일 실시예를 설명함에 있어서 관련된 기능 또는 구성에 대한 구체적인 설명이 본 개 시의 요지를 불필요하게 흐릴 수 있다고 판단된 경우 그 상세한 설명은 생략한다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있 다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 일 실시예에서, 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수 행될 수 있다. 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있고, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로 세서를 통해 수행되는 그 인스트럭션들이 흐름도 블록(들)에서 설명된 기능들을 수행하는 수단을 생성할 수 있 다. 컴퓨터 프로그램 인스트럭션들은 특정 방식으로 기능을 구현하기 위해 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 지향할 수 있는 컴퓨터 이용 가능 또는 컴퓨터 판독 가능 메모리에 저장되는 것도 가능 하고, 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메모리에 저장된 인스트럭션들은 흐름도 블록(들)에서 설명된 기 능을 수행하는 인스트럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭션 들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에 탑재되는 것도 가능하다. 또한, 흐름도 도면의 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션 들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 일 실시예에서, 블록들에 언급된 기능들이 순서를 벗어나서 발생하는 것도 가능하다. 예를 들면, 잇달아 도시되어 있는 두 개의 블록들은 실질적으로 동시 에 수행되는 것도 가능하고 또는 기능에 따라 역순으로 수행되는 것도 가능하다. 본 개시의 일 실시예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 FPGA(Field Programmable Gate Array) 또는 ASIC(Application Specific Integrated Circuit)과 같은 하드웨어 구성요소를 나타낼 수 있고, '~부'는 특정한 역할을 수행할 수 있다. 한편, '~부'는 소프트웨어 또는 하드웨어에 한정되는 의미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구 성될 수도 있다. 일 실시예에서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구 성요소들 및 태스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레이들, 및 변수들을 포함할 수 있다. 특정한 구성요소나 특정한 '~부'를 통해 제공되는 기능은 그 개수를 줄이도록 결합되거나 추가적인 구성요소들로 분리될 수 있다. 또한, 일 실시예에서 ‘~부’는 하나 이상 의 프로세서를 포함할 수 있다. 구체적인 실시예들을 설명하기에 앞서 본 개시에서 자주 사용되는 용어들에 대해서 먼저 설명한다. 안테나의 '빔 패턴(beam pattern)'이란 안테나에서 방사되는 전자파가 각 방향으로 어느정도 방사되고 있는가를 표시한 곡선도로서, 안테나에 의해서 방사되거나 수신되는 RF (Radio Frequency) 에너지의 분포를 나타낼 수 있 다. 예를 들어, 표준 안테나를 이용하여 측정하고자 하는 안테나의 360도 전방향에서 신호를 수신해서 각 각도 별로 수신된 전계 강도를 표시하면 폴라 차트(polar chart)상에 파형이 그려지게 되는데, 이를 안테나의 빔 패 턴이라고 한다. 본 개시에서 '방향 탐지(direction finding)'란 신호(전파)의 방향에 기초하여, 신호를 송신한 기기의 방향을 파악하는 동작을 의미한다. 본 개시의 실시예들에서는 UWB 통신을 수행하는 기기들 간 상대적인 방향을 탐지하 는 동작이 수행된다. 예를 들어, 신호를 수신하는 UWB 기기는 신호의 입사각을 측정함으로써 신호를 송신한 UWB 기기의 방향을 탐지할 수 있다. 'SRMP (Single Radiator Multi Port) 안테나'란 하나의 방사체(radiator)에 복수의 급전 포트(feed port)가 형 성된 안테나로서, 전류가 공급되는 포트에 따라서 빔 패턴이 달라질 수 있는 안테나이다. 따라서, 하나의 SRMP 안테나는 서로 다른 복수의 빔 패턴을 형성할 수 있다.이하에서는 도면들을 참조하여 구체적인 실시예들에 대해서 설명한다. 본 개시의 실시예들에 따르면, UWB 기술 중에서 특히 HRP (High-Rate Pulse repetition frequency) UWB 기술이 위치 측정 시 사용될 수 있다. HRP UWB 는 종래의 UWB 기술에서 개개의 UWB 펄스(pulse)를 이용하는 것과 다르게, 복수의 UWB 펄스들로 이루어진 UWB 심볼(symbol)을 이용하는 특징이 있다. 먼저 도 1을 참조하여 UWB 기반의 위치 측정 기술에 대해서 설명한다. 도 1은 본 개시의 일 실시예에 따른, UWB 기반의 위치 측정을 수행하기 위한 시스템 환경을 도시한 도면이다. 도 1을 참고하면, 시스템에는 UWB 앵커(anchor) 및 UWB 태그(tag), 이렇게 두 개의 UWB 기기 (device)가 포함될 수 있다. 물론 실시예에 따라서 복수의 UWB 앵커 및 UWB 태그를 포함하도록 시스템이 구성될 수도 있다. UWB 태그는 UWB 앵커에 위치정보를 제공하는 역할을 수행할 수 있다. 따라서 이하의 실시예들에서, UWB 태그가 UWB 앵커에 신호(전파)를 송신하면, UWB 앵커는 수신한 신호에 기초하여 UWB 태그 의 위치(거리 및 방향)를 파악한다고 가정한다. 일 실시예에 따르면, UWB 앵커는 두 기기들 간 신호가 송수신되는 시간인 ToF (Time of Flight)를 이용한 TWR (Two Way Ranging) 방식에 의해 UWB 태그와의 거리를 측정할 수 있다. 또한, 이외에도 다양한 방식을 이용하여 UWB 앵커와 UWB 태그 간 거리가 측정될 수 있다. TWR 방식은 이미 알려진 기술일 뿐만 아니 라, 본 개시는 UWB 기기들(100, 200) 간 방향 탐지 방법에 관한 것이므로, 거리 측정 방식에 대한 자세한 설명 은 생략한다. 기존의 UWB 기반의 방향 탐지는 송수신되는 전파의 반파장 거리만큼 이격된 복수의 안테나를 이용한 PDoA (Phase Difference of Arrival) 방식에 의해 수행되었다. PDoA 방식은 서로 다른 안테나를 통해 수신되는 신호 (전파)의 도달 경로의 차이, 그리고 그로 인한 신호의 위상차(phase difference)를 이용하여 신호의 입사각을 측정하는 기술이다. 그런데, PDoA 방식은 다음과 같은 한계점들을 가지고 있다. 1) 반파장만큼 이격되도록 복수의 안테나를 설치해야 하므로 안테나 설치 공간이 많이 필요하고, 안테나 배치가 어려움. 2) 접지판 및 상호결합(mutual coupling) 등으로 인한 영향에 의해 오차가 발생할 수 있어 안테나 설계가 어려 움. 3) 위상 오차(phase error)에 민감하므로, 안테나로부터 수신기까지의 급전선(feed line)으로 인한 위상 오차 및 수신기의 위상 오차 등을 줄이기 위한 교정(calibration) 작업이 필요함. 4) 가시선 환경(Line of Sight, LoS)에서 직접파(Direct Wave)의 위상차를 이용해서만 방향 탐지가 가능하므로, 직접파가 보이지 않는 비가시선 환경(Non-Line of Sight, NLoS)에서는 오차가 커짐. 이와 같은 문제점들을 해결하기 위해 본 개시의 실시예들에서는 안테나별로 수신되는 신호의 위상차를 이용하는 대신에, 서로 다른 둘 이상의 빔 패턴을 갖는 안테나를 이용하여 신호를 수신하고, 수신한 신호의 채널 임펄스 응답(Channel Impulse Response, 이하 'CIR')에 기초하여 방향을 탐지한다. 안테나의 빔 패턴에 차이가 있는 경 우 신호를 수신하는 방향(전파의 입사각)에 따라서 CIR에 차이가 발생하게 되는데, 본 개시의 실시예들은 이를 이용하여 신호를 송신하는 UWB 기기의 방향을 탐지할 수 있다. 도 1을 참고하면, 본 개시의 일 실시예에 따른 UWB 앵커는 서로 다른 복수의 빔 패턴(11, 12)을 갖는 안테 나를 포함할 수 있다. 도 1에 도시된 실시예에서 UWB 앵커의 안테나는 마이크로스트립 (microstrip) 형태의 제1 빔 패턴과, 모노폴(monopole) 형태의 제2 빔 패턴을 형성할 수 있다. 안테나는 제1 빔 패턴 및 제2 빔 패턴을 동시에 형성할 수도 있고, 교대로 형성할 수도 있다. 예 를 들어, UWB 앵커가 빔 패턴별로 대응되는 수신기(receiver)를 포함한다면 안테나는 두 가지 빔 패 턴(11, 12)을 동시에 형성한 상태에서 신호를 수신할 수 있다. 또는 예를 들어, UWB 앵커가 하나의 수신기 만을 포함한다면, 안테나 스위칭을 통해 안테나는 두 가지 빔 패턴(11, 12)을 번갈아가면서 형성함으로써 한 번에 하나의 빔 패턴을 통해 신호를 수신할 수 있다. 안테나에 의해 형성되는 빔 패턴의 개수 및 형태는 도 1에 도시된 실시예와 다르게 구현될 수도 있다. 예 를 들어, 안테나는 세 가지 이상의 빔 패턴을 형성할 수도 있고, 빔 패턴의 형태 또한 도 1에 도시된 마이 크로스트립 형태 또는 모노폴 형태가 아닌 다른 형태일 수 있다. 서로 다른 복수의 빔 패턴을 형성하기 위한 안테나의 구조 및 형태는 다양하게 구현될 수 있다. 예를 들어, 안테나는 하나의 방사체에 복수의 급전 포트가 형성되는 SRMP 안테나일 수 있다. 또는 예를 들어, 안테나는 서로 다른 빔 패턴을 형성하는 복수의 안테나들을 포함하는 안테나 모듈일 수도 있다. 도 1에 도시된 바와 같이 UWB 태그가 UWB 신호(UWB 패킷)를 송신하면, UWB 앵커는 두 가지 빔 패턴 (11, 12)을 형성하는 안테나를 통해 UWB 신호를 수신하여 빔 패턴별로 CIR을 획득하고, 획득한 CIR에 기초 하여 UWB 태그의 방향을 탐지할 수 있다. 빔 패턴별로 CIR을 획득하고, 그에 기초하여 UWB 태그의 방 향을 탐지하는 구체적인 방법에 대해서는 아래에서 다른 도면들을 참조하여 자세히 설명한다. 도 2는 본 개시의 일 실시예에 따른, UWB 기기에 포함된 구성을 설명하기 위한 도면이다. 도 2에는 UWB 앵커 의 구성을 도시하였으나, UWB 태그도 동일한 구성들을 포함할 수 있다. 도 2를 참고하면, UWB 기기는 안테나, 통신 프로세서, 프로세서 및 메모리를 포함할 수 있다. 안테나는 전파(신호)를 송신하거나 수신하기 위한 구성이다. 본 개시의 실시예들에서 사용되는 안테나 는 서로 다른 형태의 복수의 빔 패턴을 형성할 수 있는 다양한 종류의 안테나일 수 있다. 통신 프로세서는 외부의 다른 기기와 통신을 수행하기 위한 구성이다. 일 실시예에 따르면, 통신 프로세서 는 적어도 하나의 수신기와 적어도 하나의 송신기를 포함할 수 있고, 안테나를 수신기 또는 송신기 중 어느 하나와 연결되도록 하는 스위치를 포함할 수도 있다. 또한 일 실시예에 따르면, 통신 프로세서는 신호 수신 시 사용되는 안테나의 빔 패턴을 변경하기 위한 스위치를 포함할 수도 있다. 안테나 및 통신 프로세서의 구체적인 예시는 아래에서 다른 도면들을 참조하여 설명한다. 프로세서는 이하에서 설명되는 실시예들에 따라 UWB 기기가 동작하도록 일련의 과정을 제어하는 구성 으로서, 하나 또는 복수의 프로세서로 구성될 수 있다. 이때, 하나 또는 복수의 프로세서는 CPU, AP(Application Processor), DSP(Digital Signal Processor) 등과 같은 범용 프로세서, GPU, VPU(Vision Processing Unit)와 같은 그래픽 전용 프로세서 또는 NPU(Neural Processing Unit)와 같은 인공지능 전용 프로 세서일 수 있다. 예를 들어, 하나 또는 복수의 프로세서가 인공지능 전용 프로세서인 경우, 인공지능 전용 프로 세서는 특정 인공지능 모델의 처리에 특화된 하드웨어 구조로 설계될 수 있다. 프로세서는 후술할 메모리에 데이터를 기록하거나, 메모리에 저장된 데이터를 읽을 수 있으며, 특히 메모리에 저장된 프로그램을 실행함으로써 미리 정의된 동작 규칙 또는 인공지능 모델에 따라 데이터 를 처리할 수 있다. 따라서, 프로세서는 이후의 실시예들에서 설명되는 동작들을 수행할 수 있으며, 이후 의 실시예들에서 UWB 기기가 수행한다고 설명되는 동작들은 특별한 설명이 없는 한 프로세서가 수행 하는 것으로 볼 수 있다. 도 2에서는 통신 프로세서와 프로세서가 각각 별도로 존재하는 것으로 도시되었으나, 통신 프로세서 는 프로세서에 포함될 수도 있다. 메모리는 다양한 프로그램이나 데이터를 저장하기 위한 구성으로서, 롬(ROM), 램(RAM), 하드디스크, CD- ROM 및 DVD 등과 같은 저장 매체 또는 저장 매체들의 조합으로 구성될 수 있다. 메모리는 별도로 존재하지 않고 프로세서에 포함되도록 구성될 수도 있다. 메모리는 휘발성 메모리, 비휘발성 메모리 또는 휘발 성 메모리와 비휘발성 메모리의 조합으로 구성될 수도 있다. 메모리에는 이후에서 설명되는 실시예들에 따 른 동작들을 수행하기 위한 프로그램이 저장될 수 있다. 메모리는 프로세서의 요청에 따라 저장된 데 이터를 프로세서에 제공할 수도 있다. 도 3 및 도 4는 본 개시의 실시예들에 따른, UWB 기반의 방향 탐지 방법을 설명하기 위한 순서도들이다. 도 3을 참고하면, 301 단계에서 UWB 앵커는 서로 다른 복수의 빔 패턴을 형성하는 적어도 하나의 안테나 를 통해 목표기기(e.g. UWB 태그)로부터 신호(전파)를 수신할 수 있다. 일 실시예에 따른 UWB 앵커 가 서로 다른 복수의 빔 패턴을 형성하는 안테나를 통해 신호를 수신하는 동작에 대해서 도 5를 참조 하여 자세히 설명한다. 도 5a 내지 도 5d는 본 개시의 실시예들에 따른, UWB 기기에서 서로 다른 복수의 빔 패턴을 형성하는 안테나를 통해 신호를 수신하는 동작을 설명하기 위한 도면들이다. 도 5a 및 도 5b에는 복수의 포트들(111, 112)이 형성 된 안테나를 통해 UWB 패킷(500a, 500b)을 수신하면서 안테나 스위칭을 수행하는 예를 도시하였다. 도 5a와 도 5b는 UWB 앵커가 수신하는 UWB 패킷(500a, 500b)에 있어서 차이가 있다. 도 5c에는 3개의 안테나(110a,110b, 110c)를 포함하는 UWB 앵커가 UWB 패킷(500c)을 수신하는 실시예를 도시하였고, 도 5d에는 4개의 안 테나(110a, 110b, 110c, 110d)를 포함하는 UWB 앵커가 UWB 패킷(500d)을 수신하는 실시예를 도시하였다. 도 5a를 참고하면, 안테나는 제1 빔 패턴을 형성하기 위한 제1 포트 및 제2 빔 패턴을 형성 하기 위한 제2 포트를 포함할 수 있다. 통신 프로세서는 수신기 및 송신기를 포함할 수 있 다. 또한, 통신 프로세서는 두 개의 포트들(111, 112) 간 스위칭을 위한 안테나 스위치와, 수신기 및 송신기 간 스위칭을 위한 송수신 스위치를 포함할 수 있다. 통신 프로세서는 안테나 스위치의 스위칭 동작을 통해 신호를 수신하는 포트를 선택할 수 있다. 다시 말해, 통신 프로세서는 안테나 스위치의 스위칭 동작을 통해 신호 수신 시 안테나에 형성되는 빔 패턴을 제어할 수 있다. UWB 앵커가 도 5a에 도시된 UWB 패킷(500a)을 수신한다고 가정하고 통신 프로세서가 안테나 스위칭을 수행하는 동작을 설명한다. 일 실시예에 따른 UWB 패킷(500a)은 도 5a에 도시된 바와 같이 3가지 구간 (preamble, gap, STS)을 포함할 수 있다. 참고로, STS (Scrambled Timestamp Sequence)는 2020년에 표준화된 IEEE 802.15.4z-2020 HRP UWB에서 추가된 암호화 기능의 필드이다. STS 필드를 방향 탐지에 활용함으로써, 클럭 (clock)을 공유한 2개의 수신기를 사용하는 것보다 하드웨어가 간단한 구조의 안테나(e.g. switched array antenna)를 사용할 수 있다. 일 실시예에 따르면, 통신 프로세서는 UWB 패킷(500a)의 수신이 시작될 때는 안테나 스위치가 제1 포 트에 연결되도록 함으로써, 안테나에 제1 빔 패턴이 형성된 상태에서 프리앰블(preamble) 구간이 수신되도록 할 수 있다. 통신 프로세서는 프리앰블 구간의 수신이 완료된 후에 갭(gap) 구간에서 안테나 스위치가 제2 포트에 연결되도록 변경함으로써, UWB 패킷(500a)의 STS 구간은 안테나에 제2 빔 패턴이 형성된 상태에서 수신되도록 할 수 있다. 이와 같이, 통신 프로세서는 안테나 스위치의 스위칭 동작을 제어함으로써 하나의 패킷에 포함된 구 간들을, 안테나에 서로 다른 빔 패턴이 형성된 상태에서 수신하도록 할 수 있다. 또는 일 실시예에 따르면, 통신 프로세서는 제1 포트 및 제2 포트에 대응되는 수신기를 각각 구 비함으로써, 안테나에 제1 빔 패턴 및 제2 빔 패턴이 동시에 형성된 상태에서 UWB 패킷(500a) 전 체를 수신하도록 할 수도 있다. 도 5b에서는 UWB 앵커가 UWB 패킷(500b)을 수신한다고 가정하고 통신 프로세서가 안테나 스위칭을 수 행하는 동작에 대해서 설명한다. 도 5b에 도시된 안테나 및 통신 프로세서의 구성은 도 5a에 도시된 구성과 동일하므로, 위 구성들에 대한 자세한 설명은 생략한다. 일 실시예에 따른 UWB 패킷(500b)은 도 5b에 도 시된 바와 같이 프리앰블 구간과 복수의 STS 구간들(STS segment 1, STS segment 2)을 포함할 수 있다. 일 실시예에 따르면, 통신 프로세서는 UWB 패킷(500b)의 STS segment 1 구간이 수신될 때는 안테나 스위치 가 제1 포트에 연결되도록 함으로써, 안테나에 제1 빔 패턴이 형성된 상태에서 STS segment 1 구간이 수신되도록 할 수 있다. 통신 프로세서는 STS segment 1 구간의 수신이 완료된 후에 갭 구간에서 안테나 스위치가 제2 포트에 연결되도록 변경함으로써, UWB 패킷(500b)의 STS segment 2 구간은 안테 나에 제2 빔 패턴이 형성된 상태에서 수신되도록 할 수 있다. 도 5c를 참고하면, UWB 앵커는 3개의 안테나들(110a, 110b, 110c)를 포함하도록 구성된다. 3개의 안테나들 (110a, 110b, 110c)은 각각 서로 다른 빔 패턴을 형성하며, 각각의 안테나들(110a, 110b, 110c)이 형성하는 빔 패턴을 51 영역에 도시하였다. 제1 안테나(110a)는 제1 빔 패턴(51a)을 형성하고, 제2 안테나(110b)는 제2 빔 패턴(51b)을 형성하며, 제3 안테나(110c)는 제3 빔 패턴(51c)을 형성할 수 있다. 도 5c에 도시된 바와 같이 3개 의 빔 패턴(51a, 51b, 51c)은 120도 간격으로 최대값을 갖도록 배치되었다. 이와 같이 빔 패턴(51a, 51b, 51 c)이 형성되도록 안테나들(110a, 110b, 110c)을 배치함으로써 신호의 입사각에 따라 CIR의 크기 비가 명확하게 구별되도록 할 수 있다. UWB 앵커는 이와 같이 빔 패턴(51a, 51b, 51c)이 형성되는 안테나들(110a, 110b, 110c) 사이를 스위칭함 으로써 UWB 패킷(500c)의 구간별로 서로 다른 빔 패턴을 통해 수신할 수 있다. 도 5c를 참고하면, 통신 프로세 서는 UWB 패킷(500c)의 STS segment 1 구간이 수신될 때는 안테나 스위치가 제1 안테나(110a)에 연 결되도록 함으로써, 제1 빔 패턴(51a)이 형성된 상태에서 STS segment 1 구간이 수신되도록 할 수 있다. 통신 프로세서는 STS segment 1 구간의 수신이 완료된 후에 갭 구간에서 안테나 스위치가 제2 안테나 (110b)에 연결되도록 변경함으로써, UWB 패킷(500c)의 STS segment 2 구간은 제2 빔 패턴(51b)이 형성된 상태 에서 수신되도록 할 수 있다. 또한, 통신 프로세서는 STS segment 2 구간의 수신이 완료된 후에 갭 구간에서 안테나 스위치가 제3 안테나(110c)에 연결되도록 변경함으로써, UWB 패킷(500c)의 STS segment 3 구간 은 제3 빔 패턴(51c)이 형성된 상태에서 수신되도록 할 수 있다. 도 5d를 참고하면, UWB 앵커는 4개의 안테나들(110a, 110b, 110c, 110d)를 포함하도록 구성된다. 4개의 안테나들(110a, 110b, 110c, 110d)은 각각 서로 다른 빔 패턴을 형성하며, 각각의 안테나들(110a, 110b, 110c, 110d)이 형성하는 빔 패턴을 52 영역에 도시하였다. 제1 안테나(110a)는 제1 빔 패턴(52a)을 형성하고, 제2 안 테나(110b)는 제2 빔 패턴(52b)을 형성하며, 제3 안테나(110c)는 제3 빔 패턴(52c)을 형성하고, 제4 안테나 (110d)는 제4 빔 패턴(52d)을 형성할 수 있다. 도 5d에 도시된 바와 같이 4개의 빔 패턴(52a, 52b, 52c, 52d) 은 90도 간격으로 최대값을 갖도록 배치되었다. 이와 같이 빔 패턴(52a, 52b, 52c, 52d)이 형성되도록 안테나들 (110a, 110b, 110c, 110d)을 배치함으로써 신호의 입사각에 따라 CIR의 크기 비가 명확하게 구별되도록 할 수 있다. UWB 앵커는 이와 같이 빔 패턴(52a, 52b, 52c, 52d)이 형성되는 안테나들(110a, 110b, 110c, 110d) 사이 를 스위칭함으로써 UWB 패킷(500d)의 구간별로 서로 다른 빔 패턴을 통해 수신할 수 있다. 도 5d를 참고하면, 통신 프로세서는 UWB 패킷(500d)의 프리앰블 구간이 수신될 때는 안테나 스위치가 제1 안테나(110a) 에 연결되도록 함으로써, 제1 빔 패턴(52a)이 형성된 상태에서 프리앰블 구간이 수신되도록 할 수 있다. 통신 프로세서는 프리앰블 구간의 수신이 완료된 후에 갭 구간에서 안테나 스위치가 제2 안테나(110b)에 연결되도록 변경함으로써, UWB 패킷(500d)의 STS segment 1 구간은 제2 빔 패턴(52b)이 형성된 상태에서 수신되 도록 할 수 있다. 또한, 통신 프로세서는 STS segment 1 구간의 수신이 완료된 후에 갭 구간에서 안테나 스위치가 제3 안테나(110c)에 연결되도록 변경함으로써, UWB 패킷(500d)의 STS segment 2 구간은 제3 빔 패턴(52c)이 형성된 상태에서 수신되도록 할 수 있다. 또한, 통신 프로세서는 STS segment 2 구간의 수신 이 완료된 후에 갭 구간에서 안테나 스위치가 제4 안테나(110d)에 연결되도록 변경함으로써, UWB 패킷 (500d)의 STS segment 3 구간은 제4 빔 패턴(52d)이 형성된 상태에서 수신되도록 할 수 있다. 다시 도 3으로 돌아가서, 302 단계에서 UWB 앵커는 빔 패턴별로 수신한 신호의 채널 임펄스 응답(CIR)을 획득할 수 있다. 수신한 신호에 대한 CIR을 획득하는 방법에 대해서는 도 6을 참조하여 자세히 설명한다. 도 6은 본 개시의 일 실시예에 따른, UWB 기기에서 수신하는 신호의 CIR을 도시한 그래프이다. UWB 신호는 펄스 폭이 작으므로 송신되는 하나의 UWB 펄스를 임펄스 신호(impulse signal)로 가정할 수 있다. HRP UWB에서 UWB 심볼은 복수의 UWB 펄스로 구성되므로(e.g. 31개 또는 127개의 UWB 펄스가 하나의 UWB 심볼을 구성함), UWB 앵커는 UWB 심볼의 상관(correlation) 특성을 이용하여 CIR을 획득할 수 있다. 자세하게는, UWB 태그는 복수의 UWB 펄스로 이루어진 UWB 심볼을 송신하고, UWB 앵커는 이를 수신하여 상관 연산 을 통해 복조하는데, 상관 연산의 결과가 CIR이 된다. 즉, UWB 앵커에서 수신한 UWB 심볼에 대한 자기상관 (auto correlation) 연산을 수행한 결과가 CIR이 된다. 이때, CIR은 상관 연산의 결과이므로 UWB 펄스의 모양과 는 관련이 없으며, 상관값이 큰 지점만이 중요하고 그 외의 지점에서의 상관값들은 잡음에 해당된다. 일 실시예에 따르면, UWB 앵커는 그래프에 도시된 상관값들 중에서 피크(peak) 영역에 포함된 상관값들을 이용하여 RSS (Received Signal Strength)를 구할 수 있다. 예를 들어, 상관값이 처음으로 기준값 (threshold)보다 커지는 지점을 FP_INDEX라고 정의하면, UWB 앵커는 FP_INDEX 이후의 처음 3개의 상관값 을 이용하여 RSS를 구할 수 있으며, 이를 수식으로 표현하면 아래의 수학식 1과 같다. 수학식 1"}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "이때, F1, F2, F3은 FP_INDEX 이후 처음 3개의 상관값의 크기를 의미하고, N은 수신된 신호 패킷에 포함된 UWB 심볼의 개수를 의미하며, D는 UWB 앵커에 포함된 수신기의 튜닝과 관련된 값이고, A는 오프셋(offset) 값 을 의미한다. 일 실시예에 따르면, UWB 앵커는 위와 같은 과정을 통해 산출된 RSS를, 수신 신호에 대응되는 'CIR의 크기 (magnitude of CIR)'로 사용하여 방향 탐지를 수행할 수 있다. 물론, UWB 앵커는 수신 신호에 대응되는CIR의 크기를 다른 방법에 의해 획득할 수도 있다. 예를 들어, UWB 앵커는 FP_INDEX로부터 일정 시간 동안 을 피크 영역으로 지정하고, 피크 영역에 포함된 상관값들 중 가장 큰 값을 CIR의 크기로 사용할 수 도 있다. 또한, UWB 앵커는 그 밖의 다양한 방법으로 CIR의 크기를 나타내는 값을 획득할 수 있다. 다시 도 3으로 돌아가서, 303 단계에서 UWB 앵커는 획득한 CIR에 기초하여 목표기기의 방향을 탐지할 수 있다. 신호를 수신할 때 안테나에 형성된 빔 패턴에 따라서 CIR의 특성이 달라지게 된다. 즉, 동일한 빔 패턴을 통해 신호를 수신하더라도 신호의 입사각에 따라서 CIR에 차이가 발생하게 되고, 신호의 입사각이 동일 하더라도 빔 패턴이 다르면 CIR에 차이가 발생하게 된다. 따라서, UWB 앵커는 신호를 수신하여 획득한 CIR 에 기초하여, 신호를 송신한 목표기기의 방향을 탐지할 수 있다. 도 4에는 도 3의 303 단계에 포함되는 세부 단 계들을 도시하였다. 도 4를 참고하면, 401 단계에서 UWB 앵커는 제1 빔 패턴에 대응되는 CIR에 대한 제2 빔 패턴에 대 응되는 CIR의 크기 비(magnitude ratio)를 획득할 수 있다. 402 단계에서 UWB 앵커는 획득한 CIR의 크기 비에 대응되는 신호의 입사각을 획득하고, 403 단계에서 UWB 앵커는 신호의 입사각에 기초하여 목표기기의 방향을 결정할 수 있다. 도 4의 단계들을 수행하는 구체적인 방법에 대해서는 아래에서 도 7 내지 도 11을 참조하여 자세히 설명한다. 도 7 및 도 8에는 직접파만을 고려하여 목표기기의 방향을 탐지하는 실시예를 도시하였고, 도 9 내지 도 11에는 직접파 및 반사파를 모두 고려하여 목표기기의 방향을 탐지하는 실시예를 도시하였다. 도 7에는 안테나의 두 가지 빔 패턴(11, 12)을 통해 제1 신호(S1) 및 제2 신호(S2)를 수신하는 상황을 도 시하였고, 오른쪽에는 두 신호들(S1, S2) 각각에 대해서 빔 패턴(11, 12)별로 획득한 CIR의 크기를 나타내는 그 래프(710, 720)를 도시하였다. 도 7에 도시된 실시예에서 제1 신호(S1)의 입사각은 0도이고, 제2 신호(S2)의 입 사각은 θS2도라고 가정한다. 일 실시예에 따르면, 도 5에서 설명한 바와 같이 통신 프로세서는 안테나 스 위칭을 통해 각각의 신호(S1, S2)에 대해서 빔 패턴별로 CIR을 획득할 수 있다. 안테나 스위칭을 통해 제1 빔 패턴 및 제2 빔 패턴이 번갈아 형성되면서 신호(S1, S2)를 수신한다면, UWB 앵커는 시간 인덱스 (time index)를 동기화함으로써 도 7의 그래프들(710, 720)을 획득할 수 있다. 먼저 제1 신호(S1)에 대응되는 제1 그래프를 살펴보면, 제1 빔 패턴에 대응되는 CIR의 크기는 P10,a이 고, 제2 빔 패턴에 대응되는 CIR의 크기는 P10,b임을 알 수 있다. 각각의 빔 패턴(11, 12)에 대응되는 CIR의 크기는 앞서 도 6을 참조하여 설명한 방법에 의해 획득될 수 있다. UWB 앵커가 제1 신호(S1)에 대해서 401 단계를 수행하여 획득하는 CIR의 크기 비, 즉 제1 빔 패턴에 대응되는 CIR의 크기에 대한 제2 빔 패턴 에 대응되는 CIR의 크기 비는 P10,b/P10,a가 된다. 마찬가지로 제2 신호(S2)에 대응되는 제2 그래프를 살펴보면, 제1 빔 패턴에 대응되는 CIR의 크기는 P20,a이고, 제2 빔 패턴에 대응되는 CIR의 크기는 P20,b임을 알 수 있다. 역시 각각의 빔 패턴(11, 12)에 대 응되는 CIR의 크기는 앞서 도 6을 참조하여 설명한 방법에 의해 획득될 수 있다. UWB 앵커가 제2 신호(S 2)에 대해서 401 단계를 수행하여 획득하는 CIR의 크기 비, 즉 제1 빔 패턴에 대응되는 CIR의 크기에 대한 제2 빔 패턴에 대응되는 CIR의 크기 비는 P20,b/P20,a가 된다. 도 7을 참고하면, 제1 빔 패턴에 대응되는 CIR의 크기는 신호의 입사각이 0도일 때 최대값을 갖고, 신호의 입사각이 커질수록 감소함을 알 수 있다. 반대로, 제2 빔 패턴에 대응되는 CIR의 크기는 신호의 입사각이 0 도일 때 최소값을 갖고, 신호의 입사각이 커질수록 증가함을 알 수 있다. 따라서, 제1 빔 패턴에 대응되는 CIR에 대한 제2 빔 패턴에 대응되는 CIR의 크기 비(Pb/Pa)는 신호의 입사각이 0도일 때 최소값을 갖고, 신호의 입사각이 커질수록 증가하게 된다. 이와 같이, 두 빔 패턴(11, 12)에 대응되는 CIR의 크기 비는 신호의 입사각에 따라서 달라지므로, UWB 앵커 는 다양한 CIR의 크기 비에 대응되는 입사각에 대한 정보를 미리 알고 있다면, 401 단계에서 획득한 CIR의 크기 비로부터 신호의 입사각을 획득할 수 있다. 도 8에는 신호의 입사각에 따라서 두 빔 패턴(11, 12)에 대응되는 CIR의 크기 비가 어떻게 변화하는지를 나타내 는 그래프를 도시하였다. 도 8을 참고하면, CIR의 크기 비는 신호의 입사각이 0도일 때 최소값을 갖고, 신 호의 입사각이 증가할수록 CIR의 크기 비도 증가함을 알 수 있다. 이는 앞서 도 7을 참조하여 설명한 바와 일치한다. UWB 앵커가 도 8의 그래프에 대한 정보를 미리 가지고 있다면, UWB 앵커는 CIR의 크기 비가 P10,b/P10,a일 때는 신호의 입사각이 0도이고, CIR의 크기 비가 P20,b/P20,a일 때는 신호의 입사각이 θS2도라고 판 단할 수 있다. UWB 앵커가 도 8의 그래프와 같은, CIR의 크기 비에 대응되는 입사각에 대한 정보를 미리 획득하는 방법은 다양하게 구현될 수 있다. 일 실시예에 따르면, 안테나의 설계 시 파악 가능한 수직방향 및 수평방향에 대한 빔 패턴을 이용하여 신호의 입사각별로 빔 패턴의 크기 비를 산출하고, 이로부터 CIR의 크기 비를 획득할 수 있다. CIR의 크기 비는 빔 패턴의 크기 비에 비례한다. 또는 일 실시예에 따르면, UWB 송신기(e.g. UWB 태그 )와 UWB 수신기(e.g. UWB 앵커)를 무반향실에 설치하고, 신호의 입사각별로 CIR의 크기 비를 측정하 여 미리 저장해 놓을 수 있다. 이와 같은 방법으로 획득된 정보가 UWB 앵커의 메모리에 미리 저장되 어 있으면, UWB 앵커는 CIR의 크기 비에 따라 대응되는 입사각을 결정할 수 있다. 일 실시예에 따르면, 도 8의 그래프는 기본적인 마이크로스트립(microstrip)과 모노펄스(monopulse) 빔 특 성의 그래프를 기반으로 나타낸 것으로, 실제 안테나의 빔 패턴 특성을 측정하는 과정을 수행함으로써 획득될 수 있다. 다만, 도 7 및 도 8에 도시된 실시예에서와 같이 직접파에 대한 CIR만을 이용하여 방향을 탐지할 경우, 신호의 입사각은 측정할 수 있지만, 좌우 구분을 하기 어렵다는 한계가 있다. 이러한 문제를 해결하기 위한 방법으로서, 동위상(In-phase) 신호(I 신호)와 직교위상(Quadrature-phase) 신호(Q 신호) 2개를 이용하는 직교 수신기와 하이브리드 안테나를 이용하여 좌우를 구분할 수 있다. 또한, 도 9 내지 도 11에서 설명하는 실시예에 서와 같이 직접파뿐만 아니라 반사파까지 고려함으로써 벽이나 물체 등과 같은 주변 환경을 파악할 수 있게 되 어 좌우 구분을 할 수도 있다. 도 9를 참고하면, UWB 앵커와 UWB 태그가 통신을 수행하는 환경에 장애물이 존재한다. 일반적으 로 신호를 수신하는 기기에서는 송신신호가 직접 수신되는 직접파와, 주변환경에 의해 반사되어 수신되는 반사 파가 중첩되어 수신될 수 있다. 즉, UWB 태그가 송신한 전파 중에서 UWB 앵커에 바로 도달하는 전파 가 직접파에 해당되고, 장애물에 반사되어 UWB 앵커에 도달하는 전파가 반사파에 해당된다. 도 9의 왼편에는 두 가지 빔 패턴에 대해서, 직접파 및 반사파 각각에 대응되는 CIR의 크기를 나타낸 그래프를 도시하였다. 도 9에 도시된 그래프들에서 직접파는 t0에 수신되고, 반사파는 t1에 수신된다고 가정한다. 도 9를 참고하면, 제1 빔 패턴을 통해 수신된 직접파의 CIR의 크기는 P0,a이고, 제1 빔 패턴을 통해 수 신된 반사파의 CIR의 크기는 P1,a이다. 또한, 제2 빔 패턴을 통해 수신된 직접파의 CIR의 크기는 P0,b이고, 제2 빔 패턴을 통해 수신된 반사파의 CIR의 크기는 P1,b이다. 빔 패턴별로 직접파 및 반사파에 대한 CIR의 크기를 획득하는 방법에 대해서는 도 10을 참고하여 자세히 설명한 다. 도 10에는 도 9에 도시된 환경에서 UWB 앵커가 UWB 태그로부터 신호를 수신했을 때, 빔 패턴별로 획 득되는 CIR을 표시한 그래프를 도시하였다. UWB 앵커는 그래프에 표시된 CIR로부터 직접파 및 반사파가 수신되는 시점을 판단할 수 있다. 도 10을 참고하면, CIR을 연결한 곡선의 첫 번째 피크가 직접파에 대응되고, 두 번째 피크가 반사파(e.g. 많은 반사파들 중에서 가장 신호 세기가 큰 반사파)에 대응될 수 있다. 따라서, 첫 번째 피크를 포함하는 제1 영역 이 직접파에 대응되고, 두 번째 피크를 포함하는 제2 영역이 반사파에 대응된다. 실제로 반사파로 인한 영향은 훨씬 더 넓은 시간 영역에 걸쳐서 존재하겠지만, 이를 모두 반영하기는 어려우므로 본 개시의 일 실시예에서는 실질적으로 유효한 영향을 미치는 반사파만을 고려한다. 도 9에 도시된 실시예에서와 같이 직접파 및 반사파 각각에 대해서 빔 패턴별 CIR 크기의 비를 산출하기 위해서 는, 직접파 및 반사파가 수신된 시점(t0, t1)을 특정할 필요가 있다. UWB 앵커는 다양한 방법으로 직접파 및 반사파가 수신된 시점을 특정할 수 있다. 일 실시예에 따르면, UWB 앵커는 두 빔 패턴에 대응되는 CIR 을 통틀어서 첫 번째 피크가 나타나는 시점을 직접파가 수신된 시점(t0)으로 판단하고, 두 번째 피크가 나타나는 시점(t1)을 반사파가 수신된 시점으로 판단할 수 있다.UWB 앵커는 직접파 및 반사파가 수신된 시점을 특정했으면, 직접파 및 반사파에 대응되는 CIR의 크기를 빔 패턴별로 획득할 수 있다. 일 실시예에 따르면, UWB 앵커는 도 6 및 수학식 1을 참조하여 설명했던 방법에 따라 CIR의 크기를 획득할 수 있다. 예를 들어, UWB 앵커는 직접파가 수신된 시점(t0) 이후 처음 3개의 상 관값의 크기를 F1, F2, F3에 대입하여 수학식 1을 통해 직접파의 CIR의 크기를 산출할 수 있다. 또한 UWB 앵커 는 반사파가 수신된 시점(t1) 이후 처음 3개의 상관값의 크기를 F1, F2, F3에 대입하여 수학식 1을 통해 반 사파의 CIR의 크기를 산출할 수 있다. 이상 설명한 방법에 따라 빔 패턴별로 산출한 직접파 및 반사파의 CIR의 크기가 도 9의 그래프들에 표시되어 있다. UWB 앵커는 제1 빔 패턴에 대응되는 CIR에 대한 제2 빔 패턴에 대응되는 CIR의 크기 비를, 직접파 및 반사파 각각에 대해서 획득할 수 있다. 도 9에 도시된 실시예에서, 직접파에 대한 CIR의 크기 비는 P0,b/P0,a 가 되고, 반사파에 대한 CIR의 크기 비는 P1,b/P1,a가 된다. UWB 앵커는 획득한 두 CIR의 크기 비(P0,b/P0,a 및 P1,b/P1,a)에 기초하여 UWB 태그의 방향을 탐지할 수 있다. UWB 앵커는 직접파에 대한 CIR의 크기 비로부터 직접파의 입사각을 획득할 수 있고, 반사파에 대한 CIR의 크기 비로부터 반사파의 입사각을 획득할 수 있으며, 직접파의 입사각과 반사파의 입사각을 알면 UWB 태 그의 방향을 특정할 수 있다. 직접파 및 반사파의 입사각을 획득하는 방법은 도 11을 참조하여 설명한다. 도 11에는 CIR의 크기 비(Pb/Pa)와 신호의 입사각 간의 관계를 나타내는 그래프를 도시하였다. 참고로, 도 8의 그래프와 도 11의 그래 프 모두 CIR의 크기 비(Pb/Pa)와 신호의 입사각 간의 관계를 나타내는 그래프임에도 형태가 다소 상이한데, 이와 같이 CIR의 크기 비(Pb/Pa)와 신호의 입사각 간의 관계를 나타내는 그래프는 빔 패턴의 형태, 주 변의 전파 환경, 안테나의 특성 등에 따라서 조금씩 달라질 수 있다. 도 11을 참고하면, 직접파에 대한 CIR의 크기 비(P0,b/P0,a)에 대응되는 전파의 입사각은 0도이고, 반사파에 대한 CIR의 크기 비(P1,b/P1,a)에 대응되는 전파의 입사각은 θ1도임을 알 수 있다. UWB 앵커는 UWB 태그로부터 신호(전파)를 수신하면, 이상 설명한 과정에 따라 직접파의 입사각 및 반 사파의 입사각의 조합(이하, '입사각 조합'이라 함)을 획득할 수 있다. 예를 들어, 도 9 내지 도 11의 실시예에 서 UWB 앵커는 (0, θ1)의 입사각 조합을 획득할 수 있다. UWB 앵커는 획득한 입사각 조합에 기초하여 UWB 태그의 방향을 탐지할 수 있다. 이를 위해, UWB 앵커 는 UWB 태그의 방향별로 대응되는 입사각 조합에 대한 데이터를 미리 획득할 수 있다. 예를 들어, UWB 앵커가 고정된 위치에서 UWB 태그의 방향을 탐지하는 경우라면, UWB 태그의 방향을 변화시 켜가면서 UWB 태그가 신호를 송신하고, UWB 앵커는 신호를 수신하여 입사각 조합을 획득한 후, 입사 각 조합에 대응되는 UWB 태그의 방향을 매칭시켜 미리 저장할 수 있다. 한편, 직접파 및 반사파를 모두 고려한다면 UWB 앵커는 빔 패턴별 CIR의 크기 비에 기초하여 UWB 태그 의 방향뿐만 아니라 거리까지 포함하는 위치를 측정할 수도 있다. 왜냐하면, 전파 환경(e.g. 전파를 반사 시키는 장애물의 위치 등)이 UWB 앵커의 기준 방향(각도가 0인 방향)을 중심으로 좌우 대칭이 아니라면, 특정 입사각 조합에 대응되는 UWB 태그의 위치(거리 및 방향)는 유일할 수 있기 때문이다. 따라서, UWB 앵 커는 UWB 태그로부터 수신한 신호에 기초하여 입사각 조합을 획득하면, 획득한 입사각 조합에 대응되 는 UWB 태그의 위치(거리 및 방향)를 파악할 수 있다. 이를 위해, UWB 앵커는 UWB 태그의 위치 별로 대응되는 입사각 조합에 대한 데이터를 미리 획득할 수 있다. 예를 들어, UWB 앵커가 고정된 위치에 서 UWB 태그의 위치를 탐지하는 경우라면, UWB 태그의 위치를 변화시켜가면서 UWB 태그가 신호 를 송신하고, UWB 앵커는 신호를 수신하여 입사각 조합을 획득한 후, 입사각 조합에 대응되는 UWB 태그 의 위치를 매칭시켜 미리 저장할 수 있다. 또한, 직접파 및 반사파를 모두 고려한다면 UWB 앵커는 주변에 벽이나 물체 등이 존재하는 환경을 알 수 있으므로, UWB 기기들(100, 200)이 위치한 공간에 대한 맵(map)을 이용하여 UWB 태그의 위치를 파악할 수 있다. 이상 설명한 실시예에 의할 경우 반사파까지 고려함으로써 오히려 직접파만을 고려할 때보다 측정 정확도가 더 높아지는 효과를 기대할 수 있다. 이하에서는 도 12 내지 도 17을 참조하여, 일 실시예에 따른 2단계 위치 측정 방법에 대해서 설명한다. 일 실시 예에 따른 2단계 위치 측정 방법은, 목표기기(e.g. UWB 태그)들의 대략적인 위치를 측정하는 1차 측정 단 계와, 1차 측정 결과에 따라 선택된 목표기기들의 정확한 위치를 측정하는 2차 측정 단계를 포함할 수 있다. 도 12에는 위치 측정을 위해 UWB 기기들(100, 200) 간에 신호가 송수신되는 과정을 도시하였다. 도 12를 참고하 면, 위치 측정 프로세스는 디스커버리 단계(discovery phase)와 레인징 단계(ranging phase)로 구성되며, 페어 링(pairing)을 위한 디스커버리 단계를 먼저 수행하고, 페어링이 완료되면 UWB 기기들(100, 200) 간에 메시지 (poll, response, final)를 주고받음으로써 위치를 측정할 수 있다. 디스커버리 단계는 UWB 앵커가 위치를 측정할 목표기기인 UWB 태그를 발견하기 위한 단계로서, 디스 커버리 단계에서 UWB 앵커와 UWB 태그 간의 페어링이 수행될 수 있다. 디스커버리 단계에서 UWB 태그 가 블링크 메시지(blink message)를 주변에 송신하면, 블링크 메시지를 수신한 UWB 앵커는 위치 측정 프로세스를 개시하고자 UWB 태그에 측정 개시 메시지(ranging initial message)를 전송할 수 있다. 블링크 메시지에는 UWB 태그의 식별정보가 포함되므로, UWB 앵커는 어떤 기기로부터 블링크 메시지를 수신한 것인지를 파악하고, 해당 기기에 측정 개시 메시지를 전송할 수 있다. 디스커버리 단계를 통해 UWB 앵커와 UWB 태그가 페어링되면, 이어서 레인징 단계를 수행함으로써 UWB 앵커와 UWB 태그 간 거리가 측정될 수 있다. 레인징 단계에서 UWB 앵커와 UWB 태그 간 거 리를 측정하는 방법은 일반적으로 알려진 송수신 신호의 ToF를 이용한 TWR 방식에 해당되므로, 구체적인 프로세 스에 대한 설명은 생략한다. 기존의 UWB 기반의 위치 측정 기술에서는 디스커버리 단계에서 UWB 기기들(100, 200) 간의 페어링을 수행할 뿐, 기기들 간 거리나 방향에 대한 측정은 수행되지 않는다. 하지만 본 개시의 실시예에 따르면, UWB 앵커는 디스커버리 단계에서 UWB 태그의 대략적인 위치(거리 및 방향)를 측정(1차 측정)하고, 1차 측정 결과에 기 초하여 UWB 태그의 위치를 정밀하게 측정(2차 측정)할지 여부를 결정할 수 있다. 따라서, UWB 앵커의 주변에 복수의 UWB 태그들이 존재하는 경우, UWB 앵커는 복수의 UWB 태그들에 대해서 1차 측정 을 하고, 1차 측정 결과에 기초하여 선별된 UWB 태그에 대해서만 2차 측정을 수행할 수 있다. UWB 앵커 는 주변의 모든 UWB 태그들에 대해서 정밀한 위치 측정을 수행하는 대신, 정밀 측정이 필요한 일부의 UWB 태그들에 대해서만 2차 측정을 수행하므로 불필요한 프로세스를 생략하고 측정 시간을 단축시키는 효 과를 기대할 수 있다. 디스커버리 단계에서 UWB 앵커는 블링크 메시지만을 수신하므로 ToF를 알 수는 없지만, 블링크 메시지의 CIR의 크기로부터 UWB 태그까지의 거리(R)를 대략적으로 파악할 수 있다. 또한, 디스커버리 단계에서 UWB 앵커는 서로 다른 복수의 빔 패턴을 통해 블링크 메시지를 수신함으로써, 앞서 설명한 실시예들의 방법에 따라서 UWB 태그의 방향을 대략적으로 파악할 수 있다. 도 13에는 UWB 앵커 주변에 복수의 UWB 태그들(200a, 200b)이 존재하는 상황을 도시하였다. 도 13에 도시 된 상황에서 제1 UWB 태그(200a)와 제2 UWB 태그(200b)는 각각 블링크 메시지를 주변에 송신한다. UWB 앵커 는 제1 UWB 태그(200a)로부터 수신한 블링크 메시지로부터 제1 UWB 태그(200a)와의 거리(R1)와 제1 UWB 태그(200a)의 방향(θ1)을 획득할 수 있다. 마찬가지로 UWB 앵커는 제2 UWB 태그(200b)로부터 수신한 블링 크 메시지로부터 제2 UWB 태그(200b)와의 거리(R2)와 제2 UWB 태그(200b)의 방향(θ2)을 획득할 수 있다. UWB 앵커가 UWB 태그들(200a, 200b)로부터 수신한 블링크 메시지에 기초하여 1차 측정을 수행하는 방법을 도 14를 참조하여 설명한다. 도 14의 그래프에는 UWB 앵커가 제1 UWB 태그(200a) 및 제2 UWB 태그(200b)로부터 각각 수신한 블 링크 메시지에 대응되는 CIR을 표시하였다. 그래프상의 제1 영역은 제1 UWB 태그(200a)로부터 수신 한 블링크 메시지에 대응되고, 제2 영역은 제2 UWB 태그(200b)로부터 수신한 블링크 메시지에 대응된다. UWB 앵커는 제1 영역에 포함된 상관값들을 이용하여 제1 UWB 태그(200a)까지의 거리(R1)를 대략적으 로 측정할 수 있다. UWB 기기들 간 거리가 짧을수록 수신 신호의 세기는 커지고, 반대로 UWB 기기들 간 거리가 길수록 수신 신호의 세기는 작아진다. 따라서, UWB 앵커는 제1 영역에 포함된 CIR의 크기(Pa)를 산 출하고, 산출된 CIR의 크기(Pa)에 기초하여 제1 UWB 태그(200a)까지의 거리(R1)를 대략적으로 예측할 수 있다. 마찬가지로, UWB 앵커는 제2 영역에 포함된 CIR의 크기(Pb)를 산출하고, 산출된 CIR의 크기(Pb)에기초하여 제2 UWB 태그(200b)까지의 거리(R2)를 대략적으로 예측할 수 있다. 일 실시예에 따르면, UWB 앵커는 앞서 도 6 및 수학식 1을 참조하여 설명한 방법에 따라 CIR의 크기(Pa, Pb)를 산출할 수 있다. 도 14를 참고하면, UWB 앵커는 제1 영역에서 상관값의 크기가 처음으로 기준 값을 초과하는 시점(FP_INDEX) 이후 처음 등장하는 3개의 상관값을(a1, a2, a3)을 각각 수학식 1의 F1, F2, F3에 대입함으로써 제1 영역에 포함된 CIR의 크기(Pa)를 산출할 수 있다. UWB 앵커는 같은 방법에 따라 제2 영역에 포함된 CIR의 크기(Pb)도 산출할 수 있다. UWB 앵커는 서로 다른 복수의 빔 패턴을 통해 UWB 태그들(200a, 200b)로부터 블링크 메시지를 수신하면, 각 블링크 메시지에 대해서 빔 패턴별 CIR의 크기 비를 산출하고, 산출된 CIR의 크기 비에 기초하여 블링크 메 시지의 입사각(θ1, θ2)을 획득할 수 있다. UWB 앵커는 이상 설명한 방법에 따라 디스커버리 단계에서 1차 측정을 수행함으로써 제1 및 제2 UWB 태그 (200a, 200b)의 대략적인 위치(거리 및 방향)를 파악할 수 있다. UWB 앵커는 1차 측정 결과에 기초하여 2차 측정을 수행할 UWB 기기를 선택할 수 있는데, 2차 측정 대상을 선택하는 방법은 다음과 같다. 일 실시예에 따르면, UWB 앵커는 1차 측정을 통해 파악한 UWB 태그의 거리 및 방향 중 적어도 하나가 기준값보다 작다면 해당 UWB 태그를 2차 측정을 수행할 대상으로 선택할 수 있다. 이를 위해, 거리 및 방 향 각각에 대해서 기준값이 미리 설정될 수 있다. 예를 들어 도 13에 도시된 실시예에서, UWB 앵커는 제1 UWB 태그(200a) 및 제2 UWB 태그(200b)의 거리 및 방향을 미리 설정된 기준값과 비교하고, 만약 제2 UWB 태그 (200b)의 거리(R2) 및 방향(θ2) 중 적어도 하나가 기준값보다 크다면 제2 UWB 태그(200b)는 2차 측정 대상에서 제외시킬 수 있다. 또는 일 실시예에 따르면, UWB 앵커는 1차 측정을 통해 파악한 UWB 태그의 거리 및 방향 모두가 기준값보다 작은 경우에만 해당 UWB 태그를 2차 측정을 수행할 대상으로 선택할 수도 있다. 일 실시예에 따르면, UWB 앵커는 UWB 태그에 대해서 1차 측정을 적어도 두 번 이상 수행하고, 1차 측 정 동안 UWB 태그의 거리 및 방향 중 어느 하나라도 변경된다면(또는 변경된 정도가 미리 설정된 기준값보 다 크다면) 해당 UWB 태그를 2차 측정 대상으로 선택할 수 있다. 두 번 이상의 1차 측정을 수행하기 위해 서 UWB 앵커는 동일한 UWB 태그로부터 적어도 두 번 이상 블링크 메시지를 수신해야 한다. UWB 앵커 는 수신한 블링크 메시지마다 1차 측정을 수행해 대략적인 위치를 파악하고, 서로 비교함으로써 UWB 태그 가 이동했는지 여부, 그리고 얼마나 이동했는지 등을 판단할 수 있다. 도 16을 참고하면, UWB 앵커는 제1 시점에 제1 위치(R11, θ11)의 제1 UWB 태그(200a)로부터 제1 블링크 메시지(Blink 11)를 수신한다. 이후 제1 UWB 태그(200a)는 제2 위치(R12, θ12)로 이동하여 제2 블링크 메시지 (Blink 12)를 송신하고, UWB 앵커가 이를 수신한다. UWB 앵커는 제1 블링크 메시지(Blink 11)로부터 제1 위치(R11, θ11)를 획득하고, 제2 블링크 메시지(Blink 12)로부터 제2 위치(R12, θ12)를 획득할 수 있다. UWB 앵커가 제1 블링크 메시지(Blink 11) 및 제2 블링크 메시지(Blink 12)에 대해서 1차 측정을 수행하여 제1 위치(R11, θ11) 및 제2 위치(R12, θ12)를 측정하는 방법은 앞서 도 13 및 도 14를 참조하여 설명한 바와 같다. UWB 앵커는 제1 위치(R11, θ11)와 제2 위치(R12, θ12)를 비교하여 위치 변화가 발생한 것으로 판단되면 제1 UWB 태그(200a)를 2차 측정 대상으로 선택할 수 있다. 또는 일 실시예에 따르면, UWB 앵커는 제1 위치 (R11, θ11)와 제2 위치(R12, θ12)를 비교하여 위치 변화의 정도가 미리 설정된 일정 기준을 초과하는 경우에만 제1 UWB 태그(200a)를 2차 측정 대상으로 선택할 수도 있다. UWB 앵커는 주변의 복수의 UWB 태그들 중에서 2차 측정 대상이 선정되면, 선정된 UWB 태그들의 거리 및 방향을 정밀하게 측정할 수 있다. 일 실시예에 따르면, UWB 앵커는 도 12에 도시된 바와 같이 선 정된 UWB 태그와 메시지를 송수신하면서 신호의 ToF를 측정하고, 측정된 ToF에 기초하여 UWB 태그와 의 거리를 측정할 수 있다. (TWR 방식) 또한, UWB 앵커는 UWB 태그로부터 수신한 메시지들(poll, final)에 대해서 빔 패턴별 CIR의 크기 비를 산출하고, 산출된 CIR의 크기 비에 기초하여 UWB 태그의 방향을 측정할 수 있다. (방향을 탐지하는 방법은 앞서 도 3 내지 도 11에 대한 설명 참조) 도 15 및 도 17에는 이상 설명한 2단계 위치 측정 방법을 수행하기 위한 단계들을 정리한 순서도를 도시하였다. 따라서, 도 15 및 도 17에서 생략된 내용이라고 할지라도 앞서 도 12 내지 도 14 및 도 16을 참조하여 설명한 내용들은 도 15 및 도 17의 순서도에도 동일하게 적용될 수 있다. 도 15를 참고하면, 1501 단계에서 UWB 앵커는 복수의 기기(UWB 태그)들로부터 블링크 메시지를 수신한다. 1502 단계에서 UWB 앵커는 수신한 블링크 메시지에 기초하여 복수의 기기들의 위치 및 방향을 1차 측정한 다. 1503 단계에서 UWB 앵커는 1차 측정 결과에 기초하여 2차 측정을 수행할 적어도 하나의 기기를 선택한 다. 도 17에는 도 15의 1503 단계에 포함되는 세부 단계들을 도시하였다. 도 17을 참고하면, 1701 단계에서 UWB 앵 커는 제1 기기(제1 UWB 태그)로부터 수신한 복수의 블링크 메시지에 기초하여 복수의 시점에 대응되는 거 리 및 방향을 측정(1차 측정)한다. 1702 단계에서 UWB 앵커는 제1 기기의 위치 변화가 일정 기준을 초과했는지 여부를 판단한다. 판단 결과, 제1 기기의 위치 변화가 일정 기준을 초과했다면, 1703 단계로 진행하여 UWB 앵커는 제1 기기 를 2차 측정을 수행할 기기로 선택한다. 하지만, 제1 기기의 위치 변화가 일정 기준을 초과하지 않았다면, 1704 단계로 진행하여 UWB 앵커는 제1 기기를 2차 측정을 수행할 기기에서 제외시킨다. 다시 도 15로 돌아와서, 1504 단계에서 UWB 앵커는 선택된 적어도 하나의 기기의 위치 및 방향을 2차 측정 (정밀 측정)한다. 이하에서는 본 개시의 실시예들에서 사용되는 안테나, 즉 복수의 빔 패턴을 갖는 안테나를 구현하는 방법에 대 해서 설명한다. 앞서 설명한 바와 같이 일 실시예에 따르면, 하나의 안테나에 복수의 빔 패턴이 형성되도록 설계된 안테나(e.g. 하나의 방사체상에 복수의 급전부가 형성되는 SRMP 안테나)를 이용할 수도 있고, 서로 다른 빔 패턴을 갖는 둘 이상의 안테나를 이용할 수도 있다. 다만 이때, 방향 탐지에 위상차를 이용하는 것이 아니므로 안테나들 간의 간격을 조정할 필요는 없다. 이 밖에도, 안테나의 급전선(feed line) 및 급전부(feed point)의 위치나 간격을 조절함으로써 안테나가 원하는 빔 패턴을 형성하도록 할 수 있으며, 슬랏(slot) 급전 구조를 적용함으로써 UWB 기기에 적합한 광대역 특성을 갖도록 할 수도 있다. 또한, 일 실시예에 따르면 빔 패턴이 동일한 두 개의 안테나를 설치하고 180도 하이브리드를 이용함으로써 합 빔 패턴(sum beam pattern) 및 차 빔 패턴(delta beam pattern)을 형성하도록 제어할 수도 있다. 이에 대해서 는 도 18을 참조하여 설명한다. 도 18을 참고하면, 안테나는 동일한 빔 패턴을 갖는 제1 안테나(110a) 및 제2 안테나(110b)가 포함한 다. 제1 안테나(110a)와 제2 안테나(110b) 간의 거리는 반파장 거리만큼으로 유지될 필요는 없다. 안테나들 (110a, 110b) 간의 거리에 특별한 제약은 없으나 합과 차의 빔 패턴을 효과적으로 생성하기 위해, 그리고 안테 나 설치 공간을 줄이기 위해 안테나들(110a, 110b)은 반파장 이내의 간격으로 위치할 수 있다. 두 안테나들(110a, 110b)에는 180도 하이브리드 모듈이 연결되어 신호 패킷의 수신 중에 스위칭을 통해 안 테나에 공급되는 전류의 방향을 변경함으로써 서로 다른 2개의 빔 패턴을 형성할 수 있다. 이와 같은 방법에 따 라 형성되는 합 빔 패턴 및 차 빔 패턴을 도 18에 도시하였다. 도 18에 도시된 합 빔 패턴을 제1 빔 패턴이라고 하고, 차 빔 패턴을 제2 빔 패턴이라고 하면, 도 18의 안테나들(110a, 110b)을 이용하여 앞 서 설명한 실시예들을 수행할 수 있다. 한편, 일 실시예에 따르면, 앞서 도 5c에 도시된 바와 같이 안테나 3개가 120도 간격으로 원형으로 배치되어 360도 빔 특성을 갖는 안테나를 이용해서도 본 개시의 실시예들을 수행할 수 있다. 또한 일 실시예에 따르면, 앞서 도 5d에 도시된 바와 같이 안테나 4개가 90도 간격으로 원형으로 배치되어 360도 빔 특성을 갖는 안테나를 이용해서도 본 개시의 실시예들을 수행할 수 있다. 이상 설명한 실시예들에 따라 서로 다른 복수의 빔 패턴을 갖는 안테나를 이용하여 UWB 기기의 방향을 탐지한다 면 다음과 같은 장점들을 기대할 수 있다.1) 안테나를 전파의 반파장만큼 이격시켜 설치할 필요가 없으므로, 안테나의 설치 공간이 감소하고, 자유롭게 안테나를 배치할 수 있음. 2) 위상차를 이용하지 않으므로 위상 오차에 민감한 문제가 해결됨. 3) 반사파로 인해 측정 정확도가 낮아지지 않고, 오히려 반사파까지 고려할 경우 측정 정확도가 높아짐. 일 실시예에 따른 안테나 빔 패턴의 차이를 이용하여 UWB 기기의 방향을 탐지하는 방법은, 서로 다른 복수의 빔 패턴을 형성하는 적어도 하나의 안테나를 통해 목표기기로부터 신호를 수신하는 단계, 상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하는 단계 및 상기 채널 임펄스 응답에 기초하여 상기 목표기기의 방향을 탐지하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 목표기기의 방향을 탐지하는 단계는, 서로 다른 빔 패턴에 대응되는 채널 임펄스 응 답의 크기 비교를 통해 상기 목표기기의 방향을 탐지할 수 있다. 일 실시예에 따르면, 상기 목표기기의 방향을 탐지하는 단계는, 제1 빔 패턴에 대응되는 채널 임펄스 응답에 대 한 제2 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비(magnitude ratio)를 획득하는 단계, 상기 획득한 크기 비에 대응되는 신호의 입사각을 획득하는 단계 및 상기 신호의 입사각에 기초하여 상기 목표기기의 방향을 결정 하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 목표기기의 방향을 탐지하는 단계는, 상기 신호의 직접파 및 반사파 각각에 대해서, 제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비를 획득 하는 단계, 상기 획득한 크기 비에 기초하여, 상기 직접파 및 반사파의 입사각을 각각 획득하는 단계 및 상기 직접파 및 반사파의 입사각 조합에 대응되는 상기 목표기기의 위치를 결정하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 목표기기로부터 신호를 수신하는 단계는, 상기 적어도 하나의 안테나에 제1 빔 패턴 이 형성된 상태에서 상기 신호의 제1 구간을 수신하는 단계, 상기 제1 구간의 수신이 완료되면, 상기 적어도 하 나의 안테나에 제2 빔 패턴이 형성되도록 변경하는 단계 및 상기 적어도 하나의 안테나에 제2 빔 패턴이 형성된 상태에서 상기 신호의 제2 구간을 수신하는 단계를 포함할 수 있다. 일 실시예에 따르면, 상기 안테나는 하나의 방사체에 복수의 급전부(feed point)가 형성된 형태의 안테나일 수 있다. 일 실시예에 따르면, 상기 안테나는 동일한 빔 패턴을 갖는 복수의 안테나가 180도 하이브리드 모듈을 통해 연 결된 형태이며, 상기 복수의 안테나에 흐르는 전류의 방향을 조절함으로써 상기 동일한 빔 패턴의 합 패턴(sum pattern) 및 차 패턴(delta pattern) 구현이 가능한 것일 수 있다. 일 실시예에 따른 안테나 빔 패턴의 차이를 이용하여 방향을 탐지하는 전자 기기는, 서로 다른 복수의 빔 패턴 을 형성하기 위한 안테나, 방향 탐지를 수행하기 위한 프로그램이 저장되는 메모리 및 적어도 하나의 프로세서 를 포함하며, 상기 프로세서는, 상기 안테나를 통해 목표기기로부터 신호를 수신하면, 상기 복수의 빔 패턴별로 상기 수신한 신호의 채널 임펄스 응답을 획득하고, 상기 채널 임펄스 응답에 기초하여 상기 목표기기의 방향을 탐지할 수 있다. 일 실시예에 따르면, 상기 프로세서는 상기 목표기기의 방향을 탐지함에 있어서, 서로 다른 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비교를 통해 상기 목표기기의 방향을 탐지할 수 있다. 일 실시예에 따르면, 상기 프로세서는, 제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에 대응되 는 채널 임펄스 응답의 크기 비(magnitude ratio)를 획득하고, 상기 획득한 크기 비에 대응되는 신호의 입사각 을 획득하고, 상기 신호의 입사각에 기초하여 상기 목표기기의 방향을 결정할 수 있다. 일 실시예에 따르면, 상기 프로세서는, 상기 신호의 직접파 및 반사파 각각에 대해서, 제1 빔 패턴에 대응되는 채널 임펄스 응답에 대한 제2 빔 패턴에 대응되는 채널 임펄스 응답의 크기 비를 획득하고, 상기 획득한 크기 비에 기초하여 상기 직접파 및 반사파의 입사각을 각각 획득하고, 상기 직접파 및 반사파의 입사각 조합에 대응 되는 상기 목표기기의 위치를 결정할 수 있다. 일 실시예에 따르면, 상기 프로세서는 상기 목표기기로부터 신호를 수신함에 있어서, 상기 적어도 하나의 안테 나에 제1 빔 패턴이 형성된 상태에서 상기 신호의 제1 구간을 수신하고, 상기 제1 구간의 수신이 완료되면 상기 적어도 하나의 안테나에 제2 빔 패턴이 형성되도록 변경한 후, 상기 적어도 하나의 안테나에 제2 빔 패턴이 형성된 상태에서 상기 신호의 제2 구간을 수신할 수 있다. 일 실시예에 따르면, 상기 안테나는 하나의 방사체에 복수의 급전부(feed point)가 형성된 형태의 안테나일 수 있다. 일 실시예에 따르면, 상기 안테나는 동일한 빔 패턴을 갖는 복수의 안테나가 180도 하이브리드 모듈을 통해 연 결된 형태이며, 상기 복수의 안테나에 흐르는 전류의 방향을 조절함으로써 상기 동일한 빔 패턴의 합 패턴(sum pattern) 및 차 패턴(delta pattern) 구현이 가능한 것일 수 있다. 본 개시의 다양한 실시예들은 하나 이상의 컴퓨터 프로그램들에 의해 구현 또는 지원될 수 있고, 컴퓨터 프로그 램들은 컴퓨터 판독 가능한 프로그램 코드(code)로부터 형성되고, 컴퓨터로 판독 가능한 매체에 수록될 수 있다. 본 개시에서, \"애플리케이션(application)\" 및 \"프로그램(program)\"은 컴퓨터 판독 가능한 프로그램 코드 에서의 구현에 적합한 하나 이상의 컴퓨터 프로그램, 소프트웨어 컴포넌트, 명령어 세트, 프로시저(procedure), 함수, 개체(object), 클래스, 인스턴스, 관련 데이터, 또는 그것의 일부를 나타낼 수 있다. \"컴퓨터 판독 가능 한 프로그램 코드\"는, 소스 코드, 목적 코드, 및 실행 가능한 코드를 포함하는 다양한 유형의 컴퓨터 코드를 포 함할 수 있다. \"컴퓨터 판독 가능한 매체\"는, ROM(read only memory), RAM(random access memory), 하드 디스 크 드라이브(HDD), CD(compact disc), DVD(digital video disc), 또는 다양한 유형의 메모리와 같이, 컴퓨터에 의해 액세스(access)될 수 있는 다양한 유형의 매체를 포함할 수 있다. 또한, 기기로 읽을 수 있는 저장 매체는, 비일시적(non-transitory) 저장 매체의 형태로 제공될 수 있다. 여기 서, ‘비일시적 저장 매체'는 실재(tangible)하는 장치이고, 일시적인 전기적 또는 다른 신호들을 전송하는 유 선, 무선, 광학적, 또는 다른 통신 링크들을 배제할 수 있다. 한편, 이 '비일시적 저장 매체'는 데이터가 저장 매체에 반영구적으로 저장되는 경우와 임시적으로 저장되는 경우를 구분하지 않는다. 예를 들어, '비일시적 저 장 매체'는 데이터가 임시적으로 저장되는 버퍼를 포함할 수 있다. 컴퓨터 판독 가능한 매체는 컴퓨터에 의해 액세스될 수 있는 임의의 가용 매체일 수 있고, 휘발성 및 비휘발성 매체, 분리형 및 비분리형 매체를 모두 포 함할 수 있다. 컴퓨터 판독 가능한 매체는, 데이터가 영구적으로 저장될 수 있는 매체와 데이터가 저장되고 나 중에 덮어쓰기 될 수 있는 매체, 이를테면 재기입 가능한 광 디스크 또는 소거 가능한 메모리 디바이스를 포함 한다. 일 실시예에 따르면, 본 문서에 개시된 다양한 실시예들에 따른 방법은 컴퓨터 프로그램 제품(computer program product)에 포함되어 제공될 수 있다. 컴퓨터 프로그램 제품은 상품으로서 판매자 및 구매자 간에 거래될 수 있 다. 컴퓨터 프로그램 제품은 기기로 읽을 수 있는 저장 매체(예를 들어, compact disc read only memory (CD- ROM))의 형태로 배포되거나, 또는 어플리케이션 스토어를 통해 또는 두 개의 사용자 장치들(예를 들어, 스마트 폰) 간에 직접, 온라인으로 배포(예를 들어, 다운로드 또는 업로드)될 수 있다. 온라인 배포의 경우에, 컴퓨터 프로그램 제품(예를 들어, 다운로더블 앱(downloadable app))의 적어도 일부는 제조사의 서버, 어플리케이션 스 토어의 서버, 또는 중계 서버의 메모리와 같은 기기로 읽을 수 있는 저장 매체에 적어도 일시 저장되거나, 임시 적으로 생성될 수 있다."}
{"patent_id": "10-2023-0036710", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "전술한 본 개시의 설명은 예시를 위한 것이며, 본 개시가 속하는 기술분야의 통상의 지식을 가진 자는 본 개시 의 기술적 사상이나 필수적인 특징을 변경하지 않고서 다른 구체적인 형태로 쉽게 변형이 가능하다는 것을 이해 할 수 있을 것이다. 예를 들어, 설명된 기술들이 설명된 방법과 다른 순서로 수행되거나, 및/또는 으로 설명된 시스템, 구조, 장치, 회로 등의 구성요소들이 설명된 방법과 다른 형태로 결합 또는 조합되거나, 다른 구성요소 또는 균등물에 의하여 대치되거나 치환되더라도 적절한 결과가 달성될 수 있다. 그러므로 이상에서 기술한 실시 예들은 모든 면에서 예시적인 것이며 한정적이 아닌 것으로 이해해야만 한다. 예를 들어, 단일형으로 설명되어 있는 각 구성 요소는 분산되어 실시될 수도 있으며, 마찬가지로 분산된 것으로 설명되어 있는 구성 요소들도 결 합된 형태로 실시될 수 있다. 본 개시의 범위는 상기 상세한 설명보다는 후술하는 특허청구범위에 의하여 나타내어지며, 특허청구범위의 의미 및 범위 그리고 그 균등 개념으로부터 도출되는 모든 변경 또는 변형된 형태가 본 개시의 범위에 포함되는 것으 로 해석되어야 한다.도면 도면1 도면2 도면3 도면4 도면5a 도면5b 도면5c 도면5d 도면6 도면7 도면8 도면9 도면10 도면11 도면12 도면13 도면14 도면15 도면16 도면17 도면18"}
{"patent_id": "10-2023-0036710", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시예에 따른, UWB 기반의 위치 측정을 수행하기 위한 시스템 환경을 도시한 도면이다. 도 2는 본 개시의 일 실시예에 따른, UWB 기기에 포함된 구성을 설명하기 위한 도면이다. 도 3 및 도 4는 본 개시의 실시예들에 따른, UWB 기반의 방향 탐지 방법을 설명하기 위한 순서도들이다. 도 5a 내지 도 5d는 본 개시의 실시예들에 따른, UWB 기기에서 서로 다른 복수의 빔 패턴을 형성하는 안테나를 통해 신호를 수신하는 동작을 설명하기 위한 도면들이다. 도 6은 본 개시의 일 실시예에 따른, UWB 기기에서 수신하는 신호의 채널 임펄스 응답을 도시한 그래프이다. 도 7 및 도 8은 본 개시의 일 실시예에 따른, UWB 기기(앵커)에서 수신한 신호들의 채널 임펄스 응답에 기초하 여, 신호를 송신한 UWB 기기(태그)의 방향을 탐지하는 방법을 설명하기 위한 도면들이다. 도 9 내지 도 11은 본 개시의 일 실시예에 따른, 직접파뿐만 아니라 반사파까지 고려하여 UWB 기기의 방향을 탐 지하면서 주변에 벽 등 물체를 인식하는 방법을 설명하기 위한 순서도들이다. 도 12 내지 도 14는 본 개시의 일 실시예에 따른, 2단계 위치 측정 방법을 설명하기 위한 도면들이다. 도 15는 본 개시의 일 실시예에 따른, 2단계 위치 측정 방법을 설명하기 위한 순서도이다. 도 16은 본 개시의 일 실시예에 따른, 2단계 위치 측정 방법에서, 2차 측정(정밀 측정)을 수행할 기기를 선택하 기 위한 방법을 설명하기 위한 도면이다. 도 17은 본 개시의 일 실시예에 따른, 2단계 위치 측정 방법에서, 2차 측정(정밀 측정)을 수행할 기기를 선택하 기 위한 방법을 설명하기 위한 순서도이다. 도 18은 본 개시의 일 실시예에 따른, 서로 다른 복수의 빔 패턴을 형성하는 안테나를 설명하기 위한 도면이다."}
