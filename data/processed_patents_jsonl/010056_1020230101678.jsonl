{"patent_id": "10-2023-0101678", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0020150", "출원번호": "10-2023-0101678", "발명의 명칭": "이미지 간 차이를 줄이기 위한 전처리 방법 및 장치", "출원인": "삼성전자주식회사", "발명자": "김영동"}}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "소스 이미지를 전처리하는 방법으로서, 소스 이미지에 복수의 커널을 적용하여 특성맵을 출력하는 단계,상기 소스 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 소스 이미지를 생성하는 단계, 그리고상기 재구성된 소스 이미지와 타깃 이미지 간의 손실 함수의 값을 바탕으로 상기 복수의 커널을 업데이트하는단계를 포함하는 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에서,상기 소스 이미지에 복수의 커널을 적용하여 특성맵을 출력하는 단계는,상기 소스 이미지에 상기 복수의 커널 중 전경 커널을 적용하는 단계, 그리고상기 소스 이미지에 상기 복수의 커널 중 배경 커널을 적용하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에서,상기 소스 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 소스 이미지를 생성하는 단계는,상기 전경 커널로부터 출력되는 특성맵에 상기 복수의 마스크 중 전경 마스크를 적용하는 단계, 그리고상기 배경 커널로부터 출력되는 특성맵에 상기 복수의 마스크 중 배경 마스크를 적용하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에서,상기 소스 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 소스 이미지를 생성하는 단계는,상기 전경 마스크에 의해 마스킹된 이미지 및 상기 배경 마스크에 의해 마스킹된 이미지를 합쳐서 상기 재구성된 소스 이미지를 생성하는 단계를 더 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에서,상기 손실 함수의 값을 바탕으로 상기 복수의 커널이 업데이트 되면, 상기 소스 이미지에 업데이트된 복수의 커널 및 상기 복수의 마스크를 적용하여 상기 소스 이미지를 다시 재구성하는 단계, 그리고상기 소스 이미지가 다시 재구성되면, 상기 복수의 커널의 업데이트를 종료할지 여부를 결정하는 단계를 더 포함하는 방법.공개특허 10-2025-0020150-3-청구항 6 제5항에서,상기 소스 이미지가 다시 재구성되면, 상기 복수의 커널의 업데이트를 종료할지 여부를 결정하는 단계는,상기 재구성된 소스 이미지와 상기 타깃 이미지 간의 손실 함수의 값을 바탕으로 상기 복수의 커널을 다시 업데이트 하거나 또는 상기 복수의 커널의 업데이트를 통한 트레이닝을 종료하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제5항에서,상기 다시 재구성된 소스 이미지가 생성되면, 상기 복수의 커널의 업데이트를 종료할지 여부를 결정하는단계는,상기 소스 이미지가 미리 결정된 횟수만큼 재구성되면, 상기 복수의 커널의 업데이트를 통한 트레이닝을 종료하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제5항에서,상기 트레이닝의 종료가 결정되면, 트레이닝된 복수의 커널 중 트레이닝된 배경 커널을 사용하여 상기 소스 이미지를 전처리하는 단계를 더 포함하는 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "전자 소자의 결함을 검출하는 방법으로서,상기 전자 소자의 결함 이미지에 대응하는 기준 이미지를 복수의 커널 및 복수의 마스크를 사용하여재구성하고, 재구성된 기준 이미지와 상기 결함 이미지 간의 차이를 바탕으로 상기 복수의 커널을 트레이닝하는단계, 상기 복수의 커널 중 트레이닝된 배경 커널을 사용하여 상기 기준 이미지로부터 전처리된 기준 이미지를 추론하는 단계, 그리고상기 전처리된 기준 이미지와 상기 결함 이미지 간의 비교를 통해 상기 결함 이미지에서 상기 결함을 검출하는단계를 포함하는 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에서,상기 전자 소자의 결함 이미지에 대응하는 기준 이미지를 복수의 커널 및 복수의 마스크를 사용하여재구성하고, 재구성된 기준 이미지와 상기 결함 이미지 간의 차이를 바탕으로 상기 복수의 커널을 트레이닝하는단계는,상기 기준 이미지에 상기 복수의 커널을 적용하여 특성맵을 출력하는 단계, 상기 특성맵에 상기 복수의 마스크를 적용하여 상기 기준 이미지를 재구성하는 단계, 그리고재구성된 기준 이미지를 바탕으로 상기 복수의 커널을 업데이트하는 단계를 포함하는, 방법.공개특허 10-2025-0020150-4-청구항 11 제10항에서,상기 기준 이미지에 상기 복수의 커널을 적용하여 특성맵을 출력하는 단계는,상기 기준 이미지에 상기 복수의 커널 중 전경 커널을 적용하는 단계, 그리고상기 기준 이미지에 상기 복수의 커널 중 배경 커널을 적용하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에서,상기 특성맵에 상기 복수의 마스크를 적용하여 상기 기준 이미지를 재구성하는 단계는, 상기 전경 커널로부터 출력되는 특성맵에 상기 복수의 마스크 중 전경 마스크를 적용하는 단계, 상기 배경 커널로부터 출력되는 특성맵에 상기 복수의 마스크 중 배경 마스크를 적용하는 단계, 그리고상기 전경 마스크에 의해 마스킹된 이미지 및 상기 배경 마스크에 의해 마스킹된 이미지를 합쳐서 상기 기준 이미지를 재구성하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "기준 이미지를 전처리하는 장치로서, 프로세서 및 메모리를 포함하고, 상기 프로세서는 상기 메모리에 저장된 프로그램을 실행하여,상기 기준 이미지에 복수의 커널을 적용하여 특성맵을 출력하는 단계,상기 기준 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 기준 이미지를 생성하는 단계, 그리고상기 재구성된 기준 이미지와 결함 이미지 간의 손실 함수의 값을 바탕으로 상기 복수의 커널을 업데이트하는단계를 수행하는 장치."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제13항에서,상기 기준 이미지에 복수의 커널을 적용하여 특성맵을 출력하는 단계를 수행할 때, 상기 프로세서는,상기 기준 이미지에 상기 복수의 커널 중 전경 커널을 적용하는 단계, 그리고상기 기준 이미지에 상기 복수의 커널 중 배경 커널을 적용하는 단계를 수행하는, 장치."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에서,상기 기준 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 기준 이미지를 생성하는 단계를 수행할 때, 상기 프로세서는,상기 전경 커널로부터 출력되는 특성맵에 상기 복수의 마스크 중 전경 마스크를 적용하는 단계, 그리고상기 배경 커널로부터 출력되는 특성맵에 상기 복수의 마스크 중 배경 마스크를 적용하는 단계를 수행하는, 장치.공개특허 10-2025-0020150-5-청구항 16 제15항에서,상기 기준 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 기준 이미지를 생성하는 단계를 수행할 때, 상기 프로세서는,상기 전경 마스크에 의해 마스킹된 이미지 및 상기 배경 마스크에 의해 마스킹된 이미지를 합쳐서 상기 재구성된 기준 이미지를 생성하는 단계를 더 수행하는, 장치."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제13항에서,상기 프로세서는 상기 프로그램을 실행하여,상기 손실 함수의 값을 바탕으로 상기 복수의 커널이 업데이트 되면, 상기 기준 이미지에 업데이트된 복수의 커널 및 상기 복수의 마스크를 적용하여 상기 기준 이미지를 다시 재구성하는 단계, 그리고상기 기준 이미지가 다시 재구성되면, 상기 복수의 커널의 업데이트를 종료할지 여부를 결정하는 단계를 더 수행하는 장치."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제17항에서,상기 기준 이미지가 다시 재구성되면, 상기 복수의 커널의 업데이트를 종료할지 여부를 결정하는 단계를 수행할때, 상기 프로세서는,상기 재구성된 기준 이미지와 상기 결함 이미지 간의 손실 함수의 값을 바탕으로 상기 복수의 커널을 다시 업데이트 하거나 또는 상기 복수의 커널의 업데이트를 통한 트레이닝을 종료하는 단계를 수행하는, 장치."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제17항에서,상기 기준 이미지가 다시 재구성되면, 상기 복수의 커널의 업데이트를 종료할지 여부를 결정하는 단계를 수행할때, 상기 프로세서는,상기 기준 이미지가 미리 결정된 횟수만큼 재구성되면, 상기 복수의 커널의 업데이트를 통한 트레이닝을 종료하는 단계를 수행하는, 장치."}
{"patent_id": "10-2023-0101678", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제17항에서,상기 프로세서는 상기 프로그램을 실행하여,상기 트레이닝의 종료가 결정되면, 업데이트된 복수의 커널 중 업데이트된 배경 커널을 사용하여 상기 기준 이미지를 전처리하는 단계를 더 수행하는 장치."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "소스 이미지에 복수의 커널을 적용하여 특성맵을 출력하는 단계, 소스 이미지에 대응하는 특성맵에 복수의 마스 크를 적용하여 재구성된 소스 이미지를 생성하는 단계, 그리고 재구성된 소스 이미지와 타깃 이미지 간의 손실 함수의 값을 바탕으로 커널을 업데이트하는 단계를 포함하는 소스 이미지를 전처리하는 방법 및 장치가 제공된다."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 기재는 이미지 간 차이를 줄이기 위해 이미지를 전처리하는 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "전자 소자의 불량 검사는 여러 분야에서 설비 이상을 방지하고 공정 사고를 사전에 예방하기 위해 필요한 중요 한 절차이다. 전자 소자의 이미지 데이터에 존재하는 불량을 감지하기 위해서, 결함 신호(Defect Signal)가 추 출될 수 있다. 전자 소자의 특정 이미지에 대한 기준 이미지(Reference)와 특정 이미지 사이의 차이(Difference) 이미지로부터 결함 신호가 추출될 수 있다. 이때, 미세한 결함 신호 대비 높은 배경 잡음(background Noise(Low SNR))으로 인 해 결함 신호가 제대로 추출되지 못할 수 있고, 그로 인해 결함 검사 시스템의 성능도 저하될 수 있다."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "한 실시예는 소스 이미지를 전처리하는 방법을 제공한다. 다른 실시예는 전처리된 기준 이미지를 사용하여 전자 소자의 결함을 검출하는 방법을 제공한다. 또 다른 실시예는 기준 이미지를 전처리하는 방법을 제공한다."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "한 실시예에 따르면, 소스 이미지를 전처리하는 방법이 제공된다. 상기 방법은, 소스 이미지에 복수의 커널을 적용하여 특성맵을 출력하는 단계, 소스 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 소스 이미지를 생성하는 단계, 그리고 재구성된 소스 이미지와 타깃 이미지 간의 손실 함수의 값을 바탕으로 커널의 가중치를 업데이트하는 단계를 포함한다. 다른 실시예에 따르면, 전자 소자의 결함을 검출하는 방법이 제공된다. 상기 방법은, 전자 소자의 결함 이미지 에 대응하는 기준 이미지를 복수의 커널 및 복수의 마스크를 사용하여 전처리하는 단계, 그리고 전처리된 기준 이미지와 상기 결함 이미지 간의 비교를 통해 결함 이미지에서 결함을 검출하는 단계를 포함한다. 또 다른 실시예에 따르면, 기준 이미지를 전처리하는 장치가 제공된다. 상기 장치는 프로세서 및 메모리를 포함 하고, 프로세서는 메모리에 저장된 프로그램을 실행하여, 기준 이미지에 복수의 커널을 적용하여 특성맵을 출력 하는 단계, 기준 이미지에 대응하는 특성맵에 복수의 마스크를 적용하여 재구성된 기준 이미지를 생성하는 단계, 그리고 재구성된 기준 이미지와 결함 이미지 간의 손실 함수의 값을 바탕으로 커널을 업데이트하는 단계 를 수행한다."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "결함을 포함하는 것으로 추정되는 이미지와 그에 대응하는 기준 이미지의 배경 차이를 최소화시키기 위해 기준 이미지에 대해 전처리를 수행함으로써 결함 이미지와 기준 이미지 간의 차이에서 잡음을 제거하고, 결함 이미지 와 기준 이미지 간의 차이의 SNR을 향상시킬 수 있다."}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참고로 하여 본 기재의 실시예에 대하여 본 기재가 속하는 기술 분야에서 통상의 지 식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나 본 기재는 여러 가지 상이한 형태로 구현 될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 기재를 명확하게 설명하기 위 해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다 른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 본 명세서에서, \"A 또는 B\", \"A 및 B 중 적어도 하나\", \"A 또는 B 중 적어도 하나\", \"A, B 또는 C\", \"A, B 및 C 중 적어도 하나\", 및 \"A, B, 또는 C 중 적어도 하나\"와 같은 문구들 각각은 그 문구들 중 해당하는 문구에 함 께 나열된 항목들 중 어느 하나, 또는 그들의 모든 가능한 조합을 포함할 수 있다. 본 명세서에서 단수로 기재된 표현은 \"하나\" 또는 \"단일\" 등의 명시적인 표현을 사용하지 않은 이상, 단수 또는 복수로 해석될 수 있다. 본 명세서에서 \"및/또는\"은 언급된 구성 요소들의 각각 및 하나 이상의 모든 조합을 포함한다. 본 명세서에서, 제1, 제2 등과 같이 서수를 포함하는 용어들은 다양한 구성요소들을 설명하는데 사용될 수 있지 만, 상기 구성요소들은 상기 용어들에 의해 한정되지는 않는다. 상기 용어들은 하나의 구성요소를 다른 구성요 소로부터 구별하는 목적으로만 사용된다. 예를 들어, 본 개시의 권리 범위를 벗어나지 않으면서 제1 구성요소는 제2 구성요소로 명명될 수 있고, 유사하게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 본 명세서에서 도면을 참고하여 설명한 흐름도에서, 동작 순서는 변경될 수 있고, 여러 동작들이 병합되거나, 어느 동작이 분할될 수 있고, 특정 동작은 수행되지 않을 수 있다. 본 개시의 인공지능 모델(Artificial Intelligence model, AI model)은 적어도 하나의 태스크(task)를 학습하 는 기계학습모델로서, 프로세서에 의해 실행되는 컴퓨터 프로그램으로 구현될 수 있다. 인공지능 모델에 의해 학습되는 태스크는, 기계 학습을 통해 해결하고자 하는 과제 또는 기계 학습을 통해 수행하고자 하는 작업을 지 칭할 수 있다. 인공지능 모델은 컴퓨팅 장치에서 실행되는 컴퓨터 프로그램으로 구현될 수 있고, 네트워크를 통 해 다운로드되거나, 제품 형태로 판매될 수 있다. 또는 인공지능 모델은 네트워크를 통해 다양한 장치들과 연동 할 수 있다. 도 1은 한 실시예에 따른 전처리 시스템을 나타낸 블록도이다. 한 실시예에서, 소스 이미지 및 타깃 이미지는 각각 전경 및 배경을 포함할 수 있다. 전경은 이미지 내에 포함 된 관심 영역(region of interest, ROI)에 해당하고, 배경은 관심 영역을 제외한 나머지 부분이다. 소스 이미지 및 타깃 이미지에서, 소스 이미지와 타깃 이미지가 실질적으로 동일한 영역이 배경이 되고, 두 이미지의 차이가 전경, 즉 관심 영역에 대응될 수 있다. 타깃 이미지가 전자 소자의 결함을 나타내는 결함 이미지일 때, 소스 이 미지는 결함 이미지와의 비교를 통해 결함을 검출하는 데 사용되는 기준 이미지일 수 있다. 한 실시예에서, 전처리 시스템은 소스 이미지 및 타깃 이미지의 배경 차이를 최소화시키기 위해 소스 이미 지에 대해 전처리를 수행할 수 있다. 즉, 전처리 시스템은 전처리된 소스 이미지와 타깃 이미지 간의 차이 에서 잡음을 제거(de-noise)함으로써, 소스 이미지와 타깃 이미지 간의 차이의 신호대잡음비(signal to noise ratio, SNR)를 향상시킬 수 있다. 이를 위해 전처리 시스템은, 소스 이미지 및 타깃 이미지의 이미지 쌍에서 소스 이미지가 타깃 이미지에 가까워지도록 소스 이미지를 변환할 수 있다. 타깃 이미지에서 소스 이미지와 다른 영역은 결함인 것으로 판정 되므로, 전처리된 소스 이미지는 타깃 이미지에서 결함을 탐지해내기 위해 결함 검사 장치 등에서 사용될 수 있 다. 도 1을 참조하면, 전처리 시스템은 커널 생성기 및 영역 지정기를 포함할 수 있다. 한 실시예에 서, 커널 생성기 및/또는 영역 지정기는 인공 신경망(artificial neural network, ANN)(예를 들어, 콘벌루션 신경망(convolutional neural network))에 의해 제공될 수 있다. 커널 생성기는 이미지 처리를 위한 커널을 생성하고, 이미지 및 커널에 대한 인공 신경망의 연산 결과에 따라 커널을 업데이트할 수 있다. 한 실시예에서, 커널 생성기는 전경 커널 및 배경 커널을 생성하고, 전 경 커널 및 배경 커널에 동일한 이미지를 입력하여 인공 신경망을 트레이닝할 수 있다. 인공 신경망의 트레이닝 을 통해 업데이트된 배경 커널은 인공 신경망에 의한 추론 단계에서 전처리된 이미지를 생성하는 데 사용될 수 있다. 이때, 트레이닝된 전경 커널은 인공 신경망의 추론시 사용되지 않을 수 있다. 영역 지정기는 배경 및 전경을 구분시키는 마스크를 생성하고, 이미지가 인공 신경망에서 마스크에 적용된 결과에 따라 마스크를 업데이트할 수 있다. 한 실시예에서, 영역 지정기는 전경 마스크 및 배경 마스크를 생성하고, 전경 마스크 및 배경 마스크에 각각 이미지를 입력하여 인공 신경망을 트레이닝시킬 수 있다. 전경 마스크에는 전경 커널이 적용되고 배경 마스크에는 배경 커널이 적용될 수 있다. 즉, 영역 지정기에 의해 결정되는 전경 영역 및 배경 영역에 따라 이미지에 적용되는 커널이 학습될 수 있다. 영역 지정기는 이미지의 각 픽셀에 대응하는 마스크의 각 픽셀이 0 또는 1의 값만 갖는 바이너리 방식으로 마스크를 생성할 수 있다. 이후 트레이닝 절차를 통해 마스크의 픽셀 값은 0 내지 1 사이의 값을 갖도록 업데이 트될 수 있다. 영역 지정기는 하나의 마스크를 생성한 후 생성된 마스크를 반전시키는 방식으로 다른 하나의 마스크를 또 한 생성할 수 있다. 예를 들어, 영역 지정기는 배경 마스크를 생성한 후 생성된 배경 마스크의 각 픽셀 값 을 1에서 차감하는 방식으로 전경 마스크를 생성할 수 있다. 이때 배경 마스크의 특정 픽셀의 픽셀 값이 0.95일 때, 전경 마스크의 대응하는 픽셀의 픽셀 값은 0.05일 수 있다. 영역 지정기는 전경 마스크를 생성한 후 생성된 전경 마스크의 각 픽셀 값을 1에서 차감하는 방식으로 전경 마스크를 생성할 수도 있다. 도 2는 한 실시예에 따른 인공 신경망을 통해 이미지를 전처리하는 방법을 나타낸 흐름도이고, 도 3은 한 실시 예에 따른 인공 신경망의 트레이닝 방법을 나타낸 도면이며, 도 4는 한 실시예에 따른 트레이닝된 커널을 통한 추론 방법을 나타낸 도면이다. 전처리 시스템은 트레이닝 단계에서, 이미지 쌍의 소스 이미지에 복수의 필터를 적용하여 재구성된 소스 이미지를 생성하고, 재구성된 소스 이미지의 손실 함수의 값이 최소가 되도록 필터의 가중치를 업데이트할 수 있다. 업데이트된 필터에 의해 소스 이미지가 다시 재구성된 소스 이미지로 생성되고, 미리 결정된 기준에 따라 필터의 업데이트가 종료될 수 있다. 한 실시예에서, 손실 함수는 재구성된 소스 이미지와 타깃 이미지 간의 차이를 나타내는 함수로서 표현될 수 있 다. 복수의 필터는 적어도 하나의 커널 및 적어도 하나의 마스크를 포함할 수 있다. 도 2 및 3을 참조하면, 소스 이미지에 각각 커널 및 마스크가 적용된 후 합쳐짐으로써 재구성된 소스 이미지가 생성될 수 있다. 재구성된 소스 이미지와 타깃 이미지의 차이에 따라 손실 함수가 계산될 수 있고, 손실 함수의 값에 따라 커널 및 마스크의 가중치가 업데이트될 수 있다. 커널 및 마스크의 업데이트가 종료되면, 전처리 시스템은 추론 단계에서 업데이트된 필터를 사용하여 소스 이미지를 전처리된 이미지로 변환할 수 있다. 도 2 및 도 4를 참조하면, 소스 이미지에 트레이닝된 커널이 적용 됨으로써 전처리된 소스 이미지가 생성될 수 있다. 전처리된 소스 이미지의 배경과 타깃 이미지의 배경 사이의 차이는 최소화되므로, 전처리된 소스 이미지를 사용하여 타깃 이미지에서 관심 영역이 더욱 명확하게 판별될 수 있다. 도 2를 참조하면, 소스 이미지 및 타깃 이미지의 이미지 쌍이 생성되면(S110), 전처리 시스템은 소스 이미 지에 커널을 적용하여 특성맵을 출력할 수 있다(S120). 한 실시예에서, 특성맵은 소스 이미지와 커널 간의 합성곱(convolution) 연산(도 3 등의 * 표시)에 의해 생성될 수 있다. 커널의 크기가 소스 이미지의 크기보다 작을 때, 커널은 미리 결정된 크기의 스트라이드에 따라 이미 지의 각 픽셀 값과 연산을 수행할 수 있다. 전처리 시스템은 특성맵이 소스 이미지와 동일한 크기로 출력 될 수 있도록 스트라이드와 소스 이미지에 덧붙여지는 패딩의 크기를 조절할 수 있다. 실시예에서, 소스 이미지에 적용되는 커널은 인공 신경망에 의해 생성된 n×n 커널이거나 또는 가우시안 커널 (Gaussian kernel)일 수 있다. 도 2를 참조하면, 전처리 시스템은 커널에서 출력된 특성맵에 마스크를 적용하여 재구성된 소스 이미지를 생성할 수 있다(S130). 도 3을 참조하면, 특성맵과 마스크에는 곱 연산(도 3 등의 ○ 표시)이 수행될 수 있다. 예를 들어, 특성맵 내의 하나의 픽셀과 그 픽셀에 대응하는 마스크 내의 픽셀의 픽셀 값이 서로 곱해질 수 있다. 도 2를 참조하면, 전처리 시스템은 재구성된 소스 이미지의 손실 함수 값을 바탕으로 커널의 가중치를 업 데이트할 수 있다(S140). 한 실시예에서, 마스크는 인공 신경망에 의해 생성되거나 또는 미리 결정된 규칙에 따 라 생성될 수 있다. 마스크가 인공 신경망에 의해 생성될 때, 전처리 시스템은 재구성된 소스 이미지의 손 실 함수 값을 바탕으로 마스크의 가중치도 업데이트할 수 있다. 마스크가 미리 결정된 규칙에 따라 생성될 때, 마스크는 업데이트되지 않을 수 있다. 아래 수학식 1은 재구성된 소스 이미지(SRec) 타깃 이미지(T) 간의 차이에 관한 손실 함수의 최소화를 나타낸다. 수학식 1"}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "item": 2, "content": "도 2를 참조하면, 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값이 미리 결정된 범위인지 판단 하여 트레이닝을 다시 시작할지 여부를 결정할 수 있다(S150). 예를 들어, 손실 함수의 값이 미리 결정된 범위 가 아닐 때, 전처리 시스템은 트레이닝의 다음 에포크를 시작할 수 있거나 또는 손실 함수의 값이 미리 결 정된 범위 내에 있을 때, 전처리 시스템은 트레이닝을 종료할 수 있다. 또는 전처리 시스템은 신속한 처리를 위해 미리 결정된 횟수의 에포크가 수행되면, 트레이닝을 종료하고 추론 단계를 진행할 수 있다. 추론 단계에서, 전처리 시스템은 소스 이미지에 트레이닝된 커널을 적용하여 전처리된 소스 이미지를 생성 하고, 전처리된 소스 이미지 및 타깃 이미지를 새로운 이미지 쌍으로서 출력할 수 있다(S160). 도 5는 다른 실시예에 따른 인공 신경망의 트레이닝 방법을 나타낸 도면이다. 도 5를 참조하면, 두 개의 동일한 소스 이미지에 각각 커널 및 마스크가 적용된 후 합쳐짐으로써 재구성된 소스 이미지가 생성될 수 있다. 전처리 시스템은 하나의 소스 이미지(제1 소스 이미지)에 전경 커널 및 전경 마스크를 적용하고 다른 하나 의 소스 이미지(제2 소스 이미지)에 배경 커널 및 배경 마스크를 적용할 수 있다. 한 실시예에서, 제1 소스 이 미지 및 제2 소스 이미지는 동일한 이미지이다. 실시예에서, 제1 소스 이미지에 전경 커널이 적용된 후 제1 소스 이미지의 특성맵이 출력되고, 전경 커널에 의 한 특성맵에 전경 마스크가 적용될 수 있다. 또한, 제2 소스 이미지에 배경 커널이 적용된 후 제2 소스 이미지 의 특성맵이 출력되고, 배경 커널에 의한 특성맵에 배경 마스크가 적용될 수 있다. 이를 통해 전경 마스크 및 배경 마스크는 각각 전경 커널 및 배경 커널이 소스 이미지의 전경과 배경에 대해 트레이닝을 수행하도록 할 수 있다. 커널 생성기는 전경 커널 및 배경 커널을 고정적으로 생성하기 위해 미리 결정된 조건을 적용할 수 있다. 미리 결정된 조건은 아래 수학식 2에 따를 수 있다. 수학식 2"}
{"patent_id": "10-2023-0101678", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "수학식 2에서, 는 평균 값이고, S는 소스 이미지, T는 타깃 이미지를 나타내며, 은 마진(margin)을 나타낼 수 있다. 실시예에서, 소스 이미지와 타깃 이미지 간의 차이가 미리 결정된 영역 내에 위치할 때, 규칙 기반의 마스크가 사용될 수 있다. 예를 들어, 소스 이미지와 타깃 이미지 간의 차이의 위치가 이미지의 한 가운데의 7×7 영역에 있는 것으로 미리 결정되어 있을 때, 전경 마스크는 이미지의 한 가운데의 7×7 영역의 부분을 통과시키고, 배경 마스크는 이미지의 한 가운데의 7×7 영역을 제외한 나머지 부분을 통과시킬 수 있다. 실시예에서, 전경 마스크에서 출력되는 이미지에는 전경 커널이 적용되어 있고, 배경 마스크에서 출력되는 이미 지에는 배경 커널이 적용되어 있다. 이후, 전처리 시스템은 전경 마스크 및 배경 마스크에서 각각 출력된 두 개의 이미지(마스킹된 이미지)를 합쳐서 재구성된 소스 이미지를 생성할 수 있다. 전처리 시스템은, 재구성된 소스 이미지와 타깃 이미지 간의 차이를 나타내는 손실 함수의 값을 바탕으로 전경 커널 및 배경 커널의 가중치를 업데이트할 수 있다. 또한, 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값을 바탕으로 전경 마스크 및/또는 배경 마스크를 업데이트할 수 있다. 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값을 바탕으로 전경 마스크 또는 배경 마스크 중 하 나의 마스크만 업데이트할 수 있다. 전경 마스크가 손실 함수의 값을 바탕으로 업데이트되고, 배경 마스크는 전 경 마스크의 반전으로 업데이트될 수 있다. 예를 들어, 전경 마스크가 배경 마스크보다 손실 함수의 값을 바탕 으로 더 쉽게 업데이트될 수 있을 때, 전경 마스크가 손실 함수의 값을 바탕으로 업데이트되고, 배경 마스크는 전경 마스크의 반전으로 업데이트될 수 있다. 또는 전경 마스크의 용량이 배경 마스크의 용량보다 작을 때 전경 마스크가 손실 함수의 값을 바탕으로 업데이트되고 배경 마스크는 반전된 전경 마스크로 다음 에포크에서 사용 될 수 있다. 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값이 미리 결정된 범위인지 판단하여 트레이닝을 다 시 시작할지 여부를 결정할 수 있다. 예를 들어, 손실 함수의 값이 미리 결정된 범위가 아닐 때, 전처리 시스템 은 다음 에포크를 시작할 수 있다. 또는 손실 함수의 값이 미리 결정된 범위 내에 있을 때, 전처리 시스템 은 트레이닝을 종료할 수 있다. 또는 전처리 시스템은 미리 결정된 횟수의 에포크가 수행되면, 트레 이닝을 종료하고 추론을 수행하기 위한 트레이닝된 배경 커널을 출력할 수 있다. 도 6은 또 다른 실시예에 따른 인공 신경망의 트레이닝 방법을 나타낸 도면이다. 도 6을 참조하면, 두 개의 동일한 소스 이미지에 각각 마스크 및 커널이 적용된 후 각각 서로 다른 마스크 및 커널에서 출력된 이미지가 합쳐짐으로써 소스 이미지가 재구성될 수 있다. 전처리 시스템은 하나의 소스 이미지(제1 소스 이미지)에 전경 마스크 및 전경 커널을 적용하고 다른 하나 의 소스 이미지(제2 소스 이미지)에 배경 마스크 및 배경 커널을 적용할 수 있다. 한 실시예에서, 제1 소스 이 미지 및 제2 소스 이미지는 동일한 이미지이다. 실시예에서, 제1 소스 이미지에 전경 마스크가 적용된 후 전경 커널이 적용되어 특성맵이 출력될 수 있다. 또한, 제2 소스 이미지에 배경 마스크가 적용된 후 배경 커널이 적용되어 특성맵이 출력될 수 있다. 이를 통해 전경 커널 및 배경 커널은 전경 마스크 및 배경 마스크에 의해 필터링된 부분에 대해서만 트레이닝을 수행할 수 있다. 이후, 전처리 시스템은 전경 커널 및 배경 커널에서 각각 출력된 두 개의 특성맵 이미지를 합쳐서 하나의 재구성된 소스 이미지를 생성할 수 있다. 마스크가 커널보다 먼저 적용되기 때문에 특성맵 이미지의 각 영역(전 경 및 배경)에서 발생할 수 있는 왜곡을 보정하기 위한 별도의 구성이 포함될 수 있다. 예를 들어, 전처리 시스 템은 전경 및 배경의 경계를 처리하기 위한 경계 처리 장치 및/또는 신경망(미도시)을 더 포함할 수 있다. 전처리 시스템은, 재구성된 소스 이미지와 타깃 이미지 간의 차이를 나타내는 손실 함수의 값을 바탕으로 전경 커널 및 배경 커널의 가중치를 업데이트할 수 있다. 또한, 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값을 바탕으로 전경 마스크 및/또는 배경 마스크를 업데이트할 수 있다. 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값을 바탕으로 전경 마스크 또는 배경 마스크 중 하 나의 마스크만 업데이트할 수 있다. 예를 들어, 전경 마스크가 손실 함수의 값을 바탕으로 업데이트되고, 배경 마스크는 전경 마스크의 반전으로 업데이트될 수 있다. 전경 마스크의 용량이 배경 마스크의 용량보다 작을 때 전경 마스크가 업데이트되고 배경 마스크는 반전되 전경 마스크로 다음 에포크에서 사용될 수 있다. 전처리 시스템은 재구성된 소스 이미지의 손실 함수의 값이 미리 결정된 범위인지 판단하여 트레이닝을 다 시 시작할지 여부를 결정할 수 있다. 예를 들어, 손실 함수의 값이 미리 결정된 범위가 아닐 때, 전처리 시스템 은 다음 에포크를 시작할 수 있다. 또는 손실 함수의 값이 미리 결정된 범위 내에 있을 때, 전처리 시스템 은 트레이닝을 종료할 수 있다. 또는 전처리 시스템은 미리 결정된 횟수의 에포크가 수행되면, 트레 이닝을 종료하고 추론을 수행하기 위한 트레이닝된 배경 커널을 출력할 수 있다.도 7은 다른 실시예에 따른 트레이닝된 커널을 통한 추론 방법을 나타낸 도면이다. 도 7을 참조하면, 전처리 시스템은 소스 이미지에 트레이닝된 배경 커널을 적용하여 전처리된 소스 이미지 를 생성할 수 있다. 실시예에서, 소스 이미지가 다시 재구성되면, 전처리 시스템은 커널의 업데이트를 종 료할지 여부를 결정할 수 있다. 전처리 시스템은 재구성된 소스 이미지와 타깃 이미지 간의 손실 함수의 값을 바탕으로 커널을 다시 업데이트하거나 또는 커널의 업데이트를 통한 트레이닝을 종료할 수 있다. 또는 소 스 이미지가 미리 결정된 횟수만큼 재구성되면, 전처리 시스템은 커널의 업데이트를 통한 트레이닝을 종료 할 수 있다. 이후, 트레이닝이 종료되면, 전처리 시스템은 추론 단계에서 트레이닝된 배경 커널을 적용하여 소스 이미 지를 전처리할 수 있다. 전처리된 소스 이미지는 타깃 이미지에서 결함을 검출하는 데 사용될 수 있다. 도 8a는 한 실시예에 따른 전자 소자의 결함 검사 시스템을 나타낸 도면이고, 도 8b는 결함 검사 시스템에 의해 이미지에서 판별된 결함을 나타낸 도면이다. 한 실시예에서, 결함 검사 시스템은 전자 소자를 촬영하여 결함 이미지를 획득하고, 결함 이미지에 대응하 는 기준 이미지를 사용하여 결함 이미지에서 결함을 판별할 수 있다. 기준 이미지는 결함을 포함하고 있지 않은 전자 소자의 이미지일 수 있다. 결함 검사 시스템은 불량 데이터와 기준 데이터를 사용하여 결함 검출 분 야에 적용될 수 있다. 예를 들어, 결함 검사 시스템은 반도체의 제조 공정에서 사용될 수 있다. 도 8a를 참조하면, 결함 검사 시스템은 이미지 쌍 생성 장치, 전처리 장치, 및 결함 검사 장치 를 포함할 수 있다. 이미지 쌍 생성 장치는 전자 소자의 결함 의심 부분을 촬영하여 결함 이미지를 획득하고, 결함 이미지에 대응하는 기준 이미지를 생성함으로써 결함 이미지에 기준 이미지를 대응시킬 수 있다. 전처리 장치는 결함 이미지에 대응하는 기준 이미지를 복수의 필터를 사용하여 재구성된 기준 이미지로 변 환하고, 재구성된 기준 이미지와 결함 이미지 간의 차이를 바탕으로 배경의 노이즈가 제거 또는 감소된 전처리 된 기준 이미지를 생성할 수 있다. 복수의 필터는 커널 및 마스크를 포함할 수 있다. 실시예에서, 전처리 장치는 기준 이미지에 배경 커널 및 전경 커널을 적용하고, 배경 커널 및 전경 커널에 서 각각 출력되는 특성맵에 대해 배경 마스크 및 전경 마스크를 적용할 수 있다. 전처리 장치는 배경 커널 에서 출력되는 특성맵에 대해 배경 마스크를 적용하고 전경 커널에서 출력되는 특성맵에 대해 전경 마스크를 적 용할 수 있다. 배경 마스크 및 전경 마스크에 의해 마스킹된 두 개의 이미지를 합침으로써 기준 이미지를 재구 성할 수 있다. 전처리 장치는 재구성된 기준 이미지와 결함 이미지 간의 차이에 관한 손실 함수의 값을 바 탕으로 배경 커널 및 전경 커널을 업데이트할 수 있다. 이후 업데이트된 커널이 다시 기준 이미지에 적용되어 기준 이미지가 다시 재구성되고, 다시 재구성된 기준 이미지를 바탕으로 커널이 다시 업데이트될 수 있다. 커널 의 업데이트가 종료되면, 전처리 장치는 추론 단계를 통해 업데이트된 배경 커널을 기준 이미지에 적용하 여 전처리된 기준 이미지를 생성할 수 있다. 결함 검사 장치는 전처리된 기준 이미지와 결함 이미지 간의 비교를 통해 결함 이미지에서 결함을 검출할 수 있다. 도 8b를 참조하면, 전처리된 기준 이미지와 결함 이미지의 차이 이미지에서 배경의 차이는 더 작아졌고(어두운 부분) 결함으로 판별된 영역(밝은 부분)이 더 두드러지게 된 것을 확인할 수 있다. 도 9는 한 실시예에 따른 인공 신경망을 나타낸 도면이다. 도 9를 참조하면, 한 실시예에 따른 인공 신경망(Artificial Neural Network, ANN)은 입력층, 은닉 층, 및 출력층를 포함할 수 있다. 입력층, 은닉층, 및 출력층은 각각 복수의 노드를 포함하고, 각 노드 간의 연결의 강도는 가중치에 대응할 수 있다(weight connection). 입력층, 은닉층 , 및 출력층에 포함되는 복수의 노드는 서로 완전 연결형(fully connected)으로 연결될 수 있다. 한 실시예에서, 파라미터(가중치 및 편향)의 개수는 인공 신경망 내의 가중치 연결의 개수와 동일할 수 있다. 입력층은 복수의 입력 노드(x1 내지 xi)를 포함할 수 있고, 입력 노드(x1 내지 xi)의 개수는 독립변수의 개 수에 대응할 수 있다. 인공 신경망의 훈련을 위해 입력층으로 훈련 데이터셋이 입력되고, 훈련된 인 공 신경망의 입력층으로 테스트 데이터셋이 입력되면 훈련된 인공 신경망의 출력층에서 추 론 결과가 출력될 수 있다.은닉층은 입력층과 출력층 사이에 위치하고, 적어도 하나의 은닉층(9201 내지 920n)을 포함할 수 있다. 출력층은 적어도 하나의 출력 노드(y1 내지 yj)를 포함할 수 있다. 은닉층 및 출력층 에는 활성화 함수가 사용될 수 있다. 한 실시예에서, 인공 신경망은 은닉층에 포함된 히든 노드의 가 중치를 조절하는 방식으로 학습될 수 있다. 도 10은 다른 실시예에 따른 전처리 장치를 나타낸 블록도이다. 한 실시예에 따른 전처리 장치는, 컴퓨터 시스템, 예를 들어 컴퓨터 판독 가능 매체로 구현될 수 있다. 도 10을 참조하면, 컴퓨터 시스템은, 프로세서(processor) 그리고 메모리(memory)를 포함한다. 메모 리는 프로세서와 연결되어 프로세서를 구동하기 위한 다양한 정보 또는 프로세서에 의 해 실행되는 적어도 하나의 프로그램을 저장할 수 있다. 프로세서는 실시예에서 제안된 기능, 과정, 또는 방법을 구현할 수 있다. 실시예에 따른 컴퓨터 시스템 의 동작은 프로세서에 의해 구현될 수 있다. 본 기재의 실시예에서 메모리는 프로세서의 내부 또는 외부에 위치할 수 있고, 메모리는 이미 알려진 다 양한 수단을 통해 프로세서와 연결될 수 있다. 메모리는 다양한 형태의 휘발성 또는 비휘발성 저장 매체이며, 예를 들어, 메모리는 읽기 전용 메모리(read-only memory, ROM) 또는 랜덤 액세스 메모리(random access memory, RAM)를 포함할 수 있다. 한편, 실시예들은 지금까지 설명한 장치 및/또는 방법을 통해서만 구현되는 것은 아니며, 실시예들의 구성에 대 응하는 기능을 실현하는 프로그램 또는 그 프로그램이 기록된 기록 매체를 통해 구현될 수도 있으며, 이러한 구 현은 상술한 실시예의 기재로부터 본 기재가 속하는 기술 분야의 통상의 기술자라면 쉽게 구현할 수 있는 것이다. 구체적으로, 실시예에 따른 방법(예, 이미지 전처리 방법 등)은 다양한 컴퓨터 수단을 통해 수행될 수 있 는 프로그램 명령 형태로 구현되어, 컴퓨터 판독 가능 매체에 기록될 수 있다. 상기 컴퓨터 판독 가능 매체는 프로그램 명령, 데이터 파일, 데이터 구조 등을 단독으로 또는 조합하여 포함할 수 있다. 상기 컴퓨터 판독 가 능 매체에 기록되는 프로그램 명령은, 실시예를 위해 특별히 설계되어 구성된 것이거나, 컴퓨터 소프트웨어 분 야의 통상의 기술자에게 공지되어 사용 가능한 것일 수도 있다. 컴퓨터 판독 가능 기록 매체는 프로그램 명령 을 저장하고 수행하도록 구성된 하드웨어 장치를 포함할 수 있다. 예를 들어, 컴퓨터 판독 가능 기록 매체는 하드 디스크, 플로피 디스크 및 자기 테이프와 같은 자기 매체(magnetic media), CD-ROM, DVD와 같은 광 기록 매체(optical media), 플롭티컬 디스크(floptical disk)와 같은 자기-광 매체(magneto-optical media), 롬 (ROM), 램(RAM), 플래시 메모리 등일 수 있다. 프로그램 명령은 컴파일러에 의해 만들어지는 것과 같은 기계어 코드뿐만 아니라, 인터프리터 등을 통해 컴퓨터에 의해 실행될 수 있는 고급 언어 코드를 포함할 수 있다. 이상에서 실시예에 대하여 상세하게 설명하였지만 본 기재의 권리범위는 이에 한정되는 것은 아니고 다음의 청 구범위에서 정의하고 있는 기본 개념을 이용한 당업자의 여러 변형 및 개량 형태 또한 본 기재의 권리범위에 속 하는 것이다."}
{"patent_id": "10-2023-0101678", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 한 실시예에 따른 전처리 장치를 나타낸 블록도이다. 도 2는 한 실시예에 따른 이미지를 전처리하는 방법을 나타낸 흐름도이다. 도 3은 한 실시예에 따른 전처리 시스템의 트레이닝 방법을 나타낸 도면이다. 도 4는 한 실시예에 따른 트레이닝된 커널을 통한 추론 방법을 나타낸 도면이다. 도 5는 다른 실시예에 따른 전처리 시스템의 트레이닝 방법을 나타낸 도면이다. 도 6은 또 다른 실시예에 따른 전처리 시스템의 트레이닝 방법을 나타낸 도면이다. 도 7은 다른 실시예에 따른 트레이닝된 커널을 통한 추론 방법을 나타낸 도면이다. 도 8은 한 실시예에 따른 전자 소자의 결함 검사 시스템을 나타낸 도면이다. 도 9는 한 실시예에 따른 인공 신경망을 나타낸 도면이다. 도 10은 다른 실시예에 따른 전처리 장치를 나타낸 블록도이다."}
