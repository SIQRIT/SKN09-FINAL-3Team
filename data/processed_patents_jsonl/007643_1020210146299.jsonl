{"patent_id": "10-2021-0146299", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0061747", "출원번호": "10-2021-0146299", "발명의 명칭": "반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법", "출원인": "주식회사 펫나우", "발명자": "임준호"}}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법에 있어서, 상기 반려 동물의 안면이 포함된 이미지를 획득하는 단계; 상기 이미지에서 상기 반려 동물의 코 영역을 추출하는 단계; 상기 코 영역에서 상기 코의 윤곽을 나타내는 특징점들을 추출하는 단계; 및 상기 특징점들의 위치 관계에 기반하여 상기 코 영역이 정면인지 여부를 판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 특징점들을 추출하는 단계는, 상기 이미지에 미리 정의된 패턴 타입에 대응하는 커널들을 각각 적용하여 상기 이미지의 픽셀 마다 각각의 커널과의 민감도를 나타내는 특징 벡터를 도출하는 단계; 및 상기 특징 벡터로부터 상기 코의 윤곽을 나타내는 상기 특징점들을 추출하는 단계를 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 특징점들을 연결하여 생성한 뼈대 모델과 상기 반려 동물의 코 모델을 비교하여 상기 특징점들의 연결 관계 및 위치를 교정하는 단계를 더 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하는 단계; 및 상기 코의 좌측단을 나타내는 특징점에서 상기 세로축 선 사이의 거리와 상기 코의 우측단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면의 요(Yaw) 방향 회전 여부를 판단하는 단계를 포함하는방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 좌측단과 우측단을 나타내는 특징점들을 연결하는 가로축 선을 구성하는 단계; 및 상기 반려 동물의 콧구멍 개구부를 구성하는 특징점들의 방향성을 나타내는 벡터가 상기 가로축을 기준으로 기준 범위 내에 위치하는지 여부에 기초하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단하는 단계를 포함하공개특허 10-2023-0061747-3-는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 개구부에 해당하는 특징점들의 위치에 대한 상기 반려 동물의 콧구멍 최상단에 해당하는 특징점의 위치 및 상기 반려 동물의 콧구멍 최하단에 해당하는 특징점의 위치에 기초하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 반려 동물의 좌측 콧구멍을 구성하는 특징점들을 연결한 좌측 콧구멍 면적과 상기 반려 동물의 우측 콧구멍을 구성하는 특징점들을 연결한 우측 콧구멍 면적을 비교하여 상기 안면에 회전이 발생하였는지 여부를 판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하는 단계; 및 상기 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리 및 상기 반려동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면에회전이 발생하였는지 여부를 판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항에 있어서, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 특징점들 중 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하는 단계; 및 상기 세로축 선과 상기 반려 동물의 콧구멍 영역이 중첩되는 경우 상기 반려 동물의 안면이 정면이 아닌 것으로판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항에 있어서, 상기 반려 동물의 안면이 정면이 아닌 것으로 판단되면 상기 반려 동물의 안면이 포함된 이미지가 유효하지 않은 것으로 판단하고 상기 이미지를 버리는 단계; 및 다음 프레임의 이미지에 대한 유효성 검사를 수행하는 단계를 더 포함하는 방법. 공개특허 10-2023-0061747-4-청구항 11 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 장치에 있어서, 상기 반려 동물을 촬영하여 상기 반려 동물의 안면이 포함된 이미지를 생성하는 카메라; 및 상기 이미지를 처리하여 상기 이미지의 적합성을 검사하는 프로세서를 포함하고, 상기 프로세서는, 상기 이미지에서 상기 반려 동물의 코 영역을 추출하고, 상기 코 영역에서 상기 코의 윤곽을 나타내는 특징점들을 추출하고, 상기 특징점들의 위치 관계에 기반하여 상기 코 영역이 정면인지 여부를 판단하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서, 상기 프로세서는, 상기 이미지에 미리 정의된 패턴 타입에 대응하는 커널들을 각각 적용하여 상기 이미지의 픽셀 마다 각각의 커널과의 민감도를 나타내는 특징 벡터를 도출하고, 상기 특징 벡터로부터 상기 코의 윤곽을 나타내는 상기 특징점들을 추출하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서, 상기 프로세서는, 상기 특징점들을 연결하여 생성한 뼈대 모델과 상기 반려 동물의 코 모델을 비교하여 상기 특징점들의 연결 관계 및 위치를 교정하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제11항에 있어서, 상기 프로세서는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 상기 코의 좌측단을 나타내는 특징점에서 상기 세로축 선 사이의 거리와 상기 코의 우측단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면의 요(Yaw) 방향 회전 여부를 판단하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제11항에 있어서, 상기 프로세서는, 상기 코의 좌측단과 우측단을 나타내는 특징점들을 연결하는 가로축 선을 구성하고,상기 반려 동물의 콧구멍 개구부를 구성하는 특징점들의 방향성을 나타내는 벡터가 상기 가로축을 기준으로 기준 범위 내에 위치하는지 여부에 기초하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단하는 장치. 공개특허 10-2023-0061747-5-청구항 16 제11항에 있어서, 상기 프로세서는, 상기 코의 개구부에 해당하는 특징점들의 위치에 대한 상기 반려 동물의 콧구멍 최상단에 해당하는 특징점의 위치 및 상기 반려 동물의 콧구멍 최하단에 해당하는 특징점의 위치에 기초하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제11항에 있어서, 상기 프로세서는, 상기 반려 동물의 좌측 콧구멍을 구성하는 특징점들을 연결한 좌측 콧구멍 면적과 상기 반려 동물의 우측 콧구멍을 구성하는 특징점들을 연결한 우측 콧구멍 면적을 비교하여 상기 안면에 회전이 발생하였는지 여부를 판단하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제11항에 있어서, 상기 프로세서는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 상기 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리 및 상기 반려동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면에회전이 발생하였는지 여부를 판단하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제11항에 있어서, 상기 프로세서는, 상기 특징점들 중 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 상기 세로축 선과 상기 반려 동물의 콧구멍 영역이 중첩되는 경우 상기 반려 동물의 안면이 정면이 아닌 것으로판단하는 장치."}
{"patent_id": "10-2021-0146299", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제11항에 있어서, 상기 프로세서는, 상기 반려 동물의 안면이 정면이 아닌 것으로 판단되면 상기 반려 동물의 안면이 포함된 이미지가 유효하지 않은 것으로 판단하고 상기 이미지를 버리고, 다음 프레임의 이미지에 대한 유효성 검사를 수행하는 장치."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "반려 동물의 식별을 위한 비문의 이미지를 획득하는 과정에서 정면 이미지인지 여부를 판별할 수 있는 방법 및 장치를 제공한다. 본 발명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방 법은, 상기 반려 동물의 안면이 포함된 이미지를 획득하는 단계와, 상기 이미지에서 상기 반려 동물의 코 영역을 추출하는 단계와, 상기 코 영역에서 상기 코의 윤곽을 나타내는 특징점들을 추출하는 단계와, 상기 특징점들의 위치 관계에 기반하여 상기 코 영역이 정면인지 여부를 판단하는 단계를 포함한다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법에 관한 것으로, 보 다 구체적으로 강아지의 비문과 같이 반려 동물을 식별할 수 있는 객체의 이미지가 인공 지능 기반의 기계 학습 또는 식별에 적합한지 여부를 판단하여 필터링하기 위한 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "현대 사회에서 사람과 함께 생활하면서 정서적으로 의지할 수 있는 반려 동물에 대한 수요가 높아지고 있다. 이 에 따라, 반려 동물에 대한 건강 관리 등을 위하여 다양한 반려 동물에 대한 정보를 데이터베이스화 하여 관리 할 필요성이 증가하고 있다. 반려 동물을 관리하기 위하여 사람의 지문과 같이 반려 동물의 식별 정보가 필요하 며, 반려 동물에 따라 사용될 수 있는 객체가 각각 정의될 수 있다. 예를 들어, 강아지의 경우 비문(코 주름의 형상)이 각자 상이하므로 각 강아지마다 비문을 식별 정보로 사용할 수 있다. 도 1의 (a)에 도시된 것과 같이, 비문을 등록하는 방법은 사람의 지문 또는 안면을 등록하는 것과 같이 반려 동 물의 코를 포함한 안면을 촬영하고(S110) 비문을 포함한 이미지를 데이터베이스(서버)에 저장 및 등록하는 과정 (S120)에 의해 수행된다. 또한, 비문을 조회하는 방법은 도 1의 (b)에 도시된 것과 같이 반려 동물의 비문을 촬 영하고(S130), 촬영된 비문과 일치하는 비문 및 이와 관련된 정보를 탐색하고(S140), 촬영된 비문과 일치하는 정보를 출력하는 과정(S150)에 의해 수행될 수 있다. 도 1과 같이 반려 동물의 비문을 등록하고 조회하는 과정 을 통해 각 반려 동물을 식별하고 해당 반려 동물의 정보를 관리할 수 있다. 반려 동물의 비문 정보는 데이터베 이스에 저장되고 AI 기반의 학습 또는 인식을 위한 데이터로서 사용될 수 있다. 그러나, 반려 동물의 비문을 취득하고 저장함에 있어 몇 가지 문제점이 존재한다. 먼저, 사진은 촬영 각도, 초점, 거리, 크기, 환경 등에 따라 인식이 어려울 수 있다. 사람의 안면 인식 기술을 비문 인식에 적용하고자 하는 시도가 있었으나, 사람의 안면 정보는 충분한 데이터가 축적된 반면 반려 동물의 비문 정보는 충분한 데이터가 확보되지 않아 인식률이 낮다는 문제점이 있다. 구체적으로, AI 기반의 인식이 수 행되기 위하여는 기계가 학습할 수 있는 형태로 가공된 학습 데이터가 필요하나, 반려 동물의 비문은 충분한 데 이터가 축적되지 않아 비문 인식에 어려움이 있다. 또한, 반려 동물의 비문 인식을 위하여는 선명한 코 주름을 갖는 이미지가 요구되나, 사람과 달리 반려 동물은 잠시 동작을 멈추는 것과 같은 행위를 할 줄 모르기 때문에 선명한 코 주름 이미지를 취득하기가 쉽지 않다. 특 히, 비문의 학습 또는 식별에 있어 가급적 코 정면의 이미지가 바람직한데, 강아지와 같은 반려 동물이 움직이 게 되면 정면 이미지가 촬영되지 못할 수 있다. 정면이 아닌 이미지의 경우 비문의 학습 또는 인식에 부적합하 기 때문에 해당 이미지는 버려지는 것이 바람직할 수 있다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 반려 동물의 식별을 위한 비문의 이미지를 획득하는 과정에서 정면 이미지인지 여부를 판별할 수 있 는 방법 및 장치를 제공한다. 본 발명의 해결과제는 이상에서 언급된 것들에 한정되지 않으며, 언급되지 아니한 다른 해결과제들은 아래의 기 재로부터 당업자에게 명확히 이해될 수 있을 것이다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법은, 상기 반려 동물의 안면이 포함된 이미지를 획득하는 단계와, 상기 이미지에서 상기 반려 동물의 코 영역을 추출하는 단계 와, 상기 코 영역에서 상기 코의 윤곽을 나타내는 특징점들을 추출하는 단계와, 상기 특징점들의 위치 관계에 기반하여 상기 코 영역이 정면인지 여부를 판단하는 단계를 포함한다. 본 발명에 따르면, 상기 특징점들을 추출하는 단계는, 상기 이미지에 미리 정의된 패턴 타입에 대응하는 커널들 을 각각 적용하여 상기 이미지의 픽셀 마다 각각의 커널과의 민감도를 나타내는 특징 벡터를 도출하는 단계와, 상기 특징 벡터로부터 상기 코의 윤곽을 나타내는 상기 특징점들을 추출하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 특징점들을 추출하는 단계는, 상기 특징점들을 연결하여 생성한 뼈대 모델과 상기 반려 동물의 코 모델을 비교하여 상기 특징점들의 연결 관계 및 위치를 교정하는 단계를 더 포함할 수 있다. 본 발명에 따르면, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 상단과 하단을 나타내는 특징 점들을 연결하는 세로축 선을 구성하는 단계와, 상기 코의 좌측단을 나타내는 특징점에서 상기 세로축 선 사이 의 거리와 상기 코의 우측단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면의 요 (Yaw) 방향 회전 여부를 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 좌측단과 우측단을 나타내는 특징점들을 연결하는 가로축 선을 구성하는 단계와, 상기 반려 동물의 콧구멍 개구부를 구성하는 특징점들의 방 향성을 나타내는 벡터가 상기 가로축을 기준으로 기준 범위 내에 위치하는지 여부에 기초하여 상기 안면의 피치 (Pitch) 방향 회전 여부를 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 개구부에 해당하는 특징점들의 위치에 대한 상기 반려 동물의 콧구멍 최상단에 해당하는 특징점의 위치 및 상기 반려 동물의 콧구멍 최하단에 해당하는 특징점의 위치에 기초하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단하는 단계를 포함할 수 있 다. 본 발명에 따르면, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 반려 동물의 좌측 콧구멍을 구성하 는 특징점들을 연결한 좌측 콧구멍 면적과 상기 반려 동물의 우측 콧구멍을 구성하는 특징점들을 연결한 우측 콧구멍 면적을 비교하여 상기 안면에 회전이 발생하였는지 여부를 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 코의 상단과 하단을 나타내는 특징 점들을 연결하는 세로축 선을 구성하는 단계와, 상기 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점 에서 상기 세로축 선 사이의 거리 및 상기 반려 동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면에 회전이 발생하였는지 여부를 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 코 영역이 정면인지 여부를 판단하는 단계는, 상기 특징점들 중 상기 코의 상단과 하단 을 나타내는 특징점들을 연결하는 세로축 선을 구성하는 단계와, 상기 세로축 선과 상기 반려 동물의 콧구멍 영 역이 중첩되는 경우 상기 반려 동물의 안면이 정면이 아닌 것으로 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법은, 상기 반 려 동물의 안면이 정면이 아닌 것으로 판단되면 상기 반려 동물의 안면이 포함된 이미지가 유효하지 않은 것으 로 판단하고 상기 이미지를 버리는 단계와, 다음 프레임의 이미지에 대한 유효성 검사를 수행하는 단계를 더 포 함할 수 있다. 본 발명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 장치는, 상기 반려 동물을 촬영하여 상기 반려 동물의 안면이 포함된 이미지를 생성하는 카메라와, 상기 이미지를 처리하여 상기 이미지의 적합성을 검사하는 프로세서를 포함한다. 상기 프로세서는, 상기 이미지에서 상기 반려 동물의 코 영 역을 추출하고, 상기 코 영역에서 상기 코의 윤곽을 나타내는 특징점들을 추출하고, 상기 특징점들의 위치 관계 에 기반하여 상기 코 영역이 정면인지 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 이미지에 미리 정의된 패턴 타입에 대응하는 커널들을 각각 적용하여 상기 이미지의 픽셀 마다 각각의 커널과의 민감도를 나타내는 특징 벡터를 도출하고, 상기 특징 벡터로부터 상 기 코의 윤곽을 나타내는 상기 특징점들을 추출할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 특징점들을 연결하여 생성한 뼈대 모델과 상기 반려 동물의 코 모델 을 비교하여 상기 특징점들의 연결 관계 및 위치를 교정할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성 하고, 상기 코의 좌측단을 나타내는 특징점에서 상기 세로축 선 사이의 거리와 상기 코의 우측단을 나타내는 특 징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안면의 요(Yaw) 방향 회전 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 코의 좌측단과 우측단을 나타내는 특징점들을 연결하는 가로축 선을 구성하고, 상기 반려 동물의 콧구멍 개구부를 구성하는 특징점들의 방향성을 나타내는 벡터가 상기 가로축을 기 준으로 기준 범위 내에 위치하는지 여부에 기초하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 코의 개구부에 해당하는 특징점들의 위치에 대한 상기 반려 동물의 콧구멍 최상단에 해당하는 특징점의 위치 및 상기 반려 동물의 콧구멍 최하단에 해당하는 특징점의 위치에 기초 하여 상기 안면의 피치(Pitch) 방향 회전 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 반려 동물의 좌측 콧구멍을 구성하는 특징점들을 연결한 좌측 콧구멍 면적과 상기 반려 동물의 우측 콧구멍을 구성하는 특징점들을 연결한 우측 콧구멍 면적을 비교하여 상기 안면에 회전이 발생하였는지 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성 하고, 상기 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리 및 상기 반려 동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 상기 세로축 선 사이의 거리를 비교하여 상기 안 면에 회전이 발생하였는지 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 특징점들 중 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 상기 세로축 선과 상기 반려 동물의 콧구멍 영역이 중첩되는 경우 상기 반려 동물의 안 면이 정면이 아닌 것으로 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 반려 동물의 안면이 정면이 아닌 것으로 판단되면 상기 반려 동물의 안면이 포함된 이미지가 유효하지 않은 것으로 판단하고 상기 이미지를 버리고, 다음 프레임의 이미지에 대한 유효성 검사를 수행할 수 있다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면, 코의 윤곽을 나타내는 특징점들을 추출하여 특징점들의 위치 관계에 기반하여 안면에 회전이 발생하였는지 여부를 판단함으로써, 정면이 아닌 비문 이미지를 필터링 할 수 있다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과는 이상에서 언급된 것들에 한정되지 않으며, 언급되지 아니한 다른 효과들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2021-0146299", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부한 도면을 참고로 하여 본 발명의 실시예들에 대하여 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 본 발명은 여러 가지 상이한 형태로 구현될 수 있으며 여기에서 설명하는 실시예들에 한정되지 않는다. 본 발명을 명확하게 설명하기 위해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 동일 또는 유사한 구성요소에 대해서는 동일한 참조 부호를 붙이도록 한다. 또한, 여러 실시예들에 있어서, 동일한 구성을 가지는 구성요소에 대해서는 동일한 부호를 사용하여 대표적인 실시예에서만 설명하고, 그 외의 다른 실시예에서는 대표적인 실시예와 다른 구성에 대해서만 설명하기로 한다.명세서 전체에서, 어떤 부분이 다른 부분과 \"연결(또는 결합)\"되어 있다고 할 때, 이는 \"직접적으로 연결(또는 결합)\"되어 있는 경우뿐만 아니라, 다른 부재를 사이에 두고 \"간접적으로 연결(또는 결합)\"된 것도 포함한다. 또한, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소 를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 다르게 정의되지 않는 한, 기술적이거나 과학적인 용어를 포함해서 여기서 사용되는 모든 용어들은 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 것과 동일한 의미를 가지고 있다. 일 반적으로 사용되는 사전에 정의되어 있는 것과 같은 용어들은 관련 기술의 문맥 상 가지는 의미와 일치하는 의 미를 가지는 것으로 해석되어야 하며, 본 출원에서 명백하게 정의하지 않는 한, 이상적이거나 과도하게 형식적 인 의미로 해석되지 않는다. 본 문서에서는 강아지의 코 주름 형상(비문)을 활용하여 식별 정보를 추출하는 내용을 중심으로 설명하나, 본 발명에서 반려 동물의 범위는 강아지에 한정되지 않으며, 또한 식별 정보로 사용되는 특징으로서 비문에 한정되 지 않고 다양한 반려 동물의 신체적 특징이 사용될 수 있다. 앞서 설명한 바와 같이, AI 기반의 학습 또는 식별에 적합한 반려 동물의 비문 이미지가 충분하지 않고 반려 동 물의 비문 이미지는 그 품질이 낮을 가능성이 크기 때문에 AI 기반의 학습 또는 식별을 위하여 비문 이미지를 선별적으로 데이터베이스에 저장할 필요가 있다. 특히, 본 발명은 정면의 비문 이미지만이 학습에 사용될 수 있 도록 필터링하는 방법을 제공한다. 도 2은 본 발명에 따른 객체 이미지의 적합도 판단이 적용된 반려 동물의 비문 관리를 위한 절차를 도시한다. 본 발명은 반려 동물의 비문을 촬영한 후 촬영된 비문 이미지가 학습 또는 식별을 위한 데이터로서 적합한지 여 부를 먼저 판단하고, 적합하다고 판단된 경우 인식을 위한 서버로 전송 및 저장하여 이후 학습 또는 식별을 위 한 데이터로 사용한다. 본 발명에 따른 비문 관리 절차는 크게 비문 취득 절차와 비문 인식 절차를 포함한다. 본 발명에 따르면, 신규로 반려 동물의 비문을 등록할 때 반려 동물이 포함된 영상을 촬영한 후 반려 동물의 얼 굴 영역에서 비문 이미지를 추출하며, 특히 해당 비문 이미지가 해당 반려 동물의 식별 또는 학습을 위하여 적 합한 지 여부를 먼저 판단한다. 촬영된 이미지가 식별 또는 학습에 적합하다고 판단된 경우 해당 이미지가 서버 (인공지능 신경망)로 전송되어 데이터베이스에 저장된다. 비문을 통해 반려 동물의 식별 정보를 조회하는 경우, 마찬가지로 반려 동물이 포함된 영상을 촬영한 후 반려 동물의 얼굴 영역에서 비문 이미지를 추출하며, 특히 해당 비문 이미지가 해당 반려 동물의 식별 또는 학습을 위하여 적합한 지 여부를 먼저 판단한다. 촬영된 이미지가 식별 또는 학습에 적합하다고 판단된 경우 해당 이미 지가 서버로 전송되고 기존에 저장된 비문 이미지들과의 매칭을 통해 해당 반려 동물의 식별 정보를 추출한다. 비문 등록 절차의 경우, 도 2와 같이 반려 동물을 촬영하고(S205), 촬영된 반려 동물의 이미지에서 먼저 코 영 역을 검출하고(S210), 촬영된 이미지가 학습 또는 식별용으로 적합한지에 대한 품질 검사를 통해 적합한 비문 이미지를 출력하고(S215), 출력된 이미지가 인공 신경망을 구성하는 서버로 전송되어 저장 및 등록된다(S220). 도 3은 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법의 흐름도이다. 본 발명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법은, 반려 동물 의 안면이 포함된 이미지를 획득하는 단계(S310)와, 이미지에서 반려 동물의 코 영역을 추출하는 단계(S320)와, 코 영역에서 코의 윤곽을 나타내는 특징점들을 추출하는 단계(S330)와, 특징점들의 위치 관계에 기반하여 코 영 역이 정면인지 여부를 판단하는 단계(S340)를 포함한다. 본 발명에 따르면, 코의 윤곽을 나타내는 특징점들을 추출하여 특징점들의 위치 관계에 기반하여 안면에 회전이 발생하였는지 여부를 판단함으로써, 정면이 아닌 비문 이미지를 필터링 할 수 있다. 비문 이미지가 정면 사진이 아니라고 판단되는 경우, 해당 프레임의 이미지는 학습 또는 신원 식별을 위하여 사용되지 않게 된다. 본 발명 에 따른 비문 이미지의 품질 검사는 일정 단위의 프레임마다 독립적으로 수행되며, 적합한 품질을 갖는 비문 이 미지가 검출되면 해당 이미지가 신경망 서버로 전송되어 해당 반려 동물의 학습 또는 신원 식별을 위하여 사용 된다. 도 4는 안면의 회전 방향의 예를 도시한다. 도 4에 도시된 것과 같이 3차원 물체의 회전은 각각 피치(Pitch), 롤(Roll), 요(Yaw) 방향으로 표현될 수 있다. 3차원 개체인 반려 동물의 코가 정면을 바라보는지 여부는 도 4와 같이 도시된 피치 방향과 요 방향에 대한 코의 회전량이 허용 가능한 범위 이내인지 여부를 판단함으로써 검사될 수 있다. 롤 방향의 회전의 경우, 롤 회전이 검출되면 해당 이미지를 롤 회전의 반대 방향으로 회전시킴으로 써 비문의 정면 이미지를 취득할 수 있기 때문에, 본 문서에서는 피치 방향과 요 방향의 회전을 검출하는 방법 에 대해 중점적으로 설명하도록 한다. 본 발명에 따르면, 촬영된 2차원 이미지에서 코의 회전을 판단하기 위하 여, 반려 동물의 코가 좌우 대칭적이라는 특징을 사용하여 코의 회전 방향 및 회전량이 검사될 수 있다. 따라서, 본 발명은 코의 윤곽을 형성하는 특징점을 먼저 정의하고, 각 특징점의 위치 관계로부터 코의 회전 여 부 및 회전 방향, 회전량을 판단함으로써 해당 비문 이미지가 정면 이미지 인지 여부를 판단할 수 있다. 코의 윤곽을 형성하는 특징점으로서 코의 상단, 하단, 좌측단, 우측단 등을 포함할 수 있으며, 또한 콧구멍의 상단, 하단, 좌측단, 우측단을 포함할 수 있다. 예를 들어, 도 5에 도시된 것과 같이 비문 이미지에 대하여 34개의 특징점들이 정의될 수 있으며, 각 특징점 번 호는 아래와 같이 설정될 수 있다. - 코 상단: 1, 코 하단: 18, 코 좌측단: 4, 코 우측단: 24 - 좌측 콧구멍 상단: 8, 좌측 콧구멍 하단: 12, 좌측 콧구멍 내측단: 10, 좌측 콧구멍 개구부: 5~6, 13~14 - 우측 콧구멍 상단: 28, 우측 콧구멍 하단: 32, 우측 콧구멍 내측단: 30, 우측 콧구멍 개구부: 25~26, 33~34 상기 특징점 번호 이외에도 도 5와 같이 코의 세로 중심선을 중심으로 좌우 대칭적으로 특징점이 설정될 수 있 다. 이러한 특징점의 위치 관계에 따라 코가 바라보는 방향(예: 좌측, 우측)을 판정할 수 있다. 각 특징점의 위치 관계에 기반하여 안면의 회전 여부를 판단하는 방법의 설명에 앞서, 비문 이미지로부터 이러 한 특징점을 추출하는 과정에 대하여 설명하도록 한다. 본 발명에 따르면, 특징점들을 추출하는 단계(S330)는, 이미지에 미리 정의된 패턴 타입에 대응하는 커널들을 각각 적용하는 단계와, 커널들을 적용하여 이미지의 픽셀 마다 각각의 커널과의 민감도를 나타내는 특징 벡터를 도출하는 단계와, 특징 벡터로부터 코의 윤곽을 나타내는 특징점들을 추출하는 단계를 포함한다. 반려 동물의 비문 이미지에서 특징점을 추출하는 방법으로서, Haar-like 특징, Histogram-of-Gradient (HoG) 특징 추출 기법 등이 이용될 수 있다. Haar-like 특징, 또는 HoG 특징을 이용하여 지역 특징 값(local featur e)을 추출한 후, 주성분 분석(Principal Component Analysis) 또는 다양한 기계 학습을 통해 특징점이 추출될 수 있다. 예를 들어 Haar-like 특징의 경우, 경계선 및 직선 등을 추출하는데 특화된 특징 추출 방법이다. 도 6과 같이 다양한 모양의 Haar-like 커널이 정의될 수 있다. 예를 들어, 경계선 특징(Edge feature)을 추출하는 커널로서 Haar-like 커널이 도 6과 같이 정의될 수 있다. 도 6에서, (a), (b), (c), (d)는 해당 영역 내에 위치하는 경 계선(edge)에 민감하게 반응하는 커널이며, (e), (f), (g), (h), (i), (j), (k), (l)은 해당 영역 내에 위치하 는 직선에 민감하게 반응하는 커널이며, (m), (n)은 해당 영역의 중심에 위치하는 개체에 민감하게 반응하는 커 널이다. 예를 들어, (a)는 수직 방향의 경계선에 민감하게 반응하는 커널, (b)는 수평 방향의 경계선에 민감하 게 반응하는 커널, (e)는 얇은 직선에 민감하게 반응하는 커널이다. 도 6은 예시로 14개의 Haar-like 커널을 도식하고 있으나, 그 크기와 모양, 방향 등에 따라 무수히 많은 커널이 정의될 수 있다. 미리 정의된 패턴 타입에 대응하는 각각의 커널과 입력 이미지에 대해 합성곱(convolution) 연 산을 수행함으로써, 영상 각 픽셀에 대한 특징 벡터를 추출할 수 있다. 이러한 특징 벡터는, 이미지 각각의 픽 셀 위치별로 각각의 Haar-like 커널에 얼마나 민감하게 반응하였는지를 나타낸다. 예를 들어, 도 7을 참고하면, 코의 최상부 위치를 나타내는 특징점의 경우, 많은 경우 가로선 모양의 경계선 성 분을 갖게 된다. 이에 따라 도 6의 커널 (a)와 높은 연관성을 보이며, 합성곱의 값이 커지게 된다. 반면 코의 좌측부를 나타내는 특징점의 경우, 많은 경우 세로선 모양의 경계선 성분을 갖게 된다. 이에 따라 도 6의 커널 (a)와는 낮은 연관성을 보이며, 합성곱의 값이 작아지게 된다. 이러한 원리에 따라, 이미지의 크기를 변화시키면서 이미지의 각 픽셀마다 n개의 커널을 이용하여 특징 정보를 추출하게 된다. 이러한 방법으로 각 특징점마다 특징 정보를 추출할 수 있으며, 다량의 이미지로부터 획득한 특 징 정보는 주성분 분석(Principle Component Analysis), 기계 학습 방법 내지는 신경망을 이용한 방법을 이용하 여 학습될 수 있다. Haar-like 특징이 경계선 정보를 바탕으로 추출하는 반면, HoG 특징 추출 방법은 이미지를 일정한 크기의 조각 으로 분할한 뒤, 각 조각 내에서 방향성 정보를 판단하고 이를 숫자로 변환함으로써 각 조각의 특징 정보를 추출한다. 이와 다른 이미지 처리 방법을 이용해서 특징 정보를 추출할 수 있음은 당연하다. 본 발명은 앞서 설명한 Haar-like 특징, HoG 특징 외에도 여러 가지 특징 추출 방법을 병합하여 사용할 수 있다. 각 픽셀에서 추출된 특징 정보는 통합되어 특징 벡터로 정의될 수 있다. 이렇게 추출된 특징 벡터로부터 주성분 분석, 또는 다양한 기계학습 방법을 통해 비문 이미지의 모델을 학습시킬 수 있다. 새로 입력된 영상 내 에서 특징점을 찾기 위하여, 전술한 특징 추출기를 이용하여 각 픽셀별 특징 벡터를 추출하고, 전술한 학습 모 델을 이용하여 가장 가능성이 높은 픽셀을 선택함으로써 특징점을 찾아낼 수 있다. 이러한 방법을 사용하면 각각의 특징점을 독립적으로 찾아낼 수 있다. 그러나, 위에서 정의한 복수의 특징점은 위치상 연관성을 가지고 있다. 예를 들면 최상단(1번) 특징점은 다른 특징점보다 세로축 상에서 가장 높은 위치 에 있으며, 콧구멍을 나타내는 특징점들은 코 외각을 나타내는 특징점보다 안쪽에 위치하여야 한다. 이러한 위 치 연관성을 이용하기 위하여, 특징점 사이의 상대적인 위치 관계를 이용한 검출 방법을 제안할 수 있다. 본 발명에 따르면, 특징점들을 추출하는 단계(S330)는, 특징점들을 연결하여 생성한 뼈대 모델과 반려 동물의 코 모델을 비교하여 특징점들의 연결 관계 및 위치를 교정하는 단계를 더 포함할 수 있다. 예를 들어, 도 8의 좌측과 같이 각 특징점을 순서대로 연결하는 직선을 형성하고, 이를 이용하여 뼈대 모델 (Skeleton model)을 생성할 수 있다. 이러한 뼈대 모델은 코의 윤곽선에 위치하게 될 것이라 가정할 수 있으며, 각각의 특징점을 뼈대 모델의 법선 방향으로 이동함으로써 모델을 코 모양에 정렬(fitting)할 수 있다. 이러한 과정이 성공적으로 수행되려면 각 특징점의 초기 위치 설정이 필요한데, 이는 전술한 개별 특징점 검출 방법을 이용하여 정의할 수 있다. 또한 이러한 과정을 통하여 개별 특징점이 검출이 올바로 되었는지, 예를 들면 콧구멍 개구부의 특징점들이 서 로 교차하여 꼬이지 않았는지 등을 점검할 수 있게 되며, 필요한 경우 특징점 간 위치를 교환하거나 코 윤곽선 에 특징점을 정렬하는 과정을 수행함으로써 잘못 검출된 특징점의 위치를 바로잡을 수 있게 된다. 또한 일부 특 징점의 검출에 실패하여 누락이 발생하더라도, 뼈대 모델을 이용하여 인접한 특징점의 위치로부터 누락된 특징 점의 위치를 추측해 낼 수 있다. 이러한 과정을 거침으로써, 반려 동물 코의 특징점 정보를 효율적으로 추출할 수 있으며, 특징점의 위치 관계와 기하학적 상관관계를 이용하여 코가 정면을 바라보는지, 또는 Pitch / Roll / Yaw 축의 회전이 발생하였는지를 판단할 수 있다. 앞서 설명한 바와 같이 비문 이미지로부터 코의 윤곽을 나타내는 특징점들을 추출한 후, 각 특징점들의 위치 관 계를 분석하여 반려 동물의 이미지가 정면 이미지인지를 판단할 수 있다. 이하, 비문 이미지의 특징점을 통해 안면의 회전 여부를 판단하는 방법에 대해 설명한다. 본 발명에 따르면, 특징점들의 위치 관계에 기반하여 코 영역이 정면인지 여부를 판단하는 단계(S340)는, 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선(1-18)을 구성하는 단계와, 특징점들 중 서로 대칭되는 특징점들(4, 24)과 세로축 선(1-18) 사이의 거리를 비교하여 안면의 요(Yaw) 방향 회전 여부를 판단하는 단계를 포함한다. 도 9에 도시된 것과 같이, 코 전체 영역의 상단과 하단을 연결하는 선(세로축 선)과 코 전체 영역의 좌 측단과 우측단을 연결하는 선(가로축 선)을 기준선으로 삼아, 좌-우 상호 대응되는 점의 상대적인 위치 를 측정할 수 있다. 이를 통하여 세로축 선의 좌측과 우측의 유사도를 측정할 수 있고, 세로축 선을 바탕으로 코가 어느 쪽으로 회전하였는지 Yaw 방향의 회전 여부와 회전 정도를 예측할 수 있다. 예를 들어, 도 9에서 1과 18을 잇는 선과 4와 24를 잇는 선은 각각 코의 세로축, 가로축을 의미한다. 정방향에 서 촬영하였다면 대칭성에 의하여 4에서 세로축까지의 거리, 그리고 24에서 세로축까지의 거리는 서로 유사할 것이다. 서로 대응되는 점의 쌍 사이에서 이와 같은 거리를 측정하고, 거리의 차이 값을 연산함으로써 손쉽게 Yaw 방향의 회전 정도를 예측할 수 있다. 또한, 본 발명에 따르면, 안면에 회전이 발생하였는지 여부를 판단하는 단계(S330)는, 코의 좌측단과 우측단 을 나타내는 특징점들을 연결하는 가로축 선(4-24)을 구성하는 단계와, 반려 동물의 콧구멍 개구부를 구성 하는 특징점들의 방향성을 나타내는 벡터가 상기 가로축을 기준으로 기준 범위 내에 위치하는지 여부에 기초하 여 안면의 피치(Pitch) 방향 회전 여부를 판단하는 단계를 포함한다. 본 발명에 따르면, 콧구멍 개구부(6-5-14-13, 26-25-34-33)의 방향성 정보를 파악하여 코가 상부를 바라보는지 또는 하부를 바라보는지 판단할 수 있다. 도 10에 도시된 것과 같이, 콧구멍 개구부의 4점을 기준으로 개구부의방향성을 벡터로 정의할 수 있다. 예를 들어, 개구부 벡터가 가로축을 기준으로 기준값 범위 내에 있다면 코의 Pitch 방향을 정면으로, 기준값 범위보다 높은 범위에 있다면 Pitch 방향을 위쪽 방향으로, 기준값 범위보다 낮 은 범위에 있다면 Pitch 방향을 아래쪽 방향이라고 판단할 수 있다. 또한, 본 발명에 따르면, 안면에 회전이 발생하였는지 여부를 판단하는 단계(S330)는, 코의 개구부에 해당하는 특징점들(6-5-14-13, 26-25-34-33)의 위치에 대한 반려 동물의 콧구멍 최상단에 해당하는 특징점(8, 28)의 위치 및 반려 동물의 콧구멍 최하단에 해당하는 특징점(12, 32)의 위치에 기초하여 안면의 피치(Pitch) 방향 회전 여 부를 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 콧구멍 부분의 최상단/최하단(각각 8, 12번, 28, 32번) 특징점과 개구부의 상대적 높이 정보 를 사용하면 현재 코가 바라보는 Pitch 방향을 손쉽게 예측할 수 있다. 도 9에 도시된 것과 같이, 코가 정면을 바라보는 경우, 개구부(6-5-14-13, 26-25-34-33)의 위치 대비 콧구멍 최상단(8, 28)의 위치는 위쪽으로 나타나 며, 최하단(12, 32)의 위치는 개구부(6-5-14-13, 26-25-34-33)와 유사한 높이로 나타난다. 반면, 도 11과 같이 코가 아래 방향을 바라보는 경우, 최상단의 위치와 개구부의 위치가 유사하게 나타나는 등의 특징을 갖게 된다. 따라서 이러한 상대적 높이 정보를 사용하면 손쉽게 Pitch 방향 회전 여부를 판단할 수 있다. 본 발명에 따르면, 특징점들의 위치 관계에 기반하여 코 영역이 정면인지 여부를 판단하는 단계(S340)는, 반려 동물의 좌측 콧구멍을 구성하는 특징점들을 연결한 좌측 콧구멍 면적과 반려 동물의 우측 콧구멍을 구성하는 특 징점들을 연결한 우측 콧구멍 면적을 비교하여 안면에 회전이 발생하였는지 여부를 판단하는 단계를 포함한다. 본 실시예에 따르면, 특징점을 연결한 다각형을 이용하여 코의 영역을 분할하고, 영역의 면적을 측정함으로써 코의 방향성을 판단할 수 있다. 이상적인 상황에서 코의 좌우가 대칭인 경우, 좌 우측의 분할 영역의 면적 또한 유사할 것이라 가정할 수 있으며, 코가 회전할수록 좌 우측 분할 면적의 크기 차이가 증가한다. 본 방법은 Pitch 회전에는 영향을 적게 받으므로, Pitch와 Yaw 방향으로 동시에 회전이 발생한 경우 유용하게 사용될 수 있다. 예를 들어, 도 12와 같이 콧구멍의 면적 비율을 이용하여, Pitch 방향의 각도 변화에 영향을 덜 받으면서도 Yaw 방향을 판단할 수 있다. 도 12에서 코가 상단으로 회전(Pitch)하고 좌측으로 회전(Yaw)한 상태이다. 세로축(1번 과 18번을 연결한 선)이 코의 가운데를 벗어난 상태이므로 대응점 대칭성을 이용한 방법으로는 Yaw 판단이 어려 울 수 있다. 그러나 콧구멍의 면적을 확인해 보면 우측 콧구멍 부분이 확연히 크게 측정되므로, 해당 이미지에 있어 Yaw 회전이 발생하였음이 확인될 수 있다. 본 발명에 따르면, 특징점들의 위치 관계에 기반하여 코 영역이 정면인지 여부를 판단하는 단계(S340)는, 상기 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하는 단계와, 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점에서 세로축 선 사이의 거리 및 반려 동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 세로축 선 사이의 거리를 비교하여 안면에 회전이 발생하였는지 여부를 판단하는 단계를 포함한다. 본 실시예에 따르면, 세로축 선(1번과 18번을 잇는 직선)과 콧구멍까지의 최단 거리 비율을 사용하여 Yaw 방향 성을 수 있다. 이상적인 상황에서 코가 정면을 바라보아 좌우 대칭을 이루는 경우, 도 13에서 좌측 콧구멍의 내 측 끝단 특징점 으로부터 세로축 선(1-18)까지의 거리와 우측 콧구멍의 내측 끝단 특징점점으로부터 수 직 축까지의 거리는 유사할 것이다. 앞서 기술한 코 전체 영역의 좌측 끝과 우측 끝의 경우, Pitch와 Yaw 회전이 동시에 발생하면서 일부 부정확한 결과가 발생할 수 있다. 그러나, 경험적으로 세로축 선(1-18)과 콧구멍 내측 특징점(10, 30)까지의 거리는 Pitch의 영향이 적고 Yaw 회전의 영향이 크게 작용한다. 따라서 도 13과 같이 세로축 선(1-18)으로부터 우측 콧 구멍의 내측 끝단(좌측 10번, 우측 30번) 까지의 거리를 각각 측정함으로써 Yaw 회전 정도를 추정할 수 있다. 코가 Pitch와 Yaw 방향으로 크게 회전된 경우 한 쪽 콧구멍이 다른 콧구멍에 비해 세로축 선(1-18)에 가깝게 위 치하게 되므로, 두 내측 끝단까지의 거리 차이가 일정 값을 벗어나는 경우 Yaw 회전이 발생하였음을 추측할 수 있다. 본 발명에 따르면, 안면에 회전이 발생하였는지 여부를 판단하는 단계(S340)는, 특징점들 중 코의 상단과 하단 을 나타내는 특징점들을 연결하는 세로축 선을 구성하는 단계와, 세로축 선과 반려 동물의 콧구멍 영역이 중첩 되는 경우 반려 동물의 안면이 정면이 아닌 것으로 판단하는 단계를 포함한다. 도 14와 같이 코가 크게 회전하여 한 쪽 콧구멍이 아예 보이지 않는 경우가 발생할 수 있다. 이러한 사진은 그 대로 비문 인식에 사용하기는 어려우므로, 별도로 분류하여 처리하여야 한다. 한 쪽 콧구멍이 보이지 않을 정도로 심하게 회전한 경우, 특징점 검출에 실패하거나 자연적으로 발생할 수 없는 특징점 위치가 검출된다. 예를 들면 도 14의 경우 코의 세로축 선(1-18)이 콧구멍 영역과 중첩되며, 한 쪽 콧구멍에 해당하는 특징점들(25~3 4)이 검출되지 않는다. 이와 같이 비정상적인 특징점 배치를 판단함으로써 코가 정면 대칭형이 아닌 형태로 촬 영되었음을 판단할 수 있다. 또한, 본 발명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법은 반려 동물의 안면이 정면이 아닌 것으로 판단되면 반려 동물의 안면이 포함된 이미지가 유효하지 않은 것으로 판단하 고 해당 이미지를 버리는 단계를 더 포함한다. 앞서 설명한 것과 같은 방법뿐만 아니라 특징점들의 위치 관계를 사용하여 비문 이미지의 반려 동물의 정면을 촬영한 이미지인지 여부를 판단하기 위한 다양한 방법이 사용될 수 있다. 본 발명에 따르면, 코의 윤곽을 나타내는 특징점들을 추출하여 특징점들의 위치 관계에 기반하여 안면에 회전이 발생하였는지 여부를 판단함으로써, 정면이 아닌 비문 이미지를 필터링 할 수 있다. 비문 이미지가 정면 사진이 아니라고 판단되는 경우, 해당 프레임의 이미지는 반려 동물의 비문 학습 또는 신원 식별을 위하여 사용되지 않 는다. 본 발명에 따른 비문의 정면 여부 판단은 복수개의 프레임 이미지에 대해 각각 개별적으로 수행될 수 있 으며, 특정 프레임에 대한 검사 결과 정면 이미지인 경우 해당 이미지를 사용하여 비문의 학습 또는 인식을 수 행할 수 있다. 본 문서에서 설명한 비문 이미지의 검사는 스마트폰, 태블릿과 같은 전자 장치에 의해 수행될 수 있다. 이하 본 발명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 장치 및 동작에 대하여 설명한다. 앞서 설명한 비문 이미지의 정면 여부(적합성) 검사는 반려 동물의 비문 인식을 위한 프로그램 또는 어플리케이션이 설치된 스마트폰, 태블릿과 같은 장치에 의해 수행될 수 있다. 도 15는 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 장치의 블록도이다. 본 발 명에 따른 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 장치는, 반려 동물 을 촬영하여 반려 동물의 안면이 포함된 이미지를 생성하는 카메라와, 이미지를 처리하여 이미지의 적합 성을 검사하는 프로세서를 포함한다. 프로세서는, 이미지에서 상기 반려 동물의 코 영역을 추출하 고, 코 영역에서 코의 윤곽을 나타내는 특징점들을 추출하고, 특징점들의 위치 관계에 기반하여 코 영역이 정면 인지 여부를 판단한다. 카메라는 렌즈와 같은 광학 모듈과 입력된 광으로부터 영상 신호를 생성하는 CCD(charge-coupled device) 또는 CMOS(complementary metal-oxide semiconductor)를 포함할 수 있으며, 영상 촬영을 통해 영상 데이터를 생성하여 프로세서로 제공할 수 있다. 프로세서는 장치의 각 모듈을 제어하고 영상 처리를 위해 필요한 연산을 수행한다. 프로세서는 그 기능에 따라 복수개의 마이크로프로세서(프로세싱 회로)로 구성될 수 있다. 프로세서는 앞서 설명한 바 와 같이 반려 동물(예: 강아지)의 식별을 위한 객체로서 코 영역을 검출하고, 해당 코 영역이 정면 이미지인지 여부를 판단할 수 있다. 추가적으로, 장치는 외부 개체와의 통신을 위한 통신 모듈, 데이터 저장을 위한 메모리, 화면 출력을 위한 디스플레이를 포함할 수 있다. 통신 모듈은 유/무선 네트워크를 통해 외부의 개체(entity)와 데이터를 송신 또는 수신할 수 있다. 특히, 통신 모듈은 서버와의 통신을 통해 인공 지능 기반의 처리를 위한 데이터를 교환할 수 있다. 메모리 는 영상 데이터 및 영상 처리를 위하여 필요한 정보를 저장하며, 디스플레이는 촬영중인 영상과 함 께 비문 인식을 위한 인터페이스(UI)를 표시할 수 있다. 뿐만 아니라, 장치는 그 필요에 따라 다양한 구 성을 포함할 수 있다. 본 발명에 따르면, 프로세서는 이미지에 미리 정의된 패턴 타입에 대응하는 커널들을 각각 적용하여 이미 지의 픽셀 마다 각각의 커널과의 민감도를 나타내는 특징 벡터를 도출하고, 특징 벡터로부터 코의 윤곽을 나타 내는 특징점들을 추출할 수 있다. 예를 들어, 프로세서는 도 6과 같은 커널들을 비문 이미지에 적용함으 로써 특징 벡터를 도출하고, 특징 벡터로부터 도 5와 같이 코의 윤곽을 나타내는 특징점들을 추출할 수 있다. 본 발명에 따르면, 프로세서는 특징점들을 연결하여 생성한 뼈대 모델과 반려 동물의 코 모델을 비교하여 특징점들의 연결 관계 및 위치를 교정할 수 있다. 예를 들어, 프로세서는 도 8과 같이 생성한 뼈대 모델 과 반려 동물의 코 모델을 비교하여 특징점들의 연결 관계 및 위치를 교정할 수 있다. 본 발명에 따르면, 프로세서는, 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 코의 좌측단을 나타내는 특징점에서 세로축 선 사이의 거리와 코의 우측단을 나타내는 특징점에서 세 로축 선 사이의 거리를 비교하여 상기 안면의 요(Yaw) 방향 회전 여부를 판단할 수 있다. 예를 들어, 프로세서 는 도 9와 같이 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선(1-18)을 구성하고, 코의 좌 측단을 나타내는 특징점에서 세로축 선(1-18) 사이의 거리와 코의 우측단을 나타내는 특징점에서 세로축 선(1-18) 사이의 거리를 비교하여 상기 안면의 요(Yaw) 방향 회전 여부를 판단할 수 있다. 본 발명에 따르면, 프로세서는, 코의 좌측단과 우측단을 나타내는 특징점들을 연결하는 가로축 선을 구성 하고, 반려 동물의 콧구멍 개구부를 구성하는 특징점들의 방향성을 나타내는 벡터가 가로축을 기준으로 기준 범 위 내에 위치하는지 여부에 기초하여 안면의 피치(Pitch) 방향 회전 여부를 판단할 수 있다. 예를 들어, 프로세 서는, 도 10과 같이 코의 좌측단과 우측단을 나타내는 특징점들을 연결하는 가로축 선(4-24)을 구성하고, 반려 동물의 콧구멍 개구부를 구성하는 특징점들의 방향성을 나타내는 벡터가 가로축(4-24)을 기준으로 기준 범 위 내에 위치하는지 여부에 기초하여 안면의 피치(Pitch) 방향 회전 여부를 판단할 수 있다. 본 발명에 따르면, 프로세서는, 코의 개구부에 해당하는 특징점들의 위치에 대한 반려 동물의 콧구멍 최 상단에 해당하는 특징점의 위치 및 반려 동물의 콧구멍 최하단에 해당하는 특징점의 위치에 기초하여 안면의 피 치(Pitch) 방향 회전 여부를 판단할 수 있다. 예를 들어, 프로세서는 도 11과 같이 코의 개구부에 해당하 는 특징점들(6-5-14-13, 26-25-34-33)의 위치에 대한 반려 동물의 콧구멍 최상단에 해당하는 특징점(8, 28)의 위치 및 반려 동물의 콧구멍 최하단에 해당하는 특징점(12, 32)의 위치에 기초하여 안면의 피치(Pitch) 방향 회 전 여부를 판단할 수 있다. 본 발명에 따르면, 프로세서는, 반려 동물의 좌측 콧구멍을 구성하는 특징점들을 연결한 좌측 콧구멍 면 적과 반려 동물의 우측 콧구멍을 구성하는 특징점들을 연결한 우측 콧구멍 면적을 비교하여 안면에 회전이 발생 하였는지 여부를 판단할 수 있다. 예를 들어, 프로세서는 도 12와 같이 반려 동물의 좌측 콧구멍을 구성 하는 특징점들(7-8-9-10-11-12-13)을 연결한 좌측 콧구멍 면적과 반려 동물의 우측 콧구멍을 구성하는 특징점들 (26-27-28-29-30-31-32-33)을 연결한 우측 콧구멍 면적을 비교하여 안면에 회전이 발생하였는지 여부를 판단할 수 있다. 본 발명에 따르면, 프로세서는, 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점에서 세로축 선 사이의 거리 및 반려 동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 세로축 선 사이의 거리를 비교하여 안면에 회전이 발생하였는 지 여부를 판단할 수 있다. 예를 들어, 프로세서는 도 13과 같이 코의 상단과 하단을 나타내는 특징점들 을 연결하는 세로축 선(1-18)을 구성하고, 반려 동물의 좌측 콧구멍의 내측 끝단을 나타내는 특징점에서 세 로축 선(1-18) 사이의 거리 및 반려 동물의 우측 콧구멍의 내측 끝단을 나타내는 특징점에서 세로축 선(1- 18) 사이의 거리를 비교하여 안면에 회전이 발생하였는지 여부를 판단할 수 있다. 본 발명에 따르면, 프로세서는, 특징점들 중 코의 상단과 하단을 나타내는 특징점들을 연결하는 세로축 선을 구성하고, 세로축 선과 반려 동물의 콧구멍 영역이 중첩되는 경우 반려 동물의 안면이 정면이 아닌 것으로 판단할 수 있다. 예를 들어, 프로세서는 도 14와 같이 특징점들 중 코의 상단과 하단을 나타내는 특징점 들을 연결하는 세로축 선(1-18)을 구성하고, 세로축 선(1-18)과 반려 동물의 콧구멍 영역(6-7-8-9-10-11-12- 13)이 중첩되는 경우 반려 동물의 안면이 정면이 아닌 것으로 판단할 수 있다. 본 발명에 따르면, 프로세서는, 반려 동물의 안면이 정면이 아닌 것으로 판단되면 반려 동물의 안면이 포 함된 이미지가 유효하지 않은 것으로 판단하고 해당 이미지를 버리고, 다음 프레임의 이미지에 대한 유효성 검 사를 수행할 수 있다. 본 실시예 및 본 명세서에 첨부된 도면은 본 발명에 포함되는 기술적 사상의 일부를 명확하게 나타내고 있는 것 에 불과하며, 본 발명의 명세서 및 도면에 포함된 기술적 사상의 범위 내에서 당업자가 용이하게 유추할 수 있 는 변형예와 구체적인 실시예는 모두 본 발명의 권리범위에 포함되는 것이 자명하다고 할 것이다. 따라서, 본 발명의 사상은 설명된 실시예에 국한되어 정해져서는 아니 되며, 후술하는 특허청구범위뿐 아니라 이 특허청구범위와 균등하거나 등가적 변형이 있는 모든 것들은 본 발명 사상의 범주에 속한다고 할 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7 도면8 도면9 도면10 도면11 도면12 도면13 도면14 도면15"}
{"patent_id": "10-2021-0146299", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 반려 동물의 관리를 위한 개략적인 절차를 도시한다. 도 2은 본 발명에 따른 객체 이미지의 적합도 판단이 적용된 반려 동물의 비문 관리를 위한 절차를 도시한다. 도 3은 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 방법의 흐름도이다. 도 4는 안면의 회전 방향의 예를 도시한다. 도 5는 본 발명에 따른 비문 이미지에서 코의 윤곽을 나타내는 특징점들의 예를 도시한다. 도 6 및 도 7은 비문 이미지에서 Haar-like 특징을 추출하기 위한 커널 및 커널을 적용하는 경우의 예를 도시한 다. 도 8은 뼈대 모델과 코 모델을 비교하여 특징점의 위치를 검사 및 교정하는 과정의 예를 도시한다. 도 9 내지 도 14는 코의 윤곽을 나타내는 특징점들의 위지 정보를 사용하여 회전 여부 및 회전 정도를 판단하는 경우의 예를 도시한다. 도 15는 반려 동물의 비문 학습 또는 인식을 위한 이미지의 적합성을 검사하기 위한 장치의 블록도이다."}
