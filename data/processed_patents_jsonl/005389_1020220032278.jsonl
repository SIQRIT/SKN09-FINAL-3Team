{"patent_id": "10-2022-0032278", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0135222", "출원번호": "10-2022-0032278", "발명의 명칭": "차량 승객 거동 추정 장치 및 방법", "출원인": "현대자동차주식회사", "발명자": "박준상"}}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "차량 내의 승객의 거동을 추정하는 승객 거동 추정 시스템에 있어서,차량 내의 상기 승객을 촬영하는 카메라;차량 정보를 획득하는 센서들;상기 카메라로부터 획득한 이미지들을 처리하여 상기 승객의 키포인트 정보를 획득하는 영상 처리 장치; 및상기 센서들을 통해 획득한 차량 정보 및 상기 영상 처리 장치로부터 획득한 키포인트 정보를 기초로 파티클 필터를 사용하여 상기 승객의 거동을 추정하는 차량 안전 제어기를 포함하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "차량 내의 적어도 하나의 승객의 거동을 추정하는 승객 거동 추정 시스템에 있어서,차량 내의 상기 적어도 하나의 승객을 촬영하는 카메라;차량 정보를 획득하는 센서들;상기 카메라로부터 획득한 이미지들을 처리하여 상기 적어도 하나의 승객의 키포인트 정보 및 상기 적어도 하나의 승객을 추적하여 제공하는 객체 추적 정보를 획득하는 영상 처리 장치; 및상기 센서들을 통해 획득한 차량 정보, 상기 영상 처리 장치로부터 획득한 키포인트 정보 및 감지된 적어도 하나의 승객 정보를 포함하는 객체 추적 정보를 기초로 파티클 필터를 사용하여 상기 적어도 하나의 승객 각각에대한 거동을 추정하는 차량 안전 제어기를 포함하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 센서들은 시트 정보 센서 및 동역학 센서 중 적어도 하나를 포함하고,상기 시트 정보 센서는 승객 착좌 정보, 시트 위치, 시트 인클라인 각도, 시트 스위블 각도를 제공하고,상기 동역학 센서는 차량의 가속도 및 각가속도 정보를 제공하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서, 상기 영상 처리 장치가 제공하는 상기 키포인트 정보는 이미지 평면 상의 상기 키포인트의 2차원 위치를 나타내는 키포인트 2차원 위치 정보를 포함하는,승객 거동 추정 시스템.공개특허 10-2023-0135222-3-청구항 5 제4항에 있어서, 상기 영상 처리 장치가 제공하는 상기 키포인트 정보는 상기 이미지 평면 상의 상기 키포인트의 3차원 위치를나타내는 키포인트 3차원 위치 정보를 더 포함하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서, 상기 영상 처리 장치는 미리 학습된 인공지능 시스템 또는 컴퓨터 비전 기법을 이용하여 상기 키포인트 정보를획득하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제5항에 있어서, 상기 차량 안전 제어기는, 제어부 및 파티클 필터부를 포함하고,상기 제어부는, 파티클 필터를 이용하여 추적중인 기존 승객 정보를 포함하는 추적중인 객체 정보를 생성하고,상기 추적중인 객체 정보 및 상기 영상 처리 장치로부터 획득한 객체 추적 정보에 기초하여, 상기 기존 승객에대한 감지 실패 여부 및 신규 승객에 대한 감지 여부를 판단하고, 상기 판단 결과, 신규 승객이 감지된 경우에는 해당 승객에 대응되는 파티클 필터의 생성을 상기 파티클 필터부에 명령하고,상기 판단 결과, 기존 승객의 감지를 실패한 경우에는, 해당 기존 승객에 대응되는 파티클 필터의 삭제를 명령하고,상기 파티클 필터부는,상기 제어부의 명령에 기초하여 파티클 필터를 생성하거나, 업데이트 하거나 또는 삭제하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에 있어서, 상기 파티클 필터부는, 상기 제어부의 명령에 기초하여 파티클 필터를 생성한 이후, 해당 파티클 필터에 대한 업데이트를 수행하고, 상기 파티클 필터에 대한 업데이트는 파티클 필터의 파티클들을 전파하고, 파티클들의 가중치를 업데이트하고,상기 가중치에 기초하여 거동 추정값을 계산하고, 특정 조건 만족시 파티클 필터의 파티클들을 리샘플링(resampling)하는 것을 포함하는, 승객 거동 추정 시스템.공개특허 10-2023-0135222-4-청구항 9 제7항에 있어서, 상기 제어부는, 상기 추적 중인 기존 승객의 경계 박스(bounding box)와 상기 감지된 적어도 하나의 승객에 대한 경계 박스 간의 IoU(intersection of union)의 합이 최대가 되도록 매칭을 수행하고, 상기 매칭 결과, 각 승객에 대한 IoU 값이 미리 설정된 임계값보다 큰 지에 기초하여 기존 승객에 대한 감지 실패 여부 및 신규 승객에 대한 감지 여부를 판단하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제7항에 있어서, 상기 제어부는 상기 신규 승객이 착좌 상태인지를 판단하고, 상기 파티클 필터부는,상기 신규 승객에 대한 파티클 필터를 생성한 후에,상기 신규 승객이 착좌 상태인 경우에는 상기 시트 정보 센서로부터 획득한 시트 정보에 기초하여 상기 신규 승객에 대한 파티클 필터의 파티클들을 초기화하고,상기 신규 승객이 착좌 상태가 아닌 OOP(out of position) 상태인 경우에는 상기 신규 승객의 키포인트 3차원위치 정보를 이용하여 상기 신규 승객에 대한 파티클 필터의 파티클들을 초기화하는, 승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서, 상기 제어부는 상기 시트 정보 센서로부터 획득한 상기 승객 착좌 정보에 기초하여 상기 신규 승객이 착좌 상태인지를 판단하거나, 또는상기 시트 정보 센서로부터 획득한 시트 정보에 기초하여 상기 시트에 대한 경계박스(bounding box)를획득하고, 상기 시트에 대한 경계박스와 상기 신규 승객에 대한 경계박스 간의 IoU 값이 미리 설정된 제1 임계값 이상인 경우에 상기 신규 승객을 착좌 상태로 판단하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제8항에 있어서, 상기 파티클 필터부는 상기 동역학 센서로부터 획득한 차량의 가속도와 각가속도 정보 및 승객의 동역학 모델에 기초하여 각 승객에대한 파티클 필터의 파티클들을 전파하는,공개특허 10-2023-0135222-5-승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서, 상기 파티클 필터부는 상기 동역학 센서로부터 획득한 차량의 가속도 또는 각가속도가 미리 설정된 제2 임계 값보다 큰 경우에만 상기승객의 동역학 모델을 추가적으로 사용하여 각 승객에 대한 파티클 필터의 파티클들을 전파하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제8항에 있어서, 상기 파티클 필터부는 사전 확률 정보, 상기 기존 승객의 상기 키포인트의 2차원 위치 정보, 상기 키포인트의 3차원 위치 정보 및 상기 시트 정보 센서로부터 획득한 시트 정보 중 적어도 하나에 기초하여 상기 제2 파티클 필터의 파티클들의 가중치를 업데이트(update)하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서, 상기 사전 확률 정보에 기반한 파티클들의 가중치를 업데이트 하는 것은, 신체적으로 불가능한 자세에 대응하는 키포인트를 나타내는 파티클들의 가중치를 0으로 하거나, 또는위치가 차량 실내를 벗어난 파티클들의 가중치를 0으로 하거나, 또는차량 실내에 해당하는 범위 정보 또는 상기 카메라의 화각에 따른 촬영 범위 정보를 구비하고, 파티클에 대응하는 키포인트의 3차원 좌표가 상기 범위를 벗어나는 경우 파티클의 가중치를 낮추거나 0으로 만들거나, 또는인체의 통계적인 신체 크기에 대한 자료를 반영하여 키포인트 간의 거리 정보에 대한 조건을 미리 설정하고, 파티클들에 대응하는 키포인트의 3차원 좌표가 설정된 조건을 만족하지 않는 경우 해당 파티클들의 가중치를 낮추거나 0으로 만드는 것인,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제14항에 있어서, 상기 키포인트의 2차원 위치 정보 또는 상기 키포인트의 3차원 위치 정보에 기초하여 파티클들의 가중치를 업데이트 하는 것은, 파티클에 대응하는 키포인트의 2차원 위치 정보 또는 키포인트의 3차원 위치 정보에 기초하여 파티클의 우도(likelihood) 확률을 계산하고, 상기 계산된 우도 확률에 기초하여 파티클 가중치 정보를 업데이트 하는 것인,승객 거동 추정 시스템.공개특허 10-2023-0135222-6-청구항 17 제14항에 있어서, 상기 시트 정보 중 적어도 하나에 기초하여 파티클들의 가중치를 업데이트 하는 것은, 상기 시트 정보로부터 계산된 착좌한 승객의 키포인트 좌표와 파티클들로부터 계산된 키포인트 좌표를비교하여, 양 키포인트 좌표 간의 거리에 반비례하게 가중치를 업데이트 하는 것인,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제8항에 있어서, 상기 차량 안전 제어기는, 상기 기존 승객의 키포인트의 위치를 파티클에 대응하는 키포인트 위치의 가중치를 반영한 평균값으로 추정하거나 또는상기 기존 승객의 키포인트의 위치를 가중치가 최대인 파티클에 대응하는 키포인트 위치로 추정하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제8항에 있어서, 상기 차량 안전 제어기는, 파티클 필터의 유효 파티클의 수가 미리 설정된 제3 임계 값보다 작은 경우에 파티클 리샘플링을 수행하거나 또는미리 설정된 제4 임계 값 이상의 파티클이 차량 실내를 벗어난 위치에 있는 경우에 파티클 리샘플링을수행하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제7항에 있어서, 상기 제어부는, 상기 판단 결과, 기존 승객의 감지를 실패한 경우에는, 상기 기존 승객에 대한 감지 실패 횟수를 기록하고, 상기 감지 실패 횟수가 미리 설정된 제5 임계 값보다 큰 경우에 해당 기존 승객에 대응하는 파티클 필터를 삭제하는,승객 거동 추정 시스템."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_21", "content": "승객 거동 추정 시스템의 차량 내 적어도 하나의 승객 각각에 대한 거동을 추정하는 승객 거동 추정 방법에 있어서, 카메라를 통해 획득한 이미지로부터 키포인트 정보를 획득하는 동작;상기 키포인트 정보에 기초하여 적어도 하나의 승객을 감지하고, 감지된 적어도 하나의 승객 정보를 포함하는공개특허 10-2023-0135222-7-객체 추적 정보를 획득하는 동작;센서들을 통해 획득한 차량 정보, 상기 키포인트 정보 및 상기 객체 추적 정보를 기초로 파티클 필터를 사용하여 상기 적어도 하나의 승객 각각에 대한 거동을 추정하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_22", "content": "제21항에 있어서, 상기 거동을 추정하는 동작은, 파티클 필터를 이용하여 추적중인 기존 승객 정보를 포함하는 추적중인 객체 정보를 생성하는 동작;상기 추적중인 객체 정보 및 상기 객체 추적 정보에 기초하여, 상기 기존 승객에 대한 감지 실패 여부 및 신규승객에 대한 감지 여부를 판단하는 동작;상기 판단 결과, 신규 승객이 감지된 경우에는 해당 신규 승객에 대응되는 파티클 필터를 생성하는 동작;상기 판단 결과, 기존 승객의 감지를 실패한 경우에는, 해당 기존 승객에 대응되는 파티클 필터를 삭제하는 동작; 및상기 판단 결과, 기존 승객이 감지된 경우에는 해당 기존 승객에 대응되는 파티클 필터를 업데이트 하는 동작을포함하는, 승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_23", "content": "제22항에 있어서, 상기 기존 승객에 대응되는 파티클 필터를 업데이트 하는 동작은,상기 기존 승객에 대응되는 파티클 필터의 파티클들을 전파하는 동작;상기 기존 승객에 대응되는 파티클 필터의 파티클들의 가중치를 업데이트하는 동작;상기 가중치에 기초하여 상기 기존 승객에 대한 거동 추정값을 계산하는 동작;특정 조건 만족시 상기 기존 승객에 대응되는 파티클 필터의 파티클들을 리샘플링(resampling)하는 동작을 포함하는, 승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_24", "content": "제22항에 있어서, 상기 기존 승객에 대한 감지 실패 여부 및 신규 승객에 대한 감지 여부를 판단하는 동작은,상기 추적 중인 기존 승객의 경계 박스(bounding box)와 상기 감지된 적어도 하나의 승객에 대한 경계 박스 간의 IoU(intersection of union)의 합이 최대가 되도록 매칭을 수행하는 동작; 상기 매칭 결과, 각 승객에 대한 IoU 값이 미리 설정된 임계값보다 큰 지를 판단하는 동작에 기초하여 기존 승객에 대한 감지 실패 여부 및 신규 승객에 대한 감지 여부를 판단하는 동작을 포함하는, 승객 거동 추정 방법.공개특허 10-2023-0135222-8-청구항 25 제22항에 있어서, 상기 신규 승객에 대응되는 파티클 필터를 생성하는 동작은,생성된 상기 신규 승객에 대응하는 파티클 필터의 파티클들을 초기화하는 동작을 더 포함하고,상기 신규 승객에 대응하는 파티클 필터의 파티클들을 초기화하는 동작은,상기 신규 승객이 착좌 상태인지를 판단하는 동작; 상기 신규 승객이 착좌 상태인 경우에는 시트 정보 센서로부터 획득한 시트 정보에 기초하여 상기 신규 승객에대응하는 파티클 필터의 파티클들을 초기화하는 동작; 및상기 신규 승객이 착좌 상태가 아닌 OOP(out of position) 상태인 경우에는 상기 신규 승객의 키포인트 3차원위치 정보를 이용하여 상기 신규 승객에 대응하는 파티클 필터의 파티클들을 초기화하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_26", "content": "제25항에 있어서, 상기 신규 승객이 착좌 상태인지를 판단하는 동작은,상기 시트 정보 센서로부터 획득한 승객 착좌 정보에 기초하여 상기 신규 승객이 착좌 상태인지를 판단하는 동작, 또는상기 시트 정보 센서로부터 획득한 시트 정보에 기초하여 상기 시트에 대한 경계박스(bounding box)를획득하고, 상기 시트에 대한 경계박스와 상기 신규 승객에 대한 경계박스 간의 IoU 값이 미리 설정된 제1 임계값 이상인 경우에 상기 신규 승객을 착좌 상태로 판단하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_27", "content": "제23항에 있어서, 상기 파티클 필터의 파티클들을 전파하는 동작은,동역학 센서로부터 획득한 차량의 가속도와 각가속도 정보 및 승객의 동역학 모델에 기초하여 상기 파티클 필터의 파티클들을 전파하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_28", "content": "제27항에 있어서, 상기 파티클 필터의 파티클들을 전파하는 동작은,상기 동역학 센서로부터 획득한 차량의 가속도 또는 각가속도가 미리 설정된 제2 임계 값보다 큰 경우에만 상기승객의 동역학 모델을 추가적으로 사용하여 상기 파티클 필터의 파티클들을 전파하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_29", "content": "공개특허 10-2023-0135222-9-제23항에 있어서, 상기 파티클들의 가중치를 업데이트하는 동작은,사전 확률 정보에 기초하여 상기 파티클들의 가중치를 업데이트(update)하는 동작;상기 키포인트의 2차원 위치 정보에 기초하여 상기 파티클들의 가중치를 업데이트(update)하는 동작;상기 키포인트의 3차원 위치 정보에 기초하여 상기 파티클들의 가중치를 업데이트(update)하는 동작; 및 시트 정보 센서로부터 획득한 시트 정보 중 적어도 하나에 기초하여 상기 파티클들의 가중치를 업데이트(update)하는 동작 중의 적어도 하나의 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_30", "content": "제29항에 있어서, 상기 사전 확률 정보에 기초하여 상기 파티클들의 가중치를 업데이트 하는 동작은, 신체적으로 불가능한 자세에 대응하는 키포인트를 나타내는 파티클들의 가중치를 0으로 하는 동작; 위치가 차량 실내를 벗어난 파티클들의 가중치를 0으로 하는 동작; 차량 실내에 해당하는 범위 정보 또는 상기 카메라의 화각에 따른 촬영 범위 정보를 구비하고, 파티클에 대응하는 키포인트의 3차원 좌표가 상기 범위를 벗어나는 경우 파티클의 가중치를 낮추거나 0으로 만드는 동작; 및인체의 통계적인 신체 크기에 대한 자료를 반영하여 키포인트 간의 거리 정보에 대한 조건을 미리 설정하고, 파티클들에 대응하는 키포인트의 3차원 좌표가 설정된 조건을 만족하지 않는 경우 해당 파티클들의 가중치를 낮추거나 0으로 만드는 동작 중 적어도 하나의 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_31", "content": "제29항에 있어서, 상기 키포인트의 2차원 위치 정보 또는 상기 키포인트의 3차원 위치 정보에 기초하여 파티클들의 가중치를 업데이트 하는 동작은, 파티클에 대응하는 키포인트의 2차원 위치 정보 또는 키포인트의 3차원 위치 정보에 기초하여 파티클의 우도(likelihood) 확률을 계산하는 동작; 및상기 계산된 우도 확률에 기초하여 파티클 가중치 정보를 업데이트 하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_32", "content": "제29항에 있어서, 상기 시트 정보 중 적어도 하나에 기초하여 파티클들의 가중치를 업데이트 하는 동작은, 상기 시트 정보로부터 계산된 착좌한 승객의 키포인트 좌표와 파티클들로부터 계산된 키포인트 좌표를 비교하는동작; 및양 키포인트 좌표 간의 거리에 반비례하게 가중치를 업데이트 하는 동작을 포함하는,공개특허 10-2023-0135222-10-승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_33", "content": "제23항에 있어서, 상기 기존 승객에 대한 거동 추정값을 계산하는 동작은,상기 기존 승객의 키포인트의 위치를 파티클에 대응하는 키포인트 위치에 파티클의 가중치를 반영한 평균값으로추정하는 동작 또는상기 기존 승객의 키포인트의 위치를 가중치가 최대인 파티클에 대응하는 키포인트 위치로 추정하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_34", "content": "제23항에 있어서, 상기 특정 조건 만족시 상기 기존 승객에 대응되는 파티클 필터의 파티클들을 리샘플링(resampling)하는동작은,상기 기존 승객에 대응되는 파티클 필터의 유효 파티클의 수가 미리 설정된 제3 임계 값보다 작은 경우에 파티클 리샘플링을 수행하는 동작; 또는미리 설정된 제4 임계 값 이상의 파티클이 차량 실내를 벗어난 위치에 있는 경우에 파티클 리샘플링을 수행하는동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_35", "content": "제22항에 있어서, 상기 기존 승객에 대응되는 파티클 필터를 삭제하는 동작은,상기 기존 승객에 대한 감지 실패 횟수를 기록하는 동작; 및상기 감지 실패 횟수가 미리 설정된 제5 임계 값보다 큰 경우에 상기 기존 승객에 대응되는 파티클 필터를 삭제하는 동작을 포함하는,승객 거동 추정 방법."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 차량 실내 카메라와 차량 내부 정보 센서를 통해 획득한 정보를 파티클 필터를 통해 융합하여 강건하 게 승객의 3차원 거동을 추정하는 장치 및 방법에 관한 것으로, 승객 거동 추정 시스템은 차량 내의 상기 적어도 하나의 승객을 촬영하는 카메라, 차량 정보를 획득하는 센서들, 상기 카메라로부터 획득한 이미지들을 처리하여 상기 적어도 하나의 승객의 키포인트 정보 및 상기 적어도 하나의 승객을 추적하여 제공하는 객체 추적 정보를 획득하는 영상 처리 장치 및 상기 센서들을 통해 획득한 차량 정보, 상기 영상 처리 장치로부터 획득한 키포인트 정보 및 객체 추적 정보를 기초로 파티클 필터를 사용하여 상기 승객의 거동을 추정하는 차량 안전 제어기를 포 함할 수 있다."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "다양한 실시 예는 차량 승객 거동 추정 장치 및 방법에 관한 것으로 차량 실내 카메라와 차량 내부 정보 센서를 통해 획득한 정보를 파티클 필터를 통해 융합하여 강건하게 승객의 3차원 거동을 추정하는 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "자율주행 자동차란 운전자의 조작없이 자동차 스스로 운행이 가능한 자동차를 말한다. 미국 자동차기술 학회는 자율주행기술 발전 단계를 6단계로 구분하고 있으며, 초기 단계는 사람이 주행 환경을 모니터링하고, 자율주행기술은 조향 지원이나 가속/감속 지원 등 사람의 운전을 보조하는 기능에 그치나 최종 단계는 사람의 개입이 없는 완전 자동화로서 자율주행 시스템이 모든 도로조건과 환경을 모니터링하면서 자동차 의 주행을 담당한다. 이러한 자율주행 자동차에 있어서, 자율주행 시스템이 차량 내외부의 정보를 획득하는 것은 필수 불가결한 요소 이다. 그리고 승객의 안전을 확보하기 위하여는 승객의 3차원 거동 확보가 필요하다."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 다양한 실시 예는 카메라와 같은 비접촉식 센서를 활용하여 강건하게 승객의 3차원 거동을 추정하는 방법 및 장치를 제공하고자 한다. 또한, 본 발명의 다양한 실시 예는 차량 실내 카메라와 차량 내부 정보 센서를 통해 획득한 정보를 파티클 필터 를 통해 융합하여 강건하게 승객의 3차원 거동을 추정하는 방법 및 장치를 제공하고자 한다. 본 문서에서 이루고자 하는 기술적 과제는 이상에서 언급한 기술적 과제로 제한되지 않으며, 언급되지 않은 또"}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 2, "content": "다른 기술적 과제들은 아래의 기재로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 다양한 실시 예들에 따르면, 차량 내의 승객의 거동을 추정하는 승객 거동 추정 시스템은 차량 내의 상기 승객을 촬영하는 카메라, 차량 정보를 획득하는 센서들, 상기 카메라로부터 획득한 이미지들을 처리하여 상기 승객의 키포인트 정보를 획득하는 영상 처리 장치 및 상기 센서들을 통해 획득한 차량 정보 및 상기 영상 처리 장치로부터 획득한 키포인트 정보를 기초로 파티클 필터를 사용하여 상기 승객의 거동을 추정하는 차량 안 전 제어기를 포함할 수 있다. 본 발명의 다양한 실시 예들에 따르면, 차량 내의 적어도 하나의 승객의 거동을 추정하는 승객 거동 추정 시스 템은 차량 내의 상기 적어도 하나의 승객을 촬영하는 카메라, 차량 정보를 획득하는 센서들, 상기 카메라로부터 획득한 이미지들을 처리하여 상기 적어도 하나의 승객의 키포인트 정보 및 상기 적어도 하나의 승객을 추적하여 제공하는 객체 추적 정보를 획득하는 영상 처리 장치 및 상기 센서들을 통해 획득한 차량 정보, 상기 영상 처리 장치로부터 획득한 키포인트 정보 및 객체 추적 정보를 기초로 파티클 필터를 사용하여 상기 승객의 거동을 추 정하는 차량 안전 제어기를 포함할 수 있다 본 발명의 다양한 실시 예들에 따르면, 승객 거동 추정 시스템의 승객 거동 추정 방법은 카메라를 통해 획득한 이미지로부터 키포인트 정보를 획득하는 동작, 상기 키포인트 정보에 기초하여 적어도 하나의 승객을 감지하고, 감지된 적어도 하나의 승객 정보를 포함하는 객체 추적 정보를 획득하는 동작, 상기 감지된 적어도 하나의 승객 을 기초로 기존 승객에 대한 감지 실패 여부, 상기 감지된 적어도 하나의 승객 중에 기존 승객과 대응되는 승객 이 있는 지 여부 및 신규 승객이 있는 지 여부를 판단하는 동작, 상기 판단 결과, 신규 승객이 있는 경우에는 해당 승객에 대응되는 제1 파티클 필터를 생성하고, 상기 제1 파티클 필터의 파티클들을 초기화하는 동작, 상기 판단 결과, 기존 승객과 대응되는 승객이 있는 경우에는 해당 기존 승객에 대응하는 제2 파티클 필터의 파티클 들을 전파하고, 파티클들의 가중치를 업데이트하고, 해당 기존 승객의 거동을 추정하고, 특정 조건 만족시 파티 클을 리샘플링(resampling) 하는 동작 및 상기 판단 결과, 기존 승객에 대응하는 승객에 대한 감지가 실패한 경 우에는, 해당 기존 승객에 대응되는 제3 파티클 필터를 삭제하는 동작을 포함할 수 있다."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "다양한 실시 예들에 따르면, 인공지능 기반의 승객 거동 추정에 있어서 예측할 수 없는 실패에 대비하여 차량 실내 카메라와 차량 내부 정보를 융합하여 더 강건하고 정확하게 승객의 3차원 거동을 추정할 수 있다. 또한, 다양한 실시 예들에 따라 추정된 승객의 3차원 거동은 자율주행 환경에서 정 위치에서 벗어난 상태의 승 객을 보호하기 위한 차량 안전 제어에 활용할 수 있다. 본 개시에서 얻을 수 있는 효과는 이상에서 언급한 효과들로 제한되지 않으며, 언급하지 않은 또 다른 효과들은 아래의 기재로부터 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 개시물의 이점 및 특징, 그리고 그것들을 달성하는 장치 및 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 개시물은 이하에서 개시되는 실시 예들에 한정되는 것 이 아니라 서로 다른 다양한 형태로 구현될 것이며, 단지 본 실시 예들은 본 개시물의 개시가 완전하도록 하며,"}
{"patent_id": "10-2022-0032278", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "본 개시물이 속하는 기술분야에서 통상의 지식을 가진 자에게 개시물의 범주를 완전하게 알려주기 위해 제공되 는 것이며, 본 개시물은 청구항의 범주에 의해 정의될 뿐이다. 명세서 전체에 걸쳐 동일 참조 부호는 동일 구성 요소를 지칭한다. 하나의 구성 요소가 다른 구성 요소와 \"연결된(connected to)\" 또는 \"커플링된(coupled to)\" 이라고 지칭되는 것은, 다른 구성 요소와 직접 연결 또는 커플링된 경우 또는 중간에 다른 구성 요소를 개재한 경우를 모두 포함 한다. 반면, 하나의 구성 요소가 다른 구성 요소와 \"직접 연결된(directly connected to)\" 또는 \"직접 커플링된 (directly coupled to)\"으로 지칭되는 것은 중간에 다른 구성 요소를 개재하지 않은 것을 나타낸다. \"및/또는\" 은 언급된 아이템들의 각각 및 하나 이상의 모든 조합을 포함한다. 본 명세서에서 사용된 용어는 실시 예들을 설명하기 위한 것이며 본 개시물을 제한하고자 하는 것은 아니다. 본 명세서에서, 단수형은 문구에서 특별히 언급하지 않는 한 복수형도 포함한다. 명세서에서 사용되는 \"포함한다 (comprises)\" 및/또는 \"포함하는(comprising)\"은 언급된 구성 요소, 단계, 동작 및/또는 소자는 하나 이상의 다 른 구성 요소, 단계, 동작 및/또는 소자의 존재 또는 추가를 배제하지 않는다. 비록 제 1, 제 2 등이 다양한 구성 요소들을 서술하기 위해서 사용되나, 이들 구성 요소들은 이들 용어에 의해 제한되지 않음은 물론이다. 이들 용어들은 단지 하나의 구성 요소를 다른 구성 요소와 구별하기 위하여 사용하 는 것이다. 따라서, 이하에서 언급되는 제 1 구성 요소는 본 개시물의 기술적 사상 내에서 제2 구성 요소 일 수도 있음은 물론이다. 다른 정의가 없다면, 본 명세서에서 사용되는 모든 용어(기술 및 과학적 용어를 포함)는 본 개시물이 속하는 기술 분야에서 통상의 지식을 가진 자에게 공통적으로 이해될 수 있는 의미로 사용될 수 있을 것이다. 또 일반적으로 사용되는 사전에 정의되어 있는 용어들은 명백하게 특별히 정의되어 있지 않는 한 이상적으로 또 는 과도하게 해석되지 않는다. 본 실시 예에서 사용되는 '부' 또는 '모듈'이라는 용어는 소프트웨어 또는 FPGA또는 ASIC과 같은 하드웨어 구성 요소를 의미하며, '부' 또는 '모듈'은 어떤 역할들을 수행한다. 그렇지만 '부' 또는 '모듈'은 소프트웨어 또는 하드웨어에 한정되는 의미는 아니다. '부' 또는 '모듈'은 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구성될 수도 있다. 따라서, 일 예로서 '부' 또는 '모듈' 은 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구성요소들 및 태스크 구성 요소들과 같은구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레이들, 및 변수 들을 포함할 수 있다. 구성요소들과 '부' 또는 '모듈'들 안에서 제공되는 기능은 더 작은 수의 구성요소들 및 '부' 또는 '모듈'들로 결합되거나 추가적인 구성요소들과 '부' 또는 '모듈'들로 더 분리될 수 있다. 이하 다양한 실시 예들이 첨부된 도면을 참고하여 상세히 설명된다. 도 1은, 다양한 실시예들에 따른, 차량 내 승객의 거동을 추정하는 승객 거동 추정 시스템을 도시한 도면 이고, 도 2는 승객 거동 추정 시스템에서 정보의 흐름을 도시한 도면이다. 도 1을 참조하면, 승객 거동 추정 시스템은 카메라, 복수의 차량 센서들, 영상 처리 장치 및 차량 안전 제어기를 포함할 수 있다. 카메라는 승객이 착좌할 수 있는 차량 내부의 시트(seat) 방향을 촬영하여 승객을 포함하는 영상을 획득할 수 있다. 복수의 차량 센서들은 차량 내부의 정보를 획득하기 위하여 차량 내 다양한 위치에 구비될 수 있으며, 특 히 차량의 움직임과 관련된 정보를 검출할 수 있는 동역학 센서 및 승객의 착좌 상태를 포함하여 승객이 착좌하는 시트와 관련된 정보를 검출할 수 있는 시트 정보 센서를 포함할 수 있다. 여기서, 동역학 센서 는 가속도 센서 및 요레이트(yaw rate) 센서를 포함할 수 있고, 시트 정보 센서는 승객의 착좌를 감 지하는 ODS(occupant detection system) 센서, 위치 센서, 인클라인(incline) 센서, 스위블(swivel) 센서 등을 포함할 수 있다. 영상 처리 장치는 카메라를 통해 획득한 영상을 처리하여 승객의 키포인트(key point) 정보 및 추가 적으로 객체 추적 정보를 추출할 수 있는 장치일 수 있다. 영상 처리 장치는 키포인트 추출부와 객체 추적부를 포함할 수 있다. 키포인트 추출부는 카메라를 통해 획득한 이미지를 가공한 후 CNN(convolutional neural network)과 같은 딥러닝(deep learning) 혹은 컴퓨터 비전(computer vision) 기법을 통해 승객의 키포인트를 추출할 수 있다. 승 객의 키포인트는 머리, 목, 어깨 등 승객의 상해 주요 포인트를 포함할 수 있으며, 각 키포인트에 대하여 이미 지 평면 상의 2차원 위치 및 공간 상의 3차원 위치를 추출할 수 있다. 일 실시예에 따라 3차원 위치는 추출되지 않을 수 있다. 객체 추적부는 객체 추적 로직을 사용하여 승객을 감지할 수 있다. 객체 추적 로직을 사용하는 이유는 더 강건하게 승객의 유무를 판단하고, 연속된 이미지로부터 추출된 승객의 키포인트 정보를 동일한 승객에게 할당 할 수 있기 때문이다. 객체 추적부는 카메라로부터 획득한 연속된 이미지들에서 감지된 승객을 추적하여 객체 추적 정보를 생성하고, 생성한 객체 추적 정보를 차량 안전 제어기로 전달할 수 있다. 객체 추적부 또한 CNN과 같 은 딥러닝 기법 혹은 컴퓨터 비전 기법을 통해 검출된 승객에 대응하는 객체 추적 정보를 결정할 수 있다. 객체 추적 정보는 추적된 승객의 식별번호(identification; ID)와 키포인트 정보, 경계 박스(bounding box) 정보, 착좌 정보를 포함할 수 있다. 일 실시 예에 따라, 객체 추적부는 일정한 시간 간격 또는 매 이미지 프레임 에서 승객을 추출하여 추적하고, 그 결과를 객체 추적 정보로 차량 안전 제어기로 전달할 수 있다. 이때 추적된 승객의 식별번호는 이전에 이미 추적된 승객과 동일한 승객으로 판단될 경우에는 동일한 식별번호를 사 용하고, 새롭게 인식된 승객의 경우에는 새로운 식별번호를 부여하여 제공할 수 있다. 차량 안전 제어기는 차량에 탑재되고, 영상 처리 장치로부터 획득한 정보와 복수의 차량 센서들(12 0)로부터 획득한 정보들을 융합하고, 파티클 필터(particle filter)를 이용하여 승객의 3차원 거동을 추정하는 장치일 수 있다. 파티클 필터는 시뮬레이션에 기반을 둔 예측 기술의 하나로 SMC(sequential Monte Carlo) 방법이라고도 하며, 비선형, 비가우시안 시스템에 적합한 알고리즘일 수 있다. 파티클 필터는 오차가 존재하는 관측 값만을 가지고 연속적으로 들어오는 정보를 예측할 수 있다. 파티클 필터는 시스템에 적절하게 제안된 확률분포로 임의로 생성 된 입력을 인가하고, 그 결과들을 종합하여 시스템의 정보를 추출하는 것일 수 있다. 차량 안전 제어기는 승객 별로 서로 독립적인 별도의 파티클 필터를 생성하여 각 승객의 거동을 파악하도 록 할 수 있다.차량 안전 제어기는 제어부 및 파티클 필터부를 포함할 수 있다. 제어부는 추적 중인 객체 정보를 실시간으로 업데이트하면서 구비할 수 있다. 추적 중인 객체 정보는 각 기존 승객에 대하여 승객을 식별하기 위한 식별번호(identification, ID), 경계박스(bounding box) 정보, 추적 되지 않은 횟수, 착좌 정보 등을 포함할 수 있다. 추적 중인 객체 정보의 식별번호는 영상 처리 장치로부 터 수신한 객체 추적 정보에 포함되어 있는 각 승객의 식별번호와 동일한 것을 사용할 수 있다. 제어부는 승객의 착좌 정보를 ODS 센서와 같은 시트 정보 센서를 사용하여 판단하거나 또는 시트의 경계 박스와 승객의 경계 박스 간의 IoU 값이 일정 임계값 이상일 때로 판단할 수 있다. 또는 2개의 방식을 결 합하여 사용할 수도 있다. 여기서 시트의 경계박스는 시트 정보에 따라 달라질 수 있다. 일 실시 예에 따라, 제어부는 시트 정보 센서가 승객이 착좌하고 있다는 정보를 제공하는 경우, 해당 승객이 착좌하고 있다고 판단할 수 있다. 다른 일 실시 예에 따라, 제어부는 시트의 경계 박스와 승객의 경계 박스 간의 IoU 값이 일정 임계값 이상 일 때 승객이 착좌하고 있다고 판단할 수 있다. 제어부는 위 2개의 정보를 결합하여 승객이 착좌하고 있는 지를 판단할 수 있는데 이하에서 상세히 설명한 다. 일 실시 예에 따라, 시트 정보 센서는 착좌 정보로 \"성인(adult),\" \"유아(small),\" \"착좌 없음(empty),\" 및 \"알 수 없음(indeterminate)\"을 제공할 수 있다. 제어부는 시트 정보 센서가 제공한 착좌 정보에 따라 착좌로 인식하는 조건과 착좌 해제 조건 (OOP(out of position)로 인식하는 조건)을 다르게 설정할 수 있다. 일 실시 예에 따라, 시트 정보 센서가 인식한 착좌 정보가 \"성인\" 또는 \"유아\"로 승객이 착좌하고 있는 것으로 표시하는 경우, 제어부는 시트 주변의 경계박스와 승객의 경계 박스 간의 IoU 값이 미리 설정된 임계 값보다 큰 경우에 착좌된 것으로 인식할 수 있다. 만약, 차량이 운전 중인 경우에는 시트 정보 센서가 인 식한 승객 정보에 상관없이, 제어부는 운전석에는 항상 성인이 착좌하고 있는 것으로 설정할 수 있다. 제어부는 승객이 착좌하고 있는 것으로 인식하고 있는 경우, 시트 정보 센서가 \"착좌없음\"의 정보를 제공하고, 시트 주변의 경계박스와 승객의 경계 박스 간의 IoU 값이 미리 설정된 임계 값보다 큰 경우를 일정 횟수 이상 만족하지 못할 때, 승객이 착좌하고 있다는 인식을 해제할 수 있다. 제어부는 승객이 착좌하고 있지 않은 것으로 인식한 경우, 시트 정보 센서가 착좌 없음의 정보를 제 공한다면 IoU 값에 상관없이 계속적으로 승객이 착좌하고 있지 않은 것으로 인식할 수 있다. 일 실시 예에 따라, 시트 정보 센서가 인식한 승객 정보가 \"알 수 없음\"인 경우, 제어부는 시트 주변 의 경계 박스와 승객의 경계 박스 간의 IoU 값이 미리 설정된 임계 값보다 큰 경우에 착좌된 것으로 인식할 수 있다. 여기서, \"알 수 없음\"인 경우의 임계 값은 상술한 착좌 판단 시 사용되는 임계 값보다 더 큰 값일 수 있 다. 그리고, 시트 정보 센서가 인식한 승객 정보가 \"알 수 없음\"이면서 제어부가 승객이 착좌하고 있 는 것으로 인식하고 있는 경우, 시트 주변의 경계 박스와 승객의 경계 박스 간의 IoU 값이 미리 설정된 임계 값 보다 큰 경우를 일정 횟수 이상 만족하지 못할 때, 착좌 인식을 해제할 수 있다. 제어부는 추적 중인 객체 정보 및 영상 처리 장치로부터 수신한 객체 추적 정보에 기초하여, 기존 승 객에 대한 감지가 실패하였는지, 신규 승객이 감지되었는 지를 판단하고, 그 결과에 기초하여 신규 승객에 대한 파티클 필터를 생성하거나 검출에 실패한 기존 승객에 대한 파티클 필터를 삭제하는 제어를 수행할 수 있다. 제어부는 객체 추적부로부터 획득한 객체 추적 정보와 키포인트 추출부로부터 획득한 키포인트 의 3차원 위치 및/또는 2차원 위치 정보 그리고 추적 중인 객체 정보에 기초하여 기존 승객에 대한 감지가 실패 하였는지 또는 신규 승객이 감지되었는 지를 판단할 수 있다. 도 3은 제어부가 승객을 감지하는 일 예를 도시한 도면이다. 도 3을 참조하면 제어부는 추적 중인 각 승객에 대한 경계 박스 정보를 획득할 수 있다. 추적 중인 각 승객에 대한 경계 박스 정보는 추적 중인 각 승객에 대하여 생성한 파티클 필터에 의하여 결정된 각 승객의 거동 정보에 기초하여 획득할 수 있다. 일 실시 예에 따라, 각 승객에 대한 경계 박스 정보는 파티클 필터부 에서 생성하여 제어부로 전달할 수 있다. 다른 일 실시 예에 따라, 제어부는 파티클 필터부로부터 각 승객의 추정된 키포인트 위치 정보를 획득하고, 이에 기초하여 직접 각 승객에 대한 경계 박스 정보를 생성할 수 있다. 도 4의 예에서 제어부는 식별번호가 각각 1, 2, 3인 기존 승객에 대한 경계 박스 정보를 획득하고 있을 수 있다. 제어부는 영상 처리 장치에서 획득한 정보에 기초하여 현재 감지된 승객의 경계 박스 정보를 획득할 수 있다. 일 실시 예에 따라 영상 처리 장치가 감지된 승객에 대한 경계 박스 정보를 생성하여 제 어부로 제공할 수 있으나, 다른 일 실시 예에 따라, 제어부가 영상 처리 장치로부터 수신한 객 체 추적 정보 및 키포인트 정보에 기초하여 감지된 승객에 대한 경계 박스 정보를 생성할 수도 있다. 제어부는 추적중인 승객에 대한 경계 박스와 현재 감지된 승객의 경계 박스 사이의 IoU(intersection of union)의 합이 최대가 되도록 매칭을 수행할 수 있다. 제어부는 매칭 결과에 기초하여 기존 승객의 감지 실패 여부, 신규 승객 여부를 판단할 수 있다. 도 4는 다양한 실시 예에 따른 승객 감지를 판단하는 제어부의 동작을 도시한 도면이다. 도 4를 참조하면, 제어부는 동작 S110에서, 추적중인 승객에 대한 제1 경계박스 정보를 획득하고, 동작 S120에서, 감지된 승객에 대한 제2 경계박스 정보를 획득하고, 동작 S130에서, 제1 경계박스와 제2 경계박스 간 에 IoU의 합이 최대가 되도록 매칭을 수행할 수 있다. 제어부는, 동작 S140에서, 각 식별번호에 대하여 IoU가 미리 설정된 임계 값보다 큰 지 및 기존 승객 여부 를 판단하여 각 식별번호에 대응하는 승객이 기존 승객 감지인지, 기존 승객에 대한 감지 실패인지, 신규 승객 감지인지를 판단할 수 있다. 도 3의 예를 참고하면, 매칭 결과로부터 식별번호 1과 2의 승객은 각각 IoU가 미리 설정된 임계 값보다 커 기존 승객 감지로 판단할 수 있고, 식별번호 3의 승객에 대하여는 IoU가 미리 설정된 임계 값보다 작고, 식별번 호가 추적 중인 승객에 대한 것이므로 기존 승객 감지 실패로 판단할 수 있고, 식별번호 4의 승객에 대하여는 IoU가 미리 설정된 임계 값보다 작고, 식별번호가 새롭게 감지된 승객에 대한 것이므로 신규 승객 감지로 판단 할 수 있다. 도 3 및 도 4에 도시된 것은 일 실시 예일뿐으로 제어부는 다른 방식에 기초하여, 예를 들면, 추적 중인 승객에 대한 식별 번호와 객체 추적부로부터 획득한 객체 추적 정보에 포함된 감지된 승객에 대한 식별 번 호를 비교하는 방식에 기초하여 기존 승객 감지 및 감지 실패, 신규 승객의 감지를 판단할 수도 있다. 제어부는 기존 승객 감지 실패의 경우에는 해당 승객에 대응하는 파티클 필터를 삭제할 수 있다. 일실시 예에 따라, 제어부는 기존 승객 감지 실패의 경우 바로 파티클 필터를 삭제할 수 있으나, 다른 일 실시 예 에 따라 제어부는 해당 승객에 대한 추적되지 않은 횟수를 1 증가시키고, 해당 승객의 추적되지 않은 횟수 가 미리 설정된 값보다 커진 경우에 대응하는 파티클 필터를 삭제할 수도 있다. 파티클 필터의 삭제가 필요한 경우, 제어부는 파티클 필터부에 해당 파티클 필터의 삭제를 명령할 수 있다. 제어부는 신규 승객이 감지된 것으로 판단된 경우에는 신규 승객의 거동을 추정하기 위한 파티클 필터의 생성을 파티클 필터부에 명령할 수 있다. 제어부는 기존 승객이 감지된 것으로 판단된 경우에는 해당 기존 승객의 거동을 추정하기 위하여 파티클 필터부에 해당 승객에 대응하는 파티클 필터의 업데이트를 명령할 수 있다. 파티클 필터부는 착좌정보, 가속도, 각속도, 시트 위치, 시트 인클라인 각도, 시트 스위블 각도를 포함하 는 차량 내부 센서 정보, 키포인트 2차원 위치 정보 및 3차원 위치 정보를 획득하고, 이를 기초로 승객의 거동 을 추정할 수 있다. 파티클 필터부는 감지된 승객 각각에 대한 거동을 추정하기 위하여 각 감지된 승객에 대하여 별도의 파티 클 필터를 구비할 수 있다. 도 5는 제어부의 파티클 필터 생성 명령에 따른 파티클 필터부의 파티클 필터 생성 동작을 도시한 도 면이다. 신규 승객이 감지된 경우에, 제어부는 파티크 필터부에 해당 승객에 대응하는 파티클 필터의 생성을 요청할 수 있다. 신규 승객에 대한 파티클 필터 생성 요청에 응답하여 파티클 필터부는, 동작 S210에서, 해당 신규 승객에 대응하는 새로운 파티클 필터를 생성하고, 동작 S220에서, 파티클 필터의 파티클(particle)을 초기화할 수 있다. 일 실시 예에 따라, 감지된 신규 승객이 착좌 상태이면, 시트 정보 센서를 이용하여 획득한 시트 정보에 기초하여 파티클을 초기화하고, 감지된 신규 승객이 OOP(out of position) 상태이면, 키포인트 3차원 위치 정보 를 이용하여 파티클을 초기화할 수 있다. 여기서 OOP 상태는 착좌 해제 상태, 즉 착좌하지 않은 상태를 나타낼 수 있다. 착좌 상태의 승객이 감지된 경우, 파티클 필터부는 모델링된 시트 정보에 따라 상이하게 설정된 착좌 상태 의 승객의 파라미터로 파티클을 초기화할 수 있다. 이때의 파라미터는 시트 정보에 기초하여 미리 설정된 값으 로 시트 정보 활용 승객 자세 추정 연구, 시트 인클라인 각도에 따른 착좌 승객의 자세 연구 등을 통해 획득하 고, 조정한 것일 수 있다. 다른 일 실시 예에 따라, 착좌 상태의 승객인 경우, 파티클 필터부는 시트 정보 에 따른 착좌 상태의 승객의 파라미터와 키포인트 3차원 초기 측정값을 일정 비율로 혼합하여 파티클의 초기화 를 수행할 수도 있다. 시트 정보를 활용할 수 없는 OOP 상태의 승객이 감지된 경우, 즉 시트 정보 센서로부터 \"착좌 없음\" 정보 를 획득하면서 키포인트 분석을 통해 승객이 감지된 경우, 파티클 필터부는 키포인트 3차원 초기 측정값을 통해 계산된 승객 모델 파라미터로 파티클을 초기화할 수 있다. 일 실시 예에 따라, 파티클 필터 생성시에 초기화 하는 파티클 개수는 고정된 값으로 설정할 수 있다. 여기서 각 파티클은 승객 인체 모델의 파라미터와 가중치로 구성될 수 있다. 승객 인체 모델은 최소한의 파라미 터로부터 관심있는 키 포인트의 3차원 위치를 계산할 수 있고, 동역학 모델(dynamics model)을 포함할 수 있다. 동역학 모델을 이용하여 파티클의 현재 상태를 파악할 수 있다. 일 실시 예에 따라 승객 인체 모델 파라미터는 목, 골반과 같은 기준 키포인트의 3차원 위치, 키포인트 간의 거리 (승객의 크기와 관련되며, 팔 및/또는 다리 의 길이를 의미할 수 있음) 그리고 각 관절의 각도 또는 키포인트를 연결하는 선 사이의 각도를 포함할 수 있다. 일 실시 예에 따라, 승객 인체 모델 파라미터는 남성 인체 모델 파라미터, 여성 인체 모델 파라미터 또는 유아 인체 모델 파라미터로 구별하여 설정할 수 있다. 도 6은 기준 키포인트의 예를 도시한 도면이다. 도 6을 참조하면, 일 실시 예에 따라, 인체의 각 관절들을 기준 키포인트들로 설정할 수 있다. 파티클 필터부는 신규 승객에 대한 파티클 필터의 파티클을 초기화한 후에는 바로 파티클 필터를 업데이트 하고, 승객의 거동을 추정할 수 있다. 파티클 필터부는 제어부로부터 기존 승객에 대한 파티클 필터의 업데이트 명령을 수신하면, 파티클 필터를 업데이트하고, 승객의 거동을 추정할 수 있다. 즉, 파티클 필터부는 제어부로부터 신규 승객에 대한 파티클 생성 명령을 수신하면 해당 승객에 대한 파티클 필터를 생성하고, 해당 파티클 필터의 파티클을 초기화한 이후, 그리고 제어부로부터 기존 승객에 대한 파티클 필터의 업데이트 명령을 수신한 이후, 해당 파티클 필터에 대한 업데이트를 수행할 수 잇다. 파티클 필터부는 파티클 필터를 업데이트한 후 대응하는 승객에 대한 거동을 추정할 수 있다. 도 7은 파티클 필터부의 파티클 필터 업데이트 동작을 도시한 도면이다. 도 7에 도시된 파티클 필터 업데이트 동작은 생성된 모든 파티클 필터에 대하여 독립적으로 수행될 수 있다. 도 7을 참조하면, 파티클 필터부는 동작 S230에서, 동역학 센서 측정값과 승객의 동역학 모델을 이용해서 예측된 상태로 파티클을 전파할 수 있다. 여기서 동역학 센서는 관성 측정(inertial measurement unit; IMU) 센서일 수 있으며, 측정값은 3축 가속도 및 3축 각가속도를 포함할 수 있다. 그리고 승객의 동역학 모델은 다음 함수와 같이 정의할 수 있다. 즉, 동역학 모델(F)은 승객의 상태(X), 관성 측정 센서 측정값(IMU Sensor) 및 미소 시간(dt)의 함수일 수 있다. 수학식 1 일 실시 예에 따라, 동역학 모델(F)은 매스-스프링-댐퍼 시스템(mass-spring-damper system)으로 모델링할 수 있다. 다른 일 실시 예에 따라, 동역학 모델은 경험적이거나 직관적인 방법으로 모델링할 수 있다. 예를 들면, 관성 측정 센서의 x축 값이 커지면 앞으로 기우는 것으로 모델링할 수 있고, 요레이트(yaw-rate)가 크게 나타나면 원 심력 방향으로 기우는 것으로 모델링할 수 있다. 한편, 동역학 모델은 가속도가 클 때, 더 정확하고 효과적일 수 있으므로, 갑작스러운 승객의 움직임을 예측하여 파티클이 잘 따라갈 수 있게 도와주는 역할을 할 수 있고, 그에 따라, 관성 측정 센서의 측정값이 특정 임계 값을 넘는 경우에만 동역학 모델을 적용하도록 할 수 있다. 일 실시 예에 따라, 동작 S230에서, 파티클 필터부는 수학식 1에서 예측한 X_predicted 값에 전파 노이즈 를 추가적으로 부가하여 파티클을 전파할 수도 있다. 파티클 필터부는, 동작 S240에서, 파티클 가중치를 업데이트할 수 있다. 파티클 가중치는 다양한 방법으로 업데이트될 수 있다. 예를 들면, 사전 확률 정보를 이용하여 파티클 가중치 정보를 업데이트 하거나, 또는 키포 인트 2차원 위치 정보를 이용하여 파티클 가중치 정보를 업데이트 하거나, 또는 키포인트 3차원 위치 정보를 이 용하여 파티클 가중치 정보를 업데이트 하거나 또는 시트 정보 센서로부터 획득한 시트 정보를 이용하여 파티클 가중치 정보를 업데이트할 수 있다. 또는 위에서 언급한 업데이트 방법 중의 적어도 일부를 조합하여 가 중치 정보를 업데이트할 수도 있다. 사전 확률 정보를 이용하여 파티클의 가중치를 업데이트하는 방법은 신체적으로 불가능한 자세의 파티클을 제거 하거나 차량 실내를 벗어난 파티클을 제거하는 것을 포함할 수 있다. 또한, 인체의 통계적인 수치를 활용하여 가중치를 업데이트하는 등 사전에 얻을 수 있는 정보를 활용하여 파티클의 가중치를 업데이트할 수도 있다. 즉, 사전에 가지고 있는 정보를 활용하여 조건에 맞지 않는 파티클을 제거(가중치를 0으로 업데이트)하거나 가중치 를 낮출 수 있다. 예를 들면, 파티클의 관절 각도 파라미터를 통해 양 어깨가 목을 중심으로 큰 각도로 꺾인다거나, 목이 비정상 적으로 꺾이는 등을 판단하여 파티클을 제거하거나 가중치를 낮출 수 있다. 파티클 필터부는 파티클의 승 객 인체 파라미터로부터 키포인트 3차원 위치를 계산하고, 계산된 키포인트 3차원 위치로부터 승객의 관절 각도 를 계산할 수 있다. 그리고 계산된 관절 각도로부터 불가능한 자세로 인식된다면 파티클을 제거하나 가중치를 낮출 수 있다. 또한, 파티클 파라미터로부터 계산된 키포인트의 3차원 좌표가 차량 실내를 벗어나는 경우에도 파티클을 제거할 수 있다. 파티클 필터부는 차량 실내에 해당하는 위치 정보 또는 카메라의 화각(field of view, FOV)에 대 한 정보를 미리 가지고 있고, 파티클에 대응하는 키포인트의 3차원 좌표가 해당 범위를 벗어나는 경우, 파티클 의 가중치를 낮추거나 파티클을 삭제할 수 있다. 또한, 인체의 통계적인 수치 중 신체 크기에 대한 자료를 반영하여 키포인트 간의 거리 정보에 대한 조건을 설 정하고, 파티클 파라미터로부터 계산된 키포인트의 3차원 좌표가 설정된 조건을 만족하지 않는 경우 파티클을 제거하거나 가중치를 낮출 수 있다. 또는 파티클 파라미터로부터 계산된 키포인트의 3차원 좌표 간의 거리가 비 정상적인 주요 부위간 거리를 나타내거나 비정상적인 신체 비율을 나타내는 경우에도 파티클을 제거하거나 가중 치를 낮출 수 있다. 키포인트 2차원 정보를 이용하여 파티클 가중치 정보를 업데이트 하는 방법은 먼저 파티클 파라미터로부터 계산 된 키포인트의 3차원 좌표를 이미지 평면으로 투사하여 파티클의 우도(likelihood) 확률을 계산하고, 이 계산된 확률 값에 기초하여 파티클 가중치 정보를 업데이트할 수 있다. 이때, 일 실시 예에 따라, 키포인트 2차원 정보 는 다변수 정규 분포 등의 확률 분포로 모델링 할 수 있다. 키포인트 3차원 정보를 이용하여 파티클 가중치 정보를 업데이트 하는 방법은 파티클 파라미터로부터 계산된 키 포인트의 3차원 좌표를 통해 파티클의 우도 확률을 계산하고, 이 계산된 확률 값에 기초하여 파티클 가중치 정 보를 업데이트할 수 있다. 이때, 일 실시 예에 따라, 키포인트 3차원 정보는 다변수 정규 분포 등의 확률 분포 로 모델링 할 수 있다. 시트 정보 센서를 이용하여 파티클 가중치를 업데이트하는 방법은 착좌 상태의 승객이 감지되었을 때, 시트 정 보로부터 계산된 키포인트의 좌표와 파티클로부터 계산된 3차원 좌표를 비교하여, 거리에 반비례하게 가중치를 업데이트할 수 있다. 예를 들면, 양 좌표가 유사하게 위치하는 경우 가중치를 높이고, 양 좌표가 멀리 떨어져 있는 경우에는 가중치를 낮춤으로써 파티클의 가중치를 업데이트 할 수 있다. 여기서 시트 정보로부터 계산된키포인트의 좌표는 미리 모델링된 시트 정보에 따른 착좌 상태의 승객의 파라미터로부터 획득한 키포인트의 좌 표일 수 있다. 예를 들면, 시트의 위치 정보, 인클라인 정보, 스위블 정보 중의 적어도 하나에 기초하여 착좌 승객의 각 관절 파라미터의 예상 좌표를 추정할 수 있고, 이 예상 좌표와 파티클로부터 계산된 3차원 좌표가 가 까울수록 높은 가중치를 부여하고, 예상 좌표를 기준으로 설정된 특정 범위를 벗어나면 가중치를 0으로 업데이 트할 수 있다. 파티클 필터부는, 동작 S250에서, 현재 추적되고 있는 각각의 파티클 필터의 파티클의 가중치에 기초하여 대응하는 승객의 거동 추정값을 계산할 수 있다. 일 실시 예에 따라, 파티클 필터부는 각 키포인트의 위치 를 가중치를 반영한 평균값으로 추정하거나 또는 가중치가 최대인 파티클에 대응하는 값으로 추정할 수 있다. 일 실시 예에 따라, 각 키포인트에 대응하는 파티클은 승객의 관절의 위치를 나타낼 수 있으므로 추정된 파티클 의 위치로부터 각 승객의 관절의 위치를 추정할 수 있고, 그로부터 승객의 거동을 추정할 수 있다. 파티클 필터부는 동작 S260에서, 특정 조건을 만족하는 경우 파티클 리샘플링을 할 수 있다. 여기서 특정 조건은 유효 파티클의 수가 미리 설정된 임계 값보다 작은 경우를 포함할 수 있다. 또는 차량 시스템에서 특정 개수 이상의 파티클이 차량 실내를 벗어나는 경우도 특정 조건에 해당할 수 있다. 또는 착좌 상태의 승객이 감 지되었으나, 착좌 상태를 나타내는 파티클이 적은 경우도 특정 조건에 해당할 수 있다. 일 실시 예에 따라, 파티클 필터부는 특정 조건 만족여부에 상관없이 매 사이클마다 리샘플링을 수행할 수 도 있다. 상술한 바와 같이 차량 안전 제어기는 영상 처리 장치로부터 오는 객체 추적 정보에 기초하여 복수의 승객을 특정하고, 복수의 승객 각각에 대응하는 파티클 필터를 생성하고, 영상 처리 장치로부터 각 승객에 대응하는 키포인트의 2차원 위치 정보와 3차원 위치 정보, 그리고 차량에 부착된 복수의 차량 센서들로부 터 가속도, 각속도, 시트 위치, 시트 인클라인 각도, 시트 스위블 각도 정보를 획득하여 각 승객에 대응하는 파 티클 필터의 파티클을 초기화하고, 파티클을 전파하고, 파티클 가중치를 업데이트하여 최종적으로 승객 거동 측 정값을 추정할 수 있다. 차량 안전 제어기는 파티클 필터부에서 추정한 승객 거동 또는 승객 키포인트의 3차원 위치에 기초하 여 승객의 관절 각도를 획득하고, 획득한 관절 각도를 기초로 자율주행 환경에 따른 승객의 다양한 자세를 인식 할 수 있다. 예를 들면, 차량 안전 제어기는 승객이 의자를 뒤로 젖히고 누워 있는 자세로 인식하거나 앞 으로 숙이고 있는 자세로 인식할 수 있다. 차량 안전 제어기는 추정한 승객 거동 또는 이로부터 획득한 승 객의 자세에 기초하여 에어백 전개 시점을 조절하는 등 안전 제어에 활용할 수 있다. 또한, 차량 안전 제어기는 파티클 필터부에서 추정한 값에 기초하여 승객 키포인트 중 상해 주요 부 위의 3차원 위치가 자동차 실내의 특정 영역에 들어가 있는 지를 인식할 수 있다. 예를 들면, 차량 안전 제어기 는 승객의 머리가 핸들, 윈드실드, 유리창 근처에 있는 지를 인식할 수 있다. 그리고 차량 안전 제어기 는 상해 주요 부위의 3차원 위치가 자동차 실내의 특정 영역에 들어가 있는 지를 인식하고, 이를 안전 제 어에 활용할 수 있다. 예를 들어 차량 안전 제어기는 머리가 유리창 근처에 있는 것으로 인식하는 경우, 측면 에어백 전개 시점이 보다 빠르게 되도록 조절할 수 있다. 또한, 차량 안전 제어기는 추정된 각 승객의 키포인트 3차원 위치로부터 승객간 상대적인 위치를 인식하여 사고 시, 승객 간 충돌을 예측 및/또는 방지할 수 있다. 예를 들면, 차량 안전 제어기는 추정한 승객간 상대적인 위치로부터 센터 에어백 전개 시점을 결정하는 데 활용할 수 있다. 상술한 거동 이후의 제어 동작들은 차량 안전 제어기의 제어부에서 수행될 수 있으나, 다른 일 실시 예에 따르면, 제어부와 별도로 구비되는 안전 제어부(미도시)에 의해서 수행될 수도 있다. 도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7"}
{"patent_id": "10-2022-0032278", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은, 다양한 실시예들에 따른, 차량 내 승객의 거동을 추정하는 시스템을 도시한 도면이다. 도 2는 승객 거동 추정 시스템에서 정보의 흐름을 도시한 도면이다. 도 3은 제어부가 승객을 감지하는 일 예를 도시한 도면이다. 도 4는 다양한 실시 예에 따른 승객 감지를 판단하는 제어부의 동작을 도시한 도면이다. 도 5는 제어부의 파티클 필터 생성 명령에 따른 파티클 필터부의 파티클 필터 생성 동작을 도시한 도면이다. 도 6은 기준 키포인트의 예를 도시한 도면이다. 도 7은 파티클 필터부의 파티클 필터 업데이트 동작을 도시한 도면이다."}
