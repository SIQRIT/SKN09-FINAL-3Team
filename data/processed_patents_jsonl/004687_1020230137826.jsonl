{"patent_id": "10-2023-0137826", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0148139", "출원번호": "10-2023-0137826", "발명의 명칭": "인공지능 기반의 의료 영상 분할 장치, 방법 및 프로그램", "출원인": "서울여자대학교 산학협력단", "발명자": "홍헬렌"}}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "복부 장기가 촬영된 서로 다른 종류의 복수의 의료 영상을 획득하는 의료 영상 획득부; 및상기 복수의 의료 영상을 2차원 컨볼루션 신경망에 입력하여 상기 복수의 의료 영상 각각에 대한 특정 장기 정보 확률맵을 획득하고,상기 특정 장기 정보 확률맵에 대한 제1 다수 투표를 통해 상기 특정 장기의 위치화를 수행하고,상기 위치화 수행이 완료된 복수의 의료 영상을 복수의 3차원 의료 영상으로 변환하고,상기 복수의 3차원 의료 영상을 3차원 컨볼루션 신경망에 입력하여 상기 복수의 3차원 의료 영상에 대한 평균값의 확률맵 및 불확실성의 확률맵을 각각 획득하고,상기 복수의 3차원 의료 영상에 대한 평균값의 확률맵 및 불확실성의 확률맵을 이용하여 협동 학습을 수행하는제어부를 포함하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 제어부는,상기 협동 학습된 결과에 대한 제2 다수 투표를 통해 상기 특정 장기를 분할하는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 제어부는,상기 불확실성의 확률맵에 근거하여 상기 복수의 3차원 의료 영상에서 상기 특정 장기를 분할할 때 발생되는 불확실한 영역을 감소시키는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서,상기 제어부는,상기 협동 학습을 통해 상기 복수의 3차원 의료 영상에서 상기 특정 장기를 분할할 때 발생되는 불확실한 영역에서 상기 특정 장기의 분할 정확도를 증가시키는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "공개특허 10-2023-0148139-3-제1항에 있어서,상기 제어부는,상기 제1 다수 투표에서 발생하는 과소적합으로 인한 위치화 오류를 감소시키기 위해 여백이 포함되도록 위치화영역을 설정하는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 제어부는,상기 평균값의 확률맵 및 상기 불확실성의 확률맵을 기반으로 상기 복수의 3차원 의료 영상에 대한 예측값을 산출하고,상기 산출된 예측값을 기반으로 상기 협동 학습을 수행하여 협동 학습 예측값을 산출하는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서,상기 복수의 의료 영상은 횡단면, 관상면 및 시상면의 2차원 의료 영상을 포함하고,상기 제어부는,상기 횡단면, 관상면 및 시상면의 입력 영상을 사용하여 획득한 N개의 분할 결과를 다수 투표 기법을 이용하여상기 특정 장기의 위치화를 수행하는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 제어부는,상기 불확실성의 확률맵에 따른 불확실도에 따라 손실함수의 가중치를 변경함으로써, 상기 위치화 수행이 완료된 복수의 의료 영상에서 상기 특정 장기의 형태적 특징으로 인해 발생하는 불확실한 영역에서의 과소 분할을해결하는 것을 특징으로 하는,의료 영상 분할 장치."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "장치에 의해 수행되는 방법으로,복부 장기가 촬영된 서로 다른 종류의 복수의 의료 영상을 획득하는 단계;상기 복수의 의료 영상을 2차원 컨볼루션 신경망에 입력하여 상기 복수의 의료 영상 각각에 대한 특정 장기 정보 확률맵을 획득하는 단계;상기 특정 장기 정보 확률맵에 대한 제1 다수 투표를 통해 상기 특정 장기의 위치화를 수행하는 단계;상기 위치화 수행이 완료된 복수의 의료 영상을 복수의 3차원 의료 영상으로 변환하는 단계;공개특허 10-2023-0148139-4-상기 복수의 3차원 의료 영상을 3차원 컨볼루션 신경망에 입력하여 상기 복수의 3차원 의료 영상에 대한 평균값의 확률맵 및 불확실성의 확률맵을 각각 획득하는 단계; 및상기 복수의 3차원 의료 영상에 대한 평균값의 확률맵 및 불확실성의 확률맵을 이용하여 협동 학습을 수행하는단계를 포함하는,의료 영상 분할 방법."}
{"patent_id": "10-2023-0137826", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "하드웨어인 컴퓨터와 결합되어, 제9항의 방법을 실행시키기 위하여 매체에 저장된, 프로그램."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "의료 영상 분할 장치 및 의료 영상 분할 방법이 제공된다. 상기 의료 영상 분할 방법은 복부 장기가 촬영된 서로 다른 종류의 의료 영상들을 획득하는 단계, 상기 서로 다른 종류의 의료 영상들을 2차원 컨볼루션 신경망에 입력 하여 각 의료 영상들에 대한 특정 장기 정보 확률맵을 출력하고, 획득된 복수의 특정 장기 정보 확률맵에 대한 제1 다수투표를 통해 특정 장기의 위치화를 수행하는 단계, 위치화된 복수의 의료 영상들을 3차원 의료 영상으로 변환하고, 변환된 복수의 3차원 의료 영상들을 3차원 컨볼루션 신경망에 입력하여, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 각각 출력하는 단계 및 복수의 3차원 의료 영상들에 대한 평균값 의 확률맵 및 불확실성의 확률맵을 이용하여 협동 학습을 수행하고, 협동 학습된 결과에 대한 제2 다수투표를 통 해 특정 장기를 분할하는 단계를 포함한다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 의료 영상 분할 장치 및 의료 영상 분할 방법에 관한 것으로, 보다 구체적으로, 복부 CT 영상에서 췌 장의 불확실성을 고려한 계층적 네트워크 및 협동학습 기반의 자동 췌장 분할 방법 및 이를 구현하는 장치에 관 한 것이다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "2019년 보건복지부와 중앙암등록본부에서 발표한 2017년 국가암등록 통계자료에 따르면 췌장암은 전체 암종 중 발생률 3%로 8위를 차지하였고, 최근 10년간 발생률은 지속적으로 증가 추세를 보이고 있다. 췌장암은 초기부터 진행된 시기까지 특징적인 증상이 없고, 암종의 성장 속도가 빠르며, 주위 조직으로의 전이 가 쉬워 대부분 수술적 절제를 수행하여 장기 생존율을 높인다. 췌장암 절제 전, 췌장을 파악하고 췌장암을 검 출하기 위해 췌장의 형태에 대한 사전 정보가 중요하므로 복부 CT 영상에서 췌장 분할은 필수적인 사전 단계이 다. 도 3은 복부 CT 영상에서 췌장의 특성을 나타낸 것으로 도 3의 (a)와 같이 췌장은 위, 간, 비장, 소장, 간문맥 등의 주변 장기와 유사한 밝기값을 가지며, 도 3의 (b)와 같이 각 영상 슬라이스에서 보이는 췌장의 형태가 상 이하며, 도 3의 (c)와 같이 환자마다 췌장의 형태가 다양하다는 특징이 있다. 딥 컨볼루션 신경망(Convolutional Neural Network; CNN) 기반의 다양한 연구들이 있지만 공통적으로 췌장의 불 확실한 경계 부분에서 과소분할 및 과대분할 문제가 발생하는 한계가 있다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 해결하고자 하는 과제는 최적화된 방법으로 의료 영상에서 특정 장치를 분할하는 것이 가능한 의료 영상 분할 장치 및 방법을 제공하는데 있다. 본 발명의 해결하고자 하는 과제는, 딥 컨볼루션 신경망을 기반으로 위치화 단계를 통해 복부 CT 영상에서 췌장 위치를 효과적으로 검출하고, 해당 영역 내에서 불확실한 영역에 대한 정보를 고려하여 췌장의 분할 정확도를 개선하는 것이 가능한 의료 영상 분할 장치 및 방법을 제공하는데 있다. 본 발명이 해결하고자 하는 과제들은 이상에서 언급된 과제로 제한되지 않으며, 언급되지 않은 또 다른 과제들 은 아래의 기재로부터 통상의 기술자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상술한 과제를 해결하기 위한 본 발명의 일 면에 따른 의료 영상 분할 방법은, 장치에 의해 수행되는 방법에 있 어서, 복부 장기가 촬영된 서로 다른 종류의 의료 영상들을 획득하는 단계, 상기 서로 다른 종류의 의료 영상들 을 2차원 컨볼루션 신경망에 입력하여 각 의료 영상들에 대한 특정 장기 정보 확률맵을 출력하고, 획득된 복수 의 특정 장기 정보 확률맵에 대한 제1 다수투표를 통해 특정 장기의 위치화를 수행하는 단계, 위치화된 복수의 의료 영상들을 3차원 의료 영상으로 변환하고, 변환된 복수의 3차원 의료 영상들을 3차원 컨볼루션 신경망에 입력하여, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 각각 출력하는 단계 및 복 수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 이용하여 협동 학습을 수행하고, 협동 학습된 결과에 대한 제2 다수투표를 통해 특정 장기를 분할하는 단계를 포함한다. 실시 예에 있어서, 상기 서로 다른 종류의 의료 영상들은, 횡단면, 관상면 및 시상면의 2차원 의료 영상을 포함 하는 것을 특징으로 한다. 실시 예에 있어서, 상기 서로 다른 종류의 의료 영상들에 대하여 데이터 전처리를 수행하는 단계를 더 포함하고, 상기 데이터 전처리를 수행하는 단계는, 상기 서로 다른 종류의 의료 영상들에 대하여 밝기값 정규화 및 공간 정규화를 수행하는 것을 특징으로 한다. 실시 예에 있어서, 상기 공간 정규화는, 원본 영상의 화소 크기에서 최소 화소 값을 나누어 최근린 보간법을 이 용하여 영상을 변환하는 것을 특징으로 한다. 실시 예에 있어서, 상기 2차원 컨볼루션 신경망 및 3차원 컨볼루션 신경망은, 수축 경로 및 확장 경로로 구성되 는 것을 특징으로 한다. 실시 예에 있어서, 상기 수축 경로에서는, 상기 입력된 의료 영상들에 대하여, 컨볼루션, 배치 정규화, 활성화 함수 수행 및 맥스 풀링을 순차적으로 수행하는 것을 특징으로 한다. 실시 예에 있어서, 상기 확장 경로에서는, 업 컨볼루션 및 연결 연산을 수행하여, 상기 수축 경로에서 줄어든 영상의 크기를 늘리고, 상기 수축 경로에서 증가된 채널 수를 감소시키는 것을 특징으로 한다. 실시 예에 있어서, 상기 서로 다른 종류의 의료 영상들은, 삼단면 영상 정보이고, 상기 위치화를 수행하는 단계 는, 상기 삼단면 영상 정보에 대한 공간적인 정보를 이용하여 상기 특정 장기의 위치화를 수행하는 것을 특징으 로 한다. 실시 예에 있어서, 상기 3차원 컨볼루션 신경망에 입력되는 복수의 3차원 의료 영상들은, 위치화가 수행된 서로 다른 종류의 의료 영상들을 각각 3차원 의료 영상으로 변환한 영상들인 것을 특징으로 한다. 실시 예에 있어서, 상기 출력하는 단계는, 복수의 3차원 의료 영상들을 드롭아웃 레이어에 입력하여 상기 3차원 컨볼루션 신경망에 입력한 영상과 동일한 크기의 N개(N은 자연수)의 드롭아웃 결과를 출력하고, 상기 드롭아웃 결과를 이용하여 평균값의 확률맵 및 불확실성의 확률맵을 추출하는 것을 특징으로 한다. 실시 예에 있어서, 상기 특정 장기를 분할하는 단계는, 상기 불확실성의 확률맵에 근거하여, 의료 영상에서 특 정 장기를 분할할 때 발생되는 불확실한 영역을 감소시키고, 협동 학습을 통해 불확실한 영역에서의 분할 정확 도를 증가시키는 것을 특징으로 한다. 본 발명의 다른 실시 예에 따른 의료 영상 분할 장치는, 복부 장기가 촬영된 서로 다른 종류의 의료 영상들을 획득하는 의료 영상 획득부 및 상기 서로 다른 종류의 의료 영상들을 2차원 컨볼루션 신경망에 입력하여 각 의 료 영상들에 대한 특정 장기 정보 확률맵을 출력하고, 획득된 복수의 특정 장기 정보 확률맵에 대한 제1 다수투 표를 통해 특정 장기의 위치화를 수행하는 제어부를 포함하고, 상기 제어부는, 위치화된 복수의 의료 영상들을 3차원 의료 영상으로 변환하고, 변환된 복수의 3차원 의료 영상들을 3차원 컨볼루션 신경망에 입력하여, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 각각 출력하며, 복수의 3차원 의료 영상들 에 대한 평균값의 확률맵 및 불확실성의 확률맵을 이용하여 협동 학습을 수행하고, 협동 학습된 결과에 대한 제 2 다수투표를 통해 특정 장기를 분할하는 것을 특징으로 한다. 실시 예에 있어서, 상기 특정 장기는, 췌장을 포함하고, 상기 서로 다른 종류의 의료 영상들은, 횡단면, 관상면 및 시상면의 2차원 의료 영상을 포함하는 것을 특징으로 한다. 실시 예에 있어서, 상기 제어부는, 상기 서로 다른 종류의 의료 영상들에 대하여 데이터 전처리를 수행하며, 상 기 서로 다른 종류의 의료 영상들에 대하여 밝기값 정규화 및 공간 정규화를 수행하는 것을 특징으로 한다. 실시 예에 있어서, 상기 공간 정규화는, 원본 영상의 화소 크기에서 최소 화소 값을 나누어 최근린 보간법을 이 용하여 영상을 변환하는 것을 특징으로 한다. 실시 예에 있어서, 상기 2차원 컨볼루션 신경망 및 3차원 컨볼루션 신경망은, 수축 경로 및 확장 경로로 구성되 는 것을 특징으로 한다. 실시 예에 있어서, 상기 수축 경로에서는, 상기 입력된 의료 영상들에 대하여, 컨볼루션, 배치 정규화, 활성화 함수 수행 및 맥스 풀링을 순차적으로 수행하는 것을 특징으로 한다. 실시 예에 있어서, 상기 확장 경로에서는, 업 컨볼루션 및 연결 연산을 수행하여, 상기 수축 경로에서 줄어든 영상의 크기를 늘리고, 상기 수축 경로에서 증가된 채널 수를 감소시키는 것을 특징으로 한다. 실시 예에 있어서, 상기 서로 다른 종류의 의료 영상들은, 삼단면 영상 정보이고, 상기 제어부는, 상기 삼단면 영상 정보에 대한 공간적인 정보를 이용하여 상기 특정 장기의 위치화를 수행하는 것을 특징으로 한다. 실시 예에 있어서, 상기 3차원 컨볼루션 신경망에 입력되는 복수의 3차원 의료 영상들은, 위치화가 수행된 서 로 다른 종류의 의료 영상들을 각각 3차원 의료 영상으로 변환한 영상들인 것을 특징으로 한다. 실시 예에 있어서, 상기 제어부는, 복수의 3차원 의료 영상들을 드롭아웃 레이어에 입력하여 상기 3차원 컨볼루 션 신경망에 입력한 영상과 동일한 크기의 N개(N은 자연수)의 드롭아웃 결과를 출력하고, 상기 드롭아웃 결과를 이용하여 평균값의 확률맵 및 불확실성의 확률맵을 추출하는 것을 특징으로 한다. 실시 예에 있어서, 상기 제어부는, 상기 불확실성의 확률맵에 근거하여, 의료 영상에서 특정 장기를 분할할 때 발생되는 불확실한 영역을 감소시키고, 협동 학습을 통해 불확실한 영역에서의 분할 정확도를 증가시키는 것을 특징으로 한다. 이 외에도, 본 발명을 구현하기 위한 다른 방법, 다른 시스템 및 상기 방법을 실행하기 위한 컴퓨터 프로그램을 기록하는 컴퓨터 판독 가능한 기록 매체가 더 제공될 수 있다. 본 발명의 기타 구체적인 사항들은 상세한 설명 및 도면들에 포함되어 있다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면, 본 발명에서는 2.5차원 분할 네트워크로 췌장의 위치 정보를 자동으로 추출한 뒤 위치화된 영역에서 불확실한 영역에 대한 정보를 고려한 3차원 분할 네트워크를 이용해 췌장을 정확하게 분할할 수 있는 새로운 의료 영상 분할 방법을 제공할 수 있다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과들은 이상에서 언급된 효과로 제한되지 않으며, 언급되지 않은 또 다른 효과들은 아래의 기재로 부터 통상의 기술자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나, 본 발명은 이하에서 개시되는 실시예들에 제한되는 것이 아니라 서 로 다른 다양한 형태로 구현될 수 있으며, 단지 본 실시예들은 본 발명의 개시가 완전하도록 하고, 본 발명이 속하는 기술 분야의 통상의 기술자에게 본 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명은 청구항의 범주에 의해 정의될 뿐이다. 본 명세서에서 사용된 용어는 실시예들을 설명하기 위한 것이며 본 발명을 제한하고자 하는 것은 아니다. 본 명 세서에서, 단수형은 문구에서 특별히 언급하지 않는 한 복수형도 포함한다. 명세서에서 사용되는 \"포함한다 (comprises)\" 및/또는 \"포함하는(comprising)\"은 언급된 구성요소 외에 하나 이상의 다른 구성요소의 존재 또는 추가를 배제하지 않는다. 명세서 전체에 걸쳐 동일한 도면 부호는 동일한 구성 요소를 지칭하며, \"및/또는\"은 언급된 구성요소들의 각각 및 하나 이상의 모든 조합을 포함한다. 비록 \"제1\", \"제2\" 등이 다양한 구성요소들을 서술하기 위해서 사용되나, 이들 구성요소들은 이들 용어에 의해 제한되지 않음은 물론이다. 이들 용어들은 단 지 하나의 구성요소를 다른 구성요소와 구별하기 위하여 사용하는 것이다. 따라서, 이하에서 언급되는 제1 구성 요소는 본 발명의 기술적 사상 내에서 제2 구성요소일 수도 있음은 물론이다.다른 정의가 없다면, 본 명세서에서 사용되는 모든 용어(기술 및 과학적 용어를 포함)는 본 발명이 속하는 기술 분야의 통상의 기술자에게 공통적으로 이해될 수 있는 의미로 사용될 수 있을 것이다. 또한, 일반적으로 사용되 는 사전에 정의되어 있는 용어들은 명백하게 특별히 정의되어 있지 않는 한 이상적으로 또는 과도하게 해석되지 않는다. 이하, 첨부된 도면을 참조하여 본 발명의 실시예를 상세하게 설명한다. 설명에 앞서 본 명세서에서 사용하는 용어의 의미를 간략히 설명한다. 그렇지만 용어의 설명은 본 명세서의 이 해를 돕기 위한 것이므로, 명시적으로 본 발명을 한정하는 사항으로 기재하지 않은 경우에 본 발명의 기술적 사 상을 한정하는 의미로 사용하는 것이 아님을 주의해야 한다. 본 명세서에서 '의료 영상 분할 장치'는 연산처리를 수행하여 사용자에게 결과를 제공할 수 있는 다양한 장치들 이 모두 포함된다. 예를 들어, ' 의료 영상 분할 장치'는 컴퓨터, 데스크 탑 PC, 노트북(Note Book) 뿐만 아니라 스마트폰(Smart phone), 태블릿 PC, 셀룰러폰(Cellular phone), 피씨에스폰(PCS phone; Personal Communication Service phone), 동기식/비동기식 IMT-2000(International Mobile Telecommunication-2000)의 이동 단말기, 팜 PC(Palm Personal Computer), 개인용 디지털 보조기(PDA; Personal Digital Assistant) 등도 해당될 수 있다. 또한, '의료 영상 분할 장치'는 클라이언트로부터 요청을 수신하여 정보처리를 수행하는 서버와 통신을 수행할 수 있다. 본 발명의 일 실시 예에 따른 의료 영상 분할 장치는, 도 1에서 설명하는 구성요소들 중 적어도 하나를 포함하 도록 구현될 수 있다. 도 1은 본 발명의 일 실시 예에 따른 의료 영상 분할 장치를 설명하기 위한 개념도이다. 도 1을 살펴보면, 본 발명의 의료 영상 분할 장치는, 복부 장기가 촬영된 의료 영상을 획득하는 의료 영상 획득부를 포함할 수 있다. 여기서, 복부 장기가 촬영된 의료 영상은, 복부 CT(Computed Tomography) 영상을 포함할 수 있다. 구체적으로, 상기 의료 영상 획득부는, 복부 장기가 촬영된 서로 다른 종류의 의료 영상들을 획득(수집, 촬영)할 수 있다. 여기서, 상기 서로 다른 종류의 의료 영상들은, 횡단면(axial plane), 관상면(coronal plane), 시상면 (sagittal plane)의 2차원 의료 영상(2차원 복부 CT 영상)을 포함할 수 있다. 의료 영상 획득부는, 의료 영상을 촬영하도록 형성된 촬영 장치 또는 촬영된 의료 영상을 외부 장치로부터 수신하도록 형성된 통신부를 포함할 수 있다. 메모리는, 의료 영상 획득부 및 제어부에서 생성/관리된 데이터, 이미지, 각종 정보 및 응용 프 로그램 등을 저장하도록 형성될 수 있다. 메모리는, 제어부와 전기적으로 연결된다. 메모리는 유닛에 대한 기본데이터, 유닛의 동작제어 를 위한 제어데이터, 입출력되는 데이터를 저장할 수 있다. 메모리는, 하드웨어적으로, ROM, RAM, EPROM, 플래시 드라이브, 하드 드라이브 등과 같은 다양한 저장기기 일 수 있다. 메모리는 제어부의 처리 또 는 제어를 위한 프로그램 등, 의료 영상 분할 장치 전반의 동작을 위한 다양한 데이터를 저장할 수 있다. 제어부는 응용 프로그램과 관련된 동작 외에도, 통상적으로 의료 영상 분할 장치의 전반적인 동작을 제어한다. 제어부는 위에서 살펴본 구성요소들을 통해 입력 또는 출력되는 신호, 데이터, 정보 등을 처리 하거나 메모리에 저장된 응용 프로그램을 구동함으로써, 사용자에게 적절한 정보 또는 기능을 제공 또는 처리할 수 있다. 이하에서는, 의료 영상에서 특정 장기를 분할하는 방법에 대하여 첨부된 도면을 참조하여 보다 구체적으로 살펴 보기로 한다. 도 2는 본 발명의 일 실시 예에 따른 의료 영상 분할 방법을 설명하기 위한 흐름도이다. 도 3은 의료 영상 중 하나인 복부 CT 영상에서 췌장의 특성을 설명하기 위한 개념도이고, 도 4a, 도 4b, 도 4c, 도 5, 도 6 및 도 7은 도 2에서 살펴본 의료 영상 분할 방법을 설명하기 위한 개념도이다.도 2를 참조하면, 의료 영상 분할 장치의 제어부는, 복부 장치가 촬영된 서로 다른 종류의 의료 영상(복부 CT 영상)들을 획득하도록 의료 영상 획득부를 제어할 수 있다(S210). 제어부는, 상기 서로 다른 종류의 의료 영상들을 2차원 컨볼루션 신경망에 입력하여 각 의료 영상들에 대 한 특정 장기 정보 확률맵을 출력하고, 획득된 복수의 특정 장기 정보 확률맵에 대한 제1 다수투표를 통해 특정 장기의 위치화를 수행할 수 있다(S220). 제어부는, 위치화된 복수의 의료 영상들을 3차원 의료 영상으로 변환하고, 변환된 복수의 3차원 의료 영상 들을 3차원 컨볼루션 신경망에 입력하여, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확 률맵을 각각 출력할 수 있다(S230). 제어부는, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 이용하여 협동 학습 을 수행하고, 협동 학습된 결과에 대한 제2 다수투표를 통해 특정 장기를 분할할 수 있다(S240). 이하에서는, 설명의 편의를 위해, 의료 영상과 복부 CT 영상을 혼용하여 사용하고, 특정 장기가 췌장인 것으로 예를 들어 설명하기로 한다. 도 3에 도시된 것과 같이, 췌장은 (a)와 같이 위, 간, 비장, 소장, 간문맥 등의 주변 장기와 유사한 밝기값을 가지며, (b)와 같이 각 영상 슬라이스에서 보이는 췌장의 형태가 상이하며, (c)와 같이 환자마다 췌장의 형태가 다양하다는 특징이 있다. 이에, 본 발명의 복부 CT 영상에서 췌장을 최적화된 방법으로 분할하는 방법을 제공할 수 있다. 의료 영상 분할 장치의 제어부는, 복부 CT 영상에서 췌장 자동 분할을 수행할 수 있다. 도 4a를 참조하면, 본 발명의 의료 영상 분할 장치는, 네트워크 입력 영상 전처리, 딥 컨볼루션 신경망을 기반 으로 한 2차원 분할 네트워크를 이용하여 췌장 자동 위치화를 수행할 수 있다. 또한, 의료 영상 분할 장치는, 불확실한 영역에 대한 정보를 함께 고려한 3차원 분할 네트워크를 이용하여 췌장 자동 분할을 수행할 수 있다. 한편, 본 발명은, 영상에서 발생할 수 있는 불확실성의 정도를 정량화하여 분할 모델에 적용하고, 협동학습을 통해 분할 성능을 개선할 수 있다. 예를 들어, 도 4b에 도시된 것과 같이, 본 발명은, 영상에서 불확실한 영역에 대한 정보를 정량화하기 위해 특 정 장치의 불확실성을 고려한 3D U-net(3차원 분할 네트워크)를 이용하여 불확실성을 정량화하고, 이를 분할 모 델(즉, 췌장 자동 분할)에 반영할 수 있다. 또한, 도 4c에 도시된 것과 같이, 본 발명은, 서로 다른 종류의 영 상(예를 들어, 횡단면(axial plane), 관상면(coronal plane), 시상면(sagittal plane))에 대하여 각각 특정 장 기(예를 들어, 췌장)의 위치에 대한 불확실성을 정량화하고, 각 영상에 대하여 협동 학습(co-training’s prediction)을 통해 췌장 자동 분할을 수행할 수 있다. 이를 통해, 본 발명은, 불확실성에 대한 정량화를 수행하고, 협동학습을 수행함으로써, 분할 성능을 개선할 수 있다. 우선, 데이터 전처리 과정에 대하여 살펴보면 다음과 같다. 제어부는, 획득된 서로 다른 종류의 의료 영상들에 대하여 데이터 전처리를 수행할 수 있다. 복부 CT 영상의 촬영 장비와 영상 촬영 프로토콜의 차이로 인해 발생하는 데이터 간의 차이는 네트워크의 분할 성능을 감소시킬 수 있다. 이에 제어부는, 자동 분할을 수행하기 전 복부 CT 영상 간 차이를 감소시키기 위해 밝기값 정규화 및 공간 정규화를 수행한다. 즉, 앞서 살핀 바와 같이, 제어부는, 서로 다른 종류의 의료 영상들인 횡단면, 관상면 및 시상면의 2차원 의료 영상들에 대하여 밝기값 정규화 및 공간 정규화를 수행할 수 있다. 복부 CT 영상에서 서로 다른 분포를 갖고 있는 영상의 밝기값 간 범위를 맞춰주기 위해 영상의 밝기값을 수학식 1을 통해 0~255 사이로 정규화한다.수학식 1"}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "이 때, I_org는 원본 영상의 밝기값, I_max와 I_min은 각각 최소 임계치와 최대 임계치로써, 최소 임계치는 배 경 영역의 밝기값이 포함되도록 설정하고, 최대 임계치는 뼈 영역의 밝기값이 포함되도록 설정한다. 임계치에 해당하는 값은 실험을 통하여 각각 ?174HU, 326HU로 산정될 수 있다. 환자 간 화소 공간 범위의 차이를 줄이기 위해 실험데이터의 화소 간격 범위인 0.6641mm~0.9766mm에서 최소 화 소 크기에 해당하는 0.6641mm로 실험 데이터 셋의 공간 정규화를 수행한다. 공간 정규화는 원본 영상의 화소 크기에서 최소 화소 값을 나누어 최근린 보간법(nearest interpolation)을 이 용하여 영상을 변환한다. 이후, 제어부는, 삼단면 2.5D U-NET 기반의 췌장 자동 위치화를 수행할 수 있다. 상기 U-net은, 생물 의학 이미지 세분화(Segmentation)를 위해 개발된 컨볼루션 신경망을 의미하며, 2차원 컨볼 루션 신경망(2D U-net) 및 3차원 컨볼루션 신경망(3D U-net)을 포함한다. U-net은, 도 5에 도시된 것과 같이, 네트워크 형태가 알파벳 U와 형태가 비슷하게 형성될 수 있다. U-net은 생물 의학 이미지 세분화에서 탁월한 효과를 보이는 세그멘테이션 네트워크(분할 네트워크)이다. 기존의 CNN이 주로 단순 분류(Classification)에 쓰였다면, U-net은 분류뿐만 아니라 분할(Segmentation)도 가 능하다는 강점을 가진다. 또한, U-net은 Segmentation 시 오버랩 타일(Overlab-tile) 전략을 사용하여 기존의 Segmentation 방식의 문제 점을 해결할 수 있다는 장점을 가진다. 상기 오버랩 타일 전략은 사이즈가 큰 영상을 Patch 단위로 잘라 입력(input)으로 넣는 것을 말한다. 또한, U-net은, Patch 사이즈에 따른 트레이드 오프(trade-off)에 빠지지 않는다는 장점을 갖는다. 일반적으로, 큰 사이즈의 Patch를 사용할 경우, 넓은 범위의 이미지를 한번에 인식하여 콘텍스트(context) 인식 에는 큰 효과가 있지만, 위치화(localization) 정확도가 감소되고, 작은 사이즈의 Patch를 사용할 경우, localization 정확도는 증가하지만 인식할 수 있는 Context가 협소해진다. 그러나, U-net의 네트워크 구조에서는, 수축 경로(Contracting Path)에서는 콘텍스트(context) 인식을, 확장 경 로(expanding path)에서는 위치화(localization)을 수행하여, 패치(Patch) 사이즈에 따른 트레이드 오프 (trade-off)에 빠지지 않는다는 장점이 있다. 본 명세서에서 설명하는 컨볼루션 신경망은, 딥 컨볼루션 인공 신경망(Deep Convolutional Neural Network; DCNN)을 의미할 수 있으며, 위에서 설명한 U-net일 수 있다. 도 5를 참조하여 상기 컨볼루션 신경망, 즉 U-net에 대하여 설명하면 다음과 같다. U-net 네트워크는, convolution encoder에 해당하는 수축 경로(Contracting Path, 빨간 박스)와, convolution decoder에 해당하는 확장 경로(Expanding Path)가 가운데를 중심으로 대칭형태를 이룰 수 있다. U-net 네트워크는, 확장 경로에서 업 샘플링(Upsampling)을 수행할 때, 정확한 위치화(Localization)을 위해, 수축 경로의 특징(Feature)를 카피 앤 크롭(Copy and Crop)하여, 연속화(Concatenation)하는 구조를 이를 수 있다. 구체적으로, 수축 경로(Contracting Path)는, Convolution network 구조를 가지며, 활성화 함수로 ReLU 함수를 사용하고, 2x2 맥스 풀링(max pooling)을 이용해 사이즈를 줄이며 다음 block으로 넘어간다. U-net 네트워크는, 다음 block로 넘어간 후 이전 feature channel 개수보다 2배 많은 channel을 feature 추출 에 사용한다. 확장 경로(Expanding Path)는 Contracting 과정에서 줄어든 사이즈를 키우는 Up-convolution block을 사용한다. 2x2 up-convolution(업 컨볼루션)을 사용하고, 활성화 함수로 ReLU를 사용할 수 있다. U-net 네트워크는, 다음 block로 넘어간 후 이전 feature channel 개수보다 2배 적은 channel을 Localization 에 사용할 수 있다. 또한, U-net 네트워크는, Contracting Path의 Feature를 Copy and Crop하여 Concatenation 함으로써 이미지 보 상처리와 더 정확한 Localization을 하는 구조를 가지고 있다. U-net 네트워크는, 마지막 Final Layer에서 1x1 convolution을 사용하여 2개의 클래스로 이미지를 분류할 수 있 다. 본 발명의 의료 영상 분할 장치 및 방법은, 앞서 설명한 U-net을 포함하는 컨볼루션 신경망을 이용하여, 복부 CT 영상에서 췌장을 자동으로 분할할 수 있다. 종래에는, 복부 CT 영상에서 췌장이 차지하는 영역이 작아 복부 CT 영상의 전 영역을 이용해 췌장 분할을 진행 할 경우 췌장이 과소분할되는 한계가 있다. 이에 복부 CT 영상에서 췌장 위치를 효과적으로 검출한 후 분할 단계에 지역적 문맥 정보에 집중할 수 있는 췌 장 영역 정보를 제공하는 것이 필요하다. 본 발명의 의료 영상 분할 장치 및 방법은, 췌장의 공간적 형태를 유추할 수 있는 2.5차원 평면 정보를 활용할 수 있는 복부 CT 영상을 사용한 2차원 U-Net 기반 분할 네트워크로 췌장 위치 정보를 추출하는 방법을 제공할 수 있다. 제어부는, 전처리된 의료 영상들을 생물 의학 이미지 세분화를 위한 컨볼루션 신경망(예를 들어, U-net 네 트워크)에 입력하고, 입력된 의료 영상들에 대하여 상기 컨볼루션 신경망으로부터 특정 장기(예를 들어, 췌장) 의 형상 정보 확률맵을 출력할 수 있다. 도 4b의 stage 1을 참조하면, 제어부는, 상기 서로 다른 종류의 의료 영상들을 2차원 컨볼루션 신경망에 입력하여 각 의료 영상들에 대한 특정 장기 정보 확률맵을 출력하고, 획득된 복수의 특정 장기 정보 확률맵에 대한 제1 다수투표를 통해 특정 장기의 위치화를 수행할 수 있다.제어부는, 입력 영상으로 데이터 전처리 를 수행한 512×512 해상도의 횡단면(axial plane), 관상면(coronal plane), 시상면(sagittal plane)의 2차원 복부 CT 영상을 사용할 수 있다. 상기 컨볼루션 신경망은, 2차원 U-net일 수 있다. 상기 컨볼루션 신경망은, 수축 경로 및 확장 경로로 구성될 수 있다. 상기 수축 경로에서는, 입력된 의료 영상에 대하여, 컨볼루션, 배치 정규화, 활성화 함수 수행 및 맥스 풀링을 순차적으로 수행할 수 있다. 구체적으로, 2차원 U-Net은 수축 경로(contracting path)와 확장 경로(expanding path)로 구성될 수 있다. 제어부는, 수축 경로에서 두 번의 3×3 컨볼루션, 배치 정규화(batch normalization; BN), rectified linear unit(ReLU) 함수를 수행한 후 스트라이드(stride) 2인 2×2 맥스 풀링(max-pooling)을 순차적으로 수행 하는 단계를 여섯 번 반복할 수 있다. 수축 경로의 각 단계에서 수행하는 2×2 맥스 풀링을 통해 특징맵의 크기는 절반씩 감소하며 특징맵의 채널 (channel) 수는 두 배씩 증가한다. 확장 경로에서는, 업 컨볼루션 및 연결 연산을 수행하여, 상기 수축 경로에서 줄어든 영상의 크기를 늘리고, 상 기 수축 경로에서 증가된 채널 수를 감소시킬 수 있다. 구체적으로, 제어부는, 확장 경로에서 2×2 업 컨볼루션(up-convolution)을 수행한 후, 확장 경로와 대등 한 수축 경로의 마지막 특징 맵을 결합하는 연결 연산(skip connection)을 수행하고 두 번의 3×3 컨볼루션, 배 치 정규화, ReLU 함수를 수행하는 단계를 여섯 번 반복할 수 있다. 확장 경로의 각 단계에서 수행하는 2×2 업 컨볼루션을 통해 특징맵의 크기는 두 배씩 증가되며 특징맵의 채널 수는 절반씩 감소한다. 제어부는, 최종으로 1×1 컨볼루션을 수행하여 입력 영상과 동일한 크기의 췌장 형상 정보 확률맵을 출력 한다. 확률맵은 0에서 1 사이의 확률값을 가진다. 제어부는, 입력된 의료 영상들에 대하여 제1 다수 투표(Majority Voting)을 적용하여 상기 특정 장기의 위 치화를 수행할 수 있다. 구체적으로, 제어부는, 횡단면, 관상면, 시상면의 입력 영상을 사용하여 획득한 N개(N은 자연수)(예를 들 어, 세 개)의 분할 결과를 다수투표(majority voting; MV) 기법을 이용하여 췌장 위치화를 수행할 수 있다. 제어부는, 다수투표 결과에서 발생하는 과소적합으로 인한 위치화 오류를 줄이기 위해 여백이 포함되도록 위치화 영역을 설정할 수 있다. 이 때, 여백에 해당하는 값은 실험을 통하여 각 축 당 30-픽셀로 설정한다. 도 6은 복부 CT 영상에서의 췌장 자 동 위치화 결과로 도 6(a), 도 6(b), 도 6(c)는 각각 횡단면, 관상면, 시상면 입력 영상만을 사용하였을 때의 위치화 결과를 나타내고, 도 6(d)는 삼단면 영상 정보를 다수 투표 방식을 사용하였을 때의 위치화 결과를 나타 낸다. 한 단면의 2차원 평면 정보만을 이용하여 위치화를 수행하는 경우 공간 정보를 고려하지 않아 발생하는 다른 영 역으로의 잘못된 분할로 인해 낮은 위치화 정확도를 보이는 반면, 본 발명은, 도 6(d)에 도시된 것과 같이, 다 수 투표 방식을 이용해 공간적인 정보를 추가적으로 고려하여 췌장 영역으로의 정확한 위치화를 수행할 수 있다. 이후, 본 발명의 의료 영상 분할 장치 및 방법은, 불확실성을 고려하여 췌장을 자동으로 분할하는 방법을 제공 할 수 있다. 도 4b의 Stage 2를 참조하면, 본 발명의 제어부는, 위치화된 복수의 의료 영상들을 3차원 의료 영상으로 변환하고, 변환된 복수의 3차원 의료 영상들을 3차원 컨볼루션 신경망에 입력하여, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 각각 출력할 수 있다. 또한, 제어부는, 복수의 3차원 의료 영상들에 대한 평균값의 확률맵 및 불확실성의 확률맵을 이용하여 협 동 학습을 수행하고, 협동 학습된 결과에 대한 제2 다수투표를 통해 특정 장기를 분할할 수 있다. 앞서 설명한 서로 다른 종류의 의료 영상들은, 3차원 의료 영상일 수 있다. 이 때, 상기 컨볼루션 신경망은, 3차원 컨볼루션 신경망(즉, 3차원 U-net)일 수 있다. 상기 3차원 컨볼루션 신경망에 입력되는 복수의 3차원 의료 영상들은, 위치화가 수행된 서로 다른 종류의 의료 영상들을 각각 3차원 의료 영상으로 변환한 영상들일 수 있다. 즉, 상기 복수의 3차원 의료 영상들은, 위치화된 횡단면의 3차원 영상, 위치화된 관상면의 3차원 영상 및 위치화된 시상면의 3차원 영상을 포함할 수 있다. 종래 기술인 도 4a에 비해, 본 발명은, 도 4b를 참조하면, 하나의 3차원 의료 영상만을 3차원 컨볼루션 신경망 (또는 드롭아웃 레이어)에 입력하는 것이 아닌, 협동 학습을 위해, 복수의 3차원 의료 영상을 3차원 컨볼루션 신경망(또는 드롭아웃 레이어)에 입력하고, 각 3차원 의료 영상에 대하여 평균값의 확률맵 및 불확실성의 확률 맵을 출력할 수 있다. 구체적으로, 제어부는, 복수의 3차원 의료 영상들을 드롭아웃 레이어에 입력하여 상기 3차원 컨볼루션 신 경망에 입력한 영상과 동일한 크기의 N개(N은 자연수)의 드롭아웃 결과를 출력하고, 상기 드롭아웃 결과를 이용 하여 평균값의 확률맵 및 불확실성의 확률맵을 추출할 수 있다.도 4c를 참조하면, 본 발명의 제어부는, 각 3차원 의료 영상들(Axial plane, Coronal plane, Sagittal plane)에 대하여 산출된 평균값의 확률맵과 불확실 성의 확률맵을 이용하여 협동 학습을 수행할 수 있다. 각 3차원 의료 영상들에서 추출된 평균값의 확률맵과 불확실성의 확률맵을 이용하여 각 3차원 의료 영상들에 대 한 예측값(prediction)을 산출하고, 이를 이용하여 협동 학습을 수행하여 협동 학습 예측값(Co-traingins’ prediction)을 산출할 수 있다.제어부는, 상기 불확실성의 확률맵에 근거하여, 의료 영상에서 특정 장기를 분할할 때 발생되는 불확실한 영역을 감소시키고, 협동 학습을 통해 불확실한 영역에서의 분할 정확도를 증가시킬 수 있다. 구체적으로, 본 발명은 불확실성을 고려한 3D U-Net 기반의 췌장 자동 분할 방법을 제공할 수 있다. 공간 정보를 고려하지 않는 2차원 네트워크를 이용하여 췌장을 분할할 경우 각 슬라이스에서 보이는 췌장의 형 태가 상이하여 췌장 머리 혹은 꼬리 부분에서 과소 분할이 발생하며 췌장의 경계 부분에서의 분할 정확도가 떨 어지는 한계가 있다. 또한, 3차원 네트워크로 췌장을 분할하는 경우 췌장과 형태가 유사한 주변 장기로 누출이 발생하고 췌장의 불확 실한 경계 부분에서 과소 또는 과대 분할이 발생한다. 따라서 본 발명에서는 췌장 주변의 공간적 정보를 고려하고 유사한 형태를 띠는 주변 장기로의 누출을 방지하며, 췌장의 위치적, 형태적 다양성으로 인해 발생하는 췌장의 불확실한 영역에서의 과소 분할 및 과대 분 할을 방지하기 위해 불확실한 영역에 대한 정보를 함께 고려하는 3차원 분할네트워크를 이용하여 췌장을 분할할 수 있다. 이를 위해, 본 발명의 의료 영상 분할 장치는, 입력 영상으로 2차원 U-Net 기반 네트워크를 이용하여 위치화된 복부 CT영상을 96×96×96 해상도로 변환한 3차원 복부 CT 영상을 사용할 수 있다. 3차원 U-Net은 2차원 U-Net과 동일하게 수축 경로와 확장 경로로 구성될 수 있다. 수축 경로에서는 두 번의 3×3×3 컨볼루션, 배치 정규화, ReLU 함수를 수행한 후 스트라이드 2인 2×2×2 맥스 풀링을 순차적으로 수행하는 단계를 네 번 반복한다. 수축 경로의 각 단계에서 수행하는 2×2×2 맥스 풀링을 통해 특징맵의 크기는 절반씩 감소하며 특징맵의 채널 수는 두 배씩 증가한다. 확장 경로에서는 2×2×2 업 컨볼루션을 수행한 후, 확장 경로와 대등한 수축 경로의 마지막 특징 맵을 결합하 는 연결 연산을 수행하고 두 번의 3×3×3 컨볼루션, 배치 정규화, ReLU 함수를 수행하는 단계를 네 번 반복한 다. 췌장 분할 시 발생하는 불확실한 영역을 감소시키기 위해 최종으로 1×1×1 컨볼루션을 수행하여 입력 영상과 동일한 크기의 3차원 췌장 형상 확률맵을 출력하기 전, 드롭아웃(dropout) 레이어를 추가하여 입력 영상과 동일 한 크기의 N개(N은 자연수)의 드롭아웃 결과를 출력한다. 출력된 N개(N은 자연수)의 드롭아웃 결과는 각 3차원 의료 영상들에서 추출된 평균값의 확률맵과 불확실성의 확률맵을 출력하는 데에 사용된다. 평균값의 확률맵은 도 4c의 수식, 불확실성의 확률맵은 도 4c의 수식을 통해 도출될 수 있다. 각 3차원 의료 영상들에서 추출된 평균값의 확률맵과 불확실성의 확률맵을 이용하여 각 3차원 의료 영상들에 대 한 예측값(prediction)(도 4c의 수식)을 산출하고, 이를 이용하여 협동 학습을 수행하여 협동 학습 예측값 (Co-traingins’ prediction)(도 4c의 수식)을 산출할 수 있다. 본 발명은 이러한 구성을 통해, 불확실성을 고려한 3차원 분할 네트워크를 이용하여 췌장을 분할하는 경우 지역 적 문맥 정보 및 공간적 정보를 고려할 수 있을 뿐만 아니라 불확실한 영역에서 발생하는 과소 분할 및 과대 분 할 문제를 감소시킬 수 있다. 본 발명은, 복부 CT 영상에서 췌장의 위치적, 형태적 변이성으로 인한 불확실한 영역을 고려한 D CNN 기반의 자 동 췌장 분할 방법을 제공할 수 있다. 본 발명에 따르면, 본 발명은 3개의 직교 평면 이미지를 기반으로 하는 2.5D 네트워크가 복부 장기의 췌장을 자 동으로 찾을 수 있다. 또한, 본 발명에 따르면, 본 발명의 불확실성을 고려한 3D 네트워크는 췌장의 불확실한 영역에서 세분화를 통해 감소시킬 수 있다. 또한, 본 발명의 공동 훈련을 고려한 3D 네트워크는 췌장의 불확실한 영역에서 분할 정확도를 개선할 수 있다. 즉, 본 발명은 복부 CT 영상에서 췌장의 불확실성을 고려한 계단식 네트워크를 이용한 췌장 자동 분할 방법을 제공할 수 있으며, 3개의 직교 평면 정보를 고려하여 췌장을 정확하게 위치시킬 수 있는 2D 앙상블 네트워크를 제공할 수 있다. 또한, 본 발명의 3D 네트워크는 국부적인 공간 정보, 췌장 불확실성 및 공동 훈련을 고려하여세분화된 영역 아래 및 초과 영역을 줄일 수 있다. 이러한 구성에 대하여 다음과 같은 실험 및 결과 분석을 수행하였다. 실험에 사용된 데이터는 미국 국립 보건원(The National Istitutes of Health Clinical Center; NIH)에서 배포 한 총 82명 환자의 정맥기(portal-venous) 복부 CT 영상으로, 각 환자의 연령은 18~76세, 남자 53명, 여자 27 명으로 구성된다. 모든 데이터는 Phillips와 Siemens에서 관전압(tube voltage) 120 kVp으로 촬영된 3차원 횡 단면 복부 CT 영상을 사용하였다. 총 82명의 복부 CT 영상의 슬라이스 개수는 181~466장, 영상 해상도는 512× 512, 화소 크기는 0.6641~0.9766mm2, 슬라이스 간격은 0.5mm~1.0mm으로 구성된다. 실험을 위한 환경은 Windows 10 (64-bit) 운영체제에\\서 Inter(R) Core(TM) i7-8700 3.20Hz CPU, 32GB 메모리, NVIDIA GeForce RTX 2080Ti 그래픽 카드를 장착한 PC를 사용하여 실험하였다. 본 제안 방법은 파이썬(python) 기반의 딥러닝 라이브러리인 텐서플로우(Tensorflow) 및 케라스(Keras)를 이용하여 구현하였으며, 2차원 및 3차 원 U-Net은 오픈 소스 패키지를 변형하여 사용하였다. 2차원 분할 네트워크 학습에 사용된 학습률(learning rate)은 0.0001, 배치 크기는 1을 사용하였고, 최적화를 위해 아담 옵티마이저(Adam optimizer)를 사용하여 총 100번의 반복 학습을 수행하였다. 손실 함수는 교차 엔트로피(cross-entropy)를 사용하였다. 3차원 분할 네트워 크 학습에 사용된 학습률의 초기값은 0.0001로 검증 데이터 셋의 손실 함수가 줄어들지 않는 경우 0.8배씩 감소 되며, 배치 크기는 1을 사용하였고, 최적화를 위해 아담 옵티마이저를 사용하였다. 실험은 홀드아웃(hold-out) 교차 검증 방식을 수행하였다. 실험을 위하여 훈련 데이터 셋 52개, 테스트 데이터 셋 16개로 데이터 셋을 구성 하였고, 과적합(overfitting) 방지를 위하여 검증(validation) 데이터 셋 14개로 나누어 구성하였다. 본 제안 방법의 성능 평가를 위해 정량적 평가와 정성적 평가를 수행하였다. 정량적 평가를 위해 수동 분할 결 과와 비교방법, 제안 방법 결과 간 DSC, 민감도(Recall), 양성예측도(Precision)를 수학식 2와 같이 측정하였다. 수학식 2"}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "이 때, TP는 췌장으로 수동 분할된 영역에서 췌장으로 자동 분할된 영역이고, TN은 췌장이 아닌 영역으로 수동 분할된 영역에서 췌장이 아닌 영역으로 자동 분할된 영역이고, FP는 췌장이 아닌 영역으로 수동 분할된 영역에 서 췌장으로 자동 분할된 영역이며, FN은 췌장으로 수동 분할된 영역에서 췌장이 아닌 영역으로 자동 분할된 영 역을 의미한다. 비교 방법으로는 2차원 U-Net 구조에서 횡단면, 관상면, 시상면을 이용한 췌장 분할 방법을 각각 Method A, Method B, Method C로 하고, 2차원 U-Net 구조에서 횡단면, 관상면, 시상면을 이용한 췌장 분할 결과의 다수 투 표 방법(Method D)과 다수투표 방법을 통해 위치화된 3차원 입력 영상을 이용한 췌장 분할 방법(Method E)과 불 확실도를 고려한 제안 방법(Method F)의 성능을 비교 분석하였다. 표 1은 췌장 분할 결과의 정량적 평가 결과이다. 표 1"}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "단면 영상을 사용하여 2차원 분할 네트워크를 훈련시킨 Method A, Method B, Method C의 경우, 평균 DSC가 74.41%로 전반적으로 낮은 성능을 보였다. 반면 Method D의 경우, 단일 단면의 2차원 평면 정보를 결합해 2.5차 원 공간 정보를 유추하고 다수 투표 방식을 사용함으로써 과대 분할 영역이 감소하여 Method A, Method B, Method C 보다 민감도 측면에서 각각 1.94%p, 5.58%p, 3.42%p 향상된 성능을 보였으나 과소분할 경향을 보여 가 장 높은 양성예측도를 보였다. Method E의 경우, Method D 대비 제한된 영역에서의 공간적 정보를 함께 고려함 으로써 과소 분할이 방지되어 민감도가 3.29%p 상승하였으나 췌장의 불확실한 경계 부분에서의 과대 분할로 인 해 양성예측도가 8.19%p 하락한 것을 확인할 수 있었고, Method F를 적용하였을 때 불확실한 영역에 대한 정보 를 함께 고려해 줌으로써 Method E 대비 DSC, 민감도, 양성예측도가 각각 3.95%p, 2.83%p, 4.13%p 상승함을 확 인할 수 있었다. 도 7은 복부 CT 영상에서 췌장 위치에 따른 비교 방법별 분할 결과이다. 본 제안 방법의 정성적 평가를 위해 비 교 방법 및 제안 방법의 결과 각각을 수동 결과와 비교하였다. 도 7에서 (a) 내지 (g)는, Method A 내지 Method G에 각각 대응되는 정성적 평가를 나타내며, 빨간색은 수동 분 할 결과와 겹치는 영역, 파란색은 과대 분할 영역, 초록색은 과소 분할 영역을 나타낸다. Method A, Method B, Method C의 경우 흉곽, 간, 비장, 소장 등 유사한 형태 및 밝기값을 갖는 주변 영역으로 누출이 발생하였고, 췌장 머리, 꼬리 부분에서 과소 분할이 발생하였다. Method D의 경우 다수 투표를 통해 횡 단면, 관상면, 시상면에서의 분할 결과에서 발생한 주변 장기로의 누출을 해결하였으나, 췌장 꼬리 부분에서 과 소 분할이 여전히 존재하는 것을 확인할 수 있었다. Method E의 경우 제한된 영역 내의 공간 정보를 이용해 주 변 장기로의 누출을 감소시켰으나, 췌장과 유사한 형태를 갖는 소장으로의 누출이 존재하며 췌장의 불확실한 경 계 부분에서 과소 분할 및 과대 분할된 것을 확인할 수 있었다. Method F의 경우 Method A, Method B, Method C에서 발생하는 주변 장기로의 누출을 방지하고 Method E에서 과소 분할된 영역을 분할함으로써 수동 분할 결과 와 가장 유사함을 확인할 수 있었다. 이러한 실험 및 구성을 통해, 본 발명은, 2.5차원 분할 네트워크로 췌장의 위치 정보를 자동으로 추출한 뒤 위 치화된 영역에서 불확실한 영역에 대한 정보를 고려한 3차원 분할 네트워크를 이용해 췌장을 정확하게 분할하는 방법을 제공할 수 있다. 또한, 본 발명은, 2차원 분할 네트워크를 이용해 복부 CT 영상에서 췌장의 정확한 위치 정보를 획득하기 위해 횡단면, 관상면, 시상면의 복부 CT 영상에서 획득한 N개(N은 자연수)의 분할 결과를 다수투표를 통해 개선하였 고, 불확실도에 따라 손실함수의 가중치를 변경해줌으로써 위치화된 3차원 복부 CT 영상에서 췌장의 형태적 특 징으로 인해 발생하는 불확실한 영역에서의 과소 분할을 극복할 수 있다. 또한, 본 발명은, 비교 방법 대비 제안 방법의 췌장 분할 결과와 수동 분할 결과 간 DSC는 83.50%를 보였고 다 른 비교 방법들에 비해 췌장의 정확한 분할이 가능함을 확인할 수 있다. 본 발명의 실시예와 관련하여 설명된 방법 또는 알고리즘의 단계들은 하드웨어로 직접 구현되거나, 하드웨어에 의해 실행되는 소프트웨어 모듈로 구현되거나, 또는 이들의 결합에 의해 구현될 수 있다. 소프트웨어 모듈은 RAM(Random Access Memory), ROM(Read Only Memory), EPROM(Erasable Programmable ROM), EEPROM(Electrically Erasable Programmable ROM), 플래시 메모리(Flash Memory), 하드 디스크, 착탈형 디스크, CD-ROM, 또는 본 발명이 속하는 기술 분야에서 잘 알려진 임의의 형태의 컴퓨터 판독가능 기록매체에"}
{"patent_id": "10-2023-0137826", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "상주할 수도 있다.이상, 첨부된 도면을 참조로 하여 본 발명의 실시예를 설명하였지만, 본 발명이 속하는 기술분야의 통상의 기술 자는 본 발명이 그 기술적 사상이나 필수적인 특징을 변경하지 않고서 다른 구체적인 형태로 실시될 수 있다는 것을 이해할 수 있을 것이다. 그러므로, 이상에서 기술한 실시예들은 모든 면에서 예시적인 것이며, 제한적이 아닌 것으로 이해해야만 한다."}
{"patent_id": "10-2023-0137826", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시 예에 따른 의료 영상 분할 장치를 설명하기 위한 개념도이다. 도 2는 본 발명의 일 실시 예에 따른 의료 영상 분할 방법을 설명하기 위한 흐름도이다. 도 3은 의료 영상 중 하나인 복부 CT 영상에서 췌장의 특성을 설명하기 위한 개념도이다. 도 4a, 도 4b, 도 4c, 도 5, 도 6 및 도 7은 도 2에서 살펴본 의료 영상 분할 방법을 설명하기 위한 개념도이다."}
