{"patent_id": "10-2021-0014029", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2022-0110970", "출원번호": "10-2021-0014029", "발명의 명칭": "IP 라우터의 이상 탐지 방법 및 그 장치", "출원인": "주식회사 케이티", "발명자": "김영인"}}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "컴퓨팅 장치에서 IP 라우터의 이상 여부를 탐지하는 방법으로서,일정 시간 동안 상기 IP 라우터로부터 임계 시간 미만의 DHCP(Dynamic Host Configuration Protocol) 응답(Ack) 메시지를 수집하는 단계, 상기 일정 시간 동안 수집한 임계 시간 미만의 DHCP 응답 메시지 개수를 학습하여 수집 시점 이후에 임계 시간미만의 DHCP 응답 메시지 개수를 예측하기 위한 제1 예측 모델을 생성하는 단계, 상기 제1 예측 모델을 이용하여 예측한 개수와 실제 측정한 개수의 차이를 토대로, 제1 임계값을 설정하는단계, 그리고상기 IP 라우터로부터 임계 시간 미만의 DHCP 응답(Ack) 메시지 개수를 수집하여 상기 제1 임계값을 초과하면,상기 IP 라우터의 하단 이상으로 결정하는 단계를 포함하는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에서,상기 제1 예측 모델 및 상기 제1 임계값은, 주기적으로 상기 IP 라우터로부터 수집된 임계 시간 미만의 DHCP 응답(Ack) 메시지 개수를 토대로업데이트되는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에서,상기 제1 예측 모델은,LSTM(Long Short-Term Memory models) 학습을 통해 생성되는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에서,상기 제1 임계값은,RMSE(Root Mean Squre Error)를 토대로 생성되는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "컴퓨팅 장치에서 IP 라우터의 이상 여부를 탐지하는 방법으로서,일정 시간 동안 상기 IP 라우터로부터 DHCP(Dynamic Host Configuration Protocol) 메시지들을 수집하는 단계, 상기 일정 시간 동안 수집한 상기 DHCP 메시지들의 개수 총합을 학습하여 수집 시점 이후에 DHCP 메시지들의 개수 총합을 예측하기 위한 제2 예측 모델을 생성하는 단계, 상기 제2 예측 모델을 이용하여 예측한 개수와 실제 측정한 개수의 차이를 토대로, 제2 임계값을 설정하는단계, 그리고상기 IP 라우터로부터 수집한 DHCP 메시지들의 개수 총합이 상기 제2 임계값을 초과하면, 상기 IP 라우터의 상단 이상으로 결정하는 단계공개특허 10-2022-0110970-3-를 포함하는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에서,상기 제2 예측 모델 및 상기 제2 임계값은, 주기적으로 상기 IP 라우터로부터 수집된 DHCP 메시지들의 총합을 토대로 업데이트되는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에서,상기 DHCP 메시지들은,IP 임대를 요청하는 DHCP 메시지들을 포함하고, Discover 메시지, Offer 메시지, Request 메시지 중 적어도 하나를 포함하는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제5항에서,상기 제2 예측 모델은,이동 평균(Moving Average) 학습을 통해 생성되는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제5항에서,상기 제2 임계값은,RMSE(Root Mean Squre Error)를 토대로 생성되는, 방법."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "IP 라우터와 연결되어, 상기 IP 라우터로부터 DHCP(Dynamic Host Configuration Protocol) 메시지들을 수집하는 통신 장치, 상기 IP 라우터의 이상 여부를 판단하는 프로그램이 포함된 메모리, 그리고 상기 프로그램을 실행하는 적어도 하나의 프로세서를 포함하고, 상기 프로그램은, 단위 시간마다 상기 IP 라우터로부터 수집한 DHCP 메시지들의 개수를 카운트하고, 카운트한 DHCP 메시지들의 개수를 이용하여 다음 시간에 수집될 DHCP 메시지들의 개수를 예측하도록 인공신경망 모델을 학습시키고,상기 인공신경망 모델로 예측한 다음 시간의 DHCP 메시지들의 개수와, 다음 시간에 수집된 DHCP 메시지들의 개수를 각각 카운트하여, 예측한 개수와 카운트한 개수 간의 오차를 통해 임계 조건을 정의하며,소정의 시점에 상기 IP 라우터로부터 수집한 DHCP 메시지들의 개수를 카운트하여 카운트한 개수가 상기 임계 조건을 충족하면, 상기 IP 라우터의 이상을 탐지하는 명령어들(Instructions)을 포함하는, 컴퓨팅 장치."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에서,상기 임계 조건은,임계 시간 미만의 DHCP Ack 메시지들의 개수를 이용하여 결정된 제1 임계값을 포함하고,상기 프로그램은,상기 IP 라우터로부터 수집한 임계 시간 미만의 DHCP Ack 메시지들의 개수가 상기 제1 임계값 미만이거나 또는공개특허 10-2022-0110970-4-이하이면, 상기 IP 라우터의 하단 구간 이상으로 결정하는 명령어들을 포함하는, 컴퓨팅 장치."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에서,상기 임계 조건은,DHCP Ack 메시지를 제외한 나머지 DHCP 메시지들의 총개수를 이용하여 결정된 제2 임계값을 포함하고,상기 프로그램은,상기 IP 라우터로부터 수집한 상기 나머지 DHCP 메시지들의 총개수가 상기 제2 임계값을 초과하거나 또는 이상이면, 상기 IP 라우터의 상단 구간 이상으로 결정하는 명령어들을 포함하는, 컴퓨팅 장치."}
{"patent_id": "10-2021-0014029", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제10항에서,상기 프로그램은,학습 주기마다 수집한 상기 DHCP 메시지들을 이용하여 상기 인공신경망 모델 학습을 반복하여 상기 임계 조건을갱신하는, 컴퓨팅 장치."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "IP 라우터의 이상 탐지 방법 및 그 장치가 개시된다. 이 방법은 컴퓨팅 장치에서 IP 라우터의 이상 여부를 탐지 하는 방법으로서, 일정 시간 동안 상기 IP 라우터로부터 임계 시간 미만의 DHCP(Dynamic Host Configuration Protocol) 응답(Ack) 메시지를 수집하는 단계, 상기 일정 시간 동안 수집한 임계 시간 미만의 DHCP 응답 메시지 개수를 학습하여 수집 시점 이후에 임계 시간 미만의 DHCP 응답 메시지 개수를 예측하기 위한 제1 예측 모델을 생성하는 단계, 상기 제1 예측 모델을 이용하여 예측한 개수와 실제 측정한 개수의 차이를 토대로, 제1 임계값을 설정하는 단계, 그리고 상기 IP 라우터로부터 임계 시간 미만의 DHCP 응답(Ack) 메시지 개수를 수집하여 상기 제 1 임계값을 초과하면, 상기 IP 라우터의 하단 이상으로 결정하는 단계를 포함한다."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 IP(Internet Protocol) 라우터의 이상 탐지 방법 및 그 장치에 관한 것이다."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "거의 모든 가구에서 인터넷을 접속하고, 국민 인터넷 이용률이 상승함에 따라 IP 망에서의 장애로 인한 위험성 또한 점점 커지고 있다. 이러한 장애를 사전에 인지하는 것은 중요한 문제이지만, IP 망에서 기존의 DPI(Deep Packet Inspection) 등을 활용한 이상 탐지 기능 만으로는 장애를 사전에 인지하기가 매우 어렵다. 또한, 네트워크 운용자가 각 장비의 로그만을 기준으로 IP 장애를 판단하다보면, 로그 상에서 알기 어려운 보안 공격 및 망 성능 저하에 따른 감시의 사각지대가 생기기 마련이다. 종래 기술은 DHCP(Dynamic Host Configuration Protocol) 제어 메시지에 대한 로그를 바탕으로, DHCP 제어 메 시지의 개수가 적정 임계치를 초과하였을 때를 이상으로 탐지한다. 이러한 종래 기술은 고정된 임계치를 사용하 므로 데이터의 경향성을 반영하지 못한다. 또한, 종래 기술은 적정 임계치를 설정하는 데에 합리적인 기준이 없어 설정 방법에 따라 미탐율이 높아질 수 있다. 게다가, 종래 기술은 IP 라우터에서 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지에 대해서 만 모니터링하므로, 이상 발생 구간이 IP 라우터를 기준으로 하향인지 상향인지를 탐지할 수 없다."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "해결하고자 하는 과제는 DHCP 메시지들을 토대로 학습한 인공신경망 모델을 이용하여 동적 임계치를 설정하고, 설정한 동적 임계치를 이용하여 IP 라우터의 이상 탐지(anomaly detection)를 수행하는 방법 및 그 장치를 제공 하는 것이다. 해결하고자 하는 과제는 DHCP 제어 메시지의 종류를 구분하여 학습한 인공신경망 모델을 이용하여 각각의 동적 임계치를 설정하고, 이러한 각각의 동적 임계치를 이용하여 IP 라우터의 이상이 IP 라우터의 상단 이상인지 또 는 IP 라우터의 하단 이상인지 구분하여 탐지하는 방법 및 그 장치를 제공하는 것이다."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "한 특징에 따르면, 컴퓨팅 장치에서 IP 라우터의 이상 여부를 탐지하는 방법으로서, 일정 시간 동안 상기 IP 라 우터로부터 임계 시간 미만의 DHCP(Dynamic Host Configuration Protocol) 응답(Ack) 메시지를 수집하는 단계, 상기 일정 시간 동안 수집한 임계 시간 미만의 DHCP 응답 메시지 개수를 학습하여 수집 시점 이후에 임계 시간 미만의 DHCP 응답 메시지 개수를 예측하기 위한 제1 예측 모델을 생성하는 단계, 상기 제1 예측 모델을 이용하 여 예측한 개수와 실제 측정한 개수의 차이를 토대로, 제1 임계값을 설정하는 단계, 그리고 상기 IP 라우터로부 터 임계 시간 미만의 DHCP 응답(Ack) 메시지 개수를 수집하여 상기 제1 임계값을 초과하면, 상기 IP 라우터의 하단 이상으로 결정하는 단계를 포함한다. 상기 제1 예측 모델 및 상기 제1 임계값은, 주기적으로 상기 IP 라우터로부터 수집된 임계 시간 미만의 DHCP 응 답(Ack) 메시지 개수를 토대로 업데이트될 수 있다. 상기 제1 예측 모델은, LSTM(Long Short-Term Memory models) 학습을 통해 생성될 수 있다. 상기 제1 임계값은, RMSE(Root Mean Squre Error)를 토대로 생성될 수 있다. 다른 특징에 따르면, 컴퓨팅 장치에서 IP 라우터의 이상 여부를 탐지하는 방법으로서, 일정 시간 동안 상기 IP 라우터로부터 DHCP(Dynamic Host Configuration Protocol) 메시지들을 수집하는 단계, 상기 일정 시간 동안 수 집한 상기 DHCP 메시지들의 개수 총합을 학습하여 수집 시점 이후에 DHCP 메시지들의 개수 총합을 예측하기 위 한 제2 예측 모델을 생성하는 단계, 상기 제2 예측 모델을 이용하여 예측한 개수와 실제 측정한 개수의 차이를 토대로, 제2 임계값을 설정하는 단계, 그리고 상기 IP 라우터로부터 수집한 DHCP 메시지들의 개수 총합이 상기 제2 임계값을 초과하면, 상기 IP 라우터의 상단 이상으로 결정하는 단계를 포함한다. 상기 제2 예측 모델 및 상기 제2 임계값은, 주기적으로 상기 IP 라우터로부터 수집된 DHCP 메시지들의 총합을 토대로 업데이트될 수 있다. 상기 DHCP 메시지들은, IP 임대를 요청하는 DHCP 메시지들을 포함하고, Discover 메시지, Offer 메시지, Request 메시지 중 적어도 하나를 포함할 수 있다. 상기 제2 예측 모델은, 이동 평균(Moving Average) 학습을 통해 생성될 수 있다. 상기 제2 임계값은, RMSE(Root Mean Squre Error)를 토대로 생성될 수 있다. 또 다른 특징에 따르면, 컴퓨팅 장치는 IP 라우터와 연결되어, 상기 IP 라우터로부터 DHCP(Dynamic Host Configuration Protocol) 메시지들을 수집하는 통신 장치, 상기 IP 라우터의 이상 여부를 판단하는 프로그램이 포함된 메모리, 그리고 상기 프로그램을 실행하는 적어도 하나의 프로세서를 포함하고, 상기 프로그램은, 단위 시간마다 상기 IP 라우터로부터 수집한 DHCP 메시지들의 개수를 카운트하고, 카운트한 DHCP 메시지들의 개수를 이용하여 다음 시간에 수집될 DHCP 메시지들의 개수를 예측하도록 인공신경망 모델을 학습시키고, 상기 인공신 경망 모델로 예측한 다음 시간의 DHCP 메시지들의 개수와, 다음 시간에 수집된 DHCP 메시지들의 개수를 각각 카 운트하여, 예측한 개수와 카운트한 개수 간의 오차를 통해 임계 조건을 정의하며, 소정의 시점에 상기 IP 라우 터로부터 수집한 DHCP 메시지들의 개수를 카운트하여 카운트한 개수가 상기 임계 조건을 충족하면, 상기 IP 라 우터의 이상을 탐지하는 명령어들(Instructions)을 포함한다. 상기 임계 조건은, 임계 시간 미만의 DHCP Ack 메시지들의 개수를 이용하여 결정된 제1 임계값을 포함하고, 상 기 프로그램은, 상기 IP 라우터로부터 수집한 임계 시간 미만의 DHCP Ack 메시지들의 개수가 상기 제1 임계값 미만이거나 또는 이하이면, 상기 IP 라우터의 하단 구간 이상으로 결정하는 명령어들을 포함할 수 있다. 상기 임계 조건은, DHCP Ack 메시지를 제외한 나머지 DHCP 메시지들의 총개수를 이용하여 결정된 제2 임계값을 포함하고, 상기 프로그램은, 상기 IP 라우터로부터 수집한 상기 나머지 DHCP 메시지들의 총개수가 상기 제2 임 계값을 초과하거나 또는 이상이면, 상기 IP 라우터의 상단 구간 이상으로 결정하는 명령어들을 포함할 수 있다. 상기 프로그램은, 학습 주기마다 수집한 상기 DHCP 메시지들을 이용하여 상기 인공신경망 모델 학습을 반복하여 상기 임계 조건을 갱신할 수 있다."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "실시예에 따르면, DHCP 제어 메시지가 변화하는 경향을 반영하여 이상을 탐지할 수 있고, IP 망 품질 개선과 장 애 대응을 빠르게 할 수 있다. 또한, 품질 데이터의 세부 성질을 상세 분석하여 이상 발생 구간을 확정할 수 있다."}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참고로 하여 본 발명의 실시예에 대하여 본 발명이 속하는 기술분야에서 통상의 지식 을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나 본 발명은 여러가지 상이한 형태로 구현될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 발명을 명확하게 설명하기 위해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였 다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다 른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 또한, 명세서에 기재된 \"…부\", \"…기\", \"…모듈\" 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 본 발명에서 설명하는 장치들은 적어도 하나의 프로세서, 메모리 장치, 통신 장치 등을 포함하는 하드웨어로 구 성되고, 지정된 장소에 하드웨어와 결합되어 실행되는 프로그램이 저장된다. 하드웨어는 본 발명의 방법을 실행 할 수 있는 구성과 성능을 가진다. 프로그램은 도면들을 참고로 설명한 본 발명의 동작 방법을 구현한 명령어 (instructions)를 포함하고, 프로세서와 메모리 장치 등의 하드웨어와 결합하여 본 발명을 실행한다. 본 명세서에서 \"전송 또는 제공\"은 직접적인 전송 또는 제공하는 것 뿐만 아니라 다른 장치를 통해 또는 우회 경로를 이용하여 간접적으로 전송 또는 제공도 포함할 수 있다. 본 명세서에서 단수로 기재된 표현은 \"하나\" 또는 \"단일\" 등의 명시적인 표현을 사용하지 않은 이상, 단수 또는 복수로 해석될 수 있다. 본 명세서에서 도면에 관계없이 동일한 도면번호는 동일한 구성요소를 지칭하며, \"및/또는\" 은 언급된 구성요소 들의 각각 및 하나 이상의 모든 조합을 포함한다. 본 명세서에서, 제1, 제2 등과 같이 서수를 포함하는 용어들은 다양한 구성요소들을 설명하는데 사용될 수 있지 만, 상기 구성요소들은 상기 용어들에 의해 한정되지는 않는다. 상기 용어들은 하나의 구성요소를 다른 구성요 소로부터 구별하는 목적으로만 사용된다. 예를들어, 본 개시의 권리범위를 벗어나지 않으면서 제1 구성요소는 제2 구성요소로 명명될 수 있고, 유사하게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 본 명세서에서 도면을 참고하여 설명한 흐름도에서, 동작 순서는 변경될 수 있고, 여러 동작들이 병합되거나, 어느 동작이 분할될 수 있고, 특정 동작은 수행되지 않을 수 있다. 도 1은 실시예에 따른 IP 라우터의 이상을 탐지하는 장치와 주변 구성 간의 연결 관계를 나타내고, 도 2는 실시 예에 따른 DHCP 절차를 나타낸다. 도 1을 참조하면, IP 라우터는 DHCP(Dynamic Host Configuration Protocol) 클라이언트와 DHCP 서버 사이에 위치하여 릴레이 서버(Relay Server)로서의 기능을 수행한다. DHCP 서버는 IP 라우터에 연결된 적어도 하나의 DHCP 클라이언트에게 DHCP IP 주소를 할당한다. DHCP 클라이언트는, DHCP 서버로 IP 주소를 요청하고, DHCP 서버로부터 IP 주소 및 그 IP 주소 의 임대(Lease) 기간을 응답받는다. DHCP 클라이언트는 임대 기간이 만료하면, DHCP 서버에게 IP 주소를 재요청하여 재할당받는다. 이와 같이, DHCP 클라이언트는 DHCP 서버로부터 IP 주소를 받기 위해서 클라이언트 정보를 제공하고, 주어진 임대 시간 동안 IP 주소를 임대한다. DHCP 클라이언트는 IP 주소를 임대한 시점으로부터 1 시간이 흐른 뒤에, DHCP 서버로 갱신 요청 (Request)하여 IP 주소 임대를 갱신한다. 도 2를 참조하면, DHCP 클라이언트는 DHCP 서버에게 DHCP Discover 메시지를 전송한다(S11). DHCP 서버는 DHCP Offer 메시지를 DHCP 클라이언트에게 응답한다(S12). DHCP 클라이언트는 DHCP 서버에게 DHCP Request 메시지를 전송한다(S13). DHCP 서버는 DHCP 클라이언트에게 DHCP Ack 메시지를 전송한다(S14). 이때, DHCP Ack 메시지는 DHCP 절차의 마지막 메시지로서, DHCP 서버가 DHCP 클라이언트에게 임대할 IP 주소를 전달한다. DHCP Ack 메시지로부터 임대 IP 주소를 획득한 DHCP 클라이언트는 임대 IP 주소를 이용하여 인터넷망에 접 속한다(S15). 이후, DHCP 클라이언트는 IP 주소를 임대한 시점, 즉, S14 이후부터 임계 시간(T1)이 경과한 후에, DHCP 서버에게 IP 주소 임대를 갱신 요청하는 DHCP Request 메시지를 전송한다(S16). 그러면, DHCP 서버는 새로운 IP 주소를 할당하고 이를 포함하는 DHCP Ack 메시지를 DHCP 클라이언트 에게 전송한다(S17). 이때, IP 라우터의 하단, 즉, IP 라우터와 DHCP 클라이언트 간의 통신에 이상이 있으면, S17의 DHCP Ack 메시지가 DHCP 클라이언트에게 전달되지 않는다. 그러면, DHCP 클라이언트는 IP 주소를 재 할당 받지 못한 채로, DHCP 서버가 Ack 메시지를 재전송한다. 이러한 과정은 각 DHCP 클라이언트들에 서 임계 시간(T1)이 감소하면서 계속 반복되므로, 결국, 임계 시간(T1) 미만의 Ack 메시지 개수가 증가한다. 즉, IP 라우터의 하단에 장애가 발생한 경우, 임계 시간(T1) 미만의 AcK 메시지가 다수 발생하게 된다. 이러한 임계 시간(T1) 미만의 AcK 메시지 개수는 단말 수에 비례해서 주기적으로 변동하는 성질을 가지고 있다. 또한, DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지 개수는 일정하게 발생하여야 하는데, IP 라우터의 상단에 장애가 발생한 경우, 대량으로 발생하는 성질을 가지고 있다. 이상 탐지 장치는 IP 라우터와 연결되어, IP 라우터가 교환하는 DHCP 메시지들을 모니터링하여 이상 여부를 탐지한다. 이상 탐지 장치는 IP 라우터의 DHCP Snoop Binding Table 감시를 수행할 수 있다. 실시예에 따르면, IP 라우터로부터 수집한 이상 메시지 수에 기초하여 IP 라우터의 이상 여부를 탐지 한다. 이상 메시지 수는 임계 시간(T1) 미만의 AcK 메시지 개수, 또는 DHCP Discover 메시지, DHCP Offer 메시 지, DHCP Request 메시지 각각의 개수들을 합한 전체 개수로 정의한다. IP 라우터는 IP 할당에 관련된 DHCP 메시지에 대해 DHCP Snoop Binding 테이블을 관리한다. IP 라우터 는 일반적으로 Ack 메시지 외의 상태를 IP 할당의 비정상 상태로 간주하며, DHCP Snoop Binding 테이블에 서 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지의 개수가 적정 임계치를 초과하였을 때 로 그를 기록한다. 그러나, 종래 기술에서 사용되는 적정 임계치는 고정되어 있으므로, DHCP 메시지들의 시계열적 경향(Trend)를 반영하지 못한다. 따라서, IP 라우터의 이상이 있음에도 이를 발견하지 못하는 등의 오류가 발생할 수 있 다. 실시예에 따르면, 이상 탐지 장치는 IP 라우터로부터 단위 시간마다 DHCP 메시지들을 수집하고, 이를 전처리하여 인공신경망 모델로 학습한다. 이상 탐지 장치는 학습한 인공신경망 모델을 통해 IP 라우터 의 이상을 탐지한다. 이상 탐지부는 임계 시간(T1) 미만의 AcK 메시지에 대한 이상은 IP 라우터 하단 구간의 이상으로 탐 지하고, DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지 각각의 개수들을 합한 전체 개수에 대한 이상은 IP 라우터 상단 구간의 이상으로 판단한다. 이때, 이상 탐지부는 실측값이 임계값을 초 과하는 경우, IP 라우터 이상으로 탐지한다. 이러한 인공신경망 모델을 통해, 이상 탐지 장치는 고정된 임계값이 아니라 DHCP 메시지들의 경향을 반영 한 동적 임계값을 사용하여 이상을 탐지할 수 있다. 또한, 이상 탐지 장치는 IP 라우터의 하단과 상단 각각의 이상을 탐지하는 각각의 인공신경망 모델을 생성함으로써, 이들을 통해 IP 라우터의 이상이 탐지된 구간을 결정할 수 있다. 이때, 인공신경망 모델은 LSTM(Long Short Term Memory) 모델이 사용될 수 있다. LSTM은 순환신경망(RNN, Recurrent Neural Network)의 한 종류로서, 과거의 정보의 손실이 적어 시계열 데이터 예측에 활용하기 좋은 모 델이다. 도 3은 실시예에 따른 이상 탐지 장치 장치의 세부 구성을 나타낸 블록도이고, 도 4는 도 3의 데이터 전처리부 의 동작을 설명하는 예시도이며, 도 5는 실시예에 따른 동적인 하단 임계값 생성 과정을 설명하는 도면이 고, 도 6은 실시예에 따른 동적인 상단 임계값 생성 과정을 설명하는 도면이다. 먼저, 도 3을 참조하면, 이상 탐지 장치는 이상 DHCP 메시지의 수를 AI(Artificial Intelligence) 기반으 로 예측하고, 이를 운용자에게 제공한다. 이상 탐지 장치는 데이터 수집부, 데이터 전처리부, 모델 학습부, 이상 탐지부 및 알 림부를 포함한다. 데이터 수집부는 IP 라우터를 통해 단위 시간마다 DHCP 메시지를 수집한다. 앞서 설명한 바와 같이, 수집하는 DHCP 메시지는 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지, DHCP Ack 메시지를 포함한다. 이러한 DHCP 메시지는 데이터 수집부가 IP 라우터로부터 수집하는 통신망 데이터에 포함되 고, 통신망 데이터는 단위 시간 별로 텍스트(txt) 형식으로 저장된다. 데이터 수집부는 IP 라우터로 부터 통신망 장비들의 상태 정보를 포함하는 통신망 데이터를 수집한다. 데이터 전처리부는 데이터 수집부가 수집한 통신망 데이터를 LSTM 모델에 사용 가능하도록 전처리한 다. 도 4를 참조하면, 통신망 데이터(P10)는 수집시각(예, 1905271300)(P11), 장비 대표 IP(112.174.160.102)(P12), 장비 모델명(DWES0960G1)(P13), 장비명(DONGRAE-TOD-FP08)(P14), 그리고 상세 데이 터(P15)를 포함한다. 상세 데이터(P15)는 MAC_Address(예, 0000.0000.00e8, 0000.0000.2a75, 0000.0002.5e46), IPv4_Address(예, 121.175.217.119, 61.78.186.61, 183.104.197.14), LastPacket(예, Ack), TimeLeft(예, 00:46:38, 00:51:20, 00:35:32), Vlan(예, 90), L2Port(예, xe5/5, xe2/1, xe3/8)를 포함한다. 이때, DHCP 메시지는 LastPacket을 통해 획득되고, TimeLeft를 통해 DHCP 메시지의 남은 IP 할당 시간이 획득된 다. 즉, 데이터 전처리부는 상세 데이터(P15)로부터 임계 시간(T1) 미만의 Ack 메시지들, 그리고 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지들의 개수를 카운트하여 전처리 데이터 테이블(P3 0)을 생성한다. 전처리 데이터 테이블(P30)은 수집일시 마다 임계 시간(T1) 미만의 Ack 메시지, DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지 각각의 카운트 개수가 매핑되어 있다. 수집일시는 데이터 전처리부에의해 통신망 데이터(P10)의 수집시각(예, 1905271300)(P11)을 년-월-일-시간으로 가공하여 표현된다. 예를들어, 데이터 전처리부는 상세 데이터(P15)의 LastPacket이 ACK이고 TimeLeft가 임계 시간(T1) 미만이 면, 전처리 데이터 테이블의 Ack 메시지 개수를 '1' 카운트한다. 이와 같은 방식으로, DHCP 메시지들을 카운트 하여 전처리 데이터 테이블(P30)에 기록한다. 전처리 데이터 테이블은 CSV(comma-separated values) 파일의 형 식일 수 있다. 이와 같이, 데이터 전처리부는 단위 시간 마다 학습에 필요한 DHCP 메시지의 수를 카운트하여 전처리 데이 터 테이블(P30)에 병합한다. 다시, 도 3을 참조하면, 모델 학습부는 전처리 데이터 테이블(P30)로부터 임계 시간(T1) 미만의 Ack 메시 지 개수들을 학습하여 다음 시점의 값을 예측하는 LSTM 모델을 생성한다. 도 5를 참조하면, 모델 학습부는 t 시점부터 t-n 시점까지 모니터링한 DHCP 메시지들중에서 임계 시간(T 1)시간 미만의 Ack 메시지들을 데이터 셋으로 생성한다. 모델 학습부는 데이터 셋을 LSTM 신경망으로 학습 하여, 다음 시점(t+1)의 임계 시간(T1)시간 미만의 Ack 메시지 개수를 예측하는 LSTM 모델을 생성할 수 있다. 또한, 모델 학습부는 전처리 데이터 테이블(P30)로부터 단위 시간 또는 수집 일시마다 DHCP Discover 메시 지, DHCP Offer 메시지, DHCP Request 메시지 각각의 개수를 카운트하고, 이들을 합한 전체 개수를 학습하여 다 음 시점의 값을 예측하는 이동 평균 모델(Moving average models, MA)을 생성한다. 도 6을 참조하면, t 시점부터 t-n 시점까지 모니터링한 DHCP 메시지들중에서 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지 개수들을 합한 각 시점 별 전체 개수를 이용하여, 다음 시점(+1) 시점의 전 체 메시지 개수를 예측하는 이동 평균 모델을 생성할 수 있다. 모델 학습부는 Ack 실측값과, LSTM 모델을 통해 예측한 AcK 예측값을 토대로 IP 라우터의 하단 이상 을 탐지하기 위한 하단 임계값을 결정한다. 여기서, AcK 예측값은 LSTM 모델을 통해 예측한 다음 시점(t+1)의 임계 시간(T1)시간 미만의 Ack 메시지 개수를 말한다. Ack 실측값은 다음 시점(t+1)에 실제로 IP 라우터로 부터 수집한 임계 시간(T1)시간 미만의 Ack 메시지 개수를 말한다. 모델 학습부는 DHCP Discover/Offer/Request 실측값과, 이동 평균 모델을 통해 예측한 DHCP Discover/Offer/Request 예측값을 토대로 IP 라우터의 상단 이상을 탐지하기 위한 상단 임계값을 결정한다. 여기서, 예측값은 이동 평균 모델을 통해 예측한 다음 시점(t+1)의 DHCP Discover/Offer/Request 메 시지 총 개수를 말한다. 실측값은 다음 시점(t+1)에 실제로 IP 라우터로부터 수집한 DHCP Discover/Offer/Request 메시지 총 개수를 말한다. 이상 탐지부는 모델 학습부로부터 제공받은 상단 임계값과 하단 임계값을 이용하여, 데이터 전처리부 로부터 전달되는 DCHP 메시지들 중에서 이상 메시지를 탐지한다. 즉, 이상 탐지부는 임계 시간(T1)시 간 미만의 Ack 메시지 개수가 하단 임계값 이하(또는 미만)인지 판단하고, 하단 임계값 이하(또는 미만)이면 IP 라우터의 하단 구간 이상으로 결정한다. 또한, 이상 탐지부는 DHCP Discover/Offer/Request 메시지 총 개수가 상단 임계값 이상(또는 초과)인지 판단하고, 상단 임계값 이상(또는 초과) 이면 IP 라우터의 상단 구간 이상으로 결정한다. 이와 같이, 이상 탐지부는 IP 라우터의 상단 이상을 탐지하기 위한 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지 개수들에 대하여, 인공지능 모델을 사용하지 않고 이동 평균 모델을 사용한 다. 이는 DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지의 통계적 특성 때문이다. DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지들을 평균과 표준편차가 모두 '0'에 수렴하는 특징 이 있다. 반면, IP 라우터 하단의 이상을 탐지할 때는 인공지능 모델을 사용한다. 이는 임계 시간(T1)시간 미만의 Ack 수의 통계적 특성, 즉, 할당된 단말 수/시간대 별로 패턴을 보이기 때문이다. 알림부는 이상 탐지부가 결정한 IP 라우터의 상단 구간 이상 또는 IP 라우터의 하단 구간 이상을 운용자에게 알려 운용자가 IP망에서의 이상을 인지하게 할 수 있다. 한 실시예에 따르면, 알림부는 IP 라우터의 상단 구간 이상 또는 IP 라우터의 하단 구간 이상을 운용자의 단말(미도시)로 전송할 수 있다. 다른 실시예에 따르면, 알림부는 IP 라우터의 상단 구간 이상 또는 IP 라우터의 하단 구간 이상을 이상 탐지 장치가 구비하는 디스플레이 장치(미도시)의 관 제 화면에 출력할 수 있다. 도 7은 실시예에 따른 동적인 하단 임계값 생성 과정을 나타낸 순서도로서, 도 1 내지 도 6에서 설명한 모델 학 습부의 동작을 설명한다. 도 7을 참조하면, 모델 학습부는 학습 주기가 도래(S101)하면, 이전 주기 만료 시점(t-n)으로부터 현 주기 도래 시점(t)까지 발생한 임계 시간(T1) 미만의 Ack 메시지를 카운트한다(S103). 모델 학습부는 데이터 전처리부가 출력하는 전처리 데이터 테이블(P30)을 통해 이전 주기 만료 시점 (t-n)으로부터 현 주기 도래 시점(t)까지 단위 시간마다 수집된 임계 시간(T1) 미만의 Ack 메시지 개수를 카운 트한다. 모델 학습부는 S103에서 카운트한 임계 시간(T1) 미만의 Ack 메시지 개수들을 이용하여, LSTM 모델이 다음 시점(t+1)에 발생할 임계 시간(T1) 미만의 Ack 메시지 개수를 예측하도록 학습시킨다(S105). 모델 학습부는 S105에서 학습된 LSTM 모델을 이용하여 다음 시점(t+1)의 임계 시간(T1) 미만의 Ack 메시지 개수를 예측한다(S107). 모델 학습부는 다음 시점(t+1)에 실제 발생한 임계 시간(T1) 미만의 Ack 메시지 개수를 측정한다(S109). 이상 탐지부는 S107에서 예측한 임계 시간(T1) 미만 Ack 메시지 개수와 S109에서 측정한 임계 시간(T1) 미 만 Ack 메시지 개수 간의 오차를 계산한다(S111). 실시예에 따르면, 오차는 RMSE(Root Mean Squre Error) 방식 이 사용될 수 있으며, 이는 수학식 1과 같다. 수학식 1"}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "RMSE는 오차를 의미한다. 는 S109에서 측정한 임계 시간(T1) 미만 Ack 메시지 개수를 나타낸다. 는 S107 에서 예측한 Ack 메시지 개수를 나타낸다. 수학식 1에서, \"6\"이 의미하는 것은 통계적 주기, 즉 RMSE를 계산하는데에 과거의 얼마만큼으로 계산할 지를 의 미한다. 예를들어, 수집 주기를 10분이라고 하였을 때, 1시간 동안의 오차를 표시한다면, 이 값이 6이 된다. 이상 탐지부는 사전에 설정된 통계적 주기가 도래하였는지 판단한다(S113). 통계적 주기는 하단 임계값 생 성을 위하여 설정되며, 운용자에 의해 지정될 수 있다. 예를들어, LSTM 모델로 100회 예측한 값을 이용하여 오 차를 계산하기로 지정하면, 통계적 주기는 100회가 될 수 있다. 이상 탐지부는 통계적 주기가 도래하지 않으면, S107 ~ S111을 반복한다. 즉, 이러한 오차들을 통계적 주 기마다 계산하고, 통계적 주기가 도래(S113)하면, 통계적 주기동안 누적된 오차들의 평균(μ)과 표준편차(σ)를 토대로, 수학식 2와 같이 하단 임계값( )을 정의할 수 있다(S115). 예를들어, 오차들이 100회 주 기만큼 누적되면, 100회 주기마다 계산된 오차들의 평균(μ)과 표준편차(σ)를 이용하여 수학식 2를 계산할 수 있다.수학식 2"}
{"patent_id": "10-2021-0014029", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "여기서, 상수 8은 네트워크 운용자가 얼마나 알람을 예민하게 받고 싶은지에 따라 조절되는 값이다. 상수가 작 으면 알람이 상대적으로 더 발생하고, 상수가 크면 알람이 상대적으로 덜 발생한다. 또한, a는 운용자가 얼마나 예민하게 이상을 탐지할지에 따라 달라지는 변수로서, 운용자가 임의로 설정할 수 있다. 이와 같이, 이상 탐지부는 예측값과 실측값의 오차들을 토대로, 통계적 임계값을 생성하여 이를 하단 임계 값( )으로 정의한다. S115 이후, 다시 S101 부터 시작한다. 즉, 하단 임계값은 계속된 학습과 예측의 과정을 통해 갱신된다. 따라서, DHCP 메시지, 즉, 임계 시간(T1) 미만의 Ack 메시지 개수의 시간의 흐름에 따른 경향(Trend)이 하단 임계값에 반영될 수 있다. 도 8은 실시예에 따른 동적인 상단 임계값 생성 과정을 나타낸 순서도로서, 도 1 내지 도 6에서 설명한 모델 학 습부의 동작을 설명한다. 도 8을 참조하면, 학습 주기가 도래(S201)하면, 모델 학습부는 이전 주기 만료 시점(t-n)으로부터 현 시점 (t)까지 발생한 Ack 메시지를 제외한 DCHP 메시지들, 즉, DHCP Discover 메시지, DHCP Offer 메시지, DHCP Request 메시지들을 계수하여 이들의 총합을 측정한다(S203). 모델 학습부는 S203에서 측정한 DHCP 메시지들의 개수 총합을 이용하여 이동 평균 모델이 다음 시점(t+1) 에 발생할 DHCP 메시지들의 개수 총합을 예측하도록 학습시킨다(S205). 이상 탐지부는 S205에서 학습된 이동 평균 모델을 이용하여 다음 시점(t+1)의 DHCP 메시지들의 개수 총합 을 예측(S207)하고, 다음 시점(t+1)에 실제 발생한 DHCP 메시지들의 개수들의 총합을 측정한다(S209). 이상 탐지부는 S207에서 예측한 개수와 S209에서 측정한 개수간의 오차를 계산한다(S211). 오차 계산 방식 은 도 7의 S111과 동일한 방식을 사용할 수 있다. 이상 탐지부는 통계적 주기가 도래하면, 통계적 주기 동안 계산된 오차들의 평균(μ)과 표준편차(σ)를 이 용하여 상단 임계값( )을 생성한다(S215). 이때, 상단 임계값( )은 도 7의 S115와 동일한 방식을 사용할 수 있다. 즉, 이상 탐지부는 S211에서 계산된 오차들의 평균(μ)과 표준편차(σ)를 수학식 2에 적용하여 상단 임계값( )을 정 의할 수 있다. 도 9는 실시예에 따른 IP 라우터의 이상을 탐지하는 절차를 설명하는 순서도로서, 도 1 ~ 도 6에서 설명한 이상 탐지부의 동작을 설명한다. 도 9를 참조하면, 이상 탐지부는 임의의 시점에 IP 라우터에서 발생하는 DHCP 메시지들 모니터링한다 (S301). 이상 탐지부는 데이터 수집부가 단위 시간마다 수집하여 전처리부에 의해 생성된 전처리 데이터 테이블(P30)로부터 DHCP 메시지들을 수집할 수 있다. 이상 탐지부는 S301에서 수집한 DHCP 메시지들을 임계 시간(T1) 미만의 Ack 메시지와 나머지 DHCP 메시지 들로 분리한다(S303).이상 탐지부는 임계 시간(T1) 미만의 Ack 메시지 개수를 카운트(S305)하고, 카운트 개수가 도 7을 통해 정 의한 하단 임계값을 초과하는지(또는 이상인지) 판단한다(S307). S307에서 초과하지 않으면(또는 이상이 아니면), S301로 회귀한다. 그러나 S307에서 초과하면(또는 이상이면), 이상 탐지부는 IP 라우터의 하단 구간의 이상 알림을 출력한다(S309). 한편, 이상 탐지부는 S303에서 분리된 나머지 DHCP 메시지들 개수들을 카운트(S311)하고, 카운트한 총 개 수가 도 8을 통해 정의한 상단 임계값을 초과하는지 판단한다(S313). S313에서 초과하지 않으면(또는 이상이 아니면), S301로 회귀한다. 그러나 S313에서 초과하면(또는 이상이면), 이상 탐지부는 IP 라우터의 상단 구간의 이상 알림을 출력한다(S315). 한편, 도 10은 실시예에 따른 IP 라우터의 이상 탐지 장치의 하드웨어 구성을 나타낸 블록도이다. 도 10을 참고하면, 이상 탐지 장치는 적어도 하나의 컴퓨팅 장치로 구현될 수 있고, 본 개시의 동작 을 실행하도록 기술된 명령들(instructions)이 포함된 컴퓨터 프로그램을 실행할 수 있다. 컴퓨팅 장치의 하드웨어는 적어도 하나의 프로세서, 메모리, 저장 장치, 통신 장치를 포함할 수 있고, 버스를 통해 연결될 수 있다. 이외에도 입력 장치 및 출력 장치 등의 하드웨어가 포함될 수 있 다. 컴퓨팅 장치는 컴퓨터 프로그램을 구동할 수 있는 운영 체제를 비롯한 각종 소프트웨어가 탑재될 수 있다. 프로세서는 컴퓨팅 장치의 동작을 제어하는 장치로서, 컴퓨터 프로그램에 포함된 명령들을 처리하는 다양한 형태의 프로세서일 수 있고, 예를 들면, CPU(Central Processing Unit), MPU(Micro Processor Unit), MCU(Micro Controller Unit), GPU(Graphic Processing Unit) 등 일 수 있다. 또한, 프로세서는 위에서 설 명한 방법을 실행하기 위한 프로그램에 대한 연산을 수행할 수 있다. 메모리는 각종 데이터, 명령 및/또는 정보를 저장한다. 메모리는 본 개시의 동작을 실행하도록 기술 된 명령들이 프로세서에 의해 처리되도록 해당 컴퓨터 프로그램을 저장 장치로부터 로드할 수 있다. 메모리는 예를 들면, ROM(read only memory), RAM(random access memory) 등 일 수 있다. 저장 장치(50 5)는 본 개시의 동작을 실행하는데 요구되는 각종 데이터, 컴퓨터 프로그램 등을 저장할 수 있다. 저장 장치 는 컴퓨터 프로그램을 비임시적으로 저장할 수 있다. 저장 장치는 비휘발성 메모리로 구현될 수 있다. 이상에서 설명한 본 발명의 실시예는 장치 및 방법을 통해서만 구현이 되는 것은 아니며, 본 발명의 실시예의 구성에 대응하는 기능을 실현하는 프로그램 또는 그 프로그램이 기록된 기록 매체를 통해 구현될 수도 있다. 이상에서 본 발명의 실시예에 대하여 상세하게 설명하였지만 본 발명의 권리범위는 이에 한정되는 것은 아니고 다음의 청구범위에서 정의하고 있는 본 발명의 기본 개념을 이용한 당업자의 여러 변형 및 개량 형태 또한 본 발명의 권리범위에 속하는 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7 도면8 도면9 도면10"}
{"patent_id": "10-2021-0014029", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 실시예에 따른 IP 라우터의 이상을 탐지하는 장치와 주변 구성 간의 연결 관계를 나타낸다. 도 2는 실시예에 따른 DHCP 절차를 나타낸다. 도 3은 실시예에 따른 이상 탐지 장치 장치의 세부 구성을 나타낸 블록도이다. 도 4는 도 3의 데이터 전처리부의 동작을 설명하는 예시도이다. 도 5는 실시예에 따른 동적인 하단 임계값 생성 과정을 설명하는 도면이다. 도 6은 실시예에 따른 동적인 상단 임계값 생성 과정을 설명하는 도면이다. 도 7은 실시예에 따른 동적인 하단 임계값 생성 과정을 나타낸 순서도이다. 도 8은 실시예에 따른 동적인 상단 임계값 생성 과정을 나타낸 순서도이다. 도 9는 실시예에 따른 IP 라우터의 이상을 탐지하는 절차를 설명하는 순서도이다. 도 10은 실시예에 따른 IP 라우터의 이상 탐지 장치의 하드웨어 구성을 나타낸 블록도이다."}
