{"patent_id": "10-2023-0135771", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0052688", "출원번호": "10-2023-0135771", "발명의 명칭": "자동계산대 시스템의 상품 검출방법 및 이를 위한 상품 검출장치", "출원인": "성균관대학교산학협력단", "발명자": "전재욱"}}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "자동계산대에 대한 복수의 프레임 영상을 수신하여 전처리하는 단계;기 학습된 검출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하는 단계;상기 전처리 된 복수의 프레임 영상에서 검출된 하나 이상의 상품을 추적하는 단계; 및추적 결과에 기초하여 상기 검출된 하나 이상의 상품을 카운팅하는 단계를 포함하는 자동계산대 시스템의 상품검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 전처리하는 단계는, 상기 복수의 프레임 영상 각각에서 노이즈 및 모션 블러(motion blur) 중 적어도 하나를 제거하는 단계; 및상기 복수의 프레임 영상 각각에서 사람의 손 영역을 예측하고, 상기 복수의 프레임 영상 각각에서 예측된 손영역을 마스킹 처리하여 제거하는 단계를 포함하는 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 제거하는 단계는, 상기 예측된 손 영역 중에서 상기 하나 이상의 상품 각각과 중첩되는 영역을 제외한 나머지 영역을 제거하는 단계를 포함하는 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 검출하는 단계는, 상기 전처리 된 복수의 프레임 영상 각각에서 상기 하나 이상의 상품 각각에 대응되는 바운딩 박스를 검출하는단계를 포함하는 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서, 상기 추적하는 단계는,상기 전처리 된 복수의 프레임 영상에 설정된 관심영역에 상기 바운딩 박스의 적어도 일부의 포함 여부를 판단하는 단계; 및판단 결과에 기초하여 상기 전처리 된 복수의 프레임 영상 중 기 설정된 연속프레임 동안 상기 관심영역 내 상기 바운딩 박스의 포함 여부를 확인하는 단계를 포함하는 자동계산대 시스템의 상품 검출방법.공개특허 10-2025-0052688-3-청구항 6 제5항에 있어서, 상기 판단하는 단계는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 중심과 상기 관심영역의 중심 간거리가 기 설정된 제1값 이하일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단하는 단계를 포함하는 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제5항에 있어서, 상기 판단하는 단계는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스와 상기 관심영역 간IoU(intersection over unit)가 기 설정된 제2값 이상일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단하는 단계를 포함하는 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제5항에 있어서, 상기 판단하는 단계는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 적어도 일변과 상기 일변에 인접된상기 관심영역의 꼭지점 간 거리가 기 설정된 제3값 이상일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을판단하는 단계를 포함하는 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항에 있어서, 상기 검출모델은, 복수의 견본영상 각각의 회전각, 확대 및 축소 비율 또는 감마 조정값 중 적어도 하나를 조작하여 생성된 복수의 학습영상을 입력 받으면, 상기 복수의 학습영상 내 하나 이상의 상품을 검출하도록 기 학습된 자동계산대 시스템의 상품 검출방법."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "상품 검출 프로그램이 저장된 메모리; 및상기 상품 검출 프로그램을 실행하여, 자동계산대에 대한 복수의 프레임 영상을 수신하여 전처리하고, 기 학습된 검출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하고, 상기 전처리 된복수의 프레임 영상에서 검출된 하나 이상의 상품을 추적하고, 추적 결과에 기초하여 상기 검출된 하나 이상의상품을 카운팅하는 프로세서를 포함하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서, 공개특허 10-2025-0052688-4-상기 프로세서는, 상기 복수의 프레임 영상 각각에서 노이즈 및 모션 블러(motion blur) 중 적어도 하나를 제거하고, 상기 복수의프레임 영상 각각에서 사람의 손 영역을 예측하고, 상기 복수의 프레임 영상 각각에서 예측된 손 영역을 마스킹처리하여 제거하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서, 상기 프로세서는, 상기 예측된 손 영역 중에서 상기 하나 이상의 상품 각각과 중첩되는 영역을 제외한 나머지 영역을 제거하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제10항에 있어서, 상기 프로세서는, 상기 검출모델을 이용하여 상기 전처리 된 복수의 프레임 영상 각각에서 상기 하나 이상의 상품 각각에 대응되는 바운딩 박스를 검출하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제13항에 있어서, 상기 프로세서는, 상기 전처리 된 복수의 프레임 영상에 설정된 관심영역에 상기 바운딩 박스의 적어도 일부의 포함 여부를 판단하고, 판단 결과에 기초하여 상기 전처리 된 복수의 프레임 영상 중 기 설정된 연속프레임 동안 상기 관심영역내 상기 바운딩 박스의 포함 여부를 확인하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서, 상기 프로세서는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 중심과 상기 관심영역의 중심 간거리가 기 설정된 제1값 이하일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제14항에 있어서, 상기 프로세서는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스와 상기 관심영역 간IoU(intersection over unit)가 기 설정된 제2값 이상일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단하는 자동계산대 시스템의 상품 검출장치.공개특허 10-2025-0052688-5-청구항 17 제14항에 있어서, 상기 프로세서는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 적어도 일변과 상기 일변에 인접된상기 관심영역의 꼭지점 간 거리가 기 설정된 제3값 이상일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을판단하는 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제10항에 있어서, 상기 검출모델은, 복수의 견본영상 각각의 회전각, 확대 및 축소 비율 또는 감마 조정값 중 적어도 하나를 조작하여 생성된 복수의 학습영상을 입력 받으면, 상기 복수의 학습영상 내 하나 이상의 상품을 검출하도록 기 학습된 자동계산대 시스템의 상품 검출장치."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "컴퓨터 프로그램이 저장된 컴퓨터 판독 가능 기록매체로서,상기 컴퓨터 프로그램은, 자동계산대에 대한 복수의 프레임 영상을 수신하여 전처리하는 단계;기 학습된 검출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하는 단계;상기 전처리 된 복수의 프레임 영상에서 검출된 하나 이상의 상품을 추적하는 단계; 및추적 결과에 기초하여 상기 검출된 하나 이상의 상품을 카운팅하는 단계를 포함하는 자동계산대 시스템의 상품검출방법을 프로세서가 수행하기 위한 명령어를 포함하는 컴퓨터 판독 가능한 기록매체."}
{"patent_id": "10-2023-0135771", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "컴퓨터 판독 가능한 기록매체에 저장된 컴퓨터 프로그램으로서,상기 컴퓨터 프로그램은, 자동계산대에 대한 복수의 프레임 영상을 수신하여 전처리하는 단계;기 학습된 검출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하는 단계;상기 전처리 된 복수의 프레임 영상에서 검출된 하나 이상의 상품을 추적하는 단계; 및추적 결과에 기초하여 상기 검출된 하나 이상의 상품을 카운팅하는 단계를 포함하는 자동계산대 시스템의 상품검출방법을 프로세서가 수행하기 위한 명령어를 포함하는 기록매체에 저장된 컴퓨터 프로그램."}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "자동계산대 시스템의 상품 검출방법 및 검출장치가 제공된다. 상품 검출방법은, 자동계산대에 대한 복수의 프레 임 영상을 수신하여 전처리하고, 기 학습된 검출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하여 추적하고, 추적 결과에 기초하여 하나 이상의 상품을 카운팅한다."}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 자동계산대 시스템의 상품 검출방법 및 이를 위한 상품 검출장치에 관한 것이다."}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근 소매업계에서는 인공지능(AI)와 컴퓨터 비전(CV) 기술을 응용한 혁신이 일어났다. 그 중 자동 계산대(ACO, automatic checkout) 기술은 이 분야의 가장 핵심적인 기술로 꼽을 수 있다. 이상적인 자동 계산대 시스템의 경우, 고객이 자신이 고른 상품들을 계산대에 올려놓으면 시스템은 각각의 상품 들을 차질 없이 인식하여 한 번에 정확한 구매 물품 목록을 리턴 할 수 있다. 이러한 자동 계산대 시스템은 객체 오클루젼, 모션 블러, 상품들 간의 유사성, 및 검출 오류나 분류 오류 시 발 생할 코스트 등을 해결하기 위한 방향으로 연구가 이루어지고 있다. 또한, 자동 계산대 시스템 구축을 위해 딥 러닝과 같은 기계 학습을 적용할 경우, 상품 종류 및 분류가 다양하고, 상품 목록이 수시로 갱신되는 특수성이 반영된 학습 영상 데이터 수집이 중요하다. 즉, 자동 계산대 시스템의 개발에 있어 정확도, 안정성, 및 효율성이 고려해야 할 핵심 요소라 할 수 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 한국공개특허 제10-2015-0140359호(2015.12.15.)"}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 기 학습된 검출모델을 이용하여 자동계산대에 대한 영상에서 상품을 검출하고, 기 설정된 조건에 기 초하여 검출된 상품을 추적한 결과에 따라 상품에 대한 카운팅을 하는 자동계산대 시스템의 상품 검출방법 및 이를 위한 상품 검출장치를 제공하고자 하는 데 있다."}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 실시예에 따른 자동계산대 시스템의 상품 검출방법은, 자동계산대에 대한 복수의 프레임 영상을 수신 하여 전처리하는 단계; 기 학습된 검출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상 품을 검출하는 단계; 상기 전처리 된 복수의 프레임 영상에서 검출된 하나 이상의 상품을 추적하는 단계; 및 추 적 결과에 기초하여 상기 검출된 하나 이상의 상품을 카운팅하는 단계를 포함한다. 상기 전처리하는 단계는, 상기 복수의 프레임 영상 각각에서 노이즈 및 모션 블러(motion blur) 중 적어도 하나 를 제거하는 단계; 및 상기 복수의 프레임 영상 각각에서 사람의 손 영역을 예측하고, 상기 복수의 프레임 영상 각각에서 예측된 손 영역을 마스킹 처리하여 제거하는 단계를 포함한다. 상기 제거하는 단계는, 상기 예측된 손 영역 중에서 상기 하나 이상의 상품 각각과 중첩되는 영역을 제외한 나 머지 영역을 제거하는 단계를 포함한다. 상기 검출하는 단계는, 상기 전처리 된 복수의 프레임 영상 각각에서 상기 하나 이상의 상품 각각에 대응되는 바운딩 박스를 검출하는 단계를 포함한다. 상기 추적하는 단계는, 상기 전처리 된 복수의 프레임 영상에 설정된 관심영역에 상기 바운딩 박스의 적어도 일 부의 포함 여부를 판단하는 단계; 및 판단 결과에 기초하여 상기 전처리 된 복수의 프레임 영상 중 기 설정된 연속프레임 동안 상기 관심영역 내 상기 바운딩 박스의 포함 여부를 확인하는 단계를 포함한다. 상기 판단하는 단계는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 중심과 상 기 관심영역의 중심 간 거리가 기 설정된 제1값 이하일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단 하는 단계를 포함한다. 또한, 상기 판단하는 단계는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스와 상기 관심영역 간 IoU(intersection over unit)가 기 설정된 제2값 이상일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단하는 단계를 포함한다. 또한, 상기 판단하는 단계는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 적어 도 일변과 상기 일변에 인접된 상기 관심영역의 꼭지점 간 거리가 기 설정된 제3값 이상일 때, 상기 관심영역내 상기 바운딩 박스의 포함을 판단하는 단계를 포함한다. 상기 검출모델은, 복수의 견본영상 각각의 회전각, 확대 및 축소 비율 또는 감마 조정값 중 적어도 하나를 조작 하여 생성된 복수의 학습영상을 입력 받으면, 상기 복수의 학습영상 내 하나 이상의 상품을 검출하도록 기 학습 된다. 본 발명의 실시예에 따른 자동계산대 시스템의 상품 검출장치는, 상품 검출 프로그램이 저장된 메모리; 및 상기 상품 검출 프로그램을 실행하여, 자동계산대에 대한 복수의 프레임 영상을 수신하여 전처리하고, 기 학습된 검 출모델을 이용하여 전처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하고, 상기 전처리 된 복수 의 프레임 영상에서 검출된 하나 이상의 상품을 추적하고, 추적 결과에 기초하여 상기 검출된 하나 이상의 상품 을 카운팅하는 프로세서를 포함한다. 상기 프로세서는, 상기 복수의 프레임 영상 각각에서 노이즈 및 모션 블러(motion blur) 중 적어도 하나를 제거 하고, 상기 복수의 프레임 영상 각각에서 사람의 손 영역을 예측하고, 상기 복수의 프레임 영상 각각에서 예측 된 손 영역을 마스킹 처리하여 제거한다. 상기 프로세서는, 상기 예측된 손 영역 중에서 상기 하나 이상의 상품 각각과 중첩되는 영역을 제외한 나머지 영역을 제거한다. 상기 프로세서는, 상기 검출모델을 이용하여 상기 전처리 된 복수의 프레임 영상 각각에서 상기 하나 이상의 상 품 각각에 대응되는 바운딩 박스를 검출한다. 상기 프로세서는, 상기 전처리 된 복수의 프레임 영상에 설정된 관심영역에 상기 바운딩 박스의 적어도 일부의 포함 여부를 판단하고, 판단 결과에 기초하여 상기 전처리 된 복수의 프레임 영상 중 기 설정된 연속프레임 동 안 상기 관심영역 내 상기 바운딩 박스의 포함 여부를 확인한다. 상기 프로세서는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 중심과 상기 관 심영역의 중심 간 거리가 기 설정된 제1값 이하일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단한다. 상기 프로세서는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스와 상기 관심영역 간 IoU(intersection over unit)가 기 설정된 제2값 이상일 때, 상기 관심영역 내 상기 바운딩 박스의 포함을 판단한다. 상기 프로세서는, 상기 바운딩 박스의 중심이 상기 관심영역 내 포함되고, 상기 바운딩 박스의 적어도 일변과 상기 일변에 인접된 상기 관심영역의 꼭지점 간 거리가 기 설정된 제3값 이상일 때, 상기 관심영역 내 상기 바 운딩 박스의 포함을 판단한다."}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은 계산대를 촬영한 영상으로부터 상품을 검출하고, 이를 영상의 기 설정된 복수의 프레임 동안 추적하 여 그 결과에 따라 상품에 대한 카운팅 결과를 출력할 수 있다. 이에, 본 발명은 영상 내 설정된 관심영역에 상품이 위치하지 않거나 또는 관심영역에 짧은 시간 동안 상품이 포함되는 경우에 이러한 상품을 카운팅하지 않음으로써, 계산대 상에 놓여진 상품에 대한 정확한 검출 및 카운 팅이 가능하여 자동계산대 시스템의 효율성 및 정확성을 높일 수 있다."}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 발명은 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있으며, 단지 본 실시예들은 본 발명의 개시가 완전하도록 하고, 본 발명이 속하"}
{"patent_id": "10-2023-0135771", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "는 기술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명 은 청구항의 범주에 의해 정의될 뿐이다. 본 발명의 실시예들을 설명함에 있어서 공지 기능 또는 구성에 대한 구체적인 설명이 본 발명의 요지를 불필요 하게 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명을 생략할 것이다. 그리고 후술되는 용어들은 본 발명의 실시 예에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 이하, 첨부된 도면을 참조하여 본 발명의 바람직한 실시 예에 대하여 상세하게 설명한다. 도 1은 본 발명의 실시예에 따른 상품 검출장치를 나타내는 도면이다. 도 1을 참조하면, 본 실시예의 상품 검출장치는 카메라 등과 함께 자동계산대 시스템을 구성할 수 있 다. 여기서, 카메라는 계산대(미도시) 상부에서 상기 계산대 방향으로 하나 이상 배치될 수 있으며, 사용자에 의해 계산대 상에 놓여진 복수의 상품들 각각을 촬영하여 복수의 프레임 영상을 획득할 수 있다. 이에, 본 실시예의 상품 검출장치는 카메라로부터 제공된 복수의 프레임 영상에서 복수의 상품을 정 확하게 검출하고, 그에 따라 검출된 상품을 카운팅하여 카운팅 결과, 예컨대 상품 수량을 출력할 수 있는 장치 일 수 있다. 이러한 상품 검출장치는 입출력부, 프로세서 및 메모리를 포함할 수 있다. 입출력부는 카메라로부터 복수의 프레임 영상을 수신할 수 있다. 또한, 입출력부는 프로세서 에 의해 생성된 상품 카운팅 결과를 외부, 예컨대 자동계산대 시스템의 결제관리장치(미도시) 등으로 출력 할 수 있다. 프로세서는 입출력부로부터 복수의 프레임 영상을 제공받고, 메모리에 저장된 상품 검출 프로그 램을 이용하여 복수의 프레임 영상에서 하나 이상의 상품을 검출할 수 있다. 또한, 프로세서는 검출된 하나 이상의 상품을 기 설정된 조건에 따라 복수의 프레임 영상 내에서 추적하고, 그 추적 결과로부터 해당 상품을 카운팅하여 카운팅 결과를 출력할 수 있다. 상품의 카운팅 결과는 입출력부를 통해 외부로 출력될 수 있다. 메모리는 상품 검출 프로그램 및 이의 실행에 필요한 정보를 저장할 수 있다. 상품 검출 프로그램 은 입출력부를 통해 제공된 복수의 프레임 영상에서 하나 이상의 상품을 검출하여 추적하고, 그 추적 결과에 따라 검출된 상품을 카운팅할 수 있는 명령어들을 포함하는 소프트웨어일 수 있다. 이에, 프로세서는 입출력부로 계산대에 대한 복수의 프레임 영상이 수신되면, 메모리의 상품 검 출 프로그램을 실행하고, 이를 이용하여 복수의 프레임 영상에서 상품 검출, 상품 추적 및 상품 카운팅을 순차적으로 수행하여 카운팅 결과를 생성할 수 있다. 도 2는 도 1의 상품 검출 프로그램의 기능을 개념적으로 나타내는 도면이다. 도 2를 참조하면, 본 실시예의 상품 검출 프로그램은 영상 전처리부, 상품 검출부, 상품 추적부 및 상품 카운팅부를 포함할 수 있다. 도 2에 도시된 영상 전처리부, 상품 검출부, 상품 추적부 및 상품 카운팅부는 본 실시예의 상품 검출 프로그램의 기능을 쉽게 설명하기 위해 나눈 것으로, 본 발명은 이에 제한되지 않는다. 예컨대, 본 발명의 실시예에 따라 영상 전처리부, 상품 검출부, 상품 추적부 및 상품 카운팅부 는 그 기능이 병합되거나 분리될 수 있으며, 하나의 프로그램에 포함된 일련의 명령어들로 구현될 수도 있 다. 영상 전처리부는 입출력부를 통해 제공된 복수의 프레임 영상을 전처리할 수 있다. 예컨대, 영상 전처리부는 복수의 프레임 영상 각각에서 노이즈를 제거하거나 또는 각 프레임 영상의 모션 블러(motion blur)를 제거하여 영상의 화질을 개선할 수 있다. 또한, 영상 전처리부는 노이즈 또는 모션 블러가 제거된 복수의 프레임 영상 각각에서 사람의 손 영역, 예 컨대 상품을 파지하고 있는 손 영역을 예측하여 각 프레임 영상에서 제거할 수 있다. 예컨대, 영상 전처리부는 기 학습된 예측모델(미도시)를 포함할 수 있다. 이러한 예측모델은 복수의 프레 임 영상 각각을 입력 받고, 해당 영상 내에 사람의 손 영역을 예측하여 검출할 수 있다. 이에, 영상 전처리부는 예측모델을 통해 검출된 사람의 손 영역을 소정의 마스크(미도시)를 이용하여 마스 킹(masking) 처리할 수 있다. 그리고, 복수의 프레임 영상 각각에서 마스킹 처리된 영상을 제거함으로써, 각 프 레임 영상에서 상품을 제외한 나머지, 즉 사람의 신체가 나타나지 않도록 할 수 있다. 여기서, 영상 전처리부는 각 프레임 영상에서 상품과 사람 손이 중첩된 영역을 제외한 나머지 영역을 마스 킹 처리를 할 수 있다. 이에, 영상 전처리부로부터 출력되는 전처리 된 프레임 영상에서는 상품에 중첩된 사람의 손 영역이 포함될 수 있다. 다만, 본 발명의 실시예에 따라, 영상 전처리부는 해당 중첩 영역에 대 해 이에 인접된 상품의 이미지를 참조하여 복원하는 동작을 추가로 수행할 수도 있다. 상품 검출부는 기 학습된 검출모델을 이용하여 영상 전처리부를 통해 제공된 전처리 된 복수의 프레 임 영상 각각에서 하나 이상의 상품을 검출할 수 있다. 여기서, 검출모델은 복수의 프레임 영상 각각으로부터 하나 이상의 상품에 대응되는 바운딩 박스(bounding bo x)를 검출 결과로 출력할 수 있다. 바운딩 박스는 검출된 상품의 테두리를 감싸는 사각형 형태를 가질 수 있다. 이러한 검출모델은 복수의 견본영상에 기초하여 생성된 복수의 학습영상을 이용하여 학습된 신경망 모델일 수 있다. 이에, 상품 검출부는 검출모델을 이용하여 검출된 하나 이상의 상품에 대한 바운딩 박스와 함께, 해당 상 품에 대한 정보, 예컨대 상품 종류 및 위치에 대한 정보를 출력할 수 있다. 도 3은 도 2의 상품검출부의 검출모델을 학습시키는 방법을 나타내는 도면이다. 도 3을 참조하면, 본 실시예의 상품 검출부는 검출모델을 포함할 수 있다. 이러한 검출모델은 복수의 학습영상을 입력으로 제공받고, 레이블 데이터로 검출정답을 입력 받으면, 복수의 학습영상 내 하나 이 상의 상품에 대한 바운딩 박스를 검출하여 출력하도록 학습될 수 있다. 이러한 검출모델은 Scaled YOLO v4 모델일 수 있으나, 이에 한정되는 것은 아니다. 여기서, 복수의 학습영상은 통제된 환경에서 촬영되어 수집된 복수의 상품 각각에 대한 견본영상의 파라미터를 조작하여 생성할 수 있다. 예컨대, 복수의 상품 각각에 대한 개별 견본영상의 집합으로 복수의 견본영상이 수집 되면, 각 견본영상에 대해 배경을 제거한 후, 상품에 대한 회전각, 확대 또는 축소비율 및 감마 조정값 등의 파 라미터를 조작할 수 있다. 그리고, 계산대 배경에 파라미터가 조작된 상품에 대한 위치, 오클루젼, 난잡 수치 또는 조명 환경을 무작위로 설정하여 배치함으로써, 복수의 학습영상을 생성할 수 있다. 이에, 검출모델은 전술된 복수의 학습영상을 입력 받고, 각 학습영상 내 상품에 대한 검출정답을 입력 받 으면, 복수의 학습영상 각각에서 하나 이상의 상품을 검출하고, 그에 따른 상품별 바운딩 박스를 출력할 수 있 다. 상품 추적부는 상품 검출부를 통해 검출된 하나 이상의 상품, 예컨대 바운딩 박스를 앞서 전처리 된 복수의 프레임 영상 내에서 추적할 수 있다. 여기서, 상품 추적부는 기 설정된 하나 이상의 조건에 기초하여 전처리 된 복수의 프레임 영상의 복수의 프레임 동안 해당 바운딩 박스를 추적할 수 있다. 예컨대, 상품 검출부에서 상품에 대한 바운딩 박스가 검출되면, 상품 추적부는 해당 바운딩 박스를 추적 대상 후보로 결정할 수 있다. 이어 상품 추적부는 복수의 프레임 영상 각각의 복수의 프레임에서 기 설정된 관심영역 내에 결정된 추적 대상 후보, 즉 바운딩 박스가 적어도 일부 포함되는지를 판단할 수 있다. 여기서, 상품 추적부는 바운딩 박스의 중심점의 위치가 관심영역 내 포함되는지를 판단할 수 있다. 이때, 상품 추적부는 바운딩 박스의 중심점이 관심영역에 포함되고, 관심영역의 중심점과 바운딩 박스의 중심점 간 이격거리가 기 설정된 제1값 이하일 때, 관심영역 내 바운딩 박스의 포함을 판단할 수 있다. 여기서, 제1값은 프레임 영상의 해당 프레임에서의 픽셀 개수, 예컨대 단위 픽셀의 개수에 따른 거리일 수 있으 며, 대략 50개의 단위 픽셀에 대응되는 거리 값일 수 있다. 또한, 상품 추적부는 바운딩 박스의 중심점이 관심영역에 포함되고, 바운딩 박스와 관심영역 간 중첩 정도, 즉 IoU(intersection over unit)가 기 설정된 제2값 이상일 때, 관심영역 내 바운딩 박스의 포함을 판단 할 수 있다. 여기서, 제2값은 바운딩 박스와 관심영역 간 중첩비율일 수 있으며, 대략 0.9일 수 있다. 또한, 상품 추적부는 바운딩 박스의 중심점이 관심영역에 포함되고, 바운딩 박스의 일변과 이에 인접된 관 심영역의 꼭지점 간 이격거리가 기 설정된 제3값 이상일 때, 관심영역 내 바운딩 박스의 포함을 판단할 수 있다. 여기서, 제3값은 프레임 영상의 해당 프레임에서의 픽셀 개수, 예컨대 단위 픽셀의 개수에 따른 거리일 수 있으 며, 대략 100개의 단위 픽셀에 대응되는 거리 값일 수 있다. 이와 같이, 상품 추적부는 복수의 프레임 영상 각각의 복수의 프레임에서 검출된 상품에 대한 바운딩 박스 의 위치가 기 설정된 관심영역 내 포함되는지를 판단할 수 있다. 또한, 바운딩 박스가 관심영역 내 포함되는 것으로 판단되면, 상품 추적부는 각 프레임 영상의 복수의 프 레임 중 기 설정된 연속프레임 동안 관심영역 내 바운딩 박스가 포함되어 있는지를 확인할 수 있다. 여기서, 연 속프레임은 대략 3프레임 이상일 수 있다. 상품 추적부는 각 프레임 영상의 연속프레임 동안 추적 대상 후보가 관심영역 내 포함되는 것으로 확인되 면, 해당 바운딩 박스에 상품 ID를 부여할 수 있다. 상품 추적부는 상품 ID를 포함하는 추적 결과를 출력 할 수 있다. 이러한 상품 추적부는 SORT 방식을 이용하여 해당 상품에 대한 바운딩 박스를 추적할 수 있다. SORT 방식 은 움직임 예측에 칼만 필터를 사용하고, 트랙 배정에 헝가리안 알고리즘을 사용할 수 있다. 칼만 필터는 아직 매칭되지 않은 검출 결과에 대해 추적 상태를 초기화하여 추적 상태를 새로운 타겟으로 바꾸는데 사용될 수 있 고, 매칭된 추적 결과는 현존하는 타겟의 추적 상태를 갱신하기 위해 사용될 수 있다. 이 때, 각 타겟마다의 상태공간(state space)은 차원 상태 변수 (u, v, s, r, u', v', s')로 정의될 수 있다. 여기서, u와 v는 타겟 중심의 가로 세로 2D 픽셀 좌표를 나타내고, s와 r은 각각 바운딩 박스의 면적과 종횡비 를 나타낼 수 있다. 등속 운동 및 선형 관측 모델에서의 표준 칼만 필터가 트랙 조각 k를 지정 및 타겟 대상으 로 만들 수 있는데, 이 k는 다음 단계에서 카운팅에 사용될 수 있다. 새로운 검출 결과를 기존에 존재하는 타겟 에 배정할 경우, 각 타겟의 바운딩 박스 모양의 추정은 현재 프레임에서의 고유 위치를 예측하는 방식으로 이루 어질 수 있다. 이 후, 할당 코스트 행렬이 계산되는데 이는 실제 검출된 바운딩 박스와 해당 타겟에 대한 모든 바운딩 박스 예측 결과들 사이의 IoU로 결정될 수 있다. 최적의 매칭을 위한 소모 코스트 평가 기준으로 쓰이는 IoU 거리는 칼만 필터와 병행해 사용되는 도중 빠르고 효율적인 성과를 보여주었을 때의 SORT 로부터 획득될 수 있다. 다시 말해, 어떤 검출 D에 대해서 어떤 트랙 조각 T와 매칭됐을 때의 코스트는 IoU를 통해 계산될 수 있 다. 이 때, 헝가리안 알고리즘을 이용해 최적의 솔루션을 얻어낼 수 있다. 상품 카운팅부는 상품 추적부에서 출력된 추적 결과에 기초하여 상품 ID에 대응되는 상품을 카운팅하 고, 그에 따른 카운팅 결과를 출력할 수 있다. 여기서, 전술된 상품 추적부에서 연속된 프레임 동안 관심영역 내 바운딩 박스의 포함 여부가 확인되어 각 바운딩 박스에 상품 ID가 부여되므로, 상품 카운팅부는 상품 ID에 기초하여 해당 상품에 대한 수량을 카운 팅할 수 있다. 이에, 본 실시예의 상품 검출장치는 상품 추적부의 추적 결과에 따라 기 설정된 관심영역에 포함되지 않는 상품 또는 짧은 시간 동안 관심영역에 포함되는 상품에 대해서 카운팅을 하지 않으므로, 계산대 상에 놓여 진 상품에 대한 정확한 검출 및 카운팅이 가능하여 자동계산대 시스템의 효율성 및 정확성을 높일 수 있다. 도 4는 본 발명의 실시예에 따른 상품 검출방법을 나타내는 도면이다. 도 4를 참조하면, 본 실시예의 상품 검출장치는 계산대 상부에 배치되어 계산대를 촬영하는 카메라로 부터 계산대 상에 놓여진 복수의 상품을 포함하는 계산대 영상, 예컨대 복수의 프레임 영상을 수신할 수 있다(S10). 이에, 상품 검출장치의 프로세서는 메모리에 저장된 상품 검출 프로그램을 로딩하고, 이를 이용하여 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출하고, 검출된 상품을 추적하여 그 결과에 따라 상품에 대한 카운팅을 수행할 수 있다. 먼저, 영상 전처리부는 복수의 프레임 영상 각각에서 노이즈 및 모션 블러 중 적어도 하나를 제거하고, 사 람의 손 영역을 예측하여 마스킹 한 후, 이를 복수의 프레임 영상 각각에서 제거하는 전처리를 수행할 수 있다 (S20). 도 5는 도 4의 영상을 전처리하는 방법에 대한 실시예를 나타내는 도면이다. 도 5를 참조하면, 영상 전처리부는 입력영상, 즉 입출력부를 통해 제공된 복수의 프레임 영상 각각에 서 노이즈 및 모션 블러 중 적어도 하나를 제거하여 영상의 화질이 개선된 보정된 영상을 생성할 수 있다. 또한, 영상 전처리부는 기 학습된 예측모델을 이용하여 복수의 프레임 영상 또는 보정된 영상에서 사람의 손 영역을 예측하고, 마스크를 이용하여 영상 내 예측된 손 영역에 대한 마스킹 처리를 수행할 수 있다. 여기서, 영상 전처리부는 각 프레임 영상에서 상품과 사람 손이 중첩된 영역을 제외한 나머지 영역에 대해 서 마스킹 처리를 할 수 있다. 이에, 영상 전처리부는 보정된 영상에서 마스킹 처리된 영상을 제외시켜 복수의 프레임 영상 각각에 대응 되는 전처리 된 영상을 생성하여 출력할 수 있다. 다시 도 4를 참조하면, 상품 검출부는 기 학습된 검출모델을 이용하여 영상 전처리부에서 출력된 전 처리 된 복수의 프레임 영상 각각에서 하나 이상의 상품을 검출할 수 있다(S30). 여기서, 상품 검출부는 상품에 대응되는 바운딩 박스를 검출할 수 있으며, 바운딩 박스와 함께 상품에 대 한 정보를 검출 결과로 출력할 수 있다. 다음으로, 상품 추적부는 전처리 된 복수의 프레임 영상의 복수의 프레임 동안 상품 검출부에서 출력 된 검출된 상품, 즉 바운딩 박스를 추적할 수 있다(S40). 여기서, 상품 추적부는 복수의 프레임 영상에 설정된 관심영역과 검출된 바운딩 박스 간 위치 관계에 기초 하여 복수의 프레임 동안 바운딩 박스를 추적할 수 있다. 도 6은 도 4의 상품을 추적하는 방법을 나타내는 도면이고, 도 7은 도 6의 상품을 추적하는 방법에 대한 실시예 를 나타내는 도면이다. 도 6 및 도 7을 참조하면, 먼저, 상품 추적부는 상품 검출부에서 검출된 상품에 대한 바운딩 박스를 추적 대상 후보로 결정할 수 있다. 다음으로, 상품 추적부는 복수의 프레임 영상 각각의 복수의 프레임에서 기 설정된 관심영역(ROI) 내에 추 적 대상 후보, 즉 바운딩 박스가 적어도 일부 포함되는지를 판단할 수 있다(S41). 여기서, 상품 추적부는 바운딩 박스의 중심점(c2)의 위치가 관심영역(ROI) 내 포함되는지를 판단할 수 있 다. 일 실시예에 따라, 상품 추적부는 바운딩 박스의 중심점(c2)이 관심영역(ROI)에 포함되고, 관심영역(ROI) 의 중심점(c1)과 바운딩 박스의 중심점(c2) 간 이격거리(d1)가 기 설정된 제1값 이하일 때, 관심영역(ROI) 내 바운딩 박스의 포함을 판단할 수 있다. 여기서, 제1값은 해당 프레임의 픽셀 개수에 따른 거리일 수 있으며, 대략 50개의 픽셀에 대응되는 거리 값일 수 있다. 다른 실시예에 따라, 상품 추적부는 바운딩 박스의 중심점(c2)이 관심영역(ROI)에 포함되고, 바운딩 박스 와 관심영역(ROI) 간 IoU가 기 설정된 제2값 이상일 때, 관심영역(ROI) 내 바운딩 박스의 포함을 판단할 수 있 다. 여기서, 제2값은 바운딩 박스와 관심영역 간 중첩비율일 수 있으며, 대략 0.9일 수 있다. 또 다른 실시예에 따라, 상품 추적부는 바운딩 박스의 중심점(c2)이 관심영역(ROI)에 포함되고, 바운딩 박 스의 일변과 이에 인접된 관심영역(ROI)의 꼭지점 간 이격거리(d2)가 기 설정된 제3값 이상일 때, 관심영역 (ROI) 내 바운딩 박스의 포함을 판단할 수 있다. 여기서, 제3값은 프레임 영상의 해당 프레임에서의 픽셀 개수에 따른 거리일 수 있으며, 대략 100개의 픽셀에 대응되는 거리 값일 수 있다. 이와 같이, 상품 추적부에 의해 바운딩 박스가 관심영역(ROI) 내 포함되어 있음이 판단되면, 상품 추적부 는 각 프레임 영상의 복수의 프레임 중 기 설정된 연속프레임 동안 관심영역(ROI) 내 바운딩 박스의 포함 여부를 확인할 수 있다(S45). 여기서, 연속프레임은 각 프레임 영상에서 대략 연속된 3프레임 이상일 수 있다. 그리고, 상품 추적부는 각 프레임 영상의 연속프레임 동안 추적 대상 후보, 즉 바운딩 박스가 관심영역 (ROI) 내 포함되는 것으로 확인되면, 해당 바운딩 박스에 상품 ID를 부여하고, 상품 ID를 포함하는 추적 결과를 출력할 수 있다. 다시 도 4를 참조하면, 상품 카운팅부는 상품 추적부에서 출력된 추적 결과에 기초하여 상품 ID에 대 응되는 상품을 카운팅하고, 그에 따른 카운팅 결과를 출력할 수 있다(S50). 이에, 프로세서는 상품 카운팅부에서 출력된 카운팅 결과를 입출력부를 통해 자동계산대 시스템 의 결제관리장치 등으로 출력할 수 있다. 이와 같이, 본 실시예에 따른 상품 검출방법은, 계산대를 촬영한 영상으로부터 검출된 하나 이상의 상품을 기 설정된 복수의 프레임 동안 추적하여 그 결과에 따라 검출된 상품에 대한 카운팅 결과를 출력할 수 있다. 이에, 본 발명은 영상 내 설정된 관심영역에 상품이 위치하지 않거나 또는 관심영역에 짧은 시간 동안 상품이 포함되는 경우에 이러한 상품을 카운팅하지 않음으로써, 계산대 상에 놓여진 상품에 대한 정확한 검출 및 카운 팅이 가능하여 자동계산대 시스템의 효율성 및 정확성을 높일 수 있다. 이상에서 설명된 본 발명의 블록도의 각 블록과 순서도의 각 단계의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수행될 수도 있다. 이들 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 인코딩 프로세서에 탑재될 수 있으므로, 컴퓨터 또는 기타 프로그램 가능한 데 이터 프로세싱 장비의 인코딩 프로세서를 통해 수행되는 그 인스트럭션들이 블록도의 각 블록 또는 순서도의 각 단계에서 설명된 기능들을 수행하는 수단을 생성하게 된다. 이들 컴퓨터 프로그램 인스트럭션들은 특정 방법으 로 기능을 구현하기 위해 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 지향할 수 있는 컴퓨터 이 용 가능 또는 컴퓨터 판독 가능 메모리에 저장되는 것도 가능하므로, 그 컴퓨터 이용가능 또는 컴퓨터 판독 가 능 메모리에 저장된 인스트럭션들은 블록도의 각 블록 또는 순서도 각 단계에서 설명된 기능을 수행하는 인스트 럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭션들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에 탑재되는 것도 가능하므로, 컴퓨터 또는 기타 프로그램 가능한 데 이터 프로세싱 장비 상에서 일련의 동작 단계들이 수행되어 컴퓨터로 실행되는 프로세스를 생성해서 컴퓨터 또 는 기타 프로그램 가능한 데이터 프로세싱 장비를 수행하는 인스트럭션들은 블록도의 각 블록 및 순서도의 각 단계에서 설명된 기능들을 실행하기 위한 단계들을 제공하는 것도 가능하다. 또한, 각 블록 또는 각 단계는 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션들 을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 또, 몇 가지 대체 실시예들에서는 블록들 또 는 단계들에서 언급된 기능들이 순서를 벗어나서 발생하는 것도 가능함을 주목해야 한다. 예컨대, 잇달아 도시 되어 있는 두 개의 블록들 또는 단계들은 사실 실질적으로 동시에 수행되는 것도 가능하고 또는 그 블록들 또는 단계들이 때때로 해당하는 기능에 따라 역순으로 수행되는 것도 가능하다. 이상의 설명은 본 발명의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 발명이 속하는 기술 분야에 서 통상의 지식을 가진 자라면 본 발명의 본질적인 품질에서 벗어나지 않는 범위에서 다양한 수정 및 변형이 가 능할 것이다. 따라서, 본 발명에 개시된 실시예들은 본 발명의 기술 사상을 한정하기 위한 것이 아니라 설명하 기 위한 것이고, 이러한 실시예에 의하여 본 발명의 기술 사상의 범위가 한정되는 것은 아니다. 본 발명의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 균등한 범위 내에 있는 모든 기술사상은 본 발명의 권 리범위에 포함되는 것으로 해석되어야 할 것이다. 부호의 설명100: 상품 검출장치 110: 입출력부 120: 프로세서 130: 메모리 141: 영상 전처리부 143: 상품 검출부 145: 상품 추적부 147: 상품 카운팅부"}
{"patent_id": "10-2023-0135771", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 실시예에 따른 상품 검출장치를 나타내는 도면이다. 도 2는 도 1의 상품 검출 프로그램의 기능을 개념적으로 나타내는 도면이다. 도 3은 도 2의 상품검출부의 검출모델을 학습시키는 방법을 나타내는 도면이다. 도 4는 본 발명의 실시예에 따른 상품 검출방법을 나타내는 도면이다. 도 5는 도 4의 영상을 전처리하는 방법에 대한 실시예를 나타내는 도면이다. 도 6은 도 4의 상품을 추적하는 방법을 나타내는 도면이다. 도 7은 도 6의 상품을 추적하는 방법에 대한 실시예를 나타내는 도면이다."}
