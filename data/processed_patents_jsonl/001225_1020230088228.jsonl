{"patent_id": "10-2023-0088228", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0080096", "출원번호": "10-2023-0088228", "발명의 명칭": "대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원", "출원인": "한국전자통신연구원", "발명자": "한진호"}}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "복수의 프로세서 코어들 및 복수의 캐시들을 포함하는 인공지능 프로세서가, 상기 복수의 캐시들마다 서로 중첩되지 않는 외부 메모리 주소 영역을 설정하는 단계; 및상기 복수의 프로세서 코어들이 상기 복수의 캐시들에 접근하기 위한 가상주소를 제공하는 단계를 포함하는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서,상기 설정하는 단계는 상기 복수의 프로세서 코어들에서 실행되는 프로그램 및 상기 복수의 프로세서 코어들과 상기 복수의 캐시들 간의 접근 거리를 고려하여 상기 외부 메모리 주소 영역을 설정하는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 2에 있어서,상기 설정하는 단계는상기 복수의 프로세서 코어들마다 상기 접근 거리가 최소인 캐시에 상기 프로그램의 실행을 위한 데이터가 저장되도록 상기 외부 메모리 주소 영역을 설정하는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "청구항 3에 있어서,상기 설정하는 단계는 상기 복수의 프로세서 코어들과 상기 복수의 캐시들 사이에 존재하는 버스에서 상기 복수의 캐시들에 대한 메모리 맵 정보를 기반으로 상기 외부 메모리 주소 영역을 설정하는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "청구항 2에 있어서,상기 인공지능 프로세서가, 상기 복수의 프로세서 코어들에서 실행되는 프로그램을 감지하는 단계를 더 포함하는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "청구항 1에 있어서,상기 가상주소는상기 복수의 프로세서 코어들이 동일한 데이터에 동시 접근 가능하도록 독점주소에 상응하게 제공되는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "청구항 4에 있어서,공개특허 10-2024-0080096-3-상기 버스는 상기 인공지능 프로세서의 시스템 컨트롤러에 의해 설정 가능한 TBL(TABLE LOOKASIDE BUFFER)을 기반으로 상기복수의 캐시들에 상응하는 물리 주소와 상기 가상주소 사이의 매핑 정보를 획득하고, 상기 매핑 정보를 고려하여 상기 복수의 프로세서 코어들에게 상기 가상주소를 제공하는 것을 특징으로 하는 가상주소 기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "청구항 1에 있어서,상기 외부 메모리 주소 영역은상기 인공지능 프로세서의 외부에 위치하는 HBM 메모리의 주소 영역에 상응하는 것을 특징으로 하는 가상주소기반의 캐시 코헤런시 지원 방법."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "에 있어서,상기 가상주소는상기 복수의 프로세서 코어들이 동일한 데이터에 동시 접근 가능하도록 독점주소에 상응하게 제공되는 것을 특징으로 하는 인공지능 프로세서."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "청구항 10에 있어서,상기 버스는상기 복수의 프로세서 코어들에서 실행되는 프로그램 및 상기 복수의 프로세서 코어들과 상기 복수의 캐시들 간의 접근 거리를 고려하여 상기 외부 메모리 주소 영역을 설정하는 것을 특징으로 하는 인공지능 프로세서."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "청구항 10에 있어서,상기 버스는상기 복수의 프로세서 코어들마다 상기 접근 거리가 최소인 캐시에 상기 프로그램의 실행을 위한 데이터가 저장되도록 상기 외부 메모리 주소 영역을 설정하는 것을 특징으로 하는 인공지능 프로세서."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "청구항 11에 있어서,상기 버스는상기 복수의 프로세서 코어들과 상기 복수의 캐시들 사이에 존재하는 버스에서 상기 복수의 캐시들에 대한 메모리 맵 정보를 기반으로 상기 외부 메모리 주소 영역을 설정하는 것을 특징으로 하는 인공지능 프로세서."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "청구항 10에 있어서,상기 버스는상기 복수의 프로세서 코어들에서 실행되는 프로그램을 감지하는 것을 특징으로 하는 인공지능 프로세서.공개특허 10-2024-0080096-4-청구항 14"}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "청구항 12에 있어서,상기 버스는상기 시스템 컨트롤러에 의해 설정 가능한 TBL(TABLE LOOKASIDE BUFFER)을 기반으로 상기 복수의 캐시들에 상응하는 물리 주소와 상기 가상주소 사이의 매핑 정보를 획득하고, 상기 매핑 정보를 고려하여 상기 복수의 프로세서 코어들에게 상기 가상주소를 제공하는 것을 특징으로 하는 인공지능 프로세서."}
{"patent_id": "10-2023-0088228", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "청구항 9에 있어서,상기 외부 메모리 주소 영역은상기 인공지능 프로세서의 외부에 위치하는 HBM 메모리의 주소 영역에 상응하는 것을 특징으로 하는 인공지능프로세서."}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법 및 이를 위한 장치가 개시된다. 본 발명의 일실시예에 따른 캐시 코헤런시 지원 방법은 복수의 프로세서 코어들 및 복수의 캐 시들을 포함하는 인공지능 프로세서가, 상기 복수의 캐시들마다 서로 중첩되지 않는 외부 메모리 주소 영역을 설 정하는 단계; 및 상기 복수의 프로세서 코어들이 상기 복수의 캐시들에 접근하기 위한 가상주소를 제공하는 단계 를 포함한다."}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 기술에 관한 것으로, 특히 대용량 온칩 메모리를 갖는 인공지능 프로세서를 구성하는 프로세서 코어와 함께 집적되는 캐시에서의 캐시 코헤런시 및 가상주소 지원 구조에 관한 것이다."}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근에는 고성능 인공지능 프로세서의 요구로 도 1에 도시된 것처럼 하나의 Die 내에 많은 프로세서 코어(ANC) 를 집적하게 되었고, 각각의 프로세서 코어를 위한 캐시(Cache)도 프로세서 코어만큼 장착하게 된다. 이 때, 많 은 프로세서 코어들이 다른 데이터에 대해 동일한 인스트럭션(Instruction) 구성으로 처리를 하는 경우가 많아 진다. 또한, 기존 디렉토리(Directory) 방식의 캐시 코헤런시(Cache Coherency) 설계로는 많은 캐시에 대한 캐시 코헤 런시(Cache Coherency)를 유지하기에 너무 많은 성능저하를 일으킬 수 있다. 따라서, 많은 캐시들 간의 캐시 코헤런시를 유지하기 위한 새로운 방안이 필요하다. 선행기술문헌 특허문헌 (특허문헌 0001) 한국 공개 특허 제10-2015-0050786호, 2015년 5월 11일 공개(명칭: 코어와 주변 코어 간의 캐 시 관리 방법)"}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은 대용량 온칩 메모리를 갖는 인공지능 프로세서에서 많은 캐시들 간의 캐시 코헤런시를 유지할 수 있는 방법을 제공하는 것이다. 또한, 본 발명의 목적은 많은 프로세서 코어들이 다른 데이터에 대해 동일한 인스트럭션(Instruction) 구성으로 처리할 수 있도록 하는 가상주소 지원 구조를 제공하는 것이다. 또한, 본 발명의 목적은 수많은 프로세서 코어들에서 수행되는 소프트웨어를 빠르게 호출(invoking)하는 하는 것이다."}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기한 목적을 달성하기 위한 본 발명에 따른 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법은 복수의 프로세서 코어들 및 복수의 캐시들을 포함하는 인공지능 프로세서가, 상기 복수의 캐시들마다 서로 중첩되지 않는 외부 메모리 주소 영역을 설정하는 단계; 및 상기 복수의 프로세서 코어들이 상기 복수의 캐시들에 접근하기 위한 가상주소를 제공하는 단계를 포함한다. 이 때, 설정하는 단계는 상기 복수의 프로세서 코어들에서 실행되는 프로그램 및 상기 복수의 프로세서 코어들 과 상기 복수의 캐시들 간의 접근 거리를 고려하여 상기 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 설정하는 단계는 상기 복수의 프로세서 코어들마다 상기 접근 거리가 최소인 캐시에 상기 프로그램의 실 행을 위한 데이터가 저장되도록 상기 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 설정하는 단계는 상기 복수의 프로세서 코어들과 상기 복수의 캐시들 사이에 존재하는 버스에서 상기 복 수의 캐시들에 대한 메모리 맵 정보를 기반으로 상기 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 인공지능 프로세서가, 상기 복수의 프로세서 코어들에서 실행되는 프로그램을 감지하는 단계를 더 포함 할 수 있다. 이 때, 가상주소는 상기 복수의 프로세서 코어들이 동일한 데이터에 동시 접근 가능하도록 독점주소에 상응하게 제공될 수 있다. 이 때, 버스는 상기 인공지능 프로세서의 시스템 컨트롤러에 의해 설정 가능한 TBL(TABLE LOOKASIDE BUFFER)을 기반으로 상기 복수의 캐시들에 상응하는 물리 주소와 상기 가상주소 사이의 매핑 정보를 획득하고, 상기 매핑 정보를 고려하여 상기 복수의 프로세서 코어들에게 상기 가상주소를 제공할 수 있다. 이 때, 외부 메모리 주소 영역은 상기 인공지능 프로세서의 외부에 위치하는 HBM 메모리의 주소 영역에 상응할 수 있다. 또한, 본 발명의 일실시예에 따른 인공지능 프로세서는 복수의 프로세서 코어들; 상기 복수의 프로세서 코어들 에 상응하는 복수의 캐시들; 시스템 컨트롤러(SCP); 및 상기 복수의 프로세서 코어들과 상기 복수의 캐시들 사 이에 위치하는 버스를 포함하고, 상기 버스는 상기 복수의 캐시들마다 서로 중첩되지 않는 외부 메모리 주소 영 역을 설정하고, 상기 복수의 프로세서 코어들이 상기 복수의 캐시들에 접근하기 위한 가상주소를 제공한다. 이 때, 버스는 상기 복수의 프로세서 코어들에서 실행되는 프로그램 및 상기 복수의 프로세서 코어들과 상기 복 수의 캐시들 간의 접근 거리를 고려하여 상기 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 버스는 상기 복수의 프로세서 코어들마다 상기 접근 거리가 최소인 캐시에 상기 프로그램의 실행을 위한 데이터가 저장되도록 상기 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 버스는 상기 복수의 프로세서 코어들과 상기 복수의 캐시들 사이에 존재하는 버스에서 상기 복수의 캐시 들에 대한 메모리 맵 정보를 기반으로 상기 외부 메모리 주소 영역을 설정 이 때, 버스는 상기 복수의 프로세서 코어들에서 실행되는 프로그램을 감지할 수 있다. 이 때, 가상주소는 상기 복수의 프로세서 코어들이 동일한 데이터에 동시 접근 가능하도록 독점주소에 상응하게 제공될 수 있다. 이 때, 버스는 상기 시스템 컨트롤러에 의해 설정 가능한 TBL(TABLE LOOKASIDE BUFFER)을 기반으로 상기 복수의 캐시들에 상응하는 물리 주소와 상기 가상주소 사이의 매핑 정보를 획득하고, 상기 매핑 정보를 고려하여 상기 복수의 프로세서 코어들에게 상기 가상주소를 제공할 수 있다. 이 때, 외부 메모리 주소 영역은 상기 인공지능 프로세서의 외부에 위치하는 HBM 메모리의 주소 영역에 상응할 수 있다."}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면, 대용량 온칩 메모리를 갖는 인공지능 프로세서에서 많은 캐시들 간의 캐시 코헤런시를 유지 할 수 있는 방법을 제공할 수 있다. 또한, 본 발명은 많은 프로세서 코어들이 다른 데이터에 대해 동일한 인스트럭션(Instruction) 구성으로 처리할 수 있도록 하는 가상주소 지원 구조를 제공할 수 있다. 또한, 본 발명은 수많은 프로세서 코어들에서 수행되는 소프트웨어를 빠르게 호출(invoking)할 수 있다."}
{"patent_id": "10-2023-0088228", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명을 첨부된 도면을 참조하여 상세히 설명하면 다음과 같다. 여기서, 반복되는 설명, 본 발명의 요지를 불 필요하게 흐릴 수 있는 공지 기능, 및 구성에 대한 상세한 설명은 생략한다. 본 발명의 실시형태는 당 업계에서 평균적인 지식을 가진 자에게 본 발명을 보다 완전하게 설명하기 위해서 제공되는 것이다. 따라서, 도면에서의 요소들의 형상 및 크기 등은 보다 명확한 설명을 위해 과장될 수 있다. 본 문서에서, \"A 또는 B\", \"A 및 B 중 적어도 하나\", \"A 또는 B 중 적어도 하나\", \"A, B 또는 C\", \"A, B 및 C 중 적어도 하나\", 및 \"A, B, 또는 C 중 적어도 하나\"와 같은 문구들 각각은 그 문구들 중 해당하는 문구에 함께 나열된 항목들 중 어느 하나, 또는 그들의 모든 가능한 조합을 포함할 수 있다. 이하, 본 발명에 따른 바람직한 실시예를 첨부된 도면을 참조하여 상세하게 설명한다. 도 2는 본 발명의 일실시예에 따른 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법을 나타낸 동작 흐름도이다. 도 2를 참조하면, 본 발명의 일실시예에 따른 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법은, 복수의 프로세서 코어들 및 복수의 캐시들을 포함하는 인공지능 프로세서가, 복수의 캐시들마다 서로 중첩되지 않는 외부 메모리 주소 영역을 설정한다(S210). 이 때, 외부 메모리 주소 영역은 인공지능 프로세서의 외부에 위치하는 HBM 메모리의 주소 영역에 상응할 수 있 다. 예를 들어, HBM Memory Pseudo Channel 영역에 상응할 수 있다. 이 때, 본 발명의 일실시예에 따른 인공지능 프로세서는 복수개의 프로세서 코어들과 복수개의 캐시들, 시스템 컨트롤러 그리고 복수개의 프로세서 코어들과 복수개의 캐시들 사이에 위치하는 버스로 구성될 수 있다. 따라서, 각각의 프로세서 코어들과 연결된 캐시는 외부 메모리 주소 영역 중 특정한 Pseudo Channel 영역만을 저장함으로써, 인공지능 프로세서 칩 내부에는 HBM Memory에 저장되어 있는 copy가 1개만 존재하도록 구성할 수 있다. 즉, 캐시 내에는 오직 하나의 copy만을 저장함으로써, 인공지능 프로세서 내 모든 캐시를 하나의 레벨로 구성할 수 있다. 이렇게 서로 중첩되지 않는 HBM Memory 영역을 각각의 캐시에 저장함으로써 캐시 코헤런시 매 커니즘(Cache Coherency Mechanism)을 자연스럽게 지원할 수 있으며 이를 처리하기 위한 성능저하도 방지할 수 있다. 이 때, 복수의 프로세서 코어들에서 실행되는 프로그램 및 복수의 프로세서 코어들과 복수의 캐시들 간의 접근 거리를 고려하여 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 복수의 프로세서 코어들마다 접근 거리가 최소인 캐시에 프로그램의 실행을 위한 데이터가 저장되도록 외부 메모리 주소 영역을 설정할 수 있다. 따라서, 본 발명에 따른 프로세서 코어는 자신에게 가장 가까운 캐시로 접근하여 프로그램의 실행을 위한 데이 터를 사용할 수 있다. 예를 들어, 복수의 프로세서 코어들은 자신에게 가까운 캐시(= 접근 거리가 짧은 캐시)에 접근하기도하고, 자신 에게 먼 캐시(=접근 거리가 긴 캐시)에 접근하기도 하여 필요한 주소에 저장되어 있는 데이터를 읽고 쓸 수 있 다. 이 때, 복수의 프로세서 코어들과 복수의 캐시들 사이에 존재하는 버스에서 복수의 캐시들에 대한 메모리 맵 정 보를 기반으로 외부 메모리 주소 영역을 설정할 수 있다. 예를 들어, 본 발명의 일실시예에 따른 버스는 각각의 캐시가 저장하는 HBM Memory 영역의 설정이 가능하고, 이 렇게 설정된 영역은 Configurable Memory Map 정보에 상응하는 형태로 버스에서 관리될 수 있다. 또한, 도 2에는 도시하지 아니하였으나, 본 발명의 일실시예에 따른 대용량 온칩 메모리를 갖는 인공지능 프로 세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법은, 인공지능 프로세서가, 상기 복수의 프로세서 코어들 에서 실행되는 프로그램을 감지한다. 또한, 본 발명의 일실시예에 따른 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법은, 복수의 프로세서 코어들 및 복수의 캐시들을 포함하는 인공지능 프로세서가, 복수의 프 로세서 코어들이 복수의 캐시들에 접근하기 위한 가상주소를 제공할 수 있다. 이 때, 가상주소는 복수의 프로세서 코어들이 동일한 데이터에 동시 접근 가능하도록 독점주소에 상응하게 제공 될 수 있다. 이 때, 버스는 인공지능 프로세서의 시스템 컨트롤러에 의해 설정 가능한 TBL(TABLE LOOKASIDE BUFFER)을 기반 으로 복수의 캐시들에 상응하는 물리 주소와 가상주소 사이의 매핑 정보를 획득하고, 매핑 정보를 고려하여 복 수의 프로세서 코어들에게 가상주소를 제공할 수 있다. 예를 들어, 본 발명의 일실시예에 따른 인공지능 프로세서 내 버스는 시스템 컨트롤러에 의해서 설정이 가능한 Table Lookaside Buffer(TLB)를 프로세서 코어와 캐시 사이에 두고, Table Lookaside Buffer(TLB)를 통해 시스 템 컨트롤러가 설정하는 가상 주소에서 물리 주소로의 매핑 정보를 획득할 수 있다. 예를 들어, 도 5에 도시된 것처럼, 프로세서 코어(ANCx) 별 가상 주소(VAx)와 캐시의 물리 주소(PAx) 간의 매핑 정보를 획득할 수 있다. 이 때, 각각의 Table Lookaside Buffer(TLB)에 의해 변환되는 물리 주소 영역은 서로 독점(Exclusive) 관계일 수 있다. 이와 같은 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법을 통해 대용량 온칩 메모리를 갖는 인공지능 프로세서에서 많은 캐시들 간의 캐시 코헤런시를 유지할 수 있는 방 법을 제공할 수 있다. 또한, 많은 프로세서 코어들이 다른 데이터에 대해 동일한 인스트럭션(Instruction) 구성으로 처리할 수 있도록 하는 가상주소 지원 구조를 제공할 수 있다. 또한, 수많은 프로세서 코어들에서 수행되는 소프트웨어를 빠르게 호출(invoking)할 수 있다. 도 3 및 도 4는 본 발명에 따른 캐시 코헤런시 및 가상주소 지원을 위한 인공지능 프로세서 구조의 일 예를 나 타낸 도면이다. 먼저, 도 3을 참조하면, 본 발명에 따른 캐시 코헤런시 및 가상주소 지원을 위한 인공지능 프로세서는 복수의 프로세서 코어들(320-1~320-3)과 복수의 캐시들(300-1~300-3), 시스템 컨트롤러 그리고 복수개의 프로세서 코어들과 복수개의 캐시들 사이에 위치하는 버스로 구성될 수 있다. 이 때, 도 3에서는 3개의 프로세서 코어들과 3개의 캐시들로 구성된 구조를 도시하였으나, 실제로는 더 많은 프 로세서 코어들과 캐시들을 포함할 수 있다. 버스는 복수의 프로세서 코어들(320-1~320-3)과 복수의 캐시들(300-1~300-3) 사이에 위치할 수 있다. 이하에서는 버스를 통한 가상주소 기반의 캐시 코헤런시 지원 과정을 상세히 설명하도록 한다. 버스는 복수의 캐시들마다 서로 중첩되지 않는 외부 메모리 주소 영역을 설정한다. 이 때, 외부 메모리 주소 영역은 인공지능 프로세서의 외부에 위치하는 HBM 메모리의 주소 영역에 상응할 수 있 다. 예를 들어, HBM Memory Pseudo Channel 영역에 상응할 수 있다. 도 3에서는 HBM Memory Pseudo Channel Controller(PCx)(340-1~340-3)에 상응하게 나타내었다. 따라서, 각각의 프로세서 코어들과 연결된 캐시는 외부 메모리 주소 영역 중 특정한 Pseudo Channel 영역만을 저장함으로써, 인공지능 프로세서 칩 내부에는 HBM Memory에 저장되어 있는 copy가 1개만 존재하도록 구성할 수 있다. 즉, 캐시 내에는 오직 하나의 copy만을 저장함으로써, 인공지능 프로세서 내 모든 캐시를 하나의 레벨로 구성할 수 있다. 이렇게 서로 중첩되지 않는 HBM Memory 영역을 각각의 캐시에 저장함으로써 캐시 코헤런시 매 커니즘(Cache Coherency Mechanism)을 자연스럽게 지원할 수 있으며 이를 처리하기 위한 성능저하도 방지할 수 있다. 이 때, 복수의 프로세서 코어들에서 실행되는 프로그램 및 복수의 프로세서 코어들과 복수의 캐시들 간의 접근 거리를 고려하여 외부 메모리 주소 영역을 설정할 수 있다. 이 때, 복수의 프로세서 코어들마다 접근 거리가 최소인 캐시에 프로그램의 실행을 위한 데이터가 저장되도록 외부 메모리 주소 영역을 설정할 수 있다. 따라서, 본 발명에 따른 프로세서 코어는 자신에게 가장 가까운 캐시로 접근하여 프로그램의 실행을 위한 데이 터를 사용할 수 있다. 예를 들어, 복수의 프로세서 코어들은 자신에게 가까운 캐시(= 접근 거리가 짧은 캐시)에 접근하기도하고, 자신 에게 먼 캐시(=접근 거리가 긴 캐시)에 접근하기도 하여 필요한 주소에 저장되어 있는 데이터를 읽고 쓸 수 있 다. 이 때, 복수의 프로세서 코어들과 복수의 캐시들 사이에 존재하는 버스에서 복수의 캐시들에 대한 메모리 맵 정 보를 기반으로 외부 메모리 주소 영역을 설정할 수 있다. 예를 들어, 본 발명의 일실시예에 따른 버스는 각각의 캐시가 저장하는 HBM Memory 영역의 설정이 가능하고, 이 렇게 설정된 영역은 Configurable Memory Map 정보에 상응하는 형태로 버스에서 관리될 수 있다. 또한, 버스는 상기 복수의 프로세서 코어들에서 실행되는 프로그램을 감지한다. 또한, 버스는 복수의 프로세서 코어들이 복수의 캐시들에 접근하기 위한 가상주소를 제공할 수 있다. 이 때, 가상주소는 복수의 프로세서 코어들이 동일한 데이터에 동시 접근 가능하도록 독점주소에 상응하게 제공 될 수 있다. 이 때, 버스는 인공지능 프로세서의 시스템 컨트롤러에 의해 설정 가능한 TBL(TABLE LOOKASIDE BUFFER)을 기반 으로 복수의 캐시들에 상응하는 물리 주소와 가상주소 사이의 매핑 정보를 획득하고, 매핑 정보를 고려하여 복 수의 프로세서 코어들에게 가상주소를 제공할 수 있다. 예를 들어, 도 4를 참조하면, 본 발명의 일실시예에 따른 인공지능 프로세서 내 버스는 시스템 컨트롤러에 의해서 설정이 가능한 Table Lookaside Buffer(TLB)(410~430)를 프로세서 코어와 캐시 사이에 두고, Table Lookaside Buffer(TLB)를 통해 시스템 컨트롤러가 설정하는 가상 주소에서 물리 주소로의 매핑 정보를 획득할 수 있다. 예를 들어, 도 5에 도시된 것처럼, 프로세서 코어(ANCx) 별 가상 주소(VAx)와 캐시의 물리 주소(PAx) 간의 매핑 정보를 획득할 수 있다. 이 때, 각각의 Table Lookaside Buffer(TLB)에 의해 변환되는 물리 주소 영역은 서로 독점(Exclusive) 관계일 수 있다. 이와 같은 인공지능 프로세서를 통해 대용량 온칩 메모리를 갖는 인공지능 프로세서에서 많은 캐시들 간의 캐시 코헤런시를 유지할 수 있는 방법을 제공할 수 있다. 또한, 많은 프로세서 코어들이 다른 데이터에 대해 동일한 인스트럭션(Instruction) 구성으로 처리할 수 있도록 하는 가상주소 지원 구조를 제공할 수 있다.또한, 수많은 프로세서 코어들에서 수행되는 소프트웨어를 빠르게 호출(invoking)할 수 있다. 이상에서와 같이 본 발명에 따른 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법 및 이를 위한 장치는 상기한 바와 같이 설명된 실시예들의 구성과 방법이 한정되게 적용될 수 있는 것이 아니라, 상기 실시예들은 다양한 변형이 이루어질 수 있도록 각 실시예들의 전부 또는 일부가 선 택적으로 조합되어 구성될 수도 있다."}
{"patent_id": "10-2023-0088228", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 128개의 프로세서 코어로 구성된 인공지능 프로세서의 구조를 나타낸 도면이다. 도 2는 본 발명의 일실시예에 따른 대용량 온칩 메모리를 갖는 인공지능 프로세서를 위한 가상주소 기반의 캐시 코헤런시 지원 방법을 나타낸 동작 흐름도이다. 도 3 및 도 4는 본 발명에 따른 캐시 코헤런시 및 가상주소 지원을 위한 인공지능 프로세서 구조의 일 예를 나 타낸 도면이다. 도 5는 본 발명에 따른 가상주소 지원을 위한 매핑 과정의 일 예를 나타낸 도면이다."}
