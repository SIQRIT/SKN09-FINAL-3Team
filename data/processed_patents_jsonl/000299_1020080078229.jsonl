{"patent_id": "10-2008-0078229", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2009-0018770", "출원번호": "10-2008-0078229", "출원인": "이문기", "발명자": "이문기"}}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "두 지점의 상대 위치를 측정하는 3차원 위치 측정장치에 있어서, 정해진 형태와 크기의 마크를 포함하는 가상 사각형 마크부; 상기 가상 사각형 마크를 촬영하는 이미지 센서를 이용한 카메라를 포함하는 카메라부; 상기 카메라에 의해 촬영된 마크의 영상을 처리하여 카메라와 마크의 상대 위치와 방향을 산출하는 영상처리부를 포함하는 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치."}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "1항에서가상 사각형 마크부는 사각형을 표시하는 다수의 선분 형태의 마크를 포함하고;카메라부는 상기 선분 형태의 마크를 촬영하는 카메라를 포함하고영상처리부는 상기 카메라에서 촬영된 영상에서 선분 형태의 마크를 추출하여 그 선분을 지나는 직선의 교점을꼭지점으로 하는 사각형의 크기와 형태를 분석하여 카메라와 사각형 사이의 3차원 위치를 산출하는 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "2항에서마크부는 제1 수직선 선분 V1과 제1 사선 선분 S1를 포함하는 왼쪽 V자형 마크와 제2 수직선 선분 V2와 제2 사선 선분 S2를 포함하는 오른쪽 V자형 마크를 포함하고S1,V1 의 교점은 사각형의 왼쪽 위 꼭지점P1 이고,V2,S2 의 교점은 사각형의 오른쪽 위 꼭지점 P2 이고, V1,S2 의 교점은 사각형의 왼쪽 아래 꼭지점P3이고, S1,V2 의 교점은 사각형의 오른쪽 아래 꼭지점P4 인것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "2항에서 마크부는 제1 수직선 선분 VL1과 제1 수평선 선분 HL1를 포함하는 왼쪽 직각 삼각형 마크와 제2 수직선 선분 VL2와 제2 수평선 선분 HL2를 포함하는 오른쪽 직각 삼각형 마크를 포함하고HL1,VL1 의 교점은 사각형의 왼쪽 아래 꼭지점R1 이고,HL2,VL2 의 교점은 사각형의 오른쪽 아래 꼭지점 R2 이고, HL1,VL1가 이루는 직각 삼각형의 빗변을 지나는 직선과 VL2를 지나는 직선의 교점은 사각형의 오른쪽 위 꼭지점R4이고, HL2,VL2가 이루는 직각 삼각형의 빗변을 지나는 직선과 VL1를 지나는 직선의 교점은 사각형의 왼쪽 위꼭지점R3 인것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "4항에서 마크부의 직각 삼각형은 직각 삼각형의 빗변의 중심 영역은 선분이 지워지고 직각이 아닌 꼭지점 쪽으로 빗변이 연장된 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치- 2 -공개특허 10-2009-0018770청구항 6 상기1항 내지 5항 중 한 항에 있어서 선분 형태의 마크는 선 형태의 광원인 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "상기6 항에 있어서 광원은 적외선 광원이고 카메라부는 렌즈 전후에 부착되어 적외선만 통과시키는 필터를 포함하는 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "상기1항 내지 5항 중 한 항에 있어서 선분 형태의 마크는 마크의 배경과 구분되는 색인 것을 특징으로하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "상기1항 내지 5항 중 한 항에 있어서 선분 형태의 마크는 재귀 반사 필름이고 카메라부는 촬영 방향으로 빛을 조사하는 광원을 포함하여 영상을 촬영하는 것을 특징으로 하는 카메라와 가상사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "상기9 항에 있어서 광원은 적외선 광원이고 카메라부는 촬영 방향으로 적외선을 조사하는 적외선 광원과렌즈 전후에 부착되어 적외선만 통과시키는 필터를 포함하는 것을 특징으로 하는 카메라와 가상 사각형 마크를이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "상기1항 내지 5항 중 한 항에 있어서 선분 형태의 마크는 편광을 반사 또는 방사하는 재질이고 카메라부는 편광인 물체만 밝게 촬영하는 편광 이미지 센서를 포함하여 편광 영상을 촬영하는 것을 특징으로하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "상기1항 내지 5항 중 한 항에 있어서 선분 형태의 마크는 레이저 1자 빔인 것을 특징으로 하는 카메라와 가상사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "상기12 항에 있어서 레이저는 적외선 레이저이고 카메라부는 렌즈 전후에 부착되어 적외선만 통과시키는 필터를 포함하는 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치"}
{"patent_id": "10-2008-0078229", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "상기 12항 내지 13항 중 어느 한 항에서 레이저 1자 빔은 레이저 빔을 원통형 렌즈를 통과시켜 생성되는 것을 특징으로 하는 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치명 세 서발명의 상세한 설명 기 술 분 야- 3 -공개특허 10-2009-0018770본 발명은 카메라로 미리 정한 마크를 촬영하여 그 영상을 인식하여 카메라와 마크 사이의 거리와 방향을 산출 <1>하는 3차원 거리 측정 장치에 관한 것이다. 이러한 거리 측정 기술은 청소 로봇의 위치 인식장치에 응용될 수있다. 예를 들면 천정에 특정 마크를 부착하고 바닥을 이동하는 청소로봇에 부착된 카메라로 이 마크를 인식하여 로봇의 현재 위치를 산출하는 것이다. 또한 모니터에 부착된 마크를 리모컨과 같이 손에 든 카메라로 움직이며 촬영하여 조이스틱과 같은 포인팅 작업을 할 수 있다. 배 경 기 술카메라를 사용한 기존의 3차원 위치 측정 장치에는 사람의 두 눈처럼 서로 다른 위치에서 동일 방향을 향하도 <2>록 배치된 두 개의 스테레오 카메라를 사용하는 방법이 있다. 이는 사람의 두 눈으로 한 물체를 응시할 때 두눈의 시선의 각도 정보로 물체와 눈 사이의 상대위치를 알아내는 삼각 측량방식이다. 이 삼각 측량 방식의 단점은 반드시 두 개 이상의 카메라를 사용해야 한다는 점이다.이에 비해 카메라를 하나만 사용한 기술로는 본 발명의 발명인의 기존의 특허 10-0532525-0000호 '카메라를 이 <3>용한 3차원 포인팅 장치' 가 있다. 이 특허는 하나의 카메라와 사각형 마크를 사용해서 카메라와 사각형 사이의 3차원 상대 위치와 방향을 산출하여 포인팅 작업에 응용하고 있다. 발명의 내용 해결 하고자하는 과제본 발명의 목적은 상기한 기존 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치' 기술이 사각형 <4>마크를 검출하기 위해서 반드시 사각형의 네 변에 모두 광원을 부착해야 한다는 단점을 해결할 수 있는 부피를적게 차지하고 임의의 크기의 모니터에 설치가 용이하고 미관상 보기 좋은 가상 사각형 마크를 사용한 3차원거리 측정 장치와 포인팅 장치를 제공함을 목적으로 한다. 여기서 3차원 거리가 산출되면 그 값은 약간의 좌표변환을 거치면 3차원 포인팅 작업에 그대로 사용될 수 있으므로 3차원 포인팅 장치는 3차원 거리 측정 장치의특수한 응용예이다. 즉 본 발명의 출원서에서 3차원 위치 측정 장치와 3차원 포인팅 장치를 구별하지 않는다.기존 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치'를 상품화 할 경우 기존의 다양한 크기의 <5>모니터에 맞게 광원모듈을 생산해야 한다. 여기서 광원 모듈은 도1에 표시된 것과 같이 모니터 크기에 맞게 도너츠 모양으로 가운데가 뚫린 사각형 모양의 액자의 테두리에 광원을 부착해서 착탈식으로 만든 것을 뜻한다.이와 같은 사각형의 광원 모듈을 모니터에 부착해서 3차원 포인팅 작업을 하는 경우 사용자는 본인의 모니터크기에 맞는 광원 모듈만 사용 가능하기 때문에 모니터를 크기가 다른 것으로 바꾸면 광원 모듈도 모니터 크기에 맞는 크기로 새로 구입해야 하거나 기존 광원 모듈을 개조 해야 한다. 광원 모듈의 사각형의 각 변을 안테나와 같이 크기를 변화시킬 수 있게 제조한다면 새로 구입할 필요가 없지만 안테나 형태의 구조를 광원 모듈에부여하기 위해서는 제조 단가가 올라간다는 단점이 있다. 또한 노트북 모니터와 같이 모니터 주위에 여백이 거의 없는 경우에는 상기 기존 특허의 광원 모듈을 부착하기가 매우 불편하다. 과제 해결수단본 발명은 상기한 목적을 달성하기 위하여 사각형을 표시하는 광원 모듈의 구성을 도2와 같이 가상 사 <6>각형 마크로 바꿔서 임의의 모니터에 손쉽게 부착할 수 있는 새로운 광원 모듈을 제공한다. 도2에서 모니터 윗변 좌 우측에 각각 V 자 형태의 마크(VML,VMR)가 부착되어있다. 이러한 마크가 부착된 모니터를 카메라로 촬영한 영상에서 영상 처리부는 마크를 추출하여 사각형 형태를 알아낼 수 있다. 그렇게 얻은 사각형의 찌그러진형태와 크기를 분석하면 카메라와 모니터 사이의 상대 위치와 회전 방향을 산출 할 수 있다. 그러한 분석 방법은 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치' 의 출원서에 소개되어있다. 또한 크기와 모양이 알려진 사각형을 촬영한 영상으로부터 그 사각형의 형태를 분석해서 카메라와 사각형 사이의 3차원 위치와 방향을 산출하는 것은 영상 처리 분야에서 perspective N point problem 으로 알려진 공지 기술이다. 구체적으로 http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/solving.htm 에 그에 대한 소개가 게시되어있다. V자 형태의 마크는 도3에 표시된 것과 같이 수직선 부분(V1,V2)과 사선 부분(S1,S2)으로 되어있다. 이와 같은 4개의 선 형태의 마크(V1,V2,S1,S2)를 검출하고 그 마크의 선을 연장하여 각각의 교점을 구하면 그 교점들이 모니터를 이루는 사각형의 꼭지점(P1,P2,P3,P4)이 된다. 구체적으로 S1,V1 의 교점은P1 이고, V2,S2 의 교점은 P2 이고, V1,S2 의 교점은 P3이고, S1,V2 의 교점은 P4 이다. 여기서 네 개의 선분형태의 마크(V1,V2,S1,S2)는 간접적으로 모니터의 사각형의 네 꼭지점을 나타내므로 이러한 네 개의 선분 마크- 4 -공개특허 10-2009-0018770를 가상 사각형 마크라고 한다. 효 과이러한 가상 사각형 마크는 모니터의 한 변에만 설치해도 충분하므로 임의의 크기의 모니터에 설치가 용이하고 <7>모니터를 가리는 영역이 적어서 외관상 눈에 거슬리는 것이 훨씬 덜 하다. 그리고 가상 사각형 마크는 그 형태가 매우 인공적인 V자 형태이므로 점 형태의 노이즈 광과 확연히 구분되어 노이즈 광이 있는 환경에서도 안정적으로 동작한다. 또한 가상 사각형 마크는 차지하는 부피가 적어서 가벼우므로 노트북 사용자의 경우 휴대와보관이 편리하다. 또한 가상 사각형 마크의 크기와 부피가 도1에 표시된 것과 같은 기존 기술에 의한 마크보다적으므로 제조 단가를 낮출 수 있다. 특히 근래에는 대형 모니터가 점차 개발되고 있는데 기존 기술에 의한도1과 같은 마크는 모니터 크기에 마크 모듈 크기가 비례하지만 본 발명에 의한 가상 사각형 마크는 모니터 크기에 거의 무관하게 일정한 크기를 유지할 수 있다. 발명의 실시를 위한 구체적인 내용본 발명은 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치에 관한 것이다. 본 발명에서 물리적인 사 <8>각형 마크 대신 그에 대응되는 가상 사각형 마크를 사용하는 이유는 가상 사각형 마크가 물리적인 사각형 마크보다 공간 절약형 이기 때문이다. 본 발명에 따른 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치는두 지점 사이의 상대 위치와 방향을 산출하는 장치로서, 한 지점에 위치한 크기와 모양이 정해진 가상 사각형마크 부, 다른 한 지점에 위치한 이미지 센서를 사용한 카메라를 포함하는 카메라부, 그리고 상기 카메라로 촬영한 상기 가상 사각형 마크의 영상을 분석해서 카메라와 가상 사각형 마크 사이의 3차원 상대 위치와 방향을산출하는 영상처리부를 포함하여 구성된다. 영상 처리부는 구체적으로 마이크로 콘트롤러나 DSP(digital signalprocessor)에서 실행되는 프로그램을 포함할 수 있다. 영상처리부에 적당한 인터페이스부를 추가로 포함하여 3차원 포인팅 장치를 구성할 수 있다. 이하 실시예 에서는 카메라로부터의 3차원 거리를 측정하고자 하는 물체로모니터를 선택하여 설명한다.실시예1 <9>도2에 표시된 것과 같은 V자 모양의 두 개의 마크(VML,VMR)를 다수의 적외선 LED를 선분 형태로 나열하여 구성 <10>하고 이를 촬영하는 카메라 앞에는 적외선만 통과시키는 필터(Ft)를 부착하면 V자 형태의 마크만 밝은 색으로촬영된다. 이렇게 촬영된 이미지의 예가 도4에 표시되어있다. 이러한 이미지에서 선분 검출을 한다. 선분 검출법은 이미지 프로세싱 분야에 여러 가지가 알려져 있다. 예를 들면 허프 변환이나 라플라스 변환 등이 있다. 이렇게 검출한 선들의 교점을 구하면 그 점들이 사각형의 꼭지점이 된다. 구체적으로 도3에서 S1,V1 의 교점은 P1이고, V2,S2 의 교점은 P2 이고, V1,S2 의 교점은 P3이고, S1,V2 의 교점은 P4 이다. 이때 V자 형태의 두 마크가 접하는 사각형의 한 변(P1,P2를 지나는 직선)이 사각형의 기준 변이된다. 기준변은 카메라가 도2에 표시된RT 와 같이 180도 회전한 상태인지 아닌지를 알아내는데 필요한 정보이다. 이에 비해 기존 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치'에서는 기준변을 표시하기 위하여 도1에 표시된 것과 같은 여분의광원(UM)을 부착했다. 즉 본 발명에 의한 마크를 사용하면 기준변은 여분의 마크 없이도 검출할 수 있다. 또한기존의 특허에 의한 광원은 다수의 점 광원 이므로 마크 주변에 형광등이나 햇빛 등에 의한 노이즈 광이 있는경우 그 광이 노이즈 인지 아니면 마크인지 구분하기가 매우 어렵지만 본 발명에 의한 V자 형태의 마크는 그 형태가 점 형태의 노이즈 광와 확연히 구분되므로 노이즈가 있는 환경에서도 안정적으로 동작한다. 실시예2 <11>상기 실시예1에서 사용한 적외선 LED로 된 V자 형태의 마크를 재귀반사 필름으로 구성할 수 있다. 이 경우 카메 <12>라에 촬영 방향을 향한 적외선 LED를 부착하여 V자 형태의 재귀반사 필름에 반사된 적외선을 적외선만 통과시키는 필터(Ft)가 렌즈 앞에 부착된 카메라로 촬영하면 상기 실시예1과 동일한 효과를 얻을 수 있다. 재귀반사 필름은 입사각과 반사각이 같은 필름으로 교통표지판 등에 상품화된 공지 기술이다.실시예3 <13>상기 실시예 2에서 사용한 재귀반사 필름 대신 편광필름으로 V자 형태의 마크를 구성할 수 있다. 이때 카메라는 <14>편광인 빛을 반사 또는 방사하는 물체만 밝게 촬영할 수 있는 편광 이미지 센서를 사용한 카메라를 사용한다.기존의 편광 이미지 센서는 미국특허(polarization sensitive solid state image sensor and associatedmethod,Pub.No:US 2005/0279921 A1)에 소개되어있다. 편광 이미지 센서를 사용하면 별도의 적외선 광원 없이 태양광이나 조명광 등의 자연광 상태에서도 마크만 밝게 촬영할 수 있다.- 5 -공개특허 10-2009-0018770실시예4 <15>노트북 모니터와 같이 모니터 주위에 여백이 거의 없는 경우에는 실시예2과 같은 v자 형태의 마크를 부착할 공 <16>간이 매우 부족하다. 여기서 여백이 작다는 것은 도3의 모니터 화면과 모니터 테두리 사이의 간격 dh, dw가 매우 작다는 뜻이다. 설사 무리하게 v자 형태의 마크를 부착하더라도 모니터 화면을 가리게 된다. 이 경우 레이저선 발생기를 사용하여 v자 형태의 마크를 구성할 수 있다. 레이저 선 발생기(LL)는 도5에 표시된 것과 같이 레이저 모듈(LA)에서 발사된 레이저빔(BM)을 원통형 렌즈(CY)에 통과시켜 빔을 1자 형태(LN)로 퍼지게 한 것이다.이 경우 사용자 눈에 V자 형태의 레이저 선이 보이지 않게 하기 위해서는 적외선 레이저를 사용하고 실시예1과마찬가지로 카메라 앞에는 적외선만 통과시키는 필터(Ft)를 부착하는 것이 바람직하다. 도6은 노트북 모니터에레이저 선 발생기(LL) 네 개를 부착하여 V자 형태의 마크(V1,V2,S1,S2)를 구성한 것이다. 이때 도7과 같이 레이저 선 발생기 앞에 적당한 거울이나 프리즘을 포함한 광학 모듈(MR)을 추가하여 선 발생기가 차지하는 공간을최소화 하는 것이 바람직하다. 이러한 구성에의하면 본 실시예에서는 가상 사각형 마크는 위아래가 뒤집힌V자형태가 된다. 그러나 촬영한 이미지에서 선을 검출하고 그 선들의 교점으로부터 모니터의 사각형을 알아내는 것은 실시예1의 경우와 동일하다. 실시예5 <17>상기 실시예1 에서 사용한 두 개의 V자 형태의 마크를 직각 삼각형 형태로 바꿔서 도8과 같이 마크를 구성할 수 <18>도 있다. 도8에는 모니터 윗변 좌 우측에 각각 2개씩 총4개의 선분(VL1, HL1, VL2, HL2) 으로된 마크가 부착되어있다. 이때 좌 우측의 각각의 마크는 직각삼각형을 이룬다. 즉 제1수평선분(HL1)과 제1수직선분(VL1)은 제1직각 꼭지점(R1)에서 만나고, 제2수평선분(HL2)과 제2수직선분(VL2)은 제2 직각 꼭지점(R2)에서 만난다. 이러한마크를 촬영한 이미지로부터 사각형 마크의 꼭지점을 구하는 방법은 다음과 같다. 촬영된 이미지에서 선분을 구한다. 예를 들면 선분을 적외선 LED로 구성하고 카메라 앞에 적외선만 통과시키는 필터를 부착하여 선분 부분만밝게 촬영한 이미지에서 허프 변환 등을 통해 밝은 부분을 지나는 선을 구할수 있다. 그 선분들의 거리 관계를조사하여 가까운 선분들을 둘 씩 짝을 짓는다. 그 짝을 이루는 선분이 직각 삼각형의 마크가 된다. 좌측 직각삼각형의 빗변을 지나는 직선을 구하고 우측 마크의 수직선 선분(VL2)을 지나는 직선을 구하여 두 직선의 교점(R4)을 구한다. 마찬가지로 우측 직각 삼각형의 빗변을 지나는 직선을 구하고 좌측 마크의 수직선 선분(VL1)을지나는 직선을 구하여 두 직선의 교점 (R3)을 구한다. 이렇게 구한 네 점(R1, R2, R3, R4) 을 이루는 사각형의크기와 찌그러진 형태를 분석하여 카메라와 모니터 사이의 상대위치를 산출할 수 있다. 예를 들면 촬영한 이미지에서 네 점(R1,R2,R3,R4)의 좌표를 PERSPECTIVE 4 POINT PROBLEM 공식을 사용하여 방적식을 풀면 네 점(R1,R2,R3,R4)의 3차원 좌표값을 구할 수 있다. 여기서 좌 우측 직각 삼각형의 선분(VL1, HL1, VL2, HL2)의 길이를 적당히 선택하여 두 점 R3,R4 가 모니터의 사각형의 아래 변 꼭지점 P3,P4 에 대응되게 할 수 있다. 즉R1,R2 를 지나는 직선을 중심으로 사각형 R1 R2 R3 R4 를 180도 회전 했을 때 물리적인 모니터의 사각형 R1 R2P3 P4 에 겹치게 하는 것이 바람직하다. 또한 마크를 모니터에 부착하는 경우 직각 삼각형 마크의 빗변을 지나는 직선을 보다 정밀하게 구하기 위해서는 <19>빗변을 나타내는 여분의 선분(T1, T2, T3, T4)을 도9와 같이 구성하는 것이 바람직하다. 상기 실시예2~4는 상기 실시예1의 마크의 형태는 유지하고 마크를 구성하는 재료나 부품을 변형한 것이다. 마 <20>찬가지로 본 실시예의 마크의 형태를 유지하고 마크를 구성하는 방법만 상기 실시예2~4와 같이 변형할 수 있다.그러한 자세한 내용은 자명하므로 생략한다.응용예 <21>상기 실시예들은 모두 마크가 모니터에 부착되어있고 카메라를 사용자가 리모컨을 손에 쥐듯 잡고 포인팅 작업 <22>을 하는 것이다. 본 발명의 장치는 3차원 거리 측정 장치이므로 카메라와 마크의 부착 위치는 특정 물체에 제한되지 않는다. 예를 들어서 도10과 같이 카메라를 모니터 윗면에 사용자를 향하게 설치하고 사용자가 손에 쥔리모콘 앞면에 상기 실시예5의 직각 삼각형의 마크를 부착하여 포인팅 장치로 사용 가능하다. 또한 마크를 천정에 부착하고 카메라를 로봇에 부착할 수도 있다.상기 실시예에서 사용한 적외선 led대신 투명 필름 형태의 적외선 OLED를 사용해도 무방하다. 이 경우 마크가 <23>투명 필름 형태 이므로 마크를 부착하는 모니터와 같은 물건의 외관을 그대로 유지할수 있어서 부착된 마크에의한 시각적 거부감을 감소시킬수 있다.또한 배경이 단순한 환경에서는 마크는 광원을 포함하지 않고도 구성할 수 있다. 예를 들어서 흰색 바탕에 검정 <24>색 선으로 마크를 구성하거나 검정색 바탕에 흰색 선으로 마크를 구성할 수 있다. 구체적으로 빔프로젝터로 넓- 6 -공개특허 10-2009-0018770은 스크린에 영상을 투사하는 경우 영상 화면의 사각형의 테두리에 그와 같은 마크를 부착할 수 있다.도면의 간단한 설명도1은 기존의 사각형 마크 모듈 사시도 <25>도2는 가상 사각형 마크 모듈 사시도 <26>도3은 가상 사각형 마크 모듈 정면도 <27>도4는 가상 사각형 마크를 촬영한 이미지 <28>도5는 레이저 선 발생 모듈 구성도 <29>도6은 레이저 선 발생 모듈을 사용한 가상 사각형 마크 실시예 <30>도7은 레이저 선 발생 모듈에 광학 모듈을 추가하여 레이저 선 발생 모듈이 차지하는 부피를 최소화한 실시예 <31>도8은 직각 삼각형 마크를 사용한 실시예 정면도 <32>도9는 직각 삼각형 마크의 빗변에 보조 선분이 부착된 실시예 정면도 <33>도10은 리모컨에 가상 사각형 마크를 부착한 응용예 <34><도면 주요부호의 설명> <35>UM : 기준변 표시 마크 VML,VMR : 가상 사각형 마크 <36>IP : 영상 처리부 RT : 카메라 회전 방향 <37>Ft : 적외선 통과 필터 Ca : 카메라 <38>V1,V2 : 수직선 선분 마크 S1,S2 사선 선분 마크 <39>P1,P2,P3,P4 : 사각형 꼭지점dh,dw : 모니터 여백 간격 <40>레이저 선 발생 모듈 : LL LA : 레이저 발생기 <41>BM : 레이저 빔 CY : 원통형 렌즈 <42>LN : 1 자 빔 MR : 거울 또는 프리즘을 포함한 광학 모듈 <43>VL1,VL2 : 수직선 선분 HL1,HL2 : 수평선 선분 <44>R1,R2 :직각삼각형의 꼭지점 R3,R4 : 사각형의 꼭지점 <45>T1,T2,T3,T4 : 빗변에 부착된 보조 선분 <46>- 7 -공개특허 10-2009-0018770도면 도면1- 8 -공개특허 10-2009-0018770 도면2- 9 -공개특허 10-2009-0018770 도면3- 10 -공개특허 10-2009-0018770 도면4- 11 -공개특허 10-2009-0018770 도면5- 12 -공개특허 10-2009-0018770 도면6- 13 -공개특허 10-2009-0018770 도면7- 14 -공개특허 10-2009-0018770 도면8- 15 -공개특허 10-2009-0018770 도면9- 16 -공개특허 10-2009-0018770 도면10- 17 -공개특허 10-2009-0018770"}
{"patent_id": "10-2008-0078229", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 카메라와 공간 절약형 가상 사각형 마크를 이용한 3차원 위치 측정장치에 관한 것이다. 본 발명에 따 른 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치는 두 지점 사이의 상대 위치와 방향을 산출하는 장 치로서, 한 지점에 위치한 크기와 모양이 정해진 가상 사각형 마크 부, 다른 한 지점에 위치한 이미지 센서를 사 용한 카메라를 포함하는 카메라부, 그리고 상기 카메라로 촬영한 상기 가상 사각형 마크의 영상을 분석해서 카메 라와 가상 사각형 마크 사이의 3차원 상대 위치와 방향을 산출하는 영상처리부를 포함하여 구성된다."}
{"patent_id": "10-2008-0078229", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "- 3 -공개특허 10-2009-0018770본 발명은 카메라로 미리 정한 마크를 촬영하여 그 영상을 인식하여 카메라와 마크 사이의 거리와 방향을 산출 <1> 하는 3차원 거리 측정 장치에 관한 것이다. 이러한 거리 측정 기술은 청소 로봇의 위치 인식장치에 응용될 수 있다. 예를 들면 천정에 특정 마크를 부착하고 바닥을 이동하는 청소로봇에 부착된 카메라로 이 마크를 인식하 여 로봇의 현재 위치를 산출하는 것이다. 또한 모니터에 부착된 마크를 리모컨과 같이 손에 든 카메라로 움직 이며 촬영하여 조이스틱과 같은 포인팅 작업을 할 수 있다."}
{"patent_id": "10-2008-0078229", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "카메라를 사용한 기존의 3차원 위치 측정 장치에는 사람의 두 눈처럼 서로 다른 위치에서 동일 방향을 향하도 <2> 록 배치된 두 개의 스테레오 카메라를 사용하는 방법이 있다. 이는 사람의 두 눈으로 한 물체를 응시할 때 두 눈의 시선의 각도 정보로 물체와 눈 사이의 상대위치를 알아내는 삼각 측량방식이다. 이 삼각 측량 방식의 단 점은 반드시 두 개 이상의 카메라를 사용해야 한다는 점이다. 이에 비해 카메라를 하나만 사용한 기술로는 본 발명의 발명인의 기존의 특허 10-0532525-0000호 '카메라를 이 <3> 용한 3차원 포인팅 장치' 가 있다. 이 특허는 하나의 카메라와 사각형 마크를 사용해서 카메라와 사각형 사이 의 3차원 상대 위치와 방향을 산출하여 포인팅 작업에 응용하고 있다."}
{"patent_id": "10-2008-0078229", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "발명의 내용 해결 하고자하는 과제 본 발명의 목적은 상기한 기존 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치' 기술이 사각형 <4> 마크를 검출하기 위해서 반드시 사각형의 네 변에 모두 광원을 부착해야 한다는 단점을 해결할 수 있는 부피를 적게 차지하고 임의의 크기의 모니터에 설치가 용이하고 미관상 보기 좋은 가상 사각형 마크를 사용한 3차원 거리 측정 장치와 포인팅 장치를 제공함을 목적으로 한다. 여기서 3차원 거리가 산출되면 그 값은 약간의 좌표 변환을 거치면 3차원 포인팅 작업에 그대로 사용될 수 있으므로 3차원 포인팅 장치는 3차원 거리 측정 장치의 특수한 응용예이다. 즉 본 발명의 출원서에서 3차원 위치 측정 장치와 3차원 포인팅 장치를 구별하지 않는다. 기존 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치'를 상품화 할 경우 기존의 다양한 크기의 <5> 모니터에 맞게 광원모듈을 생산해야 한다. 여기서 광원 모듈은 도1에 표시된 것과 같이 모니터 크기에 맞게 도 너츠 모양으로 가운데가 뚫린 사각형 모양의 액자의 테두리에 광원을 부착해서 착탈식으로 만든 것을 뜻한다. 이와 같은 사각형의 광원 모듈을 모니터에 부착해서 3차원 포인팅 작업을 하는 경우 사용자는 본인의 모니터 크기에 맞는 광원 모듈만 사용 가능하기 때문에 모니터를 크기가 다른 것으로 바꾸면 광원 모듈도 모니터 크기 에 맞는 크기로 새로 구입해야 하거나 기존 광원 모듈을 개조 해야 한다. 광원 모듈의 사각형의 각 변을 안테 나와 같이 크기를 변화시킬 수 있게 제조한다면 새로 구입할 필요가 없지만 안테나 형태의 구조를 광원 모듈에 부여하기 위해서는 제조 단가가 올라간다는 단점이 있다. 또한 노트북 모니터와 같이 모니터 주위에 여백이 거 의 없는 경우에는 상기 기존 특허의 광원 모듈을 부착하기가 매우 불편하다. 과제 해결수단 본 발명은 상기한 목적을 달성하기 위하여 사각형을 표시하는 광원 모듈의 구성을 도2와 같이 가상 사 <6> 각형 마크로 바꿔서 임의의 모니터에 손쉽게 부착할 수 있는 새로운 광원 모듈을 제공한다. 도2에서 모니터 윗 변 좌 우측에 각각 V 자 형태의 마크(VML,VMR)가 부착되어있다. 이러한 마크가 부착된 모니터를 카메라로 촬영 한 영상에서 영상 처리부는 마크를 추출하여 사각형 형태를 알아낼 수 있다. 그렇게 얻은 사각형의 찌그러진 형태와 크기를 분석하면 카메라와 모니터 사이의 상대 위치와 회전 방향을 산출 할 수 있다. 그러한 분석 방법 은 특허 10-0532525-0000호 '카메라를 이용한 3차원 포인팅 장치' 의 출원서에 소개되어있다. 또한 크기와 모 양이 알려진 사각형을 촬영한 영상으로부터 그 사각형의 형태를 분석해서 카메라와 사각형 사이의 3차원 위치 와 방향을 산출하는 것은 영상 처리 분야에서 perspective N point problem 으로 알려진 공지 기술이다. 구체 적으로 http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MARBLE/high/pia/solving.htm 에 그에 대 한 소개가 게시되어있다. V자 형태의 마크는 도3에 표시된 것과 같이 수직선 부분(V1,V2)과 사선 부분(S1,S2) 으로 되어있다. 이와 같은 4개의 선 형태의 마크(V1,V2,S1,S2)를 검출하고 그 마크의 선을 연장하여 각각의 교 점을 구하면 그 교점들이 모니터를 이루는 사각형의 꼭지점(P1,P2,P3,P4)이 된다. 구체적으로 S1,V1 의 교점은 P1 이고, V2,S2 의 교점은 P2 이고, V1,S2 의 교점은 P3이고, S1,V2 의 교점은 P4 이다. 여기서 네 개의 선분 형태의 마크(V1,V2,S1,S2)는 간접적으로 모니터의 사각형의 네 꼭지점을 나타내므로 이러한 네 개의 선분 마크 - 4 -공개특허 10-2009-0018770를 가상 사각형 마크라고 한다. 효 과 이러한 가상 사각형 마크는 모니터의 한 변에만 설치해도 충분하므로 임의의 크기의 모니터에 설치가 용이하고 <7> 모니터를 가리는 영역이 적어서 외관상 눈에 거슬리는 것이 훨씬 덜 하다. 그리고 가상 사각형 마크는 그 형태 가 매우 인공적인 V자 형태이므로 점 형태의 노이즈 광과 확연히 구분되어 노이즈 광이 있는 환경에서도 안정 적으로 동작한다. 또한 가상 사각형 마크는 차지하는 부피가 적어서 가벼우므로 노트북 사용자의 경우 휴대와 보관이 편리하다. 또한 가상 사각형 마크의 크기와 부피가 도1에 표시된 것과 같은 기존 기술에 의한 마크보다 적으므로 제조 단가를 낮출 수 있다. 특히 근래에는 대형 모니터가 점차 개발되고 있는데 기존 기술에 의한 도1과 같은 마크는 모니터 크기에 마크 모듈 크기가 비례하지만 본 발명에 의한 가상 사각형 마크는 모니터 크 기에 거의 무관하게 일정한 크기를 유지할 수 있다. 발명의 실시를 위한 구체적인 내용 본 발명은 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치에 관한 것이다. 본 발명에서 물리적인 사 <8> 각형 마크 대신 그에 대응되는 가상 사각형 마크를 사용하는 이유는 가상 사각형 마크가 물리적인 사각형 마크 보다 공간 절약형 이기 때문이다. 본 발명에 따른 카메라와 가상 사각형 마크를 이용한 3차원 위치 측정장치는 두 지점 사이의 상대 위치와 방향을 산출하는 장치로서, 한 지점에 위치한 크기와 모양이 정해진 가상 사각형 마크 부, 다른 한 지점에 위치한 이미지 센서를 사용한 카메라를 포함하는 카메라부, 그리고 상기 카메라로 촬 영한 상기 가상 사각형 마크의 영상을 분석해서 카메라와 가상 사각형 마크 사이의 3차원 상대 위치와 방향을 산출하는 영상처리부를 포함하여 구성된다. 영상 처리부는 구체적으로 마이크로 콘트롤러나 DSP(digital signal processor)에서 실행되는 프로그램을 포함할 수 있다. 영상처리부에 적당한 인터페이스부를 추가로 포함하여 3 차원 포인팅 장치를 구성할 수 있다. 이하 실시예 에서는 카메라로부터의 3차원 거리를 측정하고자 하는 물체로 모니터를 선택하여 설명한다. 실시예1 <9> 도2에 표시된 것과 같은 V자 모양의 두 개의 마크(VML,VMR)를 다수의 적외선 LED를 선분 형태로 나열하여 구성 <10> 하고 이를 촬영하는 카메라 앞에는 적외선만 통과시키는 필터(Ft)를 부착하면 V자 형태의 마크만 밝은 색으로 촬영된다. 이렇게 촬영된 이미지의 예가 도4에 표시되어있다. 이러한 이미지에서 선분 검출을 한다. 선분 검출 법은 이미지 프로세싱 분야에 여러 가지가 알려져 있다. 예를 들면 허프 변환이나 라플라스 변환 등이 있다. 이 렇게 검출한 선들의 교점을 구하면 그 점들이 사각형의 꼭지점이 된다. 구체적으로 도3에서 S1,V1 의 교점은 P1 이고, V2,S2 의 교점은 P2 이고, V1,S2 의 교점은 P3이고, S1,V2 의 교점은 P4 이다. 이때 V자 형태의 두 마크 가 접하는 사각형의 한 변(P1,P2를 지나는 직선)이 사각형의 기준 변이된다. 기준변은 카메라가 도2에 표시된 RT 와 같이 180도 회전한 상태인지 아닌지를 알아내는데 필요한 정보이다. 이에 비해 기존 특허 10-0532525- 0000호 '카메라를 이용한 3차원 포인팅 장치'에서는 기준변을 표시하기 위하여 도1에 표시된 것과 같은 여분의 광원(UM)을 부착했다. 즉 본 발명에 의한 마크를 사용하면 기준변은 여분의 마크 없이도 검출할 수 있다. 또한 기존의 특허에 의한 광원은 다수의 점 광원 이므로 마크 주변에 형광등이나 햇빛 등에 의한 노이즈 광이 있는 경우 그 광이 노이즈 인지 아니면 마크인지 구분하기가 매우 어렵지만 본 발명에 의한 V자 형태의 마크는 그 형 태가 점 형태의 노이즈 광와 확연히 구분되므로 노이즈가 있는 환경에서도 안정적으로 동작한다. 실시예2 <11> 상기 실시예1에서 사용한 적외선 LED로 된 V자 형태의 마크를 재귀반사 필름으로 구성할 수 있다. 이 경우 카메 <12> 라에 촬영 방향을 향한 적외선 LED를 부착하여 V자 형태의 재귀반사 필름에 반사된 적외선을 적외선만 통과시키 는 필터(Ft)가 렌즈 앞에 부착된 카메라로 촬영하면 상기 실시예1과 동일한 효과를 얻을 수 있다. 재귀반사 필 름은 입사각과 반사각이 같은 필름으로 교통표지판 등에 상품화된 공지 기술이다. 실시예3 <13> 상기 실시예 2에서 사용한 재귀반사 필름 대신 편광필름으로 V자 형태의 마크를 구성할 수 있다. 이때 카메라는 <14> 편광인 빛을 반사 또는 방사하는 물체만 밝게 촬영할 수 있는 편광 이미지 센서를 사용한 카메라를 사용한다. 기존의 편광 이미지 센서는 미국특허(polarization sensitive solid state image sensor and associated method,Pub.No:US 2005/0279921 A1)에 소개되어있다. 편광 이미지 센서를 사용하면 별도의 적외선 광원 없이 태 양광이나 조명광 등의 자연광 상태에서도 마크만 밝게 촬영할 수 있다. - 5 -공개특허 10-2009-0018770실시예4 <15> 노트북 모니터와 같이 모니터 주위에 여백이 거의 없는 경우에는 실시예2과 같은 v자 형태의 마크를 부착할 공 <16> 간이 매우 부족하다. 여기서 여백이 작다는 것은 도3의 모니터 화면과 모니터 테두리 사이의 간격 dh, dw가 매 우 작다는 뜻이다. 설사 무리하게 v자 형태의 마크를 부착하더라도 모니터 화면을 가리게 된다. 이 경우 레이저 선 발생기를 사용하여 v자 형태의 마크를 구성할 수 있다. 레이저 선 발생기(LL)는 도5에 표시된 것과 같이 레 이저 모듈(LA)에서 발사된 레이저빔(BM)을 원통형 렌즈(CY)에 통과시켜 빔을 1자 형태(LN)로 퍼지게 한 것이다. 이 경우 사용자 눈에 V자 형태의 레이저 선이 보이지 않게 하기 위해서는 적외선 레이저를 사용하고 실시예1과 마찬가지로 카메라 앞에는 적외선만 통과시키는 필터(Ft)를 부착하는 것이 바람직하다. 도6은 노트북 모니터에 레이저 선 발생기(LL) 네 개를 부착하여 V자 형태의 마크(V1,V2,S1,S2)를 구성한 것이다. 이때 도7과 같이 레이 저 선 발생기 앞에 적당한 거울이나 프리즘을 포함한 광학 모듈(MR)을 추가하여 선 발생기가 차지하는 공간을 최소화 하는 것이 바람직하다. 이러한 구성에의하면 본 실시예에서는 가상 사각형 마크는 위아래가 뒤집힌V자 형태가 된다. 그러나 촬영한 이미지에서 선을 검출하고 그 선들의 교점으로부터 모니터의 사각형을 알아내는 것 은 실시예1의 경우와 동일하다. 실시예5 <17> 상기 실시예1 에서 사용한 두 개의 V자 형태의 마크를 직각 삼각형 형태로 바꿔서 도8과 같이 마크를 구성할 수 <18> 도 있다. 도8에는 모니터 윗변 좌 우측에 각각 2개씩 총4개의 선분(VL1, HL1, VL2, HL2) 으로된 마크가 부착되 어있다. 이때 좌 우측의 각각의 마크는 직각삼각형을 이룬다. 즉 제1수평선분(HL1)과 제1수직선분(VL1)은 제1 직각 꼭지점(R1)에서 만나고, 제2수평선분(HL2)과 제2수직선분(VL2)은 제2 직각 꼭지점(R2)에서 만난다. 이러한 마크를 촬영한 이미지로부터 사각형 마크의 꼭지점을 구하는 방법은 다음과 같다. 촬영된 이미지에서 선분을 구 한다. 예를 들면 선분을 적외선 LED로 구성하고 카메라 앞에 적외선만 통과시키는 필터를 부착하여 선분 부분만 밝게 촬영한 이미지에서 허프 변환 등을 통해 밝은 부분을 지나는 선을 구할수 있다. 그 선분들의 거리 관계를 조사하여 가까운 선분들을 둘 씩 짝을 짓는다. 그 짝을 이루는 선분이 직각 삼각형의 마크가 된다. 좌측 직각 삼각형의 빗변을 지나는 직선을 구하고 우측 마크의 수직선 선분(VL2)을 지나는 직선을 구하여 두 직선의 교점 (R4)을 구한다. 마찬가지로 우측 직각 삼각형의 빗변을 지나는 직선을 구하고 좌측 마크의 수직선 선분(VL1)을 지나는 직선을 구하여 두 직선의 교점 (R3)을 구한다. 이렇게 구한 네 점(R1, R2, R3, R4) 을 이루는 사각형의 크기와 찌그러진 형태를 분석하여 카메라와 모니터 사이의 상대위치를 산출할 수 있다. 예를 들면 촬영한 이미 지에서 네 점(R1,R2,R3,R4)의 좌표를 PERSPECTIVE 4 POINT PROBLEM 공식을 사용하여 방적식을 풀면 네 점 (R1,R2,R3,R4)의 3차원 좌표값을 구할 수 있다. 여기서 좌 우측 직각 삼각형의 선분(VL1, HL1, VL2, HL2)의 길 이를 적당히 선택하여 두 점 R3,R4 가 모니터의 사각형의 아래 변 꼭지점 P3,P4 에 대응되게 할 수 있다. 즉 R1,R2 를 지나는 직선을 중심으로 사각형 R1 R2 R3 R4 를 180도 회전 했을 때 물리적인 모니터의 사각형 R1 R2 P3 P4 에 겹치게 하는 것이 바람직하다. 또한 마크를 모니터에 부착하는 경우 직각 삼각형 마크의 빗변을 지나는 직선을 보다 정밀하게 구하기 위해서는 <19> 빗변을 나타내는 여분의 선분(T1, T2, T3, T4)을 도9와 같이 구성하는 것이 바람직하다. 상기 실시예2~4는 상기 실시예1의 마크의 형태는 유지하고 마크를 구성하는 재료나 부품을 변형한 것이다. 마 <20> 찬가지로 본 실시예의 마크의 형태를 유지하고 마크를 구성하는 방법만 상기 실시예2~4와 같이 변형할 수 있다. 그러한 자세한 내용은 자명하므로 생략한다. 응용예 <21> 상기 실시예들은 모두 마크가 모니터에 부착되어있고 카메라를 사용자가 리모컨을 손에 쥐듯 잡고 포인팅 작업 <22> 을 하는 것이다. 본 발명의 장치는 3차원 거리 측정 장치이므로 카메라와 마크의 부착 위치는 특정 물체에 제 한되지 않는다. 예를 들어서 도10과 같이 카메라를 모니터 윗면에 사용자를 향하게 설치하고 사용자가 손에 쥔 리모콘 앞면에 상기 실시예5의 직각 삼각형의 마크를 부착하여 포인팅 장치로 사용 가능하다. 또한 마크를 천정 에 부착하고 카메라를 로봇에 부착할 수도 있다. 상기 실시예에서 사용한 적외선 led대신 투명 필름 형태의 적외선 OLED를 사용해도 무방하다. 이 경우 마크가 <23> 투명 필름 형태 이므로 마크를 부착하는 모니터와 같은 물건의 외관을 그대로 유지할수 있어서 부착된 마크에의 한 시각적 거부감을 감소시킬수 있다. 또한 배경이 단순한 환경에서는 마크는 광원을 포함하지 않고도 구성할 수 있다. 예를 들어서 흰색 바탕에 검정 <24> 색 선으로 마크를 구성하거나 검정색 바탕에 흰색 선으로 마크를 구성할 수 있다. 구체적으로 빔프로젝터로 넓 - 6 -공개특허 10-2009-0018770은 스크린에 영상을 투사하는 경우 영상 화면의 사각형의 테두리에 그와 같은 마크를 부착할 수 있다."}
