{"patent_id": "10-2021-0188058", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0099022", "출원번호": "10-2021-0188058", "발명의 명칭": "내시경 핸드 아이 카메라의 캘리브레이션 장치 및 그 방법", "출원인": "가톨릭관동대학교산학협력단", "발명자": "최안렬"}}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "카메라 캘리브레이션 장치에 있어서,상기 카메라로부터 촬영된 체커보드의 이미지를 수신하는 이미지 수신부;상기 체커보드의 이미지로부터 체커보드의 칸 개수 및 칸 치수를 자동적으로 산출하는 제1인공지능 모델과, 상기 체커보드의 모서리 점 검출을 수행하여 상기 카메라의 내부 파리미터 및 외부 파리미터를 산출하는 제2인공지능 모델이 저장된 인공 지능 모델 저장부;미리 학습된 복수의 이미지를 상기 제1인공 지능 모델 및 제2인공지능 모델이 참조할 수 있도록 데이터베이스화하여 저장하는 이미지 데이터베이스; 및상기 인공 지능 모델 저장부 및 상기 이미지 데이터 베이스를 이용하여 상기 체커보드의 칸 개수 및 칸 치수를자동적으로 산출하고 카메라의 내부 파리미터 및 외부 파리미터를 산출하는 데이터 처리부를 포함하는 카메라 캘리브레이션 장치."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 이미지 데이터베이스는 증강된 체커보드 이미지들을 저장하고 상기 인공지능 모델은 상기 증강된 체커보드이미지를 이용하여 학습되는 것인 카메라 캘리브레이션 장치."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 증강된 체커보드의 이미지는 체커보드 이미지의 이동, 명도 변화, 가우시안 잡음 사용, 전단 변환, 세로대칭 이동, 크기 조정 중 적어도 하나를 포함하는 것인 카메라 캘리브레이션 장치."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서, 상기 이미지 데이터베이스는 미리 학습된 복수의 이미지에 대해 촬영한 카메라의 캘리브레이션 설정 정보, 촬영한 체커보드 유형, 반사 마커의 절대 위치, 카메라의 절대 위치, 카메라 외부 파라미터 및 카메라 내부 파라미터의 정보를 포함하는 촬영 기준을 저장하는 것인 캘리브레이션 장치."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "카메라 캘리브레이션 방법에 있어서,복수의 체커보드의 이미지를 이용하여 체커보드의 칸 개수와 칸 치수를 출력할 수 있도록 학습된 제1인공지능모델과 상기 복수의 체커보드의 모서리점의 검출 수행을 할 수 있도록 학습된 제2인공지능 모델을 포함하는 인공지능 모델을 구축하는 단계;캘리브레이션 되는 카메라가 단일 체커보드 이미지를 촬영하는 단계;상기 제1인공지능 모델에 기초하여 체커보드의 칸 개수와 칸 치수를 판별하는 단계; 및상기 제2인공지능 모델에 기초하여 체커보드 모서리점 좌표 검출을 수행하고 카메라의 외부 파리미터와 내부 파리미터를 추출하는 단계를 포함하는 카메라 캘리브레이션 방법. 공개특허 10-2023-0099022-3-청구항 6 제5항에 있어서, 상기 인공지능 모델 구축 단계는, 상기 복수의 체커보드의 이미지를 미리 정해진 복수의 촬영 기준에 따라 촬영하는 단계;촬영된 이미지 데이터를 데이터 증강에 의해 데이터 분량을 증가시키는 데이터 증강 단계;상기 증강된 이미지 데이터를 이용하여 상기 제1인공지능 모델을 학습하는 단계; 및상기 증강된 이미지 데이터를 이용하여 상기 제2인공지능 모델을 학습하는 단계를 포함하는 것인 카메라 캘리브레이션 방법."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 6항에 있어서,상기 데이터 증강은 촬영된 체커보드 이미지의 이동, 명도 변화, 가우시안 잡음 사용, 전단 변환, 세로 대칭 이동, 크기 조정 중 적어도 하나를 포함하는 것인 카메라 캘리브레이션 방법."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 7항에 있어서,상기 제1인공지능 모델을 학습하는 단계는, 상기 복수의 체커보드의 칸 개수와 칸 치수를 입력으로 하여 학습을수행하는 것인 카메라 캘리브레이션 방법."}
{"patent_id": "10-2021-0188058", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,상기 제2인공지능 모델을 학습하는 단계는, 상기 복수의 체커보드의 라벨링된 모서리점과 좌표값 데이터를 입력으로 하여 학습을 수행하는 것인 카메라 캘리브레이션 방법."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명의 일 실시예는 상기 카메라로부터 촬영된 체커보드의 이미지를 수신하는 이미지 수신부; 상기 체커보드 의 이미지로부터 체커보드의 칸 개수 및 칸 치수를 자동적으로 산출하는 제1인공지능 모델과, 상기 체커보드의 모서리 점 검출을 수행하여 상기 카메라의 내부 파리미터 및 외부 파리미터를 산출하는 제2인공지능 모델이 저장 된 인공 지능 모델 저장부; 미리 학습된 복수의 이미지를 상기 제1인공 지능 모델 및 제2인공지능 모델이 참조할 수 있도록 데이터베이스화하여 저장하는 이미지 데이터베이스; 및 상기 인공 지능 모델 저장부 및 상기 이미지 데이터 베이스를 이용하여 상기 체커보드의 칸 개수 및 칸 치수를 자동적으로 산출하고 카메라의 내부 파리미터 및 외부 파리미터를 산출하는 데이터 처리부를 포함한다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 카메라 캘리브레이션 장치 및 방법에 관한 것으로, 구체적으로 핸드 아이 형태의 내시경 카메라의 캘 리브레이션 장치 및 그 방법에 관한 것이다. 더욱 상세하게는 인공지능 모델을 이용하여 단일 영상을 가지고 내시경 카메라의 내, 외부 파라미터를 추출하는 장치 및 그 방법에 관한 것이다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "카메라 캘리브레이션은 주어진 영상으로부터 해당 카메라의 매개 변수(파라미터)를 찾아내어 피사체 정보와 영 상의 정보가 일치되도록 보정하는 과정을 의미한다. 구체적으로 내시경 카메라에 의해 촬영된 2차원 이미지 좌 표계와 실제 피사체인 환자공간을 정합하기 위해서는 카메라의 내, 외부 파라미터를 계산하는 과정이 필요하다. 카메라의 내부 파라미터는 정규 평면(UV 평면)과 이미지 평면의 관계를 나타내며, 카메라의 외부 파라미터는 물 체의 위치를 표현할 때 기준으로 삼는 월드 좌표계와 카메라의 초점을 기준으로 하는 카메라 좌표계의 관계를 나타낸다. 수학식 1 내지 4는 카메라 캘리브레이션에 관련된 수학식을 나타낸다. 수학식 1"}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "수학식 1에서, K는 5개의 카메라 내부 파라미터를 내포하고 있다. 수학식 2"}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 3, "content": "수학식 2에서, K는 초점거리 ax, 초점거리 ay, 스케일 계수 mx, 스케일 계수 my 및 비대칭계수 f 를 포함하는 카메라 내부 파라미터를 포함한다. 수학식 3"}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 4, "content": "수학식 3에서, 카메라 외부 파라미터는 실세계의 원점으로부터 카메라가 회전하고 이동한 값을 의미하고, 회전 행렬 및 이동 행렬을 포함한다. 수학식 4"}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 5, "content": "카메라 내부 파라미터 및 외부 파라미터는 위치추적 시스템을 기반으로 획득한 위치 데이터를 활용하여 계산될 수 있고, 상기 계산된 카메라 내부 파라미터 및 외부 파라미터를 활용하여 촬영한 이미지 데이터에 의해 특정한점의 좌표 값이 추출될 수 있다. 한편, 카메라 파라미터의 정확도 평가에는 카메라와 캘리브레이션 패턴의 상대 위치 표시, 재투영 오차 계산, 파라미터 추정 오류를 계산하는 방법이 사용될 수 있다. 도 1은 종래 카메라 캘리브레이션 방법을 도시한 흐름도이다. 단계(S10)에서는 카메라 캘리브레이션을 위해 체커보드를 포함한 반사 마커 및 고정틀이 준비된다. 단계(S20)에서는 이미지 촬영 구도를 포함한 카메라 캘리브레이션 촬영 기준에 따라 복수의 체커보드 이미지가 촬영된다. 종래 기술에 있어서는 카메라 캘리브레이션의 정확도를 위해 다수의 체커보드 촬영이 필요하다. 단계(S30)에서는 각각의 체커보드의 칸 개수 및 칸 치수가 입력된다. 상이한 체커보드를 촬영할 경우에는 사용 자는 매번 직접 각각의 체커보드의 칸 개수 및 칸 치수를 입력해주어야 한다. 이후, 체커보드의 위치점 찾기 알고리즘을 이용하여 카메라 외부 파라미터 계산 단계(S40)와 카메라 내부 파라 미터 계산(S50) 단계가 수행되고 카메라 캘리브레이션 완료된다(S60). 전술한 바와 같이, 종래의 카메라 캘리브레이션에는 카메라별 다수의 이미지 촬영이 필요하다. 카메라 캘리브레 이션에 사용되는 카메라 내부 파라미터 및 외부 파라미터를 계산하기에 충분한 이미지 데이터를 확보하기 위해 서는 평면 패턴 촬영 과정부터 충분히 복잡하게 카메라를 조정하며 평면 패턴이 촬영되어야 한다. 이러한 일련 의 단계를 거치는 종래 카메라 캘리브레이션 작업은 상당한 시간이 소요된다. 종래 카메라 캘리브레이션 작업은 1차 카메라 파라미터 계산 후 다시 보정을 하는 추가 단계가 필요하며, 체커 보드의 외곽선 또는 모서리점 추출 알고리즘에 따라 정밀도가 영향을 받기도 한다. 또한, 종래 기술은 카메라 파라미터 계산 전에는 카메라 캘리브레이션에 사용되는 체커보드의 칸 개수 및 칸 치 수를 입력해야 하는 번거로움이 존재한다. 이러한 캘리브레이션 방법은 촬영 기준에 따라 다수의 이미지를 촬영하고, 각각의 체커보드 정보를 입력하는 작 업이 반복되어 다수의 카메라를 캘리브레이션 하는 경우 상당한 시간이 소요되는 문제점이 있다. 즉, 카메라 사 용 전에 신속한 카메라 캘리브레이션 작업을 할 수 없다는 번거로움이 있다. 이로써, 캘리브레이션 체커보드를 촬영한 단일 영상을 활용하여 해당 체커보드의 정보 없이 카메라의 파라미터 를 추출하는 카메라 캘리브레이션 기술이 필요한 실정이다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 이루고자 하는 기술적 과제는 단일 이미지의 체커보드 데이터를 이용하여 핸드 아이 내시경 카메라의 파라미터를 추출하는 카메라 캘리브레이션 장치 및 그 방법을 제공하는 것이다. 또한, 본 발명이 이루고자 하는 기술적 과제는 체커보드의 유형 정보를 확보하지 못한 상황에서도 카메라의 파 라미터를 추출하는 카메라 캘리브레이션 장치 및 그 방법을 제공하는 것이다. 또한, 본 발명이 이루고자 하는 기술적 과제는 인공지능 모델을 이용하여 카메라 내부 파라미터 및 카메라 외부 파라미터를 추출하여 종래의 카메라 파라미터 추정 방법보다 재투영 오차를 감소시키는 카메라 캘리브레이션 장 치 및 그 방법을 제공하는 것이다. 본 발명이 이루고자 하는 기술적 과제는 이상에서 언급한 기술적 과제로 제한되지 않으며, 언급되지 않은 또 다 른 기술적 과제들은 아래의 기재로부터 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 기술적 과제를 달성하기 위하여, 본 발명의 일 실시예에 따른 카메라 캘리브레이션 장치는, 상기 카메라로 부터 촬영된 체커보드의 이미지를 수신하는 이미지 수신부; 상기 체커보드의 이미지로부터 체커보드의 칸 개수 및 칸 치수를 자동적으로 산출하는 제1인공지능 모델과, 상기 체커보드의 모서리 점 검출을 수행하여 상기 카메라의 내부 파리미터 및 외부 파리미터를 산출하는 제2인공지능 모델이 저장된 인공 지능 모델 저장부; 미리 학 습된 복수의 이미지를 상기 제1인공 지능 모델 및 제2인공지능 모델이 참조할 수 있도록 데이터베이스화하여 저 장하는 이미지 데이터베이스; 및 상기 인공 지능 모델 저장부 및 상기 이미지 데이터 베이스를 이용하여 상기 체커보드의 칸 개수 및 칸 치수를 자동적으로 산출하고 카메라의 내부 파리미터 및 외부 파리미터를 산출하는 데이터 처리부를 포함한다. 여기서, 상기 이미지 데이터베이스는 증강된 체커보드 이미지들을 저장하고, 상기 인공지능 모델은 상기 증강된 체커보드 이미지를 이용하여 학습될 수 있다. 상기 증강된 체커보드의 이미지는 체커보드 이미지의 이동, 명도 변화, 가우시안 잡음 사용, 전단 변환, 세로 대칭 이동, 크기 조정 중 적어도 하나를 포함할 수 있다. 또한, 상기 이미지 데이터베이스는 미리 학습된 복수의 이미지에 대해 촬영한 카메라의 캘리브레이션 설정 정보, 촬영한 체커보드 유형, 반사 마커의 절대 위치, 카메라의 절대 위치, 카메라 외부 파라미터 및 카메라 내 부 파라미터의 정보를 포함하는 촬영 기준을 저장할 수 있다. 또한, 본 발명의 실시예에 따른 카메라 캘리브레이션 방법은, 복수의 체커보드의 이미지를 이용하여 체커보드의 칸 개수와 칸 치수를 출력할 수 있도록 학습된 제1인공지능 모델과 상기 복수의 체커보드의 모서리점의 검출 수 행을 할 수 있도록 학습된 제2인공지능 모델을 포함하는 인공지능 모델을 구축하는 단계; 캘리브레이션 되는 카 메라가 단일 체커보드 이미지를 촬영하는 단계; 상기 제1인공지능 모델에 기초하여 체커보드의 칸 개수와 칸 치 수를 판별하는 단계; 및 상기 제2인공지능 모델에 기초하여 체커보드 모서리점 좌표 검출을 수행하고 카메라의 외부 파리미터와 내부 파리미터를 추출하는 단계를 포함한다. 여기서, 상기 인공지능 모델 구축 단계는, 상기 복수의 체커보드의 이미지를 미리 정해진 복수의 촬영 기준에 따라 촬영하는 단계; 촬영된 이미지 데이터를 데이터 증강에 의해 데이터 분량을 증가시키는 데이터 증강 단계; 상기 증강된 이미지 데이터를 이용하여 상기 제1인공지능 모델을 학습하는 단계; 및 상기 증강된 이미지 데이터 를 이용하여 상기 제2인공지능 모델을 학습하는 단계를 포함한다. 여기서, 상기 데이터 증강은 촬영된 체커보드 이미지의 이동, 명도 변화, 가우시안 잡음 사용, 전단 변환, 세로 대칭 이동, 크기 조정 중 적어도 하나를 포함할 수 있다. 여기서, 상기 제1인공지능 모델을 학습하는 단계는, 상기 복수의 체커보드의 칸 개수와 칸 치수를 입력으로 학 습될 수 있다. 또한, 상기 제2인공지능 모델을 학습하는 단계는, 상기 복수의 체커보드의 라벨링된 모서리점과 좌표값 데이터 를 입력으로 학습될 수 있다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시예에 따르면, 카메라 캘리브레이션 체커보드를 촬영한 단일 이미지 데이터를 처리하여 핸드 아이 내시경의 카메라 내부 파라미터 및 카메라 외부 파라미터를 추출할 수 있다. 또한, 본 발명의 실시예에 따르면, 카메라 캘리브레이션을 위한 체커보드의 유형 정보를 확보하지 못한 상황에 서도 카메라 캘리브레이션을 가능하게 할 수 있다. 또한, 본 발명의 실시예에 따르면, 카메라 캘리브레이션 장치는 인공지능 모델을 이용하여 카메라 내부 파라미 터 및 카메라 외부 파라미터를 추출하여 종래 카메라 파라미터 추정 방법보다 재투영 오차를 감소시킬 수 있다. 또한, 본 발명의 실시예에 따르면, 인공지능 모델 학습과정에 데이터 증강을 적용하여 더 정확한 카메라 캘리브 레이션이 가능하다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과는 상기한 효과로 한정되는 것은 아니며, 본 발명의 설명 또는 청구범위에 기재된 발명의 구성으 로부터 추론 가능한 모든 효과를 포함하는 것으로 이해되어야 한다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하에서는 첨부한 도면을 참조하여 본 발명을 설명하기로 한다. 그러나 본 발명은 여러 가지 상이한 형태로 구현될 수 있으며, 따라서 여기에서 설명하는 실시예로 한정되는 것은 아니다. 그리고 도면에서 본 발명을 명확 하게 설명하기 위해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유 사한 도면 부호를 붙였다. 명세서 전체에서, 어떤 부분이 다른 부분과 \"연결(접속, 접촉, 결합)\"되어 있다고 할 때, 이는 \"직접적으로 연 결\"되어 있는 경우뿐 아니라, 그 중간에 다른 부재를 사이에 두고 \"간접적으로 연결\"되어 있는 경우도 포함한다. 또한 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 구비할 수 있다는 것을 의미한다. 본 명세서에서 사용한 용어는 단지 특정한 실시예를 설명하기 위해 사용된 것으로, 본 발명을 한정하려는 의도 가 아니다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 명세서에서, \"포함하다\" 또는 \"가지다\" 등의 용어는 명세서상에 기재된 특징, 숫자, 단계, 동작, 구성요소, 부품 또는 이들 을 조합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구성요 소, 부품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 본 명세서에서, \"모듈\"은 하드웨어, 소프트웨어 또는 펌웨어로 구성된 유닛을 포함하며, 예컨대 로직, 논리 블 록, 부품, 또는 회로 등의 용어와 상호 호환적으로 사용될 수 있다. 모듈은 일체로 구성된 부품 또는 하나 또는 그 이상의 기능을 수행하는 최소 단위 또는 그 일부가 될 수 있다. 예컨대 모듈은ASIC(application-specific integrated circuit)으로 구성될 수 있다. 이하 첨부된 도면을 참고하여 본 발명의 실시예를 상세히 설명하기로 한다. 도 2는 본 발명의 일 실시예에 따른 카메라 캘리브레이션 장치를 도시한 도면이다. 도 2를 참조하면, 캘리브레이션 대상이 되는 카메라가 탑재된 핸드 아이 장치는 카메라 촬영 가능 범위 내의 체커보드를 촬영한다. 복수의 적외선 카메라는 적외선 카메라 촬영 가능 범위 내의 카메라 및 카메라 반사 마커가 탑재된 핸드 아이 장치를 촬영할 수 있다. 핸드 아이 장치에 탑재된 카메라로부터 획득된 체커보드의 이미지는 본 발명의 실시예에 따른 카메라 캘리브레이션 장치에 제공된다. 카메라 캘리브레이션 장치는 이미지 수신부, 데이터 처리부 , 카메라 파라미터 출력부, 이미지 데이터베이스 및 인공지능 모델 저장부를 포함할 수 있 다. 핸드 아이 장치는 카메라 반사 마커 및 카메라를 탑재하여 카메라가 체커보드를 다양한 거리와 다양 한 위치에서 다양하게 회전하여 촬영할 수 있다. 핸드 아이 장치에 탑재된 카메라는 내시경 카메라를 포함 할 수 있다. 이때 사용되는 카메라 반사 마커는 특정한 파장의 빛을 재귀반사하는 물질로 코팅한 패시브 마커를 사용할 수 있다. 따라서 적외선 카메라는 적외선 카메라 촬영 가능 범위 안에서 카메라 반사 마커에 서 반사되는 적외선을 촬영할 수 있고, 절대위치를 추출할 수 있다. 또한, 핸드 아이 장치에 탑재된 카메라에 의해 체커보드의 반사 마커를 촬영한 이미지 데이터는 체커 보드 패턴의 절대위치를 추출하는데 이용될 수 있다.이미지 수신부는 카메라 캘리브레이션 장치에 포함될 수 있으며 카메라에 의해 촬영된 체커보드의 이 미지 데이터를 수신한다. 이미지 수신부는 수신한 이미지 데이터를 데이터 처리부 및 이미지 데이터 베이스로 전송할 수 있다. 데이터 처리부는 이미지 수신부에 의해 전송된 이미지 데이터와 인공지능 모델 저장부에 저장된 인공지능 모델을 이용하여 카메라 내부 파라미터 및 카메라 외부 파라미터를 추출하기 위한 행렬을 계산할 수 있다. 구체적으로, 데이터 처리부는 카메라에 의해 촬영된 반사 마커 이미지 데이터를 처리하여 반사 마커 의 절대위치 좌표를 추출하고, 인공지능 모델 저장부에 저장된 인공지능 모델을 이용하여 체커보드의 칸 개수 및 칸 치수를 자동적으로 산출할 수 있다. 또한, 쵤영된 체커모드의 모서리점 좌표를 이용하여 내무 파라미터와 외부 파라미터에 관한 행렬을 계산할 수 있다. 카메라 파라미터 출력부는 계산된 카메라 내부 파라미터 및 카메라 외부 파라미터를 출력하여 카메라 캘리 브레이션을 수행한다. 이미지 데이터베이스는 이미지 수신부 및 데이터 처리부에 의해 전송된 이미지 데이터를 저장할 수 있다. 또한, 인공지능 모델 저장부의 요청에 따라 인공지능 모델의 참조에 사용되는 학습된 이미지 데 이터를 제공할 수 있다. 인공지능 모델 저장부는 데이터 처리부의 데이터 처리에 필요한 인공지능 모델을 저장할 수 있다. 또한, 인공지능 모델 저장부는 체커보드의 칸 개수와 칸 치수를 판단하는 제1 인공지능 모델과 단일 체커 보드 영상에 기반하여 모서리점 검출을 수행하여 내부 파라미터와 외부 파라미터를 산출하는 제2 인공지능 모델 을 포함할 수 있다. 도 3은 본 발명의 일 실시예에 따라, 인공지능 모델을 이용한 카메라 캘리브레이션 방법을 도시한 흐름도이다. 단계(S100)에서는 카메라 캘리브레이션 작업에 활용될 인공지능 모델이 구축된다. 구체적으로 구축되는 인공지 능 모델은 제1 인공지능 모델 및 제2 인공지능 모델 유형을 포함할 수 있다. 여기서 상기 제1 인공지능 모델은 체커보드의 이미지를 이용하여 체커보드의 칸 개수와 칸 치수를 출력할 수 있 도록 학습된다. 또한, 상기 제2 인공지능 모델은 체커보드의 모서리점의 검출 수행을 할 수 있도록 학습된다. 상기 제1 인공지능 모델 및 상기 제2 인공지능 모델의 학습은 도 4를 참조하여 이후 상세히 설명하도록 한다. 단계(S200)에서는 캘리브레이션되는 카메라는 단일 체커보드 이미지를 촬영한다. 전술한 바와 같이 카메라 및 카메라 반사 마커가 탑재된 핸드 아이 장치를 사용하여 카메라 내부 파라미터 및 외부 파라미터 추출을 위 해 단일 체커보드 이미지를 촬영할 수 있다. 단계(S300)에서는 제1 인공지능 모델에 기초하여 체커보드의 칸 개수 및 칸 치수를 판별한다. 체커보드 유형이 학습된 제1 인공지능 모델은 체커보드의 유형을 식별할 수 있다. 단계(S300)에서는 체커보드의 칸 치수 및 체커 보드의 칸 개수가 산출되면 체커보드의 전체 치수가 도출될 수 있다. 단계(S400)에서는 제2 인공지능 모델에 기초하여 체커보드 모서리점 좌표 검출을 수행한다. 체커보드의 모서리 점은 체커보드의 흰색 칸 2개와 검은색 칸 2개의 모서리가 공유되는 점이다. 모서리점은 체커보드의 위치점으로서 캘리브레이션을 위한 좌표로서 활용이 가능하다. 단계(S500)에서는 상기 제2 인공지능 모델에 의해 카메라 외부 파라미터가 추출된다. 단계(S500)에서는 회전 행 렬, 이동 행렬을 포함하는 카메라 외부 파라미터를 추출할 수 있다. 상기 카메라 외부 파라미터는 실세계의 원 점으로부터 카메라가 회전하고 이동한 값을 의미하고, 상기 외부 파라미터는 회전 행렬 및 이동 행렬을 포함한 다. 단계(S600)에서는 상기 제2 인공지능 모델에 의해 카메라 내부 파라미터가 추출된다. 단계(S600)에서는 상기 제 2 인공지능 모델에 초점거리 ax, 초점거리 ay, 스케일 계수 mx, 스케일 계수 my 및 비대칭계수 f 를 포함하는 카메라 내부 파라미터를 추출할 수 있다. 단계(S700)에서는 측정한 카메라의 위치 정보와 캘리브레이션 과정을 통해 추정한 카메라의 위치 정보의 오차가 계산된다. 단계(S800)에서는 캘리브레이션 과정을 통해 추출한 카메라 파라미터를 3차원 공간 좌표계 상의 점을 영상 평면 의 투영에 활용하게 된다. 단계(S900)에서는 카메라의 위치정보의 오차가 허용값 이하로 계산되면, 추출된 카메라 내부 파라미터 및 카메 라 외부 파라미터를 반영하고 카메라 캘리브레이션을 종료한다. 도 4는 본 발명의 일 실시예에 따른 인공지능 모델 학습 방법을 도시한 흐름도이다. 도 4는 도 3의 인공지능 모델 구축(S100)을 상세히 설명한 흐름도이다. 단계(S110)에서는 인공지능 모델 학습 목적 이미지 데이터 촬영 기준에 따라 체커보드를 촬영한다. 인공지능 모 델 학습 목적 이미지 데이터 촬영 기준은 이미지 데이터 내부에 촬영 시각, 촬영한 카메라의 고유 번호, 촬영한 카메라의 캘리브레이션 설정 정보, 촬영한 체커보드 유형, 반사 마커의 절대 위치, 카메라의 절대 위치, 카메라 외부 파라미터 및 카메라 내부 파라미터 등의 정보를 저장하는 것을 포함할 수 있다. 또한, 인공지능 모델 학습 목적 이미지 데이터 촬영 기준은 체커보드 유형별 최소 이미지 촬영 분량, 체커보드 유형별 규격, 체커보드와 촬영 카메라의 거리, 위치 및 회전 정보를 규정하는 것을 포함할 수 있다. 예를 들어, 촬영할 체커보드 유형을 3종 지정하고, 체커보드 유형별 이미지 촬영 분량을 최소 100장으로 규정할 수 있다. 단계(S110)에서 카메라 및 카메라 반사 마커가 탑재된 핸드 아이 장치를 통해 촬영한 이미지 데이터는 이 미지 수신부를 거쳐 이미지 데이터베이스에 임시 저장된다. 단계(S120)에서는 단계(S110)에서 이미지 데이터베이스에 임시 저장된 이미지 데이터 중 체커보드 칸을 식 별 불가한 데이터를 제거한다. 구체적으로 인공지능 모델 학습 시에 식별 정밀도를 높일 수 없는 이미지를 제거 한다. 예를 들어, 체커보드의 원점을 구분할 수 없는 경우, 체커보드의 칸을 구분할 수 없는 경우, 이미지의 왜 곡이 심한 경우에 이미지를 제거할 수 있다. 단계(S130)에서는 단계(S120)에서 선별한 이미지 데이터를 데이터 처리부에 의해 이미지 데이터 증강 기술 을 활용하여 증강한다. 구체적으로 인공지능 모델이 종래의 카메라 파라미터 추출 성능보다 뛰어난 성능을 갖기 에 충분한 분량의 이미지 데이터를 확보하는 과정이다. 예를 들어, 이미지 데이터 증강 방법으로 도 5를 참조하 여 상세히 설명하도록 한다. 도 5는 본 발명의 일 실시예에 따른 체커보드 이미지 데이터 증강 예시를 도시한 도면이다. 도 5의 a1는 이미지 데이터 증강 방법 중 이미지를 옮기는 방법(Translation)의 예시이다. 도 5a1는 이미지에서 체커보드가 촬영된 범위안에서 이미지를 옮기고 이미지를 옮기면서 생긴 빈 영역은 검은색으로 메웠다. 도 5의 a2는 이미지 데이터 증강 방법 중 이미지 명도에 변화를 주는 방법(Brightness jitter)의 예시이다. 도 5a2는 체커보드가 촬영된 이미지의 명도가 원본에 비해 낮아졌다. 도 5의 a3는 이미지 데이터 증강 방법 중 가우시안 정규분포를 가지는 잡음을 사용한 방법(Gaussian noise)의 예시이다. 도 5의 a4는 이미지 데이터 증강 방법 중 전단(剪斷, 물체 내부 양쪽에 반대 방향을 가진 동일한 힘이 가해져 물체 내부에 어긋남이 생기는 현상, 기하체에 전단을 적용시키면 전단하는 축을 제외한 나머지 축의 좌표값을 일정한 비례로 변환함) 변환을 사용한 방법(Shear Transform)의 예시이다. 도 5a4는 이미지를 전단 변환하면서 생긴 빈 영역은 검은색으로 메웠다. 도 5의 a5는 이미지 데이터 증강 방법 중 세로 대칭 이동을 사용한 방법(Reflection)의 예시이다. 도 5의 a6는 이미지 데이터 증강 방법 중 이미지 크기를 조정하는 방법(Scaling)의 예시이다. 다시 도 4를 참조하여, 단계(S140)에서는 단계(S130)에서 데이터 처리부에 의해 이미지 데이터 증강 방법 을 통해 늘어난 이미지 데이터를 이미지 데이터베이스에 저장한다. 단계(S150)에서는 제1 인공지능 모델을 이미지 데이터베이스에 저장된 이미지 데이터로 학습시킨다. 제1 인공지능 모델은 학습을 통해 체커보드의 칸 개수, 체커보드의 칸 치수 및 체커보드 전체의 치수를 추출할 수 있다. 상기 제1 인공지능 모델은 FineNet 인공지능 모델 구조에서 Softmax 층 이후의 구조를 체커보드의 칸 개수, 체 커보드의 칸 치수 및 체커보드 전체의 치수를 추출할 수 있도록 변형할 수 있다. 상기 제1 인공지능 모델의 학습에서 예를 들면, 상기 제1 인공지능 모델의 입력은3종의 체커보드 유형별 이미지 로 지정될 수 있고, 상기 제1 인공지능 모델의 출력은 체커보드 칸 개수 및 체커보드 치수로 지정될 수 있다. 도 6은 본 발명의 일 실시예에 따른 체커보드 유형을 도시한 도면이다. 도 6의 a는 체커보드의 칸 너비 10mm 및 칸 높이 10mm, 체커보드 전체의 너비 75mm 및 높이 60mm, 체커보드 칸 개수 35개인 체커보드 유형의 예시이다. 도 6의 b는 체커보드의 칸 너비 13mm 및 칸 높이 13mm, 체커보드 전체의 너비 75mm 및 높이 60mm, 체커보드 칸 개수 20개인 체커보드 유형의 예시이다. 도 6의 c는 체커보드의 칸 너비 15mm 및 칸 높이 15mm, 체커보드 전체의 너비 75mm 및 높이 60mm, 체커보드 칸 개수 20개인 체커보드 유형의 예시이다. 이와 같이 칸 개수와 칸 치수가 상이한 체커 보드 및 그 증강 데이터가 저정되고 이를 이용하여 제1인공지능 모 델 또는 제2인공지능 모델이 학습될 수 있다. 다시 도 4를 참조하면, 단계(S160)에서는 제2 인공지능 모델을 이미지 데이터베이스에 저장된 라벨링된 이 미지 데이터를 입력으로 하여 학습시킨다. 상기 제2 인공지능 모델은 학습을 통해 초점거리 ax, 초점거리 ay, 스케일 계수 mx, 스케일 계수 my 및 비대칭계수 f 를 추출할 수 있다. 상기 제2 인공지능 모델은 22개 계층으로 구성된 합성곱 신경망인 GoogLeNet 구조를 초점거리 ax, 초점거리 ay, 스케일 계수 mx, 스케일 계수 my 및 비대칭계수 f 를 포함하는 카메라 내부 파라미터를 추출할 수 있도록 활용 하였다. 상기 제2 인공지능 모델의 학습에서 예를 들면, 상기 제2 인공지능 모델의 입력은 3종의 체커보드 타입별 다수 의 이미지로 지정될 수 있다. 상기 3종의 체커보드 타입별 다수의 이미지는 라벨링된 모서리점 및 좌표값 데이 터를 포함한다. 도 7은 본 발명의 일 실시예에 따른 체커보드 모서리점 라벨링 예시를 도시한 도면이다. 도 7의 a는 체커보드의 칸 너비 10mm 및 칸 높이 10mm, 체커보드 전체의 너비 75mm 및 높이 60mm, 체커보드 칸 개수 35개인 체커보드 유형 이미지 데이터의 체커보드 모서리점 라벨링 예시이다. 도 7의 b는 체커보드의 칸 너비 13mm 및 칸 높이 13mm, 체커보드 전체의 너비 75mm 및 높이 60mm, 체커보드 칸 개수 20개인 체커보드 유형 이미지 데이터의 체커보드 모서리점 라벨링 예시이다. 도 7의 c는 체커보드의 칸 너비 15mm 및 칸 높이 15mm, 체커보드 전체의 너비 75mm 및 높이 60mm, 체커보드 칸 개수 20개인 체커보드 유형 이미지 데이터의 체커보드 모서리점 라벨링 예시이다. 본 발명의 실시예에서는 전술한 바와 같은 체커보드 입력 정보를 이용하여 제1인공지능 모델 및 제2인공지능 모 델을 학습할 수 있으며, 제1인공지능 모델을 활용하여 체커보드의 칸 개수 및 칸 치수를 자동으로 추출하고, 제 2인공지능 모델을 이용하여 획득한 내부 및 외부 파라미터를 획득할 수 있다. 이렇게 획득된 내부 및 외부 파라미터를 기반으로 위치 정보는 재투영 오차 결과를 바탕으로 그 성능을 확인할 수 있다. 도 8은 본 발명의 일 실시예에 따른 카메라 캘리브레이션 재투영 오차 결과를 비교한 그래프도이다. 도 8의 a는 종래 카메라 캘리브레이션 재투영 오차 결과의 그래프도이며, 종래 기술의 경우에는 7개 정도의 영 상을 활용하여 카메라 캘리브레이션을 수행한 것으로 카메라 캘리브레이션 결과 0.62 픽셀의 재투영 오차를 보 여주었다. 도 8의 b는 학습된 인공지능 모델을 활용한 카메라 캘리브레이션 재투영 오차 결과의 그래프도이다. 인공지능 모델은 60장 이상의 훈련셋을 활용하여 카메라 캘리브레이션 결과는 0.43 픽셀의 재투영 오차를 보여주었다. 따라서 인공지능 모델을 활용한 카메라 카메라 캘리브레이션 결과는 단일 이미지 데이터를 사용하면서도 종래 카메라 캘리브레이션과 비교하여 재투영 오차의 감소를 보여주었다. 전술한 본 발명의 실시예에 따른 방법은 다양한 컴퓨터 구성요소를 통하여 실행될 수 있는 프로그램 명령 형태 로 구현되어 컴퓨터 판독 가능한 기록매체에 기록될 수 있다. 컴퓨터 판독 가능한 기록매체는 프로그램 명령어, 데이터 파일, 데이터 구조 등을 단독으로 또는 조합하여 포함할 수 있다. 컴퓨터 판독 가능한 기록매체에 기록 되는 프로그램 명령은 본 발명의 실시예를 위하여 특별히 설계되고 구성된 것이거나, 컴퓨터 소프트웨어 분야의통상의 기술자에게 공지되어 사용가능한 것일 수 있다. 컴퓨터 판독 가능한 기록매체는, 하드디스크, 플로피디 스크, 자기테이프 등의 자기기록 매체, CD-ROM, DVD 등의 광기록 매체, 플롭티컬디스크 등의 자기-광 매체, ROM, RAM, 플래시 메모리 등과 같이, 프로그램 명령을 저장하고 수행하도록 구성된 하드웨어를 포함한다. 프로 그램 명령은, 컴파일러에 의해 만들어지는 기계어 코드, 인터프리터를 사용하여 컴퓨터에서 실행될 수 있는 고 급언어 코드를 포함한다. 하드웨어는 본 발명에 따른 방법을 처리하기 위하여 하나 이상의 소프트웨어 모듈로서 작동하도록 구성될 수 있고, 그 역도 마찬가지이다. 본 발명의 실시예에 따른 방법은 프로그램 명령 형태로 전자장치에서 실행될 수 있다. 전자장치는 스마트폰이나 스마트패드 등의 휴대용 통신 장치, 컴퓨터 장치, 휴대용 멀티미디어 장치, 휴대용 의료 기기, 카메라, 웨어러 블 장치, 가전 장치를 포함한다. 본 발명의 실시예에 따른 방법은 컴퓨터 프로그램 제품에 포함되어 제공될 수 있다. 컴퓨터 프로그램 제품은 상 품으로서 판매자 및 구매자 간에 거래될 수 있다. 컴퓨터 프로그램 제품은 기기로 읽을 수 있는 기록매체의 형 태로, 또는 어플리케이션 스토어를 통해 온라인으로 배포될 수 있다. 온라인 배포의 경우에, 컴퓨터 프로그램 제품의 적어도 일부는 제조사의 서버, 어플리케이션 스토어의 서버, 또는 중계 서버의 메모리와 같은 저장 매체 에 적어도 일시 저장되거나, 임시적으로 생성될 수 있다. 본 발명의 실시예에 따른 구성요소, 예컨대 모듈 또는 프로그램 각각은 단수 또는 복수의 서브 구성요소로 구성 될 수 있으며, 이러한 서브 구성요소들 중 일부 서브 구성요소가 생략되거나, 또는 다른 서브 구성요소가 더 포 함될 수 있다. 일부 구성요소들(모듈 또는 프로그램)은 하나의 개체로 통합되어, 통합되기 이전의 각각의 해당 구성요소에 의해 수행되는 기능을 동일 또는 유사하게 수행할 수 있다. 본 발명의 실시예에 따른 모듈, 프로그 램 또는 다른 구성요소에 의해 수행되는 동작들은 순차적, 병렬적, 반복적 또는 휴리스틱하게 실행되거나, 적어 도 일부 동작이 다른 순서로 실행되거나, 생략되거나, 또는 다른 동작이 추가될 수 있다."}
{"patent_id": "10-2021-0188058", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "전술한 본 발명의 설명은 예시를 위한 것이며, 본 발명이 속하는 기술분야의 통상의 지식을 가진 자는 본 발명 의 기술적 사상이나 필수적인 특징을 변경하지 않고서 다른 구체적인 형태로 쉽게 변형이 가능하다는 것을 이해 할 수 있을 것이다. 그러므로 이상에서 기술한 실시예들은 모든 면에서 예시적인 것이며 한정적이 아닌 것으로 이해해야만 한다. 예를 들어, 단일형으로 설명되어 있는 각 구성 요소는 분산되어 실시될 수도 있으며, 마찬가 지로 분산된 것으로 설명되어 있는 구성 요소들도 결합된 형태로 실시될 수 있다. 본 발명의 범위는 후술하는 청구범위에 의하여 나타내어지며, 청구범위의 의미 및 범위 그리고 그 균등 개념으 로부터 도출되는 모든 변경 또는 변형된 형태가 본 발명의 범위에 포함되는 것으로 해석되어야 한다."}
{"patent_id": "10-2021-0188058", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 종래 카메라 캘리브레이션 방법을 도시한 흐름도이다. 도 2는 본 발명의 일 실시예에 따른 카메라 캘리브레이션 장치를 도시한 도면이다.도 3은 본 발명의 일 실시예에 따라, 인공지능 모델을 이용한 카메라 캘리브레이션 방법을 도시한 흐름도이다. 도 4는 본 발명의 일 실시예에 따른 인공지능 모델 학습 방법을 도시한 흐름도이다. 도 5는 본 발명의 일 실시예에 따른 체커보드 이미지 데이터 증강 예시를 도시한 도면이다. 도 6은 본 발명의 일 실시예에 따른 체커보드 유형을 도시한 도면이다. 도 7은 본 발명의 일 실시예에 따른 체커보드 모서리점 라벨링 예시를 도시한 도면이다. 도 8은 본 발명의 일 실시예에 따른 카메라 캘리브레이션 재투영 오차 결과를 비교한 그래프도이다."}
