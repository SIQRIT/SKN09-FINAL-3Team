{"patent_id": "10-2023-0122049", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0039206", "출원번호": "10-2023-0122049", "발명의 명칭": "라이다 센서와 카메라를 이용한 객체 추적 방법 및 그 장치", "출원인": "주식회사 신세계아이앤씨", "발명자": "변소현"}}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "적어도 하나의 프로세서에 의해 동작하는 객체 추적 장치의 동작 방법으로서,현 시점까지 라이다 센서에 의해 검출된 객체 라이다 좌표들을 이용하여 객체 이동 속도를 산출하는 단계,상기 객체 라이다 좌표들을 이용한 IoU(Intersection over Union) 연산 결과 및 상기 객체 이동 속도를 이용하여, 객체 검출 정확도를 연산하는 단계,상기 객체 검출 정확도가 임계 기준을 충족하지 않으면, 카메라 기반의 객체 검출을 결정하는 단계, 상기 카메라 기반의 객체 검출이 결정되면, 카메라를 통해 획득한 이미지 데이터를 기초로 객체를 검출하고, 검출한 객체의 객체 이미지 좌표를 획득하는 단계, 그리고상기 객체 이미지 좌표를 이용하여, 객체 추적을 실행하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에서,상기 획득하는 단계는,상기 카메라 기반의 객체 검출이 결정된 시점을 기준으로, 상기 결정된 시점부터 과거 시점까지 수집된 멀티이미지 프레임으로부터 객체에 대한 바운딩 박스(bounding box)들을 추출하는 단계, 그리고추출한 바운딩 박스들의 IoU 연산을 통해 동일 객체의 바운딩 박스들을 검출하고, 검출한 동일 객체의 바운딩박스들의 좌표의 평균값을 상기 객체 이미지 좌표로 검출하는 단계를 포함하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에서,상기 검출하는 단계 이후,상기 객체 라이다 좌표와 이미지 투영 기술을 이용하여, 상기 객체 이미지 좌표를 상기 객체 라이다 좌표와 동일한 3차원 공간 내의 3차원 객체 이미지 좌표로 변환하는 단계를 더 포함하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에서,상기 변환하는 단계 이후,카메라 설치 위치를 기준으로 상기 3차원 객체 이미지 좌표에 이르는 수평 방향으로의 거리 및 카메라 초점 거리를 기초로 설정한 가중치를 상기 3차원 객체 이미지 좌표에 반영하여 상기 3차원 객체 이미지 좌표를 보정하는 단계를 더 포함하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에서,공개특허 10-2025-0039206-3-상기 획득하는 단계는,복수의 카메라를 통해 수집한 각각의 멀티 이미지 프레임으로부터 각각의 객체 이미지 좌표를 검출하고,상기 획득하는 단계와 상기 실행하는 단계 사이에,상기 각각의 객체 이미지 좌표와 상기 카메라 기반의 객체 검출이 결정된 시점의 객체 라이다 좌표 간의 IoU 연산을 통해 상기 객체 라이다 좌표와 가장 근접한 객체 이미지 좌표를 객체 추적 대상으로 검출하는 단계를 더 포함하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에서,상기 객체 이동 속도를 산출하는 단계는,상기 검출된 객체 라이다 좌표들 간의 유클리드 거리(Euclidean distance)를 합산한 값과 좌표들의 개수를 이용하여, 상기 객체 이동 속도를 산출하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에서,상기 객체 검출 정확도를 연산하는 단계는,상기 검출된 객체 라이다 좌표들 간의 IoU 연산값의 평균값과 상긱 객체 이동 속도를 이용하여, 상기 객체 검출정확도를 연산하는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에서,상기 객체 이동 속도를 산출하는 단계 이전에,인접 프레임 간의 동일 객체로 판단될 수 있는 IoU 연산 최소값과, 객체의 키에 따라 계산된 최소 평균 속도를이용하여 객체 별로 상기 임계 기준을 설정하는 단계를 더 포함하고,상기 최소 평균 속도는,상기 라이다 센서를 통해 수집한 포인트 클라우드 데이터를 기초로, 객체의 키를 측정하고, 측정한 키에 따른평균 보폭을 통해 산출되는, 방법."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "라이다 센서를 통해 수집한 포인트 클라우드 데이터(Point Cloud Data, PCD)를 분석하여 객체를 검출하고, 검출한 객체의 라이다 좌표를 추출하는 라이다 기반 객체 인식부,카메라를 통해 수집한 이미지 데이터를 기초로 객체를 검출하고, 검출한 객체의 이미지 좌표를 추출하는 카메라기반 객체 인식부,상기 라이다 기반 객체 인식부에 의해 현 시점까지 검출된 객체 라이다 좌표들을 이용하여 객체 이동 속도를 산출하는 객체 이동 속도 검출부,상기 객체 라이다 좌표들을 이용한 IoU(Intersection over Union) 연산 결과 및 상기 객체 이동 속도를 이용하여, 객체 검출 정확도를 연산하는 객체 검출 정확도 계산부, 상기 객체 검출 정확도가 임계 기준을 충족하는지 여부에 따라 상기 카메라 기반 객체 인식부의 동작을 선택적으로 결정하는 객체 검출 제어부, 그리고상기 객체 검출 제어부의 선택에 따라 결정된 객체 라이다 좌표 또는 객체 이미지 좌표를 이용하여 객체를 추적하는 객체 추적부를 포함하는, 객체 추적 장치.공개특허 10-2025-0039206-4-청구항 10 제9항에서,상기 카메라 기반 객체 인식부는,상기 카메라 기반의 객체 검출이 결정된 시점을 기준으로, 상기 결정된 시점부터 과거 시점까지 수집된 멀티이미지 프레임으로부터 객체에 대한 바운딩 박스(bounding box)들을 추출하고, 추출한 바운딩 박스들의 IoU 연산을 통해 동일 객체의 바운딩 박스들을 검출하고, 검출한 동일 객체의 바운딩 박스들의 좌표의 평균값을 상기객체 이미지 좌표로 검출하며,상기 객체 이미지 좌표는,복수의 카메라를 통해 수집한 각각의 멀티 이미지 프레임으로부터 각각 검출되고,상기 복수의 카메라를 통해 검출된 각각의 객체 이미지 좌표와 상기 카메라 기반의 객체 검출이 결정된 시점의객체 라이다 좌표 간의 IoU(Intersection over Union) 연산을 통해 상기 객체 라이다 좌표와 가장 근접한 객체이미지 좌표를 객체 추적 대상으로 검출하여 상기 객체 검출 제어부로 출력하는 좌표 동기화부를 더 포함하는, 객체 추적 장치."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에서,상기 좌표 동기화부는,상기 객체 라이다 좌표를 통해 확인한 2축을 이용한 이미지 투영 기술을 통해 상기 각각의 객체 이미지 좌표를객체 추적 대상인 3차원 객체 이미지 좌표로 각각 변환하는, 객체 추적 장치."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에서,상기 좌표 동기화부는,각각의 3차원 객체 이미지 좌표에 사전에 설정된 가중치를 적용하여 보정하고,상기 가중치는,카메라 설치 위치를 기준으로 3차원 객체 이미지 좌표에 이르는 수평 방향으로의 거리 및 카메라 초점 거리를기초로 설정되는, 객체 추적 장치."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제9항에서,상기 객체 이동 속도 검출부는,상기 현 시점까지 검출된 객체 라이다 좌표들 간의 유클리드 거리(Euclidean distance)를 합산한 값과 좌표들의개수를 이용하여, 상기 객체 이동 속도를 계산하는, 객체 추적 장치."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제9항에서,상기 객체 검출 정확도 계산부는,상기 현 시점까지 검출된 객체 라이다 좌표들간의 IoU 연산값의 평균값 및 상기 객체 이동 속도를 이용하여, 상기 객체 검출 정확도를 연산하는, 객체 추적 장치."}
{"patent_id": "10-2023-0122049", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제9항에서,공개특허 10-2025-0039206-5-상기 객체 검출 제어부는, 인접 프레임 간의 동일 객체로 판단될 수 있는 IoU 연산 최소값을 설정하고,상기 라이다 센서를 통해 수집한 포인트 클라우드 데이터를 기초로, 객체의 키를 측정하고, 측정한 키에 따른평균 보폭을 통해 최소 평균 속도를 계산하며,상기 설정한 IoU 연산 최소값과 객체 별로 계산된 최소 평균 속도를 이용하여 객체 별로 상기 객체 검출 정확도와 비교하기 위한 임계 기준을 설정하는, 객체 추적 장치."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "적어도 하나의 프로세서에 의해 동작하는 객체 추적 장치의 동작 방법으로서, 현 시점까지 라이다 센서에 의해 검출된 객체 라이다 좌표들을 이용하여 객체 이동 속도를 산출하는 단계, 상기 객체 라이다 좌표들을 이용한 IoU(Intersection over Union) 연산 결과 및 상기 객체 이동 속도를 이용하여, 객체 검출 정확도를 연산하는 단 계, 상기 객체 검출 정확도가 임계 기준을 충족하지 않으면, 카메라 기반의 객체 검출을 결정하는 단계, 상기 카 메라 기반의 객체 검출이 결정되면, 카메라를 통해 획득한 이미지 데이터를 기초로 객체를 검출하고, 검출한 객 체의 객체 이미지 좌표를 획득하는 단계, 그리고 상기 객체 이미지 좌표를 이용하여, 객체 추적을 실행하는 단계 를 포함한다."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 라이다 센서와 카메라를 이용한 객체 추적 방법 및 그 장치에 관한 것으로서, 매장 등과 같은 객체 추적 공간 내 객체(예, 사람)의 동선을 추적하는 알고리즘의 성능 고도화에 관한 기술이다."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "객체의 동선을 추적하는 객체 추적 기술은 산업의 다양한 분야에서 이용되고 있다. 최근 무인 매장의 도입으로 매장 안의 고객을 탐지하고 고객의 이동을 추적하고자 하는 요구가 증가하고 있다. 객체 추적 기술은 자율 주행이나 고객 데이터 분석 등 다양한 분야에서 활용되는 기술로서, 추적 대상인 객체를 인식하는 기술은 크게 두 가지가 있다. 하나는 라이다 센서에서 수집되는 포인트 클라우드 데이터(Point Cloud Data, 이하, ‘PCD’라 통칭함)를 활용 한 라이다 기반의 객체 인식 기술이고, 나머지는 카메라 이미지에서 Object Detection 모델을 활용한 카메라 기 반의 객체 인식 기술이다. 라이다 기반의 객체 인식 기술의 경우, 객체에게 발사한 레이저 펄스가 반사되어 돌아오기까지 데이터의 정합성 이 보존이 되어야 정확한 PCD가 생성되나, 그렇지 못한 경우 PCD가 희소해지거나, 분산되어 객체의 특징이 잘 수집되지 못한 경우가 존재하며 이는 추적 시스템의 정확도 저하로 이어질 수 있다. 카메라는 그 순간의 이미지를 기반으로 객체를 검출하기 때문에, 라이다 센서보다 데이터의 정합성에 대한 요구 도가 상대적으로 낮지만, 카메라의 사각 지대에 고객이 위치한 경우, 신뢰성을 확보하기 어려운 점이 존재한다."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시는, 기본적으로 라이다 센서 기반의 객체 인식을 통해 객체를 추적하되, 라이다 센서를 통해 인식된 객 체의 객체 검출 정확도가 임계 기준을 충족하지 못할 경우, 선택적으로 카메라 기반의 객체 인식을 수행하여 객 체 인식 성능을 보완할 수 있는 객체 추적 방법 및 그 장치를 제공한다."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "한 특징에 따르면, 적어도 하나의 프로세서에 의해 동작하는 객체 추적 장치의 동작 방법으로서, 현 시점까지 라이다 센서에 의해 검출된 객체 라이다 좌표들을 이용하여 객체 이동 속도를 산출하는 단계, 상기 객체 라이다 좌표들을 이용한 IoU(Intersection over Union) 연산 결과 및 상기 객체 이동 속도를 이용하여, 객체 검출 정확 도를 연산하는 단계, 상기 객체 검출 정확도가 임계 기준을 충족하지 않으면, 카메라 기반의 객체 검출을 결정 하는 단계, 상기 카메라 기반의 객체 검출이 결정되면, 카메라를 통해 획득한 이미지 데이터를 기초로 객체를 검출하고, 검출한 객체의 객체 이미지 좌표를 획득하는 단계, 그리고 상기 객체 이미지 좌표를 이용하여, 객체 추적을 실행하는 단계를 포함한다. 상기 획득하는 단계는, 상기 카메라 기반의 객체 검출이 결정된 시점을 기준으로, 상기 결정된 시점부터 과거 시점까지 수집된 멀티 이미지 프레임으로부터 객체에 대한 바운딩 박스(bounding box)들을 추출하는 단계, 그리 고 추출한 바운딩 박스들의 IoU 연산을 통해 동일 객체의 바운딩 박스들을 검출하고, 검출한 동일 객체의 바운 딩 박스들의 좌표의 평균값을 상기 객체 이미지 좌표로 검출하는 단계를 포함할 수 있다.상기 검출하는 단계 이후, 상기 객체 라이다 좌표와 이미지 투영 기술을 이용하여, 상기 객체 이미지 좌표를 상 기 객체 라이다 좌표와 동일한 3차원 공간 내의 3차원 객체 이미지 좌표로 변환하는 단계를 더 포함할 수 있다. 상기 변환하는 단계 이후, 카메라 설치 위치를 기준으로 상기 3차원 객체 이미지 좌표에 이르는 수평 방향으로 의 거리 및 카메라 초점 거리를 기초로 설정한 가중치를 상기 3차원 객체 이미지 좌표에 반영하여 상기 3차원 객체 이미지 좌표를 보정하는 단계를 더 포함할 수 있다. 상기 획득하는 단계는, 복수의 카메라를 통해 수집한 각각의 멀티 이미지 프레임으로부터 각각의 객체 이미지 좌표를 검출하고, 상기 획득하는 단계와 상기 실행하는 단계 사이에, 상기 각각의 객체 이미지 좌표와 상기 카 메라 기반의 객체 검출이 결정된 시점의 객체 라이다 좌표 간의 IoU 연산을 통해 상기 객체 라이다 좌표와 가장 근접한 객체 이미지 좌표를 객체 추적 대상으로 검출하는 단계를 더 포함할 수 있다. 상기 객체 이동 속도를 산출하는 단계는, 상기 검출된 객체 라이다 좌표들 간의 유클리드 거리(Euclidean distance)를 합산한 값과 좌표들의 개수를 이용하여, 상기 객체 이동 속도를 산출할 수 있다. 상기 객체 검출 정확도를 연산하는 단계는, 상기 검출된 객체 라이다 좌표들 간의 IoU 연산값의 평균값과 상긱 객체 이동 속도를 이용하여, 상기 객체 검출 정확도를 연산할 수 있다. 상기 객체 이동 속도를 산출하는 단계 이전에, 인접 프레임 간의 동일 객체로 판단될 수 있는 IoU 연산 최소값 과, 객체의 키에 따라 계산된 최소 평균 속도를 이용하여 객체 별로 상기 임계 기준을 설정하는 단계를 더 포함 하고, 상기 최소 평균 속도는, 상기 라이다 센서를 통해 수집한 포인트 클라우드 데이터를 기초로, 객체의 키를 측정하고, 측정한 키에 따른 평균 보폭을 통해 산출될 수 있다. 다른 특징에 따르면, 객체 추적 장치는 라이다 센서를 통해 수집한 포인트 클라우드 데이터(Point Cloud Data, PCD)를 분석하여 객체를 검출하고, 검출한 객체의 라이다 좌표를 추출하는 라이다 기반 객체 인식부, 카메라를 통해 수집한 이미지 데이터를 기초로 객체를 검출하고, 검출한 객체의 이미지 좌표를 추출하는 카메라 기반 객 체 인식부, 상기 라이다 기반 객체 인식부에 의해 현 시점까지 검출된 객체 라이다 좌표들을 이용하여 객체 이 동 속도를 산출하는 객체 이동 속도 검출부, 상기 객체 라이다 좌표들을 이용한 IoU(Intersection over Union) 연산 결과 및 상기 객체 이동 속도를 이용하여, 객체 검출 정확도를 연산하는 객체 검출 정확도 계산부, 상기 객체 검출 정확도가 임계 기준을 충족하는지 여부에 따라 상기 카메라 기반 객체 인식부의 동작을 선택적으로 결정하는 객체 검출 제어부, 그리고 상기 객체 검출 제어부의 선택에 따라 결정된 객체 라이다 좌표 또는 객체 이미지 좌표를 이용하여 객체를 추적하는 객체 추적부를 포함한다. 상기 카메라 기반 객체 인식부는, 상기 카메라 기반의 객체 검출이 결정된 시점을 기준으로, 상기 결정된 시점 부터 과거 시점까지 수집된 멀티 이미지 프레임으로부터 객체에 대한 바운딩 박스(bounding box)들을 추출하고, 추출한 바운딩 박스들의 IoU 연산을 통해 동일 객체의 바운딩 박스들을 검출하고, 검출한 동일 객체의 바운딩 박스들의 좌표의 평균값을 상기 객체 이미지 좌표로 검출하며, 상기 객체 이미지 좌표는, 복수의 카메라를 통해 수집한 각각의 멀티 이미지 프레임으로부터 각각 검출되고, 상기 객체 추적 장치는 상기 복수의 카메라를 통해 검출된 각각의 객체 이미지 좌표와 상기 카메라 기반의 객체 검출이 결정된 시점의 객체 라이다 좌표 간의 IoU(Intersection over Union) 연산을 통해 상기 객체 라이다 좌 표와 가장 근접한 객체 이미지 좌표를 객체 추적 대상으로 검출하여 상기 객체 검출 제어부로 출력하는 좌표 동 기화부를 더 포함할 수 있다. 상기 좌표 동기화부는, 상기 객체 라이다 좌표를 통해 확인한 2축을 이용한 이미지 투영 기술을 통해 상기 각각 의 객체 이미지 좌표를 객체 추적 대상인 3차원 객체 이미지 좌표로 각각 변환할 수 있다. 상기 좌표 동기화부는, 각각의 3차원 객체 이미지 좌표에 사전에 설정된 가중치를 적용하여 보정하고, 상기 가 중치는, 카메라 설치 위치를 기준으로 3차원 객체 이미지 좌표에 이르는 수평 방향으로의 거리 및 카메라 초점 거리를 기초로 설정될 수 있다. 상기 객체 이동 속도 검출부는, 상기 현 시점까지 검출된 객체 라이다 좌표들 간의 유클리드 거리(Euclidean distance)를 합산한 값과 좌표들의 개수를 이용하여, 상기 객체 이동 속도를 계산할 수 있다. 상기 객체 검출 정확도 계산부는, 상기 현 시점까지 검출된 객체 라이다 좌표들간의 IoU 연산값의 평균값 및 상 기 객체 이동 속도를 이용하여, 상기 객체 검출 정확도를 연산할 수 있다. 상기 객체 검출 제어부는, 인접 프레임 간의 동일 객체로 판단될 수 있는 IoU 연산 최소값을 설정하고, 상기 라 이다 센서를 통해 수집한 포인트 클라우드 데이터를 기초로, 객체의 키를 측정하고, 측정한 키에 따른 평균 보 폭을 통해 최소 평균 속도를 계산하며, 상기 설정한 IoU 연산 최소값과 객체 별로 계산된 최소 평균 속도를 이 용하여 객체 별로 상기 객체 검출 정확도와 비교하기 위한 임계 기준을 설정할 수 있다."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시에 따르면, 라이다 센서를 이용하여 획득한 객체의 이동 속도를 통해 객체의 검출 정확도를 산출하고, 라이다 센서 기반의 객체 검출 정확도가 낮아지면 카메라의 멀티 프레임 기반의 객체 검출을 수행함으로써, 객 체 추적 성능을 보완할 수 있다. 즉, 객체의 동선 추적시 카메라와 라이다 센서의 정보가 상호보완적으로 작용 하여 객체 인식 및 추적 성능을 높일 수 있다. 또한, 객체의 동선에 실패할 확률을 낮춤으로써, 다중 객체 간 아이디 스위칭(ID Switching) 문제를 방지할 수 있다. 또한, 카메라 활용 여부 판단시 공간의 좌표 정보에 의존하지 않고 오로지 객체 검출의 정확도로만 판별하기 때 문에, 공간 정보의 의존도가 낮다. 또한, 객체의 속도 기반으로 객체 검출의 정확도를 판별할 수 있으므로, 객체 검출의 정확도는 객체 추적 시스 템의 성능 지표로도 활용될 수 있다."}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참고로 하여 본 개시의 실시예에 대하여 본 개시가 속하는 기술 분야에서 통상의 지 식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나 본 개시는 여러가지 상이한 형태로 구현될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 개시를 명확하게 설명하기 위해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였 다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 \"포함\" 한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다 른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 또한, 명세서에 기재된 \"…부\", \"…기\", \"…모듈\" 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 본 발명에서 설명하는 장치들은 적어도 하나의 프로세서, 메모리 장치, 통신 장치 등을 포함하는 하드웨어로 구 성되고, 지정된 장소에 하드웨어와 결합되어 실행되는 프로그램이 저장된다. 하드웨어는 본 발명의 방법을 실행 할 수 있는 구성과 성능을 가진다. 프로그램은 도면들을 참고로 설명한 본 발명의 동작 방법을 구현한 명령어 (instructions)를 포함하고, 프로세서와 메모리 장치 등의 하드웨어와 결합하여 본 발명을 실행한다. 본 명세서에서 \"전송 또는 제공\"은 직접적인 전송 또는 제공하는 것 뿐만 아니라 다른 장치를 통해 또는 우회 경로를 이용하여 간접적으로 전송 또는 제공도 포함할 수 있다.본 명세서에서 단수로 기재된 표현은 \"하나\" 또는 \"단일\" 등의 명시적인 표현을 사용하지 않은 이상, 단수 또는 복수로 해석될 수 있다. 본 명세서에서 도면에 관계없이 동일한 도면번호는 동일한 구성요소를 지칭하며, \"및/또는\" 은 언급된 구성 요 소들의 각각 및 하나 이상의 모든 조합을 포함한다. 본 명세서에서, 제1, 제2 등과 같이 서수를 포함하는 용어들은 다양한 구성요소들을 설명하는데 사용될 수 있지 만, 상기 구성요소들은 상기 용어들에 의해 한정되지는 않는다. 상기 용어들은 하나의 구성요소를 다른 구성요 소로부터 구별하는 목적으로만 사용된다. 예를 들어, 본 개시의 권리 범위를 벗어나지 않으면서 제1 구성요소는 제2 구성요소로 명명될 수 있고, 유사하게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 본 명세서에서 도면을 참고하여 설명한 흐름도에서, 동작 순서는 변경될 수 있고, 여러 동작들이 병합되거나, 어느 동작이 분할될 수 있고, 특정 동작은 수행되지 않을 수 있다. 본 개시의 장치는 적어도 하나의 프로세서가 명령어들(instructions)을 실행함으로써, 본 개시의 동작을 수행할 수 있도록 구성 및 연결된 컴퓨팅 장치이다. 컴퓨터 프로그램은 프로세서가 본 개시의 동작을 실행하도록 기술 된 명령어들(instructions)을 포함하고, 비일시적-컴퓨터 판독가능 저장매체(non-transitory computer readable storage medium)에 저장될 수 있다. 컴퓨터 프로그램은 네트워크를 통해 다운로드 되거나, 제품 형태 로 판매될 수 있다. 본 개시의 인공지능 모델(Artificial Intelligence model, AI model)은 적어도 하나의 태스크(task)를 학습하 는 기계학습모델로서, 프로세서에 의해 실행되는 컴퓨터 프로그램으로 구현될 수 있다. 인공지능 모델이 학습하 는 태스크란, 기계 학습을 통해 해결하고자 하는 과제 또는 기계 학습을 통해 수행하고자 하는 작업을 지칭할 수 있다. 인공지능 모델은 컴퓨팅 장치에서 실행되는 컴퓨터 프로그램으로 구현될 수 있고, 네트워크를 통해 다 운로드 되거나, 제품 형태로 판매될 수 있다. 또는 인공지능 모델은 네트워크를 통해 다양한 장치들과 연동할 수 있다. 도 1은 한 실시예에 따른 객체 추적 장치의 구성을 나타낸 블록도이다. 도 1을 참조하면, 객체 추적 장치는 라이다 센서, 라이다 기반 객체 인식부, 객체 이동 속도 검 출부, 객체 검출 정확도 계산부, 카메라, 카메라 기반 객체 인식부, 좌표 동기화부, 객체 검출 제어부 및 객체 추적부를 포함할 수 있다. 객체 추적 장치는 라이다 센서 기반의 객체 추적의 한계점을 보완하고자 카메라의 이미지 데이터를 활용한 다. 객체 추적 장치는 객체의 이동 속도의 급격한 변화로 인해 라이다 센서 기반의 객체 검출 정확도가 순 간적으로 낮아질 경우, 멀티프레임 카메라 정합을 거친 이미지를 활용하여 객체 검출을 진행함으로써, 객체 검 출의 정확도를 높일 수 있다. 객체 추적 장치는 객체의 이동 속도를 기반으로 멀티프레임 과정의 상관 변수값을 가변적으로 할당하여 장 치의 최적화까지 가능하다. 라이다 센서는 객체 추적 공간의 소정의 위치에 설치되어, 레이저 신호를 방출하고 반사된 레이저 신호의 위치 정보를 스캐닝 한다. 라이다 센서는 객체의 동선을 추적하기 위해 객체 추적 공간의 여러 위치에 설치된다. 라이다 센서는 반사된 레이저 신호를 기초로, 감지 범위 내에서 특정 지점까지 측정된 거리 값에 대한 3차 원 공간 정보, 즉, 포인트 클라우드 데이터(Point Cloud Data, 이하, ‘PCD’라 통칭함)를 획득할 수 있다. 라이다 센서는 3차원(3D) 라이다 센서일 수 있다. 라이다 센서는 획득한 PCD를 라이다 기반 객체 인식부로 출력한다. 라이다 센서는 레이저 펄스를 조사하여 레이저 펄스가 반사되어 돌아오는 시간을 측정하고, 반사체의 위치 좌표를 측정한다. 라이다 센서는 항공 또는 위성에 탑재되어 지형 측량에 사용되며 스피드 건, 자율주행 등에 사용되고 있다. 이 때, 라이다 센서를 통해 수집되는 3차원 공간 상에 퍼져 있는 여러 포인트(point)의 집합을 PCD라고 한 다. 라이다 기반 객체 인식부는 기 학습된 라이다 기반 객체 인식 모델와 라이다 센서로부터 수집한 PCD 를 이용하여, 3차원 바운딩 박스(Bounding Box)로 정의되는 객체 영역을 검출한다. 여기서, 라이다 기반 객체 인식 모델은 PCD를 학습 데이터로 사용하여 객체를 인식/검출하도록 학습된 인공지능 모델로서, 예를 들어, PointNet과 같은 딥러닝 모델을 포함할 수 있다. 라이다 기반 객체 인식 모델은 PCD를 통 해 객체의 3차원 좌표 정보를 확인하고, 3차원 바운딩 박스 형태로 객체 영역을 나타내도록 학습된 모델일 수 있다. 라이다 기반 객체 인식부는 라이다 기반 객체 인식 모델을 이용하여, 라이다 센서를 통해 수집한 PCD 를 분석하여 객체를 검출하고, 검출한 객체의 라이다 좌표를 추출한다. 이하, 명세서에서 PCD를 통해 검출된 객체 좌표를 '객체 라이다 좌표'로 호칭하기로 한다. 객체 이동 속도 검출부는 라이다 기반 객체 인식부에 의해 현 시점까지 검출된 객체 라이다 좌표들을 이용하여 객체 이동 속도를 산출한다. 객체 이동 속도 검출부는 객체의 추적 ID와 객체 라이다 좌표들을 매핑하여 저장하므로, 현 시점으로부터 객체의 이전 라이다 좌표들을 확인할 수 있다. 객체 이동 속도 검출부는 현 시점까지 검출된 객체 라이다 좌표들을 이용하여, 실시간으로 객체의 이동 속 도를 측정한다. 객체 이동 속도 검출부는 현 시점까지 검출된 객체 라이다 좌표들 간의 유클리드 거리 (Euclidean distance)와 현 시점까지 검출된 객체 라이다 좌표들의 개수를 이용하여, 객체 이동 속도를 계산할 수 있다. 객체 검출 정확도 계산부는 객체 이동 속도를 이용하여 객체의 속도의 순간 변화율을 연산하고, 이를 기초 로 객체 검출 정확도를 계산할 수 있다. 객체 검출 정확도 계산부는 객체 라이다 좌표들을 이용한 IoU(Intersection over Union) 연산 결과 및 객 체 이동 속도를 이용하여, 객체 검출 정확도를 연산할 수 있다. 객체 검출 정확도 계산부는 IoU 연산시, 임의의 시점에 실제 검출된 객체 라이다 좌표와 예측한 객체 라이 다 좌표 간의 IoU 연산을 수행하고, 이러한 방식으로 모든 객체 라이다 좌표들에 대하여 IoU 연산값을 획득한 후, 획득한 IoU 연산값의 평균값을 객체 검출 정확도 연산시 사용한다. 이때, 객체 검출 정확도 계산부는 재귀 필터를 이용하여, 임의의 시점 이전에 수집된 과거 객체 라이다 좌 표들로부터 임의의 시점의 객체 라이다 좌표를 예측할 수 있다. 한 실시예에 따르면, 재귀 필터는 칼만 필터(Kalman Filter)가 사용될 수 있다. 칼만 필터는 잡음이 포함되어 있는 측정치를 바탕으로 선형 역학계의 상태를 추정하는데, 과거의 측정값을 바탕으로 현재의 상태 변수의 결합 분포를 추정한다. 칼만 필터는 컴퓨터 비전, 로봇 공학, 레이다 등의 여러 분야에 사용되고 있다. 객체 검출 정확도 계산부는 칼만 필터를 이용하여, 과거의 객체 바운딩 박스의 좌표를 기초로, 현재의 객 체의 위치 좌표를 추정할 수 있다. 카메라는 객체 추적 공간의 소정의 위치에 설치되어, 객체 추적 공간을 촬영하여 객체가 포함된 이미지 데 이터를 생성 및 출력한다. 카메라는 객체의 동선을 추적하기 위해 객체 추적 공간의 여러 위치에 설치된다. 카메라는 라이다 센서가 설치된 지점과 근접한 지점에 적어도 하나 설치될 수 있다. 카메라는 실시간 스트리밍 방식으로 촬영한 이미지 데이터를 카메라 기반 객체 인식부로 출력할 수 있다. 카메라 기반 객체 인식부는 이미지 데이터로부터 객체를 인식하도록 학습된 카메라 기반 객체 인식 모델을 이용하여, 객체를 검출하고, 검출한 객체의 이미지 좌표를 출력한다. 이하, 명세서에서 카메라 기반 객체 인식부에 의해 검출된 객체 좌표를 '객체 이미지 좌표'로 호칭한다. 카메라 기반 객체 인식부는 이미지로부터 객체를 검출하는 고전적인 객체 검출 알고리즘, 및/또는 인공지 능 모델을 이용할 수 있다. 한 실시예에 따르면, 카메라 기반 객체 인식 모델은 심층 신경망(Deep Neural Network, DNN) 모델일 수 있다. 심층 신경망은 이미지 데이터로부터 배경과 객체를 구분하여 객체를 식별하고, 여러 개의 객체들에 대한 위치를 바운딩 박스로 지정해서 탐색하는 기술로서, 대표적인 심층 신경망 기반 객체 인식 모델은 YOLO(You Only Look Once) 시리즈 모델, Fast R-CNN(Convolutional Neural Networks), DINO(self distillation with no labels) 등이 있다. 카메라 기반 객체 인식부는 객체 검출 제어부로부터 카메라 기반의 객체 검출을 요청 받으면, 카메라 기반 객체 인식 모델을 이용하여 그 시점을 기준으로 과거 시점까지 수집된 멀티 이미지 프레임으로부터 객체에 대한 바운딩 박스들을 추출하고, 추출한 바운딩 박스들의 IoU 연산을 통해 동일 객체의 바운딩 박스들을 검출하 며, 검출한 동일 객체의 바운딩 박스들의 좌표의 평균값을 객체 이미지 좌표로 검출한다. 여기서, 객체 이미지 좌표는 복수의 카메라를 통해 수집한 각각의 멀티 이미지 프레임으로부터 각각 검출 될 수 있다. 기본적으로, 카메라는 일정 큐(Queue) 사이즈의 버퍼(buffer)를 구비하고, 버퍼에 이미지 프레임을 적재하 고 일정 시점이 경과하여 수집된 이미지 프레임은 제거한다. 따라서, 카메라 기반 객체 인식부는 객체 검 출 제어부로부터 호출 받은 시점을 기준으로 현재 이미지 프레임으로부터 n개의 과거 이미지 프레임들을 수집하여 분석한다. 단일 프레임이 아닌 멀티 프레임을 분석하는 이유는 프레임 단위로, 객체의 움직임으로 영상이 순간적으로 그리 고 상대적으로 손실이 많이 된 장면에서는 객체 검출에 실패할 수 있기 때문에 이러한 경우를 대비하여 현 시점 바로 직전까지 수집된 이미지 프레임들을 추가로 분석하여 객체 검출 실패율을 낮추기 위해서이다. 카메라 기반 객체 인식부는 객체 검출 제어부의 요청에 따라 객체 검출 정확도의 낮은 정도(레벨)에 따라 객체 검출 대상인 이미지 프레임의 개수를 가변적으로 조정할 수 있다. 이때, 사전에 객체 검출 정확도를 일정 수치 범위로 레벨화하고, 각 레벨 별로 멀티 이미지 프레임의 개수를 차 등적으로 설정해둘 수 있다. 예컨대, 객체 검출 정확도가 TH1 이하이면, 멀티 이미지 프레임의 개수인 n을 3으 로 설정하고, 객체 검출 정확도가 TH2 이하이면, 멀티 이미지 프레임의 개수인 10으로 설정할 수 있다. 이와 같이 설정된 이미지 프레임의 개수만큼 카메라 기반 객체 인식부는 객체에 대한 바운딩 박스들을 추 출하고, 추출한 바운딩 박스들의 IoU 연산을 통해 동일 객체의 바운딩 박스들을 검출하며, 검출한 동일 객체의 바운딩 박스들의 좌표의 평균값을 객체 이미지 좌표로 검출할 수 있다. 좌표 동기화부는 카메라 기반의 객체 검출이 결정된 시점의 객체 라이다 좌표를 라이다 기반 객체 인식부 로부터 수신한다. 좌표 동기화부는 라이다 기반 객체 인식부로부터 입력 받은 객체 라이다 좌표를 통해 2축(x, y)을 확 인하고, 확인한 2축을 이용한 이미지 투영 기술을 통해 객체 이미지 좌표를 3차원 객체 이미지 좌표로 변환할 수 있다. 좌표 동기화부는 복수의 카메라를 통해 검출된 각각의 객체 이미지 좌표를 전술한 이미지 투영 기술 을 통해 3차원 객체 이미지 좌표로 각각 변환할 수 있다. 2차원 좌표를 3차원 좌표로 변환하는 이미지 투영 기술은 공지된 기술이므로, 자세한 내용은 생략한다. 좌표 동기화부는 3차원 객체 이미지 좌표에 사전에 설정된 가중치를 적용하여 보정할 수 있다. 이때, 가중 치는 카메라 설치 위치를 기준으로 3차원 객체 이미지 좌표에 이르는 수평 방향으로의 거리 및 카메라 초점 거 리를 기초로 설정될 수 있다. 좌표 동기화부는 보정된 복수개의 3차원 객체 이미지 좌표와, 해당 시점의 객체 라이다 좌표 간의 IoU 연 산을 통하여, 복수개의 3차원 객체 이미지 좌표 중에서 객체 라이다 좌표와 가장 근접한 객체 이미지 좌표를 객 체 추적 대상으로 검출할 수 있다. 좌표 동기화부는 검출한 객체 이미지 좌표를 객체 검출 제어부로 출력한다. 객체 검출 제어부는 라이다 기반 객체 인식부, 객체 이동 속도 검출부, 객체 검출 정확도 계산 부, 카메라 기반 객체 인식부, 좌표 동기화부 및 객체 추적부와 연동하고, 객체 추적 장치 의 제반 동작을 제어한다. 객체 검출 제어부는 객체 검출 정확도가 임계 기준을 충족하는지 여부에 따라 카메라 기반 객체 인식부 의 동작을 선택적으로 결정한다. 객체 검출 제어부는 객체 검출 정확도가 일정 수준 이하로 저하되면, 카메라 기반 객체 인식을 호출하도록 API(Application Programming Interface)가 구성되어 있다. 객체 추적부는 객체 검출 제어부의 선택에 따라 결정된 객체 라이다 좌표 또는 객체 이미지 좌표를 이용하여 객체의 동선을 추적한다. 이제, 도 1의 객체 추적 장치의 구체적인 동작에 대해 설명하기로 한다. 먼저, 도 2는 한 실시예에 따른 객체 추적 방법을 나타낸 순서도로서, 도 1의 구성 요소와 동일한 도면 부호를 사용하여 설명한다. 도 2를 참조하면, 라이다 기반 객체 인식부는 라이다 센서로부터 수집한 PCD를 기초로 객체를 검출하 고, 검출한 객체의 좌표를 객체의 추적 ID와 매핑하여 저장한다(S101). 라이다 기반 객체 인식부는 S101이 최초 검출인지 판단(S102)하고, 최초 검출이면, S101을 다시 수행한다. 라이다 기반 객체 인식부는 최초 검출이 아니면, 객체 검출 제어부에게 최초 검출이 아님을 알릴 수 있다. 그러면, 객체 검출 제어부는 객체 이동 속도 검출부와 객체 검출 정확도 계산부와 연동하여, 객 체의 추적 ID에 누적된 객체 라이다 좌표들과 S101에서 검출한 객체 라이다 좌표를 기초로, 객체의 이동 속도 및 객체 검출 정확도를 계산하도록 제어한다(S103). 즉, 객체 이동 속도 검출부와 객체 검출 정확도 계산부는 객체 검출 제어부의 요청에 따라 라이 다 기반 객체 인식부를 통해 검출된 객체의 추적 ID에 누적된 객체 라이다 좌표들과 S101에서 검출한 객체 라이다 좌표를 이용하여 객체 이동 속도 및 객체 검출 정확도를 각각 계산한다. 객체 검출 제어부는 객체 검출 정확도 계산부로부터 제공받은 객체 검출 정확도가 설정된 임계치 조 건을 충족하는지 판단한다(S104). S104에서, 임계치 조건을 충족하지 않으면 객체 검출 제어부는 카메라 기반 객체 인식부를 호출하고, 카메라 기반 객체 인식부는 이미지 데이터를 기초로 객체를 검출하고 검출한 객체의 2차원 이미지 좌표를 3차원 이미지 좌표로 변환한다(S105). 객체 검출 제어부는 S104에서 임계치 조건 충족 여부에 따라 S101에서 검출한 객체 라이다 좌표 또는 S105 에서 검출한 3차원 객체 이미지 좌표를 객체 추적 대상으로 결정하고, 객체 추적부는 객체 추적 대상으로 결정된 좌표를 이용하여 객체 추적을 수행한다(S106). 도 3은 한 실시예에 따른 카메라 기반의 객체 검출 결정이 도출되기까지의 과정을 설명하는 순서도이고, 도 4는 한 실시예에 따른 객체 이동 속도의 산출 과정을 설명하는 예시도이고, 도 5는 한 실시예에 따른 객체 좌표간 IoU 연산 과정을 설명하는 예시도이다. 이때, 도 3은 도 2의 S103 ~ S105의 동작을 상세히 설명한다. 도 3을 참조하면, 객체 이동 속도 검출부는 객체의 추적 ID에 누적된 객체 라이다 좌표들과 현재 검출한 객체 라이다 좌표를 기초로, 현 시점의 객체 이동 속도를 산출한다(S201). 객체의 이동 속도 측정에 관한 수식은 수학식 1과 같다. [수학식 1] 여기서, 는 객체의 이동 속도를 나타낸다. t는 수집하는 과거 좌표의 개수로서, 시스템의 FPS(frame for second)값일 수 있다. 는 수집된 i번째 좌표를 나타낸다. 는 인접한 객체 라이다 좌표들 간의 거리로서, i번째 좌표와 i+1 번째 좌표 간의 거리를 상징하는 기호로 정의된다. 여기서, 거리는 유클리드 거리(Euclidean distance)가 사용 될 수 있다. 객체의 초기 위치가 , t frame 이후의 위치를 라고 가정하면, 는 t개 프레임까지의 객체 의 이동 거리의 합을 의미한다. 즉, 객체가 좌표에서 좌표에 이를 때까지 인접한 객체 라이다 좌표들 간의 거리의 합산을 의미한다. 여기서, frame은 라이다 센서가 레이저 펄스를 객체에게 조사하여 돌아오는 1회 동작을 나타내는 기본 단 위로 정의한다. 시뮬레이션에 따르면, 1 frame에 소요되는 시간 단위는 1/15 sec이므로, fps는 15 fps일 수 있다. 이때, 1번에 서 2번까지 이동하는 매 i번째 frame에서의 객체의 위치를 라고 할 때, 1번부터 2번까지 객체가 이동할 동안 의 평균 속도를 수학식 1을 통해 산출할 수 있다. 도 4를 참조하면, 는 좌표와 좌표 간의 거리를 의미하고, 는 좌표와 좌표 간의 거리를 의미한다. 객체 검출 정확도 계산부는 칼만 필터를 이용하여, 과거 객체 좌표를 기초로 현재 객체 좌표를 예측한다 (S202). S202에서, 객체 검출 정확도 계산부는 객체의 추적 ID에 누적된 객체 라이다 좌표들과 현재 검출한 객체 라이다 좌표를 기초로, 칼만 필터를 이용하여 임의의 시점의 객체 라이다 좌표를 예측한다. 예를 들어, 객체 검출 정확도 계산부는 라이다 기반 객체 인식부에 의해 검출된 좌표 이전의 객 체 라이다 좌표들, 즉, 좌표 ~ 좌표들을 칼만 필터에 적용하여 좌표를 예측할 수 있다. 객체 검출 정확도 계산부는 라이더 센서로부터 수집한 PCD를 기초로 검출한 현재 객체 좌표와 예측 객체 좌표에 대한 IoU 연산을 수행한다(S203). 매 frame 마다 거치는 객체 검출 프로세스는 PCD 수집을 통한 객체 위치 감지 및 객체 추적까지 이므로, 매 frame 마다 객체 추적 알고리즘은 센서에 의해 실제 관측된 객체 위치와, 이전 객체 위치 기반으로 다음 위치를 예측하는 칼만 필터와 같은 재귀 필터에 의해 예측된 객체 위치, 이 두 개의 위치 정보를 IoU 연산을 진행하게 된다. S203에서, 객체 검출 정확도 계산부는 프레임(Frame) 단위로, 라이다 기반 객체 인식부에 의해 검출 된 객체 라이다 좌표와 S202에서 예측한 객체 라이다 좌표 간의 IoU 연산을 수행한다. 예를 들어, 라이다 기반 객체 인식부에 의해 검출된 좌표와 칼만 필터에 적용하여 예측한 좌표를 좌표 공간에 표시하고, 좌 표 들간의 IoU를 연산할 수 있다. 두개의 좌표 간의 IoU 연산은 도 5와 같이 수행된다. 도 5를 참조하면, 연산 대상인 두개의 좌표, 이때, 좌표는 바운딩 박스의 형태로 표현된다. 따라서, 두개의 좌 표 간의 IoU 연산은 각 좌표에 해당하는 바운딩 박스들 간의 연산과 같다. IoU 연산 수식은 수학식 2와 같이 정의될 수 있다. [수학식 2] Overlapping Region은 도 5의 (A)를 통해 정의하였고, Combined Region은 도 5의 (B)를 통해 정의하였다. 3D 환경에서의 바운딩 박스에 대한 IoU 연산이기 때문에, 두 객체 좌표에 대한 바운딩 박스의 IoU를 연산하게 된다. t개 프레임에 대해 각 객체 라이다 좌표 별로, 실제 검출된 객체 라이다 좌표와 예측한 객체 라이다 좌표 간의 IoU 연산을 수행하고, IoU 연산 결과를 t 개 프레임 개수로 나누면, t개 프레임에 평균 IoU 연산값, 즉, AvgIoU 를 계산할 수 있다. 객체 검출 정확도 계산부는 S203을 통해 계산한 전체 프레임(예, t개 프레임)에 대한 IoU 연산값의 평균인 AvgIoU와 S201에서 계산한 객체 이동 속도를 이용하여 객체 검출 정확도를 계산할 수 있다(S204). 객체 검출 정확도(Accuracy)의 계산 수식은 수학식 3과 같이 정의된다. [수학식 3]"}
{"patent_id": "10-2023-0122049", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "객체 검출 제어부는 S204에서 산출한 객체 검출 정확도를 사전 설정된 임계치와 비교하여 객체 검출 정확 도가 임계치보다 큰 값인지 판단한다(S205). 객체 검출 제어부는 S205에서 객체 검출 정확도가 임계치보다 큰 값이면, S201로 다시 돌아간다. 즉, 객체 검출 정확도가 임계 조건을 충족하므로, 라이다 기반 객체 인식을 통해 객체 추적을 수행하면서, S201 이후의 동작을 수행하도록 구성 요소들(101, 102, 103, 104)의 동작을 제어한다. 반면, 객체 검출 제어부는 S205에서 객체 검출 정확도가 임계치 보다작은값이면, 카메라 기반의 객체 검출 을 추가 수행하기로 결정한다(S206). 따라서, 객체 검출 제어부는 카메라 기반 객체 인식부를 호출한 다. 여기서, 객체 검출 제어부는 객체 검출 정확도와 비교하기 위한 임계치를 객체 별로 초기 객체 검출시 설 정할 수 있다. 객체 검출 제어부는 라이다 기반 객체 인식부로부터 초기 객체 검출이 확인되면, 객체 별로 객체 검출 정확도의 임계치를 결정하고, 객체 ID와 매핑하여 저장할 수 있다. 예를 들어, 객체 검출 제어 부는 도 2의 S102에서 최초 검출로 판단된 경우에 객체 검출 정확도의 임계치를 결정할 수 있다. 실험 결과에 따르면, 평균적으로 0.25보다 낮은 IoU일 경우, 동일 객체로 판단하기에 어려움이 있으며, 실제로 ID 스위칭(Switching) 현상도 자주 발생하는 것을 확인하였다. 따라서, 최소 AvgIoU는 0.25로 설정하였다. 키에 맞는 평균적인 보폭 수치는 키에서 100을 뺀 수치로 계산된다. 예컨대, 성인 170cm의 보폭 평균은 70cm가 되고, 성인 180cm의 보폭 평균은 80cm가 된다. 이때, 보폭 평균의 2배를 빠른 속도의 기준으로 정의하였다. 앞서 설명한 바와 같이, 실시예에 따르면, FPS는 15fps로 정의하였으므로, 객체의 키에 따른 보폭 평균의 2배를 FPS로 나누면 1frame 당 이동 속도, 즉, 빠른 속도로 규정할 수 있는 최소 평균 속도가 계산된다. 예컨대, 키가 170cm인 객체의 보폭 평균의 2배는 140cm이고 이를 15fps로 나누면 키가 170cm인 객체의 최소 평 균 속도는 9cm/frame가 된다. 이렇게 도출된 값을 종합하여, 키가 170cm인 객체의 객체 검출 정확도가 저하된 상태를 판단하기 위한 임계치는 0.25/9=0.028이 된다. 또한, 키가 180cm인 객체의 보폭 평균의 2배는 160cm이고 이를 15fps로 나누면 키가 180cm인 객체의 최소 평균 속도는 10cm/frame가 된다. 이렇게 도출된 값을 종합하여, 키가 180cm인 객체의 객체 검출 정확도가 저하된 상 태를 판단하기 위한 임계치는 0.25/10=0.025가 된다. 객체 검출 제어부는 라이다 기반 객체 인식부로부터 초기 검출된 객체의 키를 확인할 수 있다. 기본 적으로, 라이다 기반 객체 인식부는 라이다 센서를 통해 PCD 특성상 초기 검출 객체의 키를 측정할 수 있다. 따라서, 앞서 설명한 바와 같이, 객체의 키 측정 결과에 따라 비례적으로 변화된 보폭의 빠른 속도로 규정할 수 있는 최소 평균 속도와 고정된 최소 AvgIoU(=0.25)와의 연산을 통해 객체 별로 객체 검출 정확도의 임계치(Accuracy threshold)가 결정될 수 있다. 또한, 객체 검출 정확도가 0.025보다 작은 경우, AvgIoU가 0.25보다 작은 값을 가질 수도 있으나, AvgIoU가 유지 되면서 v(t)가 너무 빨라서 객체 검출 정확도가 낮아질 수도 있으므로, 객체 검출 정확도는 AvgIoU와 v(t)를 모 두 고려한다. AvgIoU가 유지되면서 v(t)가 너무 빠른 경우는 두 명의 사람이 같은 매장 안에서 있는데, 둘 다 속 도가 너무 빨라서 순간적으로 서로의 위치가 A는 기존 B 위치로, B는 기존 A위치로 바뀌어서 AvgIoU 상으로는 크 게 차이가 나지 않지만, v(t)로 인해 그 결과의 신뢰도가 낮아질 수 있다. 이와 같이, 객체 검출 제어부는 객체 검출 정확도가 임계치 보다 낮은 값을 가지는 경우, 카메라 기반 객 체 인식부를 호출하여 객체 좌표를 보완하는 과정을 거친다. 도 6은 한 실시예에 따른 카메라 기반의 객체 검출 동작을 설명하는 순서도이고, 도 7은 한 실시예에 따른 가중 치 설정을 설명하기 위한 예시도이고, 도 8은 한 실시예에 따른 객체 추적 공간 내 라이다 센서와 복수개의 카 메라 설치 예시도이다. 도 6 ~ 도 8에 대한 설명은, 도 1 ~ 도 5에서 설명과 관련되므로, 동일한 구성 요소에 대해서는 동일한 도면 부 호를 부여하여 설명한다. 도 6을 참조하면, 카메라 기반 객체 인식부는 카메라 기반의 객체 검출 요청이 발생한 시점을 기준으로 이 전 시점, 즉, 과거의 복수개의 이미지 프레임을 수집한다(S301). 카메라 기반 객체 인식부는 각 이미지 프레임 단위로 객체를 검출한다(S302). 즉, 카메라 기반 객체 인식 부는 딥러닝 기반 객체 검출 모델을 이용하여, 멀티 프레임 단위의 이미지 데이터를 이용하여 객체의 2차 원 좌표들을 검출할 수 있다(S302). S302에서, 카메라 기반 객체 인식부는 호출 시점부터 n개 이전까지의 멀티 이미지 프레임을 수집하여, 각 각의 이미지 프레임 별로 객체 바운딩 박스를 검출한다. 카메라 기반 객체 인식부는 서로 인접한 이미지 프레임들 간의 객체 바운딩 박스에 대한 IoU 연산을 수행하고, IoU 연산값을 기준으로 가장 근접한 객체 바운딩 박스들끼리 매칭하여 동일 객체로 표시한다. 카메라 기반 객체 인식부는 동일 객체로 표시한 객체 바운딩 박스들의 평균 좌표값을 객체의 2차원 좌표로 검출한다. 좌표 동기화부는 객체 라이다 좌표와 이미지 투영 기술을 이용하여, 객체 이미지 좌표를 객체 라이다 좌표 와 동일한 3차원 공간 내의 3차원 객체 이미지 좌표로 변환한다(S303). S303은 이미 공지된 이미지 투영 기술을 사용하면, 2차원 이미지 좌표를 3차원 이미지 좌표로 변환할 수 있다. 여기서, 카메라는 top-view로 설치되며, 카메라에서 추출한 객체의 검출 좌표는 이미지 기반의 상대 좌표이기 때문에, 2차원 좌표로 구성된다. 라이다 센서를 통해 획득한 좌표는 3차원이므로, 라이다 센서의 3차원 좌표와 카메라에서 인식한 좌표를 매칭 시켜주기 위해서, 좌표 동기화부는 외부 카메라 캘리브레이션(Extrinsic camera calibration) 등과 같이 널리 사용되는 이미지 투영 변환 행렬 기법을 활용하여, 2차원 이미지 좌표를 3차원 이미지 좌표로 변환할 수 있다. 이때, 좌표 동기화부는 카메라의 설치 높이 정보를 계산 정보에 반영해 투영 변환 행렬을 생성할 수 있다. 카메라 기반 객체 인식부가 검출한 객체 이미지 좌표는 이미지 기반의 상대 좌표이다. 따라서, 객체 추적 공간 내의 절대 좌표값으로 변환하여 라이더 센서와 카메라 간 좌표 동기화가 필요하다. 따라서, 좌 표 동기화부는 라이다 센서 기반 객체 인식부로부터 객체의 3축 좌표를 수신한다. 좌표 동기화부는 라이다 센서 기반 객체 인식부로부터 획득한 타겟 객체의 3차원 라이다 좌표를 카메 라 화각을 통해 확보한 객체 이미지의 2축으로 투영하여 객체 이미지의 3차원 좌표 환산을 수행할 수 있다. 카메라는 상대 좌표를 사용한다. 이미지의 2축으로 투영하는 것은 라이더 센서를 통해서 확보된 절대 좌표(x, y)의 2축을 의미하므로, 카메라를 통해 추출된 상대 좌표는 카메라 설치 높이에 따라 라이다 좌표 기반의 2축으로 투영하면 카메라에서 추출된 절대 좌표값을 획득할 수 있다. 따라서, 좌표 동기화부는 라 이다 센서 기반 객체 인식부로부터 획득한 3축 좌표를 카메라 화각을 통해 확보한 이미지의 2축으로 투영 하며, 이미지의 2축으로 투영하는 것은 라이더를 통해서 확보된 절대좌표(x, y)의 2축을 의미한다. 카메라에서 추출된 상대 좌표는 카메라 설치 높이에 따라 라이다 기반의 2축으로 투영하면 카메라에서 추출된 절대좌표값을 획득할 수 있다. 좌표 동기화부는 투영을 위한 변환 상수는 미리 설정한다. 좌표 동기화부는 S303에서 3차원으로 변환된 객체 이미지 좌표와 카메라 설치 위치를 기초로, 카메라의 수 직 지점을 기준점으로 좌우 방향의 픽셀 크기에 따라 결정된 가중치를 적용하여 S303의 객체 이미지 좌표를 보 정할 수 있다(S304). 도 7을 참조하면, 카메라의 수직 영역에서 검출되는 객체는 변환의 정확도가 높으나, 카메라 위치에서 양 쪽 카메라 화각 끝으로 멀어질수록 객체 위치의 계산 정확도는 낮아진다. 정확도가 낮은 객체 이미지 좌표를 객 체 라이다 좌표와 매칭할 경우, 객체 라이다 좌표와 객체 이미지 좌표 간 중첩 영역(IoU)을 계산하는 부분에서 정확도가 낮아질 수 있다. 이러한 문제점을 보완하기 위해 좌표 동기화부는 카메라의 수직 지점으로 부터 수평 방향으로 멀어지는 거리, 즉, 픽셀의 크기에 따라 가중치를 설정하여 객체 이미지 좌표를 보정할 수 있다. 즉, 정확도가 높은 지점에서 정확도가 낮은 지점으로 갈수록 가중치는 크게 설정된다. 객체 이미지 좌표에 부여하는 가중치는 카메라의 초점 거리 및 객체와 카메라 간의 직선 거리를 기초로 설정될 수 있다. 이처럼, 가중치가 반영된 객체 이미지 좌표는 객체가 카메라 위치 기준으로 측정된 화각의 가장자리에서 발견되 어도 비교적 정확하게 3차원 객체 이미지 좌표로 보정될 수 있다. 좌표 동기화부는 S301 ~ S304가 해당 지점에 설치된 모든 카메라에 대해 산출되었는지 판단한다(S305). 도 8을 참조하면, 객체의 동선을 추적하는 공간 내부를 전체 조망하기 충분히 높은 위치에 라이다 센서와 적어도 두개의 카메라가 설치되어 있다. 카메라는 천장에서 top view로 설치되며, 두개의 카메라 사이에 놓치는 영역이 없도록 영역 별로 중첩될 수 있는 간격으로 설치될 수 있다. 즉, 라이다 센서가 설치된 지점과 근접한 지점에 적어도 두개의 카메라가 설치될 수 있다. 따라서, 각 카메라 별로, 각 카메라를 통해 수집한 멀티 이미지 프레임에 대해 S301 ~ S304가 수행된다. 좌표 동기화부는 라이다 센서가 설치된 지점에 위치하는 모든 카메라에 대해 3차원 이미지 좌표 검출이 완료되면, 검출된 3차원 이미지 좌표들을 객체 검출 제어부에게 출력한다. 객체 검출 제어부는 S301 ~ S304를 통해 3차원 환산 및 가중치 적용을 통해 검출된 3차원 객체 이미지 좌 표들과 라이다 센서 기반 객체 인식부로부터 획득한 객체 라이다 좌표를 정합하는 과정을 통해 최종적인 객체 이미지 좌표를 결정한다(S306). S306에서, 객체 검출 제어부는 3차원 객체 이미지 좌표들과 객체 라이다 좌표 간의 IoU 연산을 수행하고, IoU 연산 결과를 기초로 객체 라이다 좌표와 가장 근접한 3차원 객체 이미지 좌표를 검출한다. 한편, 도 9는 실시예에 따른 컴퓨팅 장치의 구성도이다. 도 9를 참고하면, 도 1 ~ 도 8에서 설명한 객체 추적 장치는 적어도 하나의 프로세서에 의해 동작하는 컴 퓨팅 장치로 구현될 수 있다. 컴퓨팅 장치는 하나 이상의 프로세서, 프로세서에 의하여 수행되는 컴퓨터 프로그램을 로드 하 는 메모리, 컴퓨터 프로그램 및 각종 데이터를 저장하는 저장 장치, 통신 인터페이스, 그리고 이들을 연결하는 버스를 포함할 수 있다. 이외에도, 컴퓨팅 장치는 다양한 구성 요소가 더 포함될 수 있다. 프로세서는 컴퓨팅 장치의 동작을 제어하는 장치로서, 컴퓨터 프로그램에 포함된 명령어들을 처리하는 다양한 형태의 프로세서일 수 있고, 예를 들면, CPU(Central Processing Unit), MPU(Micro Processor Unit), MCU(Micro Controller Unit), GPU(Graphic Processing Unit) 또는 본 개시의 기술 분야에 잘 알려진 임 의의 형태의 프로세서 중 적어도 하나를 포함하여 구성될 수 있다. 메모리는 각종 데이터, 명령 및/또는 정보를 저장한다. 메모리는 본 개시의 동작을 실행하도록 기술 된 명령어들이 프로세서에 의해 처리되도록 해당 컴퓨터 프로그램을 저장 장치로부터 로드 할 수 있 다. 메모리는 예를 들면, ROM(read only memory), RAM(random access memory) 등 일 수 있다. 저장 장치는 컴퓨터 프로그램, 각종 데이터를 비임시적으로 저장할 수 있다. 저장 장치는 ROM(Read Only Memory), EPROM(Erasable Programmable ROM), EEPROM(Electrically Erasable Programmable ROM), 플래시메모리 등과 같은 비휘발성 메모리, 하드 디스크, 착탈형 디스크, 또는 본 개시가 속하는 기술 분야에서 잘 알 려진 임의의 형태의 컴퓨터로 읽을 수 있는 기록 매체를 포함하여 구성될 수 있다. 통신 인터페이스는 유/무선 통신을 지원하는 유/무선 통신 모듈일 수 있다. 버스는 컴퓨팅 장치의 구성 요소 간 통신 기능을 제공한다. 컴퓨터 프로그램은, 프로세서에 의해 실행되는 명령어들(instructions)을 포함하고, 비일시적-컴퓨터 판독 가능 저장매체(non-transitory computer readable storage medium)에 저장되며, 명령어들은 프로세서가 본 개시의 동작을 실행하도록 만든다. 컴퓨터 프로그램은 네트워크를 통해 다운로드 되거나, 제품 형태로 판매 될 수 있다. 컴퓨터 프로그램은, 도 1 ~ 도 8에서 설명한 동작 및 단계들을 구현하는 명령어들을 포함할 수 있다. 이상에서 본 발명의 실시예에 대하여 상세하게 설명하였지만 본 발명의 권리범위는 이에 한정되는 것은 아니고 다음의 청구범위에서 정의하고 있는 본 발명의 기본 개념을 이용한 당업자의 여러 변형 및 개량 형태 또한 본 발명의 권리범위에 속하는 것이다."}
{"patent_id": "10-2023-0122049", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 한 실시예에 따른 객체 추적 장치의 구성을 나타낸 블록도이다. 도 2는 한 실시예에 따른 객체 추적 방법을 나타낸 순서도이다. 도 3은 한 실시예에 따른 카메라 기반의 객체 검출 결정이 도출되기까지 과정을 설명하는 순서도이다. 도 4는 한 실시예에 따른 객체 이동 속도의 산출 과정을 설명하는 예시이다. 도 5는 한 실시예에 따른 객체 좌표간 IoU(Intersection over Union) 연산 과정을 설명하는 예시이다. 도 6은 한 실시예에 따른 카메라 기반의 객체 검출 동작을 설명하는 순서도이다. 도 7은 한 실시예에 따른 객체 추적 공간 내 라이다 센서와 복수개의 카메라 설치 예시이다. 도 8은 한 실시예에 따른 가중치 설정을 설명하기 위한 예시이다. 도 9는 한 실시예에 따른 컴퓨팅 장치의 구성도이다."}
