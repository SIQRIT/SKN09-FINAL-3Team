{"patent_id": "10-2022-0099131", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0020870", "출원번호": "10-2022-0099131", "발명의 명칭": "시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 및 시스템", "출원인": "주식회사 블루시그널", "발명자": "김동훈"}}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "교차로 위험 예측 방법에 있어서,교차로를 카메라로 촬상 하는 교차로 촬영 영상 생성 단계(S10)와;지도, 위성, 또는 항공 이미지(정사 이미지, 평면 이미지)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid)비율을 계산하는, 그리드 이미지 생성 단계(S20)와;교차로 횡단보도의 꼭지점을 대응점으로 하여 촬영 영상(의 픽셀)과 지도 좌 표 사이의 투영 변환 행렬(M, 또는투영 변환 관계)을 생성하는, 변환 행렬 생성 단계(S30)와;상기 그리드 이미지(I2)에 투영변환 행렬(M)을 적용하여 투영 변환된 변환 그리드 이미지를 생성하는, 그리드변환 단계(S40)와;상기 변환 그리드를 촬영 영상 이미지에 매핑(Mapping)하는 매핑 단계(S50)와;촬영 영상과 변환 그리드(G2)를 기반으로 보행자 또는 차량 간의 실제 거리 또는 속도를 연산하여 위험을 예측하는 위험 예측 단계(S60);를 포함하여 구성되는 것을 특징으로 하는 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법."}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "교차로 위험 예측 방법에 있어서,마스킹 이미지 생성부(100)가, 위성사진, 항공사진 또는 지도(상공에서 바라본 정사 영상 또는 평면 영상)를 입력(Input)으로 4개의 영역(차도, 보도, 횡단보도, Background)으로 분할 마스킹 된 (정상 영상) 마스킹 이미지(I1)를 생성하는, 마스킹 이미지 생성 단계(S100)와;그리드 이미지 생성부(200)가, 상기 마스킹 이미지(I1)에 그리드(G1)를 생성하는 (정사 영상) 마스킹 및 그리드이미지(I2) 생성 단계(S200)와;변환 행렬 생성부(300)가, 교차로 횡단보도의 각 꼭지점을 대응점(또는 교차로 횡단보도의 교차하는 직선들을대응선)으로 하여, 촬영 영상(의 픽셀)과 지도 좌표(지도 좌표상의 좌표, 월드 좌표) 사이의 투영 변환 행렬(M,또는 투영 변환 관계)을 생성하는 변환 행렬 생성 단계(S300)와;투영변환부(400)가, 상기 (정사 영상) 마스킹 및 그리드 이미지(I2)에 투영변환 행렬(M, 투영 변환 관계)을 적용하여 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 생성하는 투영 변환 단계(S400)와;맵핑부(500)가, 변환 그리드(G2)를 포함하는 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 촬영 영상(I4)에 맵핑(Mapping)하는 맵핑 단계(S500)와;연산제어부(600)가, 상기 변환 그리드(G2)를 기반으로 촬영 영상에서 파악되는 객체(차량, 보행자)들의 위치,객체들 사이의 거리, 객체들의 시간에 따른 위치 변화를 파악하여 위험을 예측하는 위험 예측 단계(S600);를 포함하여 구성되는 것을 특징으로 하는 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법."}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서.마스킹 및 그리드 이미지(I2) 생성 단계(S200)에서, 지도 상의 실제 거리를 기준으로 하여 실제 거리와 그리드(grid) 비율(그리드 한개당 실제 거리)을 계산하는 단계를 더 포함하여 구성되는 것을 특징으로 하는 시멘틱 분공개특허 10-2024-0020870-3-할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법."}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서,상기 변환 행렬 생성부(300)는 상기 마스킹 및 그리드 이미지(I2) 상의 교차로 횡단보도의 각 꼭지점 및 교차로 횡단보도의 교차하는 직선들을촬영 영상 상의 교차로 횡단보도의 각 꼭지점과 교차로 횡단보도의 교차하는 직선들과 각각 일치시킴으로써 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성하는 것을 특징으로 하는 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법."}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제3항에 있어서,상기 연산제어부(600)는 촬영 영상(I4)에 맵핑(Mapping)된 \"투영 변환된 마스킹 및 그리드 이미지(I3)\" 상의 각각의 변환 그리드에 대한픽셀 좌표 정보를 획득하고 각각의 그리드에 ID를 부여하고,상기 연산제어부(600)는 인공지능 객체 인식 알고리즘(610)을 사용하여 촬영 영상(I4) 내의 객체의 존재 여부및 객체의 픽셀 좌표를 획득하고 상기 변환 그리드에 대한 픽셀 좌표 정보와 비교하여 객체의 위치, 거리, 속도를 연산하는 것을 특징으로 하는 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법."}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서,상기 연산제어부(600)의 객체 인식 알고리즘(610)은 객체의 존재가 인정되는 경우 객체를 사각형으로 표시하고사각형의 중심점을 객체의 대표 픽셀 지점(C)로 생성하고,상기 연산제어부(600)는 객체가 상기 객체의 대표 픽셀 지점(C)이 존재하는 변환 그리드 안에 존재하는 것으로판단하는 것을 특징으로 하는 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법."}
{"patent_id": "10-2022-0099131", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "위성사진 또는 지도(상공에서 바라본 정사 영상 또는 평면 영상)를 입력(Input)으로 4개의 영역(차도, 보도, 횡단보도, Background)으로 분할 마스킹 된 (정상 영상) 마스킹 이미지(I1)를 생성하는, 마스킹 이미지 생성부(100)와;상기 마스킹 이미지(I1)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid) 비율을 계산하는, 그리드 이미지생성부(200)와;교차로 횡단보도의 각 꼭지점을 대응점(또는 교차로 횡단보도의 교차하는 직선들을 대응선)으로 하여, 촬영 영상(의 픽셀)과 지도 좌표(지도 좌표상의 좌표, 월드 좌표) 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을생성하는 변환 행렬 생성부(300)와;상기 (정사 영상) 마스킹 및 그리드 이미지(I2)에 투영변환 행렬(M, 투영 변환 관계)을 적용하여 \"투영 변환된마스킹 및 그리드 이미지(I3)\"를 생성하는 투영변환부(400)와;변환 그리드(G2)를 포함하는 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 촬영 영상(I4)에 맵핑(Mapping)하는맵핑부(500)와;객체 인식 알고리즘(610)을 구비하고 상기 변환 그리드(G2)를 기반으로 촬영 영상에서 파악되는 객체(차량, 보공개특허 10-2024-0020870-4-행자)들의 위치, 객체들 사이의 거리, 객체들의 시간에 따른 위치 변화를 파악하여 위험을 예측하는 연산제어부(600);를 포함하여 구성되는 것을 특징으로 하는 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 시스템."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 교차로 위험 예측 방법에 있어서, 교차로를 카메라로 촬상 하는 교차로 촬영 영상 생성 단계(S10)와; 지도, 위성, 또는 항공 이미지(정사 이미지, 평면 이미지)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid) 비율을 계산하는, 그리드 이미지 생성 단계(S20)와; 교차로 횡단보도의 꼭지점을 대응점으로 하여 촬영 영상(의 (뒷면에 계속)"}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 및 시스템에 관한 것이다."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "등록번호 제10-2331250호 LED 및 빔프로젝터를 이용한 교차로 교통안전 경고 시스템은 보행자가 도로를 건널 수 있도록 도로에 표시된 횡단보도에 인접하게 설치되며, 보행자의 보행 신호 및 차량의 주행 신호를 표시하도 록 횡단보도의 양측에 각각 설치되는 신호등부재; 상기 신호등부재의 상단에 설치되어 상기 횡단보도 전 구역에 조명을 비춰줄 수 있도록 상기 신호등부재에 설치되는 광원부재; 차량의 정지가 이루어지도록 교차로 내 운전자 기준 우회전 도로의 경계석에 설치되는 경계석조명부재를 포함하며, 상기 광원부재는 상기 신호등부재에 설치되 어 상기 횡단보도 전 구역에 조명이 이루어지도록 설치되며, 상기 광원부재는 상기 신호등부재의 신호에 따라 동일한 색상의 조명이 비춰지도록 하되, 상기 경계석조명부재는 도로의 폭에 따라 가변되게 설치할 수 있도록 다수개로 분할된 경계석으로 이루어지고, 상기 경계석은 교통신호제어기에 의해 점소등이 이루어지는 LED패널; 을 포함하며, 상기 경계석에는 차량의 주행 방향의 우회전 전방에 위치하도록 상기 경계석부재의 일측에 경계석 홈부가 형성되고, 상기 경계석홈부에는 수평 또는 수직 방향으로 LED패널이 설치되며, 상기 LED패널을 보호하도 록 상기 경계석홈부의 상면에 설치되는 보호케이스;를 포함하는 것을 특징으로 하는 LED 및 빔프로젝터를 이용 한 교차로 교통안전 경고 시스템을 개시한다. 종래의 교차로 안전 시스템은 장치의 구성이 복잡하고 정확한 상태 예측이 어려운 관계로 현장 적용성이 떨어지 는 문제점이 있었다."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 교차로 촬영 영상을 그리드를 이용한 영상 분석 기법으로 분석하여 차량 보행자의 실 위치, 실거리를 정확히 연산 예측함으로써 충돌 가능성을 미리 예견할 수 있는 그리드를 이용한 실제 거리 기반 교차로 위험 예 측 방법 및 시스템을 제공하기 위한 것이다. 본 발명은 교차로 촬영 영상 분석에 있어서 실제 거리를 반영하는 그리드 생성과 함께 시멘틱 분할에 의한 마스 킹 이미지(횡단보도, 인도, 도로 분리 표시)를 생성하여 촬영상에 맵핑함으로써 그리드 변환의 정확도를 직관적 으로 알 수 있으며, 객체들의 정확한 실좌표 위치 판단, 객체들 사이의 정확한 실거리 판단이 가능한 시멘틱 분 할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 및 시스템을 제공하기 위한 것이다."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법은, 교차로를 카메라로 촬상 하는 교차로 촬 영 영상 생성 단계(S10)와; 지도, 위성, 또는 항공 이미지(정사 이미지, 평면 이미지)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid) 비율을 계산하는, 그리드 이미지 생성 단계(S20)와; 교차로 횡단보도의 꼭지점을 대 응점으로 하여 촬영 영상(의 픽셀)과 지도 좌 표 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성하는, 변환 행렬 생성 단계(S30)와; 상기 그리드 이미지(I2)에 투영변환 행렬(M)을 적용하여 투영 변환된 변환 그리드이미지를 생성하는, 그리드 변환 단계(S40)와; 상기 변환 그리드를 촬영 영상 이미지에 매핑(Mapping)하는 매핑 단계(S50)와; 촬영 영상과 변환 그리드(G2)를 기반으로 보행자 또는 차량 간의 실제 거리 또는 속도를 연산하여 위험을 예측하는 위험 예측 단계(S60);를 포함하여 구성되는 것을 특징이다. 본 발명의 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법은, 마스킹 이미지 생성부 가, 위성사진, 항공사진 또는 지도(상공에서 바라본 정사 영상 또는 평면 영상)를 입력(Input)으로 4개의 영역(차도, 보도, 횡단보도, Background)으로 분할 마스킹 된 (정상 영상) 마스킹 이미지(I1)를 생성하는, 마스 킹 이미지 생성 단계(S100)와; 그리드 이미지 생성부가, 상기 마스킹 이미지(I1)에 그리드(G1)를 생성하는 (정사 영상) 마스킹 및 그리드 이미지(I2) 생성 단계(S200)와; 변환 행렬 생성부가, 교차로 횡단보도의 각 꼭지점을 대응점(또는 교차로 횡단보도의 교차하는 직선들을 대응선)으로 하여, 촬영 영상(의 픽셀)과 지도 좌 표(지도 좌표상의 좌표, 월드 좌표) 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성하는 변환 행렬 생 성 단계(S300)와; 투영변환부가, 상기 (정사 영상) 마스킹 및 그리드 이미지(I2)에 투영변환 행렬(M, 투영 변환 관계)을 적용하여 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 생성하는 투영 변환 단계(S400)와; 맵핑 부가, 변환 그리드(G2)를 포함하는 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 촬영 영상(I4)에 맵핑 (Mapping)하는 맵핑 단계(S500)와; 연산제어부가, 상기 변환 그리드(G2)를 기반으로 촬영 영상에서 파악되 는 객체(차량, 보행자)들의 위치, 객체들 사이의 거리, 객체들의 시간에 따른 위치 변화를 파악하여 위험을 예 측하는 위험 예측 단계(S600);를 포함하여 구성되는 것을 특징으로 한다. 본 발명의 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법은, 마스킹 및 그리드 이미지 (I2) 생성 단계(S200)에서, 지도 상의 실제 거리를 기준으로 하여 실제 거리와 그리드 (grid) 비율(그리드 한개 당 실제 거리)을 계산하는 단계를 더 포함하여 구성되는 것이 바람직하다. 여기서, 변환 행렬 생성부는 상기 마스킹 및 그리드 이미지(I2) 상의 교차로 횡단보도의 각 꼭지점 및 교 차로 횡단보도의 교차하는 직선들을 촬영 영상 상의 교차로 횡단보도의 각 꼭지점과 교차로 횡단보도의 교차하 는 직선들과 각각 일치시킴으로써 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성하는 것이 바람직하다. 본 발명의 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 시스템은, 위성사진 또는 지도(상 공에서 바라본 정사 영상 또는 평면 영상)를 입력(Input)으로 4개의 영역(차도, 보도, 횡단보도, Background)으 로 분할 마스킹 된 (정상 영상) 마스킹 이미지(I1)를 생성하는, 마스킹 이미지 생성부와; 상기 마스킹 이 미지(I1)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid) 비율을 계산하는, 그리드 이미지 생성부와; 교차로 횡단보도의 각 꼭지점을 대응점(또는 교차로 횡단보도의 교차하는 직선들을 대응선)으로 하여, 촬영 영 상(의 픽셀)과 지도 좌표(지도 좌표상의 좌표, 월드 좌표) 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성하는 변환 행렬 생성부와; 상기 (정사 영상) 마스킹 및 그리드 이미지(I2)에 투영변환 행렬(M, 투영 변환 관계)을 적용하여 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 생성하는 투영변환부와; 변환 그리 드(G2)를 포함하는 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 촬영 영상(I4)에 맵핑(Mapping)하는 맵핑부 와; 객체 인식 알고리즘을 구비하고 상기 변환 그리드(G2)를 기반으로 촬영 영상에서 파악되는 객체 (차량, 보행자)들의 위치, 객체들 사이의 거리, 객체들의 시간에 따른 위치 변화를 파악하여 위험을 예측하는 연산제어부;를 포함하여 구성되는 것을 특징으로 한다."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르는 경우, 교차로 촬영 영상을 그리드를 이용한 영상 분석 기법으로 분석하여 차량 보행자의 실 위치, 실거리를 정확히 연산 예측함으로써 충돌 가능성을 미리 예견할 수 있는 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 및 시스템이 제공된다. 또한, 본 발명에 따르는 경우, 교차로 촬영 영상 분석에 있어서 실제 거리를 반영하는 그리드 생성과 함께 시멘 틱 분할에 의한 마스킹 이미지(횡단보도, 인도, 도로 분리 표시)를 생성하여 촬영상에 맵핑함으로써 그리드 변 환의 정확도를 직관적으로 알 수 있으며, 객체들의 정확한 실좌표 위치 판단, 객체들 사이의 정확한 실거리 판 단이 가능한 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 및 시스템이 제공된다."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하에서 본 발명의 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 및 시스템에 대하여 첨부된 도면을 참조하여 상세하게 설명한다. 도 1은 본 발명의 일실시예에 따른 그리드를 이용한 실제 거리 기 반 교차로 위험 예측 방법 흐름도, 도 2는 본 발명의 일실시예에 따른 시멘틱 분할과 그리드를 이용한 실제 거 리 기반 교차로 위험 예측 방법 흐름도, 도 3(a, b)은 본 발명에 사용되는 교차로 지도 및 위성 사진 (도 3a : 유성구청 사거리, 도 3b : 다른 형태의 사거리)이다. 도 4(a, b)는 본 발명의 일실시예에 따른 도 3(a, b)의 사진을 시멘틱 분할(Semantic segmentation)을 이용해 마스킹한 이미지(정사 영상 마스킹 이미지 : I1, 도 4a :유성구청 사거리, 도 4b : 다른 형태의 사거리), 도 5 는 본 발명의 일실시예에 따른 도 4a의 분할 마스킹한 이미지(I1)에 그리드(직사각 또는 정사각 균일 크기)를 생성한 마스킹 및 그리드 이미지(I2), 도 6은 본 발명의 지도 상의 실제 거리(유성 구청 사거리) 산정 개념도이 다. 도 7은 본 발명의 일실시예에 따른 도 5의 마스킹 및 그리드 이미지(I2)를 투영 변환한 \"변환된 마스킹 및 그 리드 이미지(I3)\", 도 8은 본 발명에 사용된 교차로 촬영 영상(I4)이고, 도 9는 도 8의 교차로 촬영 영상(I4)에 도 7의 변환된 마스킹 및 그리드 이미지(I3)\"를 맵핑(오버레이)하여 위함 예측하는 솔루션 개념도이다. 도 10은 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 시스템 구성도이다. <제1 실시예 : 그리드를 이용한 실제 거리 기반 교차로 위험 예측> 도 1 내지 도 7에 도시된 바와 같이, 본 발명의 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법은, 교 차로 촬영 영상 생성 단계(S10)와 그리드 이미지 생성 단계(S20)와 변환 행렬 생성 단계(S30)와 그리드 변환 단 계(S40)와 매핑 단계(S50)와 위험 예측 단계(S60)를 포함하여 구성된다. 도 1에 도시된 바와 같이, 교차로 촬영 영상 생성 단계(S10)에서 교차로를 카메라로 촬상 하는 교차로 촬영 영 상을 생성한다. 먼저 도 8과 같은 교차로 촬영 영상을 생성한 후 매핑 단계(S50) 전에 카메라 촛점 거리와 렌즈 특성에 따라 영상 왜곡을 보정하여 도 9와 같은 렌즈의 광학적 특성에 의하여 발생한 영상 왜곡을 보정한 촬영 영상을 생성하는 단계가 추가로 진행될 수 있다."}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "item": 2, "content": "도 3(a, b), 도 5에 도시된 바와 같이, 그리드 이미지 생성 단계(S20)에서, 지도, 위성, 또는 항공 이미지(정 사 이미지, 평면 이미지)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid) 비율을 계산한다. 이때 도 6에 도시된 바와 같은 실거리(예를들어 지도상에 표현되는 20M)를 사용할 수 있다. 그리드 (grid) 비율이란 그리드 의 지도 좌표 (지구 좌표, 월드 좌표) 상의 크기를 말한다. 횡다보도의 지도상 또는 실제 측정 거리가 20M 인데 그리드를 20행 생성하는 경우 한행의 지도 좨표상의 크기는 1M 일 것이다. 변환 행렬 생성 단계(S30)에서 교차로 횡단보도의 꼭지점을 대응점으로 하여 촬영 영상(의 픽셀)과 지도 좌표 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성한다. 도 8과 같은 촬영 영상, 도 9와 같은 광학 왜곡 보정 후 영상의 횡단보도, 교차로 4개의 지점을 활용하여 투영(투시) 변환 행렬 또는 투영(투시) 변환 관계를 생성한다. 도 1, 도 7에 도시된 바와 같이, 그리드 변환 단계(S40)에서, 그리드 이미지(I2)에 투영변환 행렬(M)을 적용하 여 투영 변환된 변환 그리드 이미지를 생성한다. 도 1, 도 9에 도시된 바와 같이, 맵핑 단계(S50)에서, 변환 그리드를 촬영 영상 이미지에 매핑(Mapping)한다. 위험 예측 단계(S60)에서 촬영 영상과 변환 그리드(G2)를 기반으로 보행자 또는 차량 간의 실제 거리 또는 속도 를 연산하여 위험을 예측한다. <제2 실시예 : 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측> 도 1 내지 도 7에 도시된 바와 같이, 본 발명의 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예 측 방법은 마스킹 이미지 생성 단계(S100)와 마스킹 및 그리드 이미지(I2) 생성 단계(S200)와 변환 행렬 생성 단계(S300)와 투영 변환 단계(S400)와 맵핑 단계(S500)와 위험 예측 단계(S600)를 포함하여 구성된다. 도 3(a, b), 도 4(a, b)에 도시된 바와 같이, 마스킹 이미지 생성 단계(S100)에서, 마스킹 이미지 생성부 가, 위성사진, 항공사진 또는 지도(상공에서 바라본 정사 영상 또는 평면 영상)를 입력(Input)으로 4개의 영역 (차도, 보도, 횡단보도, Background)으로 분할 마스킹 된 (정상 영상) 마스킹 이미지(I1)를 생성한다. 도 5에 도시된 바와 같이, 다음으로 마스킹 및 그리드 이미지(I2) 생성 단계(S200)에서, 그리드 이미지 생성부 가, 상기 정사 영상에 대한 마스킹 이미지(I1)에 그리드(G1)를 생성한다. 도 7, 도 8에 도시된 바와 같이, 다음으로 변환 행렬 생성 단계(S300)에서, 변환 행렬 생성부가, 교차로 횡단보도의 각 꼭지점을 대응점(또는 교차로 횡단보도의 교차하는 직선들을 대응선)으로 하여, 촬영 영상(의 픽 셀)과 지도 좌표(지도 좌표상의 좌표, 월드 좌표) 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성한다. 이어서 투영 변환 단계(S400)에서, 투영변환부가, 상기 (정사 영상) 마스킹 및 그리드 이미지(I2)에 투영 변환 행렬(M, 투영 변환 관계)을 적용하여 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 생성한다.본 발명의 출원일 이전에 공지된 4개의 지점(또는 틀어진 사각형)주어지는 경우 직사각형관의 관계에서 투시 변 환(homogeneous transformation) 행렬, 또는 투시 변환 관계를 생성하는 기술은 본 발명의 명세서에 기재된 것"}
{"patent_id": "10-2022-0099131", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "으로 보며 이 부분에 대한 상세한 설명은 본 발명의 명세서에서 생략한다. 이를 이유로 본 발명의 내용이 불명 확 해진다고 볼수 없을 것이다. 도 9에 도시된 바와 같이, 맵핑 단계(S500)에서 맵핑부가, 변환 그리드(G2)를 포함하는 \"투영 변환된 마스 킹 및 그리드 이미지(I3)\"를 촬영 영상(I4)에 맵핑(Mapping)한다. 도 9에 도시된 바와 같이, 횡단보도에 겹치게 표현된 횡단보도 마스킹 이미지(희미한 흰색으로 표시됨)와 촬영 영상의 횡단보도(진한 흰색 막대줄 표시)일치 하는 정도를 작업자가 직관적으로 파악할 수 있다. 즉, 실제 거리를 반영하는 그리드 생성과 함께 도 7에 표시 된 시멘틱 분할에 의한 마스킹 이미지(횡단보도, 인도, 도로 분리 표시)를 촬영 영상에 그리드와 함께 맵핑함으 로써 그리드 변환의 정확도를 직관적으로 알 수 있게 된다. 도 10에 도시된 바와 같이, 위험 예측 단계(S600)에서 연산제어부가, 상기 변환 그리드(G2)를 기반으로 촬 영 영상에서 파악되는 객체(차량, 보행자)들의 위치, 객체들 사이의 거리, 객체들의 시간에 따른 위치 변화를 파악하여 위험을 예측한다. 도 6에 도시된 바와 같이, 마스킹 및 그리드 이미지(I2) 생성 단계(S200)에서, 지도 상의 실제 거리를 기준으로 하여 실제 거리와 그리드 (grid) 비율(그리드 한개당 실제 거리)을 계산하는 단계를 더 포함하여 구성된다. 이 때 도 6에 도시된 바와 같은 실거리(예를들어 지도상에 표현되는 20M)를 사용할 수 있다. 그리드 (grid) 비율이 란 그리드의 지도 좌표 (지구 좌표, 월드 좌표) 상의 크기를 말한다. 횡다보도의 지도상 또는 실제 측정 거리가 20M 인데 그리드를 20행 생성하는 경우 한행의 지도 좨표상의 크기는 1M 일 것이다. 도 7, 도 8, 도 9에 도시된 바와 같이, 변환 행렬 생성부는 마스킹 및 그리드 이미지(I2) 상의 교차로 횡 단보도의 각 꼭지점 및 교차로 횡단보도의 교차하는 직선들을 촬영 영상 상의 교차로 횡단보도의 각 꼭지점과 교차로 횡단보도의 교차하는 직선들과 각각 일치시킴으로써 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성한 다. 도 10에 도시된 바와 같이, 연산제어부는 촬영 영상(I4)에 맵핑(Mapping)된 \"투영 변환된 마스킹 및 그리 드 이미지(I3)\" 상의 각각의 변환 그리드에 대한 픽셀 좌표 정보를 획득하고 각각의 그리드에 ID를 부여한다. 또한, 연산제어부는 인공지능 객체 인식 알고리즘을 사용하여 촬영 영상(I4) 내의 객체의 존재 여부 및 객체의 픽셀 좌표를 획득하고 상기 변환 그리드에 대한 픽셀 좌표 정보와 비교하여 객체의 위치, 거리, 속도 를 연산한다. 도 9, 도 10에 도시된 바와 같이, 연산제어부의 객체 인식 알고리즘은 객체의 존재가 인정되는 경우 객체를 사각형으로 표시하고 사각형의 중심점을 객체의 대표 픽셀 지점(C)로 생성하고, 연산제어부는 객체 가 상기 객체의 대표 픽셀 지점(C)이 존재하는 변환 그리드 안에 존재하는 것으로 판단한다. 도 10에 도시된 바와 같이, 본 발명의 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 시스템 은, 마스킹 이미지 생성부와 그리드 이미지 생성부와 변환 행렬 생성부와 투영변환부와 맵 핑부와 연산제어부를 포함하여 구성된다. 마스킹 이미지 생성부는 위성사진 또는 지도(상공에서 바라본 정사 영상 또는 평면 영상)를 입력(Input)으 로 4개의 영역(차도, 보도, 횡단보도, Background)으로 분할 마스킹 된 (정상 영상) 마스킹 이미지(I1)를 생성 한다. 그리드 이미지 생성부는 마스킹 이미지(I1)에 그리드(G1)를 생성하고 실제 거리와 그리드 (grid) 비 율을 계산한다. 변환 행렬 생성부는 교차로 횡단보도의 각 꼭지점을 대응점(또는 교차로 횡단보도의 교차하는 직선들을 대 응선)으로 하여, 촬영 영상(의 픽셀)과 지도 좌표(지도 좌표상의 좌표, 월드 좌표) 사이의 투영 변환 행렬(M, 또는 투영 변환 관계)을 생성한다. 투영변환부는 (정사 영상) 마스킹 및 그리드 이미지(I2)에 투영변환 행 렬(M, 투영 변환 관계)을 적용하여 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 생성한다. 맵핑부는 변환 그리드(G2)를 포함하는 \"투영 변환된 마스킹 및 그리드 이미지(I3)\"를 촬영 영상(I4)에 맵 핑(Mapping)한다. 연산제어부는 객체 인식 알고리즘을 구비하고 상기 변환 그리드(G2)를 기반으로 촬 영 영상에서 파악되는 객체(차량, 보행자)들의 위치, 객체들 사이의 거리, 객체들의 시간에 따른 위치 변화를 파악하여 위험을 예측한다. 본 발명은 상기에서 언급한 바람직한 실시예와 관련하여 설명됐지만, 본 발명의 범위가 이러한 실시예에 한정되 는 것은 아니며, 본 발명의 범위는 이하의 특허청구범위에 의하여 정하여지는 것으로 본 발명과 균등 범위에 속 하는 다양한 수정 및 변형을 포함할 것이다. 아래의 특허청구범위에 기재된 도면부호는 단순히 발명의 이해를 보조하기 위한 것으로 권리범위의 해석에 영향 을 미치지 아니함을 밝히며 기재된 도면부호에 의해 권리범위가 좁게 해석되어서는 안될 것이다."}
{"patent_id": "10-2022-0099131", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일실시예에 따른 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 흐름도. 도 2는 본 발명의 일실시예에 따른 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 방법 흐름 도. 도 3(a, b)은 본 발명에 사용되는 교차로 지도 및 위성 사진 (도 3a :유성구청 사거리, 도 3b : 다른 형태의 사 거리). 도 4(a, b)는 본 발명의 일실시예에 따른 도 3(a, b)의 사진을 시멘틱 분할(Semantic segmentation)을 이용해 마스킹한 이미지(정사 영상 마스킹 이미지 : I1, 도 4a :유성구청 사거리, 도 4b : 다른 형태의 사거리). 도 5는 본 발명의 일실시예에 따른 도 4a의 분할 마스킹한 이미지(I1)에 그리드(직사각 또는 정사각 균일 크기)를 생성한 마스킹 및 그리드 이미지(I2). 도 6은 본 발명의 지도 상의 실제 거리(유성 구청 사거리) 산정 개념도. 도 7은 본 발명의 일실시예에 따른 도 5의 마스킹 및 그리드 이미지(I2)를 투영 변환한 \"변환된 마스킹 및 그 리드 이미지(I3)\". 도 8은 본 발명에 사용된 교차로 촬영 영상(I4) 도 9는 도 8의 교차로 촬영 영상(I4)에 도 7의 변환된 마스킹 및 그리드 이미지(I3)\"를 맵핑(오버레이)하여 위 함 예측하는 솔루션 개념도. 도 10은 시멘틱 분할과 그리드를 이용한 실제 거리 기반 교차로 위험 예측 시스템 구성도."}
