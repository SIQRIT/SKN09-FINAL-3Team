{"patent_id": "10-2023-0045224", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0149554", "출원번호": "10-2023-0045224", "발명의 명칭": "시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치 및 방법", "출원인": "숭실대학교산학협력단", "발명자": "김명호"}}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "잔차(Residual Error) 기반 이상 탐지 모델을 통하여, 제조 공정에 사용되는 적어도 하나의 장치로부터 수집된시계열 데이터에 대한 이상 여부를 탐지하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분하되, 상기 정상 데이터로 구분된 다수의 데이터 중에서 상기 이상 탐지 모델이 기 학습한 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 데이터를 비교 기준 데이터로 설정하는 데이터 이상 여부 탐지부;상기 이상 데이터 또는 정상 데이터를 구성하는 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 조건을 만족하는 제2 특징 변수를 선별하는 특징 변수 선별부; 및상기 선별된 제2 특징 변수로 이루어진 리스트 중에서 XAI(explainable AI)를 적용할 제3 특징 변수를추출하고, 상기 추출된 제3 특징 변수로 이루어진 리스트에 대한 상기 XAI의 이상 탐지를 통하여 이상장치를 판별하는 이상장치 판별부;를 포함하는. 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1 항에 있어서,상기 특징 변수 선별부는,군집화 알고리즘을 통하여 상기 제1 특징 변수를 그룹화하여 특징 변수 그룹을 생성하는 특징 변수 그룹 생성모듈;상기 구분된 이상 데이터 또는 정상 데이터 각각에서, 전체 시계열 데이터를 이루는 특징 변수들 중에서, 상기특징 변수 그룹을 이루는 특정한 특징 변수를 제외한 시계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터를생성하고, 상기 비교 기준 데이터에 대한 임베딩을 통하여 제2 시계열 벡터를 생성하는 시계열 벡터 생성 모듈;및상기 제1 시계열 벡터와 제2 시계열 벡터 간의 거리를 이용하여 상기 제1 시계열 벡터와 제2 시계열 벡터 간의유사성을 계산하는 연산 모듈을 포함하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2 항에 있어서,상기 특징 변수 그룹은 상기 적어도 하나의 장치로부터 수집한 데이터에 기반하여 생성된 특징 변수 그룹 및 특징 변수 간의 상관 관계에 기반하여 생성된 특징 변수 그룹으로 구분되는, 시계열 벡터 간 거리 계산에 기반한이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2 항에 있어서,상기 특징 변수 선별부는, 상기 정상 데이터에 기반하여 생성된 다수의 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 선택하고, 상기 이상 데이터에 기반하여 생성된 다수의제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 선택하되, 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터 및 상기 제2 시계열 벡터와의 상대적 거리가 짧아진제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수를 보관하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치.공개특허 10-2024-0149554-3-청구항 5 제4 항에 있어서,상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 작은 제2 특징 변수로 선별되고, 상기 제2 시계열 벡터와의 상대적 거리가 짧아진제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 큰 제2 특징 변수로 선별되는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5 항에 있어서,상기 제3 특징 변수는 상기 제2 특징 변수 중에서 데이터 이상에 미치는 영향력을 기준으로 선별된 변수이며,상기 이상장치 판별부는 데이터 이상에 미치는 영향력이 큰 순으로, 상기 제2 특징 변수 중에서 상기 제3 특징변수를 추출하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1 항에 있어서,상기 제1 특징 변수는 센서의 종류, 제조 공정 설정 값 및 현재 장치의 처리 속도를 포함하는, 시계열 벡터 간거리 계산에 기반한 이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1 항에 있어서,데이터 전처리부를 더 포함하되,상기 데이터 전처리부는 상기 시계열 데이터에 결측치가 있는 경우, 단순 이동 평균 방법을 통하여 상기 시계열데이터를 보간하고, 데이터 정규화 과정을 통하여 상기 시계열 데이터 값을 표준화하되, 상기 시계열 데이터의길이가 긴 경우 슬라이딩 윈도우 기법을 통하여 특정 기간 단위로 상기 시계열 데이터를 잘라 서브 셋 집합으로만드는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "잔차(Residual Error) 기반 이상 탐지 모델을 통하여, 제조 공정에 사용되는 적어도 하나의 장치로부터 수집된시계열 데이터에 대한 이상 여부를 탐지하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분하되, 상기 정상 데이터로 구분된 다수의 데이터 중에서 상기 이상 탐지 모델이 기 학습한 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 데이터를 비교 기준 데이터로 설정하는 단계;상기 이상 데이터 또는 정상 데이터를 구성하는 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 조건을 만족하는 제2 특징 변수를 선별하는 단계; 및상기 선별된 제2 특징 변수로 이루어진 리스트 중에서 XAI(explainable AI)를 적용할 제3 특징 변수를추출하고, 상기 추출된 제3 특징 변수로 이루어진 리스트에 대한 상기 XAI의 이상 탐지를 통하여 이상장치를 판별하는 단계;를 포함하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 방법."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "공개특허 10-2024-0149554-4-제9 항에 있어서,상기 제2 특징 변수를 선별하는 단계는,군집화 알고리즘을 통하여 상기 제1 특징 변수를 그룹화하여 특징 변수 그룹을 생성하는 제1 과정;상기 구분된 이상 데이터 또는 정상 데이터 각각에서 상기 특징 변수 그룹을 이루는 제1 특징 변수를 제외한 시계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터를 생성하고, 상기 비교 기준 데이터에 대한 임베딩을 통하여 제2 시계열 벡터를 생성하는 제2 과정; 및상기 제1 시계열 벡터와 제2 시계열 벡터 간의 거리를 이용하여 상기 제1 시계열 벡터와 제2 시계열 벡터 간의유사성을 계산하는 제3 과정을 포함하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 방법."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10 항에 있어서,상기 제2 특징 변수를 선별하는 단계는, 상기 정상 데이터에 기반하여 생성된 다수의 제1 시계열 벡터 중에서상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 선택하고, 상기 이상 데이터에 기반하여 생성된 다수의 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 선택하되, 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터 및 상기 제2 시계열 벡터와의 상대적거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수를 보관하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 방법."}
{"patent_id": "10-2023-0045224", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11 항에 있어서,상기 제2 특징 변수를 선별하는 단계에서는 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 작은 제2 특징 변수로 선별하고, 상기 제2시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 큰 제2 특징 변수로 선별하되,상기 제3 특징 변수는 상기 제2 특징 변수 중에서 데이터 이상에 미치는 영향력을 기준으로 선별된 변수이며,상기 XAI의 이상 탐지를 통하여 이상장치를 판별하는 단계에서는 데이터 이상에 미치는 영향력이 큰 순으로, 상기 제2 특징 변수 중에서 상기 제3 특징 변수를 추출하는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별방법."}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치가 제공된다. 상기 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치는, 잔차 기반 이상 탐지 모델을 통하여, 제조 공정에 사용되는 적어도 하나의 장치로부터 수 집된 시계열 데이터에 대한 이상 여부를 탐지하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 (뒷면에 계속)"}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치 및 방법에 관련된 것으로, 보다 구체적으로 는, 이상 감지 시 이상이 의심되는 장치들을 효율적으로 판별할 수 있음은 물론, 이상장치 판별에 대한 신뢰성 을 확보할 수 있는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치 및 방법에 관련된 것이다."}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "4차 산업혁명의 발달로 제조 공정이 스마트화되면서, 각종 제조 공정 데이터를 실시간으로 수집할 수 있게 되었 다. 이에 따라, 설비의 이상을 자동으로 탐지할 수 있는 분야에 대한 연구도 적극적으로 진행되고 있다. XGBoost(Extreme Gradient Boosting), OCSVM(One-class Support Vector Machine) 등의 머신러닝 알고리즘이나, 오토인코더, GAN 등의 신경망 알고리즘을 활용한 연구들이 진행되고 있으며, 높은 정확도로 설비의 이상을 탐지할 수 있어, 다양한 분야의 제조 공정에서 인공지능 기반 이상 탐지 모델이 활용되고 있다. 최근에는 인공지능 기반의 이상 탐지의 성능이 향상되면서, 인공지능 모델이 결과를 도출하는 과정을 분석하고 자 하는 연구가 진행되고 있다. 특히, 의료, 제조와 같은 특정 분야에서는 질병 및 고장 여부의 예측뿐만 아니 라, 질병의 원인이나 이상 장비의 종류 등 모델이 해당 결과를 판단하게 된 원인이 되는 특징 변수들을 판단하 는 것 또한 중요하기 때문에, 모델이 내린 결정과 그 작동 원리를 사람이 이해하기 위한 XAI(explainable AI)에 대한 연구가 적극적으로 진행되고 있다. 이에 따라, 다양한 분야에서 문제를 해결하고 있는 모델을 설명하기 위 하여 다양한 방법의 XAI 연구가 적용되고 있다. 하지만, 제조 분야에서 수집한 데이터는 비정상 데이터의 수가 정상 데이터보다 현저히 적은 클래스 불균형 (Class Imbalance) 현상을 가지기 때문에, 주로 XAI가 설명하는 예측이나 분류 모델이 아닌, 오토인코더, 변분 오토인코더(Variational Autoencoder), GAN 등의 잔차(Residual Error) 기반 모델을 사용하고 있어, 다른 전처 리 과정 없이 기존에 연구된 XAI를 활용하여 이상의 원인을 찾기 어렵다는 문제점을 가진다. 이상 탐지 분야에서 주로 사용되는 잔차 기반 모델이란, 정상 데이터들의 특성을 학습하여 압축시키고, 이를 다 시 입력 데이터로 복원하여 모델에 입력된 데이터의 특징을 학습하는 인공지능 모델을 의미한다. 잔차 기반 모 델은, 모델에 입력된 데이터와 모델에서 출력된 데이터와의 차이가 일정 크기 이상이면, 이상(Abnormal), 일정 크기 이하이면 정상(Normal)으로 판별한다. 이와 같은 잔차 기반 이상 탐지 모델들은 입력 데이터로 복원하는 것이 목적이므로, 예측, 분류와 같이 모델의 출력이 명확하지 않다는 특징을 가진다. 따라서, 모델이 내린 명확한 결론을 설명하기 위하여 기존에 연구된 XAI를 활용하기에는 정확도 및 신뢰도 상의 문제를 가진다."}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 해결하고자 하는 일 기술적 과제는, 이상 감지 시 이상이 의심되는 장치들을 효율적으로 판별할 수 있음은 물론, 이상장치 판별에 대한 신뢰성을 확보할 수 있는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판 별 장치 및 방법을 제공하는 데 있다. 본 발명이 해결하고자 하는 기술적 과제는 상술된 것에 제한되지 않는다."}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 일 기술적 과제를 해결하기 위해, 본 발명은 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치를 제 공한다. 일 실시 예에 따르면, 상기 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치는, 잔차(Residual Error) 기반 이상 탐지 모델을 통하여, 제조 공정에 사용되는 적어도 하나의 장치로부터 수집된 시계열 데이터에 대한 이상 여부를 탐지하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분하되, 상기 정상 데이터로 구분 된 다수의 데이터 중에서 상기 이상 탐지 모델이 기 학습한 표준 정상 데이터와의 오차율이 상대적으로 가장 적 은 데이터를 비교 기준 데이터로 설정하는 데이터 이상 여부 탐지부; 상기 이상 데이터 또는 정상 데이터를 구 성하는 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 조건을 만족하는 제2 특징 변수를 선별하는 특 징 변수 선별부; 및 상기 선별된 제2 특징 변수로 이루어진 리스트 중에서 XAI(explainable AI)를 적용할 제3 특징 변수를 추출하고, 상기 추출된 제3 특징 변수로 이루어진 리스트에 대한 상기 XAI의 이상 탐지를 통하여 이상장치를 판별하는 이상장치 판별부를 포함할 수 있다. 일 실시 예에 따르면, 상기 특징 변수 선별부는, 군집화 알고리즘을 통하여 상기 제1 특징 변수를 그룹화하여 특징 변수 그룹을 생성하는 특징 변수 그룹 생성 모듈; 상기 구분된 이상 데이터 또는 정상 데이터 각각에서, 전체 시계열 데이터를 이루는 특징 변수들 중에서, 상기 특징 변수 그룹을 이루는 특정한 특징 변수를 제외한 시계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터를 생성하고, 상기 비교 기준 데이터에 대한 임베딩을 통하여 제2 시계열 벡터를 생성하는 시계열 벡터 생성 모듈; 및 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 거리를 이용하여 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 계산하는 연산 모듈을 포함할 수 있다.일 실시 예에 따르면, 상기 특징 변수 그룹은 상기 적어도 하나의 장치로부터 수집한 데이터에 기반하여 생성된 특징 변수 그룹 및 특징 변수 간의 상관 관계에 기반하여 생성된 특징 변수 그룹으로 구분될 수 있다. 일 실시 예에 따르면, 상기 특징 변수 선별부는, 상기 정상 데이터에 기반하여 생성된 다수의 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 선택하고, 상기 이상 데이터에 기반 하여 생성된 다수의 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터 를 선택하되, 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터 및 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수를 보관할 수 있다. 일 실시 예에 따르면, 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 생성할 때 제외되었 던 제1 특징 변수는 데이터 이상에 영향력이 가장 작은 제2 특징 변수로 선별되고, 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 큰 제2 특징 변수로 선별될 수 있다. 일 실시 예에 따르면, 상기 제3 특징 변수는 상기 제2 특징 변수 중에서 데이터 이상에 미치는 영향력을 기준으 로 선별된 변수이며, 상기 이상장치 판별부는 데이터 이상에 미치는 영향력이 큰 순으로, 상기 제2 특징 변수 중에서 상기 제3 특징 변수를 추출할 수 있다. 일 실시 예에 따르면, 상기 제1 특징 변수는 센서의 종류, 제조 공정 설정 값 및 현재 장치의 처리 속도를 포함 할 수 있다. 일 실시 예에 따르면, 데이터 전처리부를 더 포함하되, 상기 데이터 전처리부는 상기 시계열 데이터에 결측치가 있는 경우, 단순 이동 평균 방법을 통하여 상기 시계열 데이터를 보간하고, 데이터 정규화 과정을 통하여 상기 시계열 데이터 값을 표준화하되, 상기 시계열 데이터의 길이가 긴 경우 슬라이딩 윈도우 기법을 통하여 특정 기 간 단위로 상기 시계열 데이터를 잘라 서브 셋 집합으로 만들 수 있다. 한편, 본 발명은, 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 방법을 제공한다. 일 실시 예에 따르면, 상기 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 방법은, 잔차 기반 이상 탐지 모 델을 통하여, 제조 공정에 사용되는 적어도 하나의 장치로부터 수집된 시계열 데이터에 대한 이상 여부를 탐지 하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분하되, 상기 정상 데이터로 구분된 다수의 데이터 중에서 상기 이상 탐지 모델이 기 학습한 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 데이터를 비교 기준 데이터로 설정하는 단계; 상기 이상 데이터 또는 정상 데이터를 구성하는 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 조건을 만족하는 제2 특징 변수를 선별하는 단계; 및 상기 선별된 제2 특징 변수로 이 루어진 리스트 중에서 XAI(explainable AI)를 적용할 제3 특징 변수를 추출하고, 상기 추출된 제3 특징 변수로 이루어진 리스트에 대한 상기 XAI의 이상 탐지를 통하여 이상장치를 판별하는 단계를 포함할 수 있다. 일 실시 예에 따르면, 상기 제2 특징 변수를 선별하는 단계는, 군집화 알고리즘을 통하여 상기 제1 특징 변수를 그룹화하여 특징 변수 그룹을 생성하는 제1 과정; 상기 구분된 이상 데이터 또는 정상 데이터 각각에서 상기 특 징 변수 그룹을 이루는 제1 특징 변수를 제외한 시계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터를 생성 하고, 상기 비교 기준 데이터에 대한 임베딩을 통하여 제2 시계열 벡터를 생성하는 제2 과정; 및 상기 제1 시계 열 벡터와 제2 시계열 벡터 간의 거리를 이용하여 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 계산 하는 제3 과정을 포함할 수 있다. 일 실시 예에 따르면, 상기 제2 특징 변수를 선별하는 단계는, 상기 정상 데이터에 기반하여 생성된 다수의 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 선택하고, 상기 이상 데이터에 기반하여 생성된 다수의 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 선택하되, 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터 및 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수를 보관할 수 있다. 일 실시 예에 따르면, 상기 제2 특징 변수를 선별하는 단계에서는 상기 제2 시계열 벡터와의 상대적 거리가 길 어진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 작은 제2 특징 변 수로 선별하고, 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 큰 제2 특징 변수로 선별하되, 상기 제3 특징 변수는 상기 제2 특징 변수 중에서 데이터 이상에 미치는 영향력을 기준으로 선별된 변수이며, 상기 XAI의 이상 탐지를 통하여 이상장 치를 판별하는 단계에서는 데이터 이상에 미치는 영향력이 큰 순으로, 상기 제2 특징 변수 중에서 상기 제3 특징 변수를 추출할 수 있다."}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시 예에 따르면, 잔차 기반 이상 탐지 모델을 통하여, 제조 공정에 사용되는 적어도 하나의 장치로 부터 수집된 시계열 데이터에 대한 이상 여부를 탐지하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분하되, 상기 정상 데이터로 구분된 다수의 데이터 중에서 상기 이상 탐지 모델이 기 학습한 표준 정상 데이 터와의 오차율이 상대적으로 가장 적은 데이터를 비교 기준 데이터로 설정하는 데이터 이상 여부 탐지부; 상기 이상 데이터 또는 정상 데이터를 구성하는 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 조건을 만 족하는 제2 특징 변수를 선별하는 특징 변수 선별부; 및 상기 선별된 제2 특징 변수로 이루어진 리스트 중에서 XAI(explainable AI)를 적용할 제3 특징 변수를 추출하고, 상기 추출된 제3 특징 변수로 이루어진 리스트에 대 한 상기 XAI의 이상 탐지를 통하여 이상장치를 판별하는 이상장치 판별부를 포함할 수 있다. 이와 같이, 이상장치 판별을 위하여 공정 과정에서 수집된 전체 데이터를 사용하지 않고, 상기 수집된 전체 데 이터에서 사용될 데이터의 종류를 선별함으로써, 이상 감지 시 이상이 의심되는 장치들을 효율적으로 판별할 수 있음은 물론, 이상장치 판별에 대한 신뢰성을 확보할 수 있는, 시계열 벡터 간 거리 계산에 기반한 이상장치 판 별 장치 및 방법이 제공될 수 있으며, 이를 통하여, 공정 관리자가 공정 중 이상 발생 시 신속하고 적절한 대응 을 할 수 있도록 도움을 줄 수 있다."}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면들을 참조하여 본 발명의 바람직한 실시 예를 상세히 설명할 것이다. 그러나 본 발명의 기술 적 사상은 여기서 설명되는 실시 예에 한정되지 않고 다른 형태로 구체화될 수도 있다. 오히려, 여기서 소개되 는 실시 예는 개시된 내용이 철저하고 완전해질 수 있도록 그리고 당업자에게 본 발명의 사상이 충분히 전달될 수 있도록 하기 위해 제공되는 것이다. 본 명세서에서, 어떤 구성요소가 다른 구성요소 상에 있다고 언급되는 경우에 그것은 다른 구성요소 상에 직접 형성될 수 있거나 또는 그들 사이에 제3의 구성요소가 개재될 수도 있다는 것을 의미한다. 또한, 도면들에 있어 서, 형상 및 크기는 기술적 내용의 효과적인 설명을 위해 과장된 것이다. 또한, 본 명세서의 다양한 실시 예 들에서 제1, 제2, 제3 등의 용어가 다양한 구성요소들을 기술하기 위해서 사 용되었지만, 이들 구성요소들이 이 같은 용어들에 의해서 한정되어서는 안 된다. 이들 용어들은 단지 어느 구성 요소를 다른 구성요소와 구별시키기 위해서 사용되었을 뿐이다. 따라서, 어느 한 실시 예에 제1 구성요소로 언 급된 것이다른 실시 예에서는 제2 구성요소로 언급될 수도 있다. 여기에 설명되고 예시되는 각 실시 예는 그것 의 상보적인 실시 예도 포함한다. 또한, 본 명세서에서 '및/또는'은 전후에 나열한 구성요소들 중 적어도 하나 를 포함하는 의미로 사용되었다. 명세서에서 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한 복수의 표현을 포함한다. 또한, \"포함하다\" 또는 \"가지다\" 등의 용어는 명세서 상에 기재된 특징, 숫자, 단계, 구성요소 또는 이들을 조합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징이나 숫자, 단계, 구성요소 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 배제하는 것으로 이해되어서는 안 된다. 또한, 본 명세서에서 \"연결\"은 복수의 구성 요소를 간접적으로 연결하는 것, 및 직접적으로 연결하는 것을 모두 포함하는 의미로 사용된다. 또한, 하기에서 본 발명을 설명함에 있어 관련된 공지 기능 또는 구성에 대한 구체적인 설명이 본 발명의 요지 를 불필요하게 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명은 생략할 것이다. 도 1은 본 발명의 일 실시 예에 따른 이상장치 판별 장치를 나타낸 구성도이고, 도 2는 본 발명의 일 실시 예에 따른 이상장치 판별 장치를 설명하기 위한 블록도이며, 도 3은 본 발명의 일 실시 예에 따른 이상장치 판별 장 치의 데이터 전처리부를 설명하기 위한 참고도이고, 도 4는 본 발명의 일 실시 예에 따른 이상장치 판별 장치의 데이터 이상 여부 탐지부를 설명하기 위한 참고도이며, 도 5는 본 발명의 일 실시 예에 따른 이상장치 판별 장 치의 특징 변수 선별부를 나타낸 구성도이고, 도 6 및 도 7은 본 발명의 일 실시 예에 따른 이상장치 판별 장치 에서, 특징 변수 선별부의 특징 변수 그룹 생성 모듈을 설명하기 위한 참고도들이며, 도 8은 본 발명의 일 실시 예에 따른 이상장치 판별 장치에서, 특징 변수 선별부의 시계열 벡터 생성 모듈을 설명하기 위한 참고도이고, 도 9 및 도 10은 본 발명의 일 실시 예에 따른 이상장치 판별 장치에서, 특징 변수 선별부의 연산 모듈을 설명 하기 위한 참고도들이다. 도 1 및 도 2에 도시된 바와 같이, 본 발명의 일 실시 예에 따른 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치는 제조 공정 중에 이상이 감지되는 경우 이상이 의심되는 장치를 판별하기 위한 장치이다. 이때, 본 발명의 일 실시 예에 따른 이상장치 판별 장치는 공정 과정에서 수집된 전체 데이터를 사용하지 않고, 수집된 전체 데이터에서, 이상장치 판별에 사용될 데이터의 종류를 선별할 수 있다. 이에 따라, 상기 이상장치 판별 장치는 이상 감지 시 이상이 의심되는 장치들을 효율적으로 판별할 수 있 음은 물론, 이상장치 판별에 대한 신뢰성을 확보할 수 있으며, 이를 통하여, 공정 관리자가 공정 중 이상 발생 시 신속하고 적절한 대응을 할 수 있도록 도움을 줄 수 있다. 이러한 본 발명의 일 실시 예에 따른 이상장치 판별 장치는 데이터 전처리부, 데이터 이상 여부 탐지 부, 특징 변수 선별부 및 이상장치 판별부 중 적어도 하나를 포함할 수 있다. 상기 데이터 전처리부는 데이터의 이상 여부를 탐지하는 이상 탐지 모델에 입력될 데이터, 즉, 공정 과정 에서 수집된 데이터를 전처리할 수 있다. 여기서, 제조 공정의 이상 여부는 설비 혹은 장치에 부착되어, 이들의 온도, 습도, 풍량 및 압력 등을 측정하는 센서들로부터 제공되는 데이터를 분석하여 판단할 수 있다. 따라서, 상기 이상 탐지 모델에 입력될 데이터의 특 징 변수는 센서의 종류, 제조 공정 설정 값, 현재 장비의 처리 속도 등을 포함할 수 있다. 이때, 이러한 특징 변수들은 일정 기간 동안 수집한 시계열 데이터일 수 있다. 제조 설비들이나 장치들의 이상을 탐지하기 위해서는 하나의 장치가 아닌 복수 개의 장치에서 수집된 데이터를 분석해야 하므로, 상기 이상 탐지 모델에 입력될 데이터는 복수 개의 특징 변수로 구성된 다변량(Multivariate) 시계열 데이터일 수 있다. 본 발명의 일 실시 예에 따르면, 상기 데이터 전처리부는 이러한 다변량 시계열 데이터를 전처리할 수 있 다. 이를 위하여, 상기 데이터 전처리부는 상기 시계열 데이터에 결측치가 있는 경우, 단순 이동 평균(Simple Moving Average) 방법을 통하여 상기 시계열 데이터를 보간(Interpolation of time series data)할 수 있다. 또한, 상기 데이터 전처리부는 데이터 정규화(Normalization) 과정을 통하여 상기 시계열 데이터 값을 표 준화할 수 있다. 그리고 상기 데이터 전처리부는 상기 시계열 데이터의 길이가 긴 경우, 슬라이딩 윈도우(Sliding window) 기법을 통하여, 상기 시계열 데이터를 특정 기간 단위로 잘라 서브 셋 집합으로 만들 수 있다. 도 3에 도시된 바와 같이, 상기 데이터 전처리부는 예를 들어, 하루 간격으로 장치로부터 수집한 시계열 데이터 집합을 크기가 3인 슬라이딩 윈도우로 자를 수 있다. 이에 따라, 3일 간격의 시계열 데이터 집합이 생성 될 수 있다. 이와 같이, 상기 데이터 전처리부에 의하여 전처리된 시계열 데이터들은 후술되는 이상 탐지 모델에 입력 되며, 제조 공정의 이상 여부를 판단하는 이상 탐지 모델에 의하여 학습될 수 있다. 상기 데이터 이상 여부 탐지부는 제조 공정에 사용되는 적어도 하나의 장치로부터 수집된 시계열 데이터, 보다 상세하게는 상기 적어도 하나의 장치로부터 수집된 후 상기 데이터 전처리부에 의하여 전처리된 시계 열 데이터에 대한 이상 여부를 탐지할 수 있다. 이를 위하여, 본 발명의 일 실시 예에 따르면, 상기 데이터 이상 여부 탐지부는 잔차(Residual Error) 기 반 이상 탐지 모델을 통하여 상기 수집된 시계열 데이터에 대한 이상 여부를 탐지할 수 있다. 상기 잔차 기반 이상 탐지 모델은 일정 기간 동안 정상적인 제조 공정에서 수집된 시계열 데이터들을 잠재 변수 (Latent variables)나 잠재 변수의 분포로 압축하도록 표현하고, 압축된 잠재 변수를 다시, 입력된 데이터로 복 원할 수 있도록 학습할 수 있다. 이때, 학습이 완료된 잔차 기반 이상 탐지 모델에 비정상적인 데이터가 입력되면, 입력 데이터와, 상기 잔차 기 반 이상 탐지 모델이 복원한 데이터가 특정 임계값(Threshold) 이상으로 차이가 나게 된다. 이 경우, 상기 잔차 기반 이상 탐지 모델은 입력된 데이터에 이상이 있다고 판단하게 된다. 도 4에 도시된 바와 같이, 예를 들어, 정상 데이터만을 학습한 오토인코더와 같은 잔차 기반 이상 탐지 모델에 이상 데이터가 입력되면, 상기 잔차 기반 이상 탐지 모델은 입력된 이상 데이터를, 학습했던 정상 데이터로 복 원시키려는 성질을 가지기 때문에, 잔차 기반 이상 탐지 모델에 입력되는 입력 데이터와, 잔차 기반 이상 탐지 모델로부터 출력되는 모델 복원 데이터 간에 차이가 발생될 수 있다. 이때, 상기 잔차 기반 이상 탐지 모델은, 입력된 이상 데이터와 출력되는 모델 복원 데이터 간의 차이가 특정 임계값보다 크면(ε ≥ threshold), 이상으 로 판단하고, 특정 임계값보다 작으면(ε < threshold), 정상으로 판단하게 된다. 본 발명의 일 실시 예에 따르면, 상기 데이터 이상 여부 탐지부는 이러한 잔차 기반 이상 탐지 모델을 통 하여, 제조 공정에 사용되는 적어도 하나의 장치로부터 수집된 시계열 데이터에 대한 이상 여부를 탐지하고, 이 를 통하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분할 수 있다. 이때, 상기 데이터 이상 여부 탐지부는 원본 데이터, 즉, 상기 잔차 기반 이상 탐지 모델이 학습한 표준 정상 데이터와의 오차율에 따른 오차 데이터베이스(DB)를 구축할 수 있다. 상기 데이터 이상 여부 탐지부는 상기 잔차 기반 이상 탐지 모델에 의하여 탐지된 정상 데이터들 중에서, 상기 잔차 기반 이상 탐지 모델이 학습한 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 데이터를 상기 오차 데이터베이스(DB)에 저장할 수 있다. 예를 들어, 상기 데이터 이상 여부 탐지부는 정상 데이터로 탐지된 데이터들 중에서, 상기 표준 정상 데이 터와의 오차가 가장 적은 20%의 정상 데이터를 상기 오차 데이터베이스(DB)에 저장할 수 있다. 한편, 상기 데이터 이상 여부 탐지부는 상기 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 정상 데이터를 비교 기준 데이터로 설정할 수 있는데, 이에 대해서는 하기에서 보다 상세히 설명하기로 한다.상기 특징 변수 선별부는 이상 데이터 또는 정상 데이터를 구성하는 특징 변수 중 미리 설정된 조건을 만 족하는 특징 변수를 선별할 수 있다. 이러한 특징 변수는 제1 특징 변수 및 제2 특징 변수를 포함할 수 있다. 상기 제1 특징 변수는 이상 데이터 또는 정상 데이터를 구성하는 변수일 수 있다. 또한, 상기 제2 특징 변수는 상기 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 기준에 따라 선별된 변수일 수 있다. 이때, 상기 특징 변수 선별부는 제1 특징 변수에 기반하여 제1 시계열 벡터를 생성하고, 비교 기준 데이터 에 기반하여 제2 시계열 벡터를 생성할 수 있다. 그리고 상기 특징 변수 선별부는 생성된 제1 시계열 벡터 및 제2 시계열 벡터 간의 거리에 기반하여, 제1 특징 변수 중에서 제2 특징 변수를 선별할 수 있다. 도 5에 도시된 바와 같이, 이를 위하여, 본 발명의 일 실시 예에 따른 특징 변수 선별부는 특징 변수 그룹 생성 모듈, 시계열 벡터 생성 모듈 및 연산 모듈을 포함할 수 있다. 상기 특징 변수 그룹 생성 모듈은 K-means와 같은 군집화 알고리즘을 통하여 다수의 제1 특징 변수를 그룹 화하여 특징 변수 그룹을 생성할 수 있다. 도 6에 도시된 바와 같이, 상기 특징 변수 그룹 생성 모듈은 먼저, 시간에 따른 데이터, 즉, 시계열 데이 터를 특징 변수에 따른 데이터로 변환할 수 있다. 그 다음, 도 7에 도시된 바와 같이, 상기 특징 변수 그룹 생성 모듈은 변환된 제1 특징 변수에 따른 데이 터에 상기 군집화 알고리즘을 적용하여, 제조 공정 장치들로부터 수집한 데이터(Unlabeled Data)에 기반한 특징 변수 그룹(Labeled Data) 또는 특징 변수 그룹 리스트를 생성할 수 있다. 다시 도 6을 참조하면, 상기 특징 변수 그룹 생성 모듈은 다른 한편으로, 변환된 제1 특징 변수에 따른 데 이터에 대하여, 특징 변수 간의 상관 관계를 나타내는 행렬 데이터를 생성하고, 생성된 행렬 데이터에 상기 군 집화 알고리즘을 적용하여, 상관 관계에 기반한 특징 변수 그룹 또는 특징 변수 그룹 리스트를 생성할 수 있다. 즉, 상기 특징 변수 그룹 생성 모듈에 의하여 생성되는 특징 변수 그룹은 적어도 하나의 공정 장치로부터 수집한 데이터에 기반하여 생성되는 특징 변수 그룹 및 특징 변수 간의 상관 관계에 기반하여 생성된 특징 변수 그룹으로 구분될 수 있다. 이때, 본 발명의 일 실시 예에 따르면, 상기 특징 변수 그룹 생성 모듈은 정상 데이터 및 이상 데이터 별 로, 수집한 데이터에 기반한 특징 변수 그룹들 및 특징 변수 간의 상관 관계에 기반한 특징 변수 그룹들을 각각 생성할 수 있다. 상기 시계열 벡터 생성 모듈은 상기 특징 변수 그룹 생성 모듈에 의하여 생성된 특징 변수 그룹을 이 루는 제1 특징 변수들의 영향력을 계산하기 위한 제1 시계열 벡터를 생성할 수 있다. 이때, 생성되는 제1 시계 열 벡터는 해당 특징 변수 그룹을 대표하는 시계열 벡터가 된다. 본 발명의 일 실시 예에 따르면, 상기 시계열 벡터 생성 모듈은 전체 시계열 데이터를 이루는 특징 변수들 중에서, 상기 특징 변수 그룹을 구성하는 특정한 특징 변수를 제외한 시계열 데이터에 대한 임베딩을 통하여 상 기 제1 시계열 벡터를 생성할 수 있다. 여기서, 상기 특징 변수를 제외한다는 것은 상기 특징 변수의 가중치를 0으로 설정하는 것을 의미할 수 있다. 예를 들어, a, b, c 세개의 특징 변수가 있고, 제1 특징 변수 그룹이 a, b로 이루어진 경우, a, b가 제거된 c로 이루어진 시계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터를 생성할 수 있다. 또한, 제2 특징 변수 그룹 이 b, c로 이루어진 경우, b, c가 제거된 a로 이루어진 시계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터 를 생성할 수 있다. 마찬가지로, 제3 특징 변수 그룹이 c, a로 이루어진 경우, c, a가 제거된 b로 이루어진 시 계열 데이터에 대한 임베딩을 통하여 제1 시계열 벡터를 생성할 수 있다. 이때, 상기 시계열 벡터 생성 모듈은 정상 데이터 및 이상 데이터 별로 각각 생성한 모든 특징 변수 그룹 들을 대상으로, 상기 임베딩을 통하여 제1 시계열 벡터를 생성할 수 있다.예를 들어, 상기 특징 변수 그룹 생성 모듈에 의하여, 수집한 데이터에 기반한 특징 변수 그룹 집합"}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "및 특징 변수 간의 상관 관계에 기반한 특징 변수 그룹 집합 가 생성된 경우, 상기 시계열 벡터 생성 모듈 은 각 특징 변수 그룹의 제1 특징 변수를 제외한 , , , , , 를 대상으로, 임베딩을 통하 여, 각각에 대한 제1 시계열 벡터를 생성할 수 있다. 구체적으로, 상기 시계열 벡터 생성 모듈은 수집한 데이터에 기반한 특징 변수 그룹 에서 제1 특징 변수 를 제거하여 생성된 그룹을 대상으로 임베딩하여 특징 변수 그룹 에 대한 제1 시계열 벡터 를 생성할 수 있으며, 생성된 제1 시계열 벡터 는 특징 변수 그룹 를 구성하는 제1 특징 변수의 영향력을 판단하기 위하여 사용된다. 이와 같이, 상기 시계열 벡터 생성 모듈은 정상 데이터로 생성된 특징 변수 그룹 , , , , , 에 대한 제1 시계열 벡터 , , , , , 를 생성할 수 있다. 또한, 상기 시계열 벡터 생성 모듈은 이상 데이터로 생성된 특징 변수 그룹 , , , , , 에 대한 제1 시계열 벡터 , , , , , 를 생성할 수 있다. 이와 같이, 각 특징 변수 그룹 별로 생성된 제1 시계열 벡터는 제2 시계열 벡터와의 유사성 계산을 통하여, 각 특징 변수 그룹에 해당되는 제1 특징 변수가 이상 탐지에 미치는 영향력을 계산하기 위하여 사용되는데, 이에 대해서는 하기에서 보다 상세히 설명하기로 한다. 한편, 도 8에 도시된 바와 같이, 본 발명의 일 실시 예에 따르면, 상기 시계열 벡터 생성 모듈은 오차 데 이터베이스(DB)에 저장되어 있는 비교 기준 데이터에 대한 임베딩을 통하여 제2 시계열 벡터를 생성할 수 있다. 상기 제2 시계열 벡터는 상기 제1 시계열 벡터와의 유사도 계산을 통하여, 각 특징 변수 그룹의 영향력을 계산 하기 위한 기준이 된다. 상기 연산 모듈은 상기 시계열 벡터 생성 모듈에 의하여 생성된 제1 시계열 벡터와 제2 시계열 벡터 간의 거리를 이용하여, 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 계산할 수 있다. 도 9 및 도 10에 도시된 바와 같이, 본 발명의 일 실시 예에 따르면, 상기 연산 모듈은 최대 평균 불일치 (Maximum Mean Discrepancy; MMD)와 유클리드(Euclidean) 거리를 이용하여, 상기 제1 시계열 벡터와 제2 시계 열 벡터 간의 거리를 산출할 수 있다. 상기 특징 변수 선별부는 상기 연산 모듈을 통하여 산출된 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 거리, 즉, 최대 평균 불일치 및 유클리드 거리 수치가 낮을수록 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성이 높은 것으로 판단할 수 있다. 본 발명의 일 실시 예에 따르면, 상기 특징 변수 선별부는 제1 시계열 벡터와 제2 시계열 벡터 간의 유사 성을 비교하여, 정상 데이터로 생성된 특징 변수 그룹들 각각에 대하여 생성된 제1 시계열 벡터 중에서 상기 제 2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 선택할 수 있다. 또한, 상기 특징 변수 선별부는 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 비교하여, 이상 데이터 로 생성된 특징 변수 그룹들 각각에 대하여 생성된 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 선택할 수 있다. 이때, 상기 특징 변수 선별부는 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 생성 할 때 제외되었던 제1 특징 변수를 따로 보관할 수 있다. 또한, 상기 특징 변수 선별부는 마찬가지로, 상 기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수를 따로 보관할 수 있다. 이를 통하여, 상기 특징 변수 선별부는 정상 데이터 기반으로 생성된 특징 변수 그룹 중에서 데이터의 이 상에 영향력이 가장 작은 특징 변수 그룹을 찾을 수 있고, 이상 데이터 기반으로 생성된 특징 변수 그룹 중에서 데이터의 이상에 영향력이 가장 큰 특징 변수 그룹을 찾을 수 있다.본 발명의 일 실시 예에 따르면, 상기 특징 변수 선별부는 데이터의 이상에 영향력이 가장 작은 특징 변수 그룹 및 데이터의 이상에 영향력이 가장 큰 특징 변수 그룹을 구성하는 다수의 제1 특징 변수 중에서, 이상장치 판별을 위한 특징 변수를 선별할 수 있다. 이때, 본 발명의 일 실시 예에서는 다수의 제1 특징 변수 중에서 선 별된 특징 변수는 제2 특징 변수로 정의된다. 즉, 상기 특징 변수 선별부를 통하여, 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 작은 제2 특징 변수로 선별되고, 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상 에 영향력이 가장 큰 제2 특징 변수로 선별될 수 있다. 다시 도 9를 참조하면, 상기 특징 변수 선별부는 예를 들어, 특징 변수가 6개로 구성된 입력 데이터를 이 용하여 이상장치 판별에 사용되는 제2 특징 변수를 선별하는 경우, 정상 데이터로 생성된 특징 변수 그룹 , 에 대하여 MMD와 유클리드 거리를 통하여 산출된 제1 시계열 벡터 , 중에서 제2 시계열 벡터(비 교 기준 시계열 벡터)와의 거리가 가장 길어진 제1 시계열 벡터를 선택할 수 있다. 이때, 전체 데이터의 특징 변수가 1번 내지 6번 장치 센서인 경우, 상기 특징 변수 그룹 을 이루는 제1 특 징 변수는 1, 3, 4번 장치 센서이고, 상기 특징 변수 그룹 을 이루는 제1 특징 변수는 2, 5, 6번 장치 센서 이며, 상기 제2 시계열 벡터와의 거리가 가장 긴 제1 시계열 벡터가 일 때, 상기 특징 변수 선별부는 상기 제1 시계열 벡터가 생성 시, 제외되었던 제1 특징 변수인 2, 5, 6번 장치 센서를 제2 특징 변수로 선별할 수 있다. 정상 데이터 기반에서, 상기 2, 5, 6번 장치 센서는 데이터 이상에 영향력이 가장 작은 특징 변수 그룹이 된다. 또한, 도 10을 참조하면, 상기 특징 변수 선별부는 특징 변수가 6개로 구성된 입력 데이터를 이용하여 이 상장치 판별에 사용되는 제2 특징 변수를 선별하는 경우, 이상 데이터로 생성된 특징 변수 그룹 , , 에 대하여 MMD와 유클리드 거리를 통하여 산출된 제1 시계열 벡터 , , 중에서 제2 시계열 벡 터(비교 기준 시계열 벡터)와의 거리가 가장 짧아진 제1 시계열 벡터를 선택할 수 있다. 이때, 전체 데이터의 특징 변수가 1번 내지 6번 장치 센서인 경우, 상기 특징 변수 그룹 을 이루는 제1 특징 변수는 1, 2, 3번 장치 센서이고, 상기 특징 변수 그룹 을 이루는 제1 특징 변수는 4, 5번 장치 센서이며, 상기 특징 변수 그룹 을 이루는 제1 특징 변수는 6번 장치 센서이고, 상기 제2 시계열 벡터와의 거리가 가장 짧은 제1 시계열 벡터가 일 때, 상기 특징 변수 선별부는 상기 제1 시계열 벡터가 생성 시 제 외되었던 제1 특징 변수인 1, 2, 3, 6번 장치 센서를 제2 특징 변수로 선별할 수 있다. 이상 데이터 기반에서, 상기 1, 2, 3, 6번 장치 센서는 데이터 이상에 영향력이 가장 큰 특징 변수 그룹이 된다. 이때, 정상 데이터 기반일 때와 이상 데이터 기반일 때 중복되는 2, 6번 센서는 제2 특징 변수 그룹에서 제외될 수 있다. 다시 도 1 및 도 2를 참조하면, 상기 이상장치 판별부는 상기 특징 변수 선별부에 의하여 선별된 제2 특징 변수로 이루어진 리스트 중에서 XAI(explainable AI; 설명 가능 인공지능)를 적용할 제3 특징 변수를 추출 할 수 있다. 또한, 상기 이상장치 판별부는 상기 추출된 제3 특징 변수로 이루어진 리스트에 대한 상기 XAI의 이상 탐지를 통하여 이상장치를 판별할 수 있다. 본 발명의 일 실시 예에 따르면, 상기 제3 특징 변수는 제2 특징 변수 중에서 데이터 이상에 미치는 영향력을 기준으로 선별된 변수일 수 있다. 상기 이상장치 판별부는 데이터 이상에 미치는 영향력이 큰 순으로, 제2 특징 변수 중에서 제3 특징 변수 를 추출할 수 있다. 예를 들어, 다시 도 9 및 도 10을 참조하면, 1, 2, 3, 5번 장치 센서는 이상 데이터 기준으로, 데이터 이상에 영향력이 가장 큰 제2 특징 변수이고, 2, 5, 6번 장치 센서는 정상 데이터 기준으로, 데이터 이상에 영향력이 가장 작은 제2 특징 변수일 때, 2, 5번 장치 센서는 정상 데이터 기반일 때와 이상 데이터 기반일 때 중복된다.이에, 이상 데이터 기준으로, 데이터 이상에 영향력이 가장 큰 제2 특징 변수 1, 2, 3, 5번 장치 센서에서, 정 상 데이터 기준으로, 데이터 이상에 영향력이 가장 작은 제2 특징 변수에도 포함되는 2, 5번 장치 센서를 제거 할 수 있다. 이에 따라, 제3 특징 변수는 1, 3번 장치 센서로 이루어질 수 있다. 이와 같이, 상기 이상장치 판별부는 제2 특징 변수 리스트에서 추출된 제3 특징 변수로 이루어진 리스트에 XAI를 적용하여 이상 특징 변수를 선별할 수 있으며, 이를 통하여, 이상장치를 특정할 수 있다. 이때, 상기 이 상장치 판별부는 예를 들어, 상기 SHAP(SHapley Additive exPlanation) 알고리즘을 이용하여, 제3 특징 변수 리스트로부터 이상 특징 변수를 선별할 수 있다. 본 발명의 일 실시 예에 따르면, 상기 특징 변수 선별부에 의하여 선별된 제2 특징 변수 리스트에서 추출 된 제3 특징 변수 리스트 내에서 XAI로 제3 특징 변수들의 영향력을 계산하기 때문에, XAI를 통해, 제3 특징 변 수 리스트에 대하여 이상 여부 판단에 영향력을 미치는 이상 변수를 판별할 경우, 기존보다 높은 효율성과 신뢰 성을 가지고 이장장치를 판별할 수 있고, 공정 관리자가 공정 중 이상 발생 시 신속하고 적절한 대응을 할 수 있도록 도움을 줄 수 있다. 이하, 본 발명의 일 실시 예에 따른 이상장치 판별 방법에 대하여, 도 11 및 도 12를 참조하여 설명하기로 한다. 도 11은 본 발명의 일 실시 예에 따른 이상장치 판별 방법을 나타낸 흐름도이고, 도 12는 본 발명의 일 실시 예 에 따른 이상장치 판별 방법을 설명하기 위한 참고도이다. 도 11을 참조하면, 본 발명의 일 실시 예에 따른 이상장치 판별 방법은 S110 단계, S120 단계 및 S130 단계를 포함할 수 있다. 이때, 도시하지는 않았지만, 본 발명의 일 실시 예에 따른 이상장치 판별 방법은 데이터 전처 리 단계를 더 포함할 수 있다. 상기 데이터 전처리 단계에서는 제조 공정 장치들로부터 수집되는 시계열 데이터에 결측치가 있는 경우, 단순 이동 평균 방법을 통하여 상기 시계열 데이터를 보간할 수 있다. 또한, 상기 데이터 전처리 단계에서는 데이터 정규화 과정을 통하여 상기 시계열 데이터 값을 표준화할 수 있다. 그리고 상기 데이터 전처리 단계에서는 상기 시계열 데이터의 길이가 긴 경우, 슬라이딩 윈도우 기법을 통하여, 상기 시계열 데이터를 특정 기간 단위로 잘라 서브 셋 집합으로 만들 수 있다. S110 단계 도 12를 참조하면, 상기 S110 단계에서는 전처리된 시계열 데이터에 대한 이상 여부를 탐지할 수 있다. 이를 위하여, 상기 S110 단계에서는 잔차 기반 이상 탐지 모델을 통하여 상기 수집된 시계열 데이터에 대한 이 상 여부를 탐지할 수 있다. 본 발명의 일 실시 예에 따르면, 상기 S110 단계에서는 이러한 잔차 기반 이상 탐지 모델을 통하여, 제조 공정 에 사용되는 적어도 하나의 장치로부터 수집된 시계열 데이터에 대한 이상 여부를 탐지하고, 이를 통하여, 상기 시계열 데이터를 이상 데이터와 정상 데이터로 구분할 수 있다. 이때, 상기 S110 단계에서는 원본 데이터, 즉, 상기 잔차 기반 이상 탐지 모델이 학습한 표준 정상 데이터와의 오차율에 따른 오차 데이터베이스(DB)를 구축할 수 있다. 상기 S110 단계에서는 상기 잔차 기반 이상 탐지 모델에 의하여 탐지된 정상 데이터들 중에서, 상기 잔차 기반 이상 탐지 모델이 학습한 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 데이터를 상기 오차 데이터베이 스(DB)에 저장할 수 있다. 예를 들어, 상기 S110 단계에서는 정상 데이터로 탐지된 데이터들 중에서, 상기 표준 정상 데이터와의 오차가 가장 적은 20%의 정상 데이터를 상기 오차 데이터베이스(DB)에 저장할 수 있다.한편, 상기 S110 단계에서는 상기 표준 정상 데이터와의 오차율이 상대적으로 가장 적은 정상 데이터를 비교 기 준 데이터로 설정할 수 있다. S120 단계 계속해서, 도 12를 참조하면, 상기 S120 단계에서는 상기 S110 단계를 통하여 구분된 이상 데이터 또는 정상 데 이터를 구성하는 특징 변수 중 미리 설정된 조건을 만족하는 특징 변수를 선별할 수 있다. 이러한 특징 변수는 제1 특징 변수 및 제2 특징 변수를 포함할 수 있다. 상기 제1 특징 변수는 이상 데이터 또는 정상 데이터를 구성하는 변수일 수 있다. 또한, 상기 제2 특징 변수는 상기 제1 특징 변수 중에서 이상장치 판별을 위해 미리 설정된 기준에 따라 선별된 변수일 수 있다. 이때, 상기 S120 단계에서는 제1 특징 변수에 기반하여 제1 시계열 벡터를 생성하고, 비교 기준 데이터에 기반 하여 제2 시계열 벡터를 생성할 수 있다. 그리고 상기 S120 단계에서는 생성된 제1 시계열 벡터 및 제2 시계열 벡터 간의 거리에 기반하여, 제1 특징 변 수 중에서 제2 특징 변수를 선별할 수 있다. 이를 위하여, 상기 S120 단계는 제1 과정, 제2 과정 및 제3 과정을 포함할 수 있다. 상기 제1 과정에서는 K-means와 같은 군집화 알고리즘을 통하여 다수의 제1 특징 변수를 그룹화하여 특징 변수 그룹을 생성할 수 있다. 상기 제1 과정에서는 먼저, 시간에 따른 데이터, 즉, 시계열 데이터를 특징 변수에 따른 데이터로 변환할 수 있 다. 그 다음, 상기 제1 과정에서는 변환된 제1 특징 변수에 따른 데이터에 상기 군집화 알고리즘을 적용하여, 제조 공정 장치들로부터 수집한 데이터(Unlabeled Data)에 기반한 특징 변수 그룹(Labeled Data) 또는 특징 변 수 그룹 리스트를 생성할 수 있다. 이와 아울러, 상기 제1 과정에서는 변환된 제1 특징 변수에 따른 데이터에 대하여, 특징 변수 간의 상관 관계를 나타내는 행렬 데이터를 생성하고, 생성된 행렬 데이터에 상기 군집화 알고리즘을 적용하여, 상관 관계에 기반 한 특징 변수 그룹 또는 특징 변수 그룹 리스트를 생성할 수 있다. 이때, 상기 제1 과정에서는 정상 데이터 및 이상 데이터 별로, 수집한 데이터에 기반한 특징 변수 그룹들 및 특 징 변수 간의 상관 관계에 기반한 특징 변수 그룹들을 각각 생성할 수 있다. 상기 제2 과정에서는 상기 제1 과정을 통하여 생성된 특징 변수 그룹을 이루는 제1 특징 변수들의 영향력을 계 산하기 위한 제1 시계열 벡터를 생성할 수 있다. 상기 제2 과정에서는 은 전체 시계열 데이터를 이루는 특징 변수들 중에서, 상기 특징 변수 그룹을 구성하는 특 정한 특징 변수를 제외한 시계열 데이터에 대한 임베딩을 통하여 상기 제1 시계열 벡터를 생성할 수 있다. 이때, 상기 제2 과정에서는 정상 데이터 및 이상 데이터 별로 각각 생성한 모든 특징 변수 그룹들을 대상으로, 상기 임베딩을 통하여 제1 시계열 벡터를 생성할 수 있다. 상기 제3 과정에서는 상기 제2 과정을 통하여 생성된 제1 시계열 벡터와 제2 시계열 벡터 간의 거리를 이용하여, 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 계산할 수 있다. 상기 제3 과정에서는 최대 평균 불일치(Maximum Mean Discrepancy; MMD)와 유클리드(Euclidean) 거리를 이용하 여, 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 거리를 산출할 수 있다. 상기 S120 단계에서는 상기 제3 과정을 통하여 산출된 상기 제1 시계열 벡터와 제2 시계열 벡터 간의 거리, 즉, 최대 평균 불일치 및 유클리드 거리 수치가 낮을수록 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성이 높은 것으로 판단할 수 있다. 본 발명의 일 실시 예에 따르면, 상기 S120 단계에서는 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 비교 하여, 정상 데이터로 생성된 특징 변수 그룹들 각각에 대하여 생성된 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 선택할 수 있다.또한, 상기 S120 단계에서는 제1 시계열 벡터와 제2 시계열 벡터 간의 유사성을 비교하여, 이상 데이터로 생성 된 특징 변수 그룹들 각각에 대하여 생성된 제1 시계열 벡터 중에서 상기 제2 시계열 벡터와의 상대적 거리가 짧아진 제1 시계열 벡터를 선택할 수 있다. 이때, 상기 S120 단계에서는 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 생성할 때 제 외되었던 제1 특징 변수를 따로 보관할 수 있다. 또한, 상기 S120 단계에서는 마찬가지로, 상기 제2 시계열 벡 터와의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수를 따로 보관할 수 있다. 이를 통하여, 상기 S120 단계에서는 정상 데이터 기반으로 생성된 특징 변수 그룹 중에서 데이터의 이상에 영향 력이 가장 작은 특징 변수 그룹을 찾을 수 있고, 이상 데이터 기반으로 생성된 특징 변수 그룹 중에서 데이터의 이상에 영향력이 가장 큰 특징 변수 그룹을 찾을 수 있다. 본 발명의 일 실시 예에 따르면, 상기 S120 단계에서는 데이터의 이상에 영향력이 가장 작은 특징 변수 그룹 및 데이터의 이상에 영향력이 가장 큰 특징 변수 그룹을 구성하는 다수의 제1 특징 변수 중에서 이상장치 판별을 위한 특징 변수를 선별할 수 있다. 이때, 본 발명의 일 실시 예에서는 다수의 제1 특징 변수 중에서 선별된 특 징 변수는 제2 특징 변수로 정의된다. 즉, 상기 S120 단계에서는 상기 제2 시계열 벡터와의 상대적 거리가 길어진 제1 시계열 벡터를 생성할 때 제외 되었던 제1 특징 변수는 데이터 이상에 영향력이 가장 작은 제2 특징 변수로 선별하고, 상기 제2 시계열 벡터와 의 상대적 거리가 짧아진 제1 시계열 벡터를 생성할 때 제외되었던 제1 특징 변수는 데이터 이상에 영향력이 가 장 큰 제2 특징 변수로 선별할 수 있다. S130 단계 계속해서, 도 12를 참조하면, 상기 S130 단계에서는 상기 S120 단계를 통하여 선별된 제2 특징 변수로 이루어진 리스트 중에서 XAI(explainable AI; 설명 가능 인공지능)를 적용할 제3 특징 변수를 추출할 수 있다. 또한, 상기 S130 단계에서는 상기 추출된 제3 특징 변수로 이루어진 리스트에 대한 상기 XAI의 이상 탐지를 통 하여 이상 특징 변수를 선별할 수 있으며, 이를 통하여, 이상장치를 특정할 수 있다. 본 발명의 일 실시 예에 따르면, 상기 제3 특징 변수는 제2 특징 변수 중에서 데이터 이상에 미치는 영향력을 기준으로 선별된 변수일 수 있다. 상기 S130 단계에서는 데이터 이상에 미치는 영향력이 큰 순으로, 제2 특징 변수 중에서 제3 특징 변수를 추출 할 수 있다. 이에 앞서, 상기 S130 단계에서는 상기 S110 단계에서 잔차 기반 이상 탐지 모델에서 생성한 잠재 변수를 인공 신경망 모델, 렌덤 포레스트, OCSVM 모델 등의 이진 분류 모델로 분류할 수 있다. 이때, 이진 분류 모델의 정답 은 잔차 기반 이상 탐지 모델이 분류했던 정상, 이상 여부로 정의될 수 있다. 상기 S130 단계에서는 이와 같이 이진 분류 모델에 의한 학습이 완료되면, XAI 모델 중 하나인 예를 들어, SHAP 알고리즘을 이용하여, 상기 제3 특징 변수로 이루어진 리스트에서 이상 변수를 판별하여 출력할 수 있으며, 이 를 통하여, 이상장치를 판별할 수 있다. 상기 S130 단계에서는 상기 S120 단계를 통하여 선별된 제2 특징 변수 리스트에서 추출된 제3 특징 변수 리스트 내에서 XAI로 제3 특징 변수들의 영향력을 계산하기 때문에, XAI를 통해, 제3 특징 변수 리스트에 대하여 이상 여부 판단에 영향력을 미치는 이상 변수를 판별할 경우, 기존보다 높은 효율성과 신뢰성을 가지고 이장장치를 판별할 수 있고, 공정 관리자가 공정 중 이상 발생 시 신속하고 적절한 대응을 할 수 있도록 도움을 줄 수 있다. 이상, 본 발명을 바람직한 실시 예를 사용하여 상세히 설명하였으나, 본 발명의 범위는 특정 실시 예에 한정되"}
{"patent_id": "10-2023-0045224", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "는 것은 아니며, 첨부된 특허청구범위에 의하여 해석되어야 할 것이다. 또한, 이 기술분야에서 통상의 지식을 습득한 자라면, 본 발명의 범위에서 벗어나지 않으면서도 많은 수정과 변형이 가능함을 이해하여야 할 것이다. 부호의 설명100; 시계열 벡터 간 거리 계산에 기반한 이상장치 판별 장치 110; 데이터 전처리부 120; 데이터 이상 여부 탐지부 130; 특징 변수 선별부 131; 특징 변수 그룹 생성 모듈 132; 시계열 벡터 생성 모듈 133; 연산 모듈 140; 이상장치 판별부"}
{"patent_id": "10-2023-0045224", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시 예에 따른 이상장치 판별 장치를 나타낸 구성도이다. 도 2는 본 발명의 일 실시 예에 따른 이상장치 판별 장치를 설명하기 위한 블록도이다. 도 3은 본 발명의 일 실시 예에 따른 이상장치 판별 장치의 데이터 전처리부를 설명하기 위한 참고도이다. 도 4는 본 발명의 일 실시 예에 따른 이상장치 판별 장치의 데이터 이상 여부 탐지부를 설명하기 위한 참고도이 다. 도 5는 본 발명의 일 실시 예에 따른 이상장치 판별 장치의 특징 변수 선별부를 나타낸 구성도이다. 도 6 및 도 7은 본 발명의 일 실시 예에 따른 이상장치 판별 장치에서, 특징 변수 선별부의 특징 변수 그룹 생 성 모듈을 설명하기 위한 참고도들이다. 도 8은 본 발명의 일 실시 예에 따른 이상장치 판별 장치에서, 특징 변수 선별부의 시계열 벡터 생성 모듈을 설 명하기 위한 참고도이다. 도 9 및 도 10은 본 발명의 일 실시 예에 따른 이상장치 판별 장치에서, 특징 변수 선별부의 연산 모듈을 설명 하기 위한 참고도들이다. 도 11은 본 발명의 일 실시 예에 따른 이상장치 판별 방법을 나타낸 흐름도이다. 도 12는 본 발명의 일 실시 예에 따른 이상장치 판별 방법을 설명하기 위한 참고도이다."}
