{"patent_id": "10-2022-0165595", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0082434", "출원번호": "10-2022-0165595", "발명의 명칭": "네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템 및 방법", "출원인": "주식회사 엘티포", "발명자": "임준성"}}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "시계열 패킷 데이터 개수로부터 이상값(Anomaly value)을 탐지하도록 비지도 학습된 어노멀리 트랜스포머(Anomaly Transformer) 모델이 저장된 메모리; 및실시간으로 수집되는 시계열 패킷 데이터 중 특정 시점에 수집되는 시계열 패킷 데이터의 개수를 상기 어노멀리트랜스포머 모델에 입력하여 네트워크에서 발생하는 시계열 패킷 데이터의 이상값을 탐지하는 프로세서;를 포함하는, 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템."}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 어노멀리 트랜스포머 모델은,상기 입력되는 시계열 패킷 데이터의 개수를 MLP(Multi-Layer Perceptron, 다층 퍼셉트론) 알고리즘에 입력하여쿼리(Q), 키(K), 벨류(V) 및 시그마()를 생성하는 MLP부;상기 시그마를 정규분포 및 스케일링하여 PA(Prior Association)값을 산출하는 PA값 산출부; 상기 PA값 산출부에서 산출된 PA값을 학습하여 PA 어텐션 스코어를 산출하는 PA 어텐션 스코어 산출부;상기 쿼리와 키의 어텐션 연산을 통해 SA(Series Association)의 어텐션 스코어를 산출하는 SA 어텐션 스코어산출부; 및상기 PA 어텐션 스코어와 SA 어텐션 스코어를 비교하여 상기 이상값을 산출하고, 네트워크의 정상 여부를 판단하는 모니터링부;를 포함하는 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템."}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제3항에 있어서,상기 모니터링부는,상기 PA 어텐션 스코어, SA 어텐션 스코어 및 KL Divergence 알고리즘을 이용하여 확률 분포의 차이(R')를 산출하는 KLD부;상기 어노멀리 트랜스포머 모델에 설정된 레이어 개수만큼 산출되는 다수의 확률 분포의 차이(R')의 평균(R, 이하 'KLD 평균'이라 한다)을 산출하는 KLD 평균 산출부; 및상기 산출된 KLD 평균이 기설정된 기준값 이하이면 상기 산출된 KLD 평균을 이상값으로 정하고, 네트워크가 비정상상태인 것으로 판단하는 판단부;를 포함하는 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템."}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "공개특허 10-2024-0082434-3-제1항에 있어서,상기 실시간으로 수집되는 시계열 패킷 데이터를 전처리하여 시계열 패킷 데이터가 수신된 시각과 동일한 시각에 수신된 시계열 패킷 데이터의 개수를 추출하는 전처리부;를 더 포함하는 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템."}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "네트워크 패킷 데이터를 모니터링하는 시스템의 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 방법에있어서,(A) 상기 시스템이, 실시간으로 수신되는 시계열 패킷 데이터를 수집하는 단계;(B) 상기 시스템이, 상기 수집되는 시계열 패킷 데이터 중 특정 시점에 수집되는 시계열 패킷 데이터의 개수를어노멀리 트랜스포머(Anomaly Transformer) 모델에 입력하여 네트워크에서 발생하는 시계열 패킷 데이터의 이상값을 탐지하는 단계;를 포함하고,상기 어노멀리 트랜스포머 모델은 시계열 패킷 데이터 개수로부터 이상값(Anomaly value)을 탐지하도록 비지도학습된 모델인, 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 방법."}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서,상기 (B) 단계는,(B1) 상기 어노멀리 트랜스포머 모델이 상기 입력되는 시계열 패킷 데이터의 개수를 MLP(Multi-LayerPerceptron, 다층 퍼셉트론) 알고리즘에 입력하여 쿼리(Q), 키(K), 벨류(V) 및 시그마()를 생성하는 단계;(B2) 상기 시그마를 정규분포 및 스케일링하여 PA(Prior Association)값을 산출하는 단계;(B3) 상기 (B2) 단계에서 산출된 PA값을 학습하여 PA 어텐션 스코어를 산출하는 단계;(B4) 상기 쿼리와 키의 어텐션 연산을 통해 SA(Series Association)의 어텐션 스코어를 산출하는 단계; 및(B5) 상기 (B3) 단계에서 산출된 PA 어텐션 스코어와 상기 (B4) 단계에서 산출된 SA 어텐션 스코어를 비교하여상기 네트워크의 정상 여부를 판단하는 단계;를 포함하는 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 방법."}
{"patent_id": "10-2022-0165595", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 (B5) 단계는,(B51) 상기 PA 어텐션 스코어, SA 어텐션 스코어 및 KL Divergence 알고리즘을 이용하여 확률 분포의 차이(R')를 산출하는 단계;(B52) 상기 어노멀리 트랜스포머 모델에 설정된 레이어 개수만큼 산출되는 다수의 확률 분포의 차이(R')의 평균(R, 이하 'KLD 평균'이라 한다)을 산출하는 단계; 및(B53) 상기 산출된 KLD 평균이 기설정된 기준값 이하이면 상기 산출된 KLD 평균을 이상값으로 정하고, 네트워크공개특허 10-2024-0082434-4-가 비정상상태인 것으로 판단하는 단계;를 포함하는 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 방법."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템 및 방법이 개시된다. 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템은, 시계열 패킷 데이터 개수로부터 이상값(Anomaly value)을 탐지하도록 비지도 학습된 어노멀리 트랜스포머(Anomaly Transformer) 모델이 저장된 메모리와, 실시간으로 수집되는 시계열 패킷 데이터 중 특정 시점에 수집되는 시계열 패킷 데이터의 개수를 어노멀리 트랜스포머 모델에 입력하여 네트 워크에서 발생하는 시계열 패킷 데이터의 이상값을 탐지하는 프로세서를 포함할 수 있다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템 및 방법에 관한 것이다. 보다 구체적 으로, 본 발명은 전이 학습을 이용하여 라벨이 없는 시계열 데이터를 처리하는 방법 및 그 시스템에 관한 것이다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "트래픽의 폭주로 공격 대상이나 그 주변 인프라를 압도하여 네트워크의 정상적인 트래픽을 방해하는 분산 서비 스 거부(DDoS: Distributed Denial of Service) 공격을 통해 기업 혹은 개인에게 피해를 주는 경우가 증가하고 있으며, 공격 방법 또한 다양하게 변화하고 있다. 따라서, DDoS 공격 등에 의해 비정상적으로 네트워크 패킷 데이터의 수가 급증할 경우, 이러한 공격을 신속히 탐지하고 대처하기 위한 모니터링에 대한 관심도 급증하고 있다. 기존의 모니터링 방식은 관리자가 직접 차트나 이벤트를 감시하면서 네트워크 환경의 이상 상황에 직접 대응하 거나, 룰셋을 기반한 알람, 또는 단순 통계량과 동적 임계값을 이용하는 시스템적 모니터링 방식 등으로 구분할 수 있다. 그러나 관리자가 직접 모니터링하는 방식은 예외 상황 대응에는 뛰어나지만 모니터링 대상 수가 제한 되어 있으며, 관리자의 역량에 따라 모니터링의 품질 차이가 크다는 단점이 있다. 또한, 룰셋 기반의 알람은 보다 정교한 모니터링이 가능하지만 환경 변화에 따른 변경 관리가 어렵고, 룰셋의 복잡도 가 높아지면 유지보 수에 많은 비용이 발생한다. 마지막으로 기간 평균, 표준편차와 같은 단순 통계량 기반의 동적 임계값은 각각 의 대상마다 가지고 있는 고유한 계절성과 특성을 반영하기에는 부족하다. 따라서, 기존의 모니터링 방식을 개선하여 보다 정확하게 데이터를 분석하여 이상값(Anomaly value)을 예측할 수 있는 모니터링 방식이 필요하다. 선행기술문헌 특허문헌 (특허문헌 0001) 국내 공개특허 제10-2019-0015599(2019.02.13. 공개)"}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은 상기와 같은 문제점을 해결하기 위한 것으로, 외부로부터 유입되는 과잉 트래픽을 분석하여 네트워크 패킷 데이터 이상값을 탐지할 수 있는 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템 을 제시하는 데 있다. 본 발명의 기술적 과제들은 이상에서 언급한 기술적 과제로 제한되지 않으며, 언급되지 않은 또 다른 기술적 과 제들은 아래의 기재로부터 본 발명의 기술 분야에서의 통상의 기술자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기와 같은 목적을 달성하기 위하여 본 발명의 실시예에 따르면, 네트워크 패킷 데이터의 이상값 탐지를 이용 한 모니터링 시스템은 시계열 패킷 데이터 개수로부터 이상값(Anomaly value)을 탐지하도록 비지도 학습된 어노 멀리 트랜스포머(Anomaly Transformer) 모델이 저장된 메모리; 및 실시간으로 수집되는 시계열 패킷 데이터 중 특정 시점에 수집되는 시계열 패킷 데이터의 개수를 상기 어노멀리 트랜스포머 모델에 입력하여 네트워크에서 발생하는 시계열 패킷 데이터의 이상값을 탐지하는 프로세서;를 포함할 수 있다. 상기 어노멀리 트랜스포머 모델은, 상기 입력되는 시계열 패킷 데이터의 개수를 MLP(Multi-Layer Perceptron, 다층 퍼셉트론) 알고리즘에 입력하여 쿼리(Q), 키(K), 벨류(V) 및 시그마( )를 생성하는 MLP부; 상기 시그마를 정규분포 및 스케일링하여 PA(Prior Association)값을 산출하는 PA값 산출부; 상기 PA값 산출부에서 산출된 PA 값을 학습하여 PA 어텐션 스코어를 산출하는 PA 어텐션 스코어 산출부; 상기 쿼리와 키의 어텐션 연산을 통해 SA(Series Association)의 어텐션 스코어를 산출하는 SA 어텐션 스코어 산출부; 및 상기 PA 어텐션 스코어와 SA 어텐션 스코어를 비교하여 상기 이상값을 산출하고, 네트워크의 정상 여부를 판단하는 모니터링부;를 포함할 수 있다. 상기 모니터링부는, 상기 PA 어텐션 스코어, SA 어텐션 스코어 및 KL Divergence 알고리즘을 이용하여 확률 분 포의 차이(R')를 산출하는 KLD부; 상기 어노멀리 트랜스포머 모델에 설정된 레이어 개수만큼 산출되는 다수의 확률 분포의 차이(R')의 평균(R, 이하 'KLD 평균'이라 한다)을 KLD 평균 산출부; 및 상기 산출된 KLD 평균이 기 설정된 기준값 이하이면 상기 산출된 KLD 평균을 이상값으로 정하고, 네트워크가 비정상상태인 것으로 판단하는 판단부;를 포함할 수 있다. 상기 실시간으로 수집되는 시계열 패킷 데이터를 전처리하여 시계열 패킷 데이터가 수신된 시각과 동일한 시각 에 수신된 시계열 패킷 데이터의 개수를 추출하는 전처리부;를 더 포함할 수 있다. 본 발명의 또 다른 실시예에 따르면, 네트워크 패킷 데이터를 모니터링하는 방법은 시스템이 실시간으로 수신되 는 시계열 패킷 데이터를 수집하는 단계; (B) 상기 시스템이, 상기 수집되는 시계열 패킷 데이터 중 특정 시점 에 수집되는 시계열 패킷 데이터의 개수를 어노멀리 트랜스포머(Anomaly Transformer) 모델에 입력하여 네트워 크에서 발생하는 시계열 패킷 데이터의 이상값을 탐지하는 단계;를 포함하고, 상기 어노멀리 트랜스포머 모델은 시계열 패킷 데이터 개수로부터 이상값(Anomaly value)을 탐지하도록 비지도 학습된 모델일 수 있다. 상기 (B) 단계는, (B1) 상기 어노멀리 트랜스포머 모델이 상기 입력되는 시계열 패킷 데이터의 개수를 MLP(Multi-Layer Perceptron, 다층 퍼셉트론) 알고리즘에 입력하여 쿼리(Q), 키(K), 벨류(V) 및 시그마( )를 생성하는 단계; (B2) 상기 시그마를 정규분포 및 스케일링하여 PA(Prior Association)값을 산출하는 단계; (B3) 상기 (B2) 단계에서 산출된 PA값을 학습하여 PA 어텐션 스코어를 산출하는 단계; (B4) 상기 쿼리와 키의 어텐션 연산을 통해 SA(Series Association)의 어텐션 스코어를 산출하는 단계; 및 (B5) 상기 (B3) 단계에서 산출된 PA 어텐션 스코어와 상기 (B4) 단계에서 산출된 SA 어텐션 스코어를 비교하여 상기 네트워크의 정상 여부를 판 단하는 단계;를 포함할 수 있다. 상기 (B5) 단계는, (B51) 상기 PA 어텐션 스코어, SA 어텐션 스코어 및 KL Divergence 알고리즘을 이용하여 확 률 분포의 차이(R')를 산출하는 단계; (B52) 상기 어노멀리 트랜스포머 모델에 설정된 레이어 개수만큼 산출되 는 다수의 확률 분포의 차이(R')의 평균(R, 이하 'KLD 평균'이라 한다)을 산출하는 단계; 및 (B53) 상기 산출된 KLD 평균이 기설정된 기준값 이하이면 상기 산출된 KLD 평균을 이상값으로 정하고, 네트워크가 비정상상태인 것으로 판단하는 단계;를 포함할 수 있다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은, 단순히 트래픽의 양의 차이만을 비교하는 것이 아니라 트래픽의 송수신 내역 자체를 학습하여 분석 하는 비지도 학습 모델을 이용하므로 시스템의 관리자가 미처 탐지하지 못한 상황도 실시간으로 탐지하여 이상 여부를 판단할 수 있다. 또한, 본 발명은 딥러닝 기반의 이상값 탐지 모델을 웹 플랫폼으로 구현하여 실시간으로 시계열 데이터를 분석 하며 이상값이 발생한 경우 사용자 또는 관리자에게 경고하여 비상 상황에 대비하도록 할 수 있다.또한, 본 발명은 실시간 송수신되는 데이터를 분석하여 이상값을 탐지할 뿐만 아니라 이상값 발생 시점의 데이 터를 추가로 학습하여 네트워크 보안에 안전성을 높일 수 있다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과들은 이상에서 언급한 효과로 제한되지 않으며, 언급되지 않은 또 다른 효과들은 아래의 기재로 부터 본 발명의 기술 분야에서의 통상의 기술자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명은 취지를 벗어나지 않는 한도에서 다양하게 변경하여 실시할 수 있고, 다수의 실시 예를 가질 수 있다."}
{"patent_id": "10-2022-0165595", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "그리고 본 발명에서 “발명을 실시하기 위한 구체적인 내용” 및 “도면” 등에 기재한 실시 예는, 본 발명을 구체적으로 설명하기 위한 예시이며, 본 발명의 권리 범위를 제한하거나 한정하는 것은 아니다. 따라서, 본 발명이 속하는 기술 분야의 통상의 지식을 가진 자가, 본 발명의 “발명을 실시하기 위한 구체적인 내용” 및 “도면” 등으로부터 용이하게 유추할 수 있는 것은, 본 발명의 범위에 속하는 것으로 해석할 수 있 다. 또한, 도면에 표시한 각 구성 요소들의 크기와 형태는, 실시 예의 설명을 위해 과장되어 표현한 것 일 수 있으 며, 실제로 실시되는 발명의 크기와 형태를 한정하는 것은 아니다. 본 발명의 명세서에서 사용되는 용어를 특별히 정의하지 않는 이상, 본 발명이 속하는 기술 분야에서 통상의 지 식을 가진 자가 일반적으로 이해하는 것과 동일한 의미를 가질 수 있다. 어떤 구성요소(예: 제1 구성요소)가 다른 구성요소(예: 제2 구성요소)에 \"(기능적으로 또는 통신적으로) 연결되 어((operatively or communicatively) coupled with/to)\" 있다거나 \"접속되어(connected to)\" 있다고 언급된 때에는, 상기 어떤 구성요소가 상기 다른 구성요소에 직접적으로 연결되거나, 다른 구성요소(예: 제3 구성요 소)를 통하여 연결될 수 있다고 이해되어야 할 것이다. 명세에서 사용된 표현 \"~하도록 구성된(또는 설정된)(configured to)\"은 상황에 따라, 예를 들면, \"~에 적합 한 (suitable for),\" \"~하는 능력을 가지는(having the capacity to),\" \"~하도록 설계된(designed to),\" \"~하도 록 변경된(adapted to),\" \"~하도록 만들어진(made to),\" 또는 \"~를 할 수 있는(capable of)\"과 바꾸어 사용될수 있다. 용어 \"~하도록 구성된(또는 설정된)\"은 하드웨어적으로 \"특별히 설계된(specifically designed to)\" 것 만을 반 드시 의미하지 않을 수 있다. 대신, 어떤 상황에서는, \"~하도록 구성된 장치\"라는 표현은, 그 장치가 다른 장치 또는 부품들과 함께 \"~할 수 있는\" 것을 의미할 수 있다. 예를 들면, 문구 \"A, B, 및 C를 수행하도록 구성된(또 는 설정된) 부 프로세서\"는 해당 동작을 수행하기 위한 전용 프로세서(예: 임베디드 프로세서), 또는 메모리 장 치에 저장된 다수의 소프트웨어 프로그램들을 실행함으로써, 해당 동작들을 수행할 수 있는 범용 프로세서 (generic-purpose processor)(예: CPU 또는 application processor)를 의미할 수 있다. 명세의 다양한 실시 예들에 따른 전자 장치는, 적어도 하나의 서버로 구현될 수 있으나, 이는 일 실시 예에 불 과할 뿐, 사용자 단말 장치 또는 가전 제품으로 구현될 수도 있다. 이하, 도면을 참조하여 본 발명의 실시 예를 상세하게 설명한다. 먼저 본 발명의 실시 예에서 사용되는 용어에 대해 정의한다. 네트워크 패킷 데이터는 패킷 방식을 컴퓨터 네트워크가 전달하는 데이터의 형태로 형식화된 블록으로서, 네트 워크에서 데이터를 주고받을 때 정해놓은 규칙에 따라 송수신되며, 송수신되는 패킷 데이터의 양으로 트래픽 (traffic)을 정의한다. 트래픽은 네트워크 장치에서 일정 시간 내에 흐르는 데이터의 양을 의미한다. 네트워크 패킷 데이터의 구조는 헤더, 페이로드, 트레일러로 구성되어 있다. 헤더는 소스 주소, 대상 주소, 프 로토콜 및 패킷 번호를 포함하고, 페이로드는 패킷에 의해 실제 전송되는 데이터를 포함하고, 트레일러는 패킷 의 끝에 도달했음을 알리는 비트와 컴퓨터가 모든 패킷이 완전히 수신되었는지 확인할 수 있도록 하는 CRC(Cyclic Redundancy Check)를 포함한다. 도 1은 본 발명의 실시예에 따른 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템을 도시한 블록도이다. 도 1을 참조하면, 본 발명의 실시예에 따른 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템 은 통신부, DB(DataBase, 120), 수집부, 전처리부, 메모리 및 프로세서를 포함 할 수 있다. 통신부는 네트워크를 통해 외부 전자 장치(미도시)로부터 전송되는 네트워크 패킷 데이터를 수신할 수 있 다. 통신부는 유선 또는 무선 통신 회로를 포함하고, WiFi direct 또는 IrDA(infrared data association) 같은 근거리 통신 네트워크 또는 셀룰러 네트워크, 인터넷, 또는 컴퓨터 네트워크와 같은 원거리 통신 네트워크를 통하여 외부 전자 장치(미도시)와 통신할 수 있다. DB는 외부 전자 장치(미도시)로부터 통신부를 통해 수신되는 네트워크 패킷 데이터를 수신된 시각과 함께 저장할 수 있다. 수집부는 DB에 저장된 네트워크 패킷 데이터의 로그데이터를 수집할 수 있다. 수집부는 네트워 크 패킷 수집 프로그램을 통해 시스템으로 수신되는 네트워크 패킷 데이터를 수집하여 pcap과 같은 형식으 로 DB에 저장할 수 있다. 도 2는 수집부가 수집한 네트워크 패킷 데이터의 로그데이터 예시도이다. 전처리부는 수집부에서 실시간으로 수집되는 시계열 패킷 데이터, 즉, 로그데이터를 전처리하여 동일 한 시간대에 수신된 시계열 패킷 데이터의 개수를 추출할 수 있다. 자세히 설명하면, 전처리부는 후술할 비지도 학습 모델이 네트워크 패킷 데이터의 트래픽(즉, 송수신되는 양)이 일정 기간 내에 비정상적으로 많을 때를 탐지할 수 있도록 하기 위하여, 수집된 네트워크 패킷 데이터의 로그데이터를 csv 파일로 형식 변환한다. 도 3은 전처리부가 로그데이터를 csv 파일로 변환한 예시도이다. 전처리부는 수집된 로그데이터의 csv 파일을 시계열 데이터 형식으로 변환한다. 도 4는 전처리부가 csv 파일을 시계열 데이터 형식으로 변환한 예시도이다. 도 4를 참조하면, x 축은 일정 기간(Time), y축은 패킷의 수로서, 동일한 시점(또는 동일한 기간 또는 동일한 시간대) 내에 수집된 네트워크 패킷 데이터의 개수를 보여준다. 즉, 도 4의 x축은 시간의 증가를 나타내고 y축 은 로그데이터 수의 증감을 보여줄 수 있다. 네트워크 패킷 데이터의 수집 및 전처리는 실시간으로 진행되어 프로세서의 비지도 학습 모델로 입력되어 학습 및 검증될 수 있다. 다시 도 1을 참조하면, 메모리는 모니터링 시스템의 적어도 하나의 다른 구성요소에 관계된 적어도 하나의 프로그램, 또는 프로그램을 실행하기 위한 명령어(instruction) 또는 데이터를 저장할 수 있다. 메모리 는 비휘발성 메모리, 휘발성 메모리, 플래시메모리, 하드디스크 드라이브 또는 솔리드 스테이트 드라이브 등으로 구현될 수 있다. 또한, 메모리에는 시계열 패킷 데이터 개수로부터 이상값(Anomaly Value)을 탐지하도록 비지도 학습 모델 인 어노멀리 트랜스포머(Anomaly Transformer) 모델이 저장될 수 있다. 이상값은 네트워크에 DDoS와 같은 공격 이 발생한 경우를 판단하기 위해 산출되는 값이다. 어노멀리 트랜스포머 모델은 단순히 트래픽의 양의 차이만을 비교하는 것이 아니라, 트래픽의 송수신 내역 자체 를 학습 또는 분석하여 이상값을 산출하고, 산출된 이상값을 이용하여 네트워크 상태를 판단하는 비지도 학습 모델이므로 관리자가 미처 파악하지 못한 네트워크 환경의 이상 상황도 탐지할 수 있다. 프로세서는 메모리에 저장된 프로그램, 명령어, 운영체제 등을 이용하여 네트워크 패킷 데이터의 이 상값 탐지를 이용한 모니터링 시스템의 전반적인 동작을 제어할 수 있다. 프로세서는 프로세싱 알고 리즘이 내장된 SoC(System on Chip), LSI(Large Scale Integration)로 구현될 수도 있고, FPGA(Field Programmable gate array) 형태로 구현될 수도 있다. 또한, 프로세서는 CPU(Central Processing Unit), MPU(Micro Processor Unit), MCU(Micro Controller Unit)와 같은 범용 프로세서, GPU(Graphic Processing Unit), VPU(Video Processing Unit)와 같은 그래픽 전용 프로세서, 또는 NPU(Neural Processing Unit)와 같은 인공지능 전용 프로세서를 포함할 수도 있다. 본 발명의 실시 예에 따르면, 프로세서는 실시간으로 수집되는 시계열 패킷 데이터 중 특정 시점에 수집되 는 시계열 패킷 데이터의 개수를 메모리에 저장된 어노멀리 트랜스포머 모델에 입력하여 네트워크에서 발 생하는 시계열 패킷 데이터의 이상값을 탐지할 수 있다. 도 5는 메모리에 저장된 어노멀리 트랜스포머 모델의 아키텍쳐를 도시한 도면이고, 도 6은 프로세서 를 자세히 도시한 블록도, 그리고, 도 7은 모니터링부의 알고리즘을 간단히 도시한 도면이다. 도 5를 참조하면, 어노멀리 트랜스포머 모델은 다수의 레이어들을 포함하여 각 레이어마다 학습한 결과로부터 최종 결과값(즉, 유사도)를 산출하는 비지도 학습 모델이다. 도 6을 참조하면, 프로세서는 MLP부, PA값 산출부, PA 어텐션 스코어 산출부, SA 어텐션 스코어 산출부 및 모니터링부를 포함할 수 있다. MLP부는 전처리부로부터 입력되는 특정 시점의 시계열 패킷 데이터의 개수를 MLP(Multi-Layer Perceptron, 다층 퍼셉트론) 알고리즘에 입력하여 쿼리(Q), 키(K), 벨류(V) 및 시그마( )를 생성할 수 있다. MLP 알고리즘은 y=wx+b 연산이고, 쿼리(Q), 키(K), 벨류(V) 및 시그마( )는 각각 다른 가중치값(w)을 갖는 서 로 다른 값으로 생성될 수 있다. 생성되는 쿼리(Q), 키(K), 벨류(V) 및 시그마( )는 어노멀리 트래스포머 모 델에 설정된 레이어들로 입력되거나, 각 레이어마다 다른 값의 쿼리, 키, 벨류 및 시그마가 생성될 수 있다. PA값 산출부는 시그마( )를 정규분포하고, 정규분포의 결과값에 대해서 스케일링을 수행하여 PA(Prior Association)값을 산출할 수 있다. PA 어텐션 스코어 산출부는 PA값 산출부에서 산출된 PA값을 여러 번 학습하여 PA 어텐션 스코어를 다 수 산출할 수 있다. PA 어텐션 스코어는 MLP부로 입력된 특정 시점(Prior-Association)에 제1가중치를 주 어 산출된 어텐션 스코어이다. PA 어텐션 스코어 산출부는 제1가중치를 설정된 범위 내에서 변경하여 다 수의 PA 어텐션 스코어를 산출할 수 있다. SA 어텐션 스코어 산출부는 쿼리(Q)와 키(K)의 어텐션 연산(MatMul 행렬, 스케일, 소프트맥스 등)을 진행 하면서 SA(Series Association) 어텐션 스코어를 다수 산출할 수 있다. SA 어텐션 스코어는 네트워크 패킷 데이 터가 수집된 전체 기간, 또는 이전에 사용된 전체 기간에 제2가중치를 주어 산출된 어텐션 스코어일 수 있다. SA 어텐션 스코어 산출부는 제2가중치를 설정된 범위 내에서 변경하여 다수의 SA 어텐션 스코어를 산출할 수 있다. 제1 및 제2가중치의 설정된 범위는 예를 들어 0.1~0.9이며 변경 가능하다. 모니터링부는 산출된 PA 어텐션 스코어와 SA 어텐션 스코어를 비교하여 네트워크의 정상 여부를 판단하고, 비정상으로 판단되는 경우 이상값을 모니터링 결과로 출력할 수 있다. 도 6 및 도 7을 참조하면, 모니터링부는 평균 스코어 산출부(165a), KLD부(165b), KLD 평균 산출부(165c) 및 판단부(165d)를 포함할 수 있다. 평균 스코어 산출부(165a)는 PA 어텐션 스코어 산출부에서 산출된 다수의 PA 어텐션 스코어(P)의 평균 (P')을 산출하고, SA 어텐션 스코어 산출부에서 산출된 다수의 SA 어텐션 스코어(S)의 평균(S')을 산출할 수 있다. KLD부(165b)는 평균 스코어 산출부(165a)에서 산출되는 PA 어텐션 스코어의 평균(P')과 SA 어텐션 스코어의 평 균(S')을 KL Divergence 알고리즘에 입력하여 확률 분포의 차이(R')를 산출할 수 있다. KLD 평균 산출부(165c)는 어노멀리 트랜스포머에 설정된 레이어 개수만큼 확률 분포의 차이(R')가 산출되면, 산 출되는 다수의 확률 분포의 차이(R')의 평균(R, 이하 'KLD 평균'이라 한다)을 산출할 수 있다. 확률 분포의 차이(R')의 평균, 즉, KLD 평균(R)을 산출하는 이유는 확률 분포의 차이(R')를 다수 산출하기 때문 이며, 확률 분포의 차이(R')를 다수 산출하는 이유는 어노멀리 트랜스포머는 도 5에 도시된 것처럼 다수의 레이 어들로 이루어지고 각 레이어마다 확률 분포의 차이(R')를 산출하며, 도 5의 경우 3개의 확률 분포의 차이(R') 가 산출되기 때문이다. 이 때 다른 가중치(PA 어텐션 스코어 또는 SA 어텐션 스코어를 구하는 가중치)를 주어 확률 분포의 차이(R')를 산출하므로, KL Divergence 알고리즘에 의해 산출되는 다수의 확률 분포의 차이(R')의 값 역시 다르며, 따라서, KLD 평균 산출부(165c)는 다수의 확률 분포의 차이(R')의 평균(R)을 산출한다. 판단부(165d)는 KLD 평균 산출부(165C)에서 산출된 KLD 평균(R)이 기설정된 기준값 이하이면 네트워크가 비정상 상태인 것으로 판단하고, 산출된 KLD 평균(R)을 이상값으로 정하여 관리자에게 제공할 수 있다. 또한, 판단부(165d)는 KLD 평균 산출부(165C)에서 산출된 KLD 평균(R)이 기설정된 기준값보다 크면 네트워크가 정상상태인 것으로 판단할 수 있다. 도 8은 네트워크의 정상 또는 비정상 상태를 설명하기 위해 PA 어텐션 스코어와 SA 어텐션 스코어를 도시한 도 면이다. 도 8을 참조하면, 판단부(165d)는 KL Divergence 알고리즘을 사용한 경우, PA 어텐션 스코어와 SA 어텐션 스코 어의 KLD 평균(R)이 작을수록 PA 어텐션 스코어와 SA 어텐션 스코어의 유사도가 높은 것으로 판단할 수 있다. 따라서, 판단부(165d)는 도 8에 도시된 것처럼 두 어텐션 스코어의 유사도가 높으므로 네트워크가 비정상 상태 인 것으로 판단하고, KLD 평균(R)을 네트워크의 이상값(Anomaly Value)으로 정할 수 있다. 즉, 판단부(165d) 는 특정 시점에 수집된 네트워크 패킷 데이터를 DDoS 공격 등에 의해 발생한 비정상 데이터로 판단할 수 있다. 또한, 판단부(165d)는 PA 어텐션 스코어와 SA 어텐션 스코어의 KLD 평균(R)이 클수록 PA 어텐션 스코어와 SA 어 텐션 스코어의 유사도가 낮은 것으로 판단할 수 있다. 따라서, 판단부(165d)는 네트워크가 정상 상태인 것으로 판단하고, 특정 시점에 수집된 네트워크 패킷 데이터는 정상 데이터인 것으로 판단할 수 있다. 도 9는 본 발명의 실시 예에 따른 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템의 모니 터링 방법을 도시한 흐름도이다. 도 9를 참조하면, 시스템은 네트워크를 통해 실시간으로 수신되는 시계열 패킷 데이터의 로그데이터를 수 집 및 전처리하여 시계열 패킷 데이터가 수신된 시각과 동일한 시각에 수신된 시계열 패킷 데이터의 개수를 추 출할 수 있다(S910). 시스템은 S920단계에서 전처리된 데이터 중 특정 시점에 수집된 시계열 패킷 데이터의 개수를 어노멀리 트 랜스포머 모델에 입력하여 쿼리(Q), 키(K), 벨류(V) 및 시그마( )를 생성할 수 있다(S920). 시스템은 S920단계에서 생성된 시그마를 정규분포 및 스케일링하여 PA값을 산출하고, 산출된 PA값을 학습 하여 PA 어텐션 스코어를 산출하되, 가중치를 변경하여 다수의 PA 어텐션 스코어를 산출할 수 있다(S930, S940). 시스템은 S920단계에서 생성된 쿼리와 키의 어텐션 연산을 통해 SA의 어텐션 스코어를 산출하되, 가중치를 변경하여 다수의 SA 어텐션 스코어를 산출할 수 있다(S950). 시스템은 S940단계에서 산출된 다수의 PA 어텐션 스코어와 S950단계에서 산출된 다수의 SA 어텐션 스코어 를 비교하여 네트워크의 정상 여부를 판단할 수 있다(S960). 도 10은 도 9의 S960단계를 자세히 도시한 흐름도이다. 도 10을 참조하면, 시스템은 S940단계에서 산출된 다수의 PA 어텐션 스코어의 평균(P')을 산출하고, S950 단계에서 산출된 다수의 SA 어텐션 스코어의 평균(S')를 산출할 수 있다(S961). 시스템은 S961단계에서 산출된 트랜스포머 다수의 PA 어텐션 스코어의 평균(P')과, 다수의 SA 어텐션 스코 어의 평균(S')을 KL Divergence 알고리즘에 입력하여 두 평균(P', S')의 확률 분포의 차이(R')를 산출할 수 있 다(S962). 시스템은 상술한 S930단계 내지 S962단계가 어노멀리 트랜스포머 모델에 설정된 레이어에서 모두 수행되어 레이어 개수만큼 확률 분포의 차이(R')가 산출되면, 산출된 다수의 확률 분포의 차이(R')의 평균(R, 즉, KLD 평 균)을 산출할 수 있다(S963). 시스템은 S963단계에서 산출된 KLD 평균이 기설정된 기준값 이하이면(S964-Yes), PA 어텐션 스코어와 SA 어텐션 스코어(또는 PA 어텐션 스코어의 평균과 SA 어텐션 스코어의 평균)의 유사도가 높으므로 네트워크가 비 정상상태인 것으로 판단하고, 산출된 KLD 평균을 네트워크의 이상값으로 정할 수 있다(S965). S965단계 이후, 시스템은 시스템의 관리자에게 네트워크가 비정상상태임을 알려 즉시 대처가 가능하도록 할 수 있다. 반면, 시스템은 S963단계에서 산출된 KLD 평균이 기설정된 기준값보다 크면(S964-No), PA 어텐션 스코어와 SA 어텐션 스코어(또는 PA 어텐션 스코어의 평균과 SA 어텐션 스코어의 평균)의 유사도가 낮으므로 네트워크가 정상상태인 것으로 판단할 수 있다(S966). 도 11은 도 1 내지 도 8을 참조하여 설명한 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템 이 적용된 웹 플랫폼을 개략적으로 도시한 도면이다. 도 11을 참조하면, 어노멀리 트랜스포머와 같은 딥러닝 기반 네트워크 패킷 이상값 탐지 웹 플랫폼은 WireShark 와 같은 네트워크 패킷 수집 프로그램을 사용하여 패킷데이터를 실시간으로 수집하고, 수집된 패킷데이터를 딥 러닝 모델이 감지할 수 있도록 전처리 작업한다. 전처리 작업된 데이터의 유입은 도 12와 같은 대시보드를 통 해 관리자가 실시간으로 확인할 수 있다. 딥러닝 모델은 실시간으로 전처리된 데이터를 감시하면서 이상값을 탐지한다. 딥러닝 모델 중 하나인 어노멀리 트랜스포머는 문제와 정답을 알고 있는 지도 학습이 아닌, 인공지능 스스로 학습하는 비지도 학습 방식을 이용 하므로 입력되는 데이터를 학습하면서 스스로 이상값을 탐지한다. 탐지된 이상값은 로그 형석으로 DB에 저장되어 기록 및 관리된다. 도 12에서 노랑색 원으로 표기된 부분이 이상값 탐지된 부분이다. 이상값 탐지 시 관리자에게 경고하는 알림이 발송될 수 있다. 상술한 방식으로 웹 플랫폼을 사용하는 시간이 늘어날수록 어노멀리 트랜스포머 모델의 정확도(F1-Score)는 향 상된다. 이상을 통해 본 발명의 실시 예에 대하여 설명하였지만, 본 발명은 상기 실시 예에 한정되지 않고, 본 발명의 취지를 벗어나지 않고 효과를 저해하지 않는 한, 발명의 상세한 설명 및 첨부한 도면의 범위 안에서 다양하게 변경하여 실시할 수 있다. 또한 그러한 실시 예가 본 발명의 범위에 속하는 것은 당연하다."}
{"patent_id": "10-2022-0165595", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 실시예에 따른 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템을 도시한 블록도, 도 2는 수집부가 수집한 네트워크 패킷 데이터의 로그데이터 예시도, 도 3은 전처리부가 로그데이터를 csv 파일로 변환한 예시도, 도 4는 전처리부가 csv 파일을 시계열 데이터 형식으로 변환한 예시도, 도 5는 메모리에 저장된 어노멀리 트랜스포머 모델의 아키텍쳐를 도시한 도면, 도 6은 프로세서를 자세히 도시한 블록도, 도 7은 모니터링부의 알고리즘을 간단히 도시한 도면, 도 8은 네트워크의 정상 또는 비정상 상태를 설명하기 위해 PA 어텐션 스코어와 SA 어텐션 스코어를 도시한 도 면, 도 9는 본 발명의 실시 예에 따른 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템의 모니 터링 방법을 도시한 흐름도, 도 10은 도 9의 S960단계를 자세히 도시한 흐름도, 도 11은 네트워크 패킷 데이터의 이상값 탐지를 이용한 모니터링 시스템이 적용된 웹 플랫폼을 개략적으로 도시한 도면, 그리고, 도 12는 대시보드의 예시도이다."}
