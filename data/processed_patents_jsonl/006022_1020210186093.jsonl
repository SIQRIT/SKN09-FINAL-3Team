{"patent_id": "10-2021-0186093", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0096523", "출원번호": "10-2021-0186093", "발명의 명칭": "실내 측위 방법 및 그 장치", "출원인": "명지대학교 산학협력단", "발명자": "유철우"}}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "(a) 특정 장소에서 각 액세스 포인트로부터의 무선 신호 정보를 각각 수집하고, 상기 수집된 무선 신호 정보를기초로 1차 실내 측위를 수행하여 복수의 후보 위치를 선정하는 단계; 및(b) 상기 특정 장소에서 영상 정보를 수집하고, 상기 수집된 영상 정보와 상기 선정된 후보 위치에 상응하는 기저장된 영상 정보를 이용하여 2차 실내 측위를 수행하여 최종 위치를 결정하는 단계를 포함하는 실내 측위방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1 항에 있어서, 상기 무선 신호 정보는 무선 신호 강도(RSSI 값)인 것을 특징으로 하는 실내 측위 방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1 항에 있어서, 상기 (a) 단계 이전에, 각각의 측정 장소에서 상기 각 액세스 포인트로부터의 무선 신호 정보를 수집한 후 전력값으로 변환하여 무선신호 데이터베이스에 저장하는 단계; 및상기 각각의 측정 장소에서 영상 정보를 수집한 후 영상 데이터베이스에 저장하는 단계를 더 포함하되, 상기 영상 정보는 상기 각각의 측정 장소에서 촬영된 영상과 상기 영상에 관련된 메타데이터인 것을 특징으로하는 실내 측위 방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3 항에 있어서, 상기 (a) 단계는, 상기 수집된 무선 신호 정보를 인공 지능 모델에 적용하여 상기 복수의 후보 위치를 선정하되, 상기 인공 지능 모델은 기계 학습 및 심층 학습 중 어느 하나인 것을 특징으로 하는 실내 측위 방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4 항에 있어서, 상기 복수의 후보 위치는 미리 정해진 규칙을 기반으로 1차 실내 측위를 통해 획득된 확률값에 의해 선택되되,상기 인공지능 모델의 출력층(output layer)은 확률값을 기반으로 한 값인 것을 특징으로 하는 실내 측위 방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "공개특허 10-2023-0096523-3-제1 항에 있어서, 상기 복수의 후보 위치에 대한 2차 실내 측위는 우선 순위가 높은 순서대로 수행되되,상기 우선 순위는 상기 1차 실내 측위 결과값에 기초하여 결정되는 것을 특징으로 하는 실내 측위 방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1 항 내지 제6 항 중 어느 하나의 항에 따른 방법을 수행하기 위한 프로그램 코드를 기록한 기록매체."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "특정 장소에서 각 액세스 포인트로부터의 무선 신호 정보를 각각 수집하고, 상기 수집된 무선 신호 정보를 기초로 1차 실내 측위를 수행하여 복수의 후보 위치를 선정하는 1차 측위 모듈; 및상기 특정 장소에서 영상 정보를 수집하고, 상기 수집된 영상 정보와 상기 선정된 후보 위치에 상응하는 기저장된 영상 정보를 이용하여 2차 실내 측위를 수행하여 최종 위치를 결정하는 2차 측위 모듈을 포함하는 실내 측위장치."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8 항에 있어서, 상기 무선 신호 정보는 무선 신호 강도(RSSI 값)인 것을 특징으로 하는 실내 측위 방법."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제7 항에 있어서, 각각의 측정 장소에서 상기 각 액세스 포인트로부터의 무선 신호 정보를 수집한 후 전력값으로 변환하여 무선신호 데이터베이스에 저장하는 제1 수집부; 및상기 각각의 측정 장소에서 영상 정보를 수집한 후 영상 데이터베이스에 저장하는 제2 수집부를 더 포함하되, 상기 영상 정보는 상기 각각의 측정 장소에서 촬영된 영상과 상기 영상에 관련된 메타데이터인 것을 특징으로하는 실내 측위 장치."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제8 항에 있어서, 상기 1차 측위 모듈은, 상기 수집된 무선 신호 정보를 인공 지능 모델에 적용하여 상기 복수의 후보 위치를 선정하되, 상기 인공 지능 모델은 상기 인공 지능 모델은 기계 학습 및 심층 학습 중 어느 하나인 것을 특징으로 하는 실내 측위 장치."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11 항에 있어서, 상기 복수의 후보 위치는 미리 정해진 규칙을 기반으로 1차 실내 측위를 통해 획득된 확률값에 의해 선택되되,공개특허 10-2023-0096523-4-상기 인공지능 모델의 출력층(output layer)은 확률값을 기반으로 한 값인 것을 특징으로 하는 실내 측위 장치."}
{"patent_id": "10-2021-0186093", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제8 항에 있어서, 상기 복수의 후보 위치에 대한 2차 실내 측위는 우선 순위가 높은 순서대로 수행되되,상기 우선 순위는 상기 1차 실내 측위 결과값에 기초하여 결정되는 것을 특징으로 하는 실내 측위 장치."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "실내 측위 방법 및 장치가 개시된다. 실내 측위 방법은, (a) 특정 장소에서 각 액세스 포인트로부터의 무선 신호 정보를 각각 수집하고, 상기 수집된 무선 신호 정보를 기초로 1차 실내 측위를 수행하여 복수의 후보 위치를 선 정하는 단계; 및 (b) 상기 특정 장소에서 영상 정보를 수집하고, 상기 수집된 영상 정보와 상기 선정된 후보 위 치에 상응하는 기저장된 영상 정보를 이용하여 2차 실내 측위를 수행하여 최종 위치를 결정하는 단계를 포함한다."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 실내 측위 방법 및 그 장치에 관한 것이다."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근 고성능 이동통신 단말(스마트 폰, 스마트 워치, 태블릿 PC 등)이 널리 보급되면서 고성능 이동통신 단말을 이용한 서비스의 수요도 큰 폭으로 증가하고 있다. 통신 단말의 이동성이 확보되면서, 사용자의 위치 정보에 기 반한 위치기반서비스(LBS)도 널리 사용되고 있다. 이러한 위치기반서비스의 대표적인 예로는 GPS 신호를 이용 한 내비게이션 서비스, 사용자의 현재 위치를 기반으로 한 지도 검색 서비스 등이 있다. 현재 활발하게 사용되는 위치기반서비스는 GPS 기반 측위 기술에 크게 의존하고 있다. 이러한 GPS는 넓은 신호 반경을 가지며, 고정된 위성을 통해 신호를 수신 받기 때문에 안정적인 서비스 제공이 가능하다. 그러나 멀리 떨어진 GPS 위성으로부터 수신되는 신호는 대기권을 통과하면서 전파가 매우 약해지기 때문에 건물이나 터널, 지하 등의 실내 공간에서는 GPS 신호를 수신할 수 없는 음영지역이 발생하게 되며, 이 때문에 GPS기반 위치기반 서비스를 실내 환경에서 적용하기에는 많은 제약이 따른다. 이러한 문제점들을 극복하기 위한 실내 측위를 위한 대체적인 방법들이 많이 연구되고 있다. 대표적인 방법으로 는 단말이 수신받은 무선 신호 세기를 이용하는 무선통신 기반 실내 측위 방법과 단말의 센서로부터 영상 등의 정보를 전달받아 이용하는 센서 기반 실내 측위 방법 등이 있다. 무선통신 기반 실내측위 방법의 대표적인 예로는 삼각측량법과 핑거프린트 방식이 있다. 삼각측량법 (triangulation)은 단말 주변에 존재하는 액세스포인트(AP) 중 이미 알고 있는 액세스포인트의 위치와, 액세스 포인트로부터 수신된 무선신호의 수신세기(RSSI)를 사용하는 방식이고, 핑거프린트 방식은 측위하고자 하는 공 간의 데이터베이스를 미리 제작하여 사용하는 것을 특징으로 하는 방식이다. 우선 측위하고자 하는 실내 공간을 격자 형태로 나누고, 나뉘어진 격자마다 무선신호의 세기와 같은 값을 측정하여 데이터베이스화 한다. 이후 단 말이 측정한 새로운 값을 기존의 데이터베이스와 비교하여 가장 오차가 적은 지점을 측위 위치로 선택하는 방식 을 사용한다. 마치 지문처럼, 각 격자의 위치마다 수신되는 값이 다르기 때문에, 이것을 핑거프린트 방식이라고 한다. 장애물이 비교적 적은 실외 환경에서는 별도의 데이터베이스가 필요 없는 삼각측량법의 사용이 비교적 용이하 나, 실내 환경의 특성상 장애물이 많아 신호의 감쇄가 거리에 따라 일정하게 감소되지 않으며, 벽 또는 구조물 에 의해 불규칙하게 감소하기 때문에 핑거프린트 방식 대비 정확도가 떨어져 실내 측위에 적합하지 않은 방식이 다. 물론 핑거프린트 방식의 단점이 없는 것은 아니다. 핑거 프린트 방식의 경우 사전에 측위를 위한 공간의 핑거 프린트 데이터베이스를 제작해야한다는 단점이 존재하고, 측위를 희망하는 범위가 커짐에 따라 측위에 필요한 계산량과 소요 시간이 증가하는 문제가 발생한다. 또한 격자 크기를 작게 나눌수록 추가적인 하드웨어 인프라 설치를 요구하여 구현 비용이 지수함수적으로 증가하게 되며, 격자의 크기가 너무 작아질 경우 정확도 향상의 효과가 떨어지게 되므로 적당한 셀 크기를 선정하는 것이 중요하다. 더해서, 수신된 신호 세기를 기반으로 하는 핑거프린트 기반 실내 측위 방법의 경우, 데이터베이스 제작시 채널 환경과 측위 당시 채널 환경이 바뀌었을 경우 측위 정확성이 떨어지는 문제점이 존재한다. 센서 기반 실내 측위 방법의 대표적인 예로는 SLAM 기반 실내 측위 방법이 있다. SLAM은 로봇이 미지의 환경을 돌아다니며 센서를 통하여 자기 위치 추정과 환경에 대한 지도 작성을 동시에 수행하는 기술이다. 이 때 LiDAR, 초음파, 적외선, 광학 카메라 센서 등과 같은 다양한 센서를 이용하여 관측 모델을 형성한다. 이중 카메라 센서 는 다른 센서에 비해 저렴하고, 물체나 사람등을 구분하는 등 영상의 추가적인 의미 정보를 활용할 수 있는 장 점이 있어 SLAM 연구에 많이 사용된다. 그러나 영상 기반 센서를 이용한 SLAM(VSLAM)은 환경 변화와 조명 변화에 민감하며, 측위 영상에 특징점이 부 족한 경우 위치 인식 성능이 떨어진다는 문제점이 있다."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 실내 측위 방법 및 그 장치를 제공하기 위한 것이다. 또한, 본 발명은 무선 신호 기반 실내 측위 추정 결과를 기반으로 이미지 기반 위치 추정을 통해 측위 정확도를 향상시킬 수 있는 실내 측위 방법 및 그 장치를 제공하기 위한 것이다. 또한, 본 발명은 머신 러닝 및 딥러닝을 적용하여 측위 정확도를 향상시킬 수 있는 실내 측위 방법 및 그 장치 를 제공하기 위한 것이다. 또한, 본 발명은 동일한 측위 공간에 대해 무선 신호 기반 실내 측위와 이미지 기반 실내 측위를 결합하여 이미 지 기반 단일 방식 대비 복잡도를 감소시키고, 추정 속도 및 정확도 향상이 가능한 실내 측위 방법 및 그 장치 를 제공하기 위한 것이다."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 일 측면에 따르면 실내 측위 방법이 제공된다. 본 발명의 일 실시예에 따르면, (a) 특정 장소에서 각 액세스 포인트로부터의 무선 신호 정보를 각각 수집하고, 상기 수집된 무선 신호 정보를 기초로 1차 실내 측위를 수행하여 복수의 후보 위치를 선정하는 단계; 및 (b) 상 기 특정 장소에서 영상 정보를 수집하고, 상기 수집된 영상 정보와 상기 선정된 후보 위치에 상응하는 기저장된 영상 정보를 이용하여 2차 실내 측위를 수행하여 최종 위치를 결정하는 단계를 포함하는 실내 측위 방법이 제공 될 수 있다. 상기 무선 신호 정보는 무선 신호 강도(RSSI 값)일 수 있다. 상기 (a) 단계 이전에, 각각의 측정 장소에서 상기 각 액세스 포인트로부터의 무선 신호 정보를 수집한 후 전력 값으로 변환하여 무선 신호 데이터베이스에 저장하는 단계; 및 상기 각각의 측정 장소에서 영상 정보를 수집한 후 영상 데이터베이스에 저장하는 단계를 더 포함하되, 상기 영상 정보는 상기 각각의 측정 장소에서 촬영된 영 상과 상기 영상에 관련된 메타데이터일 수 있다. 상기 (a) 단계는, 상기 수집된 무선 신호 정보를 인공 지능 모델에 적용하여 상기 복수의 후보 위치를 선정하되, 상기 인공 지능 모델은 기계학습(machine learning; 서포트 벡터 머신, 엑스트라 트리, 랜덤 포레스 트 등) 및 심층 학습(deep learning; DNN, CNN 등) 중 어느 하나일 수 있다. 상기 복수의 후보 위치 및 후보 위치의 개수는 미리 정해진 규칙을 기반으로 1차 실내 측위를 통해 획득된 확률 값에 의해 선택되되, 상기 확률값은 인공지능 모델의 출력층(output layer)의 활성화함수(activation functio n)로 softmax를 이용한 값이다. 상기 복수의 후보 위치에 대한 2차 실내 측위는 우선 순위가 높은 순서대로 수행되되, 상기 우선 순위는 상기 1 차 실내 측위 결과값에 기초하여 결정될 수 있다. 본 발명의 다른 측면에 따르면 실내 측위 장치가 제공된다. 본 발명의 일 실시예에 따르면, 특정 장소에서 각 액세스 포인트로부터의 무선 신호 정보를 각각 수집하고, 상 기 수집된 무선 신호 정보를 기초로 1차 실내 측위를 수행하여 복수의 후보 위치를 선정하는 1차 측위 모듈; 및 상기 특정 장소에서 영상 정보를 수집하고, 상기 수집된 영상 정보와 상기 선정된 후보 위치에 상응하는 기저장 된 영상 정보를 이용하여 2차 실내 측위를 수행하여 최종 위치를 결정하는 2차 측위 모듈을 포함하는 실내 측위 장치가 제공될 수 있다. 각각의 측정 장소에서 상기 각 액세스 포인트로부터의 무선 신호 정보를 수집한 후 전력값으로 변환하여 무선 신호 데이터베이스에 저장하는 제1 수집부; 및 상기 각각의 측정 장소에서 영상 정보를 수집한 후 영상 데이터 베이스에 저장하는 제2 수집부를 더 포함하되, 상기 영상 정보는 상기 각각의 측정 장소에서 촬영된 영상과 상 기 영상에 관련된 메타데이터일 수 있다. 상기 1차 측위 모듈은, 상기 수집된 무선 신호 정보를 인공 지능 모델에 적용하여 상기 복수의 후보 위치를 선 정하되, 상기 인공 지능 모델은 기계학습(machine learning; 서포트 벡터 머신, 엑스트라 트리, 랜덤 포레스트 등) 및 심층 학습(deep learning; DNN, CNN 등) 중 어느 하나일 수 있다."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 일 실시예에 실내 측위 방법 및 그 장치를 제공함으로써, 무선 신호 기반 실내 측위 추정 결과를 기 반으로 이미지 기반 위치 추정을 통해 측위 정확도를 향상시킬 수 있는 이점이 있다. 또한, 본 발명은 무선 신호를 이용한 인공 지능 모델과, 각각의 측정 장소에서 촬영된 영상의 메타 데이터를 활 용함으로써 추정 정확도가 추가적으로 향상될 수 있다. 예를 들어, 1차 측위 모듈에 적용된 인공 지능 모델을 시간을 활용하여 학습하였을 경우, 영상의 촬영 시각을 반영하여 추정 정확도를 향상시킬 수 있다. 또한, 본 발명은 머신 러닝 및 딥러닝을 적용하여 측위 정확도를 향상시킬 수 있는 이점이 있다. 또한, 본 발명은 동일한 측위 공간에 대해 무선 신호 기반 실내 측위와 이미지 기반 실내 측위를 결합하여 단일 방식 대비 복잡도를 감소시키고, 추정 속도 및 정확도 향상시킬 수 있는 이점이 있다. 즉, 무선 신호 기반의 실 내 측위는 세밀한 위치 추정 정확도가 떨어지고, 세밀한 측위를 위해서는 하드웨어 수가 많이 필요한 단점이 있 으며, 영상 기반의 실내 측위는, 세밀한 위치 추정 정확도는 상승하는 대신, 동일한 형태의 구조물에서의 측위 정확도가 감소하고, 계산량이 많이 필요한 단점이 있다. 본 발명과 같이 무선 신호 기반의 실내 측위와 이미지 기반의 실내 측위를 결합하는 경우, 영상 기반의 실내 측위 방법만을 사용하였을 때 보다 측위 정확도(동일한 구조 내에서, 무선 신호로 위치를 미리 추정할 수 있으므로)와 연산량(무선 신호를 이용하여 1차적으로 측위 범 위를 축소하였기 때문)에서 이득이 있는 이점이 있다."}
{"patent_id": "10-2021-0186093", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 명세서에서 사용되는 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 명세서에서, \"구성된다\" 또는 \"포함한다\" 등의 용어는 명세서상에 기재된 여러 구성 요소들, 또는 여러 단계들 을 반드시 모두 포함하는 것으로 해석되지 않아야 하며, 그 중 일부 구성 요소들 또는 일부 단계들은 포함되지 않을 수도 있고, 또는 추가적인 구성 요소 또는 단계들을 더 포함할 수 있는 것으로 해석되어야 한다. 또한, 명 세서에 기재된 \"...부\", \"모듈\" 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어 또는 소프트웨어로 구현되거나 하드웨어와 소프트웨어의 결합으로 구현될 수 있다. 이하, 첨부된 도면들을 참조하여 본 발명의 실시예를 상세히 설명한다. 도 1은 본 발명의 일 실시예에 따른 실내 측위 장치의 내부 구성을 개략적으로 도시한 블록도이며, 도 2 및 도 3은 도 2 및 도 3은 본 발명의 일 실시예에 따른 2차 측위 계산량 감소를 설명하기 위한 식을 예시한 도면이다. 여기서, 실내 측위 장치는 사용자가 소지한 이동통신 단말과 같은 사용자 단말의 일 구성일 수 있다. 따라 서, 실내 측위 장치는 사용자 단말에 설치된 다양한 센서의 정보를 수집할 수 있는 것을 가정하기로 한다. 도 1을 참조하면, 본 발명의 일 실시예에 따른 실내 측위 장치는 통신부, 카메라, 수집부, 1차 측위 모듈, 2차 측위 모듈, 메모리 및 프로세서를 포함하여 구성된다. 통신부는 통신망을 통해 다른 장치들(예를 들어, 액세스 포인트, 서버 등)과 데이터를 송수신하기 위한 수 단이다. 카메라는 피사체를 촬영하기 위한 수단이다. 수집부는 각 측정 장소에서 무선 신호와 영상 정보를 수집하기 위한 수단이다. 수집부는 제1 수집부(117a)와 제2 수집부(117b)를 포함하여 구성된다. 제1 수집부(117a)는 각 측정 장소에서 각 액세스 포인트(AP: access point, 이하 AP라 칭하기로 함)들과의 무선 통신에 따른 무선 신호 정보를 수집하기 위한 수단이다. 본 발명의 일 실시예에 따르면, 제1 수집부(117a)는 각 측정 장소에서 각 AP로부터 수집된 무선 신호 정보를 데 이터베이스(무선 신호 데이터베이스라 칭하기로 함)에 저장할 수 있다. 여기서, 각 AP로부터 수집되는 무선 신호 정보는 신호 세기(RSSI값, 이하 RSSI값이라 칭하기로 함)일 수 있다. 제1 수집부(117a)는 각 AP에 대한 RSSI값만을 수집하는 것은 아니며, 이외에도 위도, 경도, 고도, GPS 정보, MAC 주소 등과 같이 다양한 정보들을 무선 신호 정보로 수집할 수 있다. 제2 수집부(117b)는 각 측정 장소에서 영상 정보를 수집하기 위한 수단이다. 제2 수집부(117b)는 각 측정 장소 에서의 영상뿐만 아니라, 영상 관련한 메타데이터(예를 들어, EXIF값)을 수집할 수도 있다. 이외에도, 제2 수집 부(117b)는 , 계절, 시간 등을 메타데이터로 함께 수집할 수도 있다. 제2 수집부(117b)는 이와 같이 수집된 영상 정보를 영상 데이터베이스에 저장할 수 있다. 1차 측위 모듈는 각 측정 장소에서 수집된 무선 신호 정보를 이용하여 1차 측위를 수행하여 복수의 후보 위치를 선정하기 위한 수단이다. 이에 대해 보다 상세히 설명하기로 한다. 1차 측위 모듈은 머신 러닝 기반 측위 모듈로, 각 측정 장소에서 수집된 각 AP의 무선 신호 정보를 머신 러닝 기반 측위 모듈에 적용할 수 있다. 이에 따라 머신 러닝 기반 측위 모듈은 무선 신호 데이터베이스에서 핑 거프린트를 획득하여 1차 측위를 수행하여 복수의 후보 위치를 선정할 수 있다. 상술한 바와 같이, 1차 측위 모듈은 무선 신호 정보(RSSI값)을 통해 개략적인 복수의 후보 위치를 선정할 수 있다. 여기서, 후보 위치는 빌딩일 수도 있으며, 빌딩 내 층일 수도 있으며, 룸(Room)일 수도 있다. 1차 측위 결과에 따른 측위 위치(후보 위치)는 하나 이상이며, 후보 위치는 임의의 측정 장소에서 획득된 무선 신호 정보를 머신 러닝 기반 측위 모듈을 통해 계산된 결과에 의해 도출될 수 있다. 예를 들어, 1차 측위 결과 에 따라 도출된 결과는 광대한 공간, 넓은 공간, 세밀한 공간 등으로 구분될 수 있다. 예를 들어, 학교 건물에 서 광대한 공간은 건물(동)일 수 있으며, 넓은 공간은 층일 수 있으며, 세밀한 공간은 강의실일 수 있다. 1차 측위 결과는 상술한 공간 형태들의 전체 또는 일부로 표현될 수 있다. 2차 측위 모듈은 영상 정보를 이용하여 2차 측위하여 최종 위치를 결정하기 위한 수단이다. 예를 들어, 2차 측위 모듈은 1차 측위 모듈에 의해 선정된 후보 위치를 대상으로 영상 정보와의 비교 를 통해 2차 측위를 수행하여 최종 위치를 결정할 수 있다. 예를 들어, 2차 측위 모듈은 VSLAM(visual SLAM)을 통해 영상 기반 2차 측위를 수행할 수 있다. 여기서, VSLAM은 딥러닝 기반 알고리즘, 기하학적 오도메트리 알고리즘을 이용하는 방법, 딥러닝 기반 알고리즘과 기하 학적 오도메트리 알고리즘을 혼합한 방법 등이 공지되어 있다. 이들 방법들은 공지된 기술이며 당업자에게는 자 명한 사항이므로 이에 대한 상세한 설명은 생략하기로 한다. 도 2 및 도 3은 본 발명의 일 실시예에 따른 2차 측위 계산량 감소를 설명하기 위한 식이 도시되어 있다. 도 2 및 도 3에서는 초기 후보 위치를 3개 선정하는 것을 가정하며 영상 기반 측위 시스템 대비 요구되는 계산 량을 구한 것이다. 모든 층에 대해 각기 다른 세개의 층을 뽑을 때 실제 실내 측위 장치가 위치한 층이 1개만 존재하는 경우 (다른 층은 존재하지 않음) 모든 후보 층에 대해 전체 영상 데이터베이스를 대상으로 영상 검색을 실시한 경우 계산량에 대해 설명하기로 한다. 여기서, 는 영상을 통해 단일 실내 측위 시스템에서 검색에 필요한 계산량을 나타내며, k는 초기 후보 위 치로 선정할 개수를 나타내고, n은 초기 후보 위치로 선정 가능한 총 수를 나타낸다. 예를 들어, 13개의 층이 있는 건물에서 각 층을 초기 후보 위치 선정 대상으로 하여 3개의 후보 위치를 선정했 다고 가정하기로 한다. 이와 같은 경우, k는 3이고, n은 13으로 설정될 수 있다. 도 2의 계산식은 모든 후보 위치에 대해 한번에 검색하는 경우 계산량이며, 도 3은 확률이 높은 후보 위치부터 검색하는 경우 계산량을 나타낸 것이다. 도 2 및 도 3에서 보여지는 바와 같이, 본 발명의 일 실시예에서는 1차 측위 모듈, 즉 머신 러닝 기반 측 위 모듈의 출력층(output layer) 값이 큰 순서대로 후보 위치를 선정하되, 출력층 값은 확률값에 기반하여 출력 되도록 할 수 있다. 도 2 및 도 3은 영상 기반 단일 실내 측위 시스템 대비 계산량 감소를 설명하기 위해 도시한 일 실시예이며, 계 산량을 도출하는 식은 구현 방법에 따라 상이해질 수도 있음은 당연하다. 메모리는 본 발명의 일 실시예에 따른 실내 측위 방법을 수행하기 위해 필요한 명령어들(프로그램 코드)를 저장하기 위한 수단이다. 프로세서는 본 발명의 일 실시예에 따른 실내 측위 장치의 내부 구성 요소들(예를 들어, 수집부 , 1차 측위 모듈, 2차 측위 모듈, 메모리 등)을 제어하기 위한 수단이다. 또한, 프로세서는 2차 측위 모듈의 측위 결과에 따라 오차 여부를 판단하여 1차 측위 모듈과 2 차 측위 모듈이 재 측위를 수행하도록 제어할 수도 있다. 도 4는 본 발명의 일 실시예에 따른 무선 신호 데이터베이스와 영상 데이터베이스를 생성하는 방법을 나타낸 순 서도이고, 도 5는 본 발명의 일 실시예에 따른 공간 구획을 예시한 도면이고, 도 6은 본 발명의 일 실시예에 따 른 무선 신호 전처리 과정을 설명하기 위해 도시한 도면이다. 이하에서는 실내 측위에 이용되는 정보들(무선 신 호, 영상)을 데이터베이스에 저장하는 방법에 대해 설명하기로 한다. 단계 410에서 실내 측위 장치는 각 측정 장소에서 AP에 대한 무선 신호 정보를 수집한다. 이해와 설명의 편의를 도모하기 위해, 도 5에 도시된 바와 같이, 특정 빌딩의 공간이 구획되어 있다고 가정하기 로 한다. 도 5에서는 사각형인 것을 가정하여 이를 중심으로 설명하나 반드시 구획된 공간이 사각형인 것은 아 니며, 다른 형태로 구획될 수도 있음은 당연하다. 빌딩 내의 각각의 위치에 AP들이 설치되어 있는 것을 가정하기로 한다. 전술한 바와 같이, 각 측정 장소에서 실내 측위 장치가 수집하는 무선 신호 정보는 RSSI값일 수 있다. 물 론 이외에도, 실내 측위 장치는 위도, 경도, 고도, GPS 정보, MAC 주소 등과 같이 다양한 정보들을 무선 신호 정보로 수집할 수 있다. 본 발명의 일 실시예에서는 실내 측위 장치가 수집하는 무선 신호 정보가 신호 세기(RSSI 값)인 것을 가정 하여 이를 중심으로 설명하기로 한다. 그러나, 수집되는 무선 신호 정보가 반드시 RSSI 값으로 제한되는 것은 아니며, 이외에도 AP와의 무선 통신을 통해 수집 가능한 다른 정보일 수도 있음은 당연하다. 단계 415에서 실내 측위 장치는 각 측정 장치에서 AP들에 대한 무선 신호 정보를 수집한 후 신호가 너무 약해 측정되지 않은 AP들의 무선 신호 정보를 미리 지정된 설정값(하한값)으로 지정한다. 본 발명의 일 실시예에서 b,f,r,p 기호는 실내 측위 위치 표시 방법의 일 예로, 각각 건물(동) 번호, 층, 방, 방에서의 위치를 나타낸다. 또한, n과 k는 각각 RSSI값 수집에 사용된 AP의 수와 계측 장소의 수를 나타낸다. 본 발명의 일 실시예에 따르면, 실내 측위 장치에 의해 측위된 무선 신호 정보(RSSI값)은 수집시에는 dBm 단위로 수집될 수 있다(도 6의 610). 이때, 일부 AP에서 너무 신호가 약해 측정이 안되는 경우를 가정하기로 한 다. 즉, 실내 측위 장치는 일부 AP에서 신호가 너무 약해 측정이 안되거나 무선 신호 정보(RSSI값)이 기준 치 미만인 경우 해당 AP에 대한 측정 정보는 공란으로 처리할 수 있다. 이어, 실내 측위 장치는 공란으로 수집된 AP의 무선 신호 정보(RSSI값)는 수집이 완료된 후 미리 지정된 매우 작은 값(예를 들어, -110dBm)으로 보정할 수 있다. 여기서, 미리 지정된 매우 작은 값은 고정된 값은 아니 며, 다른 임의의 값이 사용될 수도 있다. 다만 다른 AP의 무선 신호 정보에 영향을 미치지 않은 매우 작은 값으 로 설정할 수 있다(도 6의 620). 단계 420에서 실내 측위 장치는 수집된 무선 신호 정보(RSSI값)을 전력값으로 변환하여 데이터베이스에 저 장한다(도 6의 630 참조). 이와 같이, 무선 신호 정보(RSSI값)을 전력값으로 변환하는 이유는 RSSI값 사이의 선 형성을 획득하고, 머신 러닝 기반 측위 모듈의 성능을 향상시키기 위한 것이다. 본 발명의 일 실시예에서는 상술한 바와 같이, 측정 지점에서 무선 신호 정보(RSSI값)을 수집한 후 이를 전력값 으로 변환하여 DB에 저장하며, 이하에서 설명되는 무선 신호 정보를 수신하는 측위 과정에도 별도의 설명이 없 더라도 무선 신호 정보(RSSI값)을 전력값으로 변환하여 이용하는 것으로 이해되어야 할 것이다. 도 6를 참조하여 각 장소에서의 각 AP와의 무선 신호 정보를 수집하여 데이터베이스에 저장하는 방법에 대해 설 명하였다. 단계 425에서 실내 측위 장치는 각 측정 장소에서 영상 정보를 수집하여 데이터베이스(영상 데이터베이 스)에 저장한다. 즉, 실내 측위 장치는 해당 실내 측위 장치 주변 영상을 촬영하여 수집할 수 있다. 이때, 실내 측위 장치는 주변 영상만을 저장하는 것이 아니라, 해당 영상 관련된 메타데이터도 함께 저장할 수 있다. 여기 서, 메타데이터는 예를 들어, EXIF값일 수 있다. 이외에도, 해당 영상을 수집(촬영)한 날짜, 계절, 시간 등을 더 저장할 수도 있다. 즉, 실내 측위 장치는 해당 실내 측위 장치의 주변 영상을 수집하고, 해당 주변 영상에 관련된 메타 데이터를 영상과 함께 데이터베이스에 저장할 수 있다. 상술한 바와 같이, 실내 측위 장치는 복수의 공간으로 구획된 빌딩의 각 측정 장소에서 AP들과의 무선 신 호 정보를 수집하고, 각 측정 장소에서 영상 정보를 수집하여 데이터베이스에 저장할 수 있다. 이와 같이, 무선 신호 데이터베이스와 영상 데이터베이스가 각각 구축되어 있는 상태에서 실내 위치를 측위하는 방법에 대해 도 7을 참조하여 설명하기로 한다. 도 7은 본 발명의 일 실시예에 따른 실내 측위 방법을 나타낸 순서도이다. 단계 710에서 실내 측위 장치는 사용자가 위치한 장소에서 무선 신호 정보를 수집하여 1차 측위를 수행한 다. 이에 대해 보다 상세히 설명하기로 한다. 무선 신호를 이용한 1차 측위의 목적은 2차 측위를 위한 계산량 감소화 정확도를 향상시키는데 있다. 따라서, 1 차 측위는 정확한 위치 추정보다는 대략적인 위치 추정을 목적으로 한다. 따라서, 실내 측위 장치는 검색 범위에 따라 무선 신호 정보의 측정 간격을 적절하게 조정할 수 있다. 예를 들어, 도 4에서 보여지는 바와 같이, f(빌딩,층,방)의 값으로 수집된 무선 신호를 가정하기로 한다. 빌딩 단위의 1차 측위를 수행하고자 하는 경우에는 수집된 무선 신호 중 빌딩값만을 사용하여 1차 측위를 수행할 수 있다. 본 명세서에서 광대한 공간, 넓은 공간, 세밀한 단위의 표현은 무선 신호의 수집 간격을 조밀하게 할 것인지를 의미하는 것이 아니다. 즉, 도 4에서 광대한 공간은 각 건물을 구분하는 단위로 사용하고 있다. 따라서, 실내 측위 장치가 측정하는 무선 신호의 수집 간격은 건물 층이나 방수에 관계없이 해당 건물 내부에서 수집한 무선 신호를 이용한다. 또한, 넓은 공간의 의미는 또한 넓은 공간은 층 단위를 의미하는 것이다. 따라서, 실내 측위 장치는 해당 건물의 층 단위에서 수집된 무선 신호를 이용하여 1차 측위를 수행할 수 있다. 즉, 실내 측위 장치는 건물 내에서 측정된 무선 신호 중 일부를 이용하여 1차 측위를 개략적으로 수행할 수 있다. 예를 들어, f(빌딩,층,방)의 값이 무선 신호로서 수집된다고 가정하기로 한다. 실내 측위 장치는 1차 측위 의 결과로 f(빌딩,층,방)의 값 중 일부 또는 전체를 사용하여 1차 측위를 수행할 수 있다. 예를 들어, 1차 측위 결과로 f(a층)의 형태로 선택하여 사용될 수 있다. 또한, 빌딩 a의 a층, 빌딩 b의 a층 또 는 f(a동, r호)의 형태로 혼합하여 사용될 수도 있다. 단계 715에서 실내 측위 장치는 1차 측위 결과를 기초로 복수의 후보 위치를 선정한다. 실내 측위 장치는 각 측정 장소에서 수집된 무선 신호 정보(RSSI값)을 이용하여 개략적인 복수의 후보 위 치를 선정할 수 있다. . 여기서, 후보 위치는 빌딩일 수도 있으며, 빌딩 내 층일 수도 있으며, 룸(Room)일 수도 있다. 즉, 실내 측위 장치는 각 측정 장소에서 수집된 무선 신호 정보(RSSI값)을 머신 러닝 기반 측위 모듈에 적 용하여 복수의 후보 위치를 선정할 수 있다. 머신 러닝 기반 측위 모듈은 수집한 무선 신호 정보(RSSI값)을 기 초로 무선 신호 데이터베이스에서 핑거프린트를 획득하여 1차 측위를 수행하여 복수의 후보 위치를 선정할 수 있다. 단계 720에서 실내 측위 장치는 사용자가 위치한 장소에서 영상 정보를 수집한 후 영상 데이터베이스를 참 조하여 2차 측위를 수행하여 최종 위치를 결정한다. 예를 들어, 실내 측위 장치는 측정 장소에 대한 영상 및 메타데이터를 수집하고, 1차 측위 결과 선택된 복 수의 후보 위치에 해당하는 영상과 메타데이터를 영상 데이터베이스에서 추출한 후 비교하여 최종 위치를 결정 할 수 있다. 실내 측위 장치는 영상 데이터베이스에서 복수의 후보 위치에 해당하는 기저장된 영상 정보를 한정하여 수 집된 영상 정보와 비교하여 최종 위치를 결정할 수도 있다. 즉, 영상 데이터베이스에서 복수의 후보 위치에 해 당하는 기저장된 영상 정보를 추출한 후 비교 대상 후보 영상 세트로 한정한 후 수집된 영상 정보와 비교 대상 후보 영상 세트에 포함된 각각의 영상 정보를 비교하여 최종 위치를 결정할 수도 있다. 실내 측위 장치는 복수의 후보 위치에 해당하는 비교 대상 후보 영상 세트와 수집된 영상 정보를 비교한 결과 일치하는 영상이 존재하지 않는 경우, 영상 데이터베이스에 등록된 모든 영상 정보들을 대상으로 수집된 영상 정보와 비교하여 최종 위치를 결정할 수 있다. 예를 들어, 넓은 공간(예를 들어, 층 단위) 측위에서 복수의 후보 위치별 확률이 도 2와 같을 때, 후보 위치 3 개를 선정하여 2차 측위 하는 경우를 가정하기로 한다. 후보 위치가 2차 측위 범위에 포함될 확률은 약 99.999999%다. 따라서, 예상되는 2차 측위에 요구되는 계산량은 적용하는 방식에 따라 다르게 계산될 수 있다. 이에 따라 예상되는 2차 측위에 요구되는 계산량은, 적용하는 방식에 따라 다르게 계산될 수 있다. 이 경우는 도 2와 도 3으로 나누어 설명되며, 위의 경우, 기존의 단일 영상 기반 측위 방식 대비 계산량은 각각 3/13와 1/13만이 요구된다. 모든 후보 위치에서 일치하는 영상을 찾지 못한 경우, 2차 측위는 모든 영상 데이터베이스를 대상으로 수행될 수 있다. 실내 측위 장치는 상술한 바와 같이, 1차 측위 결과를 기초로 영상 기반 2차 측위(VSLAM)을 수행하고, 재 측정 또는 위치 결정 과정을 수행할 수 있다. 만일 재측정을 수행해야 하는 경우, 1차 측위 결과에서 다른 후보 위치를 대상으로 2차 측위를 수행할 수 있다. 모든 후보 위치를 대상으로 2차 측위를 수행한 결과에도 위치가 특정되지 않는 경우 영상 데이터베이스에 저장된 모든 영상들을 대상으로 검색하여 최종 위치를 선정할 수 있다. 도 8은 본 발명의 다른 실시예에 따른 실내 측위 시스템을 개략적으로 도시한 도면이다. 도 8을 참조하면, 본 발명의 다른 실시예에 따른 실내 측위 시스템은 서버 및 실내 측위 장치를 포함 하여 구성된다. 서버는 실내 측위 장치로부터 각 측정 장소에 대해 수집된 무선 신호 정보와 영상 정보를 획득하고, 이를 무선 신호 데이터베이스와 영상 데이터베이스에 각각 저장한다. 실내 측위 장치는 사용자가 소지한 장치로, 사용자가 위치한 장소에서 무선 신호 정보와 영상 정보를 수집 하여 서버로 전송하기 위한 수단이다. 본 발명의 다른 실시예에 따르면, 실내 측위 장치는 해당 실내 측위 장치가 위치한 장소에서 무선 신 호 정보와 영상 정보를 수집하여 서버로 전송할 수 있다. 서버는 실내 측위 장치로부터 수집된 무선 신호 정보와 영상 정보를 이용하여 실내 측위를 수행하여 그 결과를 실내 측위 장치로 전송할 수도 있다. 즉, 실내 측위 장치는 무선 신호 정보와 영상 정보를 서버로 제공하고, 서버에서 무선 신 호 정보와 영상 정보를 기반으로 실내 측위 장치의 실내 위치를 결정하여 해당 실내 측위 장치로 제 공할 수도 있다. 즉, 무선 신호 정보와 영상 정보를 기반으로 실내 측위를 수행하는 주체는 실내 측위 장치일 수도 있으며, 서버일 수도 있다. 이제까지 본 발명에 대하여 그 실시 예들을 중심으로 살펴보았다. 본 발명이 속하는 기술 분야에서 통상의 지식 을 가진 자는 본 발명이 본 발명의 본질적인 특성에서 벗어나지 않는 범위에서 변형된 형태로 구현될 수 있음을 이해할 수 있을 것이다. 그러므로 개시된 실시 예들은 한정적인 관점이 아니라 설명적인 관점에서 고려되어야 한다. 본 발명의 범위는 전술한 설명이 아니라 특허청구범위에 나타나 있으며, 그와 동등한 범위 내에 있는 모 든 차이점은 본 발명에 포함된 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2021-0186093", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 실내 측위 장치의 내부 구성을 개략적으로 도시한 블록도. 도 2 및 도 3은 본 발명의 일 실시예에 따른 2차 측위 계산량 감소를 설명하기 위한 식을 예시한 도면. 도 4는 본 발명의 일 실시예에 따른 무선 신호 데이터베이스와 영상 데이터베이스를 생성하는 방법을 나타낸 순 서도. 도 5는 본 발명의 일 실시예에 따른 공간 구획을 예시한 도면. 도 6은 본 발명의 일 실시예에 따른 무선 신호 전처리 과정을 설명하기 위해 도시한 도면. 도 7은 본 발명의 일 실시예에 따른 실내 측위 방법을 나타낸 순서도. 도 8은 본 발명의 다른 실시예에 따른 실내 측위 시스템을 개략적으로 도시한 도면."}
