{"patent_id": "10-2021-0134731", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0051850", "출원번호": "10-2021-0134731", "발명의 명칭": "텍스트마이닝을 이용한 가계부 서비스 제공 시스템", "출원인": "주식회사 마켓프로", "발명자": "이정열"}}
{"patent_id": "10-2021-0134731", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "텍스트마이닝을 이용한 가계부 서비스 제공 시스템에 있어서,가계부 정리를 위한 스마트 가계부 애플리케이션을 실행하여 영수증을 촬영하여 영수증 이미지를 제공하고, 상기 스마트 가계부 애플리케이션을 통해 작성된 가계부 파일에 대한 열람 또는 편집 기능을 수행하는 사용자 단말; 및상기 스마트 가계부 애플리케이션을 상기 사용자 단말에 제공하고, 상기 사용자 단말에서 제공되는 영수증 이미지를 픽셀별로 이진화 처리하여 픽셀 값이 기 설정된 임계값 이상인 텍스트 영역을 추출하고, 추출된 텍스트 영역에 텍스트마이닝 기술을 적용하여 영수증 텍스트 정보로 변환하며, 상기 영수증 텍스트 정보를 구매날짜, 구매 수단, 구매상품 리스트, 영수증 발급처, 소비 금액 정보, 포인트 적립 정보를 포함한 가계부 서식 정보에 정리하여 가계부 파일을 생성하여 상기 사용자 단말에 제공하는 가계부 관리 서버를 포함하는 것인, 텍스트마이닝을 이용한 가계부 서비스 제공 시스템."}
{"patent_id": "10-2021-0134731", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 가계부 관리 서버는,상기 영수증 이미지를 픽셀별로 이진화 처리하여 픽셀 값이 기 설정된 임계값 이상인 텍스트 영역을 추출하고,상기 텍스트 영역에서 자연어 처리 기반의 텍스트마이닝 기술을 적용하여 텍스트를 인식하는 텍스트마이닝모듈;상기 텍스트마이닝 모듈에서 추출된 텍스트들을 문자열로 표현하기 위해 텍스트 포맷을 지정하여 영수증 텍스트정보로 제공하는 텍스트 포맷팅 모듈; 상기 텍스트 포맷핑 모듈에서 제공되는 영수증 텍스트 정보에서 가계부 서식 레이어의 각 항목에 기입하기 위한구매상품 리스트를 추출하는 텍스트 파싱 모듈; 상기 가계부 서식 레이어에 구매상품 리스트 정보를 매핑하는 가계부 서식 매핑 모듈; 및 상기 가계부 서식 매핑 모듈에서 가계부 서식 레이어에 매핑된 구매상품 리스트 정보, 수입 내역 정보, 사용자데이터들을 포함하는 가계부 파일을 생성하는 파일 생성 모듈을 포함하는 것인, 텍스트마이닝을 이용한 가계부서비스 제공 시스템."}
{"patent_id": "10-2021-0134731", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 텍스트 포맷팅 모듈은 영수증 포맷을 분류하기 위한 인공 지능 기반의 영수증 인식 모델을 학습하고, 학습된 영수증 인식 모델에 상기 텍스트마이닝 모듈에서 처리된 영수증 텍스 정보를 입력하여 상기 영수증 텍스트정보의 원본 영수증에 해당하는 영수증 포맷의 예측값을 출력하는 것인, 텍스트마이닝을 이용한 가계부 서비스제공 시스템."}
{"patent_id": "10-2021-0134731", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서, 상기 텍스트 포맷팅 모듈은 상품명, 단가, 수량, 금액을 포함한 노출 항목을 포함한 표현하는 방식이 서로 다른영수증 포맷을 분류하기 위해, 영수증 포맷별 영수증 이미지-레이블 쌍의 학습 데이터셋을 수집하고, 수집된 학습 데이터셋에 대한 전처리를 수행한 후 상기 영수증 인식 모델을 학습하는 것인, 텍스트마이닝을 이용한 가계부 서비스 제공 시스템.공개특허 10-2023-0051850-3-청구항 5 제2항에 있어서, 상기 텍스트마이닝 모듈은,선행 학습된 인공지능 모델을 사용하여 인식된 텍스트를 사전에 정의된 세부 지출 카테고리로 분류하는 것인,텍스트마이닝을 이용한 가계부 서비스 제공 시스템."}
{"patent_id": "10-2021-0134731", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서, 상기 사용자 단말은 스마트 가계부 애플리케이션을 통해 전자영수증의 등록 기능 및 카드사 서버 또는 은행 서버로부터 전송되는 결제 관련된 문자메시지의 등록 기능을 수행하여, 결제 관련된 문자메시지와 전자영수증을상기 가계부 파일 상에 정리되도록 하는 것인, 텍스트마이닝을 이용한 가계부 서비스 제공 시스템."}
{"patent_id": "10-2021-0134731", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서, 상기 가계부 관리 서버는,상기 스마트 가계부 애플리케이션을 통해 영수증 이미지 등록시, 기 설정된 적립 포인트를 제공하고, 상기 사용자 단말의 조회 또는 지급 요청에 따라 적립 포인트 현황을 제공하고, 이미 설정된 지급 방식에 따라 적립 포인트를 지급하는 것인, 텍스트마이닝을 이용한 가계부 서비스 제공 시스템."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 영수증 이미지를 이용한 가계부를 자동으로 정리해주는 텍스트마이닝을 이용한 가계부 서비스 제공 시 스템에 관한 것으로서, 가계부 정리를 위한 스마트 가계부 애플리케이션을 실행하여 영수증을 촬영하여 영수증 이미지를 제공하고, 상기 스마트 가계부 애플리케이션을 통해 작성된 가계부 파일에 대한 열람 또는 편집 기능을 (뒷면에 계속)"}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 영수증 이미지를 이용한 가계부를 자동으로 정리해주는 텍스트마이닝을 이용한 가계부 서비스 제공 시스템에 관한 것이다."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "이 부분에 기술된 내용은 단순히 본 발명의 일 실시예에 대한 배경 정보를 제공할 뿐 종래기술을 구성하는 것은 아니다. 수기 가계부를 사용해서 소비 습관을 작성하는 방식은 직접 자신이 소비 내역을 작성하다 보니 소비 습관을 반 성하고 소비 패턴을 고치는 과정에 큰 도움이 되고, 사용자 자신이 가장 쓰기 편리한 디자인이나 중요 지출에 대한 양식을 자신 마음대로 바꿀 수 있다는 장점이 있다. 그러나 수기 가계부는 각종 영수증을 일일이 확인해서 작성해야 하고, 소비의 상세 내역에 대한 계산을 사용자가 직접 해야 하므로 번거롭고 시간이 많이 소요되는 단 점이 있다. 이러한 수기 가계부의 단점을 해소하기 위해, 간단한 가계부 프로그램이나 엑셀 파일로 제작된 가계부 문서를 많이 활용하였지만, 최근 스마트폰을 이용한 가계부 애플리케이션이 등장하면서, 가계부 애플리케이션을 이용하 여 언제, 어느 때든 쉽고 빠르게 소비 지출을 내용을 기록하고 파악하게 되었다. 가계부 애플리케이션은 카드사나 은행사를 통해 결제시 스마트폰으로 제공되는 SMS 문자내용에 포함되는 소비내 역을 추출하여 가계부 애플리케이션에 자동으로 등록되도록 하고 있다. 그러나 카드결제가 아닌 현금결제로 이 루어지는 소비활동에서는 가계부 애플리케이션에 소비관련 정보를 등록할 수 없어 사용자가 별도로 스마트폰의 해당 애플리케이션을 실행하여 소비정보를 등록하여야만 한다. 또한, 종래의 가계부 애플리케이션은 스마트폰의 카메라를 이용하여 영수증의 문자 인식을 통해 구매 일자, 상 품 항목, 금액, 총금액 등의 문자열을 추출하여 가공할 수 있는 데이터 값으로 인식하는 기능을 제공한다. 영수증 인식 기능이 있는 가계부 애플리케이션은, 마트(mart)에서 발급한 영수증의 경우에 세부 지출 카테고리 가 매우 다양하기 때문에 지출 카테고리를 쉽게 분류하여 유추하기는 쉽지 않고, 그로 인해 사용자가 분류가 쉽지 않은 항목들을 일일이 입력해야 하는 불편함이 있다. 마트에서는 식재료 뿐만 아니라 다양한 소비재, 생활 가전, 스포츠 기구 등 그 품목이 매우 다양하기 때문에 세 부 지출 카테고리를 정확하게 분류하여 기입하는 것은 불가능하다고 볼 수 있다. 특히, 마트에서는 많은 금액을 소비하게 되는데, 그 금액 중 식품, 소비재, 가전 등이 각각 얼마나 소비되고 있는지는 정확하게 파악하지 못하 게 된다. 이와 같이, 마트의 소비 내역을 통해 세부 지출 카테고리 내지는 상품 분류를 정확하게 분류하여 가계 부를 작성할 수 있는 수단이 요구되고 있다."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 전술한 문제점을 해결하기 위하여, 본 발명의 일 실시예에 따라 영수증 이미지를 이용한 가계부를 자 동으로 정리해주면서 포인트를 적립하여 영수증 관리를 손쉽게 할 수 있도록 하는 텍스트마이닝을 이용한 가계 부 서비스 제공 시스템을 제공하는 것에 목적이 있다. 다만, 본 실시예가 이루고자 하는 기술적 과제는 상기된 바와 같은 기술적 과제로 한정되지 않으며, 또 다른 기 술적 과제들이 존재할 수 있다."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기한 기술적 과제를 달성하기 위한 기술적 수단으로서 본 발명의 일 실시예에 따른 텍스트마이닝을 이용한 가 계부 서비스 제공 시스템은, 가계부 정리를 위한 스마트 가계부 애플리케이션을 실행하여 영수증을 촬영하여 영 수증 이미지를 제공하고, 상기 스마트 가계부 애플리케이션을 통해 작성된 가계부 파일에 대한 열람 또는 편집 기능을 수행하는 사용자 단말; 및 상기 스마트 가계부 애플리케이션을 상기 사용자 단말에 제공하고, 상기 사용 자 단말에서 제공되는 영수증 이미지를 픽셀별로 이진화 처리하여 픽셀 값이 기 설정된 임계값 이상인 텍스트 영역을 추출하고, 추출된 텍스트 영역에 자연어 처리 기반의 텍스트마이닝 기술을 적용하여 영수증 텍스트 정보 로 변환하며, 상기 영수증 텍스트 정보를 구매날짜, 구매 수단, 구매상품 리스트, 영수증 발급처, 소비 금액 정 보, 포인트 적립 정보를 포함한 가계부 서식 정보에 정리하여 가계부 파일을 생성하여 상기 사용자 단말에 제공 하는 가계부 관리 서버를 포함하는 것이다. 본 발명의 일측면에 따르면, 상기 가계부 관리 서버는, 상기 영수증 이미지를 픽셀별로 이진화 처리하여 픽셀 값이 기 설정된 임계값 이상인 텍스트 영역을 추출하고, 상기 텍스트 영역에서 자연어 처리 기반의 텍스트마이 닝 기술을 적용하여 텍스트를 인식하는 텍스트마이닝 모듈; 상기 텍스트마이닝 모듈에서 추출된 텍스트들을 문 자열로 표현하기 위해 텍스트 포맷을 지정하여 영수증 텍스트 정보로 제공하는 텍스트 포맷팅 모듈; 상기 텍스 트 포맷핑 모듈에서 제공되는 영수증 텍스트 정보에서 가계부 서식 레이어의 각 항목에 기입하기 위한 구매상품 리스트를 추출하는 텍스트 파싱 모듈; 상기 가계부 서식 레이어에 구매상품 리스트 정보를 매핑하는 가계부 서 식 매핑 모듈; 및 상기 가계부 서식 매핑 모듈에서 가계부 서식 레이어에 매핑된 구매상품 리스트 정보, 수입 내역 정보, 사용자 데이터들을 포함하는 가계부 파일을 생성하는 파일 생성 모듈을 포함하는 것이다. 본 발명의 일측면에 따르면, 상기 텍스트마이닝 모듈은, 선행 학습된 인공지능 모델을 사용하여 인식된 텍스트 를 사전에 정의된 세부 지출 카테고리로 분류하는 것이다. 본 발명의 일측면에 따르면, 상기 사용자 단말은 스마트 가계부 애플리케이션을 통해 전자영수증의 등록 기능 및 카드사 서버 또는 은행 서버로부터 전송되는 결제 관련된 문자메시지의 등록 기능을 수행하여, 결제 관련된 문자메시지와 전자영수증을 상기 가계부 파일 상에 정리되도록 하는 것이다. 본 발명의 일측면에 따르면, 상기 가계부 관리 서버는, 상기 스마트 가계부 애플리케이션을 통해 영수증 이미지 등록시, 기 설정된 적립 포인트를 제공하고, 상기 사용자 단말의 조회 또는 지급 요청에 따라 적립 포인트 현황 을 제공하고, 이미 설정된 지급 방식에 따라 적립 포인트를 지급하는 것이다. 본 발명의 일 실시예에 따른 텍스트마이닝을 이용한 가계부 서비스를 제공하는 가계부 관리 서버에 의해 수행되 는 텍스트마이닝을 이용한 가계부 서비스 제공 방법은, a) 가계부 정리를 위한 스마트 가계부 애플리케이션을 사용자 단말에 제공하고, 상기 스마트 가계부 애플리케이션을 통해 영수증 이미지를 등록하는 단계; b) 상기 영수증 이미지를 픽셀별로 이진화 처리하여 픽셀 값이 기 설정된 임계값 이상인 텍스트 영역을 추출하고, 추출된 텍스트 영역에 자연어 처리 기반의 텍스트마이닝 기술을 적용하여 영수증 텍스트 정보로 변환한 후 문자열로 표 현하기 위한 텍스트 포맷팅 및 텍스트 파싱 과정을 수행하여 영수증 텍스트 정보로 변환하는 단계; 및 c) 상기 영수증 텍스트 정보를 구매날짜, 구매 수단, 구매상품 리스트, 영수증 발급처, 소비 금액 정보, 포인트 적립 정 보를 포함한 가계부 서식 정보에 정리하여 가계부 파일을 생성하여 상기 사용자 단말에 제공하는 단계를 포함하 는 것이다. 본 발명의 일측면에 따르면, 상기 c) 단계는, 선행 학습된 인공지능 모델을 사용하여 상기 영수증 텍스트 정보 내 인식된 텍스트를 사전에 정의된 세부 지출 카테고리로 분류하는 것이다."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "전술한 본 발명의 과제 해결 수단에 의하면, 본 발명은 실물 영수증, 전자 영수증의 이미지를 이용하여 가계부 를 자동으로 정리해주면서 포인트를 적립하여 영수증 관리를 손쉽게 할 수 있고, 결제 및 입출금 관련 문자메시 지와 영수증을 함께 관리할 수 있고, 가계부 파일을 분석하여 지출 또는 수입 내역에 대한 다양한 컨텐츠를 사 용자에게 제공할 수 있다."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참조하여 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자가 용이하게 실시할 수 있도록 본 발명의 실시예를 상세히 설명한다. 그러나 본 발명은 여러 가지 상이한 형태로 구현될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 발명을 명확하게 설명하기 위해서 설명과 관 계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였다. 명세서 전체에서, 어떤 부분이 다른 부분과 \"연결\"되어 있다고 할 때, 이는 \"직접적으로 연결\"되어 있는 경우뿐 아니라, 그 중간에 다른 소자를 사이에 두고 \"전기적으로 연결\"되어 있는 경우도 포함한다. 또한 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소를 제외하는 것이 아 니라 다른 구성요소를 더 포함할 수 있는 것을 의미하며, 하나 또는 그 이상의 다른 특징이나 숫자, 단계, 동작, 구성요소, 부분품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해 되어야 한다. 본 명세서에서 ‘단말’은 휴대성 및 이동성이 보장된 무선 통신 장치일 수 있으며, 예를 들어 스마트 폰, 태블 릿 PC 또는 노트북 등과 같은 모든 종류의 핸드헬드(Handheld) 기반의 무선 통신 장치일 수 있다. 또한, ‘단 말’은 네트워크를 통해 다른 단말 또는 서버 등에 접속할 수 있는 PC 등의 유선 통신 장치인 것도 가능하다. 또한, 네트워크는 단말들 및 서버들과 같은 각각의 노드 상호 간에 정보 교환이 가능한 연결 구조를 의미하는 것으로, 근거리 통신망(LAN: Local Area Network), 광역 통신망(WAN: Wide Area Network), 인터넷 (WWW: World Wide Web), 유무선 데이터 통신망, 전화망, 유무선 텔레비전 통신망 등을 포함한다. 무선 데이터 통신망의 일례에는 3G, 4G, 5G, 3GPP(3rd Generation Partnership Project), LTE(Long Term Evolution), WIMAX(World Interoperability for Microwave Access), 와이파이(Wi-Fi), 블루투스 통신, 적외선 통신, 초음파 통신, 가시광 통신(VLC: Visible Light Communication), 라이파이(LiFi) 등이 포함되나 이에 한 정되지는 않는다. 이하의 실시예는 본 발명의 이해를 돕기 위한 상세한 설명이며, 본 발명의 권리 범위를 제한하는 것이 아니다. 따라서 본 발명과 동일한 기능을 수행하는 동일 범위의 발명 역시 본 발명의 권리 범위에 속할 것이다. 또한, 본 발명의 각 실시예에 포함된 각 구성, 과정, 공정 또는 방법 등은 기술적으로 상호간 모순되지 않는 범 위 내에서 공유될 수 있다. 이하 첨부된 도면을 참고하여 본 발명의 일 실시예를 상세히 설명하기로 한다. 도 1은 본 발명의 일 실시예에 따른 텍스트마이닝을 이용한 가계부 서비스 제공 시스템의 구성을 설명하는 도면 이다. 도 1을 참조하면, 텍스트마이닝을 이용한 가계부 서비스 제공 시스템은 적어도 하나 이상의 사용자 단말과 가계부 관리 서버를 포함하지만 이에 한정되지는 않는다. 사용자 단말은 가계부 정리를 위한 스마트 가계부 애플리케이션을 실행하고, 실물 영수증 또는 전자 영수 증을 촬영하여 영수증 이미지를 제공하며, 스마트 가계부 애플리케이션을 통해 작성된 가계부 파일에 대한 열람 또는 편집 기능을 수행한다. 사용자 단말은 스마트 가계부 애플리케이션을 통해 전자영수증의 등록 기능 및 카드사 서버 또는 은행 서버로부터 전송되는 결제 관련된 문자메시지의 등록 기능을 수행할 수 있고, 그로 인해 결제 관련된 문자메시지와 전자영수증을 가계부 파일 상에 정리되도록 할 수 있다. 가계부 관리 서버는 스마트 가계부 애플리케이션을 사용자 단말에 제공하고, 사용자 단말에서 제공되는 영수증 이미지를 자연어 처리 기반의 텍스트마이닝를 이용하여 영수증 텍스트 정보로 변환하며, 영수 증 텍스트 정보를 구매날짜, 구매 수단, 구매상품 리스트, 영수증 발급처, 소비 금액 정보, 포인트 적립 정보를 포함한 가계부 서식 정보에 정리하여 가계부 파일을 생성한 후 사용자 단말에 제공한다. 이러한 가계부 관리 서버는 일반적인 의미의 서버용 컴퓨터 본체일 수 있고, 그 외에 서버 역할을 수행할 수 있는 다양한 형태의 장치로 구현될 수 있다. 구체적으로, 가계부 관리 서버는 통신 모듈(미도시), 메모 리(미도시), 프로세서(미도시) 및 데이터베이스(미도시)를 포함하는 컴퓨팅 장치에 구현될 수 있는데, 스마트폰 이나 TV, PDA, 태블릿 PC, PC, 노트북 PC 및 기타 사용자 단말 장치 등으로 구현될 수 있다. 도 2는 본 발명의 일 실시예에 따른 가계부 관리 서버의 구성을 나타낸 도면이다. 도 2를 참조하면, 가계부 관리 서버는 텍스트마이닝 모듈, 텍스트 포맷팅 모듈, 텍스트 파싱 모 듈, 가계부 서식 매핑 모듈, 파일 생성 모듈 및 데이터베이스를 포함하지만 이에 한정되지 는 않는다. 텍스트마이닝 모듈은 영수증 이미지로부터 텍스트 영역을 추출하고, 텍스트 영역에서 텍스트를 추출한다. 이때, 텍스트마이닝 모듈은 구글에서 제공해주는 인공지능 기반의 이미지 분석 API, 즉 Google Vision AI API를 사용할 수 있다. Google Vision AI API는 OCR를 이용해 50개가 넘는 언어와 다양한 파일 형식의 이미지에 서 텍스트를 인식할 수 있고, 선행 학습된 인공지능 모델을 사용하여 인식된 텍스트를 사전에 정의된 가계부와 연관되는 세부 지출 카테고리로 빠르게 분류할 수 있다. 한편, 텍스트 마이닝 모듈은 OCR 처리 기술을 이 용하지 않더라도 영수증 이미지에 이진화 기술을 적용하고, 픽셀 값을 기반으로 임계값 이상의 픽셀을 텍스트로 판단한 하여 텍스트 영역을 추출한 후에, 텍스트 영역에 텍스트마이닝 기술을 적용함으로써 언어학, 통계학, 기 계학습 등을 기반으로 한 자연어 처리 기술을 활용하여 반정형/비정형 텍스트 데이터를 정형화하고, 특징을 추 출하기 위한 기술과 추출된 특징으로부터 의미있는 정보를 발견할 수 있도록 한다. 텍스트 포맷팅 모듈은 텍스트마이닝 모듈에서 추출된 텍스트들을 문자열로 표현하기 위해 텍스트 포 맷을 지정하여 영수증 텍스트 정보로 제공한다. 영수증은 POS, 키오스크 등에서 주문 사항에 대해 현금 또는 카드 결제시 출력되는데, 대부분 메뉴명(상품명, 아이템, 아이템명, 품명 등), 가격(단가, 가격 등), 수량(갯수, 개수, quantity, qty 등), 금액(금액, 합계, amount 등)의 4가지 항목이 노출된다. 이러한 영수증은 지불 결제 사업자에 따라 4가지 항목을 표현하기 위한순서, 텍스트 등의 포맷 방식이 상이할 수 있다. 따라서, 텍스트 포맷팅 모듈은 다양한 영수증 포맷 처리를 위해 인공 지능을 활용한다. 즉, 텍스트 포맷팅 모듈은 인공 지능 기반의 영수증 인식 모델을 학습하고, 학습된 영수증 인식 모델에 텍스트마이닝 모듈 에서 처리된 영수증 텍스 정보를 입력하면 영수증 텍스트 정보의 원본 영수증이 어떠한 영수증 포맷을 사 용하고 있는지 예측값(영수증 포맷값)이 출력된다. 텍스트 포맷팅 모듈은 영수증 인식 모델을 학습하기 위해, 각 지불 결제 사업자마다 가지고 있는 포맷에 따라 출력된 영수증 이미지-레이블 쌍의 학습 데이터셋을 수집하고, 수집된 학습 데이터셋을 영수증 포맷에 따 라 이미지 분류(Image Classification) 기술을 적용하는데 활용한다. 즉, 텍스트 포맷팅 모듈은 학습 데이 터셋의 영수증 이미지에 대한 전처리를 수행하고, 영수증 인식 모델은 학습 데이터셋을 이용하여 학습하게 된다. 이때, 영수증 인식 모델은 이미지 처리를 위한 대표적인 딥러닝 모델인 CNN(Convolution Neural Networ k)을 사용할 수 있고, CNN은 Convolution, ReLU, Pooling 과정을 통해 이미지의 공간적인 특징을 추출하고, 이 를 Fully Connected Layer 를 통해 분류하게 된다. 이때, 텍스트 포맷팅 모듈은 CNN 외에도 AlexNet, VggNet, Googlenet, ResNet 등을 이용하여 긴 시간 학 습을 진행하지 않아도 높은 성능을 유지할 수 있도록 할 수 있다. 텍스트 파싱 모듈은 영수증 텍스트 정보에서 가계부 서식 파일에 사용되는 구매상품 리스트를 추출한다. 이때, 텍스트 파싱 모듈은 영수증 인식 모델을 통해 예측된 영수증 포맷에 기초하여 영수증에 노출되는 4 가지 항목(메뉴명, 가격, 수량, 금액)에 따라 구매상품 리스트를 쉽게 추출할 수 있다. 가계부 서식 매핑 모듈은 사용자가 지정한 가계부 서식 레이어 또는 기본값으로 설정된 가계부 서식 레이 어에 구매상품 리스트 정보를 매핑하고, 파일 생성 모듈은 가계부 서식 레이어에 매핑된 구매상품 리스트 정보 뿐만 아니라 수입 내역, 기타 사용자 데이터들을 포함하는 가계부 파일을 생성 및 저장한다. 영수증 발급처 또는 상품 구매처에서 상품 구매 후에 사용자 단말로 전자 영수증을 발급한 경우에, 사용자 단말은 스마트 가계부 애플리케이션을 통해 전자영수증을 등록하여 가계부 파일에 전자영수증 내 지출 내 역이 포함되도록 할 수 있고, 카드사 서버 또는 은행서버로부터 전송되는 문자메시지(결제 문자메시지, 입출금 승인 메시지 등)를 자동으로 등록하여 가계부 파일에 지출 및 수입 내역이 포함되도록 할 수 있다. 또한, 데이터베이스에는 영수증 이미지, 영수증 텍스트 정보, 구매상품 리스트 정보, 전자영수증, 문자메 시지 등의 내용을 보관하며, 텍스트마이닝을 이용한 가계부 서비스 제공 방법을 수행하면서 누적되는 각종 데이 터들을 저장한다. 한편, 가계부 관리 서버는 스마트 가계부 애플리케이션과 연동하여 영수증 이미지 등록시 기 설정된 적립 포인트를 제공한다. 이때, 가계부 관리 서버는 영수증 이미지의 등록 횟수 또는 총합계금액에 따라 일정 포인트씩 적립되도록 한다. 또한, 가계부 관리 서버는 사용자 단말의 조회 요청에 따라 적립 포인트현황을 제공하고, 지급 요청 에 따라 기 등록된 사용자 결제계좌로 적립 포인트를 지급하거나 제휴 사이트에 접속하여 상품을 구매할 수 있 도록 한다. 가계부 관리 서버는 마트, 식품회사 등의 판매처, 지도정보 제공 사이트 등과 사전 제휴를 통 해 영수증 내 판매처별, 마트별로 포인트를 적립하여 해당 판매처나 마트에서 적립된 포인트를 사용하도록 할 수 있다. 또한, 가계부 관리 서버는 지도정보 제공 사이트 등에서 영수증 발급처(구매처)의 지도 정보를 매핑하여, 전화번호, 구매처 상호명 등을 함께 저장하여, 즐겨찾는 매장정보 등으로 마이페이지에 등록할 수 있다. 상술한 모듈들은 본 발명을 설명하기 위한 일 실시예일 뿐, 이에 한정되지 않고 다양한 변형으로 구현될 수 있 다. 또한, 상술한 모듈들은 가계부 관리 서버의 프로세서에 의해 제어될 수 있는 컴퓨터로 판독 가능한 기 록매체로서 메모리에 저장된다. 또한, 상술한 모듈들의 적어도 일부는 소프트웨어, 펌웨어, 하드웨어 또는 이들 중 적어도 둘 이상의 조합으로 구현될 수 있으며, 하나 이상의 기능을 수행하기 위한 모듈, 프로그램, 루틴, 명 령어 세트 또는 프로세스를 포함할 수 있다. 도 3은 본 발명의 일 실시예에 따른 텍스트마이닝을 이용한 가계부 서비스 제공 방법을 설명하는 순서도이고, 도 4는 본 발명의 일 실시예에 따른 영수증 이미지와 가계부 파일을 설명하는 예시도이며, 도 5는 본 발명의 일 실시예에 따른 영수증 이미지의 처리 내역을 설명하는 예시도이고, 도 6은 본 발명의 일 실시예에 따른 가계부파일의 분석 결과를 설명하는 예시도이다. 도 3 내지 도 6을 참조하면, 텍스트마이닝을 이용한 가계부 서비스 제공 방법은, 사용자 단말에서 스마트 가계 부 애플리케이션을 실행한 상태에서 자신의 카메라를 이용해 영수증을 촬영하여 영수증 이미지를 저장하면, 스 마트 가계부 애플리케이션은 영수증 이미지를 자동으로 등록하고, 영수증 이미지의 텍스트 인식 과정을 수행하 게 된다(S10). 이때, 스마트 가계부 애플리케이션은 가계부 관리 서버와 연동하여 자연어 처리 기반의 텍스트마이닝 텍 스트 포맷팅, 텍스트 파싱, 가계부 서식 매핑 및 파일 생성 과정을 수행하게 된다. 즉, 스마트 가계부 애플리케 이션은 영수증 이미지를 자연어 처리 기반의 텍스트마이닝 처리하여 영수증 이미지를 문자열로 표현하기 위한 텍스트 포맷팅을 수행하고(S20, S30), 텍스트 포맷팅된 영수증 텍스트 정보에서 텍스트 파싱을 수행한 후 파싱 된 텍스트 정보를 구매상품 리스트로 분류한다(S40, S50). 스마트 가계부 애플리케이션은 구매상품 리스트를 가계부 서식 레이어에 투영하여 가계부 파일을 생성한다 (S60). 이때, 가계부 파일에는 구매날짜, 구매 수단(카드, 현금 등), 구매상품 리스트, 영수증 발급처, 소비 금 액 정보, 포인트 적립 정보를 포함한다. 또한, 텍스트마이닝 모듈은 선행 학습된 인공지능 모델을 사용하 여 인식된 텍스트를 사전에 정의된 교통/차량, 외식, 주거/통신, 경조사비 등의 세부 지출 카테고리로 분류할 수 있다. 따라서, 가계부 파일에는 상품에 해당하는 텍스트 정보(동산 만두, 개인택시 등)를 세부 지출 카테고리(교통/차 량>대중교통비, 외식>식사 등)로 자동으로 분류하여 정리될 수 있다. 예를 들어, 도 4에 도시된 바와 같이, 스마트 가계부 애플리케이션이 영수증 이미지가 등록되면, 영수증 발급처 ('동산 만두'), 구매날짜('2019--8-09 00:00:00'), 총금액('15000원'), 할증 정보가 추출된다. 스마트 가계부 애플리케이션은 도 5에 도시된 바와 같이, 데이터베이스에 영수증 이미지와 함께 지출 시간 정보, 등록시간정보, 처리 내역을 저장하고, 사용자 단말에서 검색 요청시 해당 영수증 이미지를 데이터베 이스에서 불러와 디스플레이한다. 한편, 도 6에 도시된 바와 같이, 가계부 관리 서버는 일별, 월별, 년별로 지출 내역과 수입 내역을 분석한 후 분석 결과를 카테고리별로 지출 비율 및 지출 금액에 대한 지출 현황을 그래프나 엑셀 등의 보고서 형태로 제공할 수 있다. 도 7은 본 발명의 일 실시예에 따른 텍스트 포맷팅 과정을 설명하는 순서도이다. 도 7을 참조하면, 텍스트 포맷팅 과정은 텍스트마이닝 모듈을 통해 텍스트마이닝 엔진에서 텍스트별 영수 증 이미지 상에 어디에 위치해 있는지 좌표값을 추출할 수 있고, 띄어쓰기와 개행에 대한 공백 정보 (DetectedBreak 값)를 추출할 수 있다(S31). 일례로, 텍스트마이닝 모듈은 전체텍스트주석(fullTextAnnotations) > 페이지(pages) > 블럭(blocks) > 문단(paragraphs) 구조로 되어 있고, fullTextAnnotaions는 영수증 이미지에서 인식된 전체 구획 정보가 들어 있고, 전체 구획 정보 내에서 구획을 나눈 것이 pages, pages에서 구획을 나눈 것이 blocks, blocks에서 구획을 나눈 것이 문단(paragraphs), 단어(words) 및 심벌(symbols)이 된다. 이때, Blocks, Paragraphs, words, symbols 내의 경계박스(boundingBox)는 해당 구획의 좌표값이 들어있으며, 구획의 최하단 단위인 symbols 내 텍 스트에는 인식된 텍스트가 들어 있다. 따라서, 텍스트 포맷팅 모듈은 텍스트를 추출하여 경계박스 (boundingBox) 좌표값에 따라 재배열하게 된다. 텍스트 포맷팅 모듈은 좌표 정보에 기초하여 행간 좌표값 차이를 모두 계산하여, 좌표값 차이가 최소가 되 는 값을 개행 기준값으로 설정한다(S32). 텍스트 포맷팅 모듈은 좌표 정보와 공백 정보에 기초하여 개별 텍스트를 텍스트 리스트 형태로 저장하고 좌표 정보의 X축과 Y축을 기준으로 분류한다(S33). 텍스트 포맷팅 모듈은 분류된 텍스트 리스트에 개행 기준값을 적용하여 문자열 배열로 재정리하여 영수증 텍스트 정보를 저장한다(S34). 이때, 텍스트 포맷팅 모듈은 텍스트 리스트의 최초 텍스트부터 다음 텍스트 를 차례차례 이어 붙이는 방식으로 문자열 배열로 재정리하는데, 다음 텍스트의 Y축 좌표값이 마지막으로 이어 붙인 텍스트의 Y축 좌표값과의 차이가 개행 기준값 이상이면 개행을 시킨 후에 다음 문자 배열 인덱스에 저장한 다.즉, 텍스트 포맷팅 모듈은 빈 문자열 \"text\" 라는 변수를 선언한 상태에서, 텍스트마이닝 모듈의 처 리 결과로 제공되는 구획의 좌표값(x, y)(좌표 정보)을 기준으로 XY 좌표 평면에서 제2사분면에 해당하는 구획 의 최하단(X축상) 단위 Word에서 부터 Word > Symbol > text를 1의 text 변수에 계속 이어 붙이게 된다. 이때, Symbol의 Property > DetectedBreak > Type을 검사해서 \"EOL_SURE_SPACE\"를 제외한 나머지 타입이 발견 되면 1의 text에 Symbol.text + \" \"를 이어 붙이게 된다. Word의 내 마지막 Symbol 요소 안에 Property > DetectedBreak > Type 에 \"EOL_SURE_SPACE\" 가 있으면 이 다음 Word는 새로 개행된 Word라고 가정하고, 이어 붙여진 1의 text와 이어붙여졌던 전체 text의 좌표값을 따로 임의의 배열에 저장하고, text 변수를 초기화한다. 그리고 현재 Word의 y값과 개행되는 다음 Word의 y값의 차이(제1 차이값)를 계산하게 된다. 이러한 과정을 반복 수행한 후에, 저장해 둔 text와 좌표값을 저장한 배열을 y값, x값을 기준으로 오름차순으로 정렬하고, 저장해둔 임의의 배열을 처음부터 액세스하여, 이 요소의 text를 다른 문자열 변수에 저장하는 데 현 재 요소의 y값과 다음 요소의 y값의 차이가 4에서 저장한 y값 차이인 제1 차이값보다 크면 새로 저장했던 문자 열 변수를 다른 문자열 배열에 저장한 후 이 문자열 변수를 초기화하고, 이 과정을 반복 수행한다. 텍스트 포맷팅 모듈은 영수증 텍스트 정보에서 기 설정된 정리조건에 해당하는 문자열 정리하여 텍스트 파 싱이 용이하도록 한다(S35). 즉, 텍스트 포맷팅 모듈은 한글, 알파벳, 숫자, 기호 문자(% & * + - 등) 파 싱에 필요없는 특수 문자를 제거하고, 상품명 앞에 붙은 상품 순서 번호를 제거하며, 단가와 합계 사이에 숫자 1이 인식되어야 하는데 특수문자 세로줄(|)로 인식된 부분을 1로 보완하고, 두 칸 공백을 한 칸 공백으로 변경 하며, 특수 문자밖에 없거나 공백인 텍스트를 제거한다. 도 8은 본 발명의 일 실시예에 따른 텍스트 파싱 과정을 설명하는 순서도이다. 도 8에 도시된 바와 같이, 텍스트 파싱 모듈은 영수증 텍스트 정보에서 정규표현식 텍스트 전처리를 수행 한다. 즉, 구입 일시, 전화번호, 결제카드 정보를 날짜 정규표현식(예를 들어, 2019-09-01 등)과 전화번호 정규 표현식, 카드 정보 정규표현식으로 각각 전처리를 수행한다(S41). 텍스트 파싱 모듈은 영수증 텍스트 정보의 시작 지점을 설정하여 문자열 배열 인덱스 검사를 수행한다 (S42). 일반적으로, 상품 목록의 앞에 오는 텍스트인 '주문번호', '상품명', '단가', '상품코드'가 들어있는 문 자열인 경우에, 해당 문자열 다음에 오는 인덱스부터가 상품 목록에 해당하므로, '주문번호', '상품명', '단 가', '상품코드'를 포함한 텍스트들을 수집하여 시작 그룹으로 설정하고, 시작 그룹내 텍스트가 발견되면 해당 위치를 시작 지점으로 설정할 수 있다. 텍스트 파싱 모듈은 상품 리스트 텍스트를 검사하기 위해 상품명, 상품코드, 수량, 단가, 할인, 쿠폰, 에 누리를 포함한 문자열 분류한다(S43). 각 문자열(row) 중 '상품명만 있는 row', '상품명 + 단가 row', '상품코 드만 있는 row', '상품코드 + 단가 row', '할인 row'로 분류한다. 즉, 문자열에 '할인', '에누리', '쿠폰', '-숫자' 형식의 텍스트가 들어있는 row는 '할인 row'로 분류한다. 할 인 row가 아닌 row에 대해 공백을 기준으로 나누어 새로운 문자열 배열(string array)을 생성한 후 새롭게 생성 된 문자열 배열의 길이가 4인 경우에 모든 데이터가 숫자이면 '상품코드 + 단가 row'로 분류하고, 문자열의 마 지막(n번째) 텍스트, n- 1 번째 텍스트, n - 2번째 텍스트가 숫자이면 '상품명 + 단가 row'로 분류한다. 그 외 에 문자열 배열의 길이가 4 이상인 경우에 '상품명 row'로 분류한다. 한편, 새롭게 생성된 문자열 배열의 길이가 3인 경우에 텍스트가 전부 숫자인 경우 '단가 row'로 분류하고, 텍 스트 중 일부 문자가 포함된 경우에 '상품명 row'로 분류한다. 만일, 새롭게 생성된 문자열 배열 중 공백을 기 준으로 문자열 배열의 데이터를 검사한 결과 분류되지 않은 문자열은 '상품명만 있는 row'로 분류한다. 한편, 텍스트 파싱 모듈은 문자 배열의 길이가 2인 경우에 첫번째 텍스트가 숫자가 아니고, 두 번째 텍스 트가 숫자이면 \"상품명 + 단가 row\"로 분류하고, 첫번째 텍스트와 두번째 텍스트 모두 숫자이면 첫번째 텍스트 가 상품코드이면 \"상품코드 + 단가 row\"로 분류하며, 첫번째 텍스트가 상품코드가 아니면 \"단가 row\"로 분류한 다. 한편, 첫번 째 및 두 번째 텍스트 모두가 숫자가 아니면 \"상품명 row\"로 분류한다. 텍스트 파싱 모듈은 문자 배열의 길이가 1인 경우에, 해당 텍스트가 상품 코드이면 \"상품 코드 row\", 숫자 이면 \"단가 row\", 숫자가 아니면 \"상품명 row\" 로 분류한다. 텍스트 파싱 모듈은 '상품명만 있는 row', '상품명 + 단가 row', '상품코드만 있는 row', '상품코드 + 단 가 row', '할인 row'로 분류된 row들을 조합하여 구매상품 리스트를 구성한다. 텍스트 파싱 모듈은 종료 지점에 해당하는 텍스트가 존재하는 경우에 상품 리스트 텍스트를 검사를 중지하 고, 각 분류된 row들을 조합한 구매상품 리스트를 제공한다(S44, S45). 이때, 영수증의 최하단에 자주 사용되는 텍스트들인 '과세물품', '과세금액', '총합계금액', '주문합계' 등을 수집하여 종료 그룹으로 설정하고, 종료 그룹 내 텍스트가 발견되면, 해당 위치를 종료 지점으로 설정한다. 한편, 도 3, 도 7 및 도 8의 각 단계들은 본 발명의 구현예에 따라서 추가적인 단계들로 분할되거나, 더 적은 단계들로 조합될 수 있다. 또한, 일부 단계는 필요에 따라 생략될 수도 있고, 단계간의 순서가 변경될 수도 있 다. 이상에서 설명한 본 발명의 실시예는 컴퓨터에 의해 실행되는 프로그램 모듈과 같은 컴퓨터에 의해 실행 가능한 명령어를 포함하는 기록 매체의 형태로도 구현될 수 있다. 이러한 기록 매체는 컴퓨터 판독 가능 매체를 포함 하며, 컴퓨터 판독 가능 매체는 컴퓨터에 의해 액세스될 수 있는 임의의 가용 매체일 수 있고, 휘발성 및 비휘 발성 매체, 분리형 및 비분리형 매체를 모두 포함한다. 또한, 컴퓨터 판독가능 매체는 컴퓨터 저장 매체를 포 함하며, 컴퓨터 저장 매체는 컴퓨터 판독가능 명령어, 데이터 구조, 프로그램 모듈 또는 기타 데이터와 같은 정 보의 저장을 위한 임의의 방법 또는 기술로 구현된 휘발성 및 비휘발성, 분리형 및 비분리형 매체를 모두 포함 한다."}
{"patent_id": "10-2021-0134731", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "전술한 본 발명의 설명은 예시를 위한 것이며, 본 발명이 속하는 기술분야의 통상의 지식을 가진 자는 본 발명 의 기술적 사상이나 필수적인 특징을 변경하지 않고서 다른 구체적인 형태로 쉽게 변형이 가능하다는 것을 이해 할 수 있을 것이다. 그러므로 이상에서 기술한 실시예들은 모든 면에서 예시적인 것이며 한정적이 아닌 것으로 이해해야만 한다. 예를 들어, 단일형으로 설명되어 있는 각 구성 요소는 분산되어 실시될 수도 있으며, 마찬가 지로 분산된 것으로 설명되어 있는 구성 요소들도 결합된 형태로 실시될 수 있다. 본 발명의 범위는 상기 상세한 설명보다는 후술하는 특허청구범위에 의하여 나타내어지며, 특허청구범위의 의미 및 범위 그리고 그 균등 개념으로부터 도출되는 모든 변경 또는 변형된 형태가 본 발명의 범위에 포함되는 것으 로 해석되어야 한다."}
{"patent_id": "10-2021-0134731", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 텍스트마이닝을 이용한 가계부 서비스 제공 시스템의 구성을 설명하는 도면 이다. 도 2는 본 발명의 일 실시예에 따른 가계부 관리 서버의 구성을 나타낸 도면이다. 도 3은 본 발명의 일 실시예에 따른 텍스트마이닝을 이용한 가계부 서비스 제공 방법을 설명하는 순서도이다. 도 4는 본 발명의 일 실시예에 따른 영수증 이미지와 가계부 파일을 설명하는 예시도이다. 도 5는 본 발명의 일 실시예에 따른 영수증 이미지의 처리 내역을 설명하는 예시도이다. 도 6은 본 발명의 일 실시예에 따른 가계부 파일의 분석 결과를 설명하는 예시도이다. 도 7은 본 발명의 일 실시예에 따른 텍스트 포맷팅 과정을 설명하는 순서도이다. 도 8은 본 발명의 일 실시예에 따른 텍스트 파싱 과정을 설명하는 순서도이다."}
