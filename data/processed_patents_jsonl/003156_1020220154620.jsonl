{"patent_id": "10-2022-0154620", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0072708", "출원번호": "10-2022-0154620", "발명의 명칭": "자동 계산대 시스템 및 그 제어방법", "출원인": "성균관대학교산학협력단", "발명자": "전재욱"}}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "복수의 프레임 영상을 순차적으로 로딩하는 프레임 로딩기;복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복수의 프레임영상 각각으로부터 적어도 하나의 상품을 검출하는 검출기;상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하는 추적기; 및상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하는 카운팅기를 포함하는 자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,상기 파라미터는,상기 복수의 견본 영상 각각에 포함된 상품의 개수, 상기 견본 영상의 회전각, 상기 견본 영상의 확대 또는 축소 비율, 또는 상기 견본 영상의 감마(Gamma) 조정값 중 적어도 하나를 포함하는자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,상기 학습 영상은,바이너리 마스크가 적용된 상기 복수의 견본 영상 각각의 상기 파라미터를 조작하여 생성되는자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 3 항에 있어서,상기 학습 영상은,상기 바이너리 마스크가 적용된 상기 복수의 견본 영상을 계산대 영상에 배치하되, 상기 복수의 견본 영상 각각의 상품 간 오버랩 정도가 미리 정해진 난잡 수치 범위 내로 배치하여 생성되는자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 1 항에 있어서,손 검출 모델을 이용하여 상기 복수의 프레임 영상 각각으로부터 적어도 하나의 손 영역을 예측하는 손 예측기를 더 포함하는자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 5 항에 있어서,상기 추적기는,공개특허 10-2024-0072708-3-상기 예측된 손 영역을 기초로 상기 검출된 적어도 하나의 상품 중 손에 파지된 상품을 확인하는자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 1 항에 있어서,상기 검출기는,상기 로딩된 복수의 프레임 영상을 입력 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 각각으로부터 상기적어도 하나의 상품을 검출하고,상기 추적기는,상기 검출된 적어도 하나의 상품을 검출 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하고,상기 카운팅기는,상기 추적 결과를 카운팅 큐에 순차적으로 저장하여 상기 검출된 적어도 하나의 상품을 카운팅하는자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 1 항에 있어서,상기 프레임 로딩기는,미리 정해진 배치(Batch) 사이즈에 따라 상기 복수의 프레임 영상을 로딩하는 자동 계산대 시스템."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "복수의 프레임 영상을 순차적으로 로딩하는 단계;복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복수의 프레임영상 각각으로부터 적어도 하나의 상품을 검출하는 단계;상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하는 단계; 및상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하는 단계를 포함하는 자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 9 항에 있어서,상기 파라미터는,상기 복수의 견본 영상 각각에 포함된 상품의 개수, 상기 견본 영상의 회전각, 상기 견본 영상의 확대 또는 축소 비율, 또는 상기 견본 영상의 감마(Gamma) 조정값 중 적어도 하나를 포함하는자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제 9 항에 있어서,상기 학습 영상은,바이너리 마스크가 적용된 상기 복수의 견본 영상 각각의 상기 파라미터를 조작하여 생성되는자동 계산대 시스템의 제어방법.공개특허 10-2024-0072708-4-청구항 12 제 11 항에 있어서,상기 학습 영상은,상기 바이너리 마스크가 적용된 상기 복수의 견본 영상을 계산대 영상에 배치하되, 상기 복수의 견본 영상 각각의 상품 간 오버랩 정도가 미리 정해진 난잡 수치 범위 내로 배치하여 생성되는자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제 9 항에 있어서,손 검출 모델을 이용하여 상기 복수의 프레임 영상 각각으로부터 적어도 하나의 손 영역을 예측하는 단계를 더포함하는자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제 13 항에 있어서,상기 검출된 적어도 하나의 상품을 추적하는 단계는,상기 예측된 손 영역을 기초로 상기 검출된 적어도 하나의 상품 중 손에 파지된 상품을 확인하는자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제 9 항에 있어서,상기 적어도 하나의 상품을 검출하는 단계는,상기 로딩된 복수의 프레임 영상을 입력 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 각각으로부터 상기적어도 하나의 상품을 검출하고,상기 검출된 적어도 하나의 상품을 추적하는 단계는,상기 검출된 적어도 하나의 상품을 검출 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하고,상기 검출된 적어도 하나의 상품을 카운팅하는 단계는,상기 추적 결과를 카운팅 큐에 순차적으로 저장하여 상기 검출된 적어도 하나의 상품을 카운팅하는자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제 9 항에 있어서,상기 복수의 프레임 영상을 순차적으로 로딩하는 단계는,미리 정해진 배치(Batch) 사이즈에 따라 상기 복수의 프레임 영상을 로딩하는 자동 계산대 시스템의 제어방법."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "컴퓨터에 의해 실행되는 컴퓨터 프로그램이 저장되는, 컴퓨터 판독 가능 기록매체에 있어서,복수의 프레임 영상을 순차적으로 로딩하는 단계;복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복수의 프레임공개특허 10-2024-0072708-5-영상 각각으로부터 적어도 하나의 상품을 검출하는 단계;상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하는 단계; 및상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하는 단계를 포함하는 자동 계산대 시스템의 제어방법을 수행하도록 프로그램된 상기 컴퓨터 프로그램이 저장되는컴퓨터 판독 가능 기록매체."}
{"patent_id": "10-2022-0154620", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "컴퓨터 판독가능 기록매체에 저장되어 컴퓨터에 의해 실행되는, 컴퓨터 프로그램에 있어서,복수의 프레임 영상을 순차적으로 로딩하는 단계;복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복수의 프레임영상 각각으로부터 적어도 하나의 상품을 검출하는 단계;상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하는 단계; 및상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하는 단계를 포함하는 자동 계산대 시스템의 제어방법을 수행하도록 프로그램된 컴퓨터 프로그램."}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 자동 계산대 시스템은 복수의 프레임 영상을 순차적으로 로딩하는 프레임 로딩기; 복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복수의 프레임 영상 각각으로부터 적어도 하나의 상품을 검출하는 검출기; 상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하는 추적기; 및 상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하는 카운팅기를 포함한다. 또한, 본 발명의 일 실시예에 따른 방법은 복수의 견본 이미지에서 자동 계산대 시스템 학 습용 영상을 합성해내는 방식을 포함한다."}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 계산대 상의 상품을 자동으로 식별하고 카운팅하는 자동 계산대 시스템 및 그 제어방법에 관한 것이다."}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근 소매업계에서는 인공지능(AI)와 컴퓨터 비전(CV) 기술을 응용한 혁신이 일어났다. 그 중 자동 계산대(ACO, automatic checkout) 기술은 이 분야의 가장 핵심적인 기술로 꼽을 수 있다. 이상적인 자동 계산대 시스템의 경 우, 고객이 자신이 고른 상품들을 계산대에 올려놓으면 시스템은 각각의 상품들을 차질 없이 인식하여 한 번에 정확한 구매 물품 목록을 리턴 할 수 있다. 이러한 자동 계산대 시스템은 객체 오클루젼, 모션 블러, 상품들 간의 유사성, 및 검출 오류나 분류 오류 시 발 생할 코스트 등을 해결하기 위한 방향으로 연구가 이루어지고 있다. 또한, 자동 계산대 시스템 구축을 위해 딥 러닝과 같은 기계 학습을 적용할 경우, 상품 종류 및 분류가 다양하고, 상품 목록이 수시로 갱신되는 특수성이 반영된 학습 영상 데이터 수집이 중요하다. 즉, 자동 계산대 시스템의 개발에 있어 정확도, 안정성, 및 효율성이 고려해야 할 핵심 요소라 할 수 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 한국공개특허공보, 제10-2015-0140359호"}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 해결하고자 하는 과제는, 복수의 견본 영상에 기초한 학습 영상을 학습하여 생성된 검출 모델을 이용 하여 복수의 프레임 영상 내 적어도 하나의 상품을 카운팅하는 자동 계산대 시스템 및 그 제어방법을 제공하는 것이다.다만, 본 발명이 해결하고자 하는 과제는 이상에서 언급한 것으로 제한되지 않으며, 언급되지 않은 또 다른 해 결하고자 하는 과제는 아래의 기재로부터 본 발명이 속하는 통상의 지식을 가진 자에게 명확하게 이해될 수 있 을 것이다."}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 자동 계산대 시스템은 복수의 프레임 영상을 순차적으로 로딩하는 프레임 로딩기; 복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복수의 프레임 영상 각각으로부터 적어도 하나의 상품을 검출하는 검출기; 상기 복수의 프레임 영상 내에서 상기 검출된 적어 도 하나의 상품을 추적하는 추적기; 및 상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하 는 카운팅기를 포함한다. 또한, 상기 파라미터는, 상기 복수의 견본 영상 각각에 포함된 상품의 개수, 상기 견본 영상의 회전각, 상기 견 본 영상의 확대 또는 축소 비율, 또는 상기 견본 영상의 감마(Gamma) 조정값 중 적어도 하나를 포함할 수 있다. 또한, 상기 학습 영상은, 바이너리 마스크가 적용된 상기 복수의 견본 영상 각각의 상기 파라미터를 조작하여 생성될 수 있다. 또한, 상기 학습 영상은, 상기 바이너리 마스크가 적용된 상기 복수의 견본 영상을 계산대 영상에 배치하되, 상 기 복수의 견본 영상 각각의 상품 간 오버랩 정도가 미리 정해진 난잡 수치 범위 내로 배치하여 생성될 수 있다. 또한, 손 검출 모델을 이용하여 상기 복수의 프레임 영상 각각으로부터 적어도 하나의 손 영역을 예측하는 손 예측기를 더 포함할 수 있다. 또한, 상기 추적기는, 상기 예측된 손 영역을 기초로 상기 검출된 적어도 하나의 상품 중 손에 파지된 상품을 확인할 수 있다. 또한, 상기 검출기는, 상기 로딩된 복수의 프레임 영상을 입력 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 각각으로부터 상기 적어도 하나의 상품을 검출하고, 상기 추적기는, 상기 검출된 적어도 하나의 상품을 검 출 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하고, 상 기 카운팅기는, 상기 추적 결과를 카운팅 큐에 순차적으로 저장하여 상기 검출된 적어도 하나의 상품을 카운팅 할 수 있다. 또한, 상기 프레임 로딩기는, 미리 정해진 배치(Batch) 사이즈에 따라 상기 복수의 프레임 영상을 로딩할 수 있 다. 본 발명의 일 실시예에 따른 자동 계산대 시스템의 제어방법은, 복수의 프레임 영상을 순차적으로 로딩하는 단 계; 또한, 복수의 견본 영상의 파라미터가 조작된 학습 영상을 학습하여 생성된 검출 모델을 이용하여 상기 복 수의 프레임 영상 각각으로부터 적어도 하나의 상품을 검출하는 단계; 상기 복수의 프레임 영상 내에서 상기 검 출된 적어도 하나의 상품을 추적하는 단계; 및 상기 추적 결과를 바탕으로 상기 검출된 적어도 하나의 상품을 카운팅하는 단계를 포함한다. 또한, 상기 파라미터는, 상기 복수의 견본 영상 각각에 포함된 상품의 개수, 상기 견본 영상의 회전각, 상기 견 본 영상의 확대 또는 축소 비율, 또는 상기 견본 영상의 감마(Gamma) 조정값 중 적어도 하나를 포함할 수 있다. 또한, 상기 학습 영상은, 바이너리 마스크가 적용된 상기 복수의 견본 영상 각각의 상기 파라미터를 조작하여 생성될 수 있다. 또한, 상기 학습 영상은, 상기 바이너리 마스크가 적용된 상기 복수의 견본 영상을 계산대 영상에 배치하되, 상 기 복수의 견본 영상 각각의 상품 간 오버랩 정도가 미리 정해진 난잡 수치 범위 내로 배치하여 생성될 수 있다. 또한, 손 검출 모델을 이용하여 상기 복수의 프레임 영상 각각으로부터 적어도 하나의 손 영역을 예측하는 단계 를 더 포함할 수 있다. 또한, 상기 검출된 적어도 하나의 상품을 추적하는 단계는, 상기 예측된 손 영역을 기초로 상기 검출된 적어도 하나의 상품 중 손에 파지된 상품을 확인할 수 있다. 또한, 상기 적어도 하나의 상품을 검출하는 단계는, 상기 로딩된 복수의 프레임 영상을 입력 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 각각으로부터 상기 적어도 하나의 상품을 검출하고, 상기 검출된 적어도 하 나의 상품을 추적하는 단계는, 상기 검출된 적어도 하나의 상품을 검출 큐에 순차적으로 저장하여 상기 복수의 프레임 영상 내에서 상기 검출된 적어도 하나의 상품을 추적하고, 상기 검출된 적어도 하나의 상품을 카운팅하 는 단계는, 상기 추적 결과를 카운팅 큐에 순차적으로 저장하여 상기 검출된 적어도 하나의 상품을 카운팅할 수 있다. 또한, 상기 복수의 프레임 영상을 순차적으로 로딩하는 단계는, 미리 정해진 배치(Batch) 사이즈에 따라 상기 복수의 프레임 영상을 로딩할 수 있다."}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 일 실시예에 의하면, 상품의 검출, 추적 및 카운팅의 정확도가 높아질 수 있다. 구체적으로, 자동 계 산대 환경의 특수성을 반영한 학습 영상을 자동으로 생성하여 학습된 검출 모델을 이용함으로써, 자동 계산대 시스템의 성능이 향상될 수 있다. 또한, 전체 시스템을 배치(Batch)화 하고 큐 크기에 맞게 조정함으로써, 자동 계산대 시스템의 처리 속도를 향 상시킬 수 있다."}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 발명은 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있으며, 단지 본 실시예들은 본 발명의 개시가 완전하도록 하고, 본 발명이 속하"}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "는 기술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명 은 청구항의 범주에 의해 정의될 뿐이다. 본 발명의 실시예들을 설명함에 있어서 공지 기능 또는 구성에 대한 구체적인 설명이 본 발명의 요지를 불필요 하게 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명을 생략할 것이다. 그리고 후술되는 용어들은 본 발명의 실시예에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 또한, 본 명세서 및 청구범위에서는 구성요소들 간의 구별을 위하여 '제 1', '제 2' 등과 같이 서수를 포함하는 용어가 사용될 수 있다. 이러한 서수는 동일 또는 유사한 구성 요소들을 서로 구별하기 위하여 사용하는 것이며, 이러한 서수사용으로 인하여 용어의 의미가 한정 해석되어서는 안 될 것이다. 일예로, 이러한 서수와 결합된 구성 요소는 그 숫자에 의해 사용 순서나 배치 순서 등이 제한 해석되어서는 안 된다. 필요에 따라서는, 각 서수들은 서로 교체되어 사용될 수도 있다. 본 명세서에서 단수의 표현은 문맥상 명백하게 다름을 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, '포함하다' 또는 '구성하다' 등의 용어는 명세서 상에 기재된 특징, 숫자, 단계, 동작, 구성 요소, 부품 또는 이들을 조합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구 성 요소, 부품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 또한, 본 발명의 실시 예에서, 어떤 부분이 다른 부분과 연결되어 있다고 할 때, 이는 직접적인 연결뿐 아니라, 다른 매체를 통한 간접적인 연결의 경우도 포함한다. 또한 어떤 부분이 어떤 구성 요소를 포함한다는 의미는, 특별히 반대되는 기재가 없는 한 다른 구성 요소를 제외하는 것이 아니라 다른 구성 요소를 더 포함할 수 있다 는 것을 의미한다. 도 1은 본 발명의 일 실시예 따른 자동 계산대 시스템의 제어 블록도이다. 본 발명의 자동 계산대 시스템은 사용자에 의해 선택된 상품들의 조합으로부터 각각의 상품의 존재를 정확 하게 검출하고, 이를 카운팅하는 검출 시스템을 의미한다. 일반적으로 이러한 검출 시스템은 실제 사용 환경과 동일 또는 유사 환경에서 획득된 영상들에 의해 학습될 수 있다. 자동 계산대의 경우, 학습 영상은 계산대 상에 다양한 조합의 상품들이 놓인 이미지일 수 있다. 그러나, 계산대에서 검출되어야 하는 상품의 종류가 방대하고, 재고 상황이 수시로 업데이트 되기 때문에, 검출 모델에게 가능한 모든 상품의 조합을 학습시키는 것은 현실적으로 어려울 수 있다. 이를 해결하기 위해, 본 발명의 자동 계산대 시스템은 복수의 견본 영상에 기초한 학습 영상을 학습하여 생성된 검출 모델을 이용할 수 있다. 구체적으로, 도 1을 참고하면, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 프레임 로딩기; 검 출기; 추적기; 카운팅기; 및 저장부를 포함할 수 있다. 프레임 로딩기는 복수의 프레임 영상을 순차적으로 로딩할 수 있다. 이 때, 로딩되는 프레임 영상은 계산 대 상에 놓여진 적어도 하나의 상품을 포함하는 영상으로서, 일 실시예에 따른 프레임 영상은 계산대의 상부에 서 계산대 방향으로 놓여진 카메라에 의해 획득된 것일 수 있다. 검출기는 검출 모델을 이용하여 복수의 프레임 영상 각각으로부터 적어도 하나의 상품을 검출할 수 있다. 여기서, 검출 모델이란 복수의 견본 영상의 파라미터를 조작하여 획득된 학습 영상을 학습함으로써 생성될 수 있다. 이러한 검출 모델은 저장부에 미리 저장되었다가 필요에 따라 검출기에 제공되거나, 외부의 장 치, 서버, 또는 클라우드로부터 직접 수신될 수 있다. 추적기는 복수의 프레임 영상 내에서 검출기에 의해 검출된 적어도 하나의 상품을 추적할 수 있고, 카운팅기는 추적 결과를 바탕으로 검출기에 의해 검출된 적어도 하나의 상품을 카운팅할 수 있다. 도 1에는 도시하지 않았으나, 자동 계산대 시스템은 손 검출 모델을 이용하여 복수의 프레임 영상 각각으 로부터 적어도 하나의 손 영역을 예측하는 손 예측기를 더 포함할 수도 있다. 이 경우, 추적기는 예측된 손 영역을 기초로 검출된 적어도 하나의 상품 중 손에 파지된 상품을 확인하고, 손에 파지된 상품에 대한 추적 을 진행할 수도 있다. 도 1의 실시예에 따른 자동 계산대 시스템은 동기화 방식에 따라 실시간으로 복수의 프레임 영상을 로딩하 여 처리할 수 있다. 이와는 달리, 다른 실시예에 따른 자동 계산대 시스템은 비동기화 방식에 따라 미리 정해진 배치(Batch) 사이즈에 따라 복수의 프레임 영상을 로딩하여 각 구성요소의 큐에 저장하였다가 처리할 수 있다. 구체적으로, 프레임 로딩기는 미리 정해진 배치 사이즈에 따라 복수의 프레임 영상을 로딩하고, 검 출기는 로딩된 복수의 프레임 영상을 입력 큐에 순차적으로 저장하였다가 배치 사이즈에 따라 복수의 프레 임 영상 각각으로부터 적어도 하나의 상품을 검출하고, 추적기는 검출된 적어도 하나의 상품을 검출 큐에 순차적으로 저장하였다가 배치 사이즈에 따라 복수의 프레임 영상 내에서 검출된 적어도 하나의 상품을 추적하 고, 카운팅기는 추적 결과를 카운팅 큐에 순차적으로 저장하였다가 배치 사이즈에 따라 검출된 적어도 하 나의 상품을 카운팅할 수 있다. 본 발명의 일 실시예에 따른 자동 계산대 시스템의 적어도 일부 구성은 이러한 기능을 수행하도록 프로그 램된 제어 소프트웨어를 포함하는 메모리와 이러한 소프트웨어를 수행하는 마이크로프로세서를 포함하는 연산 장치에 의해 구현될 수 있다. 이 때, 도 1의 실시예에 따른 자동 계산대 시스템의 구성 각각이 독립적으로 마이크로프로세서에 의해 구현될 수도 있고, 적어도 두개가 하나의 마이크로프로세서에 의해 구현되는 것도 가 능할 수 있다. 예를 들어, 본 발명의 일 실시예에 따른 자동 계산대 시스템 중 프레임 로딩기, 손 예 측기, 추적기, 또는 카운팅기 중 적어도 하나가 CPU에 의해 구현되는 반면, 연산량이 많은 사물 검출 기는 GPU에 의해 구현될 수도 있다.지금까지는 본 발명의 일 실시예에 따른 자동 계산대 시스템의 구성에 대해 설명하였다. 이하에서는 본 발 명의 일 실시예에 따른 자동 계산대 시스템의 제어방법에 대해 설명한다. 도 2는 본 발명의 일 실시예에 따른 자동 계산대 시스템의 제어방법 흐름도이고, 도 3은 도 2의 제어방법에 따 른 자동 계산대 시스템의 동작을 개략적으로 도시한 도면이다. 도 3은 자동 계산대 시스템이 비동기화 방식에 따라 동작하는 경우를 전제로 한다. 도 2를 참고하면, 먼저, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 복수의 프레임 영상을 순차적 으로 로딩할 수 있다(S210). 도 3과 같이, 본 발명의 일 실시예에 따른 자동 계산대 시스템의 프레임 로딩 기는 계산대를 촬영하는 카메라에 의해 획득된 계산대 상의 상품 조합에 대한 복수의 프레임 영상을 순차 적으로 로딩할 수 있다. 이 때, 프레임 로딩기는 카메라의 설정도 함께 불러올 수 있다. 프레임 로딩기가 미리 정해진 배치 사이즈에 따라 복수의 프레임 영상을 로딩할 수 있음은 앞서 설명한 바 와 같다. 비동기화 방식에 따르는 경우, 프레임 로딩기는 배치 사이즈에 따라 로딩한 복수의 프레임 영상 을 입력 큐에 순차적으로 저장할 수 있다. 그 다음, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 검출 모델을 이용하여 복수의 프레임 영상 각 각으로부터 적어도 하나의 상품을 검출할 수 있다(S220). 이에 앞서, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 검출 모델을 직접 생성하여 저장하거나, 외부로부터 수신하여 저장하는 동작을 선행할 수 있다. 이하에서는 도 4 및 5를 참고하여 도 2의 제어방법에 이용되는 검출 모델 생성 방법을 설명한다. 도 4는 본 발명의 일 실시예에 따른 검출 모델 학습에 이용되는 학습 영상 생성 방법을 개략적으로 도시한 도면 이고, 도 5는 도 4의 방법에 따라 생성된 학습 영상을 예시한 도면이다. 앞서 언급한 것처럼, 검출 모델에게 가능한 모든 상품의 조합을 학습시키는 것은 불가능할 수 있다. 따라서, 본 발명의 일 실시에 따른 검출 모델 학습에서는 통제된 환경에서 촬영된 각 상품의 견본 영상(예를 들어, 광고/홍 보용 영상 등)을 수집한 후, 견본 영상을 이용해 학습 영상을 생성할 수 있다. 도 4를 참고하면, 상품의 집합 P={pi}가 주어졌을 때 먼저 개별 견본 영상 집합 S = {(Is, Ms, ys)|ys ∈ P}가 수 집될 수 있다. 여기서 Is는 단일 상품 영상을 의미하고, Ms는 상품에 해당하는 픽셀이 흰색으로 칠해진 바이너리 마스크를 의미하고, ys는 해당 상품의 ID 또는 분류를 나타낼 수 있다. 본 발명의 일 실시예는 단일 상품 견본 영상의 집합 Saic = <116,500 images; 116 ids>으로 2022 년 AI City Challenge 의 Retail Dataset(소매점 관련 데이터셋 부문)을 사용할 수 있다. 이 때, 견본 영상은 각 상품의 3D 스캐닝 결과에 의해 생성될 수 있다. Saic에서 상품 견본 영상을 무작위로 선택한 뒤 계산대 배경 위에 위치, 오클루젼, 난잡 수치, 조명 환경을 무작 위로 설정하여 배치함으로써, 계산대 이미지를 학습 영상으로서 생성할 수 있다. 이렇게 생성된 계산대 이미지 의 집합 G={gi}는 수학식 1과 같이 구성될 수 있다. 수학식 1"}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "여기서, N={(In, Mn, yn)}∈S 이란 무작위로 선택된 n 개의 견본 이미지로 구성된 부분 집합을 의미하고, (a, s, g, c)란 각 In에 적용된 파라미터를 나타낼 수 있다. 이 때, 일 실시예에 따른 파라미터의 값은 표 1에서 지정 된 범위 내에서 무작위적으로 선택될 수 있으나, 이에 한정되지는 않는다.표 1"}
{"patent_id": "10-2022-0154620", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "특히, 학습 영상은 바이너리 마스크가 적용된 복수의 견본 영상 각각의 파라미터를 조작하여 생성될 수 있다. 구체적으로, 견본 영상의 배경을 제거하기 위해, In과 Mn 사이에 \"AND\" 비트 연산을 적용할 수 있다. 그 다음, 각각의 영상 조각에 대하여 파라미터 (a,s,g)의 조작(회전, 확대/축소, 감마(gamma) 조정)을 수행할 수 있다. 견본 영상의 조작 이후, 각각의 영상 조각에 Threshold Invert를 적용함으로써 마스크를 획득할 수 있다. 이렇 게 얻어진 마스크는 배경 영상으로서 획득한 실제 계산대 영상 위에, 바운딩 박스들의 IoU(intersection over union) 값이 난잡 수치 c를 넘지 않도록 무작위적으로 배치될 수 있다. 이를 통해, 학습 영상은 복수의 견본 영 상 각각의 상품 간 오버랩 정도가 미리 정해진 난잡 수치 범위 내로 배치됨으로써 생성될 수 있다. 도 5는 서로 다른 난잡 수치가 적용된 학습 영상을 예시한 도면이다. 가장 왼쪽부터 오른쪽으로 갈수록 난잡 수 치가 상승하며, 난잡 수치가 높을수록 검출 난이도도 높아짐을 의미할 수 있다. 검출 모델은 위의 방법을 통해 생성된 복수의 학습 영상을 학습함으로써 생성될 수 있다. 본 발명의 일 실시예 에 따른 검출 모델은 Scaled YOLOv4 모델을 학습하여 생성될 수 있으나, 이에 한정되는 것은 아니다. 미리 학습된 MS COCO 모델을 세부 조정하기 위해, 본 발명의 일 실시예에 따른 데이터셋은 학습 데이터셋- 검증 데이터셋의 표준 비율인 80% 대 20%의 비율로 나뉘어 사용될 수 있다. 또한, 추가적으로 계산 이미지 생성에 파 라미터 조작이 적용되므로, 결과적으로 학습 영상은 두 번의 편집 과정을 거칠 수 있다. 이를 통해, 검출 모델 에서 오버피팅(overfitting) 현상이 일어나는 것을 방지하고, 다양한 스케일에 적용 가능하도록 학습될 수 있다. 검출 모델은 확률적 경사하강법 Stochastic Gradient Descent, SGD)에 의해 훈련되며, 이 때 검증 데이 터셋에 대해 가장 최적으로 판단된 가중치가 추론용으로 선택될 수 있다. 이렇게 생성된 검출 모델은 자동 계산대 시스템 내부의 저장부에 미리 저장되었다가 필요 시 제공되 거나, 자동 계산대 시스템 외부의 장치, 서버 또는 클라우드로부터 직접 수신될 수도 있다. 다시 도 2를 참고하면, 본 발명의 일 실시예에 따른 자동 계산대 시스템의 검출부는 도 4의 방법에 의해 생성된 검출 모델을 이용하여 복수의 프레임 영상 각각으로부터 적어도 하나의 상품으로서 바운딩 박스를 검출 할 수 있다. 이 때, 검출기도 배치화된 입출력 형식에 대응할 수 있도록 마련될 수 있다. 또한, 배치 사이즈에 따라 검 출된 적어도 하나의 상품은 검출 큐에 순차적으로 저장될 수 있다. 한편, 손에 들린 상품을 인식하기 위해, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 로딩된 프레임 영상 내에서 고객의 손을 지역화 할 수 있다. 구체적으로, 본 발명의 일 실시예에 따른 자동 계산대 시스템 의 손 예측기는 양손 각각으로부터 21 개 점으로 된 지표를 추출하여 생성된 손 검출 모델을 이용할 수 있 다. 도 6은 본 발명의 일 실시예에 따른 손 예측기가 이용하는 손 검출 모델을 예시한 도면이다. 도 6을 참고하면, 손 검출 모델은 여러 인공지능 모델이 함께 작동하는 구조의 MediaPipe 프레임워크를 통해 구 현될 수 있는데, 프레임 영상 전체에 존재하는 손바닥의 바운딩 박스를 찾아내어 출력하는 손바닥 검출용 모델 및 손바닥 검출용 모델에서 찾은 손바닥 존재 영역으로부터 여러 개의 점으로 연결된 고성능 3D 구조를 생성해 내는 손 지표 추출용 모델을 포함할 수 있다. 이러한 손 예측기는 검출기와 병행하여 동작하고, 각각으로부터 획득된 지역화 결과 정보들은 모두 상품의 추적에 사용될 수 있다. 이를 통해, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 손에 파지된 상품과 그렇지 않은 상품을 구분하여 추적할 수 있다. 그 다음, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 복수의 프레임 영상 내에서 검출기에 의 해 검출된 적어도 하나의 상품을 추적할 수 있다(S230). 이를 위해, 먼저 본 발명의 일 실시예에 따른 자동 계 산대 시스템의 추적기는 검출된 상품이 프레임 영상 내 ROI에 진입할 때, 해당 상품에 고유 ID를 부 여할 수 있다. 이 고유 ID는 상품이 카메라의 가시 영역 내에 존재하는 동안 유지되며, 신규로 검출된 상품이 현재 추적 중임을 의미할 수 있다. 이를 통해, 하나의 상품이 중복해서 식별되지 않을 수 있다. 검출에 따라 바운딩 박스들이 입력되면, 검출기는 다중 상품 추적 목적으로 SORT 방식을 사용할 수 있다. 계산대 위에 렌즈가 아래를 향하도록 카메라가 설치되는 경우, SORT 와 같이 단순한 추적 방법을 이용함으로써 메모리 사용 효율과 전체적인 처리 속도를 높일 수 있다. SORT 방식은 움직임 예측에 칼만 필터를 사용하고, 트랙 배정에 헝가리안 알고리즘을 사용할 수 있다. 칼만 필 터는 아직 매칭되지 않은 검출 결과에 대해 추적 상태를 초기화하여 추적 상태를 새로운 타겟으로 바꾸는데 사 용될 수 있고, 매칭된 추적 결과는 현존하는 타겟의 추적 상태를 갱신하기 위해 사용될 수 있다. 이 때, 각 타겟마다의 상태공간(state space) 은 차원 상태 변수 (u, v, s, r, u', v', s')로 정의될 수 있다. 여기서, u와 v는 타겟 중심의 가로 세로 2D 픽셀 좌표를 나타내고, s와 r은 각각 바운딩 박스의 면적과 종횡비 를 나타낼 수 있다. 등속 운동 및 선형 관측 모델에서의 표준 칼만 필터가 트랙 조각 k를 지정 및 타겟 대상으 로 만들 수 있는데, 이 k는 다음 단계에서 카운팅에 사용될 수 있다. 새로운 검출 결과를 기존에 존재하는 타겟 에 배정할 경우, 각 타겟의 바운딩 박스 모양의 추정은 현재 프레임에서의 고유 위치를 예측하는 방식으로 이루 어질 수 있다. 이 후, 할당 코스트 행렬이 계산되는데 이는 실제 검출된 바운딩 박스와 해당 타겟에 대한 모든 바운딩 박스 예측 결과들 사이의 IoU로 결정될 수 있다. 최적의 매칭을 위한 소모 코스트 평가 기준으로 쓰이는 IoU 거리는 칼만 필터와 병행해 사용되는 도중 빠르고 효율적인 성과를 보여주었을 때의 SORT 로부터 획득될 수 있다. 다시 말해, 어떤 검출 Di에 대해서 어떤 트랙 조각 Tj와 매칭됐을 때의 코스트는 IoU를 통해 계산될 수 있 다. 이 때, 헝가리안 알고리즘을 이용해 최적의 솔루션을 얻어낼 수 있다. 이 때, 추적기도 배치화된 입출력 형식에 대응할 수 있도록 마련될 수 있다. 또한, 배치 사이즈에 따른 추 적 결과도 카운팅 큐에 순차적으로 저장될 수 있다. 마지막으로, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 추적 결과를 바탕으로 검출기에 의해 검출된 적어도 하나의 상품을 카운팅할 수 있다(S240). 구체적으로, 본 발명의 일 실시예에 따른 자동 계산대 시스템의 카운팅기는 추적 결과에 따라 상품이 ROI에 등장하는 시점에 상품을 카운팅하고, 추적이 진 행되는 동안은 중복 카운팅하지 않을 수 있다. 비동기 방식의 경우라면, 본 발명의 일 실시예에 따른 자동 계산대 시스템의 카운팅기는 상품의 고유 ID의 최초 확인 여부를 카운팅할 조건을 만족하는 것으로 판단하여 상품을 카운팅하고, 카운팅된 상품의 고유 ID가 후속 카운팅 큐에서 확인될 경우 삭제할 조건을 만족하는 것으로 판단하여 상품 카운팅 없이 해당 큐를 삭 제할 수 있다. 도 7은 본 발명의 일 실시예에 따른 자동 계산대 시스템의 제어방법을 동기화 방식과 비동기화 방식으로 나누어 설명하기 위한 도면이다. 본 발명의 일 실시예에 따른 자동 계산대 시스템이 동기화 방식으로 진행되는 경우, 자동 계산대 시스템 은 카메라에 의해 주기적으로 획득되는 프레임 영상을 실시간으로 로딩하여 상품을 검출/추적/카운팅 할 수 있다. 반면, 본 발명의 일 실시예에 따른 자동 계산대 시스템이 비동기화 방식으로 진행되는 경우, 자동 계산대 시스템은 입력 큐, 검출 큐 및 카운팅 큐를 구비하여 데이터를 큐에 저장하고, 배치 사이즈에 따라 처리할 수 있다. 구체적으로, 비동기 방식에서 추론 속도를 높이기 위해, 본 발명의 일 실시예에 따른 자동 계산대 시스템 은 전체 시스템을 배치화 하고, 큐 크기에 맞게 할 수 있다. 예를 들어, 본 발명의 일 실시예에 따른 자동 계산 대 시스템은 GPU 역량을 최대로 활용하기 위해, 검출기에 들어가는 입력을 배치 사이즈로 축소할 수 있다. 또한, 본 발명의 일 실시예에 따른 자동 계산대 시스템은 각 구성을 서로 독립적인 스레드에서 작업 을 처리하도록 제어하고, 구성 사이의 입력과 출력 대기열을 구비할 수 있다.시간 [t, t+B]에 촬영된 RGB 영상 배치 I={Ii|t≤i≤t+B}가 입력되면(또는, I ∈ RB×C×H×W), 검출기는 결과로서 배치 D={Di|RP×F|t≤i≤t+B}를 출력할 수 있다. 여기서, B는 배치의 크기를 의미하고, Pi는 배치 i에 서의 검출 개수를 의미하고, F는 [x1, y1, x2, y2, cls, conf], 즉 좌측 상단 점의 x, y 좌표 우측 하단의 x, y 좌표, 고유 ID와 신뢰 점수를 의미하는 시각적 특징(feature) 목록을 의미할 수 있다. 각 검출 결과는 각각에 대응되는 시간 단계 색인(프레임 색인)과 통합되므로, 시간 순서에 따라 결과가 출력될 수 있다. 그 결과, 자동 계산대 시스템의 추론 속도가 향상될 수 있다. 이처럼, 본 발명의 일 실시예에 의하면, 상품의 검출, 추적 및 카운팅의 정확도가 높아질 수 있다. 구체적으로, 자동 계산대 환경의 특수성을 반영한 학습 영상을 자동으로 생성하여 학습된 검출 모델을 이용함으로써, 자동 계산대 시스템의 성능이 향상될 수 있다. 또한, 전체 시스템을 배치(Batch)화 하고 큐 크기에 맞게 조정함으로 써, 자동 계산대 시스템의 처리 속도를 향상시킬 수 있다. 한편, 상술한 일 실시예에 따른 자동 계산대 시스템 제어방법에 포함된 각각의 단계는, 이러한 단계를 수행하도 록 프로그램된 컴퓨터 프로그램을 기록하는 컴퓨터 판독가능한 기록매체에서 구현될 수 있다. 또한, 상술한 일 실시예에 따른 자동 계산대 시스템 제어방법에 포함된 각각의 단계는, 이러한 단계를 수행하도 록 프로그램된 컴퓨터 프로그램으로 구현될 수도 있다. 이상의 설명은 본 발명의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 발명이 속하는 기술 분야에 서 통상의 지식을 가진 자라면 본 발명의 본질적인 품질에서 벗어나지 않는 범위에서 다양한 수정 및 변형이 가 능할 것이다. 따라서, 본 발명에 개시된 실시예들은 본 발명의 기술 사상을 한정하기 위한 것이 아니라 설명하 기 위한 것이고, 이러한 실시예에 의하여 본 발명의 기술 사상의 범위가 한정되는 것은 아니다. 본 발명의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 균등한 범위 내에 있는 모든 기술사상은 본 발명의 권 리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2022-0154620", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예 따른 자동 계산대 시스템의 제어 블록도이다. 도 2는 본 발명의 일 실시예에 따른 자동 계산대 시스템의 제어방법 흐름도이다. 도 3은 도 2의 제어방법에 따른 자동 계산대 시스템의 동작을 개략적으로 도시한 도면이다. 도 4는 본 발명의 일 실시예에 따른 검출 모델 학습에 이용되는 학습 영상 생성 방법을 개략적으로 도시한 도면 이다. 도 5는 도 4의 방법에 따라 생성된 학습 영상을 예시한 도면이다. 도 6은 본 발명의 일 실시예에 따른 손 예측기가 이용하는 손 검출 모델을 예시한 도면이다. 도 7은 본 발명의 일 실시예에 따른 자동 계산대 시스템의 제어방법을 동기화 방식과 비동기화 방식으로 나누어 설명하기 위한 도면이다."}
