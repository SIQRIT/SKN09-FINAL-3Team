{"patent_id": "10-2021-0109893", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0027754", "출원번호": "10-2021-0109893", "발명의 명칭": "클라우드 기반 행동 감지 시스템 및 방법", "출원인": "주식회사 케이티", "발명자": "이병진"}}
{"patent_id": "10-2021-0109893", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "모니터링 서버의 동작 방법으로서,신호 감지 단말로부터, Wi-Fi 단말에서 전송된 패킷을 기초로 획득한 채널 상태 정보를 수신하는 단계, 상기 채널 상태 정보를 기초로 부반송파 신호 간에 기준치 이상의 상관관계를 가지는 특징 신호를 추출하고, 특징 신호로부터, 상기 신호 감지 단말이 위치한 공간에서의 움직임 발생에 관계된 행동 추정 구간을 검출하는 단계, 그리고 검출된 상기 행동 추정 구간을, 입력 시퀀스에 대한 행동 이벤트를 출력하도록 학습한 행동 감지 AI 모델에 입력하여, 상기 행동 추정 구간에 해당하는 행동을 추정하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2021-0109893", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에서,상기 채널 상태 정보의 타임스탬프를 기초로 지연되거나 손실된 데이터를 보간하는 단계를 더 포함하는 동작 방법."}
{"patent_id": "10-2021-0109893", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에서,상기 행동 추정 구간을 검출하는 단계는, 하나 이상의 채널에 대한 부반송파 신호에서 특이값 분해를 통해 고유값을 산출하고, 상기 고유값에 기초하여각 부반송파 신호간의 상관관계를 계산하고, 상기 상관관계가 기준치 이상을 가지는 신호들을 상기 특징 신호로검출하는 동작 방법."}
{"patent_id": "10-2021-0109893", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에서,상기 행동 추정 구간을 검출하는 단계는, 상기 특징 신호에 대한 2차 차동 신호를 계산하여 짝수 고주파 성분을 제거하고, 상기 짝수 고주파 성분이 제거된 특징 신호에 대해서 변동성이 최소화된 신호를 생성하는, 동작 방법."}
{"patent_id": "10-2021-0109893", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에서,상기 행동 추정 구간을 검출하는 단계는, 상기 변동성이 최소화된 신호에 임의의 윈도우를 적용하여 해당 윈도우에 대한 구간 평균값을 산출하고, 상기구간 평균값이 제1 임계치가 넘어가면 카운팅을 수행하고, 카운트 값이 제2 임계치가 넘어가면 행동 추정 구간의 시작 지점으로 설정하는 동작 방법."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "모니터링 서버의 동작 방법으로서, Wi-Fi 단말과 매칭된 신호 감지 단말로부터 사용자의 행동에 따라 변하는 채 널 상태 정보를 수신하는 단계, 상기 채널 상태 정보를 기초로 부반송파 신호 간에 기준치 이상의 상관관계를 가 지는 특징 신호를 추출하고, 특징 신호에 기초하여 행동 추정 구간을 검출하는 단계, 그리고 검출된 상기 행동 추정 구간을, 입력 시퀀스에 대한 행동 이벤트를 출력하도록 학습한 행동 감지 AI 모델에 입력하여, 상기 행동 추정 구간에 해당하는 행동을 추정하는 단계를 포함한다."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 행동 감지 기술에 관한 것이다."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "고령화 사회와 더불어 1인 가구의 증가에 따라 개인의 건강과 안전 문제가 대두되고 있어 공간 내에서 사고 발 생이나 위급 상황 발생을 감지하기 위한 다양한 기술이 연구되고 있다. 예를 들어, 스마트 밴드나 스마트 목걸이와 같이 신체에 부착하는 장치를 통해 위급 상황이 발생한 경우 사용자 가 버튼을 누르는 방식으로 외부로 상황을 알리거나 CCTV와 같은 카메라를 집안에 설치하여 영상을 모니터링하 여 위급 상황을 외부로 알리는 기술들이 있다. 다만 이러한 경우에는 장치를 몸에 항상 부착해야 하기 때문에 편의성이 떨어지며, 착용하지 않은 경우에는 모 니터링하기 어렵고, 카메라의 경우에는 항상 집안의 상황이 노출하게 되기 때문에 프라이버시 문제가 발생한다. 그러므로 별도로 장치를 부착하지 않고도 사용자의 행동 중에서 위급 상황에 따른 행동을 감지하면서 프라이버 시 문제를 해결할 수 있는 기술이 요구된다."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시는, 클라우드 기반의 모니터링 서버가 사용자의 움직임에 따라 변경된 채널 상태 정보를 기초로 행동 추 정 구간을 특정하고, 행동 감지 AI 모델을 이용하여 행동 추정 구간에서의 사용자 행동을 추정하고, 추정한 사 용자 행동에 대한 알림을 제공하는 방법에 관한 것이다."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "한 실시예에 따른 모니터링 서버의 동작 방법으로서, 신호 감지 단말로부터, Wi-Fi 단말에서 전송된 패킷을 기 초로 획득한 채널 상태 정보를 수신하는 단계, 상기 채널 상태 정보를 기초로 부반송파 신호 간에 기준치 이상 의 상관관계를 가지는 특징 신호를 추출하고, 특징 신호로부터, 상기 신호 감지 단말이 위치한 공간에서의 움직 임 발생에 관계된 행동 추정 구간을 검출하는 단계, 그리고 검출된 상기 행동 추정 구간을, 입력 시퀀스에 대 한 행동 이벤트를 출력하도록 학습한 행동 감지 AI 모델에 입력하여, 상기 행동 추정 구간에 해당하는 행동을 추정하는 단계를 포함한다. 상기 동작 방법은 상기 채널 상태 정보의 타임스탬프를 기초로 지연되거나 손실된 데이터를 보간하는 단계를 더 포함할 수 있다. 상기 행동 추정 구간을 검출하는 단계는, 하나 이상의 채널에 대한 부반송파 신호에서 특이값 분해를 통해 고유 값을 산출하고, 상기 고유값에 기초하여 각 부반송파 신호간의 상관관계를 계산하고, 상기 상관관계가 기준치 이상을 가지는 신호들을 상기 특징 신호로 검출할 수 있다. 상기 행동 추정 구간을 검출하는 단계는, 상기 특징 신호에 대한 2차 차동 신호를 계산하여 짝수 고주파 성분을 제거하고, 상기 짝수 고주파 성분이 제거된 특징 신호에 대해서 변동성이 최소화된 신호를 생성할 수 있다. 상기 행동 추정 구간을 검출하는 단계는, 상기 변동성이 최소화된 신호에 임의의 윈도우를 적용하여 해당 윈도 우에 대한 구간 평균값을 산출하고, 상기 구간 평균값이 제1 임계치가 넘어가면 카운팅을 수행하고, 카운트 값 이 제2 임계치가 넘어가면 행동 추정 구간의 시작 지점으로 설정할 수 있다."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시예에 따르면, Wi-Fi 채널 중에 일부 채널을 수신하더라도 정확한 부반송파를 추출하여 행동 추정 구간을 검출함으로써, 사용자의 행동을 정확하게 감지할 수 있다. 본 발명의 실시예에 따르면, 낙상이나 혼절 등과 같은 응급 상황이 발생한 경우, 자동으로 사용자의 행동을 판 단하여 관련 기관 또는 외부 단말로 알림을 제공함으로써 응급 상황을 빠르게 인식하고 그에 따른 신속한 대처 방안을 제공할 수 있다."}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참고로 하여 본 개시의 실시예에 대하여 본 개시가 속하는 기술 분야에서 통상의 지 식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나 본 개시는 여러 가지 상이한 형태로 구현 될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 개시를 명확하게 설명하기 위 해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였다. 명세서에서, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구 성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 네트워크를 구성하는 장치 들은 하드웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 또한, 명세서에 기재된 \"……부\", \"……기\", \"……모듈\" 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 어플리케이션은 컴퓨터 판독 가능한 저장 매체에 저장되는 소프트웨어로서, 본 발명의 동작을 실행하는 명령어 들(instructions) 및 데이터를 포함한다. 어플리케이션은 단말에 설치되고, 단말에서 실행되며, 통신망을 통해 지정된 서버와 통신한다. 단말은 프로세서, 메모리, 디스플레이, 통신 모듈 등의 하드웨어를 포함하는 컴퓨팅 장치이다. 프로세서는 하드 웨어들과 협력하여 어플리케이션을 구동한다. 디스플레이는 어플리케이션에서 제공하는 사용자 인터페이스 화면 을 표시하고, 사용자 입력(예를 들면 터치 입력)을 수신할 수 있다. 단말은 터치 입력 이외에 키보드를 사용자 입력을 수신할 수 있다. 통신 모듈은 통신망에 연결된다. 통신망을 통해 어플리케이션과 서버는 데이터를 송수 신한다. 단말은 다양한 형태로 구현될 수 있고, 모바일 단말을 예로 들어 설명하나, 스마트패드와 같은 패드형 단말, 랩 탑 컴퓨터 등 각종 형태의 컴퓨터, 웨어러블 디바이스, TV 단말 등의 형태로 구현될 수 있다. 본 명세서에서 \"전송 또는 제공\"은 직접적인 전송 또는 제공하는 것뿐만 아니라 다른 장치를 통해 또는 우회 경 로를 이용하여 간접적으로 전송 또는 제공도 포함할 수 있다. 본 명세서에서 단수로 기재된 표현은 \"하나\" 또는 \"단일\" 등의 명시적인 표현을 사용하지 않은 이상, 단수 또는 복수로 해석될 수 있다. 본 명세서에서, 제1, 제2 등과 같이 서수를 포함하는 용어들은 다양한 구성요소들을 설명하는데 사용될 수 있지 만, 상기 구성요소들은 상기 용어들에 의해 한정되지는 않는다. 상기 용어들은 하나의 구성요소를 다른 구성요 소로부터 구별하는 목적으로만 사용된다. 예를 들어, 본 개시의 권리 범위를 벗어나지 않으면서 제1 구성요소는 제2 구성요소로 명명될 수 있고, 유사하게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 본 명세서에서 도면을 참고하여 설명한 흐름도에서, 동작 순서는 변경될 수 있고, 여러 동작들이 병합되거나, 어느 동작이 분할될 수 있고, 특정 동작은 수행되지 않을 수 있다. 도 1은 한 실시예에 따른 행동 감지 시스템을 나타낸 예시도이다. 도 1에 도시한 바와 같이, 행동 감지 시스템은 Wi-Fi 단말, 신호 감지 단말 그리고 모니터링 서버 를 포함하며, 상황에 따라 외부 단말을 더 포함할 수 있다. Wi-Fi 단말, 신호 감지 단말과 모니터링 서버는 네트워크에 연결되어 서로 데이터를 송수신하며, 모니터링 서버는 클라우드 서버로 구현될 수 있다. 여기서, 네트워크는 유선 네트워크, 근거 리 또는 원거리 무선 통신 네트워크, 이들이 혼합된 네트워크 등 데이터를 전달하는 모든 형태의 통신 네트워크를 포함할 수 있다. Wi-Fi 단말은 미리 설정된 주기 마다 패킷을 전송하거나 신호 감지 단말로부터 패킷 전송 요청을 받 으면 해당 패킷을 전송할 수 있다. 실내에 하나 이상의 Wi-Fi 단말이 설치될 수 있으며, 다수 개의 Wi-Fi 단말이 설치된 경우, 고유 ID 를 포함하여 패킷을 전송할 수 있다. 여기서, 패킷은 Wi-Fi 단말에서 전송하는 Wi-Fi 전파 신호를 나타내 며, Wi-Fi 단말은 초당 10~1000개의 정보의 패킷을 전송할 수 있다. 일반 실내 환경에서 전파 신호는 하나의 LOS(Line-Of-Sight)와 하나 이상의NLOS(Non-Line-Of-Sight)를 통해 전 파되면서 둘 이상의 경로를 가진다. NLOS(Non-Line-Of-Sight)는 벽과 바닥, 장식장 등과 같은 장애물로부터 반 사되거나 굴절되어 하나 이상의 경로를 가질 수 있다. 이와 같은 다 경로 전파 현상에 기초하여 사용자의 움직 임에 따라 새로운 전파 경로가 생성되며, 신호 감지 단말은 기존의 전파 경로와는 상이한 전파 경로를 감 지할 수 있다. 여기서, 다중 경로에 대한 흐름은 모두 채널 상태 정보 (Channel State Information, CSI)에 담 기게 되며, 역으로 사람의 움직임에 대한 패턴을 파악하는 데 사용될 수 있다. 신호 감지 단말은 Wi-Fi 단말로부터 수신한 패킷에서 채널 상태 정보(CSI)를 추출하여 모니터링 서버 에 전달할 수 있다. 채널 상태 정보는 공간 내에서 사람이 있을 때와 없을 때 상이하게 변동되고, 또한, 일어나기, 눕기, 앉기, 걷 기, 달리기, 낙상 등의 서로 다른 형태의 움직임마다 채널 상태 정보가 변동된다. 이러한 특징을 이용하여, 모 니터링 서버는 신호 감지 단말로부터 전송된 채널 상태 정보에 포함된 특징으로부터 사용자의 행동을 감지할 수 있다. 이를 위해, 모니터링 서버는 채널 상태 정보를 기초로 부반송파 신호 간에 기준치 이상의 상관관계를 가지는 특징 신호를 추출하고, 특징 신호로부터, Wi-Fi 단말과 신호 감지 단말이 위치한 공간에서의 움직임 발생에 관계된 행동 추정 구간을 검출할 수 있다. 그리고, 모니터링 서버는 입력 시퀀 스에 대한 행동 이벤트를 출력하도록 행동 감지 AI 모델을 학습시키고, 학습된 행동 감지 AI 모델을 이용하여 행동 추정 구간에 대한 사용자의 행동을 추정할 수 있다. 모니터링 서버는 수신한 채널 상태 정보(CSI)를 분석하여 사용자 행동을 감지하고, 감지된 사용자 행동이 특정 이벤트에 해당되는 경우, 연동되는 외부 단말로 알림 메시지를 전송할 수 있다. 예를 들어, 모니터링 서버는 감지된 사용자 행동이 낙상과 같은 특정 이벤트에 해당되는 경우, 이벤트 처 리 작업으로 연동되는 외부 단말, 외부 기관 단말 등으로 즉시 알림 메시지를 제공할 수 있다. 도 2는 한 실시예에 따른 신호 감지 단말과 모니터링 서버를 나타낸 구성도이다. 도 2에 도시한 바와 같이, 신호 감지 단말은 Wi-Fi 단말과 송수신하는 패킷 송수신 모듈과 수신 한 패킷으로부터 채널 상태 정보(CSI)를 모니터링 서버로 전송하는 CSI 전송 모듈을 포함한다. 패킷 송수신 모듈은 특정 Wi-Fi 단말로부터 데이터를 받기 위해 Wi-Fi 단말의 MAC주소 설정, 연 결 설정, 안테나 설정, Wi-Fi 채널과 대역폭 설정 등 파라미터를 설정할 수 있다. 패킷 송수신 모듈은 파라미터를 설정한 후 연결된 Wi-Fi 단말로 패킷 전송을 요청하고, Wi-Fi 단말 로부터 패킷을 수신할 수 있다. 예를 들어, 패킷 송수신 모듈은 UDP(User Datagram Protocol)로 Wi-Fi 단말로 패킷 전송을 요청할 수 있으며, 패킷을 수신한다. CSI 전송 모듈은 수신한 패킷에서 추출한 채널 상태 정보(CSI)를 진폭 데이터(amplitude data), 위상 데이 터(phase data), 그리고 타임스탬프(timestamp) 형태로 구성된 데이터 포맷으로 변환한다. 그리고 CSI 전송 모듈은 변환한 데이터를 TCP(Transmission Control Protocol) 형태로 모니터링 서버 로 전송할 수 있다. 상세하게는 TCP 형태의 전송 규격은 다음 표 1과 같이 Magic, Type, Size, Data로 구성되며, 여기서 Magic은 8byte의 int64형태로 구성되며, Magic 값을 비교하여 패킷이 깨졌는지 확인하고, 패킷이 깨졌을 경우 패킷을 interpolation 할 수 있는 point로 활용될 수 있다. 표 1 전송 규격 Magic Type Size Data 8bytes 4bytes 4bytes Some bytes EX: CSI Raw Data0x1122334455667788 1 N*sizeof(byte) N of byte data array EX: Event Data 0x1122334455667788 2 sizeof(int)1 integer Result data 여기서, Type은 4byte의 int형태이며, 1인 경우는 채널 상태 정보 원 데이터(CSI Raw Data)를 의미하고, 2인 경 우는 행동 감지 결과(Event Data)를 전달할 때로 구분될 수 있다. 그리고 Size는 4byte의 int형태로 data의 크기를 나타내며, Data는 Char 형태로 표현될 수 있다. Type이 1인 경우 Data는 진폭 데이터(amplitude data), 위상 데이터(phase data), 그리고 타임스탬프(timestamp)를 포함할 수 있다. Type이 2인 경우 Data는 지정된 사용자 행동 감지 결과에 대응하는 하나의 정수(1 integer)로 표현될 수 있다. 모니터링 서버는 전처리 모듈, 구간 검출 모듈, 구간 분석 모듈 그리고 UI 모듈를 포 함한다. 설명을 위해 전처리 모듈, 구간 검출 모듈, 구간 분석 모듈 그리고 UI 모듈로 명명하여 부 르나, 이들은 적어도 하나의 프로세서에 의해 동작할 수 있다. 여기서, 전처리 모듈, 구간 검출 모듈 , 구간 분석 모듈 그리고 UI 모듈은 별도의 컴퓨팅 장치에 분산되어 구현될 수 있으며, 분산 구 현되는 경우에는 통신 인터페이스를 통해 서로 통신할 수 있다. 전처리 모듈은 신호 감지 단말로부터 수신한 데이터에서 채널 상태 정보(CSI)와 시간 정보 (timestamp)를 추출한다. 그리고 전처리 모듈은 채널 상태 정보(CSI)가 기준 프레임(ex: 100ms)마다 한 세트를 가지는 지 확인하여 전송 지연과 같은 데이터 전송 속도 변화, 또는 패킷 손실 등을 확인할 수 있다. 이때, 전처리 모듈은 전 송 지연 또는 패킷 손실을 확인하면, 보정함수를 생성하여 데이터를 재구성할 수 있다. 전처리 모듈은 재구성한 데이터 또는 수신한 채널 상태 정보 원 데이터에서 사용자의 행동이 감지된 구간 만을 추출한다. 전처리 모듈은 부반송파(subcarrier) 신호에서 특이값 분해(Singular Value Decomposition, SVD)를 적용 하여 고유값을 산출하고, 각 부반송파 신호간에 상관관계(correlation)를 계산하여 상관관계가 기준치 이상을 가지는 신호들을 특징 신호로 검출한다. 그리고 전처리 모듈은 검출된 특징 신호에 대해 노이즈에 대한 필터를 적용하여 노이즈를 제거할 수 있다. 구간 검출 모듈은 노이즈가 제거된 특징 신호에 대해서 실제 사람의 움직임이 발생한 구간(행동 추정 구간, HAD)을 검출한다. 상세하게는, 구간 검출 모듈은 Wi-Fi 신호의 왜곡을 개선하기 위해서 특징 신호를 2차 차동 신호로 계산하 여 출력 위상이 같은 짝수 고주파(even-order harmonics) 성분을 제거한다. 이를 통해 회로의 선형성 (linearity)을 개선시켜주어 비선형성에 의한 노이즈(noise)를 줄여줄 수 있다. 구간 검출 모듈은 1차 CSI의 차동신호값을 계산한 후에 절대값을 취해 신호의 에너지 값을 계산함으로써 불안정한 신호(jitter)가 높게 나타나는 사용자의 움직임 특징을 감지할 수 있으며, 사용자 위치에 따라 시간축 파형의 DC Offset이 달라지는 특징을 감쇄할 수 있는 장점이 있다. 그리고 구간 검출 모듈은 계산된 특징 신호들의 subcarrier bin의 평균을 계산해서 하나의 신호를 생성한 다. 또한, 구간 검출 모듈은 2차 차동 신호값을 계산하여 신호의 변동성을 줄인 에너지를 계산한다. 이를 통해서, Burst 성격의 노이즈 감쇄와 DC offset의 영향을 추가로 줄일 수 있으며, 최종적으로 움직임이 있는 신 호만 구분이 가능하여 상태의 변동을 관측할 수 있다. 그리고 구간 검출 모듈은 정해진 임의의 window를 적용해서 해당 구간의 평균값을 계산 후, 제1 임계치 (threshold_1)를 넘어가는 구간을 1로 판단한다. 구간 검출 모듈은 실시간 처리로 데이터가 누적되면서, 제1 임계치가 넘어가는 신호를 카운트하는 과정에 서, 카운트 값이 제2 임계치(threshold_2)가 넘어가게 되면 움직임이 검출되었다고 최종 판단할 수 있다. 다시 말해 제1 임계치는 신호값의 기준값을 나타내고, 제2 임계치는 카운트값의 기준값을 나타낸다. 구간 분석 모듈은 행동 추정 구간(HAD)을 학습이 완료된 행동 감지 AI 모델에 입력하여 사용자의 행동을 감지할 수 있다. 상세하게는, 행동 감지 AI 모델은 2D-CNN 신경망 구조를 가지며 Convolution layers, Subsampling layers, Fully connected layer의 3종류의 계층을 가진다. Convolution layers는 2D 이미지를 3x33 혹은 그 이상 크기 의 컨볼루션 필터와 활성함수를 통해 데이터 행렬을 더 작은 행렬로 나누고 특징맵을 추출한다. Subsampling layers는 컨볼루션 특징맵을 더욱 단순하고 특징적으로 만들기 위해 필터를 거쳐 값들의 평균이나 최대값으로 특징맵을 추출한다. Fully connected(FC) layer는 추출된 특징 값을 다차원 벡터 공간에 올려 행렬연산을 통해 최종적으로 입력을 분류한다. 예를 들어, 설계된 네트워크는 convolution - pooling - convolution - pooling - convolution - convolution - FC - FC 로 설계하였으며 각 데이터의 행렬(matrix)이 입력으로 들어 간다. 행동 감지 AI 모델의 입력 X0는 [window*subcarriers]의 행렬로 이루어진 시퀀스 데이터를 나타내고, 출력 Y0는 행동 이벤트(일어나기, 눕기, 앉기, 걷기, 달리기, 낙상)를 의미하는 벡터 값(vector)을 나타낼 수 있다. 벡터 값은 각 이벤트에 대한 확률값으로 구성될 수 있다. 구간 분석 모듈은 학습된 행동 감지 AI 모델을 이용하여, 각 행동 추정 구간(HAD)마다 추정되는 행동 이벤 트를 출력할 수 있다. 앞서 설명한 바와 같이, 학습된 행동 감지 AI 모델은 사용자의 행동 이벤트와 시퀀스가 매칭된 학습 데이터를 통해 학습이 완료된 인공지능 모델로서 예를 들면, 2D-CNN 모델로 구현될 수 있지만, 반드시 이에 한정하는 것 은 아니다. 다시 말해, 각 입력에 대한 출력값 Y는 k개의 이벤트에 대해 각 확률값으로 나오게 된다. 이벤트가 6 가지로 분 류된다고 가정하면, ([일어나기, 눕기, 앉기, 걷기, 달리기, 낙상])의 6개 이벤트에 대해서 합이 1을 만족하는 확률로 출력된다. 예를 들어 출력값이 [0.95, 0.01, 0.01, 0.01, 0.01, 0.01]로 나오게 되며, 이러한 시퀀스마 다의 출력값을 다 더한 뒤에 argmax를 취하면 6개의 이벤트 중 가장 높은 확률값을 가지는 최종 이벤트가 선택 되고 이벤트 데이터로 [1,0,0,0,0,0]과 같이 도출될 수 있다. 그리고 UI 모듈은 전처리 모듈, 구간 검출 모듈 그리고 구간 분석 모듈에서 도출되는 데이 터들을 시각화하여 제공할 수 있다. 다시 말해, 전처리 모듈, 구간 검출 모듈 그리고 구간 분석 모듈에서 도출되는 데이터들은 UI 모듈을 통해 외부 단말의 디스플레이에 표시된다. 디스플레이에는 모니터링 파라미터 설정할 수 있는 영역, 인식한 사람 행동을 출력해서 보여줄 수 있는 영 역, 위급시 알림을 나타낼 영역, 실시간 CSI 그래프 데이터를 출력할 영역 등으로 구분되어 각 영역에 이미지, 그래프, 표 등으로 데이터를 표시할 수 있다. 도 3은 한 실시예에 따른 행동 감지 모니터링 방법을 나타낸 순서도이다. 도 3에 도시한 바와 같이, 모니터링 서버는 수신한 데이터에서 타임스탬프와 CSI데이터를 추출한다(S110). 그리고 모니터링 서버는 데이터 지연 또는 손실을 확인한다(S120). 모니터링 서버는 지정된 타임스탬 프 길이에 기초하여 리스트를 생성하고 생성한 리스트와 수신한 데이터를 비교하여 데이터 지연 또는 데이터 손 실을 확인할 수 있다. 모니터링 서버는 데이터 지연 또는 손실이 확인되면, 지연 또는 손실 지점의 데이터를 재구성한다(S130). 모니터링 서버는 원본 데이터와 타임 리스트가 매칭되는 지점을 포인트 지점으로 선정하고, 포인트 지점을 기준으로 채널 정보 간의 직선 거리에 따라 선형적으로 결정한다. 예를 들어 원본 데이터가 매칭되어 있는 지점 (포인트 지점) xe,1, xe,2에서의 데이터 값이 각각 f(xe,1), f(xe,2)일 때, xe,1, xe,2 사이의 비어있는 지점 xn(xe,1<xn<xe,2)에서의 데이터 값 f(x)는 다음 수학식 1과 같이 계산된다.수학식 1"}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "여기서, tn,1은 xn에서 xe,1까지의 시간차를 나타내며, tn,2는 xn에서 xe,2까지의 시간 차이를 나타낸다. 모니터링 서버는 부반송파 신호 간에 상관관계가 높은 특징 신호를 추출하고, 특징 신호에 기초하여 행동 추정 구간을 검출한다(S140). 모니터링 서버는 각 부반송파 신호 간에 상관관계가 높은 특징 신호를 추출 하기 위해 다음 수학식 2와 같이 단위시간 t에 대한 부반송파 행렬 A를 나타낼 수 있다. 수학식 2"}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "여기서, m은 subcarrier index이며, n은 time index이며, U와 V는 직교행렬(Orthogonal Matrix)이고, 는 대각행렬(Rectangular Diagonal Matrix)이다. 이 행렬의 주 대각선의 원소 중 영이 아닌 것의 개수를 r이라고 하면 r <= min(m,n)이다. 행렬 U의 r번째 까지 는 고유값을 가지며, r+1번째부터 m번째 행은 행렬 A의 영공간(Null Space)이다. 이때, 실시간 처리를 위해 계 산량을 고려하여 1번째 및 2번째까지의 고유값을 이용하며, 이는 사용 환경에 따라 늘리거나 줄일 수 있다. 모니터링 서버는 선택한 고유값과 각 부반송파 벡터간에 상관관계를 계산하여 일정 임계치 이상을 넘는 신 호를 특징 신호로 선택한다. 모니터링 서버는 다음 수학식 3과 수학식 4를 통해 특징 신호에 기초하여 2차 차동 신호로 계산하여 고주 파 성분을 제거하고 신호의 변동성을 줄일 수 있다. 수학식 3"}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "수학식 4"}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "모니터링 서버는 상황에 맞게 설정된 일정 범위(M)값에 기초하여 수학식 3과 수학식 4를 통해 노이즈를 제 거하여 특징 신호만을 검출하기 용이하도록 평균값들의 차이 값(G(xn))을 산출한다. 상세하게는 모니터링 서버는 수학식 3과 같이, 현재의 신호값에서 이전의 신호값을 제외하면 신호가 지니 고 있던 Offset 값이 일정 부분 제거되어 노이즈 신호값이 0에 가까워진다. 그리고 모니터링 서버는 현재 신호 값에서 이전의 신호값을 제외하여 얻는 델타값(Delta)을 이용하여 일정 범위에서 평균값 (F(xn,m))을 구하 게 된다. 이를 통해 신호가 짧은 구간에서 미세하게 변화하는 노이즈와 비교적 긴 시간에 크게 변화하는 이벤트 신호를 구별하기 용이하다. 그리고 모니터링 서버는 특징 신호에 기초하여 수학식 3, 수학식 4와 같이 신호의 변동성을 줄인 신호에 수학식 5와 같이, 제1 임계치가 큰 신호(D(xn))를 감지한다. 모니터링 서버는 수학식 6과 같이, 제1 임계치보다 큰 신호(D)를 카운트하고, 신호(D)의 카운트 값이 제2 임계치보다 같거나 크면 행동 감지 영역 시작점으로 설정할 수 있다. 수학식 5"}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 6, "content": "수학식 6"}
{"patent_id": "10-2021-0109893", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 7, "content": "여기서, th1은 제1 임계치, th2는 제2 임계치를 나타낸다. 이러한 과정을 반복하면, 모니터링 서버는 제1 임계치보다 큰 신호 영역에 기초하여 행동 추정 구간을 추 출할 수 있다. 다음으로 모니터링 서버는 검출된 구간을 분석하여 사용자 행동을 감지한다(S150). 모니터링 서버는 검출된 구간을 행동 감지 AI 모델에 입력하여 사람 행동 별 확률값을 획득하면, 해당 결 과에서 가장 큰 확률값을 가지는 행동을 사람의 행동으로 추정할 수 있다. 모니터링 서버는 감지된 사용자 행동에 기초하여 알림 메시지를 전송한다(S160). 모니터링 서버는 추 정된 행동이 이벤트로 등록된 행동에 해당되면 연동된 외부 단말로 알림 메시지를 전송할 수 있다. 도 4는 한 실시예에 따른 지연 또는 손실에 대응하는 데이터를 재구성하는 방법을 설명하기 위한 예시도이다. 도 4의 (a)는 전송 지연과 같은 데이터 전송 속도 변화, 패킷 손실 등의 요인으로 변동이 발생한 상황을 나타내 고, (b)는 지연 또는 손실에 대응하여 데이터를 재구성하는 방법을 나타낸다. 앞서 설명한 표 1에서와 같이, 모니터링 서버는 Magic 값을 비교하여 깨지거나 손실된 패킷을 제거하고 그 전, 후 Magic 값을 보간(interpolation)할 수 있는 지점(point)으로 잡고 해당 지점의 데이터에서 추출한 CSI 및 타임스탬프로 보정함수를 생성할 수 있다. 먼저, 모니터링 서버는 원본 Timestamp 길이 이상이면서, 순차적으로 시간 증가하는 새로운 timestamp 리 스트(tmp_list)를 생성한다. 그리고 모니터링 서버는 원본 Timestamp의 첫번째와 끝시간을 tmp_list의 첫 번째, 마지막 시간으로 설정하고 나머지 원본 timestamp 값을 tmp_list의 각 timestamp에 매칭한다. 이 때, 모 니터링 서버는 timestamp 값이 tmp_list의 구간에 정확하게 일치하지 않는다면, timestamp값과 tmp_list 의 구간사이에 유클리드 거리를 계산하여 가장 낮은 값을 갖는 구간에 매칭한다. 모니터링 서버는 Timestamp 값을 미리 지정해두어 비어있는 지점을 미리 알고 있기 때문에 손실된 패킷 사 이 값은 원본 데이터가 매칭되어 있는 지점과 그 사이 비어있는 공간을 직선 거리에 따라 선형적으로 결정할 수 있다. 이에 따라 앞서 설명한 수학식 1을 이용하여 모니터링 서버는 비어 있는 지점에서의 데이터 값을 산 출하여 보간할 수 있다. 도 5는 한 실시예에 따른 행동 추정 구간(HAD) 영역을 추출하는 방법을 설명하기 위한 예시도이고, 도 6은 실시 예에 따른 특징 신호 추출을 설명하는 예시 도면이다. 도 5를 참고하면, 모니터링 서버는 부반송파(subcarrier) 신호에서 특이값 분해(Singular Value Decomposition, SVD)를 적용하여 고유값을 산출하고, 각 부반송파 신호간에 상관관계를 계산하여 상관관계가 기 준치 이상을 가지는 CSI 신호들을 특징 신호로 검출한다(Extract Feature). 도 6과 같이, 전체 부반송파에서 특 징 신호가 선택될 수 있다. 일부 채널의 부반송파에서 특징 신호를 추출할 수 있다. 예를 들어 4개의 Wi-Fi채널중에서 하나의 채널에 대한 부반송파를 수신하더라도 특징 신호를 정확하게 추출할 수 있다. 모니터링 서버는 수학식 3과 수학식 4를 이용하여 특징 신호에 대해 2차 차동 신호(2nd order differential signal)를 계산한다. 이를 통해, 신호 변동성을 줄일 수 있다. 모니터링 서버는 수학식 5를 이용하여, 시간 윈도우에서 제1 임계치 이상의 신호를 카운트하다가, 카운트 값이 제2 임계치를 넘어가는 지점을 행동 추정 구간(HAD)의 시작 지점으로 추정하고, 신호 값이 제1 임계치보다 낮아지면 행동 추정 구간(HAD)의 끝 지점으로 추정할 수 있다. 본 발명에 따르면, Wi-Fi 채널 중에 일부 채널을 수신하더라도 정확한 부반송파를 추출하여 행동 추정 구간을 검출함으로써, 사용자의 행동을 정확하게 감지할 수 있다 또한, 낙상이나 혼절 등과 같은 응급 상황이 발생한 경우, 자동으로 사용자의 행동을 판단하여 관련 기관 또는 외부 단말로 알림을 제공함으로써 응급 상황을 빠르게 인식하고 그에 따른 신속한 대처 방안을 제공할 수 있다. 이상에서 설명한 본 개시의 실시예는 장치 및 방법을 통해서만 구현이 되는 것은 아니며, 본 개시의 실시예의 구성에 대응하는 기능을 실현하는 프로그램 또는 그 프로그램이 기록된 기록 매체를 통해 구현될 수도 있다. 이상에서 본 개시의 실시예에 대하여 상세하게 설명하였지만 본 개시의 권리범위는 이에 한정되는 것은 아니고 다음의 청구범위에서 정의하고 있는 본 개시의 기본 개념을 이용한 당업자의 여러 변형 및 개량 형태 또한 본 개시의 권리범위에 속하는 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6"}
{"patent_id": "10-2021-0109893", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 한 실시예에 따른 행동 감지 시스템을 나타낸 예시도이다. 도 2는 한 실시예에 따른 신호 감지 단말과 모니터링 서버를 나타낸 구성도이다. 도 3은 한 실시예에 따른 행동 감지 모니터링 방법을 나타낸 순서도이다. 도 4는 한 실시예에 따른 지연 또는 손실에 대응하는 데이터를 재구성하는 방법을 설명하기 위한 예시도이다. 도 5는 한 실시예에 따른 행동 추정 구간(HAD) 구간을 추출하는 방법을 설명하기 위한 예시도이다. 도 6은 실시예에 따른 특징 신호 추출을 설명하는 예시 도면이다."}
