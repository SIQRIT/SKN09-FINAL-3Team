{"patent_id": "10-2022-0140554", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0059370", "출원번호": "10-2022-0140554", "발명의 명칭": "의료기관 간의 연합 학습 시스템 및 방법, 이를 포함하는 질환 예후 예측시스템", "출원인": "국립암센터", "발명자": "박현우"}}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "의료기관에 구비된 복수의 로컬 서버; 및 상기 로컬 서버들과 통신하는 글로벌 서버를 포함하며, 상기 로컬 서버는, 다른 로컬 서버의 가중치를 이용하여 자신의 기계학습모델을 갱신시키는 가중치 갱신부를 포함하고, 상기 가중치 갱신부는 의료 기관별로 수집한 의료 데이터의 독립항등분포(Independent identicallydistributed) 또는 비독립항등분포(non-independent identically distributed )에 따라 가중치를 상이하게 적용하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,상기 가중치 갱신부는, 수집된 의료 데이터가 비독립항등분포의 특성을 따르면 계층적 군집화 방법으로 가중치를 갱신하고, 상기 계층적 군집화 방법은, 로컬 서버간의 유사성을 제1 수식 으로 계산하여 데이터 분포가비슷한 로컬 가중치끼리 군집하고, 다른 군집 간의 유사성을 제2 수식 으로 계산하여 비슷한군집끼리 병합 군집한 후, 제3 수식 을 이용하여 군집내의 가중치를 갱신하는, 의료기관 간의연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,상기 가중치 갱신부는, 수집된 의료 데이터가 독립항등분포의 특성을 따르면 각 로컬 서버에서 학습된 기계학습모델의 가중치는을 이용하여 갱신하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 1 항에 있어서,상기 비독립항등분포는, 각 의료기관 별로 동일한 데이터 변수에서 균등한 분포를 따르지 않거나, 예측 대상 질환의 정상과 질환 대상자군의 분포 차이가 각 의료 기관별 분포 차이를 확인하여 균등한 분포를 따르지 않거나, 조건부 확률에 따라 질환(y)별 나이(x)의 분포 또는 나이(x)별 질환(y) 분포가 의료 기관별로 균등한 분포를 따르지 않거나, 의료 기관별로 수집되는 데이터의 양 크기에서 동일하지 않은 분포 특성이 있는 경우를 포함하는, 의료기관 간의 연합학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 1 항에 있어서,공개특허 10-2024-0059370-3-상기 로컬 서버는, 양자 암호키와 타임 스탬프 코드를 이용하는 암호키 생성부를 더 포함하고, 상기 암호키 생성부는, 개인키 및 공개키에 타임 스탬프 코드를 각각 결합하여 시간 비밀키 및 시간 공개키를생성하며, 상기 시간 공개키는 상기 글로벌 서버로 전송되는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 5 항에 있어서,상기 로컬 서버 및 글로벌 서버 중 양자 키 관리 장치를 통해 적어도 하나에 양자 키 생성 및 분배장치가 연결되며, 상기 양자 키 생성 및 분배장치가 상기 양자 키 관리 장치를 통해 상기 양자 암호키를 제공하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 5 항에 있어서,상기 로컬 서버는, 기계학습결과에 따라 생성된 가중치 정보와 해시 값을 그룹화한 후 상기 양자 암호키로 암호화하고, 상기 양자암호키를 상기 시간 비밀키로 암호화하는 개인정보 보호부를 더 포함하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 5 항에 있어서,상기 타임 스탬프 코드는, 가중치 발생 시간; 및 상기 글로벌 서버와 통신을 수행할 통신 시간 정보를 포함하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제 5 항에 있어서,상기 글로벌 서버는, 상기 타임 스탬프 코드와 시간 공개키의 실제 수신 시간을 비교하여 상기 시간 공개키를인증하며, 상기 시간 공개키를 이용하여 상기 양자 암호키를 복호화하고, 복호화된 상기 양자 암호키를 이용하여 상기 가중치 정보와 해시 값을 복호화하여 획득하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 1 항에 있어서,상기 로컬 서버는, 의료 데이터를 획득하는 데이터 획득부; 의료기관 별로 상이한 데이터 구조를 표준화된 모델로 구축하는 공통 데이터 모델 구축부; 공통 데이터 모델로 구축된 데이터 중에서 기계 학습을 위해 필요한 데이터를 전처리하는 데이터 전처리부; 및 기계학습모델을 이용하여 상기 전처리된 데이터를 학습하는 학습부를 더 포함하는, 의료기관 간의 연합 학습 시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제1항 내지 제10항 중 어느 한 항의 구성을 포함하는 상기 연합 학습 시스템; 및 상기 로컬 서버와 연동하는 단말기를 포함하며, 상기 기계학습 결과에 따라 환자의 질환에 대한 예후를 분석하여 예측하는, 연합 학습 시스템을 이용한 질환 예후 예측시스템.공개특허 10-2024-0059370-4-청구항 12 제 11 항에 있어서,상기 단말기는, 환자조회정보 입력부; 의료기관 내의 EMR 백업 서버와 연동하여 환자의 건강정보이력을 조회하는 EMR연동 및 조회부; 암검진 설문 연동부, 의료사물인터넷 기기를 이용하여 건강상태정보를 획득하는 IoMT 기기 연동부, 건강정보를자가 입력하는 자가입력부를 포함하는 PHR 연동부; 개인화된 건강검진 데이터 기반으로 예측한 질병 위험도 정보를 분석 및 가공하여 출력하는 제1 디스플레이부;및 환자의 맞춤형 건강정보 기반으로 개인화된 의료 콘텐츠 정보를 제공하는 제2 디스플레이부를 포함하는, 연합학습 시스템을 이용한 질환 예후 예측시스템."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "로컬 서버들과 글로벌 서버를 포함하는 연합 학습 시스템이 의료 데이터를 송수신하여 연합 학습하는 방법에 있어서, 양자 키 생성 및 분배 장치가 양자 키 관리 장치를 통해 로컬 서버와 글로벌 서버에 양자 암호키를 배분하는 단계; 상기 로컬 서버가 개인키 및 공개키에 타임 스탬프 코드를 결합하여 시간 비밀키와 시간 공개키를 생성하는 단계; 상기 로컬 서버가 기계학습모델을 이용하여 상기 의료 데이터를 기계 학습하고 가중치를 생성하는 단계; 상기 로컬 서버가 생성된 상기 가중치의 가중치 정보 원본과 해시 값을 그룹화한 후 상기 양자 암호키로 암호화하는 단계; 상기 로컬 서버가 상기 시간 비밀키를 이용하여 상기 양자 암호키를 암호화하는 단계; 및 상기 로컬 서버가 상기 암호화한 가중치 정보 원본과 해시 값을 상기 글로벌 서버로 전송하는 단계를 포함하는,의료기관간의 연합 학습 방법."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제 13 항에 있어서,상기 글로벌 서버가, 상기 로컬 서버가 전송한 시간 공개키를 인증하는 단계; 상기 시간 공개키가 정상 인증되면, 상기 시간 공개키로 상기 양자 암호키를 복호화하는 단계; 상기 복호화된 양자 암호키로 상기 가중치 정보 원본과 해시 값을 복호화하여 획득하는 단계; 상기 시간 공개키로 상기 가중치 정보 원본의 해시 값을 계산하고 의료기관의 해시 값과 비교 연산하여 가중치정보 원본 인증을 수행한 후 가중치 정보를 갱신하는 단계; 및 상기 로컬 서버가 기계학습모델을 갱신하도록 상기 가중치 정보를 로컬 서버로 전송하는 단계를 포함하는, 의료기관간의 연합 학습 방법."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제 14 항에 있어서,상기 글로벌 서버가 시간 공개키를 인증하는 단계는, 상기 타임 스탬프 코드와 시간 공개키의 실제 수신 시간을 비교하여 수행하는, 의료기관간의 연합 학습 방법.공개특허 10-2024-0059370-5-청구항 16 제 13 항에 있어서,상기 로컬 서버가 의료기관 별로 수집된 의료 데이터의 독립항등분포 및 비독립항등분포에 따라 가중치를 상이하게 적용하는 단계를 더 포함하는, 의료기관간의 연합 학습 방법."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제 16 항에 있어서,상기 로컬 서버는, 수집된 의료 데이터가 비독립항등분포의 특성을 따르면 계층적 군집화 방법으로 가중치를 갱신하고, 상기 계층적 군집화 방법은, 로컬 서버간의 유사성을 제1 수식 으로 계산하여 데이터 분포가 비슷한 로컬 가중치끼리 군집하고, 다른 군집 간의 유사성을 제2 수식 으로 계산하여 비슷한 군집끼리병합 군집한 후, 제3 수식 을 이용하여 군집내의 가중치를 갱신하는, 의료기관간의 연합 학습방법."}
{"patent_id": "10-2022-0140554", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제 16 항에 있어서,상기 로컬 서버는, 수집된 의료 데이터가 독립항등분포의 특성을 따르면 각 로컬 서버에서 학습된 기계학습모델의 가중치는을 이용하여 갱신하는, 의료기관간의 연합 학습 방법."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 의료기관 간의 연합 학습 시스템 및 방법, 이를 포함하는 질환 예후 예측시스템을 제안한다. 본 발명 의 연합 학습 시스템 및 방법은, 의료 데이터를 이용한 연합 학습 시에 계층적 군집화 학습 방법을 적용하고, 또 기계 학습 결과에 따라 생성된 가중치 정보를 양자 암호 및 타임 스탬프 코드 암호화 방법을 적용하여 전송하도 록 구성된다. 따라서 의료기관 간의 데이터 이질성을 해소할 수 있어 학습 모델의 성능 향상을 기대되고, 의료 데이터의 개인정보 보호를 보호할 수 있어 안정성이 보장되는 이점이 있다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 의료기관 간의 서로 다른 형식의 데이터를 공통 데이터 형식으로 구축하여 의료기관 간의 데이터 이 질성을 극복하고, 의료 데이터의 개인정보 보호를 강화한 연합 학습 시스템 및 방법, 그리고 이러한 연합 학습 시스템을 포함하는 질환 예후 예측시스템에 관한 것이다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "의료 현장에서 의료 자원의 한계로 인하여, 의료기관 내의 인공지능(Artificial Intelligence, AI) 기술을 활용 한 판독 및 진단 보조 시스템의 도입이 주목 받고 있다. 인공지능 기술을 활용하여 높은 성능의 의료 서비스를 제공하기 위해서는 많은 양의 고품질 원천 데이터로 학습이 필요하다. 그러나 의료 데이터는 개인정보 보호법으 로 인하여 외부 반출이 어려워 대부분의 경우에 단일 의료 기관 내의 한정적인 데이터로만 모델 학습을 하고 있 는 실정이다. 그만큼 향상된 의료 서비스를 제공하는데 제약이 있다. 그래서 데이터의 중앙 집중화 없이, 여러 위치에 분산된 의료 데이터를 사용하여 심층신경망(Deep Neural Networks, DNN)을 훈련시킬 수 있는 학습 패러다임인 연합 학습(federated learning) 방법이 제안된 바 있다. 연합 학습은 단일의 의료기관이 보유한 것보다 광범위한 데이터로 학습이 가능한 이점이 있다. 그러나 이를 위 해서는 의료기관 간의 데이터 이질성 및 불균질로 인한 성능 저하 문제를 해결할 필요가 있다. 즉 의료기관마다 이벤트 코드(event code)가 상이하여, 서로 다른 의료기관을 방문한 동일한 환자에 대한 이벤트를 통합하는 것 에 어려움이 있다. 또한 다른 의료기관에서 수행한 이벤트에 대한 즉각적인 활용이 어렵고, 동일한 이벤트를 반 복하여 재 수행 하는 등 질병 예측을 효과적으로 수행할 수 없다. 그리고 연합 학습은 학습 결과의 가중치(weight) 정보만 전송하기 때문에 개인 정보가 유출되는 문제를 어느 정 도 방지하고 있지만, 이러한 가중치 정보로부터 개인정보를 역 추론할 가능성이 우려된다. 즉 학습 결과의 가중 치를 역추적하여 원본(raw) 데이터를 유추할 수 있어, 개인정보의 보호 측면에서 추가적인 보호 장치가 반드시 요구된다. 선행기술문헌 특허문헌 (특허문헌 0001) 공개특허 10-2021-0098048호(2021. 08. 10, 의료 정보 통합 솔루션 장치 및 방법)"}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은 상기와 같은 문제점을 해결하기 위하여 안출된 것으로서, 의료기관 별로 상이한 데이터 구조 의 이질성을 완화하여 기계학습 모델의 성능을 극대화시킬 수 있는 연합 학습 시스템 및 방법을 제공하는 것이다. 본 발명의 다른 목적은 연합 학습에 따른 개인정보의 보안을 강화시키는 연합 학습 시스템 및 방법을 제공하는 것이다. 본 발명의 또 다른 목적은 의료 데이터의 이질성 완화 및 개인정보보호가 강화된 연합 학습 시스템을 이용하여 더 정확한 질환의 예후 예측이 가능하게 한 시스템을 제공하는 것이다. 본 발명의 기술적 과제들은 이상에서 언급한 기술적 과제로 제한되지 않으며, 언급되지 않은 또 다른 기술적 과 제들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "이와 같은 목적을 달성하기 위한 본 발명의 일 실시 예에 따른 의료 기관 간의 연합 학습 시스템은, 의료기관에 구비된 복수의 로컬 서버; 및 상기 로컬 서버들과 통신하는 글로벌 서버를 포함하며, 상기 로컬 서버는, 다른 로컬 서버의 가중치를 이용하여 자신의 기계학습모델을 갱신시키는 가중치 갱신부를 포함하고, 상기 가중치 갱 신부는 의료 기관별로 수집한 의료 데이터의 독립항등분포(Independent identically distributed) 또는 비독립 항등분포(non-independent identically distributed )에 따라 가중치를 상이하게 적용한다. 상기 비독립항등분포는, 각 의료기관 별로 동일한 데이터 변수에서 균등한 분포를 따르지 않거나, 예측 대상 질 환의 정상과 질환 대상자 군의 분포 차이가 각 의료 기관별 분포 차이를 확인하여 균등한 분포를 따르지 않거나, 조건부 확률에 따라 질환(y)별 나이(x)의 분포 또는 나이(x)별 질환(y) 분포가 의료 기관별로 균등한 분포를 따르지 않거나, 의료 기관별로 수집되는 데이터의 양 크기에서 동일하지 않은 분포 특성이 있는 경우를 포함한다. 상기 가중치 갱신부는, 수집된 의료 데이터가 비독립항등분포의 특성을 따르면 계층적 군집화 방법으로 가중치 를 갱신하고, 상기 계층적 군집화 방법은, 로컬 서버간의 유사성을 제1 수식 으로 계산하여 데이터 분포가 비슷한 로컬 가중치끼리 군집하고, 다른 군집 간의 유사성을 제2 수식 으로 계 산하여 비슷한 군집끼리 병합 군집한 후, 제3 수식 을 이용하여 군집내의 가중치를 갱신한다. 상기 가중치 갱신부는, 수집된 의료 데이터가 독립항등분포의 특성을 따르면 각 로컬 서버에서 학습된 기계학습 모델의 가중치는 을 이용하여 갱신한다. 상기 로컬 서버는, 양자 암호키와 타임 스탬프 코드를 이용하는 암호키 생성부를 더 포함하고, 상기 암호키 생 성부는, 개인키 및 공개키에 타임 스탬프 코드를 각각 결합하여 시간 비밀키 및 시간 공개키를 생성하며, 상기시간 공개키는 상기 글로벌 서버로 전송된다. 상기 로컬 서버 및 글로벌 서버 중 적어도 하나에 양자 키 생성 및 분배장치가 연결되며, 상기 양자 키 생성 및 분배장치가 양자 키 관리 장치를 통해 상기 양자 암호키를 제공한다. 상기 로컬 서버는, 기계학습결과에 따라 생성된 가중치 정보와 해시 값을 그룹화한 후 상기 양자 암호키로 암호 화하고, 상기 양자 암호키를 상기 시간 비밀키로 암호화하는 개인정보 보호부를 더 포함한다. 상기 타임 스탬프 코드는, 가중치 발생 시간 및 상기 글로벌 서버와 통신을 수행할 통신 시간 정보를 포함한다. 상기 글로벌 서버는, 상기 타임 스탬프 코드와 시간 공개키의 실제 수신 시간을 비교하여 상기 시간 공개키를 인증하며, 상기 시간 공개키를 이용하여 상기 양자 암호키를 복호화하고, 복호화된 상기 양자 암호키를 이용하 여 상기 가중치 정보와 해시 값을 복호화하여 획득한다. 상기 로컬 서버는, 의료 데이터를 획득하는 데이터 획득부; 의료기관 별로 상이한 데이터 구조를 표준화된 모델 로 구축하는 공통 데이터 모델 구축부; 공통 데이터 모델로 구축된 데이터 중에서 기계 학습을 위해 필요한 데 이터를 전처리하는 데이터 전처리부; 및 기계학습모델을 이용하여 상기 전처리된 데이터를 학습하는 학습부를 더 포함한다. 본 발명의 다른 실시 예에 따른 질환 예후 예측시스템은, 상기 연합 학습 시스템; 및 상기 로컬 서버와 연동하 는 단말기를 포함하며, 상기 기계학습 결과에 따라 환자의 질환에 대한 예후를 분석하여 예측하는 것을 특징으 로 한다. 상기 단말기는, 환자조회정보 입력부; 의료기관 내의 EMR 백업 서버와 연동하여 환자의 건강정보이력을 조회하 는 EMR연동 및 조회부; 암검진 설문 연동부, 의료사물인터넷 기기를 이용하여 건강상태정보를 획득하는 IoMT 기 기 연동부, 건강정보를 입력하는 자가입력부를 포함하는 PHR 연동부; 개인화된 건강검진 데이터 기반으로 예측 한 질병 위험도 정보를 분석 및 가공하여 출력하는 제1 디스플레이부; 및 환자의 맞춤형 건강정보 기반으로 개 인화된 의료 콘텐츠 정보를 제공하는 제2 디스플레이부를 포함한다. 본 발명의 다른 실시 예에 따른 의료기관간의 연합 학습 방법은, 로컬 서버들과 글로벌 서버를 포함하는 연합 학습 시스템이 의료 데이터를 송수신하여 연합 학습하는 방법에 있어서, 양자 키 생성 및 분배 장치가 양자 키 관리 장치를 통해 로컬 서버와 글로벌 서버에 양자 암호키를 배분하는 단계; 상기 로컬 서버가 개인키 및 공개 키에 타임 스탬프 코드를 결합하여 시간 비밀키와 시간 공개키를 생성하는 단계; 상기 로컬 서버가 기계학습모 델을 이용하여 상기 의료 데이터를 기계 학습하고 가중치를 생성하는 단계; 상기 로컬 서버가 생성된 상기 가중 치의 가중치 정보 원본과 해시 값을 그룹화한 후 상기 양자 암호키로 암호화하는 단계; 상기 로컬 서버가 상기 시간 비밀키를 이용하여 상기 양자 암호키를 암호화하는 단계; 및 상기 로컬 서버가 상기 암호화한 가중치 정보 원본과 해시 값을 상기 글로벌 서버로 전송하는 단계를 포함한다. 상기 글로벌 서버가, 상기 로컬 서버가 전송한 시간 공개키를 인증하는 단계; 상기 시간 공개키가 정상 인증되 면, 상기 시간 공개키로 상기 양자 암호키를 복호화하는 단계; 상기 복호화된 양자 암호키로 상기 가중치 정보 원본과 해시 값을 복호화하여 획득하는 단계; 상기 시간 공개키로 상기 가중치 정보 원본의 해시 값을 계산하고 의료기관의 해시 값과 비교 연산하여 가중치 정보 원본 인증을 수행한 후 가중치 정보를 갱신하는 단계; 및 상 기 로컬 서버가 기계학습모델을 갱신하도록 상기 가중치 정보를 로컬 서버로 전송하는 단계를 포함한다. 상기 글로벌 서버가 시간 공개키를 인증하는 단계는, 상기 타임 스탬프 코드와 시간 공개키의 실제 수신 시간을 비교하여 수행한다. 상기 로컬 서버가 의료기관 별로 수집된 의료 데이터의 독립항등분포 및 비독립항등분포에 따라 가중치를 상이 하게 적용하는 단계를 더 포함한다. 상기 로컬 서버는, 수집된 의료 데이터가 비독립항등분포의 특성을 따르면 계층적 군집화 방법으로 가중치를 갱 신하고, 상기 계층적 군집화 방법은, 로컬 서버간의 유사성을 제1 수식 으로 계산하여 데이터 분포가 비슷한 로컬 가중치끼리 군집하고, 다른 군집 간의 유사성을 제2 수식 으로 계산하여 비슷한 군집끼리 병합 군집한 후, 제3 수식 을 이용하여 군집내의 가중치를 갱신한다.상기 로컬 서버는, 수집된 의료 데이터가 독립항등분포의 특성을 따르면 각 로컬 서버에서 학습된 기계학습모델 의 가중치는 을 이용하여 갱신한다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이와 같은 본 발명에 따르면, 의료 데이터를 이용한 연합 학습 시에 계층적 군집화 학습 방법을 적용함으로써, 각 의료기관 별로 상이한 상황인 비독립항등분포시에 발생할 수 있는 문제를 해결할 수 있는 효과가 있다. 본 발명에 따르면, 의료기관 별로 가지는 구조적 및 용어적인 의료 데이터의 이질성 문제를 보완할 수 있어, 연 합 학습 결과의 신뢰성을 향상시킬 수 있는 효과가 있다. 본 발명에 따르면, 연합 학습 시에 기계 학습 결과에 따라 글로벌 서버로 전송되는 가중치 정보를 양자 암호 및 타임 스탬프 코드 암호화 방법을 적용함으로써, 가중치 정보를 복원하여 원본 데이터를 유추할 수 있는 가능성 을 완전하게 차단할 수 있다. 따라서 연합 학습 환경에서 데이터 보호의 안정성을 보정하고 검증된 신뢰성 있는 연합 학습 결과를 제공할 수 있는 효과도 있다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명은 다양한 변환을 가할 수 있고 여러 가지 실시 예를 가질 수 있는 바, 특정 실시 예들을 도면에 예시하 고 상세하게 설명하고자 한다. 그러나, 이는 본 발명의 특정한 실시 형태에 대해 한정하려는 것이 아니며, 본 발명의 사상 및 기술 범위에 포함되는 모든 변환, 균등물 내지 대체물을 포함하는 것으로 이해되어야 한다. 본 발명을 설명함에 있어서 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 흐릴 수 있다고 판단되는 경우 그 상세한 설명을 생략한다. 제1, 제2 등의 용어는 다양한 구성요소들을 설명하는데 사용될 수 있지만, 상기 구성요소들은 상기 용어들에 의 해 한정되어서는 안 된다. 상기 용어들은 하나의 구성요소를 다른 구성요소로부터 구별하는 목적으로만 사용된 다. 본 발명에서 사용한 용어는 단지 특정한 실시 예를 설명하기 위해 사용된 것으로, 본 발명을 한정하려는 의도가 아니다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, \"포함 하다\" 또는 \"가지다\" 등의 용어는 명세서상에 기재된 특징, 숫자, 단계, 동작, 구성요소, 부품 또는 이들을 조 합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구성요소, 부 품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 공간적으로 상대적인 용어인 아래(below, beneath, lower), 위(above, upper) 등은 도면에 도시되어 있는 바와 같이 하나의 소자 또는 구성 요소들과 다른 소자 또는 구성 요소들과의 상관 관계를 용이하게 기술하기 위해 사 용될 수 있다. 공간적으로 상대적인 용어는 도면에 도시되어 있는 방향에 더하여 사용시 또는 동작시 소자의 서 로 다른 방향을 포함하는 용어로 이해되어야 한다. 예를 들면, 도면에 도시되어 있는 소자를 뒤집을 경우, 다른소자의 아래(below, beneath)로 기술된 소자는 다른 소자의 위(above, upper)에 놓여질 수 있다. 따라서, 예시 적인 용어인 아래는 아래와 위의 방향을 모두 포함할 수 있다. 소자는 다른 방향으로도 배향될 수 있고, 이에 따라 공간적으로 상대적인 용어들은 배향에 따라 해석될 수 있다. 본 발명에서 사용되는 “부” 또는 “부분” 등의 일부분을 나타내는 표현은 해당 구성요소가 특정 기능을 포함 할 수 있는 장치, 특정 기능을 포함할 수 있는 소프트웨어, 또는 특정 기능을 포함할 수 있는 장치 및 소프트웨 어의 결합을 나타낼 수 있음을 의미하나, 꼭 표현된 기능에 한정된다고 할 수는 없으며, 이는 본 발명의 보다 전반적인 이해를 돕기 위해서 제공된 것일 뿐, 본 발명이 속하는 분야에서 통상적인 지식을 가진 자라면 이러한 기재로부터 다양한 수정 및 변형이 가능하다. 또한, 본 발명에서 사용되는 모든 전기 신호들은 일 예시로서, 본 발명의 회로에 반전기 등을 추가적으로 구비 하는 경우 이하 설명될 모든 전기 신호들의 부호가 반대로 바뀔 수 있음을 유의해야 한다. 따라서, 본 발명의 권리범위는 신호의 방향에 한정되지 않는다. 따라서, 본 발명의 사상은 설명된 실시 예에 국한되어 정해져서는 아니되며, 후술하는 특허청구범위뿐 아니라 이 특허청구범위와 균등하거나 등가적 변형이 있는 모든 것들은 본 발명 사상의 범주에 속한다고 할 것이다. 이하에서는 도면에 도시한 실시 예에 기초하면서 본 발명에 대하여 더욱 상세하게 설명하기로 한다. 도 1은 본 발명의 바람직할 실시 예에 따른 의료 데이터의 연합 학습을 위한 전체 시스템 구성도이다. 도 1을 살펴보면, 제1 내지 제n 의료기관(10a~10n)과, 의료기관(10a~10n)마다 구비된 로컬 서버들(100a~100n), 그리고 로컬 서버들(100a~100n)과 통신하는 글로벌 서버(1000, 중앙 서버라고 하기도 함)를 포함한다. 각 의료기관(10a~10n)은 환자의 진단, 치료, 수술 등 내원하여 기록된 모든 건강정보를 기록, 처리하는 전자의 무기록시스템을 포함한다. 전자의무기록시스템은 환자의 임상진료에 관한 모든 의료 데이터를 데이터베이스로 저장, 처리하고, 새로운 정보의 생성도 가능하다. 전자의무기록시스템을 위해 각 의료기관은 대부분 의료 데이 터를 처리하는 전자장치 및 백업 서버를 포함하여 구성될 수 있다. 그리고 의료기관(10a~10n)에서 처리하는 의료 데이터는 전자의무기록데이터와 의료영상데이터로 구분할 수 있고, 아래에서 상세하게 설명한다. 로컬 서버(100a~100n)는 상기 의료기관(10a~10n) 내에 구축되며, 환자의 의료 정보를 기초로 기계 학습하여 환 자의 질환에 대한 예후를 분석하여 예측하고, 예측 결과를 제공한다. 로컬 서버(100a~100n)의 구성은 도 2에서 상세하게 설명한다. 글로벌 서버는, 로컬 서버들(100a~100n)과 통신하여 기계학습모델과 가중치 정보를 전달받고, 로컬 서버 들(100a~100n)의 기계학습모델을 갱신하도록 하는 역할을 수행한다. 본 실시 예의 기계학습모델은 질환의 발명 확률 예측 또는 사망률 예측 등 원하는 목적을 수행하도록 일련의 학습 알고리즘에 의하여 다수의 의료 데이터 및 건강 정보 데이터들을 이용하여 학습하는 인공지능모델을 말한다. 도 2는 의료기관에 구비된 로컬 서버의 상세 구성도이다. 도 2를 보면 로컬 서버(100a~100n)는 데이터 획득부, 공통 데이터 모델 구축부, 데이터 전처리부 , 학습부, 가중치 갱신부, 개인정보 보호부, 암호키 생성부 및 출력부를 포함하 여 구성될 수 있다. 도 2에서 데이터 획득부는 의료기관(10a~10n)에서 치료 및 처방 등과 관련된 각종 의료 데이터를 획득하는 유닛이다. 데이터 획득부가 획득하는 의료 데이터는 전자의무기록데이터 및 의료영상데이터일 수 있다. 2 개의 데이터 모두 또는 각각을 비 식별화하여 획득하는 것이 가능하다. 의료기관(10a~10n)에서 관리하는 의료 데이터는 문자형(텍스트) 전자의무기록데이터와 의료영상데이터로 구분할 수 있다. 그래서 데이터 획득부는 문자형 데이터를 추출 및 저장할 수 있는 EMR 연동부와 영상 데이 터를 추출 및 저장할 수 있는 PACS 연동부를 포함한다. 전자의무기록데이터는, 예를 들면 암 환자의 암 등록정보, 항암제 치료 내역, 방사선 치료내역, 수술 치료내역, 진단검사 결과 내역 중 어느 하나를 포함하는 데이터 세트일 수 있다. 전자의무기록데이터는 RDB(RelationalData Base), excel, JSON, XML 중 어느 하나의 형태로 획득할 수 있다. 의료영상데이터는, CT(Computer tomography), MRI(Magnetic Resonance Imaging) 중 어느 하나를 포함하는 이미 지를 포함하는 이미지 데이터 세트일 수 있다. 이미지 데이터는 DCM(DICOM), PNG 중 어느 하나의 형태로 획득할 수 있다. 그리고 이러한 의료영상데이터를 이용하면 진단보조정보, 예컨대 신체 표면적, 근육량, 복부 근육량 등을 제공할 수 있다. 각 의료기관(10a~10n)은 의료 시스템의 종류에 따라 상이한 데이터 구조 및 의료용어 코드를 가질 수 있기 때문 에, 이러한 상이한 데이터 구조를 모든 의료기관에 적용 가능한 하나의 표준화된 모델로 구축할 필요가 있다. 공통 데이터 모델 구축부는 이러한 의료기관(10a~10n) 간의 데이터 이질성 문제를 보완하여 편향된 연합학 습 결과가 도출되는 것을 방지하기 위해 필요하다. 도 2에서 공통 데이터 모델 구축부는, 구조 변환부, 용어 표준화부, 데이터 변환 검증부를 포함한다. 구조 변환부는, 데이터 획득부에서 전달받은 데이터를 공통 모델 스키마를 참조하여 상호 운영성이 가능하도록 공통 데이터 구조 모델로 변환하며, 공통 데이터 구조 모델에서 포함하고 있지 않은 항목들에 대해 서도 확장 가능하도록 데이터 구조를 추가 및 변경하는 것이 가능하다. 구조 변환부는, 예를 들면 암 종별로 공통적인 항목과 암 종 특성에 따라 확장이 가능하도록 데이터 변환 구조를 가질 수 있다. 데이터 변환구조에 포함되는 공통적인 항목에는 환자 기본정보(성별, 생년/월, 유병암 정 보 등), 환자 건강정보(음주, 흡연, 가족력 등), 환자 신체계측정보(신장, 체중, BMI 등), 진단정보(진단일자, 진단코드), 진단검사(진단검사 일자, 진단검사 코드, 진단검사 결과 등), 영상검사(영상검사 일자, 영상검사 코 드, 영상검사 결과내용 등), 수술정보(수술 일자, 수술 EDI 코드, 수술 소요시간, 수술 실혈량 등), 투약정보 (투약일자, 투약 코드, 투약량, 투약일수 등) 등이 있고, 공통 모델 스키마를 참조하여 일자(date), 의료 용어 코드 또는 각 의료 기관에서의 처방코드, 결과값(values)를 포함하여 변환을 수행할 수 있다. 용어 표준화부는, 각 의료기관(10a~10n)에서 사용하고 있는 서로 상이한 의료 용어 코드를 국제표준임상용 어 데이터베이스를 통해 국제표준 임상용어로 매핑(mapping)하는 유닛이다. 용어 표준화부에 따라 각 의료 기관(10a~10n) 마다 서로 상이한 의료 용어 코드를 표준화하여 변환하기 때문에, 여러 의료기관에서 학습을 할 수 있는 공통 데이터 구조 및 코드로 변환이 가능하다. 데이터 변환 검증부는, 구조 변환부 및 용어 표준화부가 공통 데이터 모델로 구축한 데이터의 품질을 검증하는 유닛이다. 데이터 변환 검증을 위한 품질 지표로는 데이터의 완전성, 일관성, 적시성, 유효성 등을 선정할 수 있고, 데이터 변환 검증 결과에 따라 공통 데이터 모델 구축부의 동작은 반복될 수 있다. 도 2에서 데이터 전처리부는, 공통 데이터 모델로 구축된 데이터 중에서 기계 학습을 위해 필요한 데이터 를 전처리하기 위한 유닛이다. 데이터 전처리부는 전처리 할 데이터 타입에 따라 텍스트 데이터 전처리부와 이미지 데이터 전처리부 로 구분할 수 있다. 텍스트 데이터 전처리부는, 공통 데이터 모델로 구축된 데이터 중 텍스트 관련 데이터가 잘못 적재되었다 고 판단되거나 데이터 분포상 이상치라고 판단되는 데이터를 제거하는 이상점(outlier) 제거부, 예측하고 자 하는 질환에 따른 인공지능모델 학습에 필요한 유의한 데이터를 추출하는 질환별 특징 데이터 추출부를 포함한다. 이미지 데이터 전처리부는, 이미지에 불필요한 부분을 크롭하여 감소하거나, 작은 이미지를 동일한 사이즈 크기로 변환하기 위하여 이미지의 패딩을 추가하여 증가시키는 이미지 사이즈 처리부, 병리 이미지와 같이 RGB 값을 가지는 의료 영상이미지에서 각 이미지 데이터간 변화(variation)을 제거하기 위한 정규화 또는 이미 지를 선명하게 볼 수 있도록 가우시안 필터를 적용하는 이미지 정규화부, 영상 이미지를 특정 이미지에서 만 적합하는 과적합(overfitting)을 피하고 기계학습모델의 성능을 개선하기 위하여 영상 이미지 증가를 위하여 다양한 필터 적용 및 이미지를 상화, 좌우 반전 등을 통하여 영상 이미지를 증강(augmentation)하는 이미지 증 강부를 포함한다. 이미지 데이터를 전처리 하는 이유는 데이터 획득부로부터 수집한 영상 이미지들이 일정한 크기를 가지도록 이미지 크기를 조정하는 리사이징이 필요하기 때문이다. 도 2에서 학습부는, 가중치 갱신을 통해 생성된 최적의 예후예측 모델(즉 기계학습모델, 인공지능모델)을 제공하는 기계학습 모델부, 기계학습을 수행하여 환자의 질환 발명 확률을 예측하는 발명확률 예측부등을 포함한다. 상기 최적의 예후예측 모델은 로컬 서버(100a~100n)의 의료 데이터를 공유하지 않고 로컬 서버 (100a~100n)와 글로벌 서버 간의 반복적인 통신을 통해 가중치를 지속적으로 갱신함으로써 생성할 수 있 다. 도 2에서 가중치 갱신부는 다른 로컬 서버의 가중치 정보를 이용하여 자신의 기계학습모델을 갱신하는 역 할을 한다. 즉 글로벌 서버는 다른 로컬 서버들(의료기관들)의 로컬 가중치를 이용하여 글로벌 가중치를 생성하고, 각 의료기관 별(10a~10n)마다 자신의 가중치 갱신부는 상기 생성된 글로벌 가중치를 이용하여 자신의 기계학습모델을 갱신시켜 최적화시키는 것이다. 가중치 갱신부는 각 의료기관(10a~10n)마다 수집된 의료 데이터의 분포 특성에 따라 상이한 방법으로 갱신 할 수 있다. 즉 독립항등분포(Independent identically distributed; IID) 또는 비독립항등분포(non- independent identically distributed; non-IID) 특성에 따라 갱신 방법이 상이하다. 의료기관(10a~10n) 마다 수집된 의료 데이터는 각 의료기관(10a~10n)에 따라 환자들의 수 또는 의료장비에 따라 의료영상 이미지 정보(해상도, 크기 등)에서 동일한 확률분포를 가지고 있지 않으며 이는 각 의료기관(10a~10 n)의 데이터 분포가 동일하지 않는 비독립항등분포 특성을 가지고 있다. 그래서 각 의료기관(10a~10n)의 예후 예측 결과가 전체 의료기관에 적합 가능한 전체적 결과가 아닌 특정 의료기관에만 맞는 국소적인 결과가 나올 수 있다. 따라서 의료기관별(10a~10n)로 수집된 의료 데이터의 분포에서 비독립항등분포 특성을 따르는지 확인 이 필요하며, 실시 예는 아래의 4가지 특징을 통해 확인할 수 있다. i번째 의료기관에서 x 데이터 변수를 기반으로 y 클래스 라벨 기준으로 수집된 데이터의 분포를 로 표현 하는 것으로 가정한다. 예를 들어, A의료기관에서 나이변수 기반으로 급성신손상의 분포는 으로 표현한다면, 상기한 데이터 분포 에서, , , 와, 그 리고 의료기관별로 수집되는 데이터의 양 크기를 이용하여 확인할 수 있다. 첫 번째로 는 의료기관 별로 수집하는 동일한 데이터 변수 x에서 누락, 잡음 등이 발생하여 각 의료기관 별 동일한 데이터 변수에서 균등한 분포를 따르지 않는 경우 비독립항등분포로 정의한다. 두 번째로 는 예측하고자 하는 질환의 정상과 질환 대상자 군의 분포의 차이가 각 의료기관 별 분포의 차이 를 확인하여, 균등한 분포를 따르지 않는 경우 비독립항등분포로 정의한다. 세 번째로 는 조건부 확률에 따라 질환(y)별 나이(x)의 분포 또는 나이(x)별 질환(y) 분포가 의 료기관 별로 균등한 분포를 따르지 않는 경우 비독립항등분포로 정의한다. 네 번째로 의료기관 별로 수집되는 데이터의 양 크기에서도 동일하지 않은 분포의 특성 여부를 확인하다. 이와 같이 본 실시 예는 의료 데이터가 비독립항등분포 특성을 가지는 지 확인할 수 있고, 확인 결과에 따라 독 립항등분포와는 다른 과정을 거쳐 글로벌 가중치를 갱신한다. 이는 개인정보의 민감성과 질환 예측의 정확성을 고려해야만 하기 때문이다. 구체적으로 의료 데이터가 비독립항등분포를 따르는 경우에는 데이터 이질성 완화를 위한 계층적 군집화 학습방 법을 적용하여 가중치를 갱신한다. 계층적 군집화 학습은, 각 로컬 서버(100a~100n) 내의 데이터의 분포가 비슷한 로컬 가중치 ( )끼리 군 집(cluster)을 하고 같은 군집 내에서 먼저 로컬 서버(100a~100n)의 가중치를 집계(aggregation)하여 갱신한다. 이때 로컬 서버(100a~100n) 간의 유사성은 하기 수학식 1을 이용한다. 수학식 1"}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "그리고 다른 군집(A, B) 간의 유사성은 하기 수학식 2을 이용하여 비교하고, 비교결과 비슷한 군집끼리 하나의 군집으로 병합 군집(agglomerative clustering) 한 다음 계층적 군집화(hierarchical clustering)을 통해 계속해서 군집화를 수행한 후 최종적으로 하기 수학식 3을 이용하여 군집내의 가중치를 갱신한다. 수학식 2"}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "수학식 3"}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "상기한 계층적 군집화 학습관계는 다음과 같이 정리할 수 있다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "한편, 각 의료기관(100a~100n) 별로 수집된 의료 데이터가 독립항등분포를 따르는 경우에는 각 라운드(t)로 로 컬 서버(100a~100n)에서 학습된 모델의 가중치( )를 글로벌 서버가 갱신을 한다. 이 경우 로컬 서버 (100a~100n)와 글로벌 서버의 가중치 갱신은 상기한 수학식 3을 이용하여 수행한다. 도 2에서 개인정보 보호부는 글로벌 서버와 통신이 수행되는 동안 학습결과의 가중치가 외부로 누출 되는 것을 방지하며, 학습 결과데이터를 검증하는 기능도 수행한다. 도 2에서 암호키 생성부는 앞서 설명한 바와 같이 가중치 정보로부터 개인정보가 역추론 될 가능성을 차단 함으로써 개인정보를 더 강력하게 보호하기 위한 유닛이다. 양자 암호와 타임스탬프 코드를 이용하게 된다. 구체적으로 암호키 생성부는 시간 공개키 및 시간 비밀키의 암호화키를 생성하여 개인정보를 보호한다. 시 간 비밀키 및 시간 공개키는 개인키 및 공개키에 타임스탬프(time stamp) 코드를 각각 결합하여 생성된다. 타임 스탬프 코드는 가중치 발생 시간에 일정 시간을 더한 통신 시간 코드일 수 있다. 즉 가중치 발생 시각의 단위는 초 단위의 나노초(㎱, 1/10억)까지 측정되어 고유한 시간으로 코드를 생성하며, 생성된 시간 코드에 일정 시간 을 더해 생성한다. 통신 시간 코드를 기반으로 로컬 서버(100a~100n)와 글로벌 서버 간에 통신을 수행할 시간을 계산할 수 있다. 이러한 시간 비밀키 및 시간 공개키의 생성 과정은 다음과 같이 표현할 수 있다."}
{"patent_id": "10-2022-0140554", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "item": 6, "content": "도 2에서 학습부, 가중치 갱신부, 개인정보 보호부, 암호키 생성부를 하나로 모듈화 하여 제어부 140으로 구성할 수도 있다. 다음에는 상기한 구성을 가지는 연합 학습 시스템의 활용방안 등에 대해 살펴보기로 한다. 도 3은 본 발명에 따라 연합 학습 방법을 설명하는 전체 흐름도이다. 도 3에 도시된 바와 같이 의료 데이터의 공통 데이터 모델 변환 과정, 전처리 과정, 기계학습 과정을 포함하고, 최종적으로 최적화된 질환별 예후 예측 모델을 제공하는 것이라 할 수 있다. 도 3에 따르면 의료기관(10a~10n)에 구비된 로컬 서버(100a~100n)는 데이터 획득부를 이용하여 의료기관 (10a~10n)으로부터 전자의무기록 데이터 및 의료영상데이터를 획득한다(s100). 그러면 로컬 서버(100a~100n)의 공통 데이터 모델 구축부는 구조 변환부 및 용어 표준화부를 이 용하여 전자의무기록데이터 및 의료영상데이터를 하나의 표준화된 모델로 구축한다(s110). 각 의료기관 (10a~10n)마다 상이한 데이터 구조의 이질성 문제를 해결하기 위해서이다. 이때 국제적으로 적용 가능한 OMOP- CDM, Sentinel-CDM, PCORnet CDM 등 다양한 공통 데이터 모델 형식을 적용하여 동일한 구조와 규격의 데이터 모 델로 변환할 수 있다. 여기서 공통 데이터 모델 형식이 의미하는 것은 의료용어의 표준화뿐만 아니라, 동일한 구조의 데이터베이스(동일 schema, table, column명 등)를 구축하기 위한 약속된 규칙을 의미하며, 이 형태는 ETL(Extract, Transform, Load) 정의서와 같은 전자문서 형태 및 공통형식으로 자동 매핑하는 프로그램의 형태 를 포함한다. 그러나 공통 데이터 모델 형식은 상기된 바에 제한되지 않으며, 배포 가능한 형태의 의료기관에서 자체 개발한 공통 데이터 모델 형식을 모두 포함할 수 있다. 공통 데이터 모델로 구축된 데이터 중에서 기계 학습을 위해 필요한 데이터를 전처리 수행한다(s120). 전처리 과정은 텍스트 데이터 전처리부가 기계학습에 필요한 데이터만 추출하거나, 이미지데이터 전처리부가 영상 데이터를 기계학습에 적합한 형태로 처리하는 과정일 수 있다. 그리고 전처리 과정은 질환별 특징 데이터 추출부가 암환자에서 발생하는 각 질환별 유의미한 변수들을 추출하는 과정을 포함할 수 있다. 이는 데이 터 획득부가 수집한 데이터에는 질환과 관련없는 변수 또는 다수의 결측치를 포함하고 있을 수 있기 때문 이다. 기계학습을 위한 데이터가 전처리되어 제공되면, 학습부는 전처리된 데이터를 기반으로 질환별 기계학습모 델을 개발하여 기계학습을 수행한다(s130). 그리고 기계학습에 따라 학습결과 가중치가 생성되면, 어느 하나의 특정 로컬 서버(100a을 예로 든다)는 글로벌 서버로 전송한다(s140). 글로벌 서버는, 상기 로컬 서버(100a)가 개발한 질환별 기계학습모델과 학습결과인 가중치를 다른 로컬 서버(의료기관)(100b ~ 100n)들로 전송 배포한다(s150). 그러면 다른 로컬 서버들(100b ~ 100n)은 전송받은 질 환별 기계학습모델을 이용하여 자신들이 각각 수집한 의료 데이터를 대상으로 기계 학습하여 가중치(각각의 로 컬 가중치임)를 생성하고, 글로벌 서버로 전송한다. 글로벌 서버는 다른 로컬 서버들(100b ~ 100n)이 전송한 로컬 가중치를 수신하고 각 로컬 서버가 독립항 등분포 또는 비독립항등분포에 따라 가중치를 갱신 후에 다시 로컬 서버(100a)로 전송한다(s160). 이에 로컬 서 버(100a)는 다른 로컬 서버들(100b ~ 100n)이 제공한 가중치 정보들을 기초로 하여 자신이 개발한 질환별 기계 학습모델을 갱신할 수 있다(s170). 이처럼 본 실시 예는 다른 로컬 서버들의 기계학습 결과에 따른 가중치 정보를 제공받아 기계학습모델을 계속하 여 갱신하기 때문에, 최초 개발한 기계학습모델보다 성능이 계속해서 향상되는 최적의 기계학습모델을 제공할 수 있다. 그리고 이러한 기계학습모델은 다른 로컬 서버들도 이용할 수 있다. 도 4는 본 발명에 따른 연합 학습 과정 중 로컬 서버와 글로벌 서버 간에 전송되는 가중치 정보를 암호화 하는 과정을 설명하는 흐름도이다. 로컬 서버(의료기관)(100a을 예를 든다)와 글로벌 서버는 양자통신전용채널 및 일반통신채널의 2개의 채 널로 연결된다. 양자 키 생성 및 분배장치가 양자 키 관리 장치를 통해 로컬 서버(100a)와 글로벌 서버에 동일한 양자 암 호키를 배분한다. 이때 양자 키 생성 및 분배장치는 로컬 서버(100a)와 글로벌 서버 중 적어도 하나에 구 비될 수 있고, 이 경우 어느 하나의 양자 키 생성 및 분배장치는 양자 키 관리 장치를 통해 로컬 서버(100a) 또 는 글로벌 서버에 제공한 양자 암호키를 양자통신전용채널을 이용하여 글로벌 서버 또는 로컬 서버(100a)에 제공할 수 있다. 로컬 서버(100a)의 암호키 생성부는 암호키를 생성한다. 구체적으로 암호키 생성부는 개인키 및 공개 키를 발행하고(s200), 개인키 및 공개키에 각각 통신 시간 코드를 결합하여 시간 비밀키와 시간 공개키를 생성 한다(s210). 앞서 설명한 대로 통신 시간 코드는 가중치 발생 시각 정보를 포함한다. 상기 시간 공개키는 글로 벌 서버가 인증 절차를 수행하도록 미리 전송될 수 있다(s220). 로컬 서버(100a)의 학습부는 도 3에서 설명한 대로 전처리된 데이터를 기반으로 기계학습을 수행하고, 학 습결과에 대한 가중치를 생성한다(s230). 이후 개인정보 보호부는 가중치 정보 원본과 가중치 정보 해시 값을 그룹화한 후 그룹화된 데이터를 양자 암호키로 암호화한다(s240). 양자암호는 제3자의 개입이 생길 시에, 양자 상태의 변화가 발생함으로써 부정한 제3자를 인지하고, 즉시 정보를 변경하기 때문에 양자 암호키는 데이터의 보안 관점에서는 가장 완벽한 암호방 법 이다. 그러나, 일반적인 암호 시스템은 무결성, 기밀성, 인증, 부인방지를 모두 제공해야 하는데, 양자 암호 키 자체로는 기밀성만을 제공하며, 기관 인증과 부인 방지까지 해결하기에는 어려움이 있다. 연합학습에서는 가 중치 정보를 전송할 때 통신이 허가된 기관에 대한 기관인증이 필요하다. 그래서 본 실시 예는 기관 인증과 부인 방지를 위해 로컬 서버(100a)가 생성한 시간 비밀키를 이용하여 양자 암 호키를 암호화한다(s250). 로컬 서버(100a)는 시간 비밀키로 암호화 한 메시지, 즉 양자 암호키로 암호화한 가중치 정보 원본과 해시 값을 글로벌 서버로 전송한다(s260). 로컬 서버(100a)와 통신하는 글로벌 서버는, 상기 로컬 서버(100a)가 미리 전송한 시간 공개키를 인증한 다(s300). 시간 공개키 인증은 시간 공개키의 통신 시간 코드와 실제 통신한 시간을 비교하여 상기 시간 공개키 가 로컬 서버(100a)가 전송한 공개키가 맞는지 확인하는 인증 과정일 수 있다. 이러한 인증에 따라 결과가 상이 하면 시간 공개키를 제3자가 보낸 공격용 키로 인지하여 그 시간 공개키를 무효화시킨다. 시간 공개키를 무효화 시키는 다른 예는, 로컬 서버(100a)에서 시간 공개키를 생성하는 과정에서 통신 시각의 계산 오류가 발생하여 예정된 시각에 미치지 못하거나 초과해서 송신이 되는 경우에도 무효화시킨다. 이처럼 시간 공개키가 무효화되 면 글로벌 서버는 로컬 서버(100a)로 다시 시간 공개키를 요청하고, 로컬 서버(100a)는 통신을 위한 시각 코드를 다시 산출하여 시간 공개키를 재생성하고 글로벌 서버로 전송해야 한다. 글로벌 서버는 양자 암호키로 암호화한 가중치 정보 원본과 해시 값을 수신하면(s310), 인증된 상기 시간 공개키를 이용하여 로컬 서버(100a)가 암호화한 양자 암호키를 복호화한다(s320). 그리고 복호화된 양자 암호키 를 이용하여 메시지, 즉 양자 암호키로 암호화한 가중치 정보 원본과 해시값을 복호화한다(s330). 복호화에 따 라 글로벌 서버는 가중치 정보 원본과 해시값을 획득할 수 있다. 이후 글로벌 서버는 상기 시간 공 개키로 가중치 정보 원본의 해시 값을 계산하고 의료기관의 해시 값과 비교 연산하여 데이터 원본 인증을 수행 한 후 가중치 정보를 갱신한다(s340). 가중치 정보가 갱신되면, 글로벌 서버는 이를 로컬 서버(100a)로 전송하여 의료기관에서 개발된 기계학습 모델을 갱신함으로써 최적화시키게 된다. 이때 갱신된 가중치 정보는 정보 보호를 위해 암호화된 상태로 전송되 어야 한다. 따라서 글로벌 서버는 기 제공받은 양자 암호키를 이용하여 갱신된 가중치 정보를 암호화하고 (s350), 다시 시간 비밀키로 양자 암호키를 암호화 한 후에(s360), 로컬 서버(100a)로 전송한다(s370). 그러면 로컬 서버(100a)는 위에서 설명한 바와 같이 시간 공개키를 이용하여 양자 암호키를 복호화하고, 양자 암호키를 이용하여 암호화된 갱신된 가중치 정보를 복호화한다. 복호화 된 갱신된 가중치 정보가 복호화되면, 기계학습모델에 반영한다. 이처럼 본 발명은 복수의 로컬 서버(의료기관들) (100a ~ 100n)와 글로벌 서버가 지속적으로 통신하여 연 합 학습을 실시함에 있어서, 양자 암호 및 타임 스탬프로 암호화하여 가중치 정보를 송수신하고 있어, 종래 가 중치 정보를 역추적하여 개인 정보를 추론할 수 가능성을 완전하게 차단할 수 있다. 도 5는 도 4에서 설명한 연합 학습 과정을 구체적으로 설명하고 있는 흐름도이다. 즉 2개의 의료기관(100a, 100b)이 참여하여 연합 학습을 실시하는 것을 예시하였다. 2개의 의료기관 중 의료기관 A가(100a) 기계학습모델 을 개발하여 연합학습을 먼저 시작하는 의료기관으로 설정하였고 다른 의료기관 B(100b)는 의료기관 A(100a)에 서 개발한 기계학습모델을 전달받아 기계 학습하여 가중치 정보를 생성하는 의료기관으로 설정하였다. 의료기관B(100b)는 적어도 1개 이상일 수 있다. 또한 의료기관(100a, 100b)은 자체적으로 구비되거나 연결된 각 기관별 로컬 서버를 의미하기도 한다. 따라서 아래 설명하는 실시 예에서 100a, 100b는 각각 의료기관 A 및 의료기관 B 을 표기하거나 로컬 서버로 표기할 수 있다. 도 5a는 의료기관 A(100a)와 글로벌 서버간의 연합학습 과정을 설명하는 흐름도이다. 도 5a를 보면, 의료기관 A(100a)은 데이터 획득부를 통해 의료 데이터를 수집하고, 수집된 의료 데이터의 분포 특성에 따라 의료 데이터가 비독립항등분포를 따를 경우 데이터 군집화 학습을 수행한다. 데이터 이질성 완화를 위한 계층적 군집화 학습방법은 도 2에서 상세하게 설명하였기에 여기서는 생략하기로 한다. 의료 데이 터가 독립항등분포를 따를 경우에는 계층적 군집합 학습은 실시하지 않아도 된다. 이후 학습부는 수집된 의료 데이터를 이용하여 환자의 예후 예측을 위한 기계학습을 수행하고, 기계학습 결과로서 가중치 정보 원본을 생성한다. 이때 암호키 생성부는 개인키와 공개키를 생성하고, 가중치 정보 발생 시각을 기초로 하여 시간 비밀키와 시간 공개키를 생성한다. 상기한 바와 같이 가중치 정보의 발생 시간을 타임 스탬프 코드화하여 상기 개인키와 공개키와 결합할 수 있는 형태로 생성한 상태에서 개인키와 타임 스탬프 코드를 결합하여 시간 비밀키를 생성하고, 공개키와 타임 스탬프 코드를 결합하여 시간 공개키를 생성하게 된다. 그런 다음 가중치 정보 원본에 시간 공개키를 결합하여 해시 값을 산출한다. 이렇게 산출된 해시 값과 가중치 정보 원본을 그룹화하고, 이를 양자 암호키로 암호화한다. 그리고 시간 비밀키를 이용하여 다시 양자 암호키를 암호화한다. 의료기관 A(100a)는 글로벌 서버의 시간 공개키 요청에 따라 타임 스탬프 코드 기반으로 정해진 통신시간 에 시간 공개키를 전달한다. 글로벌 서버는 시간 공개키의 통신 시간 코드와 실제 통신한 시간을 비교하 여 상기 시간 공개키를 인증한다. 상기 시간 공개키가 정상 인증되면, 글로벌 서버는 의료기관 A(100a)에 가중치 정보를 요청하고, 암호화 된 가중치 정보를 전달받는다. 그리고 시간 공개키를 이용하여 암호화된 양자 암호키를 복호화한다. 그리고 미 리 분배 받았던 양자 암호키를 이용하여 양자 암호키로 암호화한 가중치 정보 원본과 해시 값을 복호화하여 가 중치 정보 원본과 해시 값을 획득한다. 글로벌 서버는 시간 공개키로 가중치 정보 원본을 해싱하고, 의료기관 A(100a)에서 전달받은 해시 값과 비교하여 원본 인증을 수행한다. 원본 인증이 정상 수행되면, 글로벌 서버는 의료기관 A(100a)가 전송하 는 기계학습모델을 의료기관 B(100b)로 전송한다. 도 5b는 의료기관 B(100b)와 글로벌 서버간의 연합학습 과정을 설명하는 흐름도이다. 도 5a 과정에 따라 의료기관 B(100b)는 의료기관 A(100a)가 전송하는 기계학습모델을 전송받으면, 의료기관 B(100b)는 기계학습모델을 이용하여 자신이 수집한 의료데이터를 학습하고, 가중치 정보 원본을 생성한다. 가중치 정보 원본을 생성한 다음에는 도 5a와 동일하게 진행된다. 즉, 개인키와 공개키를 생성하고, 가중치 정 보 발생 시각을 기초로 하여 시간 비밀키와 시간 공개키를 생성한다. 그런 다음 가중치 정보 원본에 시간 공개 키를 결합하여 해시 값을 산출한다. 이렇게 산출된 해시 값과 가중치 정보 원본을 그룹화한 다음 양자 암호키로 암호화하고, 시간 비밀키를 이용하여 양자 암호키를 다시 암호화한다. 이후 의료기관 B(100b)는 글로벌 서버 의 시간 공개키 요청에 따라 타임 스탬프 코드 기반으로 정해진 통신시간에 시간 공개키를 전달하고, 글 로벌 서버는 시간 공개키의 통신 시간 코드와 실제 통신한 시간을 비교하여 상기 시간 공개키를 인증한다. 상기 시간 공개키가 정상 인증되면, 글로벌 서버는 의료기관 B(100b)에 가중치 정보를 요청하고, 암호화 된 가중치 정보를 전달받는다. 그리고 시간 공개키를 이용하여 암호화된 양자 암호키를 복호화하고, 미리 분배 받았던 양자 암호키를 이용하여 양자 암호키로 암호화된 가중치 정보 원본과 해시 값을 복호화하여 가중치 정보 원본과 해시 값을 획득한다. 글로벌 서버는 시간 공개키로 가중치 정보 원본을 해싱하고, 상기 의료기관 B(100b)에서 전달받은 해시 값과 비교하여 원본 인증을 수행한다. 원본 인증이 정상 수행되면, 글로벌 서버는 기계학습모델을 갱신하 고, 갱신된 기계학습모델을 의료기관 A(100a) 및 의료기관 B(100b)로 전송한다. 이러한 과정은 계속 반복하며, 반복되는 정도에 따라 기계학습모델은 지속적으로 갱신되면 최적화된다. 도 6은 본 발명의 실시 예에 따라 로컬 서버(100a ~ 100n)와 연동하는 단말기의 구성도이다. 단말기는 PC 나 의료진이 휴대할 수 있는 휴대용 기기일 수 있다. 단말기는 의료진이 실제 의료현장에서 활용할 수 있 는 시각화된 의료 정보 서비스를 제공할 수 있다. 의료 정보 서비스의 예로 연합학습의 분석결과를 디스플레이 하고, 의료기관 내의 환자 데이터 외에 다양한 헬스 케어 데이터를 연동하여 환자 맞춤형 건강관리정보를 제공 할 수 있다. 도 6을 보면, 단말기는 환자조회정보 입력부, EMR연동 및 조회부, PHR 연동부, 제1 디스플 레이부 및 제2 디스플레이부를 포함한다. 환자조회정보 입력부는 환자 검진을 진행할 때 의료진이 환자의 진료이력 조회를 위해 개인정보를 유닛이 다. EMR 연동 및 조회부는 입력받은 환자조회정보를 기반으로, 의료기관 내의 EMR 백업 서버와 연동하여 해당 환자가 병원에 방문했던 건강정보이력을 조회하는 유닛이다. 연동된 EMR 데이터로부터 예후 예측분석에 사용되 는 특정 항목별 수치 정보(예, 크레아티닌 수치, 헤모글로빈 수치 등)가 건강정보 응용서비스의 사용자 인터페 이스 상에 제공될 수 있다. PHR 연동부는 문서화된 암검진/건강검진 설문 결과를 의료진이 직접 입력하는 방법 또는 환자가 다른 모바 일 기기를 이용하여 직접 기입하는 암검진/건강검진 설문을 실시간으로 자동 연동하는 방법을 제공하는 암검진 설문 연동부와, 개인의 건강상태를 측정할 수 있는 웨어러블 디바이스 혹은 재택에서 이용하는 의료사물인 터넷(IoMT) 기기를 이용하여 측정 가능한 환자의 가장 최신의 건강상태정보(예, 체성분 · 활동량 · 혈압 · 혈당 · 심박 · 체온 등)에 대한 건강상태정보를 획득하고 연동하는 IoMT 기기 연동부, 건강정보 응용서 비스를 이용하는 의료진이 환자 검진 시에 추가적으로 필요하다고 판단하는 건강정보를 직접 기입할 수 있는 자 가 입력부를 포함한다. 자가 입력부에 기입되는 데이터는 사용자마다 작성법이 다른 free-text 형태 로, 공통 데이터 형식이 필요한 예후예측 분석모델의 변수(feature)로 활용하기는 어려우며, 개인 맞춤형 의료 콘텐츠(재택에서의 건강관리 권고사항 등)에 참고자료로서 활용이 가능하다. 제1 디스플레이부는 개인화된 건강검진 데이터 기반으로 예측한 질병 위험도 정보를 분석 및 가공하여 출 력하는 유닛이고, 제2 디스플레이부는 환자의 맞춤형 건강정보 기반으로 개인화된 의료 콘텐츠 정보를 제 공하는 유닛이다. 제2 디스플레이부는 예를 들어, 개인 혈압과 다른 사용자들의 혈압 비교에 따른 정상범 위 여부가 건강정보 응용서비스 인터페이스 상에 제공될 수 있다. 또 다른 일 예시로, 연합학습 기반의 질환 예 후예측 모델 분석 결과로 개인별 수치 증감에 따라 건강 위험도가 높다고 판단된 질병에 대응하여 개인별 식단 추천 서비스, 운동 추천 서비스, 영양제 추천 서비스, 외부기관 서버 장치와의 연결을 중계하는 연결 콘텐츠 서 비스 중 적어도 하나를 포함하는 의료 콘텐츠 정보 제공 서비스가 될 수 있다. 도 7은 본 발명에 따라 제1 디스플레이부에 표시되는 사용자 인터페이스 화면 구성도로서, 예후 예측 분석 결과를 나타내고 있다. 이를 보면, 앞에서 설명한 기계학습모델을 이용한 연합 학습 결과에 따라 질환별 예후 예측결과를 제공하고 있 음을 알 수 있다. 도면에는 급성감염증 질환의 예후 예측분석 결과로서, 15일 이내에 급성신손상, 호중구감소증, 빈혈의 발생확률을 알 수 있다. 다른 질환을 선택하면 그에 맞는 분석 결과가 제공될 것이다. 도 8은 본 발명에 따라 제2 디스플레이부에 표시되는 사용자 인터페이스 화면 구성도로서, 맞춤형 건강관 리정보를 나타내고 있다. 이를 보면, 혈청크레아티닌의 변화상태, 혈압 상태를 기초로 하여 의료기관의 권고사 항 및 재택에서의 건강관리 권고사항을 환자가 알 수 있도록 제공하고 있다. 환자는 이러한 권고사항 정보를 통해 자신의 건강을 맞춤형으로 관리할 수 있을 것이다. 이상과 같이 본 발명의 도시된 실시 예를 참고하여 설명하고 있으나, 이는 예시적인 것들에 불과하며, 본 발명 이 속하는 기술 분야의 통상의 지식을 가진 자라면 본 발명의 요지 및 범위에 벗어나지 않으면서도 다양한 변형, 변경 및 균등한 타 실시 예들이 가능하다는 것을 명백하게 알 수 있을 것이다. 따라서 본 발명의 진정한기술적 보호 범위는 첨부된 청구범위의 기술적인 사상에 의해 정해져야 할 것이다."}
{"patent_id": "10-2022-0140554", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 바람직할 실시 예에 따른 의료기관 간의 연합 학습을 위한 전체 시스템 구성도이다. 도 2는 의료 기관에 구비된 로컬 서버의 상세 구성도이다. 도 3은 본 발명에 따라 연합 학습 방법을 설명하는 전체 흐름도이다. 도 4는 본 발명에 따른 연합 학습 과정 중 로컬 서버와 글로벌 서버 간에 전송되는 가중치 정보를 암호화 하는 과정을 설명하는 흐름도이다. 도 5는 도 4에서 설명한 연합 학습 과정을 구체적으로 설명하고 있는 흐름도로서, 도 5a는 의료기관 A와 글로벌 서버간의 연합학습 과정을 설명하는 흐름도이고, 도 5b는 의료기관 B와 글로벌 서버간의 연합학습 과정을 설명 하는 흐름도이다. 도 6은 본 발명의 실시 예에 따라 로컬 서버(100a ~ 100n)와 연동하는 단말기의 구성도이다. 도 7은 본 발명에 따라 제1 디스플레이부에 표시되는 사용자 인터페이스 화면 구성도이다. 도 8은 본 발명에 따라 제2 디스플레이부에 표시되는 사용자 인터페이스 화면 구성도이다."}
