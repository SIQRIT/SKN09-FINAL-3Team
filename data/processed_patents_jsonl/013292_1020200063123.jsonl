{"patent_id": "10-2020-0063123", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0146088", "출원번호": "10-2020-0063123", "발명의 명칭": "음성인식 장치 및 이를 이용한 외부 재생장치 감지 방법", "출원인": "주식회사 케이티", "발명자": "정재훈"}}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "적어도 하나의 프로세서에 의해 동작하는 음성인식 장치가, 인터페이스로 연결된 외부 재생장치의 온/오프를 감지하는 방법으로서,외부로부터 오디오와 사용자가 발화한 발화음을 수집하고, 상기 음성인식 장치가 생성한 오디오를 에코 기준 오디오로서 수집하는 단계,기 설정되어 있는 음향 재생 경로를 확인하고, 상기 음향 재생 경로를 토대로 상기 외부 재생장치의 온/오프를판정하는 파라미터 및 카운트를 설정하는 단계,상기 수집한 오디오로부터 디지털 변환 수집 오디오를 생성하여 신호 세기를 측정하고, 상기 에코 기준 오디오의 신호 세기를 측정하며, 상기 디지털 변환 수집 오디오의 신호 세기와 상기 발화음의 신호 세기로부터 계산된에코 회귀 손실 상승 값을 기초로, 상기 외부 재생장치의 온/오프 상태를 판단하는 단계, 그리고상기 외부 재생장치의 온/오프 상태에 따라 상기 파라미터와 카운트를 갱신하고, 갱신한 파라미터와 카운트를기초로 상기 확인한 음향 재생 경로로 오디오 신호를 출력하거나 상기 음향 재생 경로를 변경하여 오디오 신호를 출력하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 수집하는 단계는,상기 음성인식 장치 또는 상기 외부 재생장치 중 어느 하나에서 출력되는 오디오를 음향 반향으로 수집하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 음향 반향으로 수집하는 단계 이후에,아날로그의 상기 발화음과 상기 음향 반향을 디지털로 변환하여, 상기 디지털 변환 수집 오디오를 생성하는 단계, 그리고상기 디지털 변환 수집 오디오에서 상기 에코 기준 오디오를 제거하여 에코 제거 오디오를 생성하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 파라미터 및 카운트를 설정하는 단계는,상기 음향 재생 경로가 상기 외부 재생장치로 설정되어 있으면, 상기 파라미터를 1로 설정하고 상기 카운트를 0으로 설정하고,상기 음향 재생 경로가 상기 음성인식 장치로 설정되어 있으면, 상기 파라미터를 0으로 설정하고 상기 카운트를0으로 설정하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,공개특허 10-2021-0146088-3-상기 온/오프 상태를 판단하는 단계는,상기 에코 기준 오디오의 신호 세기를 확인하고, 미리 설정한 제1 임계 세기와 비교하는 단계,상기 디지털 수집 오디오의 신호 세기를 확인하고, 미리 설정한 제2 임계 세기와 비교하는 단계, 그리고상기 디지털 변환 수집 오디오에서 상기 에코 제거 오디오를 제거한 신호의 세기를 에코 회귀 손실 상승 값으로계산하고, 상기 에코 회귀 손실 상승 값과 미리 설정한 임계값을 비교하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서,상기 온/오프 상태를 판단하는 단계는,상기 파라미터가 1로 설정되어 있고 상기 에코 기준 오디오의 신호 세기가 상기 제1 임계 세기보다 세고, 상기디지털 변환 수집 오디오의 신호 세기가 상기 제2 임계 세기보다 세며, 상기 에코 회귀 손실 상승 값이 상기 임계값보다 크면, 상기 외부 재생장치가 온 상태인 것으로 확인하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 외부 재생장치가 온 상태인 것으로 확인하는 단계 이후에,상기 파라미터를 1로 설정하고, 상기 카운트를 하나 증가시키는 단계,증가된 카운트와 미리 설정한 상향 임계값을 비교하는 단계, 그리고상기 증가된 카운트와 상기 상향 임계값의 비교 결과, 그리고 상기 음향 재생 경로에 따라 상기 외부 재생장치또는 상기 음성인식 장치 중 어느 하나로 오디오 신호를 출력하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에 있어서,상기 어느 하나로 오디오 신호를 출력하는 단계는,상기 음향 재생 경로가 상기 음성인식 장치이고 상기 증가된 카운트가 상기 상향 임계값보다 크면, 상기 외부재생장치로 음향 재생 경로를 변경하여 상기 오디오 신호를 출력하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제6항에 있어서,상기 외부 재생장치의 상태를 판단하는 단계는,상기 에코 회귀 손실 상승 값이 상기 임계값보다 작으면, 상기 외부 재생장치가 오프 상태인 것으로 확인하는단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 외부 재생장치가 오프 상태인 것으로 확인하는 단계 이후에,공개특허 10-2021-0146088-4-상기 파라미터를 0으로 설정하고, 상기 카운트를 하나 감소시키는 단계,감소된 카운트와 미리 설정한 하향 임계값을 비교하는 단계, 그리고상기 음향 재생 경로가 상기 외부 재생장치이고, 상기 감소된 카운트가 상기 상향 임계값보다 작으면, 상기 음향 재생 경로를 상기 음성인식 장치로 변경하는 단계를 포함하는, 외부 재생장치 감지 방법."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "인터페이스로 연결된 외부 재생장치의 온/오프를 감지하는 음성인식 장치로서,내부에서 생성된 오디오 신호를 출력하는 출력 장치,상기 외부 재생장치와 연동하여 상기 내부에서 생성된 오디오 신호를 상기 외부 재생장치로 전달하는 인터페이스,사용자가 발화한 발화음과 상기 출력 장치 또는 상기 외부 재생장치에서 출력된 오디오를 음향 반향으로 수집하는 입력 장치, 그리고프로세서를 포함하고,상기 프로세서는, 상기 입력 장치가 수집한 오디오를 변환한 디지털 변환 수집 오디오의 신호 세기와 상기 내부에서 생성된 오디오 신호인 에코 기준 오디오의 신호 세기, 그리고 상기 디지털 변환 수집 오디오의 신호 세기와 상기 발화음의신호 세기로부터 계산된 에코 회귀 손실 상승 값을 기초로 상기 음성인식 장치와 상기 외부 재생장치의 상태를판단하는, 음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 프로세서는,기 설정되어 있는 음향 재생 경로를 확인하고, 상기 확인한 음향 재생 경로를 토대로 상기 외부 재생장치의 온/오프를 판정하는 파라미터 및 카운트를 설정하는, 음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 프로세서는,아날로그의 상기 발화음과 상기 음향 반향을 디지털로 변환하여 디지털 변환 수집 오디오를 생성하고, 상기 디지털 변환 수집 오디오에서 상기 에코 기준 오디오를 제거하여 에코 제거 오디오를 생성하며,상기 에코 기준 오디오의 신호 세기를 확인하고, 상기 디지털 변환 수집 오디오의 신호 세기를 확인하며, 상기디지털 변환 수집 오디오에서 상기 에코 제거 오디오를 제거한 신호의 세기를 에코 회귀 손실 상승 값으로 확인하는, 음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제13항에 있어서,상기 프로세서는,상기 음향 재생 경로가 상기 외부 재생장치로 설정되어 있으면, 상기 파라미터를 1로 설정하고 상기 카운트를 0으로 설정하고,상기 음향 재생 경로가 상기 음성인식 장치로 설정되어 있으면, 상기 파라미터를 0으로 설정하고 상기 카운트를공개특허 10-2021-0146088-5-0으로 설정하는, 음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서,상기 프로세서는,상기 파라미터가 1로 설정되어 있고 상기 에코 기준 오디오의 신호 세기가 상기 제1 임계 세기보다 세고, 상기디지털 변환 수집 오디오의 신호 세기가 상기 제2 임계 세기보다 세며, 상기 에코 회귀 손실 상승 값이 상기 임계값보다 크면, 상기 외부 재생장치가 온 상태인 것으로 확인하고, 상기 에코 회귀 손실 상승 값이 상기 임계값보다 작으면, 상기 외부 재생장치가 오프 상태인 것으로 확인하는,음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제15항에 있어서,상기 프로세서는,상기 외부 재생장치가 온 상태인 것으로 확인하면, 상기 파라미터를 1로 설정하고 상기 카운트를 하나 증가시키며, 증가된 카운트와 미리 설정한 상향 임계값의 비교 결과, 그리고 설정된 음향 재생 경로를 토대로 상기 오디오 신호를 상기 외부 재생장치 또는 상기 음성인식장치 중 어느 하나로 출력하는, 음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제16항에 있어서,상기 프로세서는,상기 외부 재생장치가 오프 상태인 것으로 확인하면, 상기 파라미터를 0으로 설정하고 상기 카운트를 하나 감소시키며, 감소시킨 카운트와 미리 설정한 하향 임계값의 비교 결과, 그리고 설정된 음향 재생 경로를 토대로 상기 오디오 신호를 상기 외부 재생장치 또는 상기 음성인식 장치 중 어느 하나로 출력하는, 음성인식 장치."}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "적어도 하나의 프로세서에 의해 동작하는 음성인식 장치가, 음성인식 장치와 인터페이스로 연결된 외부 재생장치 의 온/오프를 감지하는 방법으로서, 외부로부터 외부로부터 오디오와 사용자가 발화한 발화음을 수집하고, 상기 음성인식 장치가 생성한 오디오를 에코 기준 오디오로서 수집한다. 기 설정되어 있는 음향 재생 경로를 (뒷면에 계속)"}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 에코 회귀 손실 상승(ERLE: Echo Return Loss Enhancement) 값을 이용하여 외부 재생장치를 감지하 는 음성인식 장치 및 이를 이용한 외부 재생장치 감지 방법에 관한 것이다."}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근 인공지능 음성인식 장치의 적용 범위는, 아마존 에코와 같이 스피커를 내장한 인공지능 단말부터, 기가지 니와 같이 인공지능 셋탑박스까지 다양해지고 있다. 대화형 음성 인터페이스를 지원하는 인공지능 단말에서, 음 성처리를 위한 음성 인식 기술은 매우 중요하다. 현재 출시되고 있는 인공지능 음성인식 장치에는 크게 두 종류의 음향출력 인터페이스 중 어느 하나의 음향출력 인터페이스가 적용되어 음성 재생 장치로 사용되고 있다. 하나는 인공지능 음성인식 장치에 내장된 내장 스피커 를 음향출력 인터페이스로 사용하는 것이다. 또 다른 하나는 인공지능 음성인식 장치에 내장되지 않은 외부 음 향장치를 음향출력 인터페이스로 사용하는 것이다. 내장 스피커를 이용하는 경우, 인공지능 음성인식 장치는 기본적인 음질로 음향을 출력하고, 스트리밍 된 음악 이나 음성인식 결과를 TTS(Text To Speech) 음성으로 사용자에게 전달한다. 현재 가장 일반적으로 내장 스피커 를 음향출력 인터페이스로 사용하고 있으며, 인공지능 음성인식 장치는 재생 음성의 지연시간을 정확하게 예측할 수 있다. 또 다른 음향출력 인터페이스인 외부 음향장치는, 인공지능 음성인식 장치와 별도의 인터페스로 연결된 TV 또는 외부 스피커이다. 인공지능 음성인식 장치와 TV는 HDMI(High-Definition Multimedia Interface)로 연결되어 있 고, 외부 스피커와는 외부 스피커에서 지원하는 인터페이스로 연결된다. 즉, 셋탑박스에서 영상과 음성을 재생하면, TV HDMI를 통해 TV로 출력하거나, 외부의 고품질 음향 장비의 연결 을 지원한다. 외부 스피커를 이용하는 경우, 실제 인공지능 음성인식 장치에서 재생되는 음성 데이터와, 마이크 를 통해 녹음된 에코 데이터 사이의 지연 시간이 단말마다 달라진다. 현재 인공지능 음성인식 장치는 내장 스피커와 외부 스피커인 TV 스피커의 서로 다른 에코 지연시간을 동시에 지원할 수 없다. 따라서, 음성 재생 장치가 변경될 때마다 에코 지연을 고정 에코 지연 또는 가변 지연으로 지 원하기 위해, 인공지능 음성인식 장치는 음성 처리를 위한 경로를 재설정해야 한다. 그러나 음성 처리는 에코의 음향 경로 지연(acoustic path delay)과 주변 노이즈 환경에서 적응시간이 필요하기 때문에, 적응시간 동안 인공지능 음성인식 장치의 음성인식 성능은 현저히 떨어지게 된다. 이러한 이유로 전처 리 동작 중 음향 경로 변경을 최소화하는 것이, 음성 처리와 음성 인식 성능에 매우 중요한 전제 조건이다. 예를 들어, 사용자가 TV 시청 중에 음성인식 장치의 호출어를 발화하면, 응답 소리(예를 들어,“네” 소리)와 TTS가 음성인식 장치의 내장 스피커를 통해 재생된다. 음성 처리가 초기화 되어 응답 소리가 재생되고 일정 시 간 이후에 사용자가 명령어를 발화해야만, 음성인식 장치가 명령어에 대한 동작을 수행할 수 있다. 이는 가장 오랫동안 해결되지 못한 VoC(voice of Customer) 중 하나이다. 만약 음향 경로가 TV로 고정된다면, 응답 소리가 재생되는 순간에도 사용자가 자유롭게 명령어 발성하더라도 정상적인 음성 처리와 음성인식 동작이 가능하다. 이렇게 재생 경로 빈도 최소화가 중요한 상황에서도 인공지능 음성인식 장치에서 음향 재생 경로 변 경을 고정시키거나 최소화 하지 못하는 이유는, TV(또는, 외장 스피커)의 동작 여부를 단말에서 확인할 수 없기 때문이다. 만일 TV가 꺼져 있는 상태에서 음향 경로가 HDMI로 고정되어 있다면, 사용자는 자신이 발화한 명령어 에 대한 음성인식 결과 등을 전혀 들을 수 없다."}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "따라서, 본 발명은 기존 음성인식 장치에 별도의 하드웨어 장비를 추가하지 않고도, 에코 회귀 손실 상승(ERLE: Echo Return Loss Enhancement)과 에코 기준음 정보, 그리고 마이크 데이터(MIC raw data)의 입력 상태를 이용 하여, TV의 온/오프 상태를 확인하고 이를 음성 처리에 사용하는 음성인식 장치 및 이를 이용한 외부 재생장치 감지 방법을 제공한다."}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 본 발명의 기술적 과제를 달성하기 위한 본 발명의 하나의 특징인 적어도 하나의 프로세서에 의해 동작하 는 음성인식 장치가, 인터페이스로 연결된 외부 재생장치의 온/오프를 감지하는 방법으로서, 외부로부터 오디오와 사용자가 발화한 발화음을 수집하고, 상기 음성인식 장치가 생성한 오디오를 에코 기준 오 디오로서 수집하는 단계, 기 설정되어 있는 음향 재생 경로를 확인하고, 상기 음향 재생 경로를 토대로 상기 외 부 재생장치의 온/오프를 판정하는 파라미터 및 카운트를 설정하는 단계, 상기 수집한 오디오로부터 디지털 변 환 수집 오디오를 생성하여 신호 세기를 측정하고, 상기 에코 기준 오디오의 신호 세기를 측정하며, 상기 디지 털 변환 수집 오디오의 신호 세기와 상기 발화음의 신호 세기로부터 계산된 에코 회귀 손실 상승 값을 기초로, 상기 외부 재생장치의 온/오프 상태를 판단하는 단계, 그리고 상기 외부 재생장치의 온/오프 상태에 따라 상기 파라미터와 카운트를 갱신하고, 갱신한 파라미터와 카운트를 기초로 상기 확인한 음향 재생 경로로 오디오 신호 를 출력하거나 상기 음향 재생 경로를 변경하여 오디오 신호를 출력하는 단계를 포함한다. 상기 수집하는 단계는, 상기 음성인식 장치 또는 상기 외부 재생장치 중 어느 하나에서 출력되는 오디오를 음향 반향으로 수집할 수 있다. 상기 음향 반향으로 수집하는 단계 이후에, 아날로그의 상기 발화음과 상기 음향 반향을 디지털로 변환하여, 상 기 디지털 변환 수집 오디오를 생성하는 단계, 그리고 상기 디지털 변환 수집 오디오에서 상기 에코 기준 오디 오를 제거하여 에코 제거 오디오를 생성하는 단계를 포함할 수 있다.상기 파라미터 및 카운트를 설정하는 단계는, 상기 음향 재생 경로가 상기 외부 재생장치로 설정되어 있으면, 상기 파라미터를 1로 설정하고 상기 카운트를 0으로 설정하고, 상기 음향 재생 경로가 상기 음성인식 장치로 설 정되어 있으면, 상기 파라미터를 0으로 설정하고 상기 카운트를 0으로 설정할 수 있다. 상기 온/오프 상태를 판단하는 단계는, 상기 에코 기준 오디오의 신호 세기를 확인하고, 미리 설정한 제1 임계 세기와 비교하는 단계, 상기 디지털 수집 오디오의 신호 세기를 확인하고, 미리 설정한 제2 임계 세기와 비교하 는 단계, 그리고 상기 디지털 변환 수집 오디오에서 상기 에코 제거 오디오를 제거한 신호의 세기를 에코 회귀 손실 상승 값으로 계산하고, 상기 에코 회귀 손실 상승 값과 미리 설정한 임계값을 비교하는 단계를 포함할 수 있다. 상기 온/오프 상태를 판단하는 단계는, 상기 파라미터가 1로 설정되어 있고 상기 에코 기준 오디오의 신호 세기 가 상기 제1 임계 세기보다 세고, 상기 디지털 변환 수집 오디오의 신호 세기가 상기 제2 임계 세기보다 세며, 상기 에코 회귀 손실 상승 값이 상기 임계값보다 크면, 상기 외부 재생장치가 온 상태인 것으로 확인하는 단계 를 포함할 수 있다. 상기 외부 재생장치가 온 상태인 것으로 확인하는 단계 이후에, 상기 파라미터를 1로 설정하고, 상기 카운트를 하나 증가시키는 단계, 증가된 카운트와 미리 설정한 상향 임계값을 비교하는 단계, 그리고 상기 증가된 카운트 와 상기 상향 임계값의 비교 결과, 그리고 상기 음향 재생 경로에 따라 상기 외부 재생장치 또는 상기 음성인식 장치 중 어느 하나로 오디오 신호를 출력하는 단계를 포함할 수 있다. 상기 어느 하나로 오디오 신호를 출력하는 단계는, 상기 음향 재생 경로가 상기 음성인식 장치이고 상기 증가된 카운트가 상기 상향 임계값보다 크면, 상기 외부 재생장치로 음향 재생 경로를 변경하여 상기 오디오 신호를 출 력하는 단계를 포함할 수 있다. 상기 외부 재생장치의 상태를 판단하는 단계는, 상기 에코 회귀 손실 상승 값이 상기 임계값보다 작으면, 상기 외부 재생장치가 오프 상태인 것으로 확인하는 단계를 포함할 수 있다. 상기 외부 재생장치가 오프 상태인 것으로 확인하는 단계 이후에, 상기 파라미터를 0으로 설정하고, 상기 카운 트를 하나 감소시키는 단계, 감소된 카운트와 미리 설정한 하향 임계값을 비교하는 단계, 그리고 상기 음향 재 생 경로가 상기 외부 재생장치이고, 상기 감소된 카운트가 상기 상향 임계값보다 작으면, 상기 음향 재생 경로 를 상기 음성인식 장치로 변경하는 단계를 포함할 수 있다. 상기 본 발명의 기술적 과제를 달성하기 위한 본 발명의 또 다른 특징인 인터페이스로 연결된 외부 재생장치의 온/오프를 감지하는 음성인식 장치로서, 내부에서 생성된 오디오 신호를 출력하는 출력 장치, 상기 외부 재생장치와 연동하여 상기 내부에서 생성된 오 디오 신호를 상기 외부 재생장치로 전달하는 인터페이스, 사용자가 발화한 발화음과 상기 출력 장치 또는 상기 외부 재생장치에서 출력된 오디오를 음향 반향으로 수집하는 입력 장치, 그리고 프로세서를 포함하고, 상기 프 로세서는, 상기 입력 장치가 수집한 오디오를 변환한 디지털 변환 수집 오디오의 신호 세기와 상기 내부에서 생 성된 오디오 신호인 에코 기준 오디오의 신호 세기, 그리고 상기 디지털 변환 수집 오디오의 신호 세기와 상기 발화음의 신호 세기로부터 계산된 에코 회귀 손실 상승 값을 기초로 상기 음성인식 장치와 상기 외부 재생장치 의 상태를 판단한다. 상기 프로세서는, 기 설정되어 있는 음향 재생 경로를 확인하고, 상기 확인한 음향 재생 경로를 토대로 상기 외 부 재생장치의 온/오프를 판정하는 파라미터 및 카운트를 설정할 수 있다. 상기 프로세서는, 아날로그의 상기 발화음과 상기 음향 반향을 디지털로 변환하여 디지털 변환 수집 오디오를 생성하고, 상기 디지털 변환 수집 오디오에서 상기 에코 기준 오디오를 제거하여 에코 제거 오디오를 생성하며, 상기 에코 기준 오디오의 신호 세기를 확인하고, 상기 디지털 변환 수집 오디오의 신호 세기를 확인하며, 상기 디지털 변환 수집 오디오에서 상기 에코 제거 오디오를 제거한 신호의 세기를 에코 회귀 손실 상승 값으로 확인 할 수 있다. 상기 프로세서는, 상기 음향 재생 경로가 상기 외부 재생장치로 설정되어 있으면, 상기 파라미터를 1로 설정하 고 상기 카운트를 0으로 설정하고, 상기 음향 재생 경로가 상기 음성인식 장치로 설정되어 있으면, 상기 파라미 터를 0으로 설정하고 상기 카운트를 0으로 설정할 수 있다. 상기 프로세서는, 상기 파라미터가 1로 설정되어 있고 상기 에코 기준 오디오의 신호 세기가 상기 제1 임계 세 기보다 세고, 상기 디지털 변환 수집 오디오의 신호 세기가 상기 제2 임계 세기보다 세며, 상기 에코 회귀 손실상승 값이 상기 임계값보다 크면, 상기 외부 재생장치가 온 상태인 것으로 확인하고, 상기 에코 회귀 손실 상승 값이 상기 임계값보다 작으면, 상기 외부 재생장치가 오프 상태인 것으로 확인할 수 있다. 상기 프로세서는, 상기 외부 재생장치가 온 상태인 것으로 확인하면, 상기 파라미터를 1로 설정하고 상기 카운 트를 하나 증가시키며, 증가된 카운트와 미리 설정한 상향 임계값의 비교 결과, 그리고 설정된 음향 재생 경로 를 토대로 상기 오디오 신호를 상기 외부 재생장치 또는 상기 음성인식 장치 중 어느 하나로 출력할 수 있다. 상기 프로세서는, 상기 외부 재생장치가 오프 상태인 것으로 확인하면, 상기 파라미터를 0으로 설정하고 상기 카운트를 하나 감소시키며, 감소시킨 카운트와 미리 설정한 하향 임계값의 비교 결과, 그리고 설정된 음향 재생 경로를 토대로 상기 오디오 신호를 상기 외부 재생장치 또는 상기 음성인식 장치 중 어느 하나로 출력할 수 있 다."}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면, 인공지능 음성인식 장치에 별도의 하드웨어 장비를 추가하지 않고도, 내장/외장 재생 장치간 의 출력 고정 문제를 해결하여 음성인식 단말의 성능을 개선할 수 있다. 또한, 인공지능 음성인식 장치의 본체와 별도의 오디오 출력을 갖는 5G 모바일 단말, 소형 인공지능 스피커, 인 공지능 음성 인식을 지원하는 TV 등 모든 재생 장치의 성능을 개선할 수 있다."}
{"patent_id": "10-2020-0063123", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참고로 하여 본 발명의 실시예에 대하여 본 발명이 속하는 기술 분야에서 통상의 지 식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나 본 발명은 여러 가지 상이한 형태로 구현 될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 발명을 명확하게 설명하기 위 해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다 른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 이하, 도면을 참조로 하여, 본 발명의 실시예에 따른 에코 회귀 손실 상승 값을 이용하여 외부 재생장치를 감지 하는 음성인식 장치 및 이를 이용한 외부 재생장치 감지 방법을 상세히 설명한다. 도 1은 본 발명의 실시예에 따라 음성인식 장치가 적용된 환경 환경의 예시도이다. 사용자가 인공지능 음성인식 장치(이하, ‘음성인식 장치’라 지칭함)를 호출하는 호출어를 발화하면, 호출어에 대한 응답 소리와 TTS, 그리고 호출어에 대응하는 음성 서비스가 음성인식 장치의 내부 스피커 또는, 음성인식 장치와 인터페이스로 연결된 TV의 스피커 또는 외부 스피커 중 어느 하나를 통 해 출력된다. 여기서, 사용자는 사전에 음성 서비스에 대한 음향을 출력하는 음향 재생 경로를 내부 스피커 또는 외부 스 피커 중 하나로 설정할 수 있다. 사용자가 음향 재생 경로를 설정하는 방법은 다양하므로 본 발명의 실시예 에서는 상세한 설명을 생략한다. 본 발명의 실시예에서는 외부 스피커로 TV를 예로 하여 설명하나, 반드시 TV로 한정되는 것은 아니다. 음성인식 장치는 기 설정되어 있는 음향 재생 경로를 확인하고, 수집한 오디오를 토대로 외부 스피커인 TV의 상태가 온/오프(On/Off) 상태 중 어느 상태인지, 그리고 상태를 확인할 때 마다 TV의 상태에 따 라 설정된 파라미터와 카운트를 설정한다. 음성인식 장치는 설정한 파라미터와 카운트를 토대로 음성 서비스를 기존 설정된 음향 재생 경로로 출력할 것인지, 다른 음향 재생 경로로 변경하여 출력할 것인지 결정한다. 즉, 음성인식 장치는 내부에 삽입된 음성 수집 수단(예를 들어, 마이크)을 통해 오디오 신호를 수집하고, 수집한 오디오 신호에서 사용자가 발화한 발화 음성을 필터링한다. 음성인식 장치는 발화 음성이 필터 링되고 남은 오디오 신호의 세기를 토대로 TV의 온/오프 상태를 감지한다. TV가 온 상태이면 음성인식 장 치는 음향 재생 경로를 TV로 향하도록 하고, TV가 오프 상태이면 음성인식 장치의 내부 스피커 를 통해 음성이 출력되도록 변경한다. 이를 위해, 본 발명의 실시예에서는 음향 재생 경로가 최초 TV로 설 정되어 있는 것을 예로 하여 설명하나, 반드시 이와 같이 한정되는 것은 아니다. 종래에는 음성인식 장치가 TV의 온/오프 상태를 파악하지 못한다. 따라서, 사용자가 발화한 질의어에 대응하는 서비스 음성을 출력하는 음향 경로가 TV로 설정되어 있는 경우에는, 사용자는 음성인식 결과 를 전혀 들을 수 없다. 그러나, 본 발명의 실시예에서는 음성인식 장치가 확인한 TV의 온/오프 상태에 따 라 음성인식 결과를 TV 또는 TV와 연결되어 있는 외부 스피커 또는 음성인식 장치의 내부 스피커 중 어느 하나를 통해 출력하도록 제어함으로써, 음성 처리와 음성 인식의 성능을 향상시킨다. 다음은, 상기에서 설명한 음성인식 장치의 구조에 대해 도 2를 참조로 설명한다. 도 2는 본 발명의 실시예에 따른 음성인식 장치의 구조도이다. 도 2를 참고하면, 적어도 하나의 프로세서에 의해 동작하는 음성인식 장치에서, 본 발명의 동작을 실행하 도록 기술된 명령들(instructions)이 포함된 프로그램을 실행한다. 프로그램은 컴퓨터 판독 가능한 저장매체에 저장될 수 있고, 유통될 수 있다. 음성인식 장치의 하드웨어는 적어도 하나의 프로세서, 메모리, 스토리지, 입력 장치, 그리고 출력 장치를 포함할 수 있고, 버스를 통해 연결될 수 있다. 음성인식 장치는 프로그램을 구동 할 수 있는 운영 체제를 비롯한 각종 소프트웨어가 탑재될 수 있다. 프로세서는 음성인식 장치의 동작을 제어하는 장치로서, 프로그램에 포함된 명령들을 처리하는 다양 한 형태의 프로세서일 수 있고, 예를 들면, CPU(Central Processing Unit), MPU(Micro Processor Unit), MCU(Micro Controller Unit), GPU(Graphic Processing Unit) 등 일 수 있다. 메모리는 본 발명의 동작을 실행하도록 기술된 명령들이 프로세서에 의해 처리되도록 해당 프로그램 을 로드한다. 메모리는 예를 들면, ROM(read only memory), RAM(random access memory) 등 일 수 있다. 스토리지는 본 발명의 동작을 실행하는데 요구되는 각종 데이터, 프로그램 등을 저장한다. 입력 장치는 마이크일 수 있고, 출력 장치는 내부 스피커일 수 있다. 이 외에 음성인식 장치는 유/무선 통신 모듈인 통신 인터페이스(도면 미도시)를 포함할 수 있다. 여기서, 음성인식 장치의 프로세서의 동작에 대해 도 3을 참조로 설명한다. 도 3은 본 발명의 실시예에 따른 음성인식 장치의 동작 예시도이다. 프로세서의 동작을 설명하기 앞서, 본 발명의 실시예에서는 상세한 설명에 기재되는 기호에 대해 먼저 다 음 표 1과 같이 정의한다. 표 1 기호 정의 s 발화 오디오 ye 외부 장치 음향 반향 yi 내부 장치 음향 반향 m 수집 오디오 d 디지털 변환 수집 오디오 x 에코 기준 오디오 e 에코 제거 오디오 도 3에 도시된 바와 같이, 음성인식 장치의 프로세서는 다양한 음성인식 장치의 기능들을 처리 한다. 본 발명의 실시예에서는 설명의 편의를 위하여, 음성인식 장치의 프로세서를 기능별로 오디오재생 모듈, 오디오 출력 모듈, 변환 모듈, 에코 제거 모듈, 측정 모듈, 그리고 외부 장치 탐지 모듈로 구분하여 표시하나, 반드시 이와 같이 한정되는 것은 아니다. 오디오 재생 모듈은 오디오 소스의 압축된 신호(예를 들어, AAC(Advanced Audio Coding), Dolby, MPEG(Moving Picture Experts Group) 등)를 해석하여, 디지털 샘플링된 오디오 신호를 생성한다. 여기서 오디 오 소스는 IPTV, 위성, 케이블 등을 통해 전송되는 방송/VoD 콘텐츠일 수 있다. 또한, 오디오 소스는 게임 등의 어플리케이션에서 생성되는 오디오 신호이거나, CD/DVD 등 오디오 저장 매체일 수도 있다. 오디오 소스는 오디오 재생 모듈 내에 저장되어 있을 수 있고, 방송/VoD 콘텐츠를 제공하는 서비스 제공 서버(도면 미도시)로부터 수신할 수 있다. 또는, 오디오 소스는 스마트 디바이스와 연결된 오디오 저장 매체(도 면 미도시)에 저장되어 있을 수 있다. 프로세서가 오디오 소스로부터 오디오 신호를 생성하는 방법은 이미 알려진 것으로, 본 발명의 실시예에서는 어느 하나의 방법으로 한정하지 않는다. 오디오 출력 모듈은 오디오 재생 모듈에서 생성된 디지털의 오디오 신호를 아날로그로 변환한다. 그 리고 아날로그로 변환된 오디오 신호를 증폭하여, 내부 스피커인 출력 장치를 통해 음성인식 장치의 외부로 출력한다. 여기서, 오디오 재생 모듈에서 오디오 출력 모듈로 전달된 디지털의 오디오 신호는 에코 기준 오디오 (x)로써 에코 제거 모듈로 전달된다. 그리고, 입력 장치는 최초 설정된 음향 재생 경로에 따라 출력 장치에서 출력된 오디오 신호를, 내장 스피커에 대한 음향 반향(acoustic echo)(이하, 설명의 편의를 위하 여 '내부 장치 음향 반향(yi)'이라 지칭함)으로 수집한다. 또한, 입력 장치는 최초 설정된 음향 재생 경로에 따라 음성인식 장치와 인터페이스로 연결된 TV에서 오디오 신호를 출력하고 있다면, 해당 오디오 신호를 TV에 대한 음향 반향(이하, 설명의 편의를 위 하여 '외부 장치 음향 반향(ye)'이라 지칭함)으로 수신한다. 또한, 입력 장치는 사용자가 호출어를 발화하면, 발화 오디오(s)를 수신한다. 변환 모듈은 발화 오디오와 음향 반향(y)을 포함하는 아날로그의 수집 오디오를 디지털로 변환하여, 디지 털 변환 수집 오디오(d)로 생성한다. 여기서, 음향 재생 경로가 내장 스피커인 경우, 수집 오디오의 음향 반향 (y)은 내부 장치 음향 반향(yi)에 해당한다. 그리고, 음향 재생 경로가 외장 스피커인 경우, 수집 오디오의 음 향 반향은 외부 장치 음향 반향(ye)에 해당한다. 에코 제거 모듈은 변환 모듈에서 생성된 디지털 변환 수집 오디오와 오디오 재생 모듈에서 생성 된 에코 기준 오디오를 입력으로 받는다. 에코 제거 모듈은 입력 장치를 통해 다양한 오디오들을 수 신하면, 에코 기준 오디오를 이용하여 디지털 변환 수집 오디오에 포함된 음향 반향을 제거하여 에코 제거 오디 오(e)를 생성한다. 여기서, 에코 제거 모듈이 디지털 변환 수집 오디오에서 에코 기준 오디오를 제거하는 방법은 다양한 방법으로 수행할 수 있으므로, 본 발명의 실시예에서는 어느 하나의 방법으로 한정하지 않는다. 측정 모듈은 음성인식 장치가 오프 상태에서 온 상태로 변경되거나, 에코 제거 모듈로부터 에코 제거 오디오를 수신하면, 음성인식 장치에 설정되어 있는 음향 재생 경로를 확인한다. 음향 재생 경로가 외부 장치로 설정되어 있다면, 측정 모듈은 외부 장치 감지 파라미터(이하, 설명의 편의 를 위하여 '파라미터'라 지칭함)의 값을 1로 설정한다. 본 발명의 실시예에서는 설명의 편의를 위하여, 기본적 으로 설정된 음향 재생 경로가 TV인 것을 예로 하여 설명하므로, 측정 모듈은 파라미터 값을 1로 설 정한다. 측정 모듈은 변환 모듈에서 출력된 디지털 변환 수집 오디오, 에코 제거 모듈에서 출력된 에코 제거 오디오(e), 그리고 오디오 재생 모듈에서 출력된 에코 기준 오디오(x)를 각각 수신한다. 그리고 측정 모듈은 수집한 오디오들을 토대로, 음성인식 장치와 TV의 상태 정보를 확인한다. 여기서, 음성인식 장치의 상태 정보는 입력 장치의 동작 여부, 에코 제거 모듈의 동작 여부를 포함한다. 그리고, TV의 상태 정보는 입력 에코 회귀 손실 상승 값(ERLE)과 외부 장치 음향 반향의 입력 여부를 포함한다. 즉, 음성인식 장치가 상기 표 1에 정의한 다양한 오디오들을 통해 단위 시간 동안의 에너지 레벨을 측정할 수 있다고 가정하면, 측정 모듈은 다음 수학식들을 이용하여 음성인식 장치와 TV의 상태 정보를확인할 수 있다. 여기서, 오디오의 단위 시간당 에너지 레벨은 음향 에너지가 단위 면적 당 전달되는 전달량이 다. 오디오로부터 단위 시간 동안의 에너지 레벨을 측정하는 것은 이미 알려진 것으로, 본 발명의 실시예에서는 측정 방법에 대한 상세한 설명은 생략한다. 측정 모듈이 확인한 상태 정보에는 수집 오디오(m) 세기, 외부 장치 음향 반향(ye) 세기, 입력 에코 회귀 손실 상승(ERLE) 값이 포함되며, 각각 다음과 같이 계산된다. m = s + ye → d = s’ + ye’ 여기서, 음성인식 장치에 설정된 음향 재생 경로가 내부 스피커인 경우에, 수집 오디오(m)의 세기는 m = s + yi → d = s’ + yi’으로 계산된다. s’ = d - ye’ 여기서, s’은 에코 제거 모듈이 디지털 변환 수집 오디오에서 에코 기준 오디오를 제거한 후 남은 발화 오디오의 세기를 의미하는 것으로, ny가 -y’으로 수렴하면, 에코 제거 오디오 e = s’이 된다. EREL = d - e 외부 장치 탐지 모듈은 측정 모듈에서 측정된 상태 정보를 토대로, 외부 재생 장치의 동작 여부 를 탐지한다. 즉, 외부 장치 탐지 모듈은 음성인식 장치에 설정되어 있는 음향 재생 경로를 확인한다. 그리고 외부 장치 탐지 모듈은 외부 장치에서 음향이 출력되고 있는지 여부, 에코 기준 오디오 유무, 입력 장치가 수집한 수집 오디오 유무, 에코 제거 모듈의 동작 유무를 판단한다. 외부 장치 탐지 모듈은 에코 기준 오디오 유무, 입력 장치가 수집한 수집 오디오 유무, 에코 제거 모 듈의 동작 유무는 각각 미리 설정된 임계 세기보다 에코 기준 오디오의 세기, 디지털 변환 수집 오디오의 세기, ERLE의 세기를 비교하여 판단한다. 이때, 미리 설정된 임계 세기를 어느 하나의 수치로 한정하지 않는다. 그리고 외부 장치 탐지 모듈은 판단한 정보를 토대로, 외부 장치 감지 파라미터(이하, 설명의 편의를 위하 여 '파라미터'라 지칭함)와 카운트의 값을 갱신한다. 또한, 외부 장치 탐지 모듈은 갱신한 파라미터와 카 운트의 값을 토대로 현재 설정되어 있는 음향 재생 경로를 통해 계속 음성 서비스를 제공할 것인지, 다른 음향 재생 경로로 변경할 것인지를 결정한다. 외부 장치 탐지 모듈에서 결정한 음향 재생 경로를 토대로, 오디 오 출력 모듈은 음성 서비스를 내부 스피커인 출력 장치 또는 TV를 통해 출력한다. 이와 같이 동작하는 음성인식 장치가 외부 재생장치를 감지하는 방법에 대해 도 4를 참조로 설명한다. 도 4는 본 발명의 실시예에 따른 음성인식 장치가 외부 재생장치를 감지하는 방법에 대한 흐름도이다. 도 4에 도시된 바와 같이, 음성인식 장치는 입력 장치를 이용하여 다양한 오디오들을 수집한다 (S100). 여기서 입력 장치가 수집한 오디오는 발화 오디오와 음향 반향을 포함하며, 음향 반향은 음성인식 장치에 설정되어 있는 음향 재생 경로에 따라 내부 장치 음향 반향 또는 외부 장치 음향 반향 중 어느 하 나에 해당한다. 음성인식 장치는 수집한 오디오를 토대로, 음성인식 장치에 설정되어 있는 음향 재생 경로를 확인한 다(S110). 즉, 사용자에 의해 발화되는 발화음에 대응하는 음성 서비스를 제공하는 수단이 음성인식 장치 의 내부 스피커인지, 음성인식 장치와 인터페이스로 연결된 TV인지 확인한다. 여기서 음향 재생 경로를 사용자에 의해 설정될 수 있으며, 음향 재생 경로를 설정하는 방법은 여러 시점에 다 양하게 수행될 수 있으므로, 본 발명의 실시예에서는 어느 하나로 한정하여 설명하지 않는다. 그리고, 음성인식 장치는 음향 재생 경로가 TV로 설정되어 있다면, 외부 장치 감지 파라미터 즉, 파라미터(pre_TV_on)의 값 을 1로 설정한다. 그리고, 음성인식 장치가 최초 동작하는 경우라면, 카운트를 0으로 설정한다(S120). 여기서, 카운트를 0으 로 설정하는 것은 최초 최초 음성인식 장치가 오프 상태에서 온 상태로 변경된 때에만 설정한다. 그리고 이후 설명할 방법에 따라 변경된 파라미터의 값에 따라 카운트도 동시에 갱신된다. 음성인식 장치는 S110 단계에서 확인한 결과 음향 재생 경로가 TV로 설정되어 있는지 판단한다 (S130). 만약 음향 재생 경로가 내부 스피커로 설정되어 있다면, 발화음에 대한 음성 서비스를 음성인식 장치 의 출력 장치을 통해 수행한다.그러나, S130 단계에서 확인한 결과 음향 재생 경로가 TV로 설정되어 있다면, 음성인식 장치는 S100 단계에서 수집한 오디오를 토대로 음성인식 장치 및 TV의 상태 정보를 확인한다(S140). 여기서, 상태 정보라 함은 외부 장치인 TV에서 음향이 출력되고 있는지 여부, 에코 기준 오디오의 유무, 입력 장치(15 0)가 수집한 수집 오디오의 유무, 에코 제거 모듈의 동작 유무를 판단하기 위해 사용되는 수집 오디오 신 호(m) 세기, 외부 장치 음향 반향(ye) 세기, 입력 에코 회귀 손실 상승(ERLE) 값을 의미한다. 음성인식 장치는 S140 단계에서 확인한 상태 정보를 토대로, 먼저 에코 기준 오디오가 존재하는지 확인한 다(S150). 즉, 음성인식 장치에서 생성한 에코 기준 오디오의 세기가 미리 설정한 임계 세기보다 세면, 음 성인식 장치는 에코 기준 오디오가 존재하는 것으로 판단한다. 에코 기준 오디오가 없다면, S140 단계를 반복 실행한다. 그러나 에코 기준 오디오가 있다면, 음성인식 장치 는 입력 장치가 수집한 수집 오디오가 존재하는지 확인한다(S160). 즉, 음성인식 장치는 입력 장치가 수집한 아날로그의 수집 오디오를 변환 모듈에서 디지털 변환 수집 오디오로 변환하면, 측정 모듈은 변환된 디지털 변환 수집 오디오의 세기와 미리 설정한 임계 세기를 비교한다. 디지털 변환 수집 오디오의 세기가 임계 세기보다 세면, 입력 장치가 수집한 수집 오디오가 있 는 것으로 확인한다. 수집 오디오가 있는 것으로 확인하면, 음성인식 장치의 측정 모듈은 S104 단계에서 확인한 에코 회귀 손실 상승 값이 미리 설정한 임계값 보다 큰지 확인한다(S170). 에코 회귀 손실 상승 값은 상기 수학식 3에서 설명한 방법으로 계산된다. 즉, 음성인식 장치는 동일 시간 동안 입력 장치가 수집한 수집 오디오의 신호 세기에서 에코 제거 모듈에서 에코 기준 오디오가 제거되어 출력된 오디오의 신호 세기의 차이 값으 로 계산한다. 에코 회귀 손실 상승 값이 임계값보다 클 경우, TV에서 음향이 재생되는 것으로 확인하고, 파라미터를 1로 설정한다(S181). 외부 장치 감지 파라미터가 1로 설정되면, 음성인식 장치는 발화음에 대응하는 음성 서비 스를 TV를 통해 사용자에게 제공할 수 있다. 여기서, 에코 기준 오디오의 세기에 따라 에코 제거 모듈의 동작 여부와 무관하게, 음성인식 장치가 S170 단계에서 에코 회귀 손실 상승 값이 임계값보다 작거나 큰 것으로 판단하는 일시적인 판단 오류가 발생할 수 있다. 신호 관점에서 보면 순간적인 디지털 글리치(glitch)가 발생한 것으로 간주될 수 있다. 따라서, 글리 치에 대한 오동작을 보완하기 위하여, 음성인식 장치는 최종 판정 절차를 수행한다. 즉, S170 단계에서 판단한 결과에 따라 외부 장치 감지 파라미터의 값을 설정할 때, 음성인식 장치는 S120 단계에서 0으로 설정한 카운트 값을 갱신한다. 본 발명의 실시예에서는 TV가 켜진 상태인 것으로 확인하면 카운트를 1 증가시키고, TV가 꺼진 상태인 것으로 확인하면 카운트를 1 감소시킨다. S181 단계에서는 파라미터가 1로 설정되었으므로, 음성인식 장치는 카운트를 1 증가시킨다(S182). 그리고, 증가시킨 카운트의 값이 미리 설정한 상향 임계값보다 큰지 확인한다(S183). 만약, 증가시킨 카운트 값이 상향 임계값보다 작은 경우, 기 설정된 음향 재생 경로를 통해 음성 서비스를 지속 적으로 제공한다(S190). 본 발명의 실시예예서는 S130 단계에서 음향 재생 경로가 TV인 것으로 확인하였기 때문에, 음성인식 장치는 TV를 통해 지속적으로 음성 서비스를 제공한다. 그러나, 증가시킨 카운트 값이 상향 임계값보다 큰 경우, 기 설정된 음향 재생 경로를 변경하여 음성 서비스를 제공한다(S200). 이 경우는, 현재 설정된 음향 재생 경로가 내부 출력 장치인 경우, TV로 변경하여 음성 서비스를 제공하는 경우에 해당한다. 한편 상기 S170 단계에서 확인한 결과 에코 회귀 손실 상승 값이 임계값보다 작으면, 음성인식 장치는 TV가 오프 상태이거나 에코 제거 모듈이 동작하지 않는 것으로 확인한다. 따라서, 음성인식 장치 는 외부 장치 감지 파라미터의 값을 0으로 설정한다(S184). 그리고, 음성인식 장치는 카운트를 1 감소시킨 후(S185), 감소시킨 카운트의 값이 미리 설정한 하향 임계 값보다 큰지 확인한다(S186). 만약, 감소시킨 카운트 값이 하향 임계값보다 큰 경우, 기 설정된 음향 재생 경로 를 통해 음성 서비스를 지속적으로 제공한다(S190). 본 발명의 실시예예서는 S130 단계에서 음향 재생 경로가 TV인 것으로 확인하였기 때문에, 음성인식 장치는 TV를 통해 지속적으로 음성 서비스를 제공한 다.그러나, 감소시킨 카운트 값이 하향 임계값보다 작은 경우, 기 설정된 음향 재생 경로를 변경하여 음성 서비스 를 제공한다(S200). 이 경우는, 현재 설정된 음향 재생 경로가 TV인 경우 내부 출력 장치로 변경하여 음성 서비스를 제공하는 경우에 해당한다. 도 5는 본 발명의 실시예에 따른 음성 처리 결과를 비교한 성능 그래프이다. 도 5의 (a)는 종래 기술에 따라 음향 재생 경로가 고정되어 있는 경우의 음성 처리 결과를 나타낸 그래프이고, 도 5의 (b)는 본 발명의 실시예에 따라 외부 재생 장치의 온/오프 상태를 인식할 때의 음성 처리 결과를 나타낸 그래프이다. 도 5에 도시된 바와 같이, 본 발명의 실시예에 따라 외부 재생 장치인 TV의 온/오프 상태를 인지하고 음향 재생 경로를 변경하는 경우의 에코량이, 종래에 음향 경로가 고정되어 있는 경우 음성 처리 결과 잔여 에코 량 보다 작음을 알 수 있다. 이는, 음성인식 장치가 수 초 이내에 TV의 온/오프 상태를 파악할 수 있고, 파악한 결과에 따라 음향 재생 경로를 변경하기 때문에, 음성인식 성능을 향상시킬 수 있다. 이상에서 본 발명의 실시예에 대하여 상세하게 설명하였지만 본 발명의 권리범위는 이에 한정되는 것은 아니고 다음의 청구범위에서 정의하고 있는 본 발명의 기본 개념을 이용한 당업자의 여러 변형 및 개량 형태 또한 본 발명의 권리범위에 속하는 것이다."}
{"patent_id": "10-2020-0063123", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 실시예에 따라 음성인식 장치가 적용된 환경 환경의 예시도이다. 도 2는 본 발명의 실시예에 따른 음성인식 장치의 구조도이다. 도 3은 본 발명의 실시예에 따른 음성인식 장치의 동작 예시도이다. 도 4는 본 발명의 실시예에 따른 음성인식 장치가 외부 재생장치를 감지하는 방법에 대한 흐름도이다. 도 5는 본 발명의 실시예에 따른 음성 처리 결과를 비교한 성능 그래프이다."}
