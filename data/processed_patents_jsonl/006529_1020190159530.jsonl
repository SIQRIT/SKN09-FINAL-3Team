{"patent_id": "10-2019-0159530", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0041464", "출원번호": "10-2019-0159530", "발명의 명칭": "실시간 동작추적을 통한 인공지능 기반의 낙상 예방 장치 및 방법", "출원인": "요타코퍼레이션", "발명자": "이충형"}}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "실시간 동작 추적을 통한 낙상 예방 방법에 있어서,동작 인식 장치를 이용하여 사용자의 움직임을 추적하고 대응하는 제1 스켈레톤 정보를 획득하는 제1단계와,상기 제1 스켈레톤 정보에 기초하여 상기 사용자의 소정의 관절의 위치가 미리 설정된 제1 경계 영역 조건에 대응하는 위치에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판단하는 제2단계와,상기 판단 결과, 상기 소정의 관절의 위치가 이탈하였다면 경고 신호를 전송하는 제3단계를 포함하는 낙상 예방방법."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 제2단계는상기 제1 스켈레톤의 제1 관절군의 각 관절의 위치가 상기 제1 경계 영역 조건에 대응하는 위치라면 상기 제1스켈레톤 정보를 추적 목록에 등록하고, 상기 제1 스켈레톤의 제2 관절군의 각 관절의 위치가 상기 제2 경계 영역 조건에 대응하는 위치이고, 상기 추적목록에 제2 스켈레톤 정보가 존재한다면 상기 소정의 관절의 위치가 이탈하였다고 판단하되, 상기 제2 스켈레톤은 상기 제1 스켈레톤의 이전 영상 프레임에서 추출되는 것을 특징으로 하는 낙상 예방 방법."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 제1단계는 상기 추적 목록에 제2 스켈레톤 정보가 있는 경우, 상기 제2 스켈레톤 정보와상기 제1 스켈레톤 정보를 비교하여 동작의 연속성이 인정되는지를 판단하되, 상기 제1 스켈레톤의 최외곽 좌표를 기초로 형성한 제1 사각형과 상기 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적 대비 상기 제1 사각형과 제2 사각형이 겹치는 영역의 면적이 소정의 비율 이상이면 동작의 연속성을 인정하고,상기 제2단계는 상기 동작의 연속성이 인정되는 경우에 상기 관절의 위치가 이탈하였는지를 판단하는 것을 특징으로 하는 낙상 예방 방법."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 제1단계는상기 동작 인식 장치를 이용하여 획득한 영상에서 관절의 위치와 상기 관절 간의 방향을 예측하고, 이를 기초로상기 관절을 연결하여 적어도 하나의 스켈레톤을 추출하고, 복수의 스켈레톤이 추출되는 경우, 상기 복수의 각 스켈레톤을 추적 목록에 등록된 제2 스켈레톤과 비교하여 동작의 연속성이 인정되는 스켈레톤을 상기 제1 스켈레톤으로 특정하되, 상기 각 스켈레톤의 최외곽 좌표를 기초로 형성한 각 사각형과 상기 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적과 겹치는 면적의 비율이 소정의 비율 이상인 스켈레톤을 상기 제1 스켈레톤으로 특정하는 것을 특징으로 하는 낙상 예방 방법."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "실시간 동작 추적을 통한 낙상 예방 장치에 있어서,동작인식장치를 이용하여 사용자의 움직임을 추적하고 대응하는 제1 스켈레톤 정보를 획득하는 스켈레톤 정보획득부와공개특허 10-2021-0041464-3-상기 제1 스켈레톤 정보에 기초하여 상기 사용자의 소정의 관절의 위치가 미리 설정된 제1 경계 영역 조건에 대응하는 위치에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판단하는 위치 이탈 판단부와,상기 판단 결과, 상기 소정의 관절의 위치가 이탈하였다면 경고 신호를 전송하는 낙상 경고부를 포함하는 낙상예방 장치."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서, 상기 위치 이탈 판단부는상기 제1 스켈레톤의 제1 관절군의 각 관절의 위치가 상기 제1 경계 영역 조건에 대응하는 위치라면 상기 제1스켈레톤 정보를 추적 목록에 등록하고, 그렇지 않고, 상기 제1 스켈레톤의 제2 관절군의 각 관절의 위치가 상기 제2 경계 영역 조건에 대응하는 위치이고, 상기 추적 목록에 제2 스켈레톤 정보가 존재한다면 상기 소정의 관절의 위치가 이탈하였다고 판단하되, 상기 소정의 관절은 상기 제1 관절군과 상기 제2 관절군에 포함되고 상기 제2 스켈레톤은 상기 제1 스켈레톤의이전 영상 프레임에서 추출되는 것을 특징으로 하는 낙상 예방 장치."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서, 상기 스켈레톤 정보 획득부는상기 추적 목록에 기존에 등록된 제2 스켈레톤 정보가 있는 경우, 상기 제2 스켈레톤 정보와 상기 제1 스켈레톤정보를 비교하여 동작의 연속성이 인정되는지 판단하되,상기 제1 스켈레톤의 최외곽 좌표를 기초로 형성한 제1 사각형과 상기 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적 대비 상기 제1 사각형과 제2 사각형이 겹치는 영역의 면적이 소정의비율 이상이면 동작의 연속성을 인정하고,상기 위치 이탈 판단부는 상기 동작의 연속성이 인정되는 경우에 상기 소정의 관절의 위치가 이탈하였는지 판단하는 것을 특징으로 하는 낙상 예방 장치."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에 있어서, 상기 스켈레톤 정보 획득부는상기 동작 인식 장치를 이용하여 획득한 영상에서 관절의 위치와 상기 관절 간의 방향을 예측하고, 이를 기초로상기 관절을 연결하여 적어도 하나의 스켈레톤을 추출하고, 복수의 스켈레톤이 추출되는 경우, 상기 복수의 각 스켈레톤을 추적 목록에 등록된 제2 스켈레톤과 비교하여 동작의 연속성이 인정되는 스켈레톤을 상기 제1 스켈레톤으로 특정하는 것을 특징으로 하는 낙상 예방 장치."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항의 낙상 예방 방법을 수행하는 프로그램을 기록한 컴퓨터 판독 가능한 기록매체."}
{"patent_id": "10-2019-0159530", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항의 낙상 예방 방법을 실행하는 프로그램이 어플리케이션으로 제작되어 저장된 기록매체."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "실시간 동작 추적을 통한 낙상 예방 방법 및 장치가 개시된다. 본 발명의 실시간 동작 추적을 통한 낙상 예방 방 법은 동작 인식 장치를 이용하여 사용자의 움직임을 추적하고 대응하는 제1 스켈레톤 정보를 획득하는 제1단계와, 상기 제1 스켈레톤 정보에 기초하여 상기 사용자의 소정의 관절의 위치가 미리 설정된 제1 경계 영역 조건에 대응하는 위치에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판단하는 제2단계와, 상기 판단 결과, 상기 소정의 관절의 위치가 이탈하였다면 경고 신호를 전송하는 제3단계를 포함하여 구성된다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 동작추적을 통한 인공지능 기반의 낙상 예방 장치 및 방법에 관한 것이다. 좀 더 상세하게는, 본 발 명은 사용자의 일련의 동작을 추적한 영상을 분석하여 낙상을 예측하는 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "병원 내 환자의 낙상 사고는 대부분 환자가 홀로 침대에서 내려오거나 올라갈 때, 또는 잠을 자면서 몸을 움직 일 때 발생할 수 있다. 환자가 혼자 있을 때 낙상 사고가 발생하게 되면, 제때 대응하지 못해서 중상이나 사망 사고로 이어질 수 있다. 이와 같은 낙상 사고를 방지하기 위해서 종래에 환자의 낙상방지를 위한 방법은 주로 침대 프레임에 가드나 에 어백 같은 보조물을 설치하거나 속도센서나 압력센서를 이용하여 환자의 낙상을 감지하는 방법을 제시하고 있다. 또한, 특허 10-1504968호는 적외선 감지센서를 활용한 낙상환자 감지시스템을 제안하고 있다. 그러나 침 대에 보조물을 설치하게 되면 환자의 거동을 불편하게 만드는 단점이 있고, 속도 센서, 압력센서, 적외선 감지 센서를 이용하는 방법은 속도나 거리의 변화에 따라 낙상을 정확하게 예측하기 어렵고, 낙상이 발생한 이후에 탐지할 수 있기 때문에 낙상을 예방하기 어렵다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "상기와 같은 문제점을 해결하기 위한 본 발명의 목적은, 낙상 위험을 정확하게 예측하여 예방할 수 있는 낙상 예방 장치를 제공하는 데 있다. 상기와 같은 문제점을 해결하기 위한 본 발명의 다른 목적은, 낙상 위험을 정확하게 예측하여 예방할 수 있는 낙상 예방 장치를 제공하는 데 있다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 목적을 달성하기 위한 본 발명은 동작인식장치를 이용하여 사용자의 움직임을 추적하고 대응하는 제1 스켈 레톤 정보를 획득하는 스켈레톤 정보 획득부와, 상기 제1 스켈레톤 정보에 기초하여 상기 사용자의 소정의 관절 의 위치가 미리 설정된 제1 경계 영역 조건에 대응하는 위치에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판단하는 위치 이탈 판단부와, 상기 판단 결과, 상기 소정의 관절의 위치가 이탈하였다면 경고 신호를 전송하는 낙상 경고부를 포함하는 낙상 예방 장치를 제공한다. 여기서, 상기 위치 이탈 판단부는 상기 제1 스켈레톤의 제1 관절군의 각 관절의 위치가 상기 제1 경계 영역 조 건에 대응하는 위치라면 상기 제1 스켈레톤 정보를 추적 목록에 등록하고, 그렇지 않고, 상기 제1 스켈레톤의 제2 관절군의 각 관절의 위치가 상기 제2 경계 영역 조건에 대응하는 위치이고, 상기 추적 목록에 제2 스켈레톤 정보가 존재한다면 상기 소정의 관절의 위치가 이탈하였다고 판단하되, 상기 소정의 관절은 상기 제1 관절군과 상기 제2 관절군에 포함되고 상기 제2 스켈레톤은 상기 제1 스켈레톤의 이전 영상 프레임에서 추출되는 것을 특 징으로 한다. 여기서, 상기 스켈레톤 정보 획득부는 상기 추적 목록에 기존에 등록된 제2 스켈레톤 정보가 있는 경우, 상기 제2 스켈레톤 정보와 상기 제1 스켈레톤 정보를 비교하여 동작의 연속성이 인정되는지 판단하되, 상기 제1 스켈 레톤의 최외곽 좌표를 기초로 형성한 제1 사각형과 상기 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각 형이 차지하는 영역의 면적 대비 상기 두 사각형이 겹치는 영역의 면적이 소정의 비율 이상이면 동작의 연속성 을 인정하고, 상기 위치 이탈 판단부는 상기 동작의 연속성이 인정되는 경우에 상기 소정의 관절의 위치가 이탈 하였는지 판단하는 것을 특징으로 한다. 여기서, 상기 스켈레톤 정보 획득부는 상기 동작 인식 장치를 이용하여 획득한 영상에서 관절의 위치와 상기 관 절 간의 방향을 예측하고, 이를 기초로 상기 관절을 연결하여 적어도 하나의 스켈레톤을 추출하고, 복수의 스켈 레톤이 추출되는 경우, 상기 복수의 각 스켈레톤을 추적 목록에 등록된 제2 스켈레톤과 비교하여 동작의 연속성 이 인정되는 스켈레톤을 상기 제1 스켈레톤으로 특정하는 것을 특징으로 한다. 상기 다른 목적을 달성하기 위한 본 발명은 동작 인식 장치를 이용하여 사용자의 움직임을 추적하고 대응하는 제1 스켈레톤 정보를 획득하는 제1단계와, 상기 제1 스켈레톤 정보에 기초하여 상기 사용자의 소정의 관절의 위 치가 미리 설정된 제1 경계 영역 조건에 대응하는 위치에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판단하는 제2단계와, 상기 판단 결과, 상기 소정의 관절의 위치가 이탈하였다면 경고 신호를 전송 하는 제3단계를 포함하는 낙상 예방 방법을 제공한다. 여기서, 상기 제2단계는 상기 제1 스켈레톤의 제1 관절군의 각 관절의 위치가 상기 제1 경계 영역 조건에 대응 하는 위치라면 상기 제1 스켈레톤 정보를 추적 목록에 등록하고, 상기 제1 스켈레톤의 제2 관절군의 각 관절의 위치가 상기 제2 경계 영역 조건에 대응하는 위치이고, 상기 추적 목록에 제2 스켈레톤 정보가 존재한다면 상기 소정의 관절의 위치가 이탈하였다고 판단하되, 상기 제2 스켈레톤은 상기 제1 스켈레톤의 이전 영상 프레임에서추출되는 것을 특징으로 한다. 여기서, 상기 제1단계는 상기 추적 목록에 제2 스켈레톤 정보가 있는 경우, 상기 제2 스켈레톤 정보와 상기 제1 스켈레톤 정보를 비교하여 동작의 연속성이 인정되는지를 판단하되, 상기 제1 스켈레톤의 최외곽 좌표를 기초로 형성한 제1 사각형과 상기 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적 대 비 상기 두 사각형이 겹치는 영역의 면적이 소정의 비율 이상이면 동작의 연속성을 인정하고, 상기 제2단계는 상기 동작의 연속성이 인정되는 경우에 상기 관절의 위치가 이탈하였는지를 판단하는 것을 특징으로 한다. 여기서, 상기 제1단계는 상기 동작 인식 장치를 이용하여 획득한 영상에서 관절의 위치와 상기 관절 간의 방향 을 예측하고, 이를 기초로 상기 관절을 연결하여 적어도 하나의 스켈레톤을 추출하고, 복수의 스켈레톤이 추출 되는 경우, 상기 복수의 각 스켈레톤을 추적 목록에 등록된 제2 스켈레톤과 비교하여 동작의 연속성이 인정되는 스켈레톤을 상기 제1 스켈레톤으로 특정하되, 상기 각 스켈레톤의 최외곽 좌표를 기초로 형성한 각 사각형과 상 기 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적과 겹치는 면적의 비율이 소정의 비율 이상인 스켈레톤을 상기 제1 스켈레톤으로 특정하는 것을 특징으로 한다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "상기 설명한 본 발명의 실시간 동작 추적을 통한 낙상 예방 장치 및 방법은 촬영된 이미지를 실시간 획득하여 스켈레톤을 검출하고 이전 영상의 스켈레톤과 비교하여 사용자의 낙상 위험을 사전에 탐지할 수 있으며, 보호자 나 간병인에게 겨고신호를 보내줌으로써 낙상을 방지할 수 있고, 사고 발생시 신속하게 대응할 수 있다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명은 다양한 변경을 가할 수 있고 여러 가지 실시예를 가질 수 있는바, 특정 실시예들을 도면에 예시하고 상세한 설명에 상세하게 설명하고자 한다. 그러나 이는 본 발명을 특정한 실시 형태에 대해 한정하려는 것이 아 니며, 본 발명의 사상 및 기술 범위에 포함되는 모든 변경, 균등물 내지 대체물을 포함하는 것으로 이해되어야 한다. 각 도면을 설명하면서 유사한 참조부호를 유사한 구성요소에 대해 사용하였다. 제1, 제2, A, B 등의 용어는 다양한 구성요소들을 설명하는데 사용될 수 있지만, 상기 구성요소들은 상기 용어 들에 의해 한정되어서는 안 된다. 상기 용어들은 하나의 구성요소를 다른 구성요소로부터 구별하는 목적으로만 사용된다. 예를 들어, 본 발명의 권리 범위를 벗어나지 않으면서 제1 구성요소는 제2 구성요소로 명명될 수 있 고, 유사하게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 및/또는 이라는 용어는 복수의 관련된 기재된 항 목들의 조합 또는 복수의 관련된 기재된 항목들 중의 어느 항목을 포함한다. 어떤 구성요소가 다른 구성요소에 \"연결되어\" 있다거나 \"접속되어\" 있다고 언급된 때에는, 그 다른 구성요소에 직접적으로 연결되어 있거나 또는 접속되어 있을 수도 있지만, 중간에 다른 구성요소가 존재할 수도 있다고 이 해되어야 할 것이다. 반면에, 어떤 구성요소가 다른 구성요소에 \"직접 연결되어\" 있다거나 \"직접 접속되어\" 있다고 언급된 때에는, 중간에 다른 구성요소가 존재하지 않은 것으로 이해되어야 할 것이다. 본 출원에서 사용한 용어는 단지 특정한 실시예를 설명하기 위해 사용된 것으로, 본 발명을 한정하려는 의도가 아니다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, \"포함 하다\" 또는 \"가지다\" 등의 용어는 명세서상에 기재된 특징, 숫자, 단계, 동작, 구성요소, 부품 또는 이들을 조 합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구성요소, 부 품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 다르게 정의되지 않는 한, 기술적이거나 과학적인 용어를 포함해서 여기서 사용되는 모든 용어들은 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 것과 동일한 의미가 있다. 일반적으 로 사용되는 사전에 정의되어 있는 것과 같은 용어들은 관련 기술의 문맥상의 의미와 일치하는 의미로 해석되어 야 하며, 본 출원에서 명백하게 정의하지 않는 한, 이상적이거나 과도하게 형식적인 의미로 해석되지 않는다. 이하, 본 발명에 따른 바람직한 실시예를 첨부된 도면을 참조하여 상세하게 설명한다. 도 1은 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 시스템의 개념도이다. 도 1을 참조하면, 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 시스템은 환자의 동작을 촬영하는 동작인식장치와, 동작인식장치에서 획득한 영상에서 실시간으로 환자의 동작을 추적하여 낙상 위험을 탐지하고 경고하는 낙상 예방 장치와, 낙상 예방 장치로부터 낙상 경고 신호를 수신하여 사용 자에게 통지하는 사용자 단말이나 경고 신호를 발하는 경고신호 발생기를 포함하여 구성될 수 있다. 예를 들면, 낙상 예방 장치가 카메라를 통해 실시간으로 환자의 동작을 추적하면서, 환자가 침상에서 내려오거나, 누워있다가 떨어지는 동작 등을 탐지하여 보호자나 간호사 등의 관계자 단말로 경고 신호를 보 내줌으로써 낙상을 예방하고, 사고 발생시 신속하게 대응할 수 있도록 지원한다. 여기서, 동작인식장치는 카메라, CCTV, 동작 감지 센서 등 사람의 동작을 감지하거나 영상을 획득할 수 있 는 다양한 장치를 포함할 수 있다. 또한, 낙상 예방 장치는 카메라나 동작 인식 센서와 같은 동작인식장치 가 장착된 단말일 수 있으며, 또한, 낙상 예방 장치는 동작인식장치와 유무선 네트워크를 통해서 연결되어 촬영된 영상을 수신하는 단말 또는 서버로 구비될 수 있다. 낙상 경고를 수신하는 사용자 단말은 문자, 인스턴트 메시지, 경고 신호 등을 수신할 수 있는 휴대폰, 컴퓨터, PDA, 인공지능 스피커, 각종 신호 발 생기 등을 포함할 수 있다. 이하, 도면을 참조하여 본 발명의 일 실시예에 따른 낙상 예방 장치의 상세 구성에 대하여 설명한다. 도 2는 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 장치의 구성을 보여주는 블록도이다. 도 2를 참조하면, 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 장치는 스켈레톤 정보 획득부, 위치 이탈 판단부 및 낙상 경고부를 포함하여 구성될 수 있다. 또한, 도 2를 참조하면, 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 장치의 각 구성 은 다음과 같이 설명될 수 있다. 스켈레톤 정보 획득부는, 동작 인식 장치, 예를 들면 카메라를 이용하여 사용자의 움직임을 추적하고, 추적한 사용자의 영상에서 제1 스켈레톤 정보를 획득할 수 있다. 즉, 스켈레톤 정보 획득부는 카메라를 이용하여 획득한 영상에서 스켈레톤 형식으로 사람을 검출하고, 복수의 관절(keypoints)의 위치를 추출하고 관절 사이의 방향을 예측할 수 있다. 또한, 이를 기초로 관절들을 연결하여 적어도 하나의 스켈레톤을 추출할 수 있다. 이때, 사람(스켈레톤) 검출은 OpenPose 알고리즘을 사용할 수 있다. 도 3은 본 발명의 일 실시예에 따른 낙상 예방 장치에서 스켈레톤을 추출하는 과정을 보여주는 도면이다. 도 3을 참조하면, 스켈레톤 정보 획득부는 OpenPose 알고리즘을 이용하여, 영상에서 사람을 추적하고(a), VGG 기반의 딥러닝을 이용하여 관절을 추출하고(b), 각 관절 사이의 방향을 나타내는 PAFs(Part AffinityFields)를 추출할 수 있다(c). 다음으로, 추출된 관절 간의 방향 유닛 벡터 및 관절 간의 방향 벡터에 해당하는 PAFs를 이용하여 관절을 묶어서 스켈레톤을 추출할 수 있다(d). OpenPose는 알려진 알고리즘으로 상세한 설명을 생략한다. 스켈레톤 검출방법은 알려진 각종 알고리즘을 이용할 수 있으며 본 실시예에 한정되지 않는다. 도 4는 본 발명의 일 실시예에 따른 낙상 예방 장치에서 사용자의 동작을 추적하여 추출한 스켈레톤을 시계열로 나열한 도면이다. 도 4의 영상은, 환자가 침대 위에서 내려가는 동작을 추적한 영상으로, 연속되는 영상에서 스켈레톤을 추출하여 시간 순서로 나열한 것이다. (a), (b)의 영상에서 환자는 침대 위에 앉아 있고 후속하는 영상 (d)~(h)의 경우 환자의 골반은 침대에 있지만 발목이나 무릎이 침대 바깥에 있으므로 내려가는 동작이라고 판단할 수 있다. 그 러나 반대로 침대로 올라가는 경우에도 시간 순서가 바뀐 비슷한 영상이 추적될 수 있다. 따라서, 도 4에 도시된 것처럼, 연속되는 영상에서 스켈레톤을 추출하여 순서대로 나열하면, 스켈레톤의 각 관 절의 위치가 어느 방향으로 이동했는지 알 수 있고, 이를 기초로 후속 동작을 예측하여 낙상 위험을 판단할 수 있다. 이전 영상 프레임의 스켈레톤은 추적목록에 등록(제2 스켈레톤)되어 후속하는 프레임에서 추출한 스켈레 톤(제1 스켈레톤)의 낙상 위험 여부를 판단하는 기준이 될 수 있다. 예를 들면, 내려가는 동작에서 위치 이탈 (안전 위치 이탈)의 조건(제2 경계영역 조건)이 \"발목이 침대 밖에 있는 경우\"인 경우 (c)~(h)의 스켈레톤은 모 두 위치 이탈로 판단될 수 있다. 또는, 위치 이탈조건이 \"두 발목과 두 무릎이 모두 침대 밖에 있는 경우\"라면 (g),(h)의 스켈레톤이 위치 이탈로 판단될 수 있다. 영상에서 추출한 스켈레톤은 추적조건을 만족하는 경우 추 적 목록에 등록될 수 있다. 본 실시예에서는, 스켈레톤이 제1 경계 영역 조건을 만족하는 경우 추적 목록에 등 록될 수 있다. 제1 경계 영역 조건은, 예를 들면, 환자가 낙상 위험이 없는 안전한 위치에 있다고 판단할 수 있 는 조건일 수 있으며, 추후 좀 더 상세하게 설명한다."}
{"patent_id": "10-2019-0159530", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "앞에서 설명한 것처럼, 제1 스켈레톤은 추적목록에 등록된 제2 스켈레톤과 비교하여 동작의 연속성이 인정되면 제1 스켈레톤을 기초로 낙상 위험 여부에 대하여 판단을 진행할 수 있다. 반면, 제1 스켈레톤이 제2 스켈레톤과 일치하지 않는다면, 즉 두 스켈레톤 간의 동작의 연속성이 인정되지 않는다면, 위치 이탈 여부에 대해서 판단하 지 않고 후속 영상 프레임을 추적할 수 있다. 또한, 경우에 따라서 추적 목록을 갱신하거나 초기화(삭제)한 후 에 후속 영상을 추적할 수 있다. 이때, 추적 목록에 등록된 제2 스켈레톤 정보는 추적 대상이 되는 사용자의 이전 영상 프레임의 스켈레톤 정보 일 수 있다. 예를 들면, 추적대상 사용자의 스켈레톤 정보를 최초로 획득한 경우(또는 추적목록 초기화 후 최초 로 추적대상 사용자의 스켈레톤 영상을 획득하는 경우 등)에 영상 내 사용자의 소정의 관절의 위치가 제1경계 영역(예를 들면 침상 내에 설정된 특정 영역) 조건에 대응하는 위치에 있다면, 해당 스켈레톤 정보는 추적 목록 에 등록되어, 후속 영상 프레임의 스켈레톤의 동작의 연속성(동일인)을 판단하는 비교 대상이 될 수 있다. 동작 의 연속성 판단을 통해서 추적대상 사용자 이외의 사람이 영상에 끼어들거나, 사용자를 가리는 경우와 같이 다 양한 돌발상황에서 발생하는 왜곡을 방지할 수 있다, 또한, 추적 목록의 제2 스켈레톤 정보는 후속 영상 프레임에서 추출한 제1 스켈레톤 정보로 지속적으로 갱신될 수 있다. 즉, 추적목록의 제2 스켈레톤 정보는 제1 스켈레톤이 낙상 위험의 조건에 해당한다고 판단하지 않는 이상 계속해서 제1 스켈레톤 정보로 대치되고, 낙상 경고 이후에 초기화(삭제)될 수 있다. 한편, 카메라 앵글 내에 여러 사람(환자, 보호자 등)이 포착되는 경우 복수의 스켈레톤이 추출될 수 있다. 이 경우, 추출된 복수의 스켈레톤 중 추적 목록에 등록된 제2 스켈레톤과 동작의 연속성(동일인)이 인정되는 스켈 레톤을 추적대상 스켈레톤(제1 스켈레톤)으로 특정할 수 있다. 만일, 복수의 스켈레톤이 검출되었으나, 추적목록 내에 동작의 연속성이 인정되는 스켈레톤이 없거나, 추적목록 이 삭제되었다면 제1 스켈레톤을 특정하기 어렵다. 이 경우, 스켈레톤 정보 획득부는 추적 대상을 특정할 수 없다는 취지의 경고 메시지를 발송하고, 낙상 위험에 대한 판단을 진행하지 않는다. 본 발명의 일 실시예에 따른, 제1 스켈레톤과 제2 스켈레톤의 동작의 연속성 여부를 판단하는 방법은 다음과 같 다.도 5는 본 발명의 일 실시예에 따른 낙상 예방 장치에서 제1 스켈레톤과 제2 스켈레톤의 동작의 연속성을 판단 하는 방법을 보여주는 도면이다. 도 5를 참조하면, 영상에서 추출한 제1 스켈레톤(a)과 추적 목록에 등록된 제2 스켈레톤(c) 간의 동작의 연속성 을 판단하기 위하여, 제1 스켈레톤(a)의 최외곽 좌표를 기초로 형성한 제1 사각형과 제2 스켈레톤(c)의 최 외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적 대비 상기 두 사각형이 겹치는 영역 의 면적이 소정의 비율 이상(예를 들면, 80% 이상)이면 연속되는 동작이라고 판단할 수 있다. 위치 이탈 판단부는 제1 스켈레톤 정보에 기초하여 사용자의 소정의 관절의 위치가 미리 설정된 제1 경계 영역 조건에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판단할 수 있다. 이때, 제1 스켈레톤의 제1 관절군의 각 관절의 위치가 제1 경계 영역 조건에 대응하는 위치라면 제1 스켈레톤 정보를 추적 목록에 등록할 수 있다. 추적목록은 제1 스켈레톤이 제1 경계영역 조건에 대응하는 한, 계속해서 후속영상 프레임에서 추출한 제1 스켈레톤으로 갱신될 수 있다. 그렇지 않다면, 제1 스켈레톤이 제2 경계 영역 조건에 부합하는지 판단한다. 즉, 제1 스켈레톤의 제2 관절군의 각 관절이 제2 경계 영역 조건에 대응하는 위치에 있는 경우에, 추적 목록에 제2 스켈레톤 정보가 존재한다면 소정의 관절의 위치가 이탈하였다고 판단할 수 있다. 이때, 상기 소정의 관절은 제1 관절군과 제2 관절군에 포 함될 수 있으며, 제2 스켈레톤은 제1 스켈레톤의 이전 영상 프레임에서 추출된 것일 수 있다. 도 6은 본 발명의 일 실시예에 따른 낙상 예방 장치의 제1 경계영역과 제2 경계영역을 설정 예를 보여주는 도면 이다. 도 6은 침대에 있던 누워있거나 앉아있던 사용자(a)가 내려오는 동작(b)에서 낙상 위험이 감지되는 예를 도시한 것이다. 도 6을 참조하면, 제1 경계 영역은 침상 내의 낙상 우려가 없는 안전 영역 조건을 구분하는 영역 일 수 있고, 제2 경계 영역은 조건을 벗어날 경우 위치 이탈로 판단되어 낙상이 우려되는 한계 영역이 설 정될 수 있다. 제1 경계영역조건은 제1 관절군(골반, 무릎, 발목)이 모두 제2 경계 영역 내부에 있는 것이 고, 제2 경계 영역 조건은 제2 관절군(골반, 무릎, 발목)의 관절 중 적어도 하나가 제2 경계영역 외부에 있는 것이라고 가정한다. 도 6의 (a)의 사진은 제1 경계 영역 내에 제1 관절군의 모든 관절이 위치하므로 (a)의 스켈레톤 정보는 추 적 목록에 등록될 수 있다. 또한, 후속 영상 (b)의 사진은 골반은 제2 경계 영역 내부에 무릎과 발목은 제2 경 계영역 외부에 위치하므로 제2 경계 영역 조건에 따라서 위치 이탈로 판단할 수 있다. 한편, 제1 경계 영역과 제2 경계 영역은 동일하게 설정될 수 있고 제1 관절군과 제2 관절군도 동일할 수 있다. 다만, 관절의 위치 조건에 따라서 제1 경계 영역 조건과 제2 경계영역 조건이 달라질 수 있다. 제1 관절군은 낙상 예방을 위해서 제1 경계 영역 조건에 맞게 위치해야 하는 낙상위험이 없다고 판단되는 관절 을 모두 포함할 수 있다. 예를 들면, 어깨, 좌우 골반, 무릎, 발목 등이 제1 관절군에 포함될 수 있고, 제1 경 계 영역 조건은, 제1 관절군의 모든 관절이 제1 경계 영역 내부에 있는 조건일 수 있다. 영상에서 추출한 제1 스켈레톤이 제1 경계 영역 조건에 해당한다면, 낙상 위험이 없다고 판단하고 제1 스켈레톤은 추적 목록에 등록 된다. 제2 관절군은 제2 경계 영역 조건을 벗어나는 경우 낙상 우려가 있는 관절을 포함할 수 있다. 예를 들면, 어깨, 좌우 골반, 무릎, 발목 등이 제2 관절군에 포함될 수 있고, 제2 경계 영역 조건은 제2 관절군의 각 관절 중 적 어도 하나가 제2 경계 영역 외부에 있는 조건 일 수 있다. 제2 경계 영역 조건에 해당한다면 낙상 위험이 있다 고 판단할 수 있다. 다만, 추적 목록에 등록된 제2 스켈레톤이 없다면 사용자의 이전 동작을 확인할 수 없기 때 문에 낙상 여부를 판단할 수 없다. 하나의 영상만으로는 침대에서 떨어지는 것인지, 침대로 올라가는 것인지 판 단할 수 없기 때문이다. 따라서, 경계 영역, 관절군, 경계영역 조건은 추적하는 동작(예를 들면, 내려오는 동작, 올라가는 동작 등)이나 시간(예를 들면, 휴식시간, 취침시간, 식사시간 등)에 따라서 달라질 수 있다. 또한, 경계 영역, 관절군, 경계 영역 조건은 사용자의 상태나 체형에 따라서 달라질 수 있다. 본 실시예는 침대에서 내려오는 일련의 동작과 관 련된 관절군과 경계영역 조건을 예로 들고 있지만, 본 실시예에 한정되지 않는다.낙상 경고부는 소정의 관절의 위치가 이탈하여 낙상 위험이 있다면, 단말 또는 서버로 경고 신호를 전송할 수 있다. 또한, 낙상 경고와 동시에 추적목록을 초기화(삭제)할 수 있다. 경고신호를 수신하는 단말은 스마트폰, PDA, 무선 호출기, 비상경보기, 인공지능 스피커 등 유무선 네트워크를 통해 연결된 제반 장비를 포 함할 수 있다. 이하, 도면을 참조하여 본 발명의 일 실시예에 따른 낙상 예방 방법에 대하여 설명한다. 도 7은 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 방법의 과정을 보여주는 순서도이다. 도 8은 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 방법이 수행되는 과정을 좀 더 상세하 게 보여주는 순서도이다. 도 7과 도 8을 참조하면, 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 방법은 사용자 영상 획득 단계(S110), 제1 스켈레톤 정보 획득 단계(S130), 낙상 위험 여부 판단 단계(S150), 경고 신호 전송 단계 (S170)를 포함하여 구성될 수 있다. 사용자 영상 획득 단계(S110)는 동작 인식 장치(예를 들면, 카메라)를 이용하여 사용자의 움직임을 추적하여 영 상을 획득할 수 있다. 제1 스켈레톤 정보 획득 단계(S130)는 획득한 영상에서 사람을 검출하고 대응하는 제1 스켈레톤 정보를 획득할 수 있다(S131). 제1 스켈레톤 정보는 영상 내 관절의 위치와 관절 간의 방향을 예측하고, 이를 기초로 상기 관 절을 연결하여 추출될 수 있다. 다음으로, 추적 목록이 존재하는지 판단하여, 존재한다면 제1 스켈레톤 정보를 추적 목록의 제2 스켈레톤 정보 와 비교하여 동작의 연속성 여부를 판단할 수 있다(S132). 동작의 연속성을 판단하는 방법은 제1 스켈레톤의 최 외곽 좌표를 기초로 형성한 제1 사각형과 제2 스켈레톤의 최외곽 좌표를 기초로 형성한 제2 사각형이 차지하는 영역의 면적 대비 상기 두 사각형이 겹치는 영역의 면적이 소정의 비율 이상이면 동작의 연속성을 인정할 수 있 다. 또한, 영상에서 복수의 스켈레톤이 추출되는 경우, 복수의 각 스켈레톤을 추적 목록에 등록된 제2 스켈레톤과 비교하여 동작의 연속성이 인정되는 스켈레톤을 제1 스켈레톤으로 특정할 수 있다. 만일, 복수의 스켈레톤이 검 출되었으나, 제2 스켈레톤의 후속 동작이라고 판단되는 스켈레톤이 없거나, 추적목록이 삭제(초기화)되었다면 추적대상을 특정하기 어렵다. 이 경우, 추적 대상을 특정할 수 없다는 취지의 경고 메시지를 발송하고, 계속해 서 후속 프레임에 대한 추적을 진행할 수 있다. 낙상 위험 여부 판단 단계(S150)는 제1 스켈레톤 정보에 기초하여 사용자의 소정의 관절의 위치가 미리 설정된 제1 경계 영역 조건에 대응하는 위치에서 미리 설정된 제2 경계 영역 조건에 대응하는 위치로 이탈하였는지 판 단할 수 있다. 먼저, 제1 스켈레톤의 제1 관절군의 각 관절의 위치가 제1 경계 영역 조건에 대응하는 위치에 있는지 판단하고 (S151), 제1 경계 영역조건에 만족한다면 제1 스켈레톤 정보를 추적 목록에 등록할 수 있다(S152). 한편, 제1 스켈레톤과 제2 스켈레톤 간의 동작의 연속성이 인정되는 경우(S132), 제1 스켈레톤의 제2 관절군의 각 관절의 위치가 제2 경계 영역 조건에 대응하는 위치에 있는지 판단하여 제2 경고 영역 조건을 만족한다면 소 정의 관절의 위치가 이탈하였다고 판단할 수 있다(S153). 경고 신호 전송 단계(S170)는 상기 단계(S150)의 판단 결과, 소정의 관절의 위치가 이탈하여 낙상의 위험이 있 다고 판단한 경우, 경고 신호를 전송할 수 있다. 상기 설명한 본 발명의 실시간 동작 추적을 통한 낙상 예방 장치 및 방법은 촬영된 이미지를 실시간 획득하여 스켈레톤을 검출하고 이전 영상의 스켈레톤과 비교하여 사용자의 낙상 위험을 사전에 탐지할 수 있으며, 보호자 나 간병인에게 겨고신호를 보내줌으로써 낙상을 방지할 수 있고, 사고 발생시 신속하게 대응할 수 있다.한편, 본 발명의 일 실시예에 따른 장치는 사용자 단말에서 구동하는 어플리케이션의 형태로 구비될 수 있다. 이때, 사용자 단말은 스마트폰, 태블릿 PC, 랩톱 컴퓨터, 데스크톱 컴퓨터, PDA 등을 포함하는 다양한 컴퓨팅 장치를 포함할 수 있다. 한편, 앞에서 설명한 본 발명의 방법은 컴퓨터에서 실행될 수 있도록 프로그램 코드로 제작되어 컴퓨터로 읽을 수 있는 매체에 저장될 수 있고, 또한, 본 발명의 방법을 실행하는 프로그램이 어플리케이션으로 제작되어 기록 매체에 저장될 수 있다. 기록매체란 컴퓨터, 모바일 단말, 서버 등의 하드디스크, 메모리, 보조 메모리, 컴팩트 디스크 등 이동 가능한 저장 매체 등을 포함할 수 있다. 또한, 지금까지 설명한 본 발명의 방법 및 장치는 실제로 컴퓨터 프로그램에 의해 구현될 수 있고, 컴퓨터에서 실행될 때 컴퓨터 판독 가능한 기록 매체에 저장될 수 있다. 컴퓨터 판독 가능한 기록 매체는 컴퓨터 시스템에 의하여 읽혀질 수 있도록 프로그램 및 데이터가 저장되는 모든 종류의 기록매체를 포함하며, ROM, RAM, CD, DVD-ROM, 자기테이프, 플로피 디스크, 광데이터 저장장치 등이 있으며, 또한 인터넷을 통한 전송되는 형태로 구 현되는 것도 포함될 수 있다. 즉, 이와 같은 매체는 네트워크로 연결된 컴퓨터 시스템에 분산되어, 분산 방식으 로 컴퓨터가 읽을 수 있는 코드가 저장되고 실행될 수 있다. 상기에서는 본 발명의 바람직한 실시예를 참조하여 설명하였지만, 해당 기술 분야의 숙련된 당업자는 하기의 특 허 청구의 범위에 기재된 본 발명의 사상 및 영역으로부터 벗어나지 않는 범위 내에서 본 발명을 다양하게 수정 및 변경시킬 수 있음을 이해할 수 있을 것이다."}
{"patent_id": "10-2019-0159530", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 시스템의 개념도이다. 도 2는 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 장치의 구성을 보여주는 블록도이다. 도 3은 본 발명의 일 실시예에 따른 낙상 예방 장치에서 스켈레톤을 추출하는 과정을 보여주는 도면이다. 도 4는 본 발명의 일 실시예에 따른 낙상 예방 장치에서 환자의 동작을 추적하여 추출한 스켈레톤을 시계열로 나열한 도면이다. 도 5는 본 발명의 일 실시예에 따른 낙상 예방 장치에서 제1 스켈레톤과 제2 스켈레톤의 동작의 연속성을 판단 하는 방법을 보여주는 도면이다. 도 6은 본 발명의 일 실시예에 따른 낙상 예방 장치의 제1 경계영역과 제2 경계영역을 설정 예를 보여주는 도면 이다. 도 7은 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 방법의 과정을 보여주는 순서도이다. 도 8은 본 발명의 일 실시예에 따른 실시간 동작 추적을 통한 낙상 예방 방법이 수행되는 과정을 좀 더 상세하 게 보여주는 순서도이다."}
