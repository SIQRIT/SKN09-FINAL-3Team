{"patent_id": "10-2020-0052078", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0133457", "출원번호": "10-2020-0052078", "발명의 명칭": "다중 디콘볼루션 레이어를 갖는 인공 신경망을 이용하는 이미지 업스케일링 장치 및 이의 디", "출원인": "연세대학교 산학협력단", "발명자": "정성욱"}}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "각각 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받아 특징을 추출하여 특징맵을 출력하는 다수의 콘볼루션 레이어; 및 상기 다수의 콘볼루션 레이어 중 최종단에 배치된 콘볼루션 레이어에서 출력되는 최종 특징맵을 인가받아, 상기입력 이미지의 해상도보다 높은 기지정된 해상도를 갖는 출력 이미지로 업스케일링하여 출력하는 멀티 레이어를포함하고, 상기 멀티 레이어는 상기 최종 특징맵의 폭과 높이 및 깊이 방향인 x, y 및 z축 방향 중 x, y축 방향으로는 최소 크기를 갖고 z축방향으로는 상기 최종 특징맵의 z축 방향 크기와 동일한 크기를 가져 상기 최종 특징맵에서 z축 방향으로 배열된 특징들을 각각 혼합하는 다수의 제1 필터를 포함하여 제1 셔플맵을 출력하는 제1 분할 레이어; 및 x, y축 방향으로는 상기 제1 필터보다 크고 z축 방향으로는 상기 제1 필터의 개수와 크기를 가지는 다수의 제2필터를 각각 포함하여, 상기 제1 셔플맵의 x, y축 방향의 특징들을 혼합하는 적어도 하나의 제2 분할 레이어를포함하는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 제1 분할 레이어는 상기 다수의 제1 필터 각각이 상기 최종 특징맵에서 x축 및 y축 방향으로 원소 단위로 이동하면서 대응하는 원소들에 대해 MAC(Multiply-accumulate) 연산을 수행하고, MAC 연산 결과로 획득되는 연산값을 상기 최종 특징맵에서 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 다수의 제1 필터 각각에 대응하여 z축 방향으로 서로 다른 기지정된 위치에 배치하여 상기 제1 셔플맵을 출력하는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 제1 분할 레이어는 상기 입력 이미지와 상기 출력 이미지 사이의 해상도 증가 비에 대응하는 개수의 제1 필터를 포함하는 이미지업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서, 상기 적어도 하나의 제2 분할 레이어 각각은 상기 제1 분할 레이어의 상기 제1 필터의 개수와 동일한 개수의 제2 필터를 포함하는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서, 상기 적어도 하나의 제2 분할 레이어는 상기 다수의 제2 필터 각각이 상기 제1 셔플맵 또는 이전단에 배치된 제2 분할 레이어에서 인가된 제2 셔플맵에서 x축 및 y축 방향으로 원소 단위로 이동하면서 대응하는 원소들에 대해 MAC 연산을 수행하고, MAC 연산 결과로 획득되는 연산값을 인가된 제1 셔플맵 또는 제2 셔플맵의 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 다수의 제2 필터 각각에 대응하여 z축 방향으로 서로 다른 기지정된 위치에 배치하여제2 셔플맵을 출력하는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서, 상기 적어도 하나의 제2 분할 레이어는 상기 제1 분할 레이어와 상기 적어도 하나의 제2 분할 레이어를 포함하는 상기 멀티 레이어에서 수행되어야 하공개특허 10-2021-0133457-3-는 총 연산 횟수가 기지정된 기준 횟수 미만이 되도록 상기 적어도 하나의 제2 분할 레이어의 개수 및 제2 필터의 크기가 설정되는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서, 상기 다수의 콘볼루션 레이어 각각은 상기 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받고, 미리 지정된 크기를갖고 학습에 의해 획득되는 가중치가 맵핑되어 인가되는 입력 이미지 또는 특징맵의 특징을 추출하여 특징맵을출력하는 적어도 하나의 콘볼루션 필터를 포함하는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에 있어서, 상기 최종 특징맵은 상기 입력 이미지의 해상도에 대응하는 x축 방향 크기와 y축 방향 크기를 갖고, 상기 다수의 콘볼루션 레이어중 최종단에 배치된 콘볼루션 레이어에 포함된 콘볼루션 필터의 개수에 대응하는 z축 방향 크기를 갖는 이미지업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항에 있어서, 상기 멀티 레이어는 상기 적어도 하나의 제2 분할 레이어 중 최종단에 배치된 제2 분할 레이어에서 출력되는 제2 셔플맵에서 z축 방향으로 배열된 원소들이 2차원 상에서 서로 인접하여 배치되도록 기지정된 패턴 및 배치 순서에 따라 확장 재배치하는 리맵핑 레이어를 더 포함하는 이미지 업스케일링 장치."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법에 있어서, 각각 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받아 특징을 추출하여 특징맵을 출력하는 다수의 콘볼루션 레이어를 설정하는 단계; 및 상기 다수의 콘볼루션 레이어 중 최종단에 배치된 콘볼루션 레이어에서 출력되는 최종 특징맵을 인가받아, 상기입력 이미지의 해상도보다 높은 기지정된 해상도를 갖는 출력 이미지로 업스케일링하여 출력하는 디콘볼루션 레이어를 멀티 레이어로 설정하는 단계를 포함하고, 상기 멀티 레이어를 설정하는 단계는 상기 최종 특징맵의 폭과 높이 및 깊이 방향인 x, y 및 z축 방향 중 x, y축 방향으로는 최소 크기를 갖고 z축방향으로는 상기 최종 특징맵의 z축 방향 크기와 동일한 크기를 가져 상기 최종 특징맵에서 z축 방향으로 배열된 특징들을 각각 혼합하는 다수의 제1 필터를 포함하여 제1 셔플맵을 출력하는 제1 분할 레이어를 설정하는 단계; 및 x, y축 방향으로는 상기 제1 필터보다 크고 z축 방향으로는 상기 제1 필터의 개수와 크기를 가지는 다수의 제2필터를 각각 포함하여, 상기 제1 셔플맵의 x, y축 방향의 특징들을 혼합하는 적어도 하나의 제2 분할 레이어를설정하는 단계를 포함하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서, 상기 제1 분할 레이어를 설정하는 단계는 상기 최종 특징맵에서 x축 및 y축 방향으로 원소 단위로 이동하면서 대응하는 원소들에 대해 MAC(Multiply-accumulate) 연산을 수행하도록 상기 다수의 제1 필터를 설정하는 단계; MAC 연산 결과로 획득되는 연산값을 상기 최종 특징맵에서 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 다수의 제1 필터 각각에 대응하여 z축 방향으로 서로 다른 기지정된 위치에 배치하여 상기 제1 셔플맵을 출력하도록 설정하는 단계를 포함하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법.공개특허 10-2021-0133457-4-청구항 12 제11항에 있어서, 상기 다수의 제1 필터를 설정하는 단계는 상기 입력 이미지와 상기 출력 이미지 사이의 해상도 증가 비에 대응하여 상기 제1 필터의 개수를 설정하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서, 상기 적어도 하나의 제2 분할 레이어를 설정하는 단계는 상기 적어도 하나의 분할 레이어 각각에 포함되는 제2 필터의 개수를 상기 제1 분할 레이어의 상기 제1 필터의개수와 동일하게 설정하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제13항에 있어서, 상기 적어도 하나의 제2 분할 레이어를 설정하는 단계는 상기 다수의 제2 필터 각각이 상기 제1 셔플맵 또는 이전단에 배치된 제2 분할 레이어에서 인가된 제2 셔플맵에서 x축 및 y축 방향으로 원소 단위로 이동하면서 대응하는 원소들에 대해 MAC 연산을 수행하도록 설정하는단계; 및 MAC 연산 결과로 획득되는 연산값을 인가된 제1 셔플맵 또는 제2 셔플맵의 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 다수의 제2 필터 각각에 대응하여 z축 방향으로 서로 다른 기지정된 위치에 배치하여 제2 셔플맵을 출력하도록 설정하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서, 상기 적어도 하나의 제2 분할 레이어를 설정하는 단계는 상기 제1 분할 레이어와 상기 적어도 하나의 제2 분할 레이어를 포함하는 상기 멀티 레이어에서 수행되어야 하는 총 연산 횟수가 기지정된 기준 횟수 미만이 되도록 상기 적어도 하나의 제2 분할 레이어의 개수 및 제2 필터의 크기를 설정하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제10항에 있어서, 상기 다수의 콘볼루션 레이어를 설정하는 단계는 콘볼루션 레이어의 개수를 설정하는 단계; 및 설정된 컨볼루션 레이어 각각에 대해 상기 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받고, 미리 지정된 크기를 갖고 학습에 의해 획득되는 가중치가 맵핑되어, 인가되는 입력 이미지 또는 특징맵의 특징을 추출하여 콘볼루션 필터의 개수 및 크기를 설정하는 단계를 포함하는 이미지 업스케일링 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제16항에 있어서, 상기 최종 특징맵은 상기 입력 이미지의 해상도에 대응하는 x축 방향 크기와 y축 방향 크기를 갖고, 상기 다수의 콘볼루션 레이어중 최종단에 배치된 콘볼루션 레이어에 포함된 콘볼루션 필터의 개수에 대응하는 z축 방향 크기를 갖는 이미지업스케일링 장치의 디콘볼루션 레이어 다중화 방법."}
{"patent_id": "10-2020-0052078", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제10항에 있어서, 상기 멀티 레이어로 설정하는 단계는 상기 적어도 하나의 제2 분할 레이어 중 최종단에 배치된 제2 분할 레이어에서 출력되는 제2 셔플맵에서 z축 방향으로 배열된 원소들이 2차원 상에서 서로 인접하여 배치되도록 기지정된 패턴 및 배치 순서에 따라 확장 재배치하는 리맵핑 레이어를 설정하는 단계를 더 포함하는 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법.공개특허 10-2021-0133457-5-"}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 각각 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받아 특징을 추 출하여 특징맵을 출력하는 다수의 콘볼루션 레이어 및 다수의 콘볼루션 레이어 중 최종단에 배치된 콘볼루션 레 이어에서 출력되는 최종 특징맵을 인가받아, 입력 이미지의 해상도보다 높은 기지정된 해상도를 갖는 출력 이미 (뒷면에 계속)"}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 이미지 업스케일링 장치 및 이의 디콘볼루션 레이어 다중화 방법에 관한 것으로, 다중 디콘볼루션 레 이어를 갖는 인공 신경망을 이용하는 이미지 업스케일링 장치 및 이의 디콘볼루션 레이어 다중화 방법에 관한 것이다."}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "최근 고화질 이미지에 대한 사용자들의 관심이 증가함에 따라 UHD(Ultra High Definition) 방송에 대한 요구가 커지고 있다. 그러나 현재는 통신 대역폭의 한계와 UHD 이미지의 콘텐츠 부족으로 인해 여러가지 어려움이 많 은 상황이다. 따라서 현재 통신 대역폭을 만족하고, 이미지 콘텐츠도 많은 FHD(Full High Definition)이미지를 그대로 전송하여, 사용자 단말기에서 FHD 이미지를 더 높은 해상도의 UHD 이미지로 변환하는 이미지 업 스케일 링(Image Up_scaling) 기술이 주목받고 있다. 이미지 업 스케일링 기술로 다양한 알고리즘이 제안되었으나, 단순한 산술 연산에 기반한 알고리즘보다 인공 신 경망을 이용한 인공 지능 알고리즘을 적용하여 연산하는 방법인 슈퍼 레졸루션(Super-Resolution) 기법이 더 좋 은 성능을 나타내는 것으로 알려져 있다. 슈퍼 레졸루션 기법에서는 콘볼루션(Convolution)연산을 기반으로 하는 CNN(Convolution Neural Network) 알고 리즘을 적용할 때, 특히 좋은 성능을 나타내며, CNN 기반의 여러 알고리즘 중에서도 FSRCNN(Fast Super- Resolution Convolutional Neural Network)가 주로 이용되고 있다. 다만 FSRCNN을 이용하여, FHD 이미지를 UHD 이미지로 업 스케일링하고자 하는 경우, 수행해야 하는 연산량이 매우 많아 고성능의 서버가 아닌 사용자 단말 레벨에서 실행되기 어렵다는 한계가 있다. 이에 FSRCNN보다 상대적으로 더 적은 파라미터를 사용하여 연산량을 줄인 FSRCNN_s(small model size version of FSRCNN)이 제안되어 사용되고 있다. 그러나 FSRCNN_s을 사용할지라도 여전히 많은 연산이 필요하며, 이에 사용자 단말에서 이미지 업 스케일링을 수행하기 위한 하드웨어 칩을 제작하는 경우, 대규모 연산의 필요에 따 라 칩 크기가 매우 커져, 제조 비용이 매우 높아진다는 문제가 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 한국 공개 특허 제10-2018-0105556호 (2018.09.28 공개)"}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은 이미지 업스케일링을 위한 단일 디콘볼루션 레이어를 다중 레이어로 구성하여 화질 열화를 억 제하면서 연산량을 크게 줄일 수 있는 이미지 업스케일링 장치 및 이의 디콘볼루션 레이어 다중화 방법을 제공 하는데 있다. 본 발명의 다른 목적은 요구되는 연산기의 개수를 저감하여 소형 및 저비용의 하드웨어로 구현될 수 있는 이미 지 업스케일링 장치 및 이의 디콘볼루션 레이어 다중화 방법을 제공하는데 있다. 본 발명의 또 다른 목적은 레이어별로 수행해야하는 연산량의 차이를 줄여 하드웨어로 구현 시, 파이프 라인 기 법을 용이하게 적용할 수 있어 동작 속도를 향상시킬 수 있는 이미지 업스케일링 장치 및 이의 디콘볼루션 레이 어 다중화 방법을 제공하는데 있다."}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 목적을 달성하기 위한 본 발명의 일 실시예에 따른 이미지 업스케일링 장치는 각각 입력 이미지 또는 이전 단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받아 특징을 추출하여 특징맵을 출력하는 다수의 콘볼루션 레이어; 및 상기 다수의 콘볼루션 레이어 중 최종단에 배치된 콘볼루션 레이어에서 출력되는 최종 특징맵 을 인가받아, 상기 입력 이미지의 해상도보다 높은 기지정된 해상도를 갖는 출력 이미지로 업스케일링하여 출력 하는 멀티 레이어를 포함한다. 상기 멀티 레이어는 상기 최종 특징맵의 폭과 높이 및 깊이 방향인 x, y 및 z축 방향 중 x, y축 방향으로는 최 소 크기를 갖고 z축 방향으로는 상기 최종 특징맵의 z축 방향 크기와 동일한 크기를 가져 상기 최종 특징맵에서 z축 방향으로 배열된 특징들을 각각 혼합하는 다수의 제1 필터를 포함하여 제1 셔플맵을 출력하는 제1 분할 레 이어; 및 x, y축 방향으로는 상기 제1 필터보다 크고 z축 방향으로는 상기 제1 필터의 개수와 크기를 가지는 다 수의 제2 필터를 각각 포함하여, 상기 제1 셔플맵의 x, y축 방향의 특징들을 혼합하는 적어도 하나의 제2 분할 레이어를 포함한다. 상기 제1 분할 레이어는 상기 다수의 제1 필터 각각이 상기 최종 특징맵에서 x축 및 y축 방향으로 원소 단위로 이동하면서 대응하는 원소들에 대해 MAC(Multiply-accumulate) 연산을 수행하고, MAC 연산 결과로 획득되는 연 산값을 상기 최종 특징맵에서 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 다수의 제1 필터 각각에 대응하여 z축 방향으로 서로 다른 기지정된 위치에 배치하여 상기 제1 셔플맵을 출력할 수 있 다. 상기 제1 분할 레이어는 상기 입력 이미지와 상기 출력 이미지 사이의 해상도 증가 비에 대응하는 개수의 제1 필터를 포함할 수 있다. 상기 적어도 하나의 제2 분할 레이어는 상기 다수의 제2 필터 각각이 상기 제1 셔플맵 또는 이전단에 배치된 제 2 분할 레이어에서 인가된 제2 셔플맵에서 x축 및 y축 방향으로 원소 단위로 이동하면서 대응하는 원소들에 대 해 MAC 연산을 수행하고, MAC 연산 결과로 획득되는 연산값을 인가된 제1 셔플맵 또는 제2 셔플맵의 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 다수의 제2 필터 각각에 대응하여 z축 방향으 로 서로 다른 기지정된 위치에 배치하여 제2 셔플맵을 출력할 수 있다. 상기 적어도 하나의 제2 분할 레이어는 상기 제1 분할 레이어와 상기 적어도 하나의 제2 분할 레이어를 포함하 는 상기 멀티 레이어에서 수행되어야 하는 총 연산 횟수가 기지정된 기준 횟수 미만이 되도록 상기 적어도 하나 의 제2 분할 레이어의 개수 및 제2 필터의 크기가 설정될 수 있다. 상기 다수의 콘볼루션 레이어 각각은 상기 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특 징맵을 인가받고, 미리 지정된 크기를 갖고 학습에 의해 획득되는 가중치가 맵핑되어 인가되는 입력 이미지 또 는 특징맵의 특징을 추출하여 특징맵을 출력하는 적어도 하나의 콘볼루션 필터를 포함할 수 있다. 상기 최종 특징맵은 상기 입력 이미지의 해상도에 대응하는 x축 방향 크기와 y축 방향 크기를 갖고, 상기 다수 의 콘볼루션 레이어 중 최종단에 배치된 콘볼루션 레이어에 포함된 콘볼루션 필터의 개수에 대응하는 z축 방향 크기를 가질 수 있다. 상기 멀티 레이어는 상기 적어도 하나의 제2 분할 레이어 중 최종단에 배치된 제2 분할 레이어에서 출력되는 제 2 셔플맵에서 z축 방향으로 배열된 원소들이 2차원 상에서 서로 인접하여 배치되도록 기지정된 패턴 및 배치 순 서에 따라 확장 재배치하는 리맵핑 레이어를 더 포함할 수 있다. 상기 다른 목적을 달성하기 위한 본 발명의 다른 실시예에 따른 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법은 각각 입력 이미지 또는 이전단에 배치된 콘볼루션 레이어에서 출력되는 특징맵을 인가받아 특징 을 추출하여 특징맵을 출력하는 다수의 콘볼루션 레이어를 설정하는 단계; 및 상기 다수의 콘볼루션 레이어 중 최종단에 배치된 콘볼루션 레이어에서 출력되는 최종 특징맵을 인가받아, 상기 입력 이미지의 해상도보다 높은 기지정된 해상도를 갖는 출력 이미지로 업스케일링하여 출력하는 디콘볼루션 레이어를 멀티 레이어로 설정하는 단계를 포함하고, 상기 멀티 레이어를 설정하는 단계는 상기 최종 특징맵의 폭과 높이 및 깊이 방향인 x, y 및 z축 방향 중 x, y축 방향으로는 최소 크기를 갖고 z축 방향으로는 상기 최종 특징맵의 z축 방향 크기와 동일한 크기를 가져 상기 최종 특징맵에서 z축 방향으로 배열된 특징들을 각각 혼합하는 다수의 제1 필터를 포함하여 제1 셔플맵을 출력하는 제1 분할 레이어를 설정하는 단계; 및 x, y축 방향으로는 상기 제1 필터보다 크고 z축 방향으로는 상기 제1 필터의 개수와 크기를 가지는 다수의 제2 필터를 각각 포함하여, 상기 제1 셔플맵의 x, y 축 방향의 특징들을 혼합하는 적어도 하나의 제2 분할 레이어를 설정하는 단계를 포함한다."}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "따라서, 본 발명의 실시예에 따른 이미지 업스케일링 장치 및 이의 디콘볼루션 레이어 다중화 방법은 대량의 연 산이 요구되는 디콘볼루션 레이어를 다중 레이어로 구성하여 화질 열화를 억제하면서 연산량을 크게 줄일 수 있 다. 따라서 하드웨어 구현 시 연산기의 개수를 저감하여 소형 및 저비용으로 용이하게 제조할 수 있다. 또한 레이어별로 수행해야하는 연산량의 차이를 줄어듬에 따라 하드웨어로 구현 시에 파이프 라인 기법을 용이하게 적용할 수 있어 동작 속도를 대폭 향상시킬 수 있다."}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명과 본 발명의 동작상의 이점 및 본 발명의 실시에 의하여 달성되는 목적을 충분히 이해하기 위해서는 본 발명의 바람직한 실시예를 예시하는 첨부 도면 및 첨부 도면에 기재된 내용을 참조하여야만 한다. 이하, 첨부한 도면을 참조하여 본 발명의 바람직한 실시예를 설명함으로써, 본 발명을 상세히 설명한다. 그러 나, 본 발명은 여러 가지 상이한 형태로 구현될 수 있으며, 설명하는 실시예에 한정되는 것이 아니다. 그리고, 본 발명을 명확하게 설명하기 위하여 설명과 관계없는 부분은 생략되며, 도면의 동일한 참조부호는 동일한 부재 임을 나타낸다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다 른 구성요소를 제외하는 것이 아니라, 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 또한, 명세서에 기 재된 \"...부\", \"...기\", \"모듈\", \"블록\" 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 도 1은 FSRCNN_s를 적용한 이미지 업스케일링 장치의 개략적 구성을 나타내고, 도 2는 도 1의 FSRCNN_s의 디콘 볼루션 레이어의 디콘볼루션 연산 방식을 설명하기 위한 도면이다. 도 1을 참조하면, FSRCNN_s는 4개의 콘볼루션 레이어(CL1 ~ CL4)와 하나의 디콘볼루션 레이어(DL)를 포함하여 구성된다. 4개의 콘볼루션 레이어(CL1 ~ CL4) 각각은 기지정된 크기의 적어도 하나의 필터(또는 커널이라고도 함)를 포함하여 구성된다. 여기서 적어도 하나의 필터 각각은 학습을 통해 획득되는 다수의 가중치가 필터 크 기에 대응하여 배열된 구조를 갖는다. FSRCNN_s에서 4개의 콘볼루션 레이어(CL1 ~ CL4) 중 제1 콘볼루션 레이어(CL1)는 폭(Width)×높이(Height)×깊 이(Depth)로 표현하여 5×5×1 크기를 갖는 하나의 필터(5×5×1, 32)를 포함하고, 제2 콘볼루션 레이어(CL2)는 1×1×32 크기를 갖는 5개의 필터(1×1×32, 5)를 포함하며, 제3 콘볼루션 레이어(CL3)는 3×3×5 크기를 갖는 5개의 필터(3×3×5, 5)를 포함한다. 마지막으로 제4 콘볼루션 레이어(CL4)는 1×1×5 크기를 갖는 32개의 필 터(3×3×5, 5)를 포함한다. 4개의 콘볼루션 레이어(CL1 ~ CL4) 중 제1 콘볼루션 레이어(CL1)는 입력 이미지를 인가받고, 인가된 입력 이미 지에 대해 포함된 필터를 이용하여 특징을 추출함으로써, 제1 특징맵(FMap1)을 획득한다. 그리고 제2 내지 제4 콘볼루션 레이어(CL2 ~ CL4)는 각각 이전단의 콘볼루션 레이어(CL1 ~ CL3)에서 출력되는 제1 내지 제3 특징맵(FMap1 ~ Fmap3)을 인가받고, 인가된 제1 내지 제3 특징맵(FMap1 ~ Fmap3)의 특징을 추출 하여 제2 내지 제4 특징맵(FMap2 ~ Fmap4)을 획득한다. 여기서 FSRCNN_s가 다수의 콘볼루션 레이어(CL1 ~ CL4)를 포함하여, 계층적으로 특징을 추출하여 특징맵을 획득 하는 것은 입력 이미지로부터 보다 고차원 특징(High-level Feature)을 추출할 수 있도록 하기 위함이다. 한편 디콘볼루션 레이어(DL) 또한 4개의 콘볼루션 레이어(CL1 ~ CL4)와 유사하게 9×9×32 크기를 갖는 하나의 필터(9×9×32, 1)를 포함하여 구성될 수 있다. 디콘볼루션 레이어(DL)의 필터 또한 학습을 통해 획득되는 다 수의 가중치가 필터 크기에 대응하여 배열된 구조를 갖는다. 다만 디콘볼루션 레이어(DL)는 하나의 필터(9×9 ×32, 1)를 4개의 콘볼루션 레이어(CL1 ~ CL4)의 필터와 다른 방식으로 적용하여 연산을 수행함으로써, 입력 이 미지의 해상도보다 높은 해상도를 갖는 출력 이미지를 출력할 수 있다. 디콘볼루션 레이어(DL)는 4개의 콘볼루션 레이어(CL1 ~ CL4) 중 마지막에 배치된 제4 콘볼루션 레이어(CL4)로부 터 최종 특징맵인 제4 특징맵(FMap4)이 출력되면, 디콘볼루션 레이어(DL)가 제4 특징맵(FMap4)을 인가받고, 인 가된 제4 특징맵(FMap4)을 각 원소 단위로 필터를 적용하고, 필터가 적용된 값을 미리 지정된 간격으로 배치한 후 대응하는 위치의 원소값들을 더하여 입력 이미지의 해상도보다 높은 해상도를 갖는 출력 이미지를 획득한다. 여기서는 일 예로 입력 이미지가 1920×1080의 해상도를 갖는 FHD 이미지인 것으로 가정하고, 출력 이미지는 3840×2160 해상도를 갖는 UHD 이미지인 것으로 가정하였다. 이 경우, 도 2의 (a)에 도시된 바와 같이, 최종 특징맵인 제4 특징맵(FMap4)은 1920×1080×32의 크기로 출력된 다. 이하에서는 설명의 편의를 위하여 도 2의 (a)와 같이 제4 특징맵(FMap4)을 구성하는 다수의 원소 각각의 폭 방향 위치, 높이 방향 위치 및 깊이 방향 위치를 x축, y축 및 z축 방향 좌표로 표현한다. 그리고 디콘볼루션 레이어(DL)의 필터는 도 2의 (b)에 도시된 바와 같이, 9×9×32 크기를 가지며, 1920×1080 ×32의 크기의 제4 특징맵(FMap4)에서 x축 및 y축 방향으로 각 원소 단위로 이동(stride1)하면서 MAC 연산 (Multiply-accumulate operation)을 수행한다. 디콘볼루션 레이어(DL)는 제4 특징맵(FMap4)에서 1920×1080개의 1×1×32 크기의 z축 방향 벡터와 9×9×32 크 기의 필터를 각각 곱하여, 도 2의 (c)에서 아래에 나타난 바와 같이, 1920×1080개의 9×9×1 크기의 행렬을 획 득한다. 그리고 획득된 1920×1080개의 9×9×1 크기의 행렬을 피연산된 원소의 x축 방향 및 y축 방향 위치에 대응하여 x축 및 y축 방향으로 2 원소 단위로 이동(stride2)하면서 대응하는 위치의 원소값들을 가산하여, x축 및 y축 방향의 크기, 즉 폭과 높이가 각각 2배씩 확장된 3840×2160 해상도를 갖는 UHD 이미지를 출력한다. 도 2의 (c)에서는 공간의 제약으로 인해, x축 방향으로만 2 원소 단위로 이동(stride2)하면서 획득된 행렬이 가산 되는 경우를 도시하였으나, y축 방향으로도 동일한 방식으로 획득된 행렬이 가산된다. 이와 같이, FSRCNN_s는 1920×1080의 해상도를 갖는 FHD 이미지를 입력 이미지로 인가받아 특징을 추출하여 특 징맵을 생성하고, 생성된 특징맵에 디콘볼루션 연산을 수행하여 x축 방향 및 y축 방향으로 해상도를 2배 증가시 켜 3840×2160 해상도를 갖는 UHD 이미지를 출력 이미지로 출력하는 업스케일링 장치로 이용될 수 있다. 다만 FSRCNN_s에서 4개의 콘볼루션 레이어(CL1 ~ CL4)는 입력 이미지에서 고차원 특징을 추출하기 위한 구성으 로 연산량이 많지 않은데 반해, 추출된 특징맵으로부터 업스케일링된 이미지를 출력하는 디콘볼루션 레이어(D L)는 상대적으로 매우 많은 연산을 요구한다. 비록 FSRCNN_s는 FSRCNN 보다 더 적은 연산량을 요구하지만, 그 럼에도 불구하고, FHD 이미지를 UHD 이미지로 업스케일링하는 경우에 2592회의 곱셈 연산과 2560의 덧셈 연산을 필요로 하며, 이는 FSRCNN_s에서 요구되는 전체 연산량의 65.83%에 해당한다. 즉 FSRCNN_s에서 수행되어야 하 는 연산에서 상당량이 디콘볼루션 레이어(DL)에서 수행되며, 이는 나머지 4개의 콘볼루션 레이어(CL1 ~ CL4)에 서 수행되는 전체 연산량의 2배 이상이다. 이와 같이 FSRCNN_s를 기반으로 이미지 업스케일링 장치를 하드웨어로 구현하는 경우, 디콘볼루션 레이어(DL)가 수행해야 하는 연산량이 매우 많아 대량의 연산기를 요구하며, 이로 인해 소형 및 저비용으로 제작이 어렵게 할 뿐만 아니라 많은 전력 소모를 필요로 한다. 통상적으로 영상은 초당 60프레임의 이미지를 전송하므로, 프레임당 0.0166s 라는 극히 짧은 시간내에 이미지 업스케일링을 수행해야 한다. 그리고 FHD 이미지를 UHD 이미지로 업스케일링하는 경우, 각 프레임에 대해 FSRCNN_s가 수행해야 하는 모든 연산량은 16.1GOP이다. 따라서 이미지 업스케일링 장치는 초당 966GOP(16.1GOP/0.0166s)의 연산량을 처리할 수 있도록 구현되어야 하며, 이는 현실적으로 사용자 단말에 구현 하기 불가능한 수준이다. 뿐만 아니라, 디콘볼루션 레이어(DL)와 콘볼루션 레이어(CL1 ~ CL4) 사이의 연산량 차이로 인해, 병목 현상을 야기하여 고속 동작을 지원할 수 있는 파이프 라인 기법 등을 적용하기 어렵도록 하는 요인이 된다. 즉 고성능 의 이미지 업스케일링 장치를 구현하는데 장애 요인이 된다.도 3은 FSRCNN_s의 디콘볼루션 레이어를 대체할 수 있는 셔플링 레이어의 동작을 설명하기 위한 도면이다. 도 3은 도 2에 도시된 FSRCNN_s에서 디콘볼루션 레이어(DL)에서 수행되는 디콘볼루션 연산의 연산량을 줄이기 위해 고안된 셔플링 레이어(Shuffling Layer)의 동작을 나타낸다. 도 2의 (b)에 도시된 바와 같이, 디콘볼루션 레이어(DL)는 9×9×32 크기의 단일 필터로 구성되는 반면, 셔플링 레이어는 도 3의 (b)에 도시된 바와 같이, 각각 3×3×32 크기를 갖는 4개의 필터(F1 ~ F4)로 구성될 수 있다. 여기서도 4개의 필터(F1 ~ F4) 각각에는 학습을 통해 획득되는 다수의 가중치가 맵핑되어 저장된다. 그리고 셔플링 레이어의 4개의 필터(F1 ~ F4) 각각은 최종 특징맵인 제4 특징맵(FMap4)에서 x축 및 y축 방향으 로 원소 단위로 이동하면서, 대응하는 크기(3×3×32)의 영역에 대해 MAC 연산을 수행한다. 이때, 4개의 필터 (F1 ~ F4)는 동일한 영역에 대해 연산을 수행한다. 그리고 연산 결과로 획득되는 연산값을 피연산된 원소의 x 축 방향 및 y축 방향 위치에 대응하는 위치에 배치하되, 4개의 필터(F1 ~ F4) 각각에 대응하여 z축 방향으로 서 로 다른 위치에 배치한다. 따라서 4개의 필터(F1 ~ F4)에 의한 MAC 연산 결과는 도 3의 (c)에 도시된 바와 같 이, 1920×1080×4의 크기를 갖는 셔플맵의 형태로 획득될 수 있다. 그리고 셔플링 레이어는 1920×1080×4의 크기의 셔플맵에서 z축 방향의 4개의 원소(1×1×4)들, 즉 1920×1080개의 z 벡터들의 원소들의 배치 위치를 (d)에 도시된 바와 같이, 2차원 상에서 기지정된 패턴 및 배치 순서(2×2×1)에 따라 변환 배치하여 확장하는 리맵핑 작업을 수행한다. 셔플맵에서 z축 방향의 4개의 원소가 2차원 배치로 리맵핑되어 확장됨에 따라 셔플링 레이어는 3840×2160 해상 도를 갖는 UHD 이미지를 출력 이미지로 출력할 수 있다. 즉 도 2에 도시된 디콘볼루션 레이어와 마찬가지로 제 4 특징맵(FMap4)으로부터 업스케일링된 UHD 이미지를 출력할 수 있다. 이때 3×3×32 크기의 4개의 필터(F1 ~ F4)를 이용하여 MAC 연산을 수행하는 셔플링 레이어에서는 FHD 이미지를 UHD 이미지로 업스케일링하기 위해 1152회의 곱셈 연산과 1120회의 덧셈 연산이 수행된다. 이는 2592회의 곱셈 연산과 2560의 덧셈 연산을 필요로 하는 디콘볼루션 레이어(DL)에 비해 연산량을 대폭 줄인 것으로 볼 수 있다. 그럼에도 불구하고, 셔플링 레이어에서 필요로 하는 연산량은 나머지 4개의 콘볼루션 레이어(CL1 ~ CL4)에서 수 행되는 연산량에 비해 상대적으로 매우 많으며, FSRCNN_s의 전체 연산량의 46.13%에 해당한다. 표 1과 표 2는 각각 FSRCNN과 FSRCNN_s 및 디콘볼루션 레이어를 대체하여 셔플링 레이어를 적용한 경우의 각 레 이어의 필터 크기와 개수 및, 이에 따라 수행되어야 하는 곱셈 및 덧셈 연산 횟수를 나타낸다. 표 1"}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "표 2"}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "표 1 및 표 2에 나타난 바와 같이, 비록 FSRCNN_s는 FSRCNN에 비해 레이어의 개수와 각 레이어에 포함되는 필터 의 크기 및 개수 등의 파리미터가 저감되어 연산량이 크게 줄어들었으나, 여전히 많은 연산을 요구하며, 특히 디콘볼루션 레이어(DL)에서 요구되는 연산량이 나머지 콘볼루션 레이어(CL1 ~ CL4)에서 요구되는 연산량에 비해월등하게 많다는 것을 알 수 있다. 그리고 표 1 및 표 2를 살펴보면, FSRCNN_s는 FSRCNN 각각에서 디콘볼루션 레이어(DL)를 도 3의 (b)에 도시된 바와 같은 셔플링 레이어로 대체하는 경우, 디콘볼루션 레이어(DL)를 이용하 는 경우에 비해 대략 1/2 수준으로 연산량을 줄일 수 있음을 알 수 있다. 그럼에도 불구하고, 셔플링 레이어의 연산량은 나머지 콘볼루션 레이어(CL1 ~ CL4)에서 요구되는 연산량에 비해 상대적으로 매우 크다. 따라서 디콘볼루션 레이어(DL)를 단일의 셔플링 레이어로 대체할지라도 여전히 많은 연산기를 필요로 하여 이미 지 업스케일링 장치를 하드웨어로 구현하기 어렵게 하고, 파이프 라인 기법 등을 적용하기 어렵게 한다. 도 1 내지 도 3에서는 이미지 업스케일링 장치가 FSRCNN_s를 기반으로 구성되는 것으로 가정하여, 4개의 콘볼루 션 레이어(CL1 ~ CL4)를 포함하는 것으로 설명하였으나, 콘볼루션 레이어의 개수 및 각 콘볼루션 레이어에 포함 되는 필터의 크기 및 개수는 다양하게 조절될 수 있다. 그리고 디콘볼루션 레이어(DL)와 셔플링 레이어에 포함 되는 필터의 크기도 다양하게 조절될 수 있다. 도 4는 본 발명의 일 실시예에 따른 다중 디콘볼루션 레이어를 갖는 이미지 업스케일링 장치의 개략적 구성을 나타내고, 도 5는 도 4의 멀티 레이어의 동작을 설명하기 위한 도면이다. 도 4의 (a)를 참조하면, 본 실시예에 따른 이미지 업스케일링 장치는 도 1의 이미지 업스케일링 장치와 마찬가 지로, FSRCNN_s을 기반으로 구성되어 4개의 콘볼루션 레이어(CL1 ~ CL4)를 포함하는 것으로 가정하였다. 따라 서 4개의 콘볼루션 레이어(CL1 ~ CL4) 각각은 도 1의 콘볼루션 레이어(CL1 ~ CL4)와 동일하므로 여기서는 상세 하게 설명하지 않는다. 그러나 도 4에서 이미지 업스케일링 장치는 도 1의 디콘볼루션 레이어(DL)를 대체하여 다수의 레이어로 구성되는 멀티 레이어(ML)를 포함한다. 멀티 레이어(ML)는 도 1의 디콘볼루션 레이어(DL)와 마찬가지로 다수의 콘볼루션 레이어(CL1 ~ CL4) 중 마지막 에 배치된 콘볼루션 레이어(여기서는 CL4)에서 출력되는 최종 특징맵(FMap4)을 인가받고, 최종 특징맵(FMap4)으 로부터 업스케일링된 해상도를 갖는 출력 이미지를 획득하여 출력한다. 도 4에서도 입력 이미지가 1920×1080 의 해상도를 갖는 FHD 이미지이고, 업스케일링된 출력 이미지는 3840×2160 해상도를 갖는 UHD 이미지인 것으로 가정하였다. 도 4의 (b)는 멀티 레이어(ML)의 상세 구성을 나타낸다. 도 4의 (b)를 참조하면, 멀티 레이어(ML)는 다수의 분 할 레이어(PL1, PL21 ~ PL2n)와 리맵핑 레이어(RL)를 포함한다. 그리고 다수의 분할 레이어(PL1, PL21 ~ PL2n) 각각은 도 3의 (b)에 도시된 셔플링 레이어와 유사하게 각각 기지정된 크기의 다수의 필터를 포함할 수 있다. 여기서 다수의 분할 레이어(PL1, PL21 ~ PL2n)는 이미지 업스케일링 장치가 해상도를 x축 방향 및 y축 방향으로 2배씩 업스케일링하는 경우에 도 5의 (b) 및 (d)에 도시된 바와 같이, 각각 4개씩의 필터를 포함할 수 있다. 도 3에서 셔플링 레이어가 4개의 필터(F1 ~ F4)를 구비하는 것은 리맵핑 작업을 수행하면서, z축 방향의 4개의 원소(1×1×4)를 2차원 배치 위치(2×2×1)로 리맵핑하는 것은 입력 이미지를 x축 방향과 y축 방향 각각으로 2 배씩 업스케일링하기 위해서이다. 그리고 도 4에서도 이미지 업스케일링 장치가 FHD 이미지를 UHD 이미지로 업 스케일링 하는 것으로 가정하였으므로, 다수의 분할 레이어(PL1, PL21 ~ PL2n)는 각각 4개(= 22)씩의 필터를 포 함할 수 있다. 그러나 만일 이미지 업스케일링 장치가 입력 이미지를 x축 방향과 y축 방향 각각으로 k배씩 업 스케일링하는 경우, 다수의 분할 레이어(PL1, PL21 ~ PL2n)는 각각 k2개씩의 필터를 포함할 수 있다. 다만 이 미지 업스케일링의 경우, 업스케일 배율 증가에 비례하여 화질의 저하가 크게 나타나므로, x축 방향과 y축 방향 각각으로 2배씩 업스케일링하는 것이 일반적이다. 따라서 여기서는 다수의 분할 레이어(PL1, PL21 ~ PL2n)는 각각 4개씩의 필터를 포함하는 것으로 가정하여 설명한다. 그리고 다수의 분할 레이어(PL1, PL21 ~ PL2n) 중 제1 분할 레이어(PL1)의 다수의 제1 필터(F11 ~ F14) 각각은 최종 특징맵(FMap4)의 깊이에 대응하는 깊이를 갖는 최소 크기로 설정된다. 도 5의 (a)에 도시된 바와 같이, 다수의 콘볼루션 레이어(CL1 ~ CL4) 중 마지막 콘볼루션 레이어(CL4)로부터 1920×1080×32의 크기의 최종 특징 맵(FMap4)이 출력되는 경우, 제1 분할 레이어(PL1)의 제1 필터(F11 ~ F14) 각각은 도 5의 (b)에 도시된 바와 같 이, 1×1×32의 크기를 갖는다. 콘볼루션 레이어(CL1 ~ CL4)에서 수행되는 콘볼루션 연산의 특성상, 최종 특징 맵(FMap4)의 깊이는 마지막 콘볼루션 레이어(CL4)에 포함되는 필터의 개수와 동일하므로, 제1 분할 레이어(PL 1)의 각 제1 필터(F11 ~ F14)의 크기는 마지막 콘볼루션 레이어(CL4)의 필터 개수에 따라 결정될 수 있다. 그리고 제1 분할 레이어(PL1)를 제외한 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n) 각각에 포함되는 다수의 제 2 필터의 크기는 제1 분할 레이어(PL1)에 포함된 제1 필터의 크기 보다 큰 크기로 다양하게 설정될 수 있다.일 예로 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)는 도 5의 (d)에 도시된 바와 같이, 3×3×4 크기를 갖거나, 5×5×4 크기를 갖는 4개의 제2 필터(F21 ~ F24)를 포함할 수 있다. 여기서 제1 분할 레이어(PL1)의 제1 필터(F11 ~ F14) 각각의 크기를 최종 특징맵(FMap4)의 깊이에 대응하는 깊 이를 갖는 최소 크기로 설정하는 것은 제1 분할 레이어(PL1)의 제1 필터(F11 ~ F14) 각각이 학습되는 방식에 따 라 최종 특징맵(FMap4)의 z축 방향으로 배열된 특징들을 서로 혼합하여 크기를 줄임으로써, 멀티 레이어(ML)에 서 수행되는 연산량을 최소화하기 위해서이다. 그리고 멀티 레이어(ML)가 각각 제1 필터(F11 ~ F14)보다 크기 가 큰 제2 필터(F21 ~ F24)를 구비하는 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)를 더 포함하는 것은 x축 방 향 및 y축 방향의 인접 원소의 특징을 함께 혼합 반영하여, 출력 이미지의 화질이 저하를 보상하기 위해서이다. 이는 제1 분할 레이어(PL1)의 제1 필터(F11 ~ F14)가 최종 특징맵(FMap4)의 깊이에 대응하는 깊이를 갖는 최소 크기로 설정되어 z축 방향으로 배열된 특징들만을 서로 혼합하여 x축 방향 및 y축 방향의 인접 원소의 특징을 고려하지 못한다는 단점을 보완하기 위한 것이다. 도 3의 셔플링 레이어의 경우에는 다수의 필터(F1 ~ F4) 각각이 3×3×32 크기를 가짐에 따라 1920×1080×32 크기의 최종 특징맵(FMap4)과의 연산에 많은 연산량을 필요로 하였다. 그러나 도 4의 멀티 레이어(ML)에서는 제1 분할 레이어(PL1)가 최종 특징맵(FMap4)의 깊이에 대응하는 깊이를 갖는 최소 크기인 1×1×32의 크기를 갖 게 되면, 도 3의 셔플링 레이어에 비해 1/9의 연산만을 수행하여 연산량을 크게 줄일 수 있게 된다. 그리고 제1 분할 레이어(PL1)에서 출력되는 제1 셔플맵(SMap1)은 도 5의 (c)에 도시된 바와 같이, 최종 특징맵 (FMap4)에 비해 1/8의 크기인 1920×1080×4 크기를 갖게 된다. 그리고 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)는 각각 이전 분할 레이어(PL1, PL2 ~ PL2n-1)에서 크기가 1920×1080×4로 출력되는 제1 내지 제n-1 셔 플맵(SMap1 ~ SMapn-1)을 인가받아 연산을 수행한다. 이때, 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)에서 출력되는 셔플맵(SMap2 ~ SMapn)의 크기는 1920×1080×4로 변화하지 않는다. 따라서 멀티 레이어(ML)가 다수의 분할 레이어(PL1, PL2 ~ PL2n-1)를 포함할 지라도, 전체 연산량은 단일 셔플 링 레이어를 포함하는 경우에 비해, 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)의 개수(n)와 제2 분할 레이어 (PL2 ~ PL2n) 각각의 필터 크기에 따라 더 줄어들 수 있게 된다. 다만, 제1 분할 레이어(PL1)의 제1 필터(F11 ~ F14)가 최종 특징맵(FMap4)의 깊이에 대응하는 깊이를 갖는 최소 크기로 설정되면, 연산량을 줄일 수 있는 반면, 상기한 바와 같이 최종 특징맵(FMap4)에서 추출된 특징을 업스 케일링되는 출력 이미지에 제대로 반영하지 못하게 된다. 이에 도 3의 셔플링 레이어에서는 다수의 필터(F1 ~ F4)가 다양한 크기로 설정될 수 있음에도 제1 분할 레이어(PL1)와 같이 최소 크기인 1×1×32의 크기로 설정될 수 없었다. 그에 반해 도 4의 멀티 레이어(ML)는 제1 분할 레이어(PL1)에서 출력되는 제1 셔플맵(SMap1)에 대해 이후, 적어 도 하나의 분할 레이어(PL2 ~ PL2n)가 제1 분할 레이어(PL1)에 포함된 필터의 크기 보다 큰 크기의 필터로 구성 되어 최종 특징맵(FMap4)에서 추출된 특징이 업스케일링되는 출력 이미지 전체에 고르게 반영될 수 있도록 함으 로써, 출력 이미지의 화질이 저하를 보상할 수 있다. 그리고 리맵핑 레이어(RL)는 다수의 분할 레이어(PL1, PL2 ~ PL2n) 중 최종 분할 레이어(PL2n)에서 출력되는 최 종 셔플맵(SMapn)에 대해 z축 방향의 4개의 원소(1×1×4)를 (f)에 도시된 바와 같이, 기지정된 순서로 2차원으 로 확장하여 배치(2×2×1)하는 리맵핑 작업을 수행한다. 여기서는 설명의 편의를 위하여 리맵핑 레이어(RL)를 별도의 레이어로 도시하였으나, 실제 이미지 업스케일링 장치에서 리맵핑 작업은 메모리 또는 레지스터에 저장 된 최종 셔플맵(SMapn)의 각 원소값에 대한 리드하는 순서를 변경하는 것으로 별도의 연산을 요구하지 않으며, 따라서 물리적으로 구현되지 않아도 무방하다. 상기한 멀티 레이어(ML)에서 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)의 개수와 필터 크기는 피크 신호대 잡 음비(Peak Signal-to-Noise Ratio: 이하 PSNR)을 기반으로 실험을 통해 미리 결정될 수 있다. 다만, 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)의 개수와 필터 크기가 증가할수록 멀티 레이어(ML)에서 수행되는 연산량이 크게 증가하므로, 멀티 레이어(ML)에서 단일 셔플링 레이어의 연산량보다 적은 연산이 수행되도록 조절될 수 있 다. 즉 적어도 하나의 제2 분할 레이어(PL2 ~ PL2n)의 개수와 필터 크기는 다수의 분할 레이어(PL1, PL2 ~ PL2n) 전체에서 수행되는 연산 횟수가 도 3에 도시된 셔플링 레이어에서 수행되는 연산 횟수를 기반으로 미리 지정되는 기준 횟수 미만이 되도록 설정될 수 있다.표 3"}
{"patent_id": "10-2020-0052078", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "표 3은 멀티 레이어(ML)에 포함된 분할 레이어(PL1, PL21, PL22) 각각에서 필터 크기에 따라 수행되는 곱셈 및 덧셈 연산 횟수를 나타낸다. 상기한 바와 같이, 멀티 레이어(ML)에서 제1 분할 레이어(PL1)의 필터 크기는 최종 특징맵(FMap4)의 깊이, 즉 마지막 콘볼루션 레이어(CL4)의 필터 개수에 따라 1×1×32로 설정될 수 있으며, 2개의 제2 분할 레이어(PL21, PL22)의 필터 크기는 @×@×32 및 #×#×32와 같이 제1 분할 레이어(PL1)의 필터의 크기인 1×1×32 보다 큰 크 기로 다양하게 설정될 수 있다. 이 경우, 제1 분할 레이어(PL1)에서는 128회의 곱셈과 96회의 덧셈 연산이 수행되며, 제21 분할 레이어(PL21)에 서는 @×@×4×4회의 곱셈과 (@×@×4-1)×4회의 덧셈 연산이 수행되며, 제22 분할 레이어(PL22)에서는 #×#×4 ×4회의 곱셈과 (#×#×4-1)×4회의 덧셈 연산이 수행된다. 도 6은 본 발명의 일 실시예에 따른 다중 디콘볼루션 레이어를 갖는 이미지 업스케일링 장치에서 저감된 연산량 을 비교하여 도시한 그래프이다. 도 5에서는 FSRCNN_s를 기반으로 HD 이미지를 FHD 이미지로 업스케일링 하는 경우를 예로 들었으며, (a)는 도 2 와 같이, 디콘볼루션 레이어를 그대로 이용하는 경우를 나타내고, (b)는 도 3과 같이 디콘볼루션 레이어를 셔플 링 레이어로 대체하여 적용한 경우를 나타내며, (c) 및 (d)는 디콘볼루션 레이어를 멀티 레이어(ML)로 대체하여 적용한 경우를 나타낸다. (c)와 (d) 중 (c)는 멀티 레이어(ML)가 2개의 분할 레이어(PL1, PL2)를 갖고, 제2 분 할 레이어(PL2)의 필터 크기가 3×3×4인 경우를 도시하였으며, (d)는 멀티 레이어(ML)가 3개의 분할 레이어 (PL1 ~ PL3)를 갖고, 제2 및 제3 분할 레이어(PL2, PL3)의 필터 크기가 각각 3×3×4, 3×3×4인 경우를 도시하 였다. 그리고 표 4는 도 6에 도시된 단일 디콘볼루션 레이어(DL)와 단일 셔플링 레이어 및 도 4의 멀티 레이어(ML)에 따른 필터 크기와 개수, 연산량 및 PSNR을 비교한 결과를 나타낸다. 표 4 표 4에서는 멀티 레이어(ML)가 2개의 분할 레이어(PL1, PL2)를 갖는 경우와 3개의 분할 레이어(PL1, PL21, PL22)를 갖는 경우를 함께 나타내었으며, 2개의 분할 레이어(PL1, PL2)를 갖는 경우에서도 제2 분할 레이어 (PL2)의 필터 크기가 3×3×4인 경우와 5×5×4인 경우를 함께 나타내었다. 표 4에 나타난 바와 같이, 멀티 레이어(ML)가 2개의 분할 레이어(PL1, PL2)를 갖고, 제2 분할 레이어(PL2)의 필 터 크기가 3×3×4인 경우, 제1 및 제2 분할 레이어(PL1, PL2)에서 수행되는 곱셈 연산이 각각 128, 144로 총 272회 수행되고, 덧셈 연산은 96, 140로 총 236회 수행된다. 그리고 제2 분할 레이어(PL2)의 필터 크기가 5×5 ×4인 경우, 제1 및 제2 분할 레이어(PL1, PL2)에서 수행되는 곱셈 연산이 각각 128, 400로 총 528회 수행되고, 덧셈 연산은 96, 492로 총 492회 수행된다. 이는 단일 디콘볼루션 레이어(DL)와 단일 셔플링 레이어가 각각 곱셈 연산을 2592회 및 1152회 수행하고, 덧셈 연산은 2560회 및 1120회 수행하는 것에 비해 연산 횟수가 곱셈과 덧셈 연산 모두에서 크게 줄어든 것임을 알 수 있다. 그리고 멀티 레이어(ML)가 3개의 분할 레이어(PL1, PL21, PL22)를 갖고, 제2 및 제3 분할 레이어(PL21, PL22) 의 필터 크기가 각각 3×3×4, 3×3×4인 경우, 멀티 레이어(ML)에서 수행되는 총 곱셈 연산과 덧셈 연산은 각 각 416회 및 376회로 이 또한 단일 디콘볼루션 레이어(DL)와 단일 셔플링 레이어에서 수행되는 곱셈 연산 및 덧 셈 연산보다 크게 줄어들었음을 알 수 있다. 한편, PSNR은 멀티 레이어(ML)가 2개의 분할 레이어(PL1, PL2)를 갖는 경우, 제2 분할 레이어(PL2)의 필터 크기 에 따라 각각 36.25, 36.30이고, 3개의 분할 레이어(PL1, PL21, PL22)를 갖는 경우에 36.36으로, 단일 디콘볼 루션 레이어(DL)와 단일 셔플링 레이어를 적용한 경우의 36.51, 36.50과 크게 차이가 나지 않음을 알 수 있다. 즉 도 4의 멀티 레이어(ML)를 적용하는 경우, 업스케일링된 이미지의 화질에 거의 영향을 미치지 않으면서도 연 산량을 대폭적으로 줄일 수 있음을 알 수 있다. 따라서 이미지 업스케일링 장치를 하드웨어로 구현할지라도 필 요한 연산기의 개수를 크게 줄일 수 있으므로 소형, 저비용으로 제조가 가능하다. 상기에서는 멀티 레이어(ML)를 FSRCNN_s에 적용하는 경우를 예로 들어 설명하였으나, 멀티 레이어(ML)는 FSRCNN 에서 디콘볼루션 레이어를 대체하여 적용될 수도 있으며, CNN을 기반으로 구현되는 다른 이미지 업스케일링 장 치에서도 디콘볼루션 레이어를 대체하여 적용될 수 있다. 다만 소형, 저비용의 하드웨어로 고성능의 이미지 업 스케일링 장치를 구현하고자 하는 경우, 현재로서는 멀티 레이어(ML)를 FSRCNN_s에 적용하는 것이 가장 효과적 인 것으로 볼 수 있다. 뿐만 아니라, 도 5의 (c) 및 (d)에 도시된 바와 같이, 멀티 레이어(ML)가 다수의 분할 레이어를 포함하여, 다수 의 분할 레이어에서 연산이 분산되어 수행됨에 따라 다수의 분할 레이어와 다수의 콘볼루션 레이어(CL1 ~ CL4) 사이의 연산량의 차이가 (a) 및 (b)의 단일 디콘볼루션 레이어나 셔플링 레이어를 포함하는 경우에 비해 작으므 로, 효율적인 파이프 라인 구조로 설계 가능하도록 한다. 도시하지 않았으나, 멀티 레이어(ML)의 다수의 분할 레이어 중 최종 분할 레이어를 제외한 나머지 분할 레이어 는 표 3에 표시된 바와 같이, ReLU(Recified Linear Unit)와 같은 기지정된 활성화 함수(Activation Functio n)에 따라 필터링을 수행하는 단계가 더 포함될 수 있다. 도 7은 본 발명의 일 실시예에 따른 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법을 나타낸다. 도 4 및 도 5를 참조하여, 도 7의 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법을 설명하면, 우선 포함될 콘볼루션 레이어의 개수와 각 콘볼루션 레이어에 포함되는 필터의 개수 및 크기를 설정한다(S10). 여기 서 콘볼루션 레이어의 개수와 각 콘볼루션 레이어에 포함되는 필터의 개수 및 크기는 FSRCNN이나 FSRCNN_s 등을 적용하는 경우, 미리 지정된 콘볼루션 레이어의 개수와 각 콘볼루션 레이어에 포함되는 필터의 개수 및 크기로 설정될 수 있다. 그러나 입력 이미지의 해상도와 출력 이미지의 해상도에 따라 다양하게 조절될 수 있다. 그리고 설정된 다수의 콘볼루션 레이어 중 최종 콘볼루션 레이어에서 출력되는 최종 특징맵의 크기를 확인한다 (S20). 특히 최종 특징맵의 깊이를 확인한다. 최종 특징맵에서 폭과 높이, 즉 x축 방향 및 y축 방향 크기는 입력 이미지의 해상도에 의해 결정될 수 있으나, 최종 특징맵의 깊이는 최종 콘볼루션 레이어의 필터 개수에 의 해 결정된다. 따라서 최종 콘볼루션 레이어의 필터 개수를 확인하여, 최종 특징맵의 깊이를 판별할 수 있다. 그리고 멀티 레이어(ML)를 구성할 분할 레이어의 개수를 설정한다(S30). 또한 분할 레이어 각각의 필터 크기를 설정한다(S40). 여기서 분할 레이어의 개수는 2개 이상으로 설정될 수 있고, 다수의 분할 레이어 중 최종 특징 맵을 인가받는 제1 분할 레이어(PL1)에 포함되는 필터 크기는 확인된 최종 특징맵의 깊이에 대응하는 깊이를 갖는 최소 크기로 설정될 수 있다. 멀티 레이어(ML)에 포함되는 분할 레이어의 전체 개수와 제1 분할 레이어 (PL1)를 제외한 나머지 분할 레이어에 포함되는 필터 크기는 제1 분할 레이어(PL1)에 포함되는 필터보다 큰 크 기로 멀티 레이어(ML)의 전체 연산량을 고려하여 다양하게 설정될 수 있다. 즉 적어도 하나의 제2 분할 레이어 (PL2 ~ PL2n)의 개수와 필터 크기는 다수의 분할 레이어(PL1, PL2 ~ PL2n) 전체에서 수행되는 연산 횟수가 셔플 링 레이어에서 수행되는 연산 횟수를 기반으로 미리 지정되는 기준 횟수 미만이 되도록 설정될 수 있다. 그리 고 각 분할 레이어에 포함될 필터의 개수는 입력 이미지와 출력 이미지 사이의 해상도 차에 따라 결정된다. 멀티 레이어(ML)를 구성할 분할 레이어의 개수와 분할 레이어 각각에 포함될 필터의 개수 및 크기가 결정되면, 다수의 분할 레이어 중 최종 분할 레이어에서 출력되는 셔플맵에서 z축 방향의 다수개의 원소를 2차원으로 확장 하여 배치하는 순서를 지정하는 리맵핑 레이어를 설정한다(S50). 리맵핑 레이어는 분할 레이어에 포함되는 필 터의 개수에 대응하는 개수로 출력되는 최종 셔플맵의 z축 방향으로 위치하는 원소를 2차원 상에서의 기지정된 패턴에 따른 배치 위치로 변경하도록 배치 순서를 결정하여 설정된다. 이에 리맵핑 레이어는 최종 셔플맵으로 부터 입력 이미지보다 업스케일링된 해상도를 갖는 출력 이미지를 획득하여 출력할 수 있게 된다. 본 발명에 따른 방법은 컴퓨터에서 실행시키기 위한 매체에 저장된 컴퓨터 프로그램으로 구현될 수 있다. 여기 서 컴퓨터 판독가능 매체는 컴퓨터에 의해 액세스 될 수 있는 임의의 가용 매체일 수 있고, 또한 컴퓨터 저장 매체를 모두 포함할 수 있다. 컴퓨터 저장 매체는 컴퓨터 판독가능 명령어, 데이터 구조, 프로그램 모듈 또는 기타 데이터와 같은 정보의 저장을 위한 임의의 방법 또는 기술로 구현된 휘발성 및 비휘발성, 분리형 및 비분 리형 매체를 모두 포함하며, ROM(판독 전용 메모리), RAM(랜덤 액세스 메모리), CD(컴팩트 디스크)-ROM, DVD(디 지털 비디오 디스크)-ROM, 자기 테이프, 플로피 디스크, 광데이터 저장장치 등을 포함할 수 있다. 본 발명은 도면에 도시된 실시예를 참고로 설명되었으나 이는 예시적인 것에 불과하며, 본 기술 분야의 통상의 지식을 가진 자라면 이로부터 다양한 변형 및 균등한 타 실시예가 가능하다는 점을 이해할 것이다. 따라서, 본 발명의 진정한 기술적 보호 범위는 첨부된 청구범위의 기술적 사상에 의해 정해져야 할 것이다."}
{"patent_id": "10-2020-0052078", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 FSRCNN_s를 적용한 이미지 업스케일링 장치의 개략적 구성을 나타낸다. 도 2는 도 1의 FSRCNN_s의 디콘볼루션 레이어의 디콘볼루션 연산 방식을 설명하기 위한 도면이다. 도 3은 FSRCNN_s의 디콘볼루션 레이어를 대체할 수 있는 셔플링 레이어의 동작을 설명하기 위한 도면이다. 도 4는 본 발명의 일 실시예에 따른 다중 디콘볼루션 레이어를 갖는 이미지 업스케일링 장치의 개략적 구성을 나타낸다. 도 5는 도 4의 멀티 레이어의 동작을 설명하기 위한 도면이다. 도 6은 본 발명의 일 실시예에 따른 다중 디콘볼루션 레이어를 갖는 이미지 업스케일링 장치에서 저감된 연산량 을 비교하여 도시한 그래프이다. 도 7은 본 발명의 일 실시예에 따른 이미지 업스케일링 장치의 디콘볼루션 레이어 다중화 방법을 나타낸다."}
