{"patent_id": "10-2022-0181546", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0099746", "출원번호": "10-2022-0181546", "발명의 명칭": "블록체인 기반 부분 모델 동기화 방법", "출원인": "서울과학기술대학교 산학협력단", "발명자": "공성현"}}
{"patent_id": "10-2022-0181546", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "분산 네트워크의 지역 인공 지능 모델을 관리하는 복수개의 IoT디바이스 노드로 구성되는 연합학습 모델 운용시스템에 있어서,클라이언트 노드가 동일 지역 내의 프라이머리 노드 및 일반 노드에게 연합 학습 및 모델 동기화 요청 메시지를브로드 캐스팅하는 단계;상기 프라이머리 노드가 상기 모델 동기화 요청 메시지의 수신 시점을 기록하고, 상기 수신 시점을 기준으로 동기화를 준비하는 단계;상기 동일 지역 내의 모든 노드가 지역 인공 지능 모델 파라미터 값 및 인증서를 포함하는 동기화 메시지를 브로드 캐스팅하는 단계;상기 동일 지역 내의 모든 노드가 브로드 캐스팅 된 상기 동기화 메시지를 수집하여 상기 지역 인공 지능 모델에 대한 동기화 인공 지능 모델을 도출하는 단계;상기 프라이머리 노드가 상기 동기화 인공 지능 모델을 수집한 후, 정상 범위 학습이 수행되었는지 여부를 판별하는 단계; 및상기 클라이언트 노드가 상기 프라이머리 노드로부터 정상 학습된 동기화 인공 지능 모델을 수신하여 지역 인공지능 모델을 업데이트하는 단계를 포함하는 블록체인 기반 부분 모델 동기화 방법."}
{"patent_id": "10-2022-0181546", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 동기화 인공 지능 모델을 도출하는 단계는,수집된 동기화 메시지의 개수가 기 설정된 기준 개수값을 초과하는지 여부를 판단하는 단계; 및수집된 동기화 메시지에 포함되어 있는 상기 지역 인공 지능 모델 파라미터 값을 평균화하여 상기 동기화 인공지능 모델을 도출하는 단계를 포함하는 블록체인 기반 부분 모델 동기화 방법."}
{"patent_id": "10-2022-0181546", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,수집된 동기화 메시지의 개수가 기 설정된 기준 개수값 이하인 경우, 상기 클라이언트 노드를 프라이머리 노드로 변경하는 단계; 및상기 프라이머리 노드로 변경된 클라이언트 노드가 연합 학습 및 모델 동기화 요청 메시지를 다시 브로드 캐스팅하는 단계를 포함하는 블록체인 기반 부분 모델 동기화 방법,"}
{"patent_id": "10-2022-0181546", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서,상기 정상 범위 학습이 수행되었는지 여부를 판별하는 단계는,수집된 인공 지능 모델의 평균 편차를 산출하는 단계; 및상기 평균 편차를 기 설정된 기준 편차 값과 비교하여 정상 범위 학습이 수행되었는지 여부를 판별하는 단계를공개특허 10-2024-0099746-3-포함하는 블록체인 기반 부분 모델 동기화 방법."}
{"patent_id": "10-2022-0181546", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서,상기 지역 인공 지능 모델을 업데이트하는 단계는,지역 인공 지능 모델을 업데이트 한 이력을 블록체인에 저장하는 단계를 포함하는 블록체인 기반 부분 모델 동기화 방법."}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "실시예에 따르면, 분산 네트워크의 지역 인공 지능 모델을 관리하는 복수개의 IoT디바이스 노드로 구성되는 연합 학습 모델 운용 시스템에 있어서, 클라이언트 노드가 동일 지역 내의 프라이머리 노드 및 일반 노드에게 연합 학 습 및 모델 동기화 요청 메시지를 브로드 캐스팅하는 단계; 상기 프라이머리 노드가 상기 모델 동기화 요청 메시 (뒷면에 계속)"}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명의 일실시예는 블록체인 기반 부분 모델 동기화 방법에 관한 것이다."}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "기계학습과 딥러닝을 필두로 하는 인공지능 기술들은 그 높은 정확도와 응용가능성으로 인해 오늘날 다양한 분 야에 적용되어 두각을 나타내고 있다. 특히, 최근에는 BERT/GPT-3와 같은 고도화 된 완성형 학습 모델들이 등장 하였으며, 이로 인해 인공지능 기술의 정확도와 성능이 기술적 특이점에 도달했다. 그러나, 이처럼 인공지능 학습 모델의 형태가 극도로 고도화되면서 모델의 구조적 개선으로 인한 성능 개선의 여지는 점차 줄어들었고, 그로 인해 학습 모델보다는 학습 데이터의 양과 품질 개선으로 인한 인공지능 기술의 성능 향상 방안이 점차 주목받기 시작하고 있다. 일반적으로 대량의 데이터와 고품질의 데이터는 학습 모델의 성능을 향상시킨다. 그러나, 실제 현업에서 학습 데이터의 양과 품질을 개선하는 과정상의 가장 큰 문제점은 데 이터의 프라이버시다. 많은 수의 학습 데이터를 이용하기 위해서는 한 곳에 대량의 데이터를 수집하고 보관해야 하는데, 이러한 데이터 수집 과정에서 개인정보 보호와 프라이버시의 문제가 발생한다. 또한, 데이터의 프라이버시를 보호하면서 대량의 데이터를 한 곳에 모을 수 있도록 하는 프라이버시 보존 (Privacy-preserving) 및 데이터 익명화(Data Anonymization) 기술은 익명화를 위한 임의(random) 데이터 주입 및 데이터 소실/필터링 과정에서 데이터의 품질을 저해하게 된다. 따라서, 일반적인 인공지능 모델의 학습 방법 론으로는 데이터의 양과 품질을 모두 개선하기에는 한계가 존재한다. 연합 학습(Federated Learning)은 위와 같은 문제를 해결할 수 있는 방법이다. 이 모델 학습 방법론은 데이터가 수집되는 단말 디바이스들에서 로컬 모델(Local Model)을 각각 학습한 후, 이 모델들을 중앙 서버에서 취합함으 로써 분산된 형태의 학습을 수행한다. 이러한 방식은 데이터가 직접 전송되는게 아닌, 데이터로 학습된 모델이 전송되기 때문에 데이터 프라이버시 문제로부터 자유롭다. 또한, 대량의 데이터로 인학 학습 부담을 단말 디바 이스들이 분담하기 때문에, 대량의 데이터를 이용한 학습 또한 용이하다. 그러나, 이러한 연합학습 기술 또한 몇가지 단점이 존재한다. 특히, 중앙 서버가 모델을 취합하는 과정에서 발 생하는 동기화 문제와, 악의적으로 잘못 학습된 모델을 전송하는 악의적 단말 디바이스의 존재로 인한 모델 포 이즈닝 공격(Model Poisoning Attack)에 대비해야한다는 단점이 있다. 따라서, 이러한 단점을 보완하면서 동시 에 효율적인 연합학습 시스템이 필요하다. 특히, 각 가정 및 건물에 스마트 미터기를 통해 전력 사용량을 계측하고, 전력 데이터를 이용하여 실시간 에너 지 수요에 대응하기 위한 스마트시티 및 에너지클라우드와 같은 기술 분야의 경우, 사용량을 예측하기 위한 솔 루션으로 인공지능 기반의 전력 수요 예측 기술이 적극적으로 활용되고 있으며, 연합학습의 방법론 또한 해당 환경에 최적으로 적용될 수 있다. 그러나, 스마트 미터기의 계측 데이터 혹은 학습모델에 대한 악의적인 조작과 광범위한 범위에 분포된 스마트미"}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "터기에 대한 동기화 효율성 문제가 해당 영역의 핵심 난제로 작용하고 있다.발명의 내용"}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 이루고자 하는 기술적 과제는 분산된 네트워크 환경의 인공지능 응용 애플리케이션에서 사용되는 연 합학습 체계의 보안 취약점과 효율성을 개선할 수 있는 블록체인 기반 부분 모델 동기화 방법을 제공하는데 있 다. 또한, 블록체인을 통해 단말 디바이스에서 학습되는 모델을 동기화하고, 이를 관리 및 배포할 수 있는 블록체인 기반 부분 모델 동기화 방법에 관한 것이다."}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "실시예에 따르면, 분산 네트워크의 지역 인공 지능 모델을 관리하는 복수개의 IoT디바이스 노드로 구성되는 연 합학습 모델 운용 시스템에 있어서, 클라이언트 노드가 동일 지역 내의 프라이머리 노드 및 일반 노드에게 연합 학습 및 모델 동기화 요청 메시지를 브로드 캐스팅하는 단계; 상기 프라이머리 노드가 상기 모델 동기화 요청 메시지의 수신 시점을 기록하고, 상기 수신 시점을 기준으로 동기화를 준비하는 단계; 상기 동일 지역 내의 모 든 노드가 지역 인공 지능 모델 파라미터 값 및 인증서를 포함하는 동기화 메시지를 브로드 캐스팅하는 단계; 상기 동일 지역 내의 모든 노드가 브로드 캐스팅 된 상기 동기화 메시지를 수집하여 상기 지역 인공 지능 모델 에 대한 동기화 인공 지능 모델을 도출하는 단계; 상기 프라이머리 노드가 상기 동기화 인공 지능 모델을 수집 한 후, 정상 범위 학습이 수행되었는지 여부를 판별하는 단계; 및 상기 클라이언트 노드가 상기 프라이머리 노 드로부터 정상 학습된 동기화 인공 지능 모델을 수신하여 지역 인공 지능 모델을 업데이트하는 단계를 포함하는 블록체인 기반 부분 모델 동기화 방법을 제공한다. 상기 동기화 인공 지능 모델을 도출하는 단계는, 수집된 동기화 메시지의 개수가 기 설정된 기준 개수값을 초과 하는지 여부를 판단하는 단계; 및 수집된 동기화 메시지에 포함되어 있는 상기 지역 인공 지능 모델 파라미터 값을 평균화하여 상기 동기화 인공 지능 모델을 도출하는 단계를 포함할 수 있다. 수집된 동기화 메시지의 개수가 기 설정된 기준 개수값 이하인 경우, 상기 클라이언트 노드를 프라이머리 노드 로 변경하는 단계; 및 상기 프라이머리 노드로 변경된 클라이언트 노드가 연합 학습 및 모델 동기화 요청 메시 지를 다시 브로드 캐스팅하는 단계를 포함할 수 있다. 상기 정상 범위 학습이 수행되었는지 여부를 판별하는 단계는, 수집된 인공 지능 모델의 평균 편차를 산출하는 단계; 및 상기 평균 편차를 기 설정된 기준 편차 값과 비교하여 정상 범위 학습이 수행되었는지 여부를 판별하 는 단계를 포함할 수 있다. 상기 지역 인공 지능 모델을 업데이트하는 단계는, 지역 인공 지능 모델을 업데이트 한 이력을 블록체인에 저장 하는 단계를 포함할 수 있다."}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "실시예에 따른 블록체인 기반 부분 모델 동기화 방법은 분산된 네트워크 환경의 인공지능 응용 애플리케이션에 서 사용되는 연합학습 체계의 보안 취약점과 효율성을 개선할 수 있다. 또한, 블록체인을 통해 단말 디바이스에서 학습되는 모델을 동기화하고, 이를 관리 및 배포할 수 있다."}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면을 참조하여 본 발명의 바람직한 실시예를 상세히 설명한다. 다만, 본 발명의 기술 사상은 설명되는 일부 실시 예에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있고, 본 발명의 기술 사상 범위 내에서라면, 실시 예들간 그 구성 요소들 중 하나 이상을 선택적으로 결합, 치환하여 사용할 수 있다. 또한, 본 발명의 실시예에서 사용되는 용어(기술 및 과학적 용어를 포함)는, 명백하게 특별히 정의되어 기술되"}
{"patent_id": "10-2022-0181546", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "지 않는 한, 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 일반적으로 이해될 수 있는 의미로 해 석될 수 있으며, 사전에 정의된 용어와 같이 일반적으로 사용되는 용어들은 관련 기술의 문맥상의 의미를 고려 하여 그 의미를 해석할 수 있을 것이다. 또한, 본 발명의 실시예에서 사용된 용어는 실시예들을 설명하기 위한 것이며 본 발명을 제한하고자 하는 것은 아니다. 본 명세서에서, 단수형은 문구에서 특별히 언급하지 않는 한 복수형도 포함할 수 있고, \"A 및(와) B, C 중 적어 도 하나(또는 한 개 이상)\"로 기재되는 경우 A, B, C로 조합할 수 있는 모든 조합 중 하나 이상을 포함할 수 있 다. 또한, 본 발명의 실시 예의 구성 요소를 설명하는 데 있어서, 제1, 제2, A, B, (a), (b) 등의 용어를 사용할 수 있다. 이러한 용어는 그 구성 요소를 다른 구성 요소와 구별하기 위한 것일 뿐, 그 용어에 의해 해당 구성 요소의 본 질이나 차례 또는 순서 등으로 한정되지 않는다. 그리고, 어떤 구성 요소가 다른 구성요소에 '연결', '결합' 또는 '접속'된다고 기재된 경우, 그 구성 요소는 그 다른 구성 요소에 직접적으로 연결, 결합 또는 접속되는 경우뿐만 아니라, 그 구성 요소와 그 다른 구성 요소 사이에 있는 또 다른 구성 요소로 인해 '연결', '결합' 또는 '접속' 되는 경우도 포함할 수 있다. 또한, 각 구성 요소의 \"상(위) 또는 하(아래)\"에 형성 또는 배치되는 것으로 기재되는 경우, 상(위) 또는 하(아 래)는 두 개의 구성 요소들이 서로 직접 접촉되는 경우뿐만 아니라 하나 이상의 또 다른 구성 요소가 두 개의 구성 요소들 사이에 형성 또는 배치되는 경우도 포함한다. 또한, \"상(위) 또는 하(아래)\"으로 표현되는 경우 하 나의 구성 요소를 기준으로 위쪽 방향뿐만 아니라 아래쪽 방향의 의미도 포함할 수 있다. 이하, 첨부된 도면을 참조하여 실시예를 상세히 설명하되, 도면 부호에 관계없이 동일하거나 대응하는 구성 요 소는 동일한 참조 번호를 부여하고 이에 대한 중복되는 설명은 생략하기로 한다. 실시예에 따른 방법은 연합학습 모델에 대한 모델 포이즈닝 공격과 모델 동기화의 효율성 및 지연율을 개선하기 위해, 블록체인 기반 연합학습 시스템과 블록체인 기반 부분 모델 동기화 프로토콜로 구성될 수 있다. 도1은 실시예에 따른 블록체인 기반 연합학습 시스템의 개념도이고, 도2는 실시예에 따른 IoT디바이스 노드의 구성 블록도이다. 도1 및 도2를 참조하면, 실시예에 따른 블록체인 기반 연합학습 시스템은 IoT 디바이스 노드들로 구성된 분산 네트워크에 적용될 수 있다. IoT 분산 네트워크는 IoT 디바이스들이 광범위한 영역에 분포되어 하나 의 전체적인 시스템을 구성하면서, 동시에 각 노드의 동작 주체성이 동등한 수준으로 분포된 시스템을 의 미할 수 있다. 분산 네트워크를 구성하는 IoT 디바이스 노드들은 광범위한 영역에 분포되어 있으며, 각 노 드가 위치한 지역적 특성에 따라 상이한 패턴의 데이터가 수집되거나 또는 다른 제어(control) 정책을 요 구할 수 있다. 이러한 지역적 특성으로 구분된 네트워크를 지역 영역(Local area)로 구분할 수 있다. 각 IoT 디바이스 노드들은 각 지역 영역에 분포하고 있으며, 전체 분산 네트워크는 이러한 지역 영역이 다 수 존재하는 형태로 구성될 수 있다. 동일한 지역 영역 내부의 IoT 디바이스 노드들은 서로 연결되어 있으 며, 지역 영역의 경계에 위치한 서로 다른 영역의 IoT 디바이스 노드들 또한 연결될 수 있다. 또한, 이러 한 지역 영역의 구분은 시간과 정책에 따라 병합되거나 분할되는 형태로 변화할 수 있다. 각 IoT 디바이스 노드들은 데이터 센싱 및 제어 모듈(Data sensing & control module), 모델 관리 모듈(Model management module), 블록체인 모듈(Blockchain module) 그리고 통신 모듈 (Communication module)을 포함할 수 있다. 데이터 센싱 및 제어 모듈은 주변 환경에서 관측되는 데이터를 수집할 수 있다. 입력된 데이터를 바탕으로 특정 시스템에 대한 제어를 수행하는 IoT 디바이스 노드의 경우, 사전에 정의된 기능 혹은 상위의 인공 지능 모 듈에 의해 결정된 제어 행동을 수행할 수 있다. 또한, 이 데이터 센싱 및 제어 모듈은 계측된 데이터를 이 용하여 내부의 지역 인공지능 모델(Local AI model)과 상호 작용하는 과정에서 센서 및 컨트롤러에 입출력 된 데이터를 해당 지역 인공지능 모델이 처리할 수 있는 형태로 전처리할 수 있다. 전처리 기능은 이상치(outlie r)에 대한 필터링, 노이즈 제거(noise-reduction), 임베딩(embedding) 등의 동작을 포함할 수 있다. 모델 관리 모듈은 에너지 수요량 예측, 이상 징후 탐지와 같은 문제를 해결하기 위해 IoT 디바이스 노드에 탑재된 인공지능 모듈을 관리하고, 데이터 센싱 및 제어 모듈에서 수집되는 데이터를 이용하여 모델을 지 역적으로 학습시킬 수 있다. 또한, 모델 관리 모듈은 입력된 데이터에 따라 다음 제어 행동의 결과를 연산 하는 기능을 수행할 수 있다. 모델 관리 모듈은 외부에서 새로운 모델에 대한 업데이트 파라미터 값이 입력될 경우, 외부에서 입력된 파 라미터의 값을 이용하여 지역 인공 지능 모델을 업데이트하는 기능을 수행할 수 있다. 지역 인공 지능 모델을 업데이트하는 과정은 모델을 구성하는 파라미터의 값을 수정하는 형태로 동작할 수 있다. 예를 들어, 딥러닝 모델의 각 노드에 존재하는 파라미터는 y=Wx+b와 같은 형태로 가중치(weight) 파라미 터인 W벡터와 편향(bias) 값인 b벡터인 두 개의 벡터로 구성될 수 있다. 기존의 모델 M을 새로운 모델 Mnew로 업 데이트하는 과정은 모델 M내부의 뉴럴 노드들이 가지고 있는 모든 W, b 벡터들을 Mnew에 해당되는 값으로 변경하 는 것을 의미할 수 있다. 모델을 업데이트하는 연산의 방식은 다양한 방식이 사용될 수 있다. 블록체인 모듈은 연합 학습을 위해 외부에서 입력된 지역 인공 지능 모델들의 정보를 블록의 형태로 저장 할 수 있다. 블록체인 모듈은 분산된 형태의 데이터베이스로 구성될 수 있으며, 블록을 저장하는 여러 노 드들이 함께 구성하는 분산 데이터베이스 시스템을 의미할 수 있다. IoT 디바이스 노드는 자신의 지역 인 공 지능 모델의 모든 업데이트 이력과 해당 모델을 업데이트하는 과정에 참여한 주변 모든 노드들의 정보를 블 록에 저장할 수 있다. 통신 모듈은 IoT 디바이스 노드의 일반적인 패킷 통신과 함께, 연합 학습을 위해 주변 노드와 모델을 교환하고 동기화하는 블록체인 기반 부분 모델 동기화 프로토콜을 수행할 수 있다. 실시예에서 패킷 통신이란 IoT 디바이스 노드 레벨에서 수집되는 현장 데이터를, 요구하는 원격지의 서버에 전 송하는 일반적인 서버-클라이언트 방식의 통신을 의미할 수 있다. 실시예에 따른 블록체인 기반 부분 모델 동기화 방법은 분산 IoT 네트워크 상의 IoT디바이스 노드들에서 운용되 는 지역 인공지능 모델들을 연합학습을 통해 업데이트하고 동기화하는 프로토콜을 의미할 수 있다. 실시예에 따른 블록체인 기반 부분 모델 동기화 방법 PBFT(Practical Byzantine Fault-Tolerance) 프로토콜의 합의 방식에 기반하여 설계된 프로토콜로써, 지역 영역(Local area) 단위로 수행되는 부분 동기화 방식의 합의 를 수행하며, 연합학습의 메커니즘을 수행할 수 있다. 분산 IoT 네트워크의 환경에서는, 각 노드의 통신 자율성이 균등하며, 따라서 모든 노드는 주도적으로 통신 프 로토콜의 시작과 종료를 자체적으로 결정할 수 있는 권한을 갖는다. 즉, 모든 노드는 자율적으로 통신 혹은 데 이터 교환(연합 학습을 위한 모델 공유 및 동기화)을 요청하는 요청 클라이언트(request client) 노드가 될 수 있다. 이 때, 임의의 노드에 의해 통신 프로토콜이 시작 임의의 시점 t에서는 해당 데이터 통신 요청에 대한 합 의를 주도적으로 이끌어 갈 프라이머리 노드(Primary node)가 존재하며, 노드들 중 프라이머리 노드가 아닌 다 른 노드들은 블록체인을 통해 동일한 데이터를 저장하고, 연합학습을 위해 자신의 모델에 관련된 정보를 제공하 는 일반 노드의 역할을 수행할 수 있다. 모든 노드들은 공정한 기회를 통해 임의의 시간에 프라이머리 노드로 선정될 수 있으며, 이 선정 기준은 시간의 흐름에 따른 순환과 같은 방식의 정책을 통해 선정될 수 있다. 도3은 실시예에 따른 블록체인 기반 부분 모델 동기화 방법의 순서도이고, 도4는 실시예에 따른 블록체인 기반 모델 동기화 방법의 각 노드간의 데이터 통신을 설명하기 위한 도면이다. 이하에서는, 블록체인 기반 부분 모델 동기화 방법과 프로토콜은 동일한 의미로 사용될 수 있다. 실시예에서, 블록체인 기반 부분 모델 동기화 방법은 다섯 개의 파라미터를 입력으로 받아 동작을 수행할 수 있 다. C, P, N 파라미터는 네트워크상의 특정 노드를 지칭하는 문자로, C 는 해당 프로토콜의 시작을 제안한 클라 이언트 노드를 의미할 수 있다. P와 N은 각각 해당 프로토콜이 시작된 시점의 프라이머리 노드의 집합(P)과 프 라이머리가 아닌 일반 노드들의 집합(N)을 의미할 수 있다. Ln과 Lp은 동기화 프로토콜의 신뢰 수준에 대한 설정값으로, Ln은 프라이머리 노드의 신뢰 수준으로, 매 프로토 콜의 동작시마다 몇 개의 노드가 동일한 값(모델의 가중치 파라미터)을 제공해야 신뢰할 것인지에 대한 기준치 값을 의미할 수 있다. Lp는 동기화 프로토콜이 합의하는 과정의 전체에 대한 신뢰 수준 값으로, 전체 동기화 과정에서 몇 개의 프라이 머리 노드가 동일한 값을 제공해야 신뢰할 것인지에 대한 기준치 값이다. 즉, Lp는 기준 개수값을 의미할 수 있 다. l파라미터는 전체 연합학습 메커니즘의 학습률을 나타내는 값으로, 노드들의 모델을 합계하는 과정에서 얼마나 엄격한 기준으로 학습된 모델을 합계할 것인지를 의미한다. 즉, l은 기준 편차 값을 의미할 수 있다. 도3 및 4를 참조하면, 먼저, 클라이언트 노드는 동일 지역 내의 프라이머리 노드 및 일반 노드에게 연합 학습 및 모델 동기화 요청 메시지를 브로드 캐스팅한다(S301). 블록체인 기반 부분 모델 동기화 방법은 임의의 시간에 모델을 업데이트하기를 희망하는 특정 노드 C가 자신의 주변 노드에게 연합학습 및 모델 동기화/공유를 요청하는 메시지(req(Mc, Ac))를 브로드캐스팅함으로써 시작된 다. 이 때, 특정 노드 C는 클라이언트 노드로 지정될 수 있다. 클라이언트 노드는 일반 노드이거나 또는 프라이 머리 노드일 수 있다. 요청 메시지는 동일한 지역 영역(local area) 내의 모든 노드들에게 전달되며, 요청 메시지를 전달받은 프라이 머리 노드가 아닌 일반 노드는 해당 노드를 자신 주변의 프라이머리 노드에게 중계(relay)함으로써 본인이 해당 연합 학습 및 모델 합의 프로토콜에 참여하겠다는 의사를 표명하게 된다. 이 때, 클라이언트는 자신이 보내는 메시지에 자신의 지역 인공 지능 모델 모델 파라미터 값 Mc 와 자신의 인증 서 Ac를 함께 보냄으로써 클라이언트 자신이 적법한 노드인 것을 증명하게 된다. 다음으로, 프라이머리 노드는 모델 동기화 요청 메시지의 수신 시점을 기록하고, 수신 시점을 기준으로 동기화 를 준비한다(S302). 클라이언트와 동일한 지역 네트워크 영역에 존재하는 각 프라이머리 노드는 클라이언트로부터 요청 메시지를 수 신하고, 주변의 일반 노드들로부터 중계된 요청을 수신함으로써 동기화 프로토콜이 시작됨을 인지하게 된다. 프 라어머리 노드는 해당 요청 메시지를 인지한 시점의 타임스탬프 t를 설정하고, 해당 타임 스탬프 t를 기준으로 동기화를 시작한다. 프라이머리 노드 Pi는 본인이 설정한 시간정보와 프라이머리 노드 본인의 신분을 증명할 인증서를 담은 메시지 prepare(t, Mc, Api)을 자신의 인근 일반 노드 집합 Npi에게 브로드 캐스팅한다. 해당 메시지를 받은 일반 노드 Nj∈Npi 들은 해당 메시지를 그대로 다시 브로드 캐스팅함으로써 프로토콜의 준비 과정이 진행됨을 주변에 알린 다. 다음으로, 동일 지역 내의 모든 노드는 인공 지능 모델 파라미터 값 및 인증서를 포함하는 동기화 메시지를 브 로드 캐스팅한다(S303). 다음으로, 동일 지역 내의 모든 노드는 브로드 캐스팅 된 동기화 메시지를 수집하여 지역 인공 지능 모델에 대 한 동기화 인공 지능 모델을 도출한다. 이 때, 모든 노드는 수집된 동기화 메시지의 개수가 기 설정된 기준 개수값을 초과하는지 여부를 판단하고, 수 집된 동기화 메시지에 포함되어 있는 인공 지능 모델 파라미터 값을 평균화하여 동기화 인공 지능 모델을 도출 한다(S304~306). 만약, 수집된 동기화 메시지의 개수가 기 설정된 기준 개수값 이하인 경우, 클라이언트 노드는 프라이머리 노드 로 변경되고, 프라이머리 노드로 변경된 클라이언트 노드가 연합 학습 및 모델 동기화 요청 메시지를 다시 브로드 캐스팅하게 된다. 클라이언트 노드가 이미 프라이머리 노드인 경우에는 프라이머리 노드로의 변경 과정은 생 략될 수 있다(S307~308). 동기화 및 합의에 참여하기로 한 모든 노드 k는 충분한 수의 준비 메시지를 받은 후, 모델 합계 단계를 시작한 다. 이 단계에서 모든 노드들은 자신이 보유하고 있는 지역 인공 지능 모델 파라미터 값 Mk와 자신의 인증서 Ak 를 담은 동기화 메시지 msg(t, Mc, Mk, Ak)를 브로드 캐스팅 한다. 이 과정에서 모든 노드들은 프로토콜에 참여 하기로 한 모든 다른 노드들의 지역 인공지능 모델 파라미터 값을 획득한다. 모든 노드들은 이 과정에서 수집되는 지역 인공 지능 모델 파라미터 값과 각 노드들의 인증서 값을 모두 저장하 며, 충분한 수의 동기화 메시지가 수집되었다고 판단되면, 수집한 지역 인공 지능 모델 파라미터 값을 평균화하 여, 수집된 모든 지역 인공 지능 모델들에 대한 동기화 인공 지능 모델을 도출한다. 만약 해당 과정에서 충분한 수의 동기화 메시지가 수집되지 않으면, 전체 프로토콜을 다시 시작하며, 이 때 새 로운 모델 동기화 요청 메시지의 수신 시점에 따라 새로운 시간 정보 t+1을 사용하게 된다. 이 때, 클라이언트 노드가 프라이머리 노드가 아닐 경우, 클라이언트 노드를 프라이머리 노드로 변경하여 프로토콜 수행이 신속하 고 원활하게 진행될 수 있도록 한다. 다음으로, 프라이머리 노드는 동기화 인공 지능 모델을 수집한 후, 정상 범위 학습이 수행되었는지 여부를 판별 한다. 프라이머리 노드는 수집된 인공 지능 모델의 평균 편차를 산출하고, 산출된 평균 편차를 기 설정된 기준 편차 값과 비교하여 정상 범위 학습이 수행되었는지 여부를 판별한다(S309~310). 다음으로, 클라이언트 노드는 프라이머리 노드로부터 정상 학습된 동기화 인공 지능 모델을 수신하여 지역 인공 지능 모델을 업데이트한다. 클라이언트 노드는 지역 인공 지능 모델을 업데이트 한 이력을 블록체인에 저장한다. 프로토콜에 참여한 모든 노드들은 수집된 지역 인공 지능 모델들의 평균 모델 M*을 도출한 후, 이를 프라이머리 노드에게 송신한다. 프라이머리 노드는 새로운 모델 M*들을 모두 수집한 후, 이들의 평균적인 편차가 기 설정값 l보다 크지 않다면, 합계된 새로운 모델이 정상 범위 내의 학습을 수행했다는 것으로 식별한다. 만약, 수집된 모델들의 편차가 기 설정값 l보다 크다면, 해당 프라이머리 노드는 연합 학습에 실패한 것으로 판단한다(S311). 이후, 각 프라이머리 노드들은 자신들의 연합학습 성공 또는 실패 여부에 대한 메시지를 클라이언트 노드에게 송신하며, 클라이언트 노드는 프라이머리 노드들로부터 전달받은 메시지로부터 성공 메시지의 개수와 실패 메시 지의 개수를 집계한다. 클라리언트 노드는 집계한 실패 메시지의 개수가 기 설정된 기준값 Lp이하인 경우 전달 받은 동기화 인공 지능 모델로 자신의 지역 인공 지능 모델을 업데이트하고, 해당 이력을 블록체인에 저장한다 (S312~314). 클라이언트 노드는 실패 메시지의 개수가 기 설정된 기준값 Lp보다 많은 경우, 모델 업데이트를 진행하지 않고 다시 연합 학습 및 모델 동기화 요청 메시지를 브로드 캐스팅한다(S315). 실시예에 따른 블록체인 기반 부분 모델 동기화 방법은 기존 연합학습 시스템이 가진 보안상의 취약점과 동기 화 효율성을 개선할 수 있다. 연합학습 모델이 동기화되는 과정에서 발생할 수 있는 모델 포이즈닝 공격에 대한 저항력을 확보하고, 사물 인터넷과 같이 분산된 다수의 노드가 존재하는 환경에서 발생할 수 있는 모델 동기화 과정에서의 지연(delay)을 감소시킬 수 있다. 실시예에 따른 블록체인 기반 부분 모델 동기화 방법은 인공지능 모델이 적용된 분산 IoT 디바이스 네트워크에 서 블록체인 기반의 부분 모델 동기화 메커니즘을 이용하여 모델의 연합학습을 수행할 수 있다. 이를 통하여, 블록체인 기반의 부분 모델 동기화 프로토콜은 분산 IoT 네트워크의 범위와 각 디바이스의 성능, 복잡도, 각 지 역 영역의 크기와 내부에 포함된 디바이스 노드들의 수를 고려하여 연합 학습의 범위와 블록체인 합의 메커니즘 과정의 엄격함을 동적으로 설정할 수 있다. 또한, PBFT 알고리즘을 베이스로 하되, 블록체인상의 합의 과정에서 모든 노드들이 모두 동일한 데이터를 저장 할 것을 강제하지 않는다. 즉, 해당 동기화 프로토콜에 참여하는 각 노드들은 비슷한 값으로 합계된 모델을 도 출하지만, 해당 값이 정확하게 동일하진 않을 수 있다. 이는 지역 영역 별로 상이한 데이터가 수집되는 분산 IoT 네트워크에 매우 적합할 수 있다. 예를 들어, 온도를 측정하는 센서의 경우, 시간에 따른 온도의 변화 추세는 유사하지만, 해당 센서가 위치한 고 도와 장소에 따라 상대적으로 다른 값이 관측될 수 있다. 즉, 인공지능 기술을 이용하는 IoT 네트워크에서, 각 디바이스들이 모두 동일한 모델을 그대로 사용하는 것은 문제의 상황에 따라 적합하지 않을 수 있다. 실시예에 따른 블록체인 기반 부분 모델 동기화 방법의 동기화 프로세스는 지역 영역별로 유사한 모델을 도출할 수 있다. 이는 지역 영역을 적절하게 배분하고, 연합 학습의 학습률과 정확도를 제한할 기준 값들을 실제 상황 에 맞게 설정한다면, 각 디바이스가 위치한 영역의 상황에 적합한 최적의 인공지능 모델이 적합하게 도출될 수 있도록 할 수 있다. 이러한 방식은 앞서 언급한 분산 IoT 네트워크의 제약인 동기화 문제를 해결할 수 있으며, 동시에 연합 학습의 방법론을 이용해 대량의 데이터를 고속으로 학습하는 효과를 낼 수 있다. 또한, 블록체인을 기반으로 각 모델의 업데이트 히스토리를 기록하며, 그 과정에서 합의에 참여한 모든 노드들의 인증서가 함께 기록되기 때문에, 악 의적인 의도를 가지고 모델을 잘못된 방향으로 학습시키려는 포이즈닝 공격자의 존재를 정확하게 식별할 수 있 다다. 본 발명은 인공지능 모델을 적용한 분산 IoT 네트워크의 모델 성능과 정확도, 전체 네트워크의 학습 및 운용 편 의성을 극대화시킬 수 있다. 특히, 에너지 클라우드 혹은 스마트 시티와 같이 광범위한 영역에서 수집되는 다양 한 형태의 데이터들을 이용하여 전체적인 에너지 수요를 도출해야하는 영역의 경우, 엔드 포인트의 디바이스에 서의 모델 정확도 성능과 전체 네트워크의 부하, 보안 위협 요소들은 해당 시스템의 보편화와 고도화를 방해하 는 큰 요인으로 작용하고 있다. 실시예에 따른 블록체인 기반 부분 모델 동기화 방법은 이러한 문제를 근본적으 로 해결할 수 있으며, 특히 국가 차원의 에너지 인프라 시스템에 적용될 수 있는 기반 기술로 적용될 수 있다. 본 실시예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 FPGA(field-programmable gate array) 또는 ASIC과 같은 하드웨어 구성요소를 의미하며, '~부'는 어떤 역할들을 수행한다. 그렇지만 '~부'는 소프트웨어 또는 하드 웨어에 한정되는 의미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구성될 수도 있다. 따라서, 일 예로서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구성요소들 및 태스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회 로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레이들, 및 변수들을 포함한다. 구성요소들과 '~부'들 안에서 제공되는 기능은 더 작은 수의 구성요소들 및 '~부'들로 결합되거나 추가적인 구성요소들과 '~부'들로 더 분리될 수 있다. 뿐만 아니라, 구성요소들 및 '~부'들은 디바이스 또는 보안 멀티미디어카드 내의 하나 또는 그 이상의 CPU들을 재생시키도록 구현될 수도 있다. 상기에서는 본 발명의 바람직한 실시예를 참조하여 설명하였지만, 해당 기술 분야의 숙련된 당업자는 하기의 특 허 청구의 범위에 기재된 본 발명의 사상 및 영역으로부터 벗어나지 않는 범위 내에서 본 발명을 다양하게 수정 및 변경시킬 수 있음을 이해할 수 있을 것이다."}
{"patent_id": "10-2022-0181546", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도1은 실시예에 따른 블록체인 기반 연합학습 시스템의 개념도이다. 도2는 실시예에 따른 IoT디바이스 노드의 구성 블록도이다. 도3은 실시예에 따른 블록체인 기반 부분 모델 동기화 방법의 순서도이다.도4는 실시예에 따른 블록체인 기반 모델 동기화 방법의 각 노드간의 데이터 통신을 설명하기 위한 도면이다."}
