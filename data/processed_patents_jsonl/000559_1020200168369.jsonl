{"patent_id": "10-2020-0168369", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2022-0079004", "출원번호": "10-2020-0168369", "발명의 명칭": "적응적 SoC 추정을 통한 ESS 최적 운전 시스템 및 방법", "출원인": "주식회사 에이치에너지", "발명자": "함일한"}}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "과거 배터리의 순시전류, 순시전압, SoC 및 전력수요를 포함하는 과거 ESS 데이터 및 실시간 ESS 상태 데이터를수집하는 데이터 수집부;상기 과거 ESS 데이터를 기초로 OCV-SoC 테이블을 구성하고 적응적으로 변경하는 데이터 학습부; 및상기 실시간 ESS 상태 데이터의 상태에 기초하여 현재 시간의 SoC를 추정하는 SoC 추정부;를 포함하는, 적응적SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 데이터 학습부는 수집된 상기 과거 ESS 데이터로부터 안정화 상태의 복수의 전압 및 SoC를 추출한 후 군집화하고, 분류된 군집 중에서 빈도가 높은 군집을 모델 학습하여 OCV-SoC 테이블을 구성하는, 적응적 SoC 추정을통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,상기 데이터 학습부는 단일 변수 비선형 회귀 분석 모델을 기초로 상기 군집에 대한 학습을 수행하는, 적응적SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서,상기 OCV-SoC 테이블은 학습을 통해 필요한 전압 간격으로 생성되며, 상기 전압 간격은 하기 수학식 1에 따라연산되는, [수학식 1](여기서, 는 배터리 셀의 안전 운용 전압(단, ), 는 배터리 직렬 개수,B(kWh)는 배터리 용량, P(kWh)는 PCS 용량, h(시)는 최소 SoC 추정 시간 간격을 나타냄)적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서, 상기 SoC 추정부는 상기 실시간 ESS 상태 데이터가 배터리 안정화 상태인 경우, 상기 OCV-SoC 테이블을 이용해현재 순시전압에 대해 선형 보간하여 SoC를 추정하는,적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서, 상기 SoC 추정부는 실시간 ESS 상태 데이터가 충방전 상태인 경우, 하기 수학식 2에 따라 추정 SoC를 전류 적산공개특허 10-2022-0079004-3-으로 추정하는,[수학식 2](여기서, 충방전 직전 안정화 상태의 추정 시간을 라고 가정한 경우, 는 그 때의 SoC, 는 SoC 추정시간(단, ), 는 각 SoC 추정시간에 대한 순시전류(단, ), 은 시점 에서의 추정 SoC(단, )를 나타냄)적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 OCV-SoC 테이블은 상기 SoC 추정부에 의해 새롭게 추정된 SoC를 기반으로 변경되는, 적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 SoC 추정부를 통해 추정한 SoC 및 수요 예측 데이터를 기초로 최적 충방전 전략을 수립하는 충방전계획부; 및상기 충방전 계획부에서 계획된 충방전량과 충방전 시간에 따라 ESS를 최적 운전시키는 ESS 운전부;를 더 포함하는, 적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,상기 ESS는 상기 ESS 운전부를 통해 충전 또는 방전 후 일정시간의 휴식이 있는 방식으로 운전이 수행되는, 적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제8항에 있어서,상기 ESS는 ESS 안전 운용 전압과 최저 기저 전력 유지를 고려하기 위해 우선 순위를 고려하여 운전이수행되는, 적응적 SoC 추정을 통한 ESS 최적 운전 시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서,상기 우선 순위는 실시간 데이터 수집부를 통해 수집되는 현재 순시 전압값이 ESS 안전 운용 전압 범위를 벗어나면 충방전 계획을 무시하고 충방전을 중단하는 것을 포함하는, 적응적 SoC 추정을 통한 ESS 최적 운전시스템."}
{"patent_id": "10-2020-0168369", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "데이터 수집부에 의해 과거 배터리의 순시전류, 순시전압, SoC 및 전력수요를 포함하는 과거 ESS 데이터 및 실시간 ESS 상태 데이터를 수집하는 단계;데이터 학습부에 의해 상기 과거 ESS 데이터를 기초로 OCV-SoC 테이블을 구성하는 단계;공개특허 10-2022-0079004-4-SoC 추정부에 의해 상기 실시간 ESS 상태 데이터의 상태에 기초하여 현재 시간의 SoC를 추정하는 단계; 및상기 SoC 추정부에 의해 새롭게 추정된 SoC를 기초로 상기 OCV-SoC 테이블을 적응적으로 변경하는, 적응적 SoC추정을 통한 ESS 최적 운전 방법."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명의 실시예에 따른 적응적 SoC 추정을 통한 ESS 최적 운전 시스템은 과거 배터리의 순시전류, 순시전압, SoC 및 전력수요를 포함하는 과거 ESS 데이터 및 실시간 ESS 상태 데이터를 수집하는 데이터 수집부; 과거 ESS 데이터를 기초로 OCV-SoC 테이블을 구성하고 적응적으로 변경하는 데이터 학습부; 및 실시간 ESS 상태 데이터의 상태에 기초하여 현재 시간의 SoC를 추정하는 SoC 추정부;를 포함할 수 있다."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 적응적 SoC 추정을 통한 ESS 최적 운전 시스템에 관한 것으로서, 보다 상세하게는 SoC(State of Charge, 충전잔량)와 SoH(State of Health, 성능상태)가 부정확한 ESS에 대해서 과거 ESS 충방전 이력을 통해 정확한 배터리 잔량을 파악하여 SoC의 추정 정확도를 높임과 동시에 전기요금 절감을 극대화할 수 있는, 적응적 SoC 추정을 통한 ESS 최적 운전 시스템에 관한 것이다."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "전력 수요 예측 시스템은 빌딩, 건물, 공장 등의 수용가의 효율적인 수요 관리를 위해 에너지저장장치(Energy Storage System, ESS)를 이용하여 피크절감과 차익거래 운전을 수행함에 따라 전력 요금을 절감하였다. 최근에는 배터리의 잔존 용량을 파악하여 최적화된 충방전 계획을 수립하고 이에 따라 전력 요금을 절감하는 여 러 기술들이 개발되고 있다. 전력 요금 절감을 위해서는 사업장의 정확한 전력 수요 예측과 더불어 정확한 배터리 잔존 용량(SoC(%))을 파악 하는 것이 매우 중요하다. 그러나, 전력 수요 예측은 사업장의 특성에 따라 변동성이 크기 때문에 OCV(Open Circuit voltage)-SoC 테이블 을 이용해야 비교적으로 정확한 SoC의 추정이 가능하다. 여기서, 비교적 정확한 SoC 추정 기법은 OCV-SoC 테이 블과 전류 적산(Ampere Counting) 방법을 의미하며 이를 위해서는 정확한 OCV-SoC 테이블이 필요하다. 하지만 OCV-SoC 테이블을 재구성하기 위해서는 긴 시간이 소요되고 만충전/만방전 운전을 여러차례 수행해야하기 때문 에 ESS 설치 이후 가동 상태에서 OCV-SoC 테이블 재구성은 현실적으로 불가능하다는 치명적인 한계가 있다. 뿐만 아니라, OCV-SoC 테이블은 ESS 제조사 별로 직접 제작하기 때문에 제작하는데 시간도 오래걸리고, 중소기 업의 경우에는 제작하지 않는 곳도 있어서 직접 만들려면 배터리의 순시 전류, 순시 전압 및 SoC에 대한 전제 조건들을 알아야 하기 때문에 SoC를 정확하게 추정하기엔 어려움이 있었다. 이처럼 기존 ESS는 안정적인 SoC 알고리즘을 기반으로 비교적 정확한 충방전 계획을 수립함에 따라 최적 운전이 가능했지만, 구형 또는 저가의 ESS는 BMS(Battery Management System)의 SoC 추정이 부정확하다는 치명적인 문 제가 있었다. 따라서, SoC 추정의 정확도를 높여 ESS의 전기 요금을 절감할 수 있는 ESS 최적 운전 시스템이 필요하다."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 상술한 기술적 문제에 대응하기 위하여 안출된 것으로, 본 발명의 목적은 종래 기술에서의 한계와 단 점에 의해 발생하는 다양한 문제점을 실질적으로 보완할 수 있는 것으로, 학습을 통해 SoC를 추정하여 OCV-SoC 테이블을 재구성하고 적응적 변경함으로써 보다 정확한 충방전 계획을 수립하고 이를 통해 계획된 충방전량과 충방전 시간에 충방전을 수행함로써 전기 요금을 효과적으로 절감할 수 있는, 적응적 SoC 추정을 통한 ESS 최적 운전 시스템을 제공하는데 있다."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "전술한 바와 같은 과제를 해결하기 위하여 본 발명의 일 실시예에 따른 적응적 SoC 추정을 통한 ESS 최적 운전 시스템은, 과거 배터리의 순시전류, 순시전압, SoC 및 전력수요를 포함하는 과거 ESS 데이터 및 실시간 ESS 상 태 데이터를 수집하는 데이터 수집부; 과거 ESS 데이터를 기초로 OCV-SoC 테이블을 구성하고 적응적으로 변경하 는 데이터 학습부; 및 실시간 ESS 상태 데이터의 상태에 기초하여 현재 시간의 SoC를 추정하는 SoC 추정부;를 포함할 수 있다.또한, 데이터 학습부는 수집된 과거 ESS 데이터로부터 안정화 상태의 복수의 전압 및 SoC를 추출한 후 군집화하 고, 분류된 군집 중에서 빈도가 높은 군집을 모델 학습하여 OCV-SoC 테이블을 구성할 수 있다. 또한, 데이터 학습부는 단일 변수 비선형 회귀 분석 모델을 기초로 군집에 대한 학습을 수행할 수 있다. 또한, OCV-SoC 테이블은 학습을 통해 필요한 전압 간격으로 생성되며, 전압 간격은 하기 수학식 1에 따라 연산 될 수 있다. [수학식 1] (여기서, 는 배터리 셀의 안전 운용 전압(단, ), 는 배터리 직렬 개수, B(kWh)는 배터리 용량, P(kWh)는 PCS 용량, h(시)는 최소 SoC 추정 시 간 간격을 나타냄) 또한, SoC 추정부는 실시간 ESS 상태 데이터가 배터리 안정화 상태인 경우, OCV-SoC 테이블을 이용해 현재 순시 전압에 대해 선형 보간하여 SoC를 추정할 수 있다. 또한, SoC 추정부는 실시간 ESS 상태 데이터가 충방전 상태인 경우, 하기 수학식 2에 따라 추정 SoC를 전류 적 산으로 추정할 수 있다. [수학식 2] (여기서, 충방전 직전 안정화 상태의 추정 시간을 라고 가정한 경우, 는 그 때의 SoC, 는 SoC 추정시간(단, ), 는 각 SoC 추정시간에 대한 순시전류 (단, ), 은 시점 에서의 추정 SoC(단, )를 나타냄) 또한, OCV-SoC 테이블은 SoC 추정부에 의해 새롭게 추정된 SoC를 기반으로 변경될 수 있다. 또한, SoC 추정부를 통해 추정한 SoC 및 수요 예측 데이터를 기초로 최적 충방전 전략을 수립하는 충방전 계획 부; 및 충방전 계획부에서 계획된 충방전량과 충방전 시간에 따라 ESS를 최적 운전시키는 ESS 운전부;를 더 포 함할 수 있다. 또한, ESS는 ESS 운전부를 통해 충전 또는 방전 후 일정시간의 휴식이 있는 방식으로 운전이 수행될 수 있다. 또한, ESS는 ESS 안전 운용 전압과 최저 기저 전력 유지를 고려하기 위해 우선 순위를 고려하여 운전이 수행될 수 있다. 또한, 우선 순위는 실시간 데이터 수집부를 통해 수집되는 현재 순시 전압값이 ESS 안전 운용 전압 범위를 벗어 나면 충방전 계획을 무시하고 충방전을 중단하는 것을 포함할 수 있다. 전술한 바와 같은 과제를 해결하기 위하여 본 발명의 실시예에 따른 적응적 SoC 추정을 통한 ESS 최적 운전 방 법은 데이터 수집부에 의해 과거 배터리의 순시전류, 순시전압, SoC 및 전력수요를 포함하는 과거 ESS 데이터 및 실시간 ESS 상태 데이터를 수집하는 단계; 데이터 학습부에 의해 과거 ESS 데이터를 기초로 OCV-SoC 테이블 을 구성하는 단계; SoC 추정부에 의해 실시간 ESS 상태 데이터의 상태에 기초하여 현재 시간의 SoC를 추정하는 단계; 및 SoC 추정부에 의해 새롭게 추정된 SoC를 기초로 OCV-SoC 테이블을 적응적으로 변경할 수 있다. 기타 실시예의 구체적인 사항들은 상세한 설명 및 도면들에 포함되어 있다."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면, SoC를 추출하여 과거 ESS 운영 이력을 기반으로 OCV-SoC 테이블을 재구성하고 향후 충방전 결과에 따라 적응적으로 OCV-SoC 테이블을 변경함으로써 보다 정확한 충방전 계획대로 ESS를 운용할 수 있다. 본 발명에 따르면, ESS 상태에 따라 SoC를 선형 보간하여 추정하거나 전류 적산하여 추정함으로써 SoC의 추정의 정확도를 향상시킬 수 있다. 본 발명에 따르면, 배터리 안정화 상태를 위한 긴 시간과 만충전/만방전 운전을 여러차례 수행하는 과정을 생략 할 수 있기 때문에 작업의 효율성을 높임과 동시에 비용을 절감할 수 있다. 본 발명에 따르면, SoC 추정의 정확도를 향상시킴에 따라 ESS의 최적 운전 전략을 수행함으로써 에너지 절감 효 과를 극대화할 수 있다. 본 발명에 따른 효과는 이상에서 예시된 내용에 의해 제한되지 않으며, 더욱 다양한 효과들이 본 명세서 내에 포함되어 있다."}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하의 내용은 단지 발명의 원리를 예시한다. 그러므로 당업자는 비록 본 명세서에 명확히 설명되거나 도시되지 않았지만 발명의 원리를 구현하고 발명의 개념과 범위에 포함된 다양한 장치를 발명할 수 있는 것이다. 또한, 본 명세서에 열거된 모든 조건부 용어 및 실시예들은 원칙적으로, 발명의 개념이 이해되도록 하기 위한 목적으 로만 명백히 의도되고, 이와 같이 특별히 열거된 실시예들 및 상태들에 제한적이지 않는 것으로 이해되어야 한 다. 또한, 이하의 설명에서 제1, 제2 등과 같은 서수식 표현은 서로 동등하고 독립된 객체를 설명하기 위한 것이며, 그 순서에 주(main)/부(sub) 또는 주(master)/종(slave)의 의미는 없는 것으로 이해되어야 한다. 상술한 목적, 특징 및 장점은 첨부된 도면과 관련한 다음의 상세한 설명을 통하여 보다 분명해질 것이며, 그에"}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "따라 발명이 속하는 기술분야에서 통상의 지식을 가진 자가 발명의 기술적 사상을 용이하게 실시할 수 있을 것 이다. 본 발명의 여러 실시예들의 각각 특징들이 부분적으로 또는 전체적으로 서로 결합 또는 조합 가능하며, 당업자 가 충분히 이해할 수 있듯이 기술적으로 다양한 연동 및 구동이 가능하며, 각 실시예들이 서로에 대하여 독립적 으로 실시 가능할 수도 있고 연관 관계로 함께 실시 가능할 수도 있다. 본 명세서의 해석의 명확함을 위해, 이하에서는 본 명세서에서 사용되는 용어들을 정의하기로 한다. 이하에서는 도 1을 참조하여 본 발명의 실시예에 따른 ESS 최적 운전 시스템을 설명하기로 한다. 도 1은 본 발명의 일 실시예에 따른 ESS 최적 운전 시스템의 개략도이다. 도 1을 참조하면, ESS 최적 운전 시스템은 전력 정보 공급 장치, 분석서버, 제어기, ESS 및 이더넷 스위치를 포함한다. ESS 최적 운전 시스템은 전기 요금 절감을 위해 과거 ESS 충방전 이력(이하, '과거 ESS 운영 이력'이라고 도 함)을 통해 적응적 SoC(State of Charge)를 추정하고 추정한 SoC와 수요 예측 데이터를 이용해 ESS의 운전을제어하는 구성이다. 이때, ESS 최적 운전 시스템은 SoC를 추출하여 과거 ESS 운영 이력을 기반으로 OCV- SoC 테이블을 재구성하고 遂 連* 守* 洪 岵醯* OCV-SoC 테이블을 변경할 수 있다. 여기서, OCV-SoC 테이블은 배 터리의 안정화 상태에서 전압이 증가할 때 SoC가 어떠한 모양으로 증가하는지를 나타낸 테이블을 의미한다. 또 한, 적응적이라는 것은 과거의 자료(본 발명의 과거 ESS 운영 기록)를 바탕으로 예상오차를 조금씩 수정하여 미 래를 예측(본 발명의 ESS 최적 충방전량)하는 것을 의미하는 것이다. 또한, 본 발명의 ESS 최적 운전 시스템이 SoC 추정을 통해 ESS를 최적 운전시키기 위해서는 3가지 전제 조건이 요구되는 것을 특징으로 한다. 조건 1은, 배터리 순시 전류, 순시 전압 및 SoC에 대한 과거 ESS 운영 기 록이 최소 1분 간격으로 있어야 하는 것이고. 조건 2는 ESS 운전은 충전 또는 방전 후 일정시간의 휴식이 있는 방식으로 운전되어야 하는 것이고. 조건 3은 ESS를 구성하는 배터리 셀의 안전 운용 전압이 제공되어야 하는 것 이다. 분석서버는 전력 수요 학습(예: OCV-SoC 테이블의 생성 및 변경), OCV-SoC 테이블을 이용한 SoC 추정 및 수요 예측 데이터를 생성하는 구성이다. 즉, 분석서버는 과거 데이터를 수집하고 학습하여 SoC를 추정하여 BMS에 대한 SoC의 정확도를 높여 전기요금 절감의 효과를 불러일으킨다. 분석서버에 대한 보다 상세한 구 성 및 동작은 후술하기로 한다. 전력 정보 공급 장치는 주기적으로 전력량을 측정하고 측정한 전력량을 수집하여 후술할 제어기(이하, 예 측적 충방전 제어기라고도 함)로 공급하는 장치이다. 예를 들면, 전력 정보 공급 장치는 전력량을 측정하 는 전력수요 계량기 및 측정된 전력량을 기초로 전력수요가 수집하는 전력수요 수집기를 포함한다. 여기서, 전력수요 수집기는 전력 정보 공급 장치의 데이터베이스라고 지칭될 수도 있다. 한편, 전력수요 계량기는 건물 단위에서는 각 전력 요금의 주체인 수용가 별로 복수개가 존재할 수 있기 때문에 별도의 전 력수요 수집기가 필요할 수 있다. 제어기는 분석서버로부터 수신한 수요 예측 데이터에 기초하여 예측 전력 사용량 데이터를 생성하고, 또한, 예측 전력 사용량 데이터의 전력 수요, 배터리의 충전 잔량, 배터리의 충방전 효율 또는 계통의 전력, 전 압, 전류 등에 따라 최적 운전 전략을 수립하고, PCS(410, Power Conditioning System)를 제어할 수 있다. 또한, 제어기는 LoRa 망을 통해 전력 정보 공급 장치와 통신하고 LTE 망을 통해 분석서버와 통 신할 수 있다. 또한, 제어기는 배터리, BMS 및 PCS를 포함하는 ESS와 연결될 수 있 다. 여기서, ESS는 다수의 배터리를 포함할 수 있으며, BMS는 각각의 배터리를 관리하고, PCS는 배터리에 DC전력을 AC전력 또는 DC전력으로 변환하여 방전과 충전하기 위한 구성으로서, ESS를 직접적으로 제어한다. 제어기는 기본적으로 분석서버의 예측에 대한 부하 또는 데이터 전송에 대한 부하를 덜어주고, 로컬 에서 보다 효율적으로 PCS 및 BMS를 제어하기 위한 장치이다. 예컨대, 제어기가 없다면, 분석서 버와 PCS, BMS 및 전력 수요 계량기가 직접적으로 인터넷을 통해 연결되어야 한다. 이 경 우, 각 노드들 간의 통신량이 절대적으로 증가하며, 수많은 장치들과 직접 연결된 분석서버의 부하가 크게 증가되어 비용이 크게 증가하고 유지보수가 어렵게 된다. 뿐만 아니라, 이러한 부하의 증가로 인하여 적시에 적 절한 배터리의 제어가 이루어지지 못할 가능성이 높다. 이에 반해, 본 발명에 따른 ESS 최적 운전 시스템은 제어기를 구비함으로써 분석서버의 부하를 크게 절감시킴과 동시에 배터리의 적시 제어가 가능하게 된다. 또한, 본 발명은 제어기에서 수집된 빅데이 터를 자원이 풍부한 분석서버를 통해 분석하게 하여 분석의 정확성과 효율성을 극대화하도록 구현되었다. 이하에서는 도 2 내지 도 8을 참조하여 분석서버의 세부 구성 및 각 동작을 상세히 설명하기로 한다. 도 2는 본 발명의 일 실시예에 따른 분석서버를 나타낸 블록도이다. 도 3은 본 발명의 일 실시예에 따른 SoC 및 SoH 추정을 통한 ESS 최적 운전 방법을 나타낸 순서도이다. 도 4는 BMS의 SoC가 부정확한 경우를 설명하기 위한 그래프이다. 도 5a는 안정화 상태의 배터리 전압-SoC 산포도를 나타낸 초기 OCV-SoC 테이블에 대한 그래프이다. 도 5b는 본 발명의 실시예에 따른 데이터 학습부를 통한 배터리의 전압-SoC 군집화를 나타낸 그래프이다. 도 5c 는 본 발명의 실시예에 따른 데이터 학습부를 통해 생성된 OCV-SoC 테이블을 나타낸 그래프이다. 도 6은 본 발 명의 실시예에 따른 기존 배터리 잔량 및 신규 추정 배터리 잔량에 대한 그래프이다. 도 7은 본 발명의 실시예 에 따른 SoC 추정부에 따라 새롭게 추정되는 SoC를 기반으로 재구성된 적응적 OCV-SoC 테이블을 나타낸 그래프 이다. 도 8은 본 발명의 실시예 따른 신규 추정된 SoC, OCV-SoC 테이블만을 통한 SoC를 충반전 전류와 상호 비 교하여 과소/과대 추정을 검토하는 그래프이다.도 2를 참조하면, 분석서버는 과거 데이터 수집부, 실시간 데이터 수집부, 데이터 학습부, SoC 추정부, 수요 예측부, 충방전 계획부, ESS 운전부 및 제어부를 포함한다. 한편, 본 명세서에서 과거 데이터 수집부 및 실시간 데이터 수집부는 데이터 수집부로 통칭될 수도 있다. 분석서버는 로컬 내에서 전력 정보 공급 장치와 연결될 수 있다. 다만, 실시예에 따라서는 LoRA 망을 통해 전력 정보 공급 장치와 통신하고 LTE 망을 통해 제어기와 통신할 수도 있다. 이에 따라, 도 3을 참조하면 단계 S301에서 분석서버의 과거 데이터 수집부는 전력 정보 공급 장치로 부터 과거 ESS 데이터를 수신할 수 있다. 보다 상세하게, 과거 데이터 수집부는 과거 ESS 데이터(이하, 과 거 ESS 운영 데이터(기록)이라고도 함)를 데이터 학습부 또는 수요 예측부의 요청에 기초하여 주어진 기간 동안의 과거 운전 내역을 조회하여 수집하는 구성이다. 여기서, 과거 ESS 데이터는 과거 배터리의 순시전 류(A), 순시전압(V), SoC(%) 및 전력수요(kWh)인 것을 특징으로 한다. 또한, 과거 ESS 데이터는 해당 데이터들 이 수집된 시간 정보를 각각 확인할 수 있도록 타임스탬프와 함께 수집되는 것을 특징으로 한다. 또한, 과거 데이터 수집부는 분석서버의 별도의 데이터베이스를 통해 직접 과거 ESS 데이터를 수집할 수 있고, 에너지 관리 시스템(Energy Management System, EMS)의 Rest API를 통해 수집할 수 있다. 이어서, 단계 S302에서 분석서버의 실시간 데이터 수집부에 의해 실시간으로 ESS 상태 데이터를 수집한다. 보다 상세하게, 실시간 데이터 수집부는 SoC 추정부 또는 수요 예측부 또는 충방전 계획부의 요청에 기초 하여 EMS 및 배터리 관리 시스템(BMS)으로부터 현재의 배터리 상태 및 전력 사용 상태를 수집할 수 있다. 여기 서, 수집되는 현재 배터리의 상태는 현재 배터리의 순시전류(A), 순시전압(V) 및 전력수요(kWh)인 것을 특징으 로 한다. 실시간 데이터 수집부는 실시간 데이터를 Modbus TCP 방식, Rest API 방식 중 어느 하나의 방식으로 수집 할 수 있으며, 이 밖에도 다양한 방식의 수집 방식이 채택될 수 있다. 이어서, 도 3 내지 도 5c를 참조하면 단계 S303에서 분석서버의 데이터 학습부는 과거 ESS 운영 데이터를 기초로 OCV-SoC 테이블을 구성한다. 데이터 학습부는 과거 데이터 수집부로부터 수집된 과거 ESS 데 이터를 기반으로 OCV-SoC 테이블을 재구성하고, 향후 충방전 결과에 따라 적응적으로 OCV-SoC 테이블을 변경하 는 것을 특징으로 한다. 보다 상세하게 S303 단계는 초기 OCV-SoC 테이블 생성 단계(S303-1) 및 최종 OCV-SoC 테이블 생성 단계(S303- 2)로 구분될 수 있다. 초기 OCV-SoC 테이블 생성 초기 OCV-SoC 테이블을 생성하는 단계(S303-1)에서는 도 5a에 도시된 바와 같이 수집된 과거 ESS 데이터로부터 안정화 상태의 복수의 전압과 SoC를 추출한다. 여기서, 안정화 상태란 충방전이 중단된 후 1시간 이상 충방전이 수행되지 않은 상태를 의미한다. 도 5a와 같이, OCV-SoC 테이블에서 안정화 상태의 SoC는 전압이 증가하면 SoC가 증가하는 곡선 형태를 취하기 때문에 OCV-SoC 테이블을 구성하는 전압과 SoC 데이터는 2차원 표면에서 하나의 곡선을 구성하는 연속된 데이터 형태인 것을 특징으로 한다. 한편, 도 5a를 참조하면, 동일한 전압에 대해 여러 SoC가 매핑(Mapping)된 것을 알 수 있다. 이는 일반적으로 BMS는 안정화 상태의 SOC를 OCV-SoC 테이블로부터 바로 추정하기 때문에, OCV-SoC 테이블을 구성하는 과정에서 데이터의 수집 오류, 저장 오류, 기존 SoC 추정 오류 등으로 인해 동일한 전압에 대해 여러 SoC가 추출되는 것으로 이해되는 것이 바람직하다. 따라서, 하나의 전압에 대해 하나의 SoC가 나올 수 있도록 오류가 발생한 SoC 데이터를 제거하는 과정이 수반되 어야 한다. 즉, 초기 OCV-SoC 테이블을 생성하는 단계(S303-1)에서 수행한 군집화 과정을 통해 군집화된 데이터 들(도 5b에서 빨간 점들)을 제외한 나머지 오류 데이터들(도 5b에서 빨간 점들)은 제거되어야 한다. 이때, 오류 데이터들은 산재되어 있는 데이터를 곡선 형태로 인접한 데이터들(전압-SoC를 의미함)끼리 군집화하 는 계층적 군집(Hierarchical Clustering) 알고리즘의 단일 연결(Single Linkage) 방식을 적용하여 군집화하는 과정을 통해 제거되는 것을 특징으로 한다. 단, 실시예에 따라 다양한 인공지능 알고리즘을 적용하여 군집화할 수도 있다. 또한, 데이터 학습부는 상술한 바와 같이 분류된 군집 중에서 빈도가 가장 높은 군집을 학습 데이터로 사 용하여 회귀 분석을 수행한다. 이때, 회귀 분석 모델은 안정화 상태의 전압-SoC가 비선형 관계를 갖기 때문에 단일 변수 비선형 회귀 분석 모델을 사용하는 것을 특징으로 한다. 예컨대, 커널 능선 회귀 모델(Kernel Ridge Regression)에 가우시안 커널(Gaussian kernel)을 적용하여 모델을 학습할 수 있다. 다만, 이 밖에도 다양한 인 공지능 회귀 모델이 적용될 수 있다. 또한, 도 5c에 도시된 바와 같이, 학습된 모델을 통해 시스템에 필요한 전압 간격에 따라 OCV-SoC 테이블을 생 성한다. 예컨대, OCV-SoC 테이블은 SoC 추정을 위한 최소 시간 간격 당 변화 가능한 전압 간격에 따라 생성될 수 있다. 즉, 배터리 셀의 안전 운용 전압이 , 배터리 직렬 개수가 , 배터리 용량이 B(kWh), PCS 용량이 P(kWh), 최소 SoC 추정 시간 간격이 h(시)일 때, OCV-SoC 테이블의 전압 간격 는 하 기 수학식 1에 의해 정할 수 있다. <수학식 1>"}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "따라서, 데이터 학습부는 안정화 상태의 군집된 데이터들을 기초로 학습된 모델들을 상기 수학식 1에 의해 정해진 전압 간격에 따라 OCV-SoC 테이블을 생성하는 것을 특징으로 한다. 이때, 생성된 OCV-SoC 테이블은 초기 OCV-SoC 테이블인 것으로 이해되는 것이 바람직하며 초기 OCV-SoC 테이블은 데이터베이스에 저장되어 추후 SoC 추정부에 의해 사용되는 것을 특징으로 한다. 한편, 학습된 OCV-SoC 테이블은 기존 문제가 있는 BMS가 추정한 SoC를 토대로 만들어진 것이기 때문에 최초 학 습 결과는 오차가 발생할 수 있다. 따라서, 데이터 학습부는 SoC 추정부를 통해 새롭게 추정되는 SoC 를 바탕으로 OCV-SoC 테이블을 지속적으로 변경하는 것을 특징으로 한다. 이에 대한 상세한 설명은 도 8을 참조 하여 후술하기로 한다. 이어서, 단계 S304에서 분석서버의 SoC 추정부는 안정화 상태 및 운전 상태에서 SOC를 각각 추정하고 OCV 를 조정한다. 보다 상세하게, SoC 추정부는 실시간 데이터 수집부로부터 전달받은 실시간 데이터를 기초로 최소 SoC 추정 시간 간격( ) 마다 현재 시간의 SoC를 추정하고, 이를 데이터베이스에 저장한다. 이를 통해 SoC 추 정부는 현재 충방전 수행 중인지 정지 중인지를 확인할 수 있다. 이때, 충방전이 정지 중이고 마지막 충방 전 수행 후 일정 시간이 경과한 경우에는 안정화 상태라고 판단할 수 있다. 안정화 상태에 대한 판단은 전압의 변화가 OCV-SoC 테이블의 전압 간격 미만으로 변하는 상태를 기본으로 하지 만, 그보다 더 짧거나 긴 시간으로 설정할 수도 있다. 즉, 안정화 상태에서 SoC 추정은 OCV-SoC 테이블을 이용 해 현재 순시전압에 대해 선형 보간하여 추정하는 것을 특징으로 한다. 또한, 운전 상태(이하, 충방전 상태라고도 함)에서 SoC 추정은 전류 적산으로 추정하는 것을 특징으로 한다. 보 다 상세하게, 충방전 직전 안정화 상태의 추정 시간을 , 그 때의 SoC를 라고 하고 그 이후 각 SoC 추정시 간 에 대한 실시간 데이터 수집부에서 전달받은 순시전류를 라고 하면, 시점의 추정 SoC 을 하기 수학식 2와 같이 전류 적산으로 추정할 수 있다. <수학식 2>"}
{"patent_id": "10-2020-0168369", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "추정된 SoC는 기존 문제가 있는 SoC를 토대로 만들어진 OCV-SoC 테이블을 통해 추정된 것이기 때문에 충방전이 끝나고 안정화 상태가 되었을 때 전류 적산으로 추정한 SoC 및 안정화 상태의 OCV-SoC 테이블을 통해 추정한 SoC 사이에 도 7에 도시된 바와 같이 차이(과대추정 부분 및 과소추정 부분)가 발생할 수 있다. 상기 차이는 데이터 학습부를 통해 새롭게 추정한 SoC 데이터를 기반으로 OCV-SoC 테이블을 변경하여 조정할 수 있다. 보다 상세하게, 데이터 학습부는 배터리가 안정화 상태가 되었을 때 SoC 추정부로부터 새롭게 추정된 SoC와 해당 시간의 전압을 과거 데이터 수집부를 통해 수집한 후, 기존 OCV-SoC 테이블과 비교하여 변화 여부를 판단하고 OCV-SoC 테이블을 변경하는 것을 특징으로 한다. 일반적으로 새로운 SoC 추정이 안정화되면 현재 OCV-SoC 테이블과 새롭게 추정한 SoC의 평균값으로 수정하여 SoC와 SoH와 동시에 고려되는 방식으로 OCV-SoC 테이블을 수정하지만, 새로운 SoC 추정 초기 단계에서는 기존 OCV-SoC 테이블과의 차이가 크기 때문에 새롭게 추정한 SoC에 가중치를 부여한 가중 평균으로 수정하는 것이 필 요하다. 또한, OCV-SoC 테이블은 전압이 올라가면 SoC가 같이 증가하는 단조 증가 형태(도 5c 참조)를 가져야 하기 때문 에 OCV-SoC 테이블에서 특정 전압의 SoC가 변경되면 인접하는 전압의 SoC도 상호 변경하는 것이 필요하다. 예를 들어, OCV-SoC 테이블에서 특정 전압 의 SoC가 이고 가중 평균 SoC가 이며 이면(즉, 과소 추정 된 경우(도 8의 빨간색 그래프 구간)) , 가 되는 SoC에 대한 전압 구간에 대해 도 8에 도시된 바와 같이 OCV-SoC 테이블을 가중 이동한다. 이와 유사하게, 추정 SoC가 과대 추정된 경우(도 8의 빨간색 그래프 구간)에는 상술한 과소 추정 방법과 반대로 상한 하한 비율을 적용하여 OCV-SoC 테이블을 가중 이동하는 것을 특징으로 한다. 이어서, 단계 S305에서 충방전 안전운영 전압 범위 내에서 ESS의 최적 운전을 수행한다. 보다 상세하게는 충방 전 계획부에 의해 추정한 SoC 및 수요 예측 데이터를 기초로 최적 충방전 전략을 수립할 수 있다. 한편, 본 발명은 본 단계의 설명의 편의를 위해 출원번호 제10-2018-0170127호(인공지능 기반 예측적 ESS 충방전 운용 장치 및 방법) 및 출원번호 제10-2019-0159291호(클러스터링 기반 예측적 ESS 충방전 운용 시스템 및 방법)를 참조로서 포함한다. 구체적으로, 수요 예측 데이터는 수요 예측부에 의해 실시간 수요와 과거 수요 데이터를 기반으로 남은 시 간 수요가 예측되고, 수요 예측은 출원번호 제10-2018-0170127호(인공지능 기반 예측적 ESS 충방전 운용 장치 및 방법)의 사용량 예측 방법과 출원번호 제10-2019-0159291호(클러스터링 기반 예측적 ESS 충방전 운용 시스템 및 방법)의 클러스터링 기반 사용량 예측을 사용한다. 단, 그 외에 다른 사용량 예측 방법을 사용할 수 있다. 이때, 충방전 계획부는 출원번호 제10-2018-0170127호(인공지능 기반 예측적 ESS 충방전 운용 장치 및 방 법)의 사용량 예측 방법과 출원번호 제10-2019-0159291(클러스터링 기반 예측적 ESS 충방전 운용 시스템 및 방 법)의 최적운전 계획을 사용하는 것을 특징으로 한다. 단, 보통 전기요금절감을 위한 ESS 운영 사업장은 최저 기저 전력을 유지하는 경우가 많이 있기 때문에 기존 역송 방지를 위한 제약조건 에 대해서 최저 기저 전력을 (kWh)라고 하면 조건으로 변경 적용하는 것만 상이하다. 또한 충방전 계획에 사용하는 SoC는 실시간 데이터 수집부에서 수집한 SoC가 아닌 SoC 추정부에서 추정한 SoC를 사용하는 것을 특징으로 한다. 상술한 바와 같이, ESS 운전부는 충방전 계획부에서 계획된 충방전량과 충방전 시간에 따라 PCS에 명 령을 전달하여 충방전을 수행함으로써 ESS를 동작시킬 수 있다. 보다 상세한 ESS 운전 방법은 출원번호 제10- 2018-0170127호(인공지능 기반 예측적 ESS 충방전 운용 장치 및 방법)의 ESS 운전 방법을 사용하되, ESS 안전 운용 전압과 최저 기저 전력 유지를 고려하기 위해 우선 순위를 고려하여 운전을 수행하는 것을 특징으로 한다. 여기서, 우선 순위 첫번째는 실시간 데이터 수집부를 통해 수집되는 현재 순시 전압값이 ESS 안전 운용 전 압 범위를 벗어나면 충방전 계획을 무시하고 충방전을 중단하는 것이다. 또한, 우선순위 두번째는 실시간 데이 터 수집부를 통해 수집되는 현재 전력량이 최저 기저전력보다 낮아지면 충방전 계획을 무시하고 최저 기저 전력과 같아지도록 방전 명령을 수행하며 남은 배터리 잔량이 없으면 충방전을 중단하는 것이다. 우선순위 세번 째는 충방전 계획부에서 설정한 충방전 계획에 따라 충방전 명령을 수행하되 SoC 추정부에 추정한 SoC에 의해 배터리 잔량이 부족하거나 만충되었을 경우 충방전을 중단하는 것이다. 따라서 상술한 바와 같이 본 발명에 따르면 적응적 SoC 추정에 따라 OCV-SoC 테이블을 적응적으로 변경함으로써 보다 정확한 충방전 계획대로 ESS를 운용할 수 있다.또한, 본 발명에 따르면 ESS 상태에 따라 SoC를 선형 보간하여 추정하거나 전류 적산하여 추정함으로써 SoC의 추정의 정확도를 향상시킬 수 있다. 또한, 본 발명에 따르면 배터리 안정화 상태를 위한 긴 시간과 만충전/만방전 운전을 여러차례 수행하는 과정을 생략할 수 있기 때문에 작업의 효율성을 높임과 동시에 비용을 절감할 수 있다. 또한, 본 발명에 따르면 SoC 추정의 정확도를 향상시킴에 따라 ESS의 최적 운전 전략을 수행함으로써 에너지 절 감 효과를 극대화할 수 있다. 이상 첨부된 도면을 참조하여 본 발명의 실시예들을 더욱 상세하게 설명하였으나, 본 발명은 반드시 이러한 실 시예로 국한되는 것은 아니고, 본 발명의 기술사상을 벗어나지 않는 범위 내에서 다양하게 변형 실시될 수 있다. 따라서, 본 발명에 개시된 실시예들은 본 발명의 기술 사상을 한정하기 위한 것이 아니라 설명하기 위한 것이고, 이러한 실시예에 의하여 본 발명의 기술 사상의 범위가 한정되는 것은 아니다. 그러므로, 이상에서 기 술한 실시예들은 모든 면에서 예시적인 것이며 한정적이 아닌 것으로 이해해야만 한다. 본 발명의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 발명의 권리범위 에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2020-0168369", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 ESS 최적 운전 시스템의 개략도이다. 도 2는 본 발명의 일 실시예에 따른 분석서버를 나타낸 블록도이다. 도 3은 본 발명의 일 실시예에 따른 SoC 및 SoH 추정을 통한 ESS 최적 운전 방법을 나타낸 순서도이다. 도 4는 BMS의 SoC가 부정확한 경우를 설명하기 위한 그래프이다. 도 5a는 안정화 상태의 배터리 전압-SoC 산포도를 나타낸 초기 OCV-SoC 테이블에 대한 그래프이다. 도 5b는 본 발명의 실시예에 따른 데이터 학습부를 통한 배터리의 전압-SoC 군집화를 나타낸 그래프이다. 도 5c는 본 발명의 실시예에 따른 데이터 학습부를 통해 생성된 OCV-SoC 테이블을 나타낸 그래프이다. 도 6은 본 발명의 실시예에 따른 기존 배터리 잔량 및 신규 추정 배터리 잔량에 대한 그래프이다. 도 7은 본 발명의 실시예에 따른 SoC 추정부에 따라 새롭게 추정되는 SoC를 기반으로 재구성된 적응적 OCV-SoC 테이블을 나타낸 그래프이다. 도 8은 본 발명의 실시예 따른 신규 추정된 SoC, OCV-SoC 테이블만을 통한 SoC를 충반전 전류와 상호 비교하여 과소/과대 추정을 검토하는 그래프이다."}
