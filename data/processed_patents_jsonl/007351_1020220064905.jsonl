{"patent_id": "10-2022-0064905", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0165026", "출원번호": "10-2022-0064905", "발명의 명칭": "로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템", "출원인": "주식회사 뉴로코어", "발명자": "이호열"}}
{"patent_id": "10-2022-0064905", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "공장 워크플로우의 각 공정의 스케줄링 신경망을 학습시키되, 상기 공장 워크플로우를 모의하는 공장 시뮬레이터의 모의결과로 상기 각 공정의 스케줄링 신경망을 학습시키는, 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 있어서,상기 공장 시뮬레이터를 이용하여 상기 공장 워크플로우를 모의하고, 모의 데이터를 수집하는 모의 실행부;상기 모의 실행부를 통해, 특정 공정의 이전 까지의 공정들(이하 제1 스테이지)을 모의하게 하여, 특정 공정의로트 이력 정보를 기록하는, 로트이력 기록부;상기 로트 이력 정보를 이용하여 다수의 제2 스테이지의 생산 에피소드를 생성하고, 생산된 생산 에피소드에 따라 상기 특정 공정 이후 공정들(이하 제2 스테이지)을 상기 모의 실행부를 통해 모의하게 하는, 에피소드 재현부; 및,상기 제2 스테이지의 모의결과로부터 학습 데이터를 생성하여 해당 공정의 스케줄링 신경망을 학습시키는, 학습실행부를 포함하는 것을 특징으로 하는 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망학습 시스템."}
{"patent_id": "10-2022-0064905", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 각 공정의 스케줄링 신경망은 공장 워크플로우의 상태를 입력받으면 해당 상태에서 다음에 처리할 작업 유형을 출력하도록 구성되는 것을 특징으로 하는 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링신경망 학습 시스템."}
{"patent_id": "10-2022-0064905", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 로트 이력 정보는 각 로트가 해당 공정에 도착하여 투입가능한 상태로 되는 시간(이하 도착 시간)을 포함하는 것을 특징으로 하는 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템."}
{"patent_id": "10-2022-0064905", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 각 공정은 다수의 작업 유형의 작업을 수행할 수 있고, 하나의 작업 유형에서 다른 작업 유형으로 작업을전환하기 위해서는 사전에 정해진 작업 교체 시간을 소요해야 하는 것을 특징으로 하는 로트 이력 재현 기능을구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템."}
{"patent_id": "10-2022-0064905", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 에피소드 재현부는 상기 로트 이력 정보에서 도착했거나 도착하려는 로트를 다음 작업으로 선택하는 것에따라 생산 에피소드를 생성하는 것을 특징으로 하는 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케공개특허 10-2023-0165026-3-줄링 신경망 학습 시스템."}
{"patent_id": "10-2022-0064905", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항 내지 제5항 중 어느 한 항에 있어서,상기 각 공정의 스케줄링 신경망은 강화학습에 의한 신경망인 것을 특징으로 하는 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "시뮬레이터에 의해 생성된 모의 데이터 중에서 특정 공정의 직전 로트 이력을 기록하고, 기록된 로트 이력에서 다양한 경우 수를 생성하여 해당 공정의 신경망을 학습하는, 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기 반 스케줄링 신경망 학습 시스템에 관한 것으로서, 공장 시뮬레이터를 이용하여 상기 공장 워크플로우를 모의하 (뒷면에 계속)"}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 일련의 공정으로 구성되는 공장 워크플로우에서 각 공정의 스케줄링을 위한 공정별 신경망을 학습하 되, 시뮬레이터에 의해 공장 워크플로우를 모의하여 모의 데이터로 신경망을 학습하는, 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 관한 것이다. 특히, 본 발명은 시뮬레이터에 의해 생성된 모의 데이터 중에서 특정 공정의 직전 로트 이력을 기록하고, 기록 된 로트 이력에서 다양한 경우 수를 생성하여 해당 공정의 신경망을 학습하는, 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 관한 것이다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "일반적으로, 제조 공정 관리는 원료나 재료로부터 제품이 완성되기까지 제조 과정에서 행하여지는 일련의 공정 을 관리하는 활동을 말한다. 특히, 각 제품의 제조에 필요한 공정과 작업 순서를 결정하고, 각 공정에 필요한 재료나 시간 등을 결정한다. 특히, 제품을 생산하는 공장에는 각 공정 작업을 처리하는 장비들이 해당 공정의 작업 공간에 배치되어 구비된 다. 해당 장비들에는 특정 작업을 처리하기 위한 로트들이 공급되도록 구성될 수 있다. 또한, 장비들 사이 또는 작업 공간들 사이에는 컨베이어 등 이송 장치 등이 설치되어, 장비에 의해 특정 공정이 완료되면 처리된 로트가 다음 공정으로 이동되도록 구성된다. 즉, 하나의 로트는 일련의 공정을 거쳐 완성된 제품으로 생산된다. 또한, 특정 공정을 수행하기 위해 유사/동일 기능의 다수의 장비들이 설치되어, 동일하거나 유사한 공정 작업을 분담하여 처리될 수 있다. 이와 같은 제조 라인에서 공정 또는 각 작업을 스케줄링하는 것은 공장 효율화를 위 해 매우 중요한 문제이다. 종래에는 대부분 스케줄링을 각 조건에 따른 규칙 기반(rule-based) 형식으로 스케줄 링 하였으나, 평가 척도가 명확하지 않아 만들어진 스케줄링 결과에 대한 성능 평가가 모호하였다. 또한, 최근에는 제조 공정에 인공지능 기법을 도입하여 작업을 스케줄링하는 기술들이 제시되고 있다[특허문헌 1]. 상기 선행기술은 인공지능 기술 중 유전자 알고리즘이라는 기계학습 알고리즘을 사용했으나, 공작 기계의 작업을 스케줄링에 한정하고 있다. 또한, 다수 설비의 공정에 대한 신경망 학습 방법을 적용한 기술도 제시되고 있다[특허문헌 2]. 그러나 상기 선행기술은 과거의 데이터를 기반으로, 주어진 상황에서 최적 제어방법을 찾는 기술로서, 과거에 축적된 데이터가 없다면 작동하지 않는다는 명확한 한계가 존재한다. 상기와 같은 문제점을 해결하기 위하여, 본 출원인은 공장 시뮬레이터를 이용하여 공정을 모의하고 모의된 데이 터를 이용하여 각 공정의 신경망을 학습하는 기술을 제시하고 있다[특허문헌 3]. 그러나 상기 선행기술은 학습 을 위한 모든 경우의 수를 위하여 공장 시뮬레이터로 수많은 모의 작업을 수행해야 한다. 특히, 학습 대상인 특 정 공정(학습 대상의 신경망에 대응하는 공정)의 이전 공정들의 과정에 대하여, 해당 공정 입장에서 다양한 선 택의 경우 수가 존재한다. 따라서 상기 선행기술은 이러한 다수의 경우 수 만큼 이전 공정들의 과정을 반복하여 모의해야 한다는 문제점이 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 한국 등록특허공보 제10-1984460호(2019.05.30.공고) (특허문헌 0002) 한국 등록특허공보 제10-2035389호(2019.10.23.공고) (특허문헌 0003) 한국 등록특허공보 제10-2338304호(2021.12.13.공고) 비특허문헌 (비특허문헌 0001) V. Mnih et al., “Human-level control through deep reinforcement learning,” Nature, vol. 518, no. 7540, p. 529, 2015. (비특허문헌 0002) The Goal: A Process of Ongoing Improvement, Eliyahu M. Goldratt 1984"}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은 상술한 바와 같은 문제점을 해결하기 위한 것으로, 시뮬레이터에 의해 생성된 모의 데이터 중 에서 특정 공정의 직전 로트 이력을 기록하고, 기록된 로트 이력에서 다양한 경우 수를 생성하여 해당 공정의 신경망을 학습하는, 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템을 제공 하는 것이다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 목적을 달성하기 위해 본 발명은 공장 워크플로우의 각 공정의 스케줄링 신경망을 학습시키되, 상기 공장 워크플로우를 모의하는 공장 시뮬레이터의 모의결과로 상기 각 공정의 스케줄링 신경망을 학습시키는, 로트 이 력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 관한 것으로서, 상기 공장 시뮬레 이터를 이용하여 상기 공장 워크플로우를 모의하고, 모의 데이터를 수집하는 모의 실행부; 상기 모의 실행부를 통해, 특정 공정의 이전 까지의 공정들(이하 제1 스테이지)을 모의하게 하여, 특정 공정의 로트 이력 정보를 기 록하는, 로트이력 기록부; 상기 로트 이력 정보를 이용하여 다수의 제2 스테이지의 생산 에피소드를 생성하고, 생산된 생산 에피소드에 따라 상기 특정 공정 이후 공정들(이하 제2 스테이지)을 상기 모의 실행부를 통해 모의 하게 하는, 에피소드 재현부; 및, 상기 제2 스테이지의 모의결과로부터 학습 데이터를 생성하여 해당 공정의 스 케줄링 신경망을 학습시키는, 학습 실행부를 포함하는 것을 특징으로 한다. 또한, 본 발명은 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 있어서, 상기 각 공정의 스케줄링 신경망은 공장 워크플로우의 상태를 입력받으면 해당 상태에서 다음에 처리할 작업 유 형을 출력하도록 구성되는 것을 특징으로 한다. 또한, 본 발명은 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 있어서, 상기 로트 이력 정보는 각 로트가 해당 공정에 도착하여 투입가능한 상태로 되는 시간(이하 도착 시간)을 포함 하는 것을 특징으로 한다. 또한, 본 발명은 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 있어서, 상기 각 공정은 다수의 작업 유형의 작업을 수행할 수 있고, 하나의 작업 유형에서 다른 작업 유형으로 작업을 전환하기 위해서는 사전에 정해진 작업 교체 시간을 소요해야 하는 것을 특징으로 한다. 또한, 본 발명은 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 있어서, 상기 에피소드 재현부는 상기 로트 이력 정보에서 도착했거나 도착하려는 로트를 다음 작업으로 선택하는 것에 따라 생산 에피소드를 생성하는 것을 특징으로 한다. 또한, 본 발명은 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 있어서, 상기 각 공정의 스케줄링 신경망은 강화학습에 의한 신경망인 것을 특징으로 한다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "상술한 바와 같이, 본 발명에 따른 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학습 시스템에 의하면, 시뮬레이터에 의한 모의 데이터 중에서 특정 공정의 직전 로트 이력을 기록하여 해당 공정의 신경망 학습에 이용함으로써, 직전 로트 이력으로부터 바로 다양한 경우 수를 생성하여 학습 데이터를 생성할 수 있고, 이를 통해, 직전 공정 까지의 모의 과정을 반복하지 않아 빠르게 학습 과정을 진행할 수 있는 효과가 얻어진다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 발명의 실시를 위한 구체적인 내용을 도면에 따라서 설명한다. 또한, 본 발명을 설명하는데 있어서 동일 부분은 동일 부호를 붙이고, 그 반복 설명은 생략한다. 먼저, 본 발명에서 사용하는 공장 워크플로우 모델의 구성에 대하여 도 1 내지 도 5를 참조하여 설명한다. 도 1에서 보는 바와 같이, 공장 워크플로우는 일련의 다수의 공정으로 구성되고, 하나의 공정은 다른 공정과 연 결된다. 또한, 연결된 공정은 선후 관계를 가진다. 공정을 하나의 노드로 볼 때, 전체 공장 워크플로우는 방향 성 그래프를 형성한다. 이하에서 설명의 편의를 위하여, 공정을 공정 노드와 혼용한다. 도 1의 예에서, 공장 워크플로우는 공정 P0, P1, P2, ..., P4로 구성되고, 공정 P0로 시작되어 공정 P4로 종료 된다. 공정 P0가 완료되면 다음 공정 P1이 시작되고, 공정 P1이 완료되면 다음 공정 P2가 시작된다. 한편, 하나의 로트(lot)는 특정 작업물로서, 공장 워크플로우의 각 공정 P0, P1, P2, ..., P4를 거쳐 완성된 제 품으로 생산된다. 특정 작업물(=로트)에 대해, 공정 P0가 완료되면 해당 로트를 전달받아 다음 공정 P1를 시작 할 수 있다. 즉, 공정 P0에서 처리가 완료된 로트(LOT)가 공정 P1에 제공되면, 공정 P1은 해당 로트를 이어받아 추가 작업을 지속 진행한다. 이와 같이 공장 플로우의 모든 일련의 공정이 처리되면, 해당 로트의 제품이 생산 된다. 또한, 공장 워크플로우는 하나의 제품 종류(또는 제품 유형, 제품군)만을 생산하는 것이 아니라 다수 유형의 제 품이 처리되어 생산될 수 있다. 따라서 각 로트는 제품 종류에 따라 유형이 달라진다. 예를 들어, 로트 1은 '제 품 A' 유형이면, 로트 1의 최종 생산 제품은 제품 A가 생산된다. 또한, 로트 2는 '제품 B' 유형이면, 로트 2의 최종 생산 제품은 제품 B가 생산된다. 한편, 바람직하게는, 공장 워크플로우는 생산 제품군 별로 각기 상이할 수 있다. 또한, 각 공정은 동시에 구동될 수 있다. 예를 들어, 공정 P4에서 로트 8(제품 B)를 처리하고 있을 때, 동시에 공정 P0에서 로트 1(또는 제품 A)을 중간 처리하고, 공정 P1에서 로트 2(제품 B)를 처리하고 있을 수 있다. 다음으로, 공정의 작업 유형에 대하여 설명한다. 또한, 하나의 공정은 다수의 작업 유형을 선택적으로 수행할 수 있다. 해당 공정은 투입 로트를 대상으로 진행 가능한 \"작업유형 중 하나\"를 작업한다. 이때, 로트(이하 투입 로트)가 해당 공정에 투입되고, 공정의 작업이수행됨에 따라 처리된 로트(이하 완료 로트)가 출력(산출)된다. 즉, 작업이 완료된 로트는 다음 공정 Pn+1의 작 업 가능 대상인 투입로트가 된다. 도 2의 예에서, 공정 Pn 은 작업유형 n-1, 작업유형 n-2, ..., 작업유형 n-M 등 다수의 작업 유형을 갖는다. 공 정 Pn은 M개의 작업 중에서 하나의 작업을 선택하여 수행한다. 그때 환경이나 요청에 따라 다수의 작업 중 하나 가 선택되어 수행된다. 특히, 바람직하게는, 해당 공정에 스케줄링 신경망이 있는 경우, 해당 공정의 신경망에 서 '하나의 작업'을 선택하여 스케줄링 한다. 일례로서, 공정 Pn (n=0,1,2,3…)는 여러 작업 유형들을 통칭하는 작업(예: \"조립\")을 의미하며, 각 작업 유형 은 투입 로트의 종류에 따라 달라진다(예: 투입 로트 유형이 의자이면 \"다리 조립\", 투입 로트 유형이 테이블이 면 \"상판 조립\", 투입 로트 유형이 서랍장이면 \"서랍 조립\" 등). 다음으로, 공정의 장비에 대하여 설명한다. 또한, 공정 Pn에 배치된 장비는 여러 대가 있을 수 있으며, 작업 유형 별로 투입 로트에 대해서는 특정 \"장비\" 가 하나 지정된다. 이러한 지정 가능한 관계정의를 도 3에 나타내고 있다. 즉, 특정 장비 별로 진행할 수 있는 작업 유형 및 로트 유형이 다르며, 장비 별로 하나 또는 여러 작업 유형이 진행될 수 있다. 도 3의 예에서, 공정 P0는 3가지의 작업 유형을 가지고, 각 작업 유형 P0-1, P0-2, P0-3은 각각 제품 A, 제품 B, 제품 C를 가공하기 위한 작업이다. 또한, 작업 유형 P0-1(또는 제품 A)을 작업하기 위한 장비는 장비1과 장 비2 등 2개이다. 또한, 작업 유형 P0-2,P03을 작업하기 위한 장비는 각각 장비 2와, 장비1이다. 공정 Pn 내에 여러 개의 로트가 존재할 수 있으며, 로트의 상태는 현재 작업 중인 로트와, 작업 시작을 기다리 는 로트(대기중인 로트)로 구분될 수 있다. 대기중 로트 상태는 해당 공정에서 이미 장비가 다른 로트를 처리 중이거나, 해당 로트를 가공할 수 있는 장비의 작업 준비가 완료되지 않은 상태인 경우를 나타낸다. 다음으로, 공정의 작업교체(job change)에 대하여 설명한다. 공정 Pn에서, 특정 장비가 이전 로트와 다음 로트의 작업유형이 달라지는 경우, 이전 로트의 작업(또는 작업 유 형)에서 다음 로트의 작업 유형을 처리하기 위하여, 준비 작업을 수행하고 장비설정을 변경하는 과정을 수행한 다. 이를 작업교체(job change)라 부르기로 한다. 또한, 작업 교체를 위해 일정한 시간이 소요된다. 예를 들어, 작업 교체는 오일 교체, 장비 구동 프로그램 교체, 장비 내 공구 교체, 장비 예열/냉각작업 등일 수 있다. 이러한 작업 교체 소요시간이 도 4에 도시되고 있다. 도 4의 예에서, 현재 작업유형 P0-1인 로트를 생산하던 장 비가, 작업유형 P0-3인 로트를 생산하려면, 12시간이 소요되는 작업교체 작업을 수행해야 한다. 즉, 12시간의 작업교체 후 다음 작업 유형 P0-3의 로트를 처리할 수 있다. 작업교체 시에는 장비에 투입 가능한 로트가 존재하더라도 생산(처리)될 수 없다. 따라서 작업교체가 자주 일어 나면, 작업교체 시간이 많이 소요되므로, 장비 활용율이 저하된다. 공정 Pn에서 작업교체를 하지 않고 특정 로트 유형만 생산하는 작업 유형만 지속할 수 있다. 이 경우, 작업 대 기 중인 다른 로트 유형은 완료 로트로 진행될 수 없기 때문에, 고객이 요구한 로트 유형이 여러 개이면, 반드 시 적절한 \"작업교체 시점\"을 결정하여 작업교체를 수행해야 한다. 다음으로, 본 발명을 실시하기 위한 전체 시스템의 구성을 도 5를 참조하여 설명한다. 도 5에서 보는 바와 같이, 본 발명을 실시하기 위한 전체 시스템은 신경망으로 구성되는 신경망 에이전트 , 공장의 워크플로우를 시뮬레이션하는 공장 시뮬레이터, 및, 신경망 에이전트를 학습시키는 학습 시스템으로로 구성된다. 추가적으로, 학습 데이터 등을 저장하는 데이터베이스를 더 포함하여 구성될 수 있다. 먼저, 신경망 에이전트는 워크플로우의 상태(또는 로트 상태)를 입력받으면 특정 공정의 다음 작업(또는 작 업 행위)을 출력하는 적어도 하나의 신경망으로 구성된다. 특히, 하나의 신경망은 하나의 공정에 대한 다음 작업(또는 작업 유형)을 결정하도록 구성된다. 즉, 바람직 하게는, 해당 공정에서 다음으로 수행할 수 있는 다수의 작업(또는 작업 유형) 중에서 하나를 선택한다. 일례로 서, 신경망의 출력은 모든 작업 유형에 해당하는 노드들로 구성되고, 각 노드의 출력은 확률값을 출력하며, 가장 큰 확률값의 노드에 해당하는 작업이 다음 작업으로 선택된다.즉, 각 공정의 스케줄링 인공 신경망은 \"다음 작업로트\"를 택1하는 의사결정을 수행하며, 작업교체 시간을 감수하고 다른 작업유형을 선택하거나, 동일한 작업유형의 로트를 다시 선택할 수 있다. 또한, 다수의 공정들의 다음 작업을 결정하기 위하여, 다수 공정들 각각에 대한 다수의 신경망을 구성할 수 있다. 도 1의 예에서, 공정이 5개이면, 각각의 공정에 대응되는 신경망을 구성하여 모두 5개를 구성할 수 있다. 그러나, 공정 내에서 선택하는 작업이 하나만 있는 경우 등 선택이 필요없거나 단순한 공정에 대해 신경 망을 구성하지 않는다. 신경망 및 그 신경망의 최적화는 DQN(Deep-Q Network) 등 통상의 강화학습 기반의 신경망 방식을 이용한다[비특 허문헌 1] 또한, 신경망 에이전트는 워크플로우 상태(St)와, 해당 상태에서의 작업(at), 해당 작업에 의해 수행된 후의 워크플로우 상태(St+1), 그리고 해당 상태에서의 작업에 대한 보상(rt)을 입력받아, 해당 공정의 신경망의 파라미터를 최적화 한다. 또한, 신경망이 최적화 되면(학습되면), 신경망 에이전트는 워크플로우 상태(St)를 최적화된 신경망 에 적용하여 다음 작업(at)을 출력하게 한다. 한편, 워크플로우 상태(St)는 t시점에서의 워크플로우 상태(또는 공장 상태)를 나타낸다. 바람직하게는, 워크플 로우 상태는 워크플로우 내의 각 공정의 상태와, 공장 전체에 해당하는 공장 상태로 구성된다. 예를 들어, 워크 플로우 상태(St)는 의사결정 대상 제품 유형에 해당하는 로트의 공장 내 분포, 의사결정을 하고자 하는 생산 설 비의 현재 작업 제품 유형 등 각 공정 또는 공장 상태를 나타내는 정보로 구성된다. 또한, 바람직하게는, 워크플로우 상태는 워크플로우 내의 일부 공정의 상태들만 포함할 수 있다. 이때, 워크플 로우 내에서 병목 현상을 유발하는 공정 등 핵심적인 공정들만을 대상으로, 해당 공정들의 상태들만 포함할 수 있다. 또한, 워크플로우 상태는 워크플로우의 과정에서 변화되는 요소를 대상으로 설정된다. 즉, 워크플로우가 진행되어도 변하지 않는 구성요소는 상태로 설정되지 않는다. 각 공정의 상태(또는 공정 상태)는 투입 로트, 각 공정 장비의 상태 등으로 구성된다. 또한, 공정 상태는 제품 의 생산 목표량, 달성된 현황 등 전체 공정에서의 상태를 나타낸다. 한편, 위와 같이, 상태는 전체 워크플로우 상태로 설정하고, 행위는 해당 공정에서의 작업으로 설정하고 있다. 즉, 공정 상태는 전체 워크플로우 내에 있는 로트(Lot)들의 배치상태, 장비상태들을 포함하나, 행위(또는 작 업)는 특정 공정 노드(Node)에 국한된다. 작업 또는 행위 ap,t는 공정 p의 시간 t에서의 행위 또는 작업으로서, 의사결정을 수행하는 작업, 즉, 선택한 제품 유형 등을 나타낸다. 즉, 공정 상태는 전체 워크플로우 내에 있는 로트(Lot)들의 배치상태, 장비상태들을 포함하나, 행위(또는 작 업)는 특정 공정 노드(Node)에 국한된다. 공장에서는 가장 생산능력의 병목이 되거나, 의사결정이 필요한 특정 공정 노드(Node)를 최적 스케줄링 할 경우, 연계된 전후 공정 노드(Node)의 문제는 개의치 않겠다는 제약이론 (TOC, Theory of Constraint)[비특허문헌 2]이 전제된다. 이는 마치 신호등이나 교차로, 인터체인지와 같은 주 요 관리 포인트에서 주요 의사결정을 진행하되, 이를 위해서 연결된 모든 전후 도로들의 트래픽 상황을 상태 (State)로 반영해야 하는 것과 같다. 한편, 보상(rt)는 공장에서 의사결정으로 최적화 하고자 하는 보상을 나타낸다. 예를 들어, 보상은 설비 가동율 (= 설비가 작업한 시간/전체 시간), 납기 만족율(= 제품 별 작업완료를 해야 하는 목표시간 준수 생산량 / 전체 작업완료를 해야하는 생산량) 등으로 구성된다. 즉, 이들 요소를 가중 합하여 보상치를 구성할 수 있다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "다음으로, 공장 시뮬레이터는 공장 워크플로우를 시뮬레이션하는 통상의 시뮬레이터이다. 공장 워크플로우는 앞서 도 1과 같은 워크플로우 모델을 사용한다. 즉, 시뮬레이션의 공장 워크플로우 모델은 공정을 나타내는 다수의 노드로 구성된 방향성 그래프로 모델링된다. 그러나 시뮬레이션의 각 공정 모델은 실제 현장의 설비 현황으로 모델링된다. 즉, 도 2와 같이, 공정 모델은 해당 공정에 투입되는 로트(LOT), 해당 공정에서 완료되는 로트(LOT), 다수의 작 업 유형, 각 작업 유형을 위한 장비, 각 작업 유형에 따른 작업의 처리 속도, 이전 작업 유형과 새로운 작업 유형을 교체하기 위한 작업교체 시간 등 설비 구성과 처리 능력을 모델링 변수로 모델링된다. 상기와 같은 공장 시뮬레이터는 통상의 시뮬레이션 기술을 채용한다. 따라서 더 구체적인 설명은 생략한다. 다음으로, 학습 시스템은 공장 시뮬레이터를 이용하여 시뮬레이션을 수행하고, 시뮬레이션 결과로부터 학습 데이터를 추출하고, 추출된 학습 데이터로 신경망 에이전트, 즉, 각 공정의 신경망을 학습시킨다. 즉, 학습 시스템은 공장 시뮬레이터로 다수의 생산 에피소드를 시뮬레이션한다. 생산 에피소드는 최종 제품(또는 로트)을 생산하는 전체 과정을 의미한다. 이때, 각 생산 에피소드는 각 처리과정이 상이하다. 예를 들어, 빨간색 볼펜 100자루와 파랑색 볼펜 50자루를 생산하는 시뮬레이션을 한번 수행하는 것이 하나의 생 산 에피소드이다. 이때, 공장 워크플로우 내에서 처리하는 세부 공정이 서로 다를 수 있다. 세부 공정을 다르게 하면 또 다른 하나의 생산 에피소드가 생성된다. 예를 들어, 특정 상태일때 공정 2에서 빨간색 볼펜의 로트를 처리하는 것과, 파랑색 볼펜의 로트를 처리하는 것 등은 서로 다른 생산 에피소드이다. 바람직하게는, 학습 시스템은 도 6과 같은 강화 학습을 이용하여 학습할 수 있다[비특허문헌 1]. 즉, 각 공 정 상태(또는 로트 상태)(St)에서의 보상(rt)은 강화학습 방식에 의하여 산출한다. 각 상태(St)에서의 보상(rt) 은 해당 생산 에피소드의 최종 결과(또는 최종 성과)로부터 산출한다. 즉, 최종 결과(또는 최종 성과)은 해당 공정 또는 전체 워크플로우의 생산 설비(장비)의 가동효율, 작업물의 작업시간(TAT: Turn-Around Time), 생산목 표 달성율 등 공장 관리에서 사용하는 주요 KPI(Key Performance Index, 주요 성능 지수) 등에 의해 산출된다. 또한, 생산 에피소드로부터 시간 순에 따른 상태(St)와 작업(ap,t), 보상(rt)을 추출하면, 트랜지션(transition) 들을 추출할 수 있다. 즉, 트랜지션은 현재 상태(St)와 작업(ap,t)에서 다음 상태(St+1)와 보상(rt)으로 구성된다. 이것은 현재 상태(St)에서 특정 공정의 작업(ap,t)이 수행되면 다음 상태(St+1)로 전환되고 보상(rt)의 가치를 얻 는 것을 의미한다. 여기서의 보상(rt)은 작업(ap,t)이 수행된 경우의 현재 상태(St)에 대한 가치를 의미한다. 위와 같이, 학습 시스템은 생산 에피소드에 따라 시뮬레이터로 시뮬레이션(모의) 하고, 모의 결과로부 터 트랜지션들을 추출하여 학습 데이터를 구축한다. 이때, 하나의 에피소드에서도 다수의 트랜지션들이 추출된 다. 바람직하게는, 다수의 에피소드에 따라 시뮬레이션을 수행하고, 이로부터 다량의 트랜지션을 추출한다. 또한, 학습 시스템은 시뮬레이터로 모의한 모의 데이터에서 특정 공정 직전의 로트 상태의 이력을 기록 하고, 기록된 로트 상태의 이력 데이터로부터 다수의 생산 에피소드를 생성할 수 있고, 생산 에피소드에 따라 모의하고, 모의 결과에 의한 학습 데이터(또는 트랜지션)를 추출한다. 그리고 학습 시스템은 추출된 학습 데이터(또는 트랜지션)을 신경망 에이전트에 적용하여 학습시킨다. 이때, 일례로서, 학습 데이터(또는 트랜지션)을 시간 순에 의해 순차적으로 학습시킬 수 있다. 바람직하게는, 전체 트랜지션에서 랜덤하게 트랜지션을 샘플링하고, 샘플링된 트랜지션들로 신경망 에이전트를 학습시킨다. 또한, 신경망 에이전트가 다수의 신경망을 구성한 경우, 각 신경망에 대응되는 공정의 학습 데이터(또는 트 랜지션 데이터)를 이용하여, 해당 신경망을 학습시킨다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "다음으로, 데이터베이스는 신경망 에이전트를 학습시키기 위한 학습 데이터를 저장하는 학습데이터 DB, 로트 이력 등을 저장하는 로트이력DB 등으로 구성된다. 그러나 상기 데이터베이스의 구성은 바 람직한 일실시예일 뿐이며, 구체적인 장치를 개발하는데 있어서, 접근 및 검색의 용이성 및 효율성 등을 감안하 여 데이터베이스 구축이론에 의하여 다른 구조로 구성될 수 있다. 바람직하게는, 학습 데이터는 다수의 트랜지션으로 구성된다. 특히, 트랜지션 데이터는 공정별로 구분될 수 있 다. 앞서와 같이, 학습 시스템은 다수의 에피소드를 시뮬레이터로 시뮬레이션 하거나, 로트 이력으로부 터 다수의 에피소드를 생성하여 모의하면, 다양한 대량의 트랜지션 데이터를 수집할 수 있다. 다음으로, 본 발명의 일실시예에 따른 시뮬레이터에 의해 공장 워크플로우가 모의되는 예를 도 7을 참조하 여 설명한다. 도 7은 시뮬레이터로 모의한 결과로서, 공장 워크플로우의 상태 정보를 나타낸다. 공장 워크플로우의 상태 정보는 시간에 따라 변화될 것이다. 특정 시점의 공장 워크플로우의 상태는 로트의 위치 및 상태로 구성된다. 특히, 도 7은 도 1의 공장 워크플로우에 대한 공장 상태(또는 각 공정 상태) 중 하나의 시점에서의 공장 상태를 나타내고 있다. 도 7에서 보는 바와 같이, 전체 공장 상태는 공정 별 로트 유형, 로트 넘버(로트 식별정보), 로 트 상태, 작업 진행 시간 등으로 구성된다. 로트 유형은 해당 로트가 어떤 제품(또는 제품 유형)에 대한 로트인 지를 나타낸다. 또한, 로트 넘버는 로트 식별정보로서 식별하기 위한 정보이다. 또한, 로트 상태는 해당 로트가 대기 중인지 작업 중인지를 나타낸다. 또한, 작업 진행시간은 해당 작업을 시작한 후 진행 시간으로서, 작업중 이면 작업을 시작한지 얼마나 시간이 소요되었는지를 나타낸다. 상기와 같은 상태에서, 공정 P4의 신경망의 학습을 위한 생산 에피소드를 생성하는 과정을 설명한다. 즉, 공정 P4의 신경망은 P4공정에서 다음 작업물을 선택하는 의사결정을 수행하는 신경망이다. 워크플로우의 선행 공정 P0~P3에는 별도의 의사결정이 불필요하거나, 이미 의사결정 수행이 가능한 인공 신경망이 존재한다. 공정 P4는 현재 로트 9(제품 B)을 작업 중이며, P4에서 로트 9 이후에 다음 작업물의 선택에 따라 다양한 생산 에피소드를 생성할 수 있다. 특히, 바람직하게는, 다음 3가지의 생산 에피소드를 생성할 수 있다. [생산 에피소드 1] 로트 7 [생산 에피소드 2] 로트 8 [생산 에피소드 3] 로트 6 즉, 생산 에피소드 1과 2는 각각 즉시 가용한 로트 7, 로트 8를 선택하는 에피소드이다. 또한, 생산 에피소드 3 은 로트 6이 도착할 때를 대비하여 공정 P4의 장비에서 작업을 수행하지 않고 대기하는 에피소드이다. 생산 에피소드 1과 2의 경우, 즉, 공정 P4가 LOT 7이나 LOT 8을 선택할 경우, 작업 유형이 변경되므로 작업교체 (JOB CHANGE)가 유발된다. 즉, 공정 P4에서 제품 B에서 제품 A 또는 제품 C로 변경되므로, 생산 장비의 교체 작 업(JOB CHANGE)이 발생한다. 생산 에피소드 3의 경우는 LOT 7이나 LOT 8을 선택하지 않고 약간의 시간을 대기하는 경우이다. 이 경우, 로트 6은 제품 B의 유형을 가지므로, 교체 작업(JOB CHANGE)이 발생하지 않는다. 즉, 해당 에피소드는 동일한 제품인 LOT 6, LOT 4, LOT 2를 연속 처리할 수 있다. 따라서 생산 에피소드 3의 경우가 생산 에피소드 1과 2 보다 효율적이고 더 생산성이 좋은 결과가 나올 것이다. 즉, 공정 P4에서 다음 작업물로 LOT 7을 선택함과 동시에 작업 교체가 발생한다. 따라서 공정 P3에 대한 시뮬레 이션 결과로 LOT 6의 공정 P4 도착시점이 계산되면, LOT7을 선택한 것이 올바른 결정인지, 장비 대기 후 LOT6 을 선택한 것이 옳았던 것인지를 학습을 통하여 판단할 수 있다. 그러나, 공정 P4 입장에서는 LOT 6, LOT 4, LOT 2가 공정 P4로 들어오는 시점(공정 P4에 가용 상태로 되는 시점)을 미리 알 수 없다. 즉, 공정 P0~P3에 존재하는 LOT 별 완료 시간 및 P4 공정 작업 가능 시간은 공정 P0~P3에 대한 시뮬레이션(모의)을 모두 완료해야만 사후에 알 수 있다. 또한, 이런 학습과정에서는 공정 P4입장에서는 다양한 생산 에피소드의 경우의 수가 있으며, 이 경우의 생산 에 피소드를 모두 모의하기 위하여 다수의 \"공장 워크플로우의 공정 P0~P4의 모의\"가 필요하며, 과다한 시간이 소 요된다. 앞서의 예에서, 모두 3개의 생산 에피소드를 모의하기 위하여, 공정 P0~P3의 동일한 과정을 반복적으로 3번의 모의해야 한다. 공정이 복잡한 경우, 매우 많은 에피소드의 경우 수 만큼 동일한 일부 과정을 반복하여 모의해야 한다. 다음으로, 본 발명의 일실시예에 따른 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스케줄링 신경망 학 습 시스템의 구성을 도 8을 참조하여 설명한다. 도 8에서 보는 바와 같이, 본 발명의 일실시예에 따른 로트 이력 재현 기능을 구비한 공장 시뮬레이터 기반 스 케줄링 신경망 학습 시스템은 시뮬레이터를 모의하여 모의 데이터를 수집하는 모의 실행부, 특정 공정의 로트 상태의 이력을 기록하는 로트이력 기록부, 로트 이력으로부터 특정 공정에 대한 다수의 에피소 드를 생성하고 생성된 에피소드에 따라 모의하게 하는 에피소드 재현부, 및, 모의 결과로부터 학습 데이터 를 생성하여 특정 공정의 신경망을 학습시키는 학습부로 구성된다. 먼저, 모의 실행부는 시뮬레이터를 실행시켜 모의 데이터를 수집한다. 시뮬레이터로 모의한 결과로 서, 공장 워크플로우의 상태 정보를 수집할 수 있다. 공장 워크플로우의 상태 정보는 시간에 따라 변화될 것이다. 특정 시점의 공장 워크플로우의 상태는 로트의 위치 및 상태로 구성된다. 특히, 모의 실행부는 시뮬레이터를 실행시켜, 앞서 도 7과 같은 공장 워크플로우에 대한 공장 상태(또 는 각 공정 상태)를 수집할 수 있다."}
{"patent_id": "10-2022-0064905", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "다음으로, 로트이력 기록부는 모의 실행부를 통해, 특정 공정의 이전 까지의 공정들을 모의하게 하여, 특정 공정의 로트 상태의 이력을 기록한다. 도 9에서 보는 바와 같이, 특정 공정의 이전 까지의 공정들을 제1 스테이지라고 부르기로 하고, 특정 공정 이후 의 공정들을 제2 스테이지라 부르기로 한다. 도 9의 예에서 제1 스테이지는 공정 P0, P1, P2, P3으로 구성되고, 제2 스테이지는 P4로 구성된다. 공정 P4 이후에 P5 등 공정이 존재한다면, 제2 스테이지에는 공정 P5 등이 포함 될 것이다. 즉, 로트이력 기록부는 제1 스테이지의 공정들(특정 공정의 이전 까지의 공정들)에 대하여, 모의 실행부 를 통해 모의하게 하고, 특정 공정의 투입 로트에 대한 이력을 기록한다. 특정 공정의 투입 로트에 대한 이력 정보가 도 10에 예시되고 있다. 도 10에서 보는 바와 같이, 특정 공정의 투입 로트의 이력 정보는 제1 스테이지의 각 공정의 로트들이 해당 공 정에 도착하는 시간으로 구성된다. 즉, 로트 이력 정보는 로트 식별정보(로트 넘버), 해당 로트의 로트 유형, 해당 공정의 도착 시간(투입가능 시간) 등으로 구성된다. 또한, 바람직하게는, 로트이력 기록부는 제1 스테이지에 대한 모의 결과도 저장한다. 다음으로, 에피소드 재현부는 로트 이력 정보로부터 제2 스테이지(특정 공정 이후 공정들)에 대한 생산 에 피소드를 생성하고, 생산 에피소드에 따른 모의를 수행하게 한다. 구체적으로, 에피소드 재현부는 로트 이력 정보를 이용하여 제2 스테이지(또는 특정 공정)에서의 투입 로트 의 도착을 모의하고, 도착된 투입 로트에 따른 다양한 생산 에피소드를 생성하고, 생산 에피소드에 의한 제2 스 테이지의 공정들(특정 공정의 이후의 공정들)에 대하여 모의 실행부를 통해 모의하게 한다. 즉, 에피소드 재현부는 로트 이력 정보의 각 로트의 도착 시점을 재현하여, 특정 공정에서의 투입 로트의 도착을 모의한다. 그리고 에피소드 재현부는 투입 로트의 도착에 따라 다수의 생산 에피소드를 생성하고, 생산 에피소드에 따라 특정 공정 이후의 공정들을 모의 실행부를 통해 모의하게 한다. 또한, 에피소드 재현 부는 제2 스테이지의 모의 결과를 수집한다. 에피소드 재현부는 신경망 학습을 위한 시뮬레이션 구동 시, 제2 스테이지에 대해서 도착 시점별로 로트를 생성하여, 마치 제1 스테이지의 시뮬레이션 결과로 로트가 도착하는 시점을 재현하는 역할을 수행한다. 공정 P4의 의사결정을 위한 인공신경망을 학습 시에는 제1 스테이지에 대한 추가적인 시뮬레이션 수행은 불필요 하며, 도 10과 같은 로트 이력 기록에 따라 필요 시점에 로트를 생성해주고 제2 스테이지에 대한 시뮬레이션만 반복하면 된다. 수백~수만번의 시뮬레이션이 필요한 인공 신경망 학습 단계에서, 제1 스테이지 전체에 대한 시뮬레이션을 수행 하지 않아도 되므로, 시뮬레이션 수행시간을 단축할 수 있고, 신경망 학습 완료시점을 단축할 수 있다. 즉, 워 크플로우의 후행 공정인 P4공정에 장착될 인공신경망 학습 소요 시간을 대폭 단축시킬 수 있다. 다음으로, 학습 실행부는 수집된 모의결과로부터 학습 데이터를 생성하여 해당 공정의 신경망에 적용하여 학습시킨다. 특히, 학습 실행부는 제1 스테이지의 생산 에피소드에 제2 스테이지의 생산 에피소드를 결합하여 생산 에피 소드를 생성하고, 생성된 최종 생산 에피소드에 따른 모의 결과를 해당 공정의 신경망에 적용한다. 앞서 예에서, 제1 스테이지의 생산 에피소드는 1개이고, 제2 스테이지의 에피소드는 3개이다. 1개의 제1 스테이지의 생산 에피소드가 3개의 제2 스테이지의 에피소드에 결합하여, 최종 생산 에피소드는 모두 3개가 생산된다. 그리 고 제1 및 제2 스테이지의 모의결과는 최종 생산 에피소드의 모의 결과이기도 하다. 이상, 본 발명자에 의해서 이루어진 발명을 실시 예에 따라 구체적으로 설명하였지만, 본 발명은 실시 예에 한 정되는 것은 아니고, 그 요지를 이탈하지 않는 범위에서 여러 가지로 변경 가능한 것은 물론이다."}
{"patent_id": "10-2022-0064905", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일실시예에 따른는 공장 워크플로우의 모델을 도시한 예시도. 도 2는 본 발명의 일실시예에 따른 공정의 구성에 대한 블록도. 도 3은 본 발명의 일실시예에 따른 공정의 장비 구성을 예시한 도면. 도 4는 본 발명의 일실시예에 따른 작업 교체 시간을 나타낸 예시 표. 도 5는 본"}
