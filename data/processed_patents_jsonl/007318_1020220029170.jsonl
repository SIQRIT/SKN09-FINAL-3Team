{"patent_id": "10-2022-0029170", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0132091", "출원번호": "10-2022-0029170", "발명의 명칭": "DApp 서비스에서 블록 프로듀서 노드의 병렬합의 방법", "출원인": "최영규", "발명자": "최영규"}}
{"patent_id": "10-2022-0029170", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "DApp 서비스를 제공하는 DApp에서 선택된 복수의 블록 프로듀서 노드 각각을 나누어 동일한 개수의 블록 프로듀서 노드를 가지는 복수의 영역을 형성하는 단계;이전 블록 생성 구간 동안에 미리 정해진 프라이머리 블록 프로듀서 노드가 현재 블록 생성 구간 동안에 블록을생성하는 단계; 상기 프라이머리 블록 프로듀서 노드가 상기 블록을 상기 복수의 영역이중 이웃 영역의 리드 블록 프로듀서 노드에 전달하는 단계; 상기 복수의 영역 각각의 리드 블록 프로듀서 노드가 자신이 속한 영역의 다른 블록 프로듀서 노드에 상기 블록을 제공하여 상기 블록에 대한 합의 검증을 실행하는 단계; 및상기 복수의 영역 각각의 리드 블록 프로듀서 노드가 합의 검증에 대한 결과를 상기 프라이머리 블록 프로듀서노드에 제공하는 단계를 포함하는 것을 특징으로 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법."}
{"patent_id": "10-2022-0029170", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 프라이머리 블록 프로듀서 노드의 지수값에 특정 수를 더한 후 특정 블록의 해시값의 마지막 4개 바이트값에 대한 모듈로 함수(MOD21)를 적용하여 얻은 식별자를 가진 블록 프로듀서 노드를 해당 영역의 리드 블록 프로듀서 노드로 결정하는 단계를 더 포함하는 것을 특징으로 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법."}
{"patent_id": "10-2022-0029170", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,상기 복수의 블록 프로듀서 노드가 최근 컨펌 블록을 대상으로 탈중앙 인공지능(DAI) 코드를 가동시켜 동일한결과값을 생성하는 단계를 더 포함하고,상기 탈중앙 인공지능(DAI) 코드는상기 블록 프로듀서 노드의 하위층에 해당하는 커뮤니케이션 레이어에서 작동되는 제1 코드 및 상기 블록 프로듀서 노드의 상위층에 해당하는 서비스 레이어에서 작동되는 제2 코드를 포함하는 것을 특징으로 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법."}
{"patent_id": "10-2022-0029170", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 복수의 블록 프로듀서 노드가 최근 컨펌 블록을 대상으로 탈중앙 인공지능(DAI) 코드를 가동시켜 동일한결과값을 생성하는 단계는상기 프라이머리 블록 프로듀서 노드가 상기 블록을 생성할 때 다음 프라이머리 블록 프로듀서 노드의 식별자의생성 시 사용할 블록 지수 및 해쥐 마크를 상기 블록의 헤더에 기록하는 단계; 및공개특허 10-2023-0132091-3-현재 네트워크 상태를 기초로 다음 블록 생성 주기 및 다음 블록 생성 구간을 상기 블록의 헤더에 기록하는 단계를 포함하는 것을 특징으로 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법."}
{"patent_id": "10-2022-0029170", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제3항에 있어서,상기 복수의 블록 프로듀서 노드 각각은블록 헤드에 합의 파라미터가 저장되어 있으며, 상기 합의 파라미터는 현재 프라이머리 블록 프로듀서 노드의 식별자, 현재 블록 생성 주기, 현재 블록 생성 구간, 다음 프라이머리블록 프로듀서 노드의 식별자 생성에 사용될 블록 지수, 다음 프라이머리 블록 프로듀서 노드의 식별자의 생성시 적용될 해쉬 마크가 저장되어 있는 것을 특징으로 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법."}
{"patent_id": "10-2022-0029170", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제3항 내지 제5항 중 어느 한 항에 있어서,상기 복수의 블록 프로듀서 노드 각각이 블록의 헤더에 기록된 블록 지수에 해당하는 블록의 해쉬 값에 해쉬 마크를 적용하여 4byte의 부호 없는 정수 값(unsigned integer)을 추출하는 단계; 및상기 복수의 블록 프로듀서 노드 각각이 부호 없는 정수 값(unsigned integer)에 모듈로 함수(MOD21)를 적용한후 얻어지는 결과값 중 하나인 숫자를 다음 프라이머리 블록 프로듀서 노드의 식별자가 될 블록 프로듀서 노드의 식별자로 결정하는 단계를 더 포함하는 것을 특징으로 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 DApp 서비스에서 블록 프로듀서 노드 합의 방법은 DApp 서비스를 제공하는 DApp에서 선택된 복수의 블록 프로듀서 노드 각각을 나누어 동일한 개수의 블록 프로듀서 노드를 가지는 복수의 영역을 형 성하는 단계, 이전 블록 생성 구간 동안에 미리 정해진 프라이머리 블록 프로듀서 노드가 현재 블록 생성 구간 동안에 블록을 생성하는 단계, 상기 프라이머리 블록 프로듀서 노드가 상기 블록을 상기 복수의 영역이중 이웃 영역의 리드 블록 프로듀서 노드에 전달하는 단계, 상기 복수의 영역 각각의 리드 블록 프로듀서 노드가 자신이 속한 영역의 다른 블록 프로듀서 노드에 상기 블록을 제공하여 상기 블록에 대한 합의 검증을 실행하는 단계 및 상기 복수의 영역 각각의 리드 블록 프로듀서 노드가 합의 검증에 대한 결과를 상기 프라이머리 블록 프로듀서 노드에 제공하는 단계를 포함한다."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 DApp 서비스에서 블록 프로듀서 노드 합의 방법에 관한 것이다."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "전 세계 문화 콘텐츠 시장은 2022년 기준 약 1000조 원에 이를 것으로 예상하고 있다. 특히 2012년 33.5%에 불 과했던 디지털 콘텐츠의 비중은 2021년 53%에 이를 것으로 예상하며, 매년 20% 이상 급격히 성장하고 있다. 과거 문화 콘텐츠를 즐기기 위해서는 극장에 가거나, 콘서트 장에 직접 가야 했지만, 이제는 핸드폰 하나로 모 든 콘텐츠를 손쉽게 즐길 수 있다. 디지털 콘텐츠 시장은 넷플릭스, 유튜브, 플레이 스토어 등 디지털 콘텐츠 플랫폼의 등장으로 급격히 성장했으며, 이를 통해 전 세계 어디든 콘텐츠가 활발히 유통될 수 있었다. 하지만 글로벌화가 가속 될수록 몇몇 거대 플랫폼의 독점화가 심화 되었으며, 이로 인해 콘텐츠 공급자보다 플 랫폼의 영향력이 더욱 커지게 되었다. 결국, 콘텐츠 공급자들은 막대한 수수료를 플랫폼에 제공하면서도 제대로 된 콘텐츠 노출 기회를 잡지 못하며, 수익성에 대한 악순환을 겪고 있다. 더욱이 플랫폼이 콘텐츠를 선별하는데 막대한 영향력을 가지게 되면서, 콘 텐츠는 플랫폼의 방향성에 맞게 획일화되어 시장이 왜곡되어 버렸고, 콘텐츠 생태계는 점점 죽어가고 있다. 최근 부상한 블록체인 기술은 그 핵심 가치인 탈중앙화를 통해 민주적인 시스템 구축의 가능성을 보여주었다. 특정 블록체인 기술은 집단이나 중앙 세력에 의해 좌우되지 않고 모든 트랜잭션과 이벤트가 투명하게 공개되고, 위조나 변조의 위험성 또한 없다.특히 이더리움의 DApp인 크립토키티(Crypto kitties)에서 선풍적인 각광을 받으면서 소개된 대체불가토큰(NFT) 기술이 EOS 등 다른 계열의 블록체인에도 도입되면서 희소성과 희귀성이 담보될 수 있어 고유한 가치가 보장되 는 대체불가(Non-Fungible) 디지털 아이템들이 생성되고 유통될 수 있게 되었다. 한편, 최초의 블록체인인 비트코인은 거래 당사자 사이의 비 정부 발행 화폐로 송금을 가능하게 하려 고안되었 다. 하지만 블록체인 기술에 관한 관심이 높아지고, 탈중앙화라는 기술의 철학적 가치와, 그 잠재성을 인정받음 에 따라 블록체인 기술의 활용 범위가 단순 송금이 아닌 기존 산업 구조를 바꿀 수 있는 새로운 대안으로 확대 되었다. 이에 따라 그동안 스마트 컨트랙트, DApp, DAO, NFT 등 다양한 시도와 기술적 발전이 이루어져 왔다. 물론 아직 까지 이러한 시도들은 여전히 실험적인 단계에 머물러 있으며, 완전한 탈중앙화를 위해서 극복해야 할 과제들이 산적해 있는 것도 사실이다. 이더리움의 공동 창립자인 비탈릭 부테린은 그러한 문제들을 거버넌스, 속도, 낭비, DApp 사용성 및 채택이라는"}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "몇가지 주요 사항으로 요약한다. 즉 \"어떻게 하면 이 네 가지 주요 사항을 탈중앙화 되고 안전한 방법으로 해결 할 수 있는 블록체인을 만들 수 있는가\" 하는 것이 블록체인 기술의 당면 과제이다. 특히, 특히 디지털 컨텐츠를 블록체인이라는 탈중앙화 생태계에서 서비스하기 위해서는 다른 조건들이 같다면 \"처리속도의 증가\"가 가장 큰 과제이다."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 합의에 참여하는 블록 프로듀서 노드들 중에서 블록 생성자 노드를 선정하고, 선정된 노드가 생성한 블록을 모든 블록 프로듀서 노드들이 매우 안전하고 효율적으로 합의하도록, 하드웨어와 소프트웨어가 협력하여 병렬적으로 처리할 수 있는 알고리즘을 제공하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법을 제 공하는 것을 목적으로 한다. 또한, 본 발명은 DApp 서비스를 제공하는 DApp들 중에서 코인 보유자들의 투표와 서비스 이용률에 따른 순위에 따라 블록 프로듀서 노드를 선정함으로써 선정된 블록 프로듀서 노드는 블록 생성에 대한 보상을 받을 수 있도 록 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법을 제공하는 것을 목적으로 한다. 또한, 본 발명은 다음 블록 프로듀서 노드로 결정된 블록 프로듀서 노드가 자신이 담당할 블록 생성 구간에 도 달하기 이전에 다음 블록 생성 주기 및 다음 블록 생성 구간을 정의하여 블록의 헤더에 기록하여 부하 밸런싱을 실행할 수 있도록 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법을 제공하는 것을 목적으로 한다. 또한, 본 발명은 소프트웨어에 한정되지 않고 하드웨어와 코디자인(Co-Design)될 때 더욱 효과적일 수 있도록 하는 DApp 서비스에서 블록 프로듀서 노드 합의 방법을 제공하는 것을 목적으로 한다. 본 발명의 목적들은 이상에서 언급한 목적으로 제한되지 않으며, 언급되지 않은 본 발명의 다른 목적 및 장점들 은 하기의 설명에 의해서 이해될 수 있고, 본 발명의 실시예에 의해 보다 분명하게 이해될 것이다. 또한, 본 발 명의 목적 및 장점들은 특허 청구 범위에 나타낸 수단 및 그 조합에 의해 실현될 수 있음을 쉽게 알 수 있을 것 이다. 특히, MOD 21 함수와 해시 값에서 추출하는 4개의 바이트 수 등은 21이나 4에 한정되지 않는다. 또한 이 알고리즘의 구현은 소프트웨어에 한정하지 않는다. 오히려 하드웨어와 함께 코디자인(Co-Design)될 때 더 효율 적일 수 있다."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "이러한 목적을 달성하기 위한 DApp 서비스에서 블록 프로듀서 노드 합의 방법은 DApp 서비스를 제공하는 DApp에 서 선택된 복수의 블록 프로듀서 노드 각각을 나누어 동일한 개수의 블록 프로듀서 노드를 가지는 복수의 영역 을 형성하는 단계, 이전 블록 생성 구간 동안에 미리 정해진 프라이머리 블록 프로듀서 노드가 현재 블록 생성 구간 동안에 블록을 생성하는 단계, 상기 프라이머리 블록 프로듀서 노드가 상기 블록을 상기 복수의 영역이중 이웃 영역의 리드 블록 프로듀서 노드에 전달하는 단계, 상기 복수의 영역 각각의 리드 블록 프로듀서 노드가 자신이 속한 영역의 다른 블록 프로듀서 노드에 상기 블록을 제공하여 상기 블록에 대한 합의 검증을 실행하는 단계 및 상기 복수의 영역 각각의 리드 블록 프로듀서 노드가 합의 검증에 대한 결과를 상기 프라이머리 블록 프로듀서 노드에 제공하는 단계를 포함한다.일 실시예에서, DApp 서비스에서 블록 프로듀서 노드 합의 방법은 상기 프라이머리 블록 프로듀서 노드의 지수 값에 특정 수를 더한 후 특정 블록의 해시값의 마지막 4개 바이트 값에 대한 모듈로 함수(MOD21)를 적용하여 얻 은 식별자를 가진 블록 프로듀서 노드를 해당 영역의 리드 블록 프로듀서 노드로 결정하는 단계를 더 포함할 수 있다. 일 실시예에서, DApp 서비스에서 블록 프로듀서 노드 합의 방법은 상기 복수의 블록 프로듀서 노드가 최근 컨펌 블록을 대상으로 탈중앙 인공지능(DAI) 코드를 가동시켜 동일한 결과값을 생성하는 단계를 포함하고, 상기 탈중 앙 인공지능(DAI) 코드는 상기 블록 프로듀서 노드의 하위층에 해당하는 커뮤니케이션 레이어에서 작동되는 제1 코드 및 상기 블록 프로듀서 노드의 상위층에 해당하는 서비스 레이어에서 작동되는 제2 코드를 포함할 수 있다. 일 실시예에서, 상기 복수의 블록 프로듀서 노드가 최근 컨펌 블록을 대상으로 탈중앙 인공지능(DAI) 코드를 가 동시켜 동일한 결과값을 생성하는 단계는상기 프라이머리 블록 프로듀서 노드가 상기 블록을 생성할 때 다음 프 라이머리 블록 프로듀서 노드의 식별자의 생성 시 사용할 블록 지수 및 해쥐 마크를 상기 블록의 헤더에 기록하 는 단계 및 현재 네트워크 상태를 기초로 다음 블록 생성 주기 및 다음 블록 생성 구간을 상기 블록의 헤더에 기록하는 단계를 포함한다. 일 실시예에서, 상기 복수의 블록 프로듀서 노드 각각은 블록 헤드에 합의 파라미터가 저장되어 있으며, 상기 합의 파라미터는 현재 프라이머리 블록 프로듀서 노드의 식별자, 현재 블록 생성 주기, 현재 블록 생성 구간, 다음 프라이머리 블록 프로듀서 노드의 식별자 생성에 사용될 블록 지수, 다음 프라이머리 블록 프로듀서 노드 의 식별자의 생성 시 적용될 해쉬 마크가 저장되어 있을 수 있다. 일 실시예에서, DApp 서비스에서 블록 프로듀서 노드 합의 방법은 상기 복수의 블록 프로듀서 노드 각각이 블록 의 헤더에 기록된 블록 지수에 해당하는 블록의 해쉬 값에 해쉬 마크를 적용하여 4byte의 부호 없는 정수 값 (unsigned integer)을 추출하는 단계 및 상기 복수의 블록 프로듀서 노드 각각이 부호 없는 정수 값(unsigned integer)에 모듈로 함수(MOD21)를 적용한 후 얻어지는 결과값 중 하나인 숫자를 다음 프라이머리 블록 프로듀서 노드의 식별자가 될 블록 프로듀서 노드의 식별자로 결정하는 단계를 더 포함할 수 있다."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "전술한 바와 같은 본 발명에 의하면, 합의에 참여하는 블록 프로듀서 노드들 중에서 블록 생성자 노드를 선 정하고, 선정된 노드가 생성한 블록을 모든 블록 프로듀서 노드들이 매우 안전하고 효율적으로 합의하도록, 하드웨어와 소프트웨어가 협력하여 병렬적으로 처리할 수 있는 알고리즘을 제공할 수 있다는 장점이 있다. 또한 본 발명에 의하면, DApp 서비스를 제공하는 DApp들 중에서 코인 보유자들의 투표와 서비스 이용률에 따른 순위에 따라 블록 프로듀서 노드룰 선정함으로써 선정된 블록 프로듀서 노드는 블록 생성에 대한 보상을 받을 수 있다는 장점이 있다. 또한 본 발명에 의하면, 다음 블록 프로듀서 노드로 결정된 블록 프로듀서 노드가 자신이 담당할 블록 생성 구 간에 도달하기 이전에 다음 블록 생성 주기 및 다음 블록 생성 구간을 정의하여 블록의 헤더에 기록하여 부하 밸런싱을 실행할 수 있다는 장점이 있다. 또한 본 발명에 의하면, 소프트웨어에 한정되지 않고 하드웨어와 코디자인(Co-Design)될 때 더욱 효과적일 수 있다는 장점이 있다."}
{"patent_id": "10-2022-0029170", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "전술한 목적, 특징 및 장점은 첨부된 도면을 참조하여 상세하게 후술되며, 이에 따라 본 발명이 속하는 기술분 야에서 통상의 지식을 가진 자가 본 발명의 기술적 사상을 용이하게 실시할 수 있을 것이다. 본 발명을 설명함 에 있어서 본 발명과 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우에는 상세한 설명을 생략한다. 이하, 첨부된 도면을 참조하여 본 발명에 따른 바람직한 실시예를 상세히 설명하기로 한다. 도면에서 동일한 참조부호는 동일 또는 유사한 구성요소를 가리키는 것으로 사용된다. KOK 플랫폼에서 구동될 DApp은 하나의 군을 이루는 서비스 집단으로 볼 수 있다. 하나의 DApp은 일반 인터넷 서 비스에서는 하나의 포털 서비스가 이루는 모습과 유사하다고 할 수 있다. Group Theory에 따른 대칭적 구조의 특성을 기반으로 \"BP\"를 선정하며, 참여하는 대표 노드가 DApp 생태계를 가 꾸며 KOK 플랫폼을 더욱 안전하고 빠른 속도를 보여줄 수 있다. 여기서 말하는 대칭적 구조는 유사한 각각의 DApp 서비스의 구조 내에서 발생하는 트랜잭션 수, 노드 분포도, 시간 복잡도 등을 비교하여 \"구조화\"를 통한 유사성을 발견한다. 이러한 유사성은 하나의 큰 Group으로 묶을 수 있으며, Group 내 유사한 구조를 최적화하여 기존의 블록체인 한 계점을 극복할 수 있다. 우리는 이를 GOS-BP(Group Of Symmetry - 블록체인 Producer)이라 한다. 하나의 DApp 서비스 군은 도 1과 같이 KOK 플랫폼에 BP(Block Producer Node)로 참여하는 대표 노드(Primary Node)가 있고, 이 대표 노드와 연결되어 자체 DApp 서비스 생태계를 이루게 된다. 이 DApp 서비스 생태계는 사 이드 체인과 유사한 점이 있으나 자체 DApp 코인을 갖지 않고 많은 Off-Chain 서비스 및 DB들을 연계하고 융합 하여 그 DApp에 필요한 기능들을 구현하게 된다. 보상 등 토큰 이코노미에 필요한 코인은 KOK 재단으로부터 KOK 를 할당 받아 사용하게 된다. KOK 생태계 안에서는 크기와 성격이 다양한 종류의 DApp들이 둥지를 틀게 된다. 미디어, 게임, 쇼핑 등은 그 규 모가 커 플랫폼 형태의 메가(Mega) DApp으로 구현되고, 그 메가 DApp에 밀착되어 공생하는 작은 규모의 DApp들 도 많을 수 있다. 물론 KOK MainNet에 메가 DApp만 직접 연결되는 것은 아니다. 이렇게 볼 때, KOK 생태계 내에서 DApp들의 종류 는 규모나 크기로 구분하는 것보다, 자체 코인의 유무로 구분하는 것이 기술적으로 이해하기가 더 편하다. KOK 생태계의 기축 코인인 KOK를 통화로 사용하는 DApp을 본원 DApp, 자체 블록체인과 코인을 갖고 사이드체인 형태 로 KOK MainNet과 연동되는 DApp을 사이드체인 DApp이라 한다. 사이드체인 DApp은 자체 블록체인이 있고, 자체 코인도 있다. 자체 코인과 KOK 간에는 고정 또는 가변 교환 환 율을 사용할 수 있고, 자체 코인이 그 DApp 생태계의 보상시스템 과 거버넌스에 맞춤형으로 활용될 수 있다. 이 러한 자체 블록체인이 KOK의 GOS 및 PPBFT기술의 MainNet에 참여하는 KOK 사이드체인이다. KOK MainNet 관점에서 볼 때의 사이드체인 DApp을 담당하는 BP 노드와, 사이드체인 관점에서 볼 때의 이 KOK 게 이트웨이 노드는 사실상 같은 노드이다. 이 노드의 Architecture는 하층부에 Communication Layer가 있고 상층 부에 Service Layer가 있는데, Service Layer에 사이드체인 MainNet의 합의에 관한 로직(모듈)이 자리하고 있 다. 사이드체인 관점에서 KOK향 게이트웨이 노드를 구성할 때 그 노드가 KOK MainNet의 BP역할도 할 수 있는 사 양과 조건을 충족시키도록 설계한다. 본 명세서에서 사용된 용어 중 “블록 프로듀서 노드”는 블록 생성을 위임받아 블록을 생성하며 주요 정책을 결정하는 노드이다. 이러한 블록 프로듀서 노드는 DApp 서비스를 제공하는 DApp들 중에서 코인 보유자들의 투표 와 서비스 이용률에 따른 순위에 따라 선정된다. 본 명세서에서 사용된 용어 중 ”블록 생성 구간”은 블록들이 생성되는 기간을 의미하다. 블록 생성 구간 동안 은 한 개의 초기 블록 생성을 담당하는데 그 노드를 ”프라이머리 블록 프로듀서 노드”라고 한다. 한 블록 생 성 구간 동안 복수의 블록(예를 들어, 24개)의 블록이 생성된다. 이때, 한 구간에 생성될 블록 수는 추후 시뮬 레아션과 테스팅을 통하여 조정될 수 있다. 도 2는 본 발명의 일 실시예에 따른 블록 프로듀서 노드 합의 시스템을 설명하기 위한 도면이다. 도 2를 참조하면, 블록 프로듀서 노드 합의 시스템은 복수의 영역(200_1~200_N) 각각에 동일한 개수로 배치되어 있는 복수의 블록 프로듀서 노드(100_1~100_N)를 포함한다. 복수의 블록 프로듀서 노드(100_1~100_N)는 DApp 서비스를 제공하는 DApp에서 선택되며, 동일한 개수의 블록 프 로듀서 노드를 가지는 복수의 영역을 형성되어 있다. 상기의 복수의 영역 각각에 할당되어 있는 블록 프로듀서노드(100_1~100_N) 각각은 서비스 레이어에 해당하는 상위 계층 및 커뮤니케이션 레이어에 해당하는 하위층을 포함한다. 예를 들어, 복수의 블록 프로듀서 노드(100_1~100_N)의 개수가 21개인 경우 3개의 블록 프로듀서 노드 (100_1~100_N) 각각이 동일한 영역으로 할당되어 3개의 블록 프로듀서 노드(100_1~100_N)를 가지는 7개의 복수 의 영역이 형성되어 있을 수 있다. 이때, 7개의 영역은 글로벌 통신망과 DApp의 분포를 고려하여 메인넷 (MainNet)에 고정된다. 상기의 복수의 영역 각각은 초기 메인넷 생성 시 고유의 영역 식별자(BRI: Block Region Index)가 할당되어 있 을 수 있다. 예를 들어, 7개의 복수의 영역이 존재하는 경우 해당 영역에 고유의 영역 식별자 0부터 6까지가 할 당되어 있다. 또한, 복수의 영역 각각의 블록 프로듀서 노드(100_1~100_N)는 고유의 블록 식별자(BPI: Block Producer Index)가 할당되어 있을 수 있다. 예를 들어, 복수의 블록 프로듀서 노드(100_1~100_N)의 개수가 21개인 경우 각각의 복수의 블록 프로듀서 노드(100_1~100_N) 각각에는 고유의 블록 식별자 0부터 20까지가 할당되어 있다. 이러한 블록 식별자는 인접 영역으로 이어져서 증가한다. 예를 들어, 제1 영역에 영역 식별자 “0”이 할당되어 있고, 해당 영역의 블록 프로듀서 노드(100_1~100_N)에는 블록 식별자 “0”, “7”, ”14”가 할당될 수 있고, 제2 영역에 영역 식별자 ”1”이 할당되어 있고, 해당 영역의 블록 프로듀서 노드(100_1~100_N)에는 블록 식별 자 ”1”, ”8”, ”15”가 할당되어 있을 수 있을 수 있으며 이에 한정되지 않는다. 상기의 복수의 영역 각각에는 동일한 개수의 블록 프로듀서 노드(100_1~100_N)가 할당되어 있으며, 복수의 영역 각각의 블록 프로듀서 노드(100_1~100_N) 중 하나의 블록 프로듀서 노드(100_1~100_N)는 리드 블록 프로듀서 노 드로 결정될 수 있다. 이때, 리드 블록 프로듀서 노드는 프라이머리 블록 프로듀서 노드의 지수값에 특정 수를 더한 후 특정 블록의 해시값의 마지막 4개 바이트 값에 대한 모듈로 함수(MOD21)를 적용하여 얻은 식별자를 가진 블록으로 결정된다. 상기의 프라이머리 블록 프로듀서 노드의 결정 과정은 이하에서 보다 구체적으로 설명하기로 한다. 예를 들어, 프라이머리 블록 프로듀서 노드의 지수값에 1, 2, 3, 4, 5, 6을 더하고, MOD21 함수를 적용하여 얻 은 6개의 블록 식별자가 프라이머리 블록 프로듀서 노드(100_1)의 이웃 블록 프로듀서로서 리드 블록 프로듀서 노드(100_2, 100_5)로 결정되며, 이에 한정되지 않는다. 상기의 리드 블록 프로듀서 노드(100_2, 100_5)는 프라이머리 블록 프로듀서 노드(100_1)로부터 블록을 수신하 면, 자신이 속한 영역의 다른 블록 프로듀서 노드(100_1~100_N)에 상기 블록을 제공하여 상기 블록에 대한 합의 검증을 실행한다. 상기와 같이, 리드 블록 프로듀서 노드(100_2, 100_5)는 자신이 속한 영역의 다른 블록 프로 듀서 노드(100_1~100_N)와 블록에 대한 합의 검증을 실행한 후 합의 검증에 대한 결과를 프라이머리 블록 프로 듀서 노드(100_1)에 제공한다. 프라이머리 블록 프로듀서 노드(100_1)는 현재 블록 생성 구간 동안에 블록을 생성한다. 이때, 현재 블록 생성 구간 동안에 블록을 생성하는 프라이머리 블록 프로듀서 노드(100_1)는 이전 블록 생성 구간 동안에 미리 결정 될 수 있다. 즉, 이전 블록 생성 구간 동안 생성되는 특정 번째(예를 들어, 21번째) 블록의 해시값의 마지막 4개 바이트 값 에 대한 모듈로 함수(MOD 21) 과정을 통해 결정된다. 이때, MOD 21 함수 결과 값은 그 입력이 어떠한 값이든 0 이상 20이하의 정수 결과 값을 출력하는 함수이다. 이 값이 다음 프라이머리 블록 프로듀서 노드(100_1)가 될 블록 프로듀서 노드(100_1~100_N)의 지수값이다. 프라이머리 블록 프로듀서 노드(100_1)는 복수의 영역 각각의 리드 블록 프로듀서 노드(100_2, 100_5)가 자신이 속한 영역의 다른 블록 프로듀서 노드(100_1~100_N)에 상기 블록을 제공하여 상기 블록에 대한 합의 검증을 실 행하도록 하고, 리드 블록 프로듀서 노드(100_2, 100_5)로부터 블록에 대한 합의 검증에 대한 결과를 수신한다. 도 3은 본 발명의 일 실시예에 따른 컨텐츠 큐레이션 및 부하 밸런싱 시스템을 설명하기 위한 도면이다. 도 3을 참조하면, 컨텐츠 큐레이션 및 부하 밸런싱 시스템은 복수의 영역(200_1~200_N) 각각에 동일한 개수로 배치되어 있는 복수의 블록 프로듀서 노드(100_1~100_N)를 포함한다. 복수의 블록 프로듀서 노드(100_1~100_N)는 메인넷이 시작될 때 DApp이 정상적으로 가동되지 않거나 아직 준비 되지 않은 DApp의 경우 덤프 블록 프로듀서 노드(100_1~100_N)로 결정되며, 하위층에 해당하는 커뮤니케이션 레이어만 작동하면서 메인넷에 참여하게 된다. 복수의 블록 프로듀서 노드(100_1~100_N) 각각은 최근 컨펌 블록을 보유하고 있다. 즉, 복수의 블록 프로듀서 노드(100_1~100_N) 각각은 메인넷의 동일 상태 정보를 공유한다. 각각의 복수의 블록 프로듀서 노드 (100_1~100_N)는 최근 컨펌 블록을 대상으로 탈중앙 인공지능(DAI) 코드를 가동시키면 다른 블록 프로듀서 노드 (100_1~100_N)도 동일한 탈중앙 인공지능 코드를 같은 상태에서 작동시키므로 동일한 결과값을 얻게 된다. 이때, 복수의 블록 프로듀서 노드(100_1~100_N) 각각의 결과 값은 이웃 블록 프로듀서 노드(100_1~100_N)와 대 조하지 않아도 된다. 상기의 탈중앙 인공지능(DAI) 코드는 제1 코드(DAI-Consensus) 및 제2 코드(DAI- Application)을 포함한다. 제1 코드는 블록 프로듀서 노드(100_1~100_N)의 하위층에 해당하는 커뮤니케이션 레 이어에서 작동되고, 제2 코드은 블록 프로듀서 노드(100_1~100_N)의 상위층에 해당하는 서비스 레이어에서 작동 된다. 이하에서는, 탈중앙 인공지능(DAI) 코드의 제1 코드의 실행 과정을 설명하기로 한다. 프라이머리 블록 프로듀서 노드(100_1)는 블록 생성 구간에 진입하면, 최초에 생성되는 블록의 헤더에 부가 정 도를 기록하여 블록을 생성한다. 일 실시예에서, 프라이머리 블록 프로듀서 노드(100_1)는 블록의 헤더에 다음 프라이머리 블록 프로듀서 노드 (100_1)의 식별자의 생성에 사용할 블록 지수와 해쉬 마크를 기록한다. 다른 일 실시예에서, 프라이머리 블록 프로듀서 노드(100_1)는 블록의 헤더에 Latency와 합의 미성공 등 현재 네트워크의 상태를 고려하여 차기 블록 생성 주기(t), 다음 블록 생성 구간(T)를 기록한다. 이러한 다음 블록 생성 주기(t) 및 다음 블록 생성 구간(T)은 자신이 담당하는 블록 생성 구간에 진입하기 이전 구간에서 이미 수 행할 수 있다. 복수의 블록 프로듀서 노드(100_1~100_N) 각각의 블록 헤드에는 합의 파라미터가 저장되어 있다. 상기의 합의 파라미터는 현재 프라이머리 블록 프로듀서 노드(100_1)의 식별자(PBI: Primary Block Producer Index), 현재 블록 생성 주기(t)(초 단위, 초기 값 0.5초), 현재 블록 생성 구간(T)(초 단위, 초기 값 12초), 다음 프라이머리 블록 프로듀서 노드(100_1)의 식별자 생성에 사용될 블록 지수(i)(다음 생성 주기 동안 생성될 블록수가 n개의 경우 이 블록 지수는 0보다 크고 n-1보다 작다.), 다음 프라이머리 블록 프로듀서 노드(100_1) 의 식별자의 생성 시 적용된 해쉬 마크(64개의 bit 중 4곳에만 1이 있고 다른 60개 자리에는 0이 있다. 즉, 초 기값 00000000 0000000F) 그 후, 복수의 블록 프로듀서 노드(100_1~100_N) 각각은 블록의 헤더에 기록된 블록 지수(i번째)에 해당하는 블 록을 맞이했을 때 다음 프라이머리 블록 프로듀서 노드(100_1)의 식별자를 결정하기 위해 이하의 과정을 실행한 다. 먼저, 복수의 블록 프로듀서 노드(100_1~100_N) 각각은 블록의 헤더에 기록된 블록 지수(i번째)에 해당하는 블 록의 해쉬 값에 해쉬 마크를 적용하여 4byte의 부호 없는 정수 값(unsigned integer)을 추출한다. 그런 다음, 복수의 블록 프로듀서 노드(100_1~100_N) 각각은 부호 없는 정수 값(unsigned integer)에 모듈로 함 수(MOD21)를 적용한 후 얻어지는 결과값(즉, 0~20) 중 하나인 숫자를 다음 프라이머리 블록 프로듀서 노드 (100_1)의 식별자가 될 블록 프로듀서 노드(100_1~100_N)의 식별자로 결정한다. 이때, 다음 프라이머리 블록 프로듀서 노드(100_1)로 결정된 블록 프로듀서 노드(100_1~100_N)는 자신이 담당할 다음 블록 생성 구간이 도래하기 전이더라도 다음 블록 생성 주기(t) 및 다음 블록 생성 구간(T)을 계산한다. 이하에서는, 탈중앙 인공지능(DAI) 코드의 제2 코드의 실행 과정을 설명하기로 한다. 도 4는 본 발명에 따른 블록 프로듀서 노드 합의 방법의 일 실시예를 설명하기 위한 흐름도이다. 도 4를 참조하면, 블록 프로듀서 노드 합의 시스템은 DApp 서비스를 제공하는 DApp에서 선택된 복수의 블록 프 로듀서 노드 각각을 나누어 동일한 개수의 블록 프로듀서 노드를 가지는 복수의 영역을 형성한다(단계 S410). 이전 블록 생성 구간 동안에 미리 정해진 프라이머리 블록 프로듀서 노드는 현재 블록 생성 구간 동안에 블록을 생성한다(단계 S420) 프라이머리 블록 프로듀서 노드(100_1)는 상기 블록을 이웃 영역들의 리드 블록 프로듀서 노드에 전달한다(단계 S430). 상기 복수의 영역 각각의 리드 블록 프로듀서 노드(100_2, 100_5)는 자신이 속한 영역의 다른 블록 프로듀서 노 드에 상기 블록을 제공하여 상기 블록에 대한 합의 검증을 실행한다(단계 S440). 상기 복수의 영역 각각의 리드 블록 프로듀서 노드(100_2, 100_5)는 합의 검증에 대한 결과를 상기 프라이머리 블록 프로듀서 노드에 제공한다(단계 S450). 도 5 및 도 6은 본 발명에 따른 블록 프로듀서 노드 합의 방법을 설명하기 위한 예시도이다. 도 5 및 도 6을 참조하면, 복수의 블록 프로듀서 노드(100_1~100_N)의 개수가 21개인 경우 3개의 블록 프로듀서 노드(100_1~100_N) 각각이 동일한 영역(Region0 ~ Region6)으로 할당되어 3개의 블록 프로듀서 노드 (100_1~100_N)를 가지는 7개의 복수의 영역(Region0 ~ Region6)이 형성되어 있을 수 있다. 이때, 7개의 영역 (Region0 ~ Region6)은 글로벌 통신망과 DApp의 분포를 고려하여 메인넷(MainNet)에 고정된다. 상기에서 블록 프로듀서 노드(100_1~100_N)의 개수는 예시일 뿐 이에 한정되지 않는다. 상기의 복수의 영역 각각(Region0 ~ Region6)은 초기 메인넷 생성 시 고유의 영역 식별자가 할당되어 있을 수 있다. 예를 들어, 7개의 복수의 영역(Region0 ~ Region6)이 존재하는 경우 해당 영역에 고유의 영역 식별자 0부 터 6까지가 할당되어 있으며, 고유의 영역 식별자는 예시일 뿐 이에 한정되지 않는다. 또한, 복수의 영역(Region0 ~ Region6) 각각의 블록 프로듀서 노드(100_1~100_N)는 고유의 블록 식별자가 할당 되어 있을 수 있다. 예를 들어, 복수의 블록 프로듀서 노드(100_1~100_N)의 개수가 21개인 경우 각각의 복수의 블록 프로듀서 노드(100_1~100_N) 각각에는 고유의 블록 식별자 0부터 20까지가 할당되어 있다. 상기에서, 복수 의 블록 프로듀서 노드(100_1~100_N)의 개수 및 고유의 블록 식별자는 예시일 뿐 이에 한정되지 않는다. 이러한 블록 식별자는 인접 영역으로 이어져서 증가한다. 예를 들어, 제1 영역(Region0)에 영역 식별자 “0“이 할당되어 있고, 해당 영역의 블록 프로듀서 노드(100_1~100_N)에는 블록 식별자 “0“, “7“, “14“가 할당될 수 있고, 제2 영역(Region1)에 영역 식별자 “1“이 할당되어 있고, 해당 영역의 블록 프로듀서 노드 (100_1~100_N)에는 블록 식별자 “1“, “8“, “15“가 할당되어 있을 수 있다. 상기에서, 블록 식별자는 예시 일 뿐 이에 한정되지 않는다. 상기의 복수의 영역 각각에는 동일한 개수의 블록 프로듀서 노드(100_1~100_N)가 할당되어 있으며, 복수의 영역 각각의 블록 프로듀서 노드(100_1~100_N) 중 하나의 블록 프로듀서 노드(100_1~100_N)는 리드 블록 프로듀서 노 드로 결정될 수 있다. 이때, 리드 블록 프로듀서 노드는 프라이머리 블록 프로듀서 노드의 지수값에 특정 수를 더한 후 특정 블록의 해시값의 마지막 4개 바이트 값에 대한 모듈로 함수(MOD21)를 적용하여 얻은 식별자를 가진 블록으로 결정된다. 예를 들어, 프라이머리 블록 프로듀서 노드의 지수값에 1, 2, 3, 4, 5, 6을 더하고, 모듈로 함수(MOD 21)를 적 용하여 얻은 6개의 블록 식별자가 프라이머리 블록 프로듀서 노드(100_1)의 이웃 블록 프로듀서로서 리드 블록 프로듀서 노드(100_2, 100_5)로 결정된다. 상기에서 지수 값은 예시일 뿐 이에 한정되지 않는다. 상기의 프라이머리 블록 프로듀서 노드(100_1)는 이전 블록 생성 구간 동안 생성되는 특정 번째(예를 들어, 21 번째) 블록의 해시값의 마지막 4개 바이트 값에 대한 모듈로 함수(MOD 21) 과정을 통해 결정된다. 이때, 모듈로 함수(MOD 21)의 결과 값은 그 입력이 어떠한 값이든 0이상 20이하의 정수 결과 값을 출력하는 함 수이다. 정수 결과 값이 다음 프라이머리 블록 프로듀서 노드(100_1)가 될 블록 프로듀서 노드(100_1~100_N)의 지수값이다. 한정된 실시예와 도면에 의해 설명되었으나, 본 발명은 상기의 실시예에 한정되는 것은 아니며, 이는 본 발명이 속하는 분야에서 통상의 지식을 가진 자라면 이러한 기재로부터 다양한 수정 및 변형이 가능하다. 따라서, 본 발명 사상은 아래에 기재된 특허청구범위에 의해서만 파악되어야 하고, 이의 균등 또는 등가적 변형 모두는 본 발명 사상의 범주에 속한다고 할 것이다."}
{"patent_id": "10-2022-0029170", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 KOK 플랫폼에 BP(Block Producer Node)를 설명하기 위한 도면이다. 도 2는 본 발명의 일 실시예에 따른 블록 프로듀서 노드 합의 시스템을 설명하기 위한 도면이다. 도 3은 본 발명의 일 실시예에 따른 컨텐츠 큐레이션 및 부하 밸런싱 시스템을 설명하기 위한 도면이다. 도 4는 본 발명에 따른 블록 프로듀서 노드 합의 방법의 일 실시예를 설명하기 위한 흐름도이다. 도 5 및 도 6은 본 발명에 따른 블록 프로듀서 노드 합의 방법을 설명하기 위한 예시도이다."}
