{"patent_id": "10-2018-0170283", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2020-0080635", "출원번호": "10-2018-0170283", "발명의 명칭": "외부 연결용 AI 스피커 장치 및 이와 외부 기기 간의 에코 제거 및 동기화 방법", "출원인": "주식회사 오투오", "발명자": "안성민"}}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "내지 3 중 어느 한 항의 버퍼 메모리 및 클럭 제어기를 포함하는 재생오디오 버퍼부,상기 외부기기에 기인한 멀티미디어 컨텐츠의 재생 오디오를 상기 재생오디오 버퍼부에서 읽어서 오디오 재생용채널을 통해 오디오 코덱부로 보내고 동일한 재생 오디오를 복사하여 에코 캔슬레이션용 채널을 통해 에코 캔슬레이션부로 보내는 제어부,상기 멀티미디어 콘텐츠의 재생 오디오를 디코딩하여 스피커 음성출력부로 보내는 오디오 코덱부,상기 에코 기준 신호를 참조하여 상기 마이크 음성입력부가 수집하는 주변 음성 신호로부터 상기 멀티미디어 콘텐츠의 재생 오디오 에코 성분을 제거 처리하는 에코 캔슬레이션부,상기 재생 오디오 에코 성분이 제거된 주변 음성 신호를 이용하여 사용자 음성을 전처리하고 디지털 외부 접속부를 통해 상기 외부기기로 전달하는 사용자 음성처리부 및상기 외부기기를 통해 획득되는 인공지능 응답 데이터를 음성 대역으로 출력하기 위한 스피커 음성출력부를 포공개특허 10-2020-0080635-3-함하는, 외부 연결용 AI 스피커 장치."}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서,상기 클럭제어기에서의 클럭의 증가율 또는 감소율이 일정 임계율을 넘기게 되면 상기 버퍼메모리에 상기 재생오디오의 재전송을 요청하는 채널을 더 포함하는, 사용자 음성처리용 채널을 더 포함하는, 외부 연결용 AI 스피커 장치와 외부 기기 간 연결 시스템."}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 1 또는 2에 있어서,상기 클럭제어기는 상기 버퍼메모리의 사용량을 식별하고, 상기 사용량이 미리 설정한 제 1 임계치를 상회하면상기 버퍼메모리의 동작 클럭을 증가 제어하고, 상기 사용량이 미리 설정한 제 2 임계치를 하회하면 상기 버퍼메모리의 동작 클럭을 감소 제어하는 것을 특징으로 하는, 외부 연결용 AI 스피커 장치와 외부 기기 간 연결 시스템."}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "청구항 1 내지 3 중 어느 한 항의 외부 연결용 AI 스피커 장치와 외부 기기 간 연결 시스템이 적용될 수 있는상기 외부 연결용 AI 스피커 장치로서,상기 AI 스피커와 관련하여 주변 음성 신호를 수집하여 입력하는 마이크 음성입력부,디지털 인터페이스를 통해 상기 외부기기와 외부 접속하기 위한 디지털 외부접속부,상기 디지털 인터페이스를 통해 상기 외부기기와 연동하여 동작하기 위한 외부기기 연동부,"}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "청구항 1 내지 3 중 어느 한 항의 외부 연결용 AI 스피커 장치와 외부 기기 간 연결 시스템을 통해 상기 외부연결용 AI 스피커 장치와 연결될 수 있는 상기 외부 기기로서,디지털 인터페이스를 통해 상기 AI 스피커 장치와 외부 접속하면 상기 AI 스피커 장치를 USB 오디오 디바이스로설정하고, 멀티미디어 콘텐츠의 재생 오디오를 에코 기준 신호로서 상기 AI 스피커 장치로 USB 오디오에 따라스트리밍 출력하고, 상기 디지털 인터페이스를 통해 상기 AI 스피커 장치로부터 사용자 음성의 전처리 결과를전달받아 외부의 인공지능 서버로 전달하여 인공지능 처리 결과를 전달받고, 상기 인공지능 처리 결과에 따라멀티미디어 컨텐츠를 재생하고, 상기 인공지능 처리 결과를 상기 디지털 인터페이스를 통해 상기 AI 스피커 장치로 전달하는, 외부 기기."}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "청구항 5에 있어서,인터넷을 통해 상기 외부의 인공지능 서버와 연동하여 상기 AI 스피커 장치로부터 사용자 음성의 전처리 결과를전달받으면 상기 외부의 인공지능 서버로 전달하여 인공지능 처리 결과를 전달받고, 인터넷을 통해 외부의 컨텐츠 서버와 연동하여 상기 인공지능 처리 결과에 대응하는 멀티미디어 컨텐츠를 제공받기 위한 외부 서버연동부,상기 디지털 인터페이스를 통해 상기 AI 스피커 장치와 외부 접속하고 상기 외부 접속된 AI 스피커 장치를 인식하면 USB 오디오 디바이스로 설정하기 위한 디지털 외부 접속부,상기 디지털 인터페이스를 통해 상기 AI 스피커 장치와 연동하여 동작하기 위한 AI 스피커 연동부,멀티미디어 콘텐츠의 재생 오디오를 에코 기준 신호로서 상기 AI 스피커 장치로 USB 오디오에 따라 스트리밍 출력하는 재생오디오 제공부 및상기 컨텐츠 서버로부터 제공되는 멀티미디어 컨텐츠를 오디오/비디오 재생 처리하기 위한 컨텐츠 재생 처리부를 포함하는, 외부 기기."}
{"patent_id": "10-2018-0170283", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "청구항 5 또는 6에 있어서,상기 외부 기기는 셋톱박스(SetTop Box)일 수 있는, 외부 기기."}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 외부 연결용 인공지능(AI) 스피커 장치 및 이와 통신 인터페이스에 의해 상기 AI 스피커 장치와 상호 연동될 수 있는 외부 기기 간 연결 시스템에 관한 것으로서, 상기 외부 기기로부터 제공되는 멀티미디어 컨텐츠 의 재생 오디오를 에코 기준 신호로 수신하여 임시 저장하는 버퍼메모리 및 상기 버퍼메모리의 가용률에 반비례 하여 상기 버퍼메모리의 동작 클럭을 제어하는 클럭제어기를 포함하고 상기 클럭제어기는 상기 버퍼메모리의 오 버런 발생시 클럭을 증가시키고, 언더런 발생시 클럭을 감소시킴으로써, 인공지능(AI) 기능이 내장되지 않은 외 부 기기를 AI 스피커와 상호 연동시킴에 있어서 외부 기기와 AI 스피커 간 클럭이 다름으로 인해 발생하는 버퍼 오버런(buffer over run) 또는 버퍼 언더런(buffer under run)을 억제할 수 있다."}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 외부 연결용 AI 스피커 장치 및 이와 외부 기기 간 연결 시스템에 관한 것으로, 더욱 상세하게는 내 장형 인공지능 셋톱박스와 달리 기존의 인공지능(AI) 기능이 구현되지 않은 셋톱박스를 교체 없이 그대로 이용 해 상호 연동하여 동작할 수 있는 AI 스피커 장치 및 이러한 AI 스피커 장치를 이를테면 범용 직렬 버스(USB)와 같은 인터페이스에 의해 셋톱박스와 연결할 수 있는 AI 스피커 장치와 외부 기기 간 연결 시스템(이하, 현재 통 상적으로 불리는 AI 스피커 시스템)에 관한 것이다."}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "음악 감상이나 라디오 청취에 활용되던 스피커가 인간의 학습 능력과 추론 능력, 지각 능력, 자연 언어의 이해 능력 등을 컴퓨터 프로그램으로 실현한 기술인 인공지능(AI, Artificial Intelligence) 기술과 만나 단순하게 소리를 전달하는 음향 기기를 넘어 생각하고 관리하는 스마트 도구로 진화하고 있다. '음성인식', '자연어 처리', '추천' 등 AI 기술을 활용해 단순하게 소리를 전달하는 도구에서 생각하고 관리하는 인공지능 스피커(AI speaker)로 변신 중인 것이다. 이러한 AI 스피커는 인공지능 알고리즘을 이용해 사용자와 음성으로 의사소통을 하기 때문에 이를 활용하면 손 을 이용하지 않고도 음성인식을 통해 간편하게 음악을 재생하거나 통신망에 연결된 기기를 제어하는 식으로 손쉽게 스마트 환경을 구축할 수 있어 이를 적용하려는 시도가 다양하게 있어왔는데, 그러한 시도 중 하나는 AI 스피커 기능을 멀티미디어 컨텐츠 제공 서비스와 결합시키는 것이다. 대표적으로는 가정에서 지상파·케이블· 위성 방송을 수신해 멀티미디어 컨텐츠를 즐기게 하기 위해 보급되는 셋톱박스(STB, SetTop Box)에 AI 스피커 기능을 통합시키는 것이다. 본 발명의 목적을 감안하여 'AI 스피커 시스템'은 문맥에 위배되지 않는 한 셋톱박 스에 AI 스피커 기능을 통합한 시스템을 가리키는 것으로 한다. 셋톱박스에 AI 스피커 기능을 통합함으로써 셋톱박스의 기능(예: 채널 변경, 볼륨 조절)을 음성으로 제어할 수 있을 뿐만 아니라 멀티미디어 컨텐츠에 대해 궁금한 것을 음성으로 문의하는 것도 가능하고 특정 상황에 대한 컨텐츠 추천 등도 셋톱박스로 요청하는 것이 가능하다. AI 스피커 기능이 구현된 셋톱박스 장치는 사용자가 음 성으로 한 제어 명령, 질의 또는 요청에 대응하여 기능 수행 결과 혹은 답변 내용을 스피커 사운드로 출력한다. 도 4와 도 5는 종래기술에서 셋톱박스에 AI 스피커 시스템을 구현하는 두 가지 예를 개념적으로 나타내는 도면 이다. 먼저, 도 4는 셋톱박스에 AI 스피커 시스템을 구현하는 일반적인 방식을 나타낸다. 셋톱박스는 외부의 컨텐 츠 서버로부터 멀티미디어 컨텐츠를 제공받아 재생하며 그에 따른 재생 화면을 디스플레이 장치에 표시 한다. 셋톱박스는 인공지능 기능을 제공하며, 이를 활용하기 위해 사용자는 음성으로 기능 제어 명령을 제 공하거나 질의 문구를 제공하고 셋톱박스는 마이크 모듈을 통해 사용자의 음성을 입력 받아 처리한다. 일반적으로, 인공지능 기능은 컨텐츠 서버 또는 별도의 서버 장치(미도시)에 설치되어 있다. 다음으로, 도 5는 사용자의 음성 입력을 셋톱박스가 리모컨을 통해 입력받아 처리하는 구현예를 나타낸 다. 주변 잡음을 배제하고 사용자의 음성 입력에 대한 인식 성능을 높이기 위해서 마이크 모듈을 리모컨 에 설치하는 것이다. 음성 입력을 일차로 마이크 모듈이 입력 받은 후에 리모컨이 음성 데이터를 셋톱박스로 무선 전송하는 것이다. 이처럼 종래의 AI 스피커 시스템은 셋톱박스 장치에 AI 스피커 기능을 일체로서 구현한 상태로 제조되어야 한다. 셋톱박스의 내부 기능과 AI 스피커 기능이 상호 유기적으로 연결되어 있기 때문에 일체로 구현한 것이다. 또한, 사용자의 음성 입력을 정상적으로 처리하기 위해서도 일체로 구현할 수밖에 없었다. 셋톱박스에 의해 텔 레비전 스피커가 출력하는 멀티미디어 컨텐츠의 재생 사운드가 사용자의 음성 입력과 동일한 주파수 대역을 공 유할 뿐만 아니라 음향학적 특성도 매우 유사하기 때문이다. 이러한 컨텐츠 재생 사운드와 사용자의 음성 입력 을 구분하여 처리하기 위해서 셋톱박스 내부에 AI 기능을 구현하였다. 그러나, 이러한 종래기술의 구현 방식은 고성능 셋톱박스 제품을 구매하거나 고가의 방송 서비스를 가입해야만 인공지능 스피커 서비스를 활용할 수 있는 단점이 있었다. 기존에 설치된 셋톱박스들을 교체해야만 한다는 것은 사용자와 사업자 모두에게 큰 비용부담이 되어 인공지능 스피커 서비스를 보급하는 데에 사실상 가장 큰 장애가 된다. 따라서, 인공지능 기능이 구현되지 않은 기존의 셋톱박스 이용자가 AI 스피커 서비스를 활용할 수 있게 보조함 으로써 상기와 같은 종래기술의 문제점을 해결할 수 있는 기술이 요망된다. 특히, 본 발명에서는 기존의 인공지능 기능이 구현되지 않은 셋톱박스를 AI 스피커와 상호 연동시킴에 있어서, 셋톱박스와 AI 스피커 간 클럭이 달라서 서로 간에 전달된 데이터를 버퍼에 저장했다가 처리하는 과정에서 어느 한 쪽의 속도가 너무 빠르거나 느려 버퍼가 버티지 못하고 처리를 중지하는 버퍼 오버런(buffer over run) 또는 버퍼 언더런(buffer under run)이 발생하게 되고, 이로 인해 일정한 속도로 에코 기준 신호(Echo-reference)를 에코캔슬레이션부에 전달하는데 문제가 생기게 되는 문제점을 해결하기 위한 기술을 개시한다. 선행기술문헌 특허문헌 (특허문헌 0001) 대한민국 등록특허공보 제10-1914583호(등록일자 2018.10.29) (특허문헌 0002) 대한민국 공개특허공보 제2018-0116100호(공개일자 2018.11.16)"}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "발명의 내용"}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "따라서, 본 발명은 상기한 종래 기술의 문제점을 해결하기 위해 이루어진 것으로서, 본 발명의 목적은 내장형 인공지능 셋톱박스와 달리 기존의 인공지능(AI) 기능이 구현되지 않은 셋톱박스를 교체 없이 그대로 이용해 상 호 연동하여 동작할 수 있는 AI 스피커 장치 및 이러한 AI 스피커 장치를 범용 직렬 버스(USB)와 같은 인터페이 스에 의해 셋톱박스와 연결할 수 있는 AI 스피커 장치와 외부 기기 간 연결 시스템을 제공하는데 있다. 본 발명에서 이루고자 하는 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급하지 않은"}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 2, "content": "또 다른 기술적 과제들은 아래의 기재로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하 게 이해될 수 있을 것이다."}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기와 같은 목적을 달성하기 위한 본 발명의 바람직한 실시 예에 따른 일 측면에서, 외부 연결용 AI 스피커 장 치와 통신 인터페이스에 의해 상기 AI 스피커 장치와 상호 연동될 수 있는 외부 기기 간 연결 시스템은 상기 외 부 기기로부터 제공되는 멀티미디어 컨텐츠의 재생 오디오를 에코 기준 신호로 수신하여 임시 저장하는 버퍼메 모리 및 상기 버퍼메모리의 가용률에 반비례하여 상기 버퍼메모리의 동작 클럭을 제어하는 클럭제어기를 포함하 고 상기 클럭제어기는 상기 버퍼메모리의 오버런 발생시 클럭을 증가시키고, 언더런 발생시 클럭을 감소시켜 상 기 재생 오디오의 유실을 방지한다. 더 바람직하게는, 상기 클럭제어기는 상기 버퍼메모리의 사용량을 식별하고, 상기 사용량이 미리 설정한 제 1 임계치를 상회하면 상기 버퍼메모리의 동작 클럭을 증가 제어하고, 상기 사용량이 미리 설정한 제 2 임계치를 하회하면 상기 버퍼메모리의 동작 클럭을 감소 제어하는 것을 특징으로 한다. 다른 측면에서, 상기한 외부 연결용 AI 스피커 장치와 외부 기기 간 연결 시스템이 적용될 수 있는 상기 외부 연결용 AI 스피커 장치는 상기 AI 스피커와 관련하여 주변 음성 신호를 수집하여 입력하는 마이크 음성입력부, 디지털 인터페이스를 통해 상기 외부기기와 외부 접속하기 위한 디지털 외부접속부, 상기 디지털 인터페이스를 통해 상기 외부기기와 연동하여 동작하기 위한 외부기기 연동부, 청구항 1 내지 3 중 어느 한 항의 버퍼 메모리 및 클럭 제어기를 포함하는 재생오디오 버퍼부, 상기 외부기기에 기인한 멀티미디어 컨텐츠의 재생 오디오를 상 기 재생오디오 버퍼부에서 읽어서 오디오 재생용 채널을 통해 오디오 코덱부로 보내고 동일한 재생 오디오를 복 사하여 에코 캔슬레이션용 채널을 통해 에코 캔슬레이션부로 보내는 제어부, 상기 멀티미디어 콘텐츠의 재생 오 디오를 디코딩하여 스피커 음성출력부로 보내는 오디오 코덱부, 상기 에코 기준 신호를 참조하여 상기 마이크 음성입력부가 수집하는 주변 음성 신호로부터 상기 멀티미디어 콘텐츠의 재생 오디오 에코 성분을 제거 처리하 는 에코 캔슬레이션부, 상기 재생 오디오 에코 성분이 제거된 주변 음성 신호를 이용하여 사용자 음성을 전처리 하고 디지털 외부 접속부를 통해 상기 외부기기로 전달하는 사용자 음성처리부 및 상기 외부기기를 통해 획득되 는 인공지능 응답 데이터를 음성 대역으로 출력하기 위한 스피커 음성출력부를 포함한다. 또 다른 측면에서, 외부 연결용 AI 스피커 장치와 외부 기기 간 연결 시스템을 통해 상기 외부 연결용 AI 스피 커 장치와 연결될 수 있는 상기 외부 기기는 디지털 인터페이스를 통해 상기 AI 스피커 장치와 외부 접속하면 상기 AI 스피커 장치를 USB 오디오 디바이스로 설정하고, 멀티미이어 콘텐츠의 재생 오디오를 에코 기준 신호로 서 상기 AI 스피커 장치로 USB 오디오에 따라 스트리밍 출력하고, 상기 디지털 인터페이스를 통해 상기 AI 스피 커 장치로부터 사용자 음성의 전처리 결과를 전달받아 외부의 인공지능 서버로 전달하여 인공지능 처리 결과를 전달받고, 상기 인공지능 처리 결과에 따라 멀티미디어 컨텐츠를 재생하고, 상기 인공지능 처리 결과를 상기 디 지털 인터페이스를 통해 상기 AI 스피커 장치로 전달한다. 바람직하게는, 인터넷을 통해 상기 외부의 인공지능 서버와 연동하여 상기 AI 스피커 장치로부터 사용자 음성의 전처리 결과를 전달받으면 상기 외부의 인공지능 서버로 전달하여 인공지능 처리 결과를 전달받고, 인터넷을 통 해 외부의 컨텐츠 서버와 연동하여 상기 인공지능 처리 결과에 대응하는 멀티미디어 컨텐츠를 제공받기 위한 외 부 서버 연동부, 상기 디지털 인터페이스를 통해 상기 AI 스피커 장치와 외부 접속하고 상기 외부 접속된 AI 스 피커 장치를 인식하면 USB 오디오 디바이스로 설정하기 위한 디지털 외부 접속부, 상기 디지털 인터페이스를 통 해 상기 AI 스피커 장치와 연동하여 동작하기 위한 AI 스피커 연동부, 멀티미디어 콘텐츠의 재생 오디오를 에코 기준 신호로서 상기 AI 스피커 장치로 USB 오디오에 따라 스트리밍 출력하는 재생오디오 제공부 및 상기 컨텐츠 서버로부터 제공되는 멀티미디어 컨텐츠를 오디오/비디오 재생 처리하기 위한 컨텐츠 재생 처리부를 포함한다. 더 바람직하게는, 상기 외부 기기는 셋톱박스(SetTop Box)일 수 있다."}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "상술한 바와 같이, 본 발명에 의한 외부 연결용 AI 스피커 장치 및 이와 외부 기기 간 연결 시스템은 다음과 같 은 효과를 제공한다. 본 발명에 따르면 인공지능(AI) 기능이 내장되지 않은 기존에 출시된 일반적인 셋톱박스에 대하여 네트워크를 통한 소프트웨어 업그레이드를 수행하고 본 발명에 따른 AI 스피커를 USB로 외부 연결하는 것만으로 저렴하고 간편하게 AI 스피커 시스템을 구축할 수 있는 장점이 있다. 그리고, 본 발명에 따르면 인공지능(AI) 기능이 내장되지 않은 상태에서 일반 가정에 보급되어 있는 셋톱박스에 본 발명에 따른 AI 스피커를 외부에 추가 연결함으로써 멀티미디어 컨텐츠 제공 기능과 인공지능 스피커 기능이 상호 연동하는 고성능의 AI 스피커 시스템을 구축할 수 있는 장점이 있다. 특히, 본 발명에 따르면 인공지능(AI) 기능이 내장되지 않은 셋톱박스를 AI 스피커와 상호 연동시킴에 있어서, 셋톱박스와 AI 스피커 간 데이터 통신시 클럭이 다름으로 인해 서로 간에 전달된 데이터를 버퍼에 저장했다가 처리하는 과정 중에 발생하는 버퍼 오버런(buffer over run) 또는 버퍼 언더런(buffer under run)을 억제할 수 있다."}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 발명은 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있으며, 단지 실시예들은 본 발명의 개시가 완전하도록 하고, 본 발명이 속하는"}
{"patent_id": "10-2018-0170283", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "기술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명은 청구항의 범주에 의해 정의될 뿐이다. 명세서 전체에 걸쳐 동일 참조 부호는 동일 구성요소를 지칭한다. 도면에 표시되고 아래에 설명되는 기능 블록들은 가능한 구현의 예들일 뿐이다. 다른 구현들에서는 상세한 설명 의 사상 및 범위를 벗어나지 않는 범위에서 다른 기능 블록들이 사용될 수 있다. 또한, 본 발명의 하나 이상의 기능 블록이 개별 블록들로 표시되지만, 본 발명의 기능 블록들 중 하나 이상은 동일 기능을 실행하는 다양한 하드웨어 및 소프트웨어 구성들의 조합일 수 있다. 또한, 어떤 구성요소들을 포함한다는 표현은 개방형의 표현으로서 해당 구성요소들이 존재하는 것을 단순히 지 칭할 뿐이며, 추가적인 구성요소들을 배제하는 것으로 이해되어서는 안 된다. 또한, 어떤 구성요소가 다른 구성요소에 연결되어 있다거나 접속되어 있다고 언급될 때에는, 그 다른 구성요소 에 직접적으로 연결 또는 접속되어 있을 수도 있지만, 중간에 다른 구성요소가 존재할 수도 있다고 이해되어야 한다. 도 1은 본 발명의 외부 연결용 AI 스피커 장치 및 이와 외부 기기 간 연결 시스템이 적용되는 네트워크 환경을 나타내는 전체 구성도이다. 이하에서 제시된 본 발명의 외부 연결용 AI 스피커 장치 및 이와 외부 기기 간 연결 시스템(이하, AI 스피커 시 스템)은 도 1에 도시된 바와 같이 가정에서 전화선(또는 전용선)에 연결되어 지상파·케이블·위성방송을 수신 해 TV를 시청하게 하기 위한 기존의 인공지능(AI) 기능이 구현되지 않은 셋톱박스 외부에 범용 직렬 버스(USB)와 같은 인터페이스를 통해 AI 스피커에 연결하여 셋톱박스와 AI 스피커를 상호 연동시킬 수 있는 네트워크를 지원하는 경우를 바람직한 실시예로서 제안한다. 설명의 편의를 위해, 구체적인 실시예에서 AI 스피커가 연결되는 외부 기기가 셋톱박스인 것으로 특 정하여 설명하지만, 본 명세서에서 셋톱박스는 다양한 전송매체를 통해 멀티미디어 컨텐츠를 제공 받아 디 스플레이하는 장치를 의미한다. 전송매체로는 지상파, 위성, 케이블, 인터넷 등을 포함한다. 또한 일반적으로 셋톱박스라 불리는 제품에 한정되지 않으며 TV, 모니터, 스피커등 본 기술을 사용할 수 있는 모든 오디오, 비디 오, 디스플레이 장치등을 널리 포함할 수 있다. 또한 설명의 편의를 위해, 셋톱박스와 AI 스피커는 1991년 리누스 토르발즈가 버전 0.02를 공개한 유닉스 기반 개인 컴퓨터용 공개 운영 체제인 LinuxOS 환경에서 실행되는 것으로 가정하나, 이에 제한되지는 않는다. 구체적으로, 셋톱박스는 외부의 컨텐츠 서버로부터 멀티미디어 컨텐츠를 제공받아 재생하며 그에 따른 재생 화면을 디스플레이 장치에 표시한다. 또한, AI 스피커는 사용자의 음성을 전처리하여 그 결과를 셋톱박스로 전달하며, 그에 따라 외부의 인공지능 서버와 연동하여 인공지능 기능이 이루어지도록 보조한다. AI 스피커는 셋톱박스와 연 동하여 동작함으로써 멀티미디어 컨텐츠 제공 기능과 인공지능 처리 기능을 연동시킨다. 예를 들어, AI 스피커가 사용자의 음성을 인식한 결과에 대응하여 셋톱박스가 각종 기능제어를 수행 한다. 또한, 예를 들어, 사용자가 AI 스피커와 음성 인터랙션을 수행하여 특정의 영화를 추천받은 후에 AI 스피커에 대하여 그 컨텐츠에 대한 즉시 재생을 요구하였다면, 그에 대응하여 셋톱박스는 해당 영화 컨텐츠를 컨텐츠 서버로부터 제공받아 재생한다. 사용자와 음성(음성) 기반으로 인터랙션하기 위하여 AI 스 피커는 마이크 모듈(미도시)과 스피커 모듈을 구비한다. 이때, 인공지능 서버는 구글(Google Assistant), 아마존(Amazon Alexa) 등에서 제공하는 인공지능 서버 장 치를 나타낼 수 있다. AI 스피커는 자체적으로 인공지능 기능을 완비하도록 구현될 수도 있지만, 인터넷을 통해 외부의 인공지능 서버와 연동하도록 구성하는 것이 더 바람직하다. 도 1에서 셋톱박스는 하드웨어 측면에서 볼 때 종래 보급된 디지털 셋톱박스로도 충분하므로, 이와 같은 종래 보급된 셋톱박스에 펌웨어 업그레이드를 수행함으로써 본 발명을 구현할 수도 있다. 도 2는 본 발명의 AI 스피커 장치와 외부 기기 간 연결 시스템이 설치될 수 있는 AI 스피커 장치가 셋톱박스와 연결된 개략적인 구성을 나타낸 기능 블록도이다. 도 2를 참조하면, 본 발명에서 셋톱박스는 외부 서버 연동부, 디지털 외부 접속부, AI 스피커 연동부, 재생오디오 제공부, 컨텐츠 재생 처리부를 포함하여 구성된다. 또한, 본 발명에서 AI 스피커는 마이크 음성입력부, 디지털 외부 접속부, 셋톱박스 연동부, 재생오디오 버퍼부 , 제어부, 오디오 재생용 채널, 오디오 코덱부, 에코 캔슬레이션용 채널, 에코 캔슬 레이션부, 사용자 음성처리용 채널, 스피커 음성출력부를 포함하여 구성된다. 먼저, 본 발명에서 셋톱박스를 구성하는 각 요소에 대해 살펴본다. 본 발명에서 셋톱박스는 디지털 인터페이스를 통해 AI 스피커 장치와 외부 접속하면 AI 스피커 장치 를 USB 오디오 디바이스로 설정하고, 멀티미디어 컨텐츠의 재생 오디오를 에코 기준 신호로서 AI 스피커 장치로 USB 오디오에 따라 스트리밍 출력하고, 디지털 인터페이스를 통해 AI 스피커 장치로부터 사용 자 음성의 전처리 결과를 전달받아 외부의 인공지능 서버로 전달하여 인공지능 처리 결과를 전달받고, 인공 지능 처리 결과에 따라 멀티미디어 컨텐츠를 재생하고, 인공지능 처리 결과를 디지털 인터페이스를 통해 AI 스 피커 장치로 전달하는 기능을 수행한다. 이를 위해, 외부 서버 연동부는 인터넷을 통해 외부의 인공지능 서버와 연동하여 AI 스피커 장치(20 0)로부터 사용자 음성의 전처리 결과를 전달받으면 외부의 인공지능 서버로 전달하여 인공지능 처리 결과를 전달받고, 인터넷을 통해 외부의 컨텐츠 서버와 연동하여 인공지능 처리 결과에 대응하는 멀티미디어 컨텐 츠를 제공받는다. 디지털 외부 접속부는 디지털 인터페이스를 통해 AI 스피커 장치와 외부 접속하고 그 외부 접속된 AI 스피커 장치를 인식하면 USB 오디오 디바이스로 설정한다. AI 스피커 연동부는 디지털 인터페이스를 통해 AI 스피커 장치와 연동하여 동작한다. 재생오디오 제공부는 멀티미디어 컨텐츠의 재생 오디오를 에코 기준 신호로서 AI 스피커 장치로 USB 오디오에 따라 스트리밍 출력한다. 셋톱박스와 AI 스피커 간의 USB 통신은 USB 표준 규격 중 USB Audio Device Class를 사용하여 AI 스피커가 오디오 장치가 되도록 구성하는 것이 바람직하다. 이때, 오디오 데이터를 주고 받는 기능은 ALSA(Advanced Linux Sound Architecture)의 라이브러리 중에서 aPlay, aRecord 함수를 활용하여 구현할 수 있다. 재생오디오 제공부는 AI 스피커 장치를 USB 오디오 장치로 인식한다. 컨텐츠 재생 처리부는 컨텐츠 서버로부터 제공되는 멀티미디어 컨텐츠를 오디오/비디오 재생 처리한다. 다음으로, 본 발명에서 셋톱박스에 대해 디지털 인터페이스를 통해 외부 연결되어 상호 연동을 통해 AI 스 피커 시스템을 제공하는 AI 스피커를 구성하는 각 요소에 대해 살펴본다. 먼저, 마이크 음성입력부는 AI 스피커와 관련하여 주변 음성 신호를 수집하여 입력한다. 디지털 외부 접속부는 디지털 인터페이스를 통해 셋톱박스와 외부 접속하는 경로를 제공한다. 셋톱박스 연동부는 디지털 인터페이스를 통해 셋톱박스와 연동하여 동작하도록 제어한다. 재생오디오 버퍼부는 셋톱박스로부터 제공되는 멀티미디어 컨텐츠의 재생 오디오를 에코 기준 신호로 수신하여 임시 저장한다. 도 2를 참조하면 재생오디오 버퍼부는 버퍼메모리와 클럭제어기를 구 비하는데, 이에 대해서는 도 3을 참조하여 후술한다. 제어부는 디지털 외부 접속부를 통해 인입되는 멀티미디어 컨텐츠의 재생 오디오를 재생오디오 버퍼 부에서 읽어서 오디오 재생용 채널을 통해 오디오 코덱부로 보내고 동일한 재생 오디오를 복사 하여 에코 캔슬레이션용 채널로 보낸다. 오디오 재생용 채널은 제어부로부터 수신된 멀티미디어 컨텐츠의 재생 오디오를 오디오 코덱부 로 전송하고 오디오 코덱부는 수신한 재생 오디오를 디코딩하여 스피커 음성출력부로 보낸다. 에코 캔슬레이션용 채널은 제어부로부터 수신된 멀티미디어 컨텐츠의 재생 오디오를 에코 캔슬레이션 부로 전송하고 에코 캔슬레이션부는 수신한 재생 오디오를 에코 기준 신호로 참조하여 마이크 음성 입력부가 수집하는 주변 음성 신호로부터 셋톱박스에 기인한 멀티미디어 컨텐츠의 재생 오디오 에코 성분을 제거 처리하고 에코 성분이 제거된 음성 신호를 사용자 음성 처리용 채널로 보낸다. 일반적으로 셋톱박스 주변은 컨텐츠 재생 소리로 인하여 매우 시끄러운데, 본 발명은 에코 캔슬레이션을 수행함으로써 주변의 시끄러움에도 불구하고 사용자의 음성을 정확하게 인식할 수 있도록 해주어 원거리 음성 제어(far field voice recognition & function control)를 제공한다. 일반적으로 동일 제품, 동일 회로에서 에 코 캔슬레이션을 구현하는 것은 기술적 난이도가 높지 않으며, 그에 따라 도 4나 도 5와 같은 종래기술에서도 일반적으로 적용되어 있다. 그러나, 별도의 제품, 즉 셋톱박스와 AI 스피커로 분리되어 서로 별개의 회로에서 에코 캔슬레이션을 구현하는 것을 새로운 기술이다. 본 발명에서의 에코 캔슬레이션에 대해서는 도 3 을 참조하여 후술한다. 사용자 음성 처리용 채널은 재생 오디오 에코 성분이 제거된 주변 음성 신호를 이용하여 사용자 음성을 전 처리하고 제어부로 전송하여 제어부가 이를 디지털 외부 접속부를 통해 셋톱박스로 그리고 인공지능 서버로 전달하게 한다. 스피커 음성출력부는 셋톱박스를 통해 획득되는 인공지능 응답 데이터를 내장 또는 외장 스피커를 통 해 출력한다. 디스플레이 장치가 꺼져있어 그와 연결된 스피커 장치를 활용할 수 없는 경우에도 스피커 음 성출력부가 제공하는 자체 스피커를 통해 인공지능 처리 결과를 제공할 수 있다. 도 3은 본 발명의 바람직한 실시 예에 따른 AI 스피커 장치와 외부 기기 간 연결 시스템에서 AI 스피커 장치와 외부 기기 간에 음성인식을 처리하는 개략적인 구성을 나타낸 기능 블록도이다. 이때, 도 3에는 본 발명에서 AI 스피커에서의 음성인식 성능을 향상시키기 위해 수행하는 에코 캔슬레이션 처리에서 AI 스피커가 수 행하는 버퍼 제어 동작이 개념적으로 도시되어 있다. 도 3을 참조하면, AI 스피커는 마이크 음성입력부를 통해 주변 음성 신호를 수집하는데, 이 중에는 셋톱박스에서 멀티미디어 컨텐츠를 재생함에 따른 재생 오디오 성분이 크게 반영되어 있다. 에코 캔슬레이션부는 이처럼 마이크 음성입력부가 수집 입력하는 주변 사운드 신호로부터 재생 오디오 에코 성분을 제거하려고 한다. 이를 위해, 셋톱박스의 재생오디오 제공부는 멀티미디어 컨텐츠의 재생 오디오를 에코 기준 신호로서 AI 스피커 장치로 USB 오디오에 따라 스트리밍 출력한다. 이렇게 제공되는 에코 기준 신호(즉, 셋톱박스 에서의 멀티미디어 컨텐츠의 재생 오디오)는 AI 스피커의 재생오디오 버퍼부에서 버퍼메모리 에 임시 저장되며, 적당한 타이밍에서 에코 캔슬레이션부로 전달되어 사운드 처리에 사용된다. 특히, 이렇게 셋톱박스의 재생오디오 제공부로부터 출력되는 멀티미디어 컨텐츠의 재생 오디오를 버 퍼메모리에 임시 저장했다가 적당한 타이밍에 에코 기준 신호로서 AI 스피커 장치의 에코 캔슬레이션 부로 전달하여 사운드 처리에 사용할 때, 셋톱박스와 AI 스피커 간 클럭이 서로 다름으로 인해 한 쪽의 속도가 너무 빠르거나 느려 버퍼가 버티지 못하고 처리를 중지하는 버퍼 오버런(buffer over run) 또는 버퍼 언더런(buffer under run)이 발생하게 되고, 이로 인해 일정한 속도로 에코 기준 신호를 전달하는데 문제 가 생기게 될 수 있다. 이에, 클럭제어기는 재생오디오 버퍼부의 상태를 확인하여 버퍼메모리의 동작 클럭을 가변적으 로 제어하는데, 본 발명에서는 버퍼메모리를 모니터링하여 버퍼메모리의 가용률에 반비례하여 동작 클럭을 제어한다. 즉, 클럭제어기는 버퍼메모리의 사용량을 식별하고, 사용량이 미리 설정한 제 1 임 계치를 상회하면 버퍼메모리의 동작 클럭을 증가 제어하고, 사용량이 미리 설정한 제 2 임계치를 하회하면 버퍼메모리의 동작 클럭을 감소 제어한다. 개념적으로는, 버퍼메모리의 사용량이 임계치보다 많으면 버퍼메모리의 가용률이 낮아지므로 동작 클 럭을 증가시켜 에코 기준 신호의 데이터를 좀 더 빠르게 에코 캔슬레이션부로 전달하고, 반대로 버퍼메모 리의 사용량이 임계치보다 적으면 버퍼메모리의 가용률이 높아지므로 동작 클럭을 감소시켜 에코 기 준 신호의 데이터를 좀 더 천천히 에코 캔슬레이션부로 전달하여 버퍼메모리의 오버런 또는 언더런을 방지함으로써 AI 스피커 장치로 전송되어야 할 재생 오디오의 데이터 유실을 방지하는 것이다. 예를 들어, 재생오디오 버퍼부의 전체 크기를 100이라고 할 때 오버런과 언더런의 기준을 미리 설정한 제 1 임계치, 이를테면, 각각 사용량이 80% 이상일 경우 오버런 그리고 미리 설정한 제 2 임계치, 이를테면 20% 이 하일 경우 언더런이라고 하고, 버퍼메모리의 현재의 동작 클럭이 100 KHz라고 할 때 오버런 발생시 소정의 제 1 속도만큼, 이를테면 + 0.2%(즉, 100.2KHz)로 그리고 언더런 발생 시 소정의 제2 속도만큼, 이를테면 - 0.2%(즉, 99.8KHz)로, 동작 클럭을 조정함으로써 AI 스피커 장치의 에코 캔슬레이션부로 전달되는 멀 티미디어 컨텐츠의 재생 오디오의 전송 속도를 좀 더 빠르게 그리고 좀 더 천천히 조정함으로써, 재생오디오 버 퍼부의 오버런 또는 언더런을 방지하여 AI 스피커 장치로 전송되어야 할 재생 오디오의 데이터 유실 을 방지할 수 있다. 에코 캔슬레이션부는 주변 사운드와 에코 기준 신호 간의 시간 편차가 일정 임계시간(예: 수백 밀리초)을 넘기게 되면 캔슬레이션 효율이 급격하게 떨어지는 특성을 보인다. USB 통신이라는 저신뢰 통신매체를 활용하여 시간 편차를 일정하게 제어하기 위해서 오디오 데이터 전송속도의 항상성이 담보되고 기기 간 동기화를 위하여 버퍼 클럭을 동적으로 제어한다. 이를 위해, 사용자 음성처리용 채널은 주변 사운드와 에코 기준 신호 간의 시간 편차가 일정 임계시간(예: 수백 밀리초)을 넘는지, 즉 클럭제어기에서 클럭의 증가율 또는 감소율이 일정 임계율을 넘는지를 모니터 링하고 그렇다면 에코 캔슬레이션부로부터 수신된 주변 음성 신호를 이용하는 것이 아니라 제어부에 버퍼메모리로부터 멀티미디어 컨텐츠의 재생 오디오를 다시 보낼 것을 요청한다. 이상에서 구체적인 실시예를 들어 본 발명을 상세하게 설명하였으나, 본 발명은 반드시 이러한 실시예로 국한되 는 것은 아니고 본 발명의 기술사상을 벗어나지 않는 범위 내에서 다양하게 변형실시될 수 있다."}
{"patent_id": "10-2018-0170283", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 외부 연결용 AI 스피커 장치 및 이와 외부 기기 간 연결 시스템이 적용되는 네트워크 환경을 나타내는 전체 구성도이다. 도 2는 본 발명의 AI 스피커 장치와 외부 기기 간 연결 시스템이 설치될 수 있는 AI 스피커 장치가 셋톱박스와 연결된 개략적인 구성을 나타낸 기능 블록도이다. 도 3은 본 발명의 바람직한 실시 예에 따른 AI 스피커 장치와 외부 기기 간 연결 시스템에서 AI 스피커 장치와 외부 기기 간에 음성인식을 처리하는 개략적인 구성을 나타낸 기능 블록도이다. 도 4는 종래기술에서의 AI 스피커 시스템의 일례를 나타내는 도면이다. 도 5는 종래기술에서의 AI 스피커 시스템의 다른 예를 나타내는 도면이다."}
