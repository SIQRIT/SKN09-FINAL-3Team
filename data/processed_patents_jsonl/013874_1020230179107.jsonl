{"patent_id": "10-2023-0179107", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0092601", "출원번호": "10-2023-0179107", "발명의 명칭": "모드 변환 가능한 온칩 메모리 장치", "출원인": "한국전자통신연구원", "발명자": "김현미"}}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "멀티 뱅크로 구성되는 복수의 메모리 블록들;코어로부터의 메모리 액세스 요청에 포함된 모드 정보에 따라 캐시 모드 또는 스크래치패드 모드로 동작하여,상기 메모리 블록들에 대한 읽기 또는 쓰기 처리를 수행하는 메모리 컨트롤러; 및상기 모드 정보에 따라 캐시 모드 또는 스크래치패드 모드로 동작하여, 상기 메모리 컨트롤러와 코어를 연결하고, 각각의 메모리 뱅크로 상기 메모리 액세스 요청을 분배하는 아비터를 포함하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 아비터는, 각각의 코어마다 모든 메모리 뱅크로의 연결이 이루어지도록 하는 연결라인을 구비하되, 상기캐시 모드로 동작하는 경우 상기 연결라인을 이용하여 풀 크로스바(full crossbar) 구성으로 동작하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 아비터는, 상기 스크래치패드 모드로 동작하는 경우 상기 연결라인 중 일부를 이용하여 각각의 코어가 각각의 메모리 뱅크와 일대일 대응이 되도록 바(bar) 구성으로 동작하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서,상기 메모리 컨트롤러는 각각의 메모리 뱅크마다 하나씩 구비되는 것을 특징으로 하는 모드 변환 가능한 온칩메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 메모리 컨트롤러는, 상기 캐시 모드로 동작하는 경우 태그 메모리 비교를 통해 캐시 히트(hit) 또는 미스(miss)를 판단하여 상기 메모리 액세스 요청을 처리하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제4항에 있어서,상기 메모리 컨트롤러는, 상기 스크래치패드 모드로 동작하는 경우, 오프칩 메모리와 온칩 메모리 사이의 데이터 전송을 수행하는 EMA(External Memory Address) 제어기 및 상기 온칩 메모리와 상기 코어 사이의 데이터 전공개특허 10-2024-0092601-3-송을 수행하는 IMA(Internal Memory Address) 제어기를 포함하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 메모리 컨트롤러는, 상기 온칩 메모리에 대한 주소 생성 시, 각각의 메모리 뱅크별로 정의된 전용 메모리주소값을 기반으로 주소를 생성하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 캐시 모드는 상기 코어의 CPU 기반 동작에 사용되고, 상기 스크래치패드 모드는 상기 코어의 NPU 기반 동작에 사용되는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항에 있어서,상기 캐시 모드인 경우, 상기 메모리 액세스 요청은, 주소값으로 모드 정보, 태그 정보, 뱅크 인덱스, 블록 인덱스 및 오프셋값을 포함하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항에 있어서,상기 스크래치패드 모드인 경우, 상기 메모리 액세스 요청은, 주소값으로 모드 정보 및 시작 어드레스를 포함하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "멀티 뱅크로 구성되는 복수의 메모리 블록들;상기 메모리 블록들에 대한 읽기 또는 쓰기 처리를 수행하는 복수의 메모리 컨트롤러로서, 상기 메모리 컨트롤러는 각각의 메모리 뱅크마다 하나씩 구비되는, 메모리 컨트롤러; 및각각의 코어마다 모든 메모리 뱅크로의 연결이 이루어지도록 하는 연결라인을 구비하고, 상기 코어로부터의 메모리 액세스 요청에 포함된 모드 정보에 따라 캐시 모드 또는 스크래치패드 모드로 동작하여, 상기 각각의 메모리 뱅크로 상기 메모리 액세스 요청을 분배하는 아비터를 포함하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 아비터는, 상기 캐시 모드로 동작하는 경우 상기 연결라인을 이용하여 풀 크로스바(full crossbar) 구성으로 동작하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "공개특허 10-2024-0092601-4-제12항에 있어서,상기 캐시 모드인 경우, 상기 메모리 액세스 요청은, 주소값으로 모드 정보, 태그 정보, 뱅크 인덱스, 블록 인덱스 및 오프셋값을 포함하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제13항에 있어서,상기 메모리 컨트롤러는, 상기 캐시 모드로 동작하는 경우 태그 메모리 비교를 통해 캐시 히트(hit) 또는 미스(miss)를 판단하여 상기 메모리 액세스 요청을 처리하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제11항에 있어서,상기 아비터는, 상기 스크래치패드 모드로 동작하는 경우 상기 연결라인 중 일부를 이용하여 각각의 코어가 각각의 메모리 뱅크와 일대일 대응이 되도록 바(bar) 구성으로 동작하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제15항에 있어서,상기 스크래치패드 모드인 경우, 상기 메모리 액세스 요청은, 주소값으로 모드 정보 및 시작 어드레스를 포함하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제16항에 있어서,상기 메모리 컨트롤러는, 상기 스크래치패드 모드로 동작하는 경우, 각각의 메모리 뱅크별로 정의된 전용 메모리 주소값을 기반으로 주소를 생성하는 것을 특징으로 하는 모드 변환 가능한 온칩 메모리 장치."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 모드 변환 가능한 온칩 메모리 장치에 관한 것으로, 멀티 뱅크로 구성되는 복수의 메모리 블록들, 코 어로부터의 메모리 액세스 요청에 포함된 모드 정보에 따라 캐시 모드 또는 스크래치패드 모드로 동작하여, 상기 메모리 블록들에 대한 읽기 또는 쓰기 처리를 수행하는 메모리 컨트롤러 및 상기 모드 정보에 따라 캐시 모드 또 는 스크래치패드 모드로 동작하여, 상기 메모리 컨트롤러와 코어를 연결하고, 각각의 메모리 뱅크로 상기 메모리 액세스 요청을 분배하는 아비터를 포함하는 것을 특징으로 한다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 모드 변환 가능한 온칩 메모리 장치에 관한 것으로, 보다 상세하게는 인공지능 알고리즘 연산을 위한 고병렬성 연산 처리기를 위한 메모리 구조에 관한 것이다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "인공지능 알고리즘과 응용의 발전에 따라 전용 하드웨어에 대한 필요성이 요구되고 있으며, CPU 기반으로 인공 지능 알고리즘을 실행하는 경우 다양한 연산에 대한 지원이 가능하지만 그 속도 및 성능에서 비효율성을 갖는다. 따라서 인공지능 알고리즘은 고병렬성을 지원하는 GPU 기반으로 실행되도록 발전해왔다. 그러나, GPU 또한 인공지능 알고리즘을 위한 전용 처리기로써 개발된 것이 아니므로, 인공지능 알고리즘에 보다 적합한 고효율 저전력 전용 하드웨어에 대한 요구가 점차 늘어나고 있다. 이에 따라 인공지능 전용 하드웨어(NPU, Neural Network Processing Unit)에 대한 연구 및 개발이 지속되고 있 다.그런데, 인공지능 알고리즘의 연구개발 속도와 필요한 연산들의 종류가 늘어갈수록 고정된 기능만을 갖는 NPU는 그 한계가 있기 때문에 보편성(generality)을 갖는 NPU 구조의 개발이 매우 중요하다. 이를 위해, 고병렬성 뿐 만 아니라, 인공지능 분야에 적합한 보편성을 갖도록 하는 전용 프로세서의 설계와 함께 인공지능 프로세서의 필수 요소 중 하나인 온칩(on-chip) 메모리 또한 이를 뒷받침 할 수 있도록 개발될 필요가 있다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "한편 본 발명의 배경기술은 대한민국 공개특허 10-2014-0076454호(2014.06.20)에 개시되어 있다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 인공지능 알고리즘을 효과적으로 처리하기 위한 고병렬성 기반의 인공지능 프로세서에서 사용될 수 있는 온칩 메모리 구조의 모드 변환 가능한 온칩 메모리 장치를 제공하는데 그 목적이 있다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명에 따른 모드 변환 가능한 온칩 메모리 장치는 멀티 뱅크로 구성되는 복수의 메모리 블록들; 코어로부터 의 메모리 액세스 요청에 포함된 모드 정보에 따라 캐시 모드 또는 스크래치패드 모드로 동작하여, 상기 메모리 블록들에 대한 읽기 또는 쓰기 처리를 수행하는 메모리 컨트롤러; 및 상기 모드 정보에 따라 캐시 모드 또는 스 크래치패드 모드로 동작하여, 상기 메모리 컨트롤러와 코어를 연결하고, 각각의 메모리 뱅크로 상기 메모리 액 세스 요청을 분배하는 아비터를 포함하는 것을 특징으로 한다. 본 발명에서 상기 아비터는, 각각의 코어마다 모든 메모리 뱅크로의 연결이 이루어지도록 하는 연결라인을 구비 하되, 상기 캐시 모드로 동작하는 경우 상기 연결라인을 이용하여 풀 크로스바(full crossbar) 구성으로 동작하 는 것을 특징으로 한다. 본 발명에서 상기 아비터는, 상기 스크래치패드 모드로 동작하는 경우 상기 연결라인 중 일부를 이용하여 각각 의 코어가 각각의 메모리 뱅크와 일대일 대응이 되도록 바(bar) 구성으로 동작하는 것을 특징으로 한다. 본 발명에서 상기 메모리 컨트롤러는 각각의 메모리 뱅크마다 하나씩 구비되는 것을 특징으로 한다. 본 발명에서 상기 메모리 컨트롤러는, 상기 캐시 모드로 동작하는 경우 태그 메모리 비교를 통해 캐시 히트 (hit) 또는 미스(miss)를 판단하여 상기 메모리 액세스 요청을 처리하는 것을 특징으로 한다. 본 발명에서 상기 메모리 컨트롤러는, 상기 스크래치패드 모드로 동작하는 경우, 오프칩 메모리와 온칩 메모리 사이의 데이터 전송을 수행하는 EMA(External Memory Address) 제어기 및 상기 온칩 메모리와 상기 코어 사이의 데이터 전송을 수행하는 IMA(Internal Memory Address) 제어기를 포함하는 것을 특징으로 한다. 본 발명에서 상기 메모리 컨트롤러는, 상기 온칩 메모리에 대한 주소 생성 시, 각각의 메모리 뱅크별로 정의된 전용 메모리 주소값을 기반으로 주소를 생성하는 것을 특징으로 한다. 본 발명에서 상기 캐시 모드는 상기 코어의 CPU 기반 동작에 사용되고, 상기 스크래치패드 모드는 상기 코어의 NPU 기반 동작에 사용되는 것을 특징으로 한다. 본 발명에서 상기 캐시 모드인 경우, 상기 메모리 액세스 요청은, 주소값으로 모드 정보, 태그 정보, 뱅크 인덱 스, 블록 인덱스 및 오프셋값을 포함하는 것을 특징으로 한다. 본 발명에서 상기 스크래치패드 모드인 경우, 상기 메모리 액세스 요청은, 주소값으로 모드 정보 및 시작 어드 레스를 포함하는 것을 특징으로 한다. 본 발명에 따른 모드 변환 가능한 온칩 메모리 장치는, 멀티 뱅크로 구성되는 복수의 메모리 블록들; 상기 메모 리 블록들에 대한 읽기 또는 쓰기 처리를 수행하는 복수의 메모리 컨트롤러로서, 상기 메모리 컨트롤러는 각각 의 메모리 뱅크마다 하나씩 구비되는, 메모리 컨트롤러; 및 각각의 코어마다 모든 메모리 뱅크로의 연결이 이루 어지도록 하는 연결라인을 구비하고, 상기 코어로부터의 메모리 액세스 요청에 포함된 모드 정보에 따라 캐시 모드 또는 스크래치패드 모드로 동작하여, 상기 각각의 메모리 뱅크로 상기 메모리 액세스 요청을 분배하는 아 비터를 포함하는 것을 특징으로 한다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따른 모드 변환 가능한 온칩 메모리 장치는 일반연산에 적합한 캐시 구조의 메모리 구성 모드와 행렬 연산에 적합한 스크래치패드 메모리 기반 구조의 메모리 구성 모드의 동작이 가능하도록 아비터와 메모리 제어 기를 구성함으로써, 인공지능 알고리즘에서 필요한 프로그램의 보편성과, 고성능 및 고병렬성을 유지할 수 있도 록 하는 효과가 있다. 본 발명에 따른 모드 변환 가능한 온칩 메모리 장치는 대용량의 메모리를 필요로 하여 그 면적 및 전력 효율성 에서 단점이 존재할 수 있는 인공지능 프로세서를 보다 효과적으로 사용 가능하도록 하는 효과가 있다."}
{"patent_id": "10-2023-0179107", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면을 참조하여 본 발명에 따른 모드 변환 가능한 온칩 메모리 장치의 일 실시예를 설명한다. 이 과정에서 도면에 도시된 선들의 두께나 구성요소의 크기 등은 설명의 명료성과 편의상 과장되게 도시되어 있을 수 있다. 또한, 후술되는 용어들은 본 발명에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례에 따라 달라질 수 있다. 그러므로, 이러한 용어들에 대한 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 도 1은 본 발명의 일 실시예에 따른 인공지능 전용 하드웨어(NPU)의 구성을 나타난 예시도이다. 도 1에 도시된 것과 같이, 본 발명의 일 실시예에 따른 인공지능 전용 하드웨어는 프로세서와 온칩 메모리 를 포함하는 AI 프로세서 및 오프칩(off-chip) 메모리를 포함한다. AI 프로세서는 버스를 통 해 오프칩 메모리와 연결될 수 있으며, 버스는 주변장치와 인공지능 전용 하드웨어의 연결을 수행하 도록 구성될 수 있다. 여기서 온칩 메모리는 칩 내부의 전용 연산기와 빠르게 데이터를 주고받을 수 있도록 하기 위한 구성이고, 오프칩 메모리는 칩 외부의 느리지만 큰 용량의 데이터를 저장하기 위한 구성일 수 있다.도 2는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 구성을 나타난 예시도이다. 인공지능 알고리즘은 일반적으로 고병렬성을 가지는 MAC(Multiply and Accumulation)으로 대표되는 행렬 연산들 과 활성화 함수(Activation Function), 배치 정규화(Batch Normalization) 등과 같이 행렬 연산 이외의 일반적 인 연산들로 나누어 구성된다. 이러한 두 가지 카테고리의 연산을 효율적으로 하기 위해 코어는 일반 연산기를 기반으로 한 CPU 형태의 프로세서와 행렬 연산 전용 연산기인 NPU 형태의 연산기의 조합으로 구성될 수 있다. 그리고, 이런 조합으로 구성된 코어 여러 개가 하나의 온칩 메모리를 공유하도록 하여 하드웨어 추가 없이 코어 간 데이터 공유가 일어날 수 있도록 구성될 수 있다. 다만, 실시예에 따라 프로세서나 코어의 구성이 일부 달라질 수도 있다. 멀티코어 기반의 고병렬 인공지능 프로세서에서 코어들과 온칩 메모리의 병목현상을 최소화하기 위해 온칩 메모리는 멀티 뱅크로 구성될 수 있다. 즉, 여러 코어로부터의 메모리 접근 요청이 여러 뱅크의 메모리에 분산되어 처리 가능하도록 구성할 수 있다. 이때, 메모리 뱅크 배열은 예를 들어, N개의 코어에 대해 서 NⅹN 개의 SRAM 기반의 메모리 블록들로 구성하고 N개의 제어 로직을 배치할 수 있다. 또한, 코어들과 메모리 사이에 아비터(arbiter)를 두어 각 코어로부터의 메모리 접근 요청을 적절한 메모리 뱅크 제 어 로직들로 분배하여 병목현상을 최소화할 수 있다. 아비터는 메모리 접근시 요청되는 주소값 중 일부로 정의된 뱅크 인덱스를 사용하여 각각의 메모리 뱅크로 요청을 분배하고 만약 동시에 같은 메모리 뱅크로의 접근 요청이 여러 개 있을 때는 라운드-로빈(round-robin) 방식 등으로 처리하여 순차화 할 수 있다. 그리고 각각의 메모리 뱅크의 제어 로직은 순차화된 메모리 읽기 (read) 또는 쓰기(write) 접근 요청에 적합한 처리를 하도록 구성될 수 있다. 아래의 설명과 같이 본 발명에서는 일반연산에 적합한 캐시(Cache) 구조의 메모리 구성 모드와 행렬연산에 적합 한 스크래치패드(Scratchpad) 메모리 기반 구조의 메모리 구성 모드가 모두 지원될 수 있는 복합 메모리 구조 및 이를 위한 아비터와 제어기(메모리 컨트롤러) 구조를 개시한다. 도 3은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 캐시 모드의 구성을 나타난 예시도이 고, 도 4는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 캐시 모드의 어드레스 구성을 나 타난 예시도이다. 도 4에서 볼 수 있듯이, 캐시 모드일 때 주소값은 5개의 성분(1비트의 모드 정보, 태그 정보, 뱅크 인덱스, 블 록 인덱스 및 오프셋값)으로 구성될 수 있다. 캐시는 멀티 코어의 개수가 N일 때, N-way set associative 구조로 구성하여 N개의 경로(way)를 하나의 세트 (set)로 구성하여 빠르면서 유연성을 높이는 구조를 채택할 수 있다. 여기서 N-way set associative 구조의 경 우 N개의 메모리 블록들을 하나의 세트로 구성하는 것을 의미하며, 각각의 세트가 각각의 메모리 뱅크를 구성할 수 있다. 다만, N이 증가하면 레이턴시(latency)의 문제와 한번에 태그(tag)를 비교하기 위한 비교기의 개수가 증가하므로 N은 4개~8개로 설정하는 것이 바람직할 수 있다. 캐시 모드일 때, 아비터는 주소값 중 뱅크 인덱스를 참조하여 메모리 액세스 요청(memory access reques t)을 해당 메모리 뱅크를 담당하는 제어 로직으로 전달하도록 설계된다. 따라서, 요청-응답(request- response)을 위한 로직 조합이 N-코어ⅹN-뱅크 만큼의 풀 크로스바(full crossbar)로 구성될 수 있다. 즉, 각각 의 코어마다 모든 뱅크로의 연결이 이루어지도록 하는 N개의 연결라인이 구비될 수 있다. 캐시 구성을 위해 메모리는 태그 메모리와 데이터 메모리로 구성되고, 메모리 컨트롤러는 태그 메모리 비 교를 통해 캐시 히트/미스(hit/miss)를 판단하여 요청 처리를 하는 일반적인 캐시 구조로 동작하도록 할 수 있 다. 캐시 모드는 행렬 연산이 아닌 일반 연산 시에 주로 사용되도록 코어에서 판단하여 주소값의 최상위 비트에 모 드 정보를 실어서 메모리 액세스를 요청하도록 할 수 있다. 캐시 모드 구성은 코어의 CPU 블록 연산에 주로 사 용되며 인공지능 프로세서의 보편성(generality)을 향상시키는데 활용될 수 있다. 도 5는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 스크래치패드 모드의 구성을 나타난 예시도이고, 도 6은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 스크래치패드 모드의 어 드레스 구성을 나타난 예시도이며, 도 7은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의제어기의 구성을 나타난 예시도이고, 도 8은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 EMA 제어기의 구성을 나타난 예시도이며, 도 9는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장 치의 IMA 제어기의 구성을 나타난 예시도이고, 도 10 및 도 11은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 EMA 제어기와 IMA 제어기의 주소 생성기의 구성을 나타난 예시도이다. 도 5는 스크래치패드 모드의 구성을 나타낸 것으로 행렬연산에 사용되도록 하고 코어 내의 NPU와의 데이터 전송 을 담당할 수 있다. 이때 아비터는 코어가 메모리 뱅크의 컬럼(column)별로 일대일 대응이 되도록 바 구성(bar configuratio n)으로 동작할 수 있다. 즉, 예를 들어, 첫번째 컬럼의 메모리 뱅크는 첫번째 코어 내의 NPU와만 데이터 전송이 이루어지도록 동작할 수 있다. 전술한 내용과 같이, 본 발명에 따른 모드 변환 가능한 온칩 메모리 장치는 각각 의 코어마다 모든 뱅크로의 연결이 이루어지도록 하는 N개의 연결라인이 구비될 수 있으므로, 아비터는 이 중 하나만을 사용하는 방식으로 바 구성으로 동작하는 것이 가능하다. 도 6에서 볼 수 있듯이, 스크래치패드 모드일 때 주소값은 2개의 성분(1비트의 모드 정보 및 시작 어드레스)으 로 구성될 수 있다. 스크래치패드 모드일 때에는 각각의 코어가 액세스하는 메모리 뱅크가 정해져 있으므로, 뱅 크 인덱스 등이 필요하지 않다. 도 7에 도시된 것과 같이, 각각의 메모리 뱅크 컬럼들의 메모리 컨트롤러는 캐시 모드와는 다르게 오프칩 메모리(외부 메모리)와 온칩 메모리(내부 메모리) 사이의 데이터 전송을 담당하는 EMA(External Memory Address) 제어기와 내부 메모리와 코어 사이의 데이터 전송을 담당하는 IMA(Internal Memory Address) 제 어기를 포함한다. 도 8에 도시된 것과 같이, EMA 제어기에서 External address(EA) 생성기는 캐시 모드에서와 마찬가 지로 글로벌 메모리 어드레스(global memory address)를 기반으로 나타나도록 주소가 생성되는 구조이다. 그러 나, Internal address(IA) 생성기는 각 메모리 뱅크 컬럼별로 정의된 전용 메모리 주소값을 기반으로 주 소가 생성되도록 하는 로직이다. 도 9에 도시된 것과 같이 IMA 제어기는 NPU의 입력 데이터를 담당하는 2개의 주소 생성기(II0A GEN, II1A GEN)와 출력 데이터를 메모리로 저장하기 위한 1개의 주소 생성기(IOA GEN)를 포함하고 이는 모두 뱅크 컬럼별로 정의된 전용 메모리 주소값을 기반으로 주소를 생성하도록 한다. EMA 제어기, IMA 제어기에 포함된 각각의 메모리 주소 생성기는 M차원(주로 3 또는 4차원) 네스티드 루프(nested loop) 기반의 프로그램 가능한 주소 생성기로 구성될 수 있다. 각각의 주소 생성기는 도 10 및 11 에 도시된 것과 같이, 루프 제어기(loop controller)와 주소 생성기(address generator)의 2개의 로직 블록으 로 구성될 수 있고, 두 블록간에는 kcond, jcond 및 data valid 신호를 사용하여 연결 및 동기화할 수 있다. 이때, 주소 생성 동작 전에, 메모리 주소 생성기는 코어로부터 CSR(Control and Status Register)을 설정하는 신호를 수신하여 주소 생성기를 위해 필요한 레지스터 값을 설정할 수 있다. 레지스터는 최초 주소값을 위한 시 작 어드레스 레지스터(start address register)와 각 차원당 2개의 레지스터(루프 제어 레지스터, 주소 증가값 레지스터)를 포함할 수 있다. 그리고 이 레지스터에 설정되어야 하는 값은, 신경망 연산에 따라 연산 프로그램 을 프로세서 전용 명령어로 변환하는 컴파일러 구성 시, 최적화 과정에서 결정하여 명령어에 실어 전달되도록 할 수 있다. 이와 같이 본 발명의 실시예에 따른 모드 변환 가능한 온칩 메모리 장치는 일반연산에 적합한 캐시 구조의 메모 리 구성 모드와 행렬연산에 적합한 스크래치패드 메모리 기반 구조의 메모리 구성 모드의 동작이 가능하도록 아 비터와 메모리 제어기를 구성함으로써, 인공지능 알고리즘에서 필요한 프로그램의 보편성과, 고성능 및 고병렬 성을 유지할 수 있도록 한다. 본 발명은 도면에 도시된 실시예를 참고로 하여 설명되었으나, 이는 예시적인 것에 불과하며, 당해 기술이 속하 는 분야에서 통상의 지식을 가진 자라면 이로부터 다양한 변형 및 균등한 타 실시예가 가능하다는 점을 이해할 것이다. 따라서 본 발명의 기술적 보호범위는 아래의 특허청구범위에 의해서 정하여져야 할 것이다."}
{"patent_id": "10-2023-0179107", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 인공지능 전용 하드웨어(NPU)의 구성을 나타난 예시도이다. 도 2는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 구성을 나타난 예시도이다. 도 3은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 캐시 모드의 구성을 나타난 예시도이 다. 도 4는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 캐시 모드의 어드레스 구성을 나타난 예시도이다. 도 5는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 스크래치패드 모드의 구성을 나타난 예시도이다. 도 6은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 스크래치패드 모드의 어드레스 구성 을 나타난 예시도이다. 도 7은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 제어기의 구성을 나타난 예시도이다. 도 8은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 EMA 제어기의 구성을 나타난 예시도 이다. 도 9는 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 IMA 제어기의 구성을 나타난 예시도 이다. 도 10 및 도 11은 본 발명의 일 실시예에 따른 모드 변환 가능한 온칩 메모리 장치의 EMA 제어기와 IMA 제어기 의 주소 생성기의 구성을 나타난 예시도이다."}
