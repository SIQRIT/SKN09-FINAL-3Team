{"patent_id": "10-2019-0076999", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0002197", "출원번호": "10-2019-0076999", "발명의 명칭": "인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법", "출원인": "고려대학교 산학협력단", "발명자": "조금준"}}
{"patent_id": "10-2019-0076999", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "기 획득된 다수의 초음파 이미지를 선택 및 전처리하여, 자궁내 양수 영역이 라벨링된 다수의 학습 이미지를 획득하는 단계;상기 다수의 학습 이미지를 통해 양수 영역 예측을 위한 인공지능 모델을 학습시키는 단계;초음파 기기로부터 환자 자궁을 초음파 촬영한 환자 이미지가 입력되면, 상기 인공지능 모델을 통해 상기 환자이미지내 양수 영역을 예측하는 단계;상기 양수 영역의 좌측 가장자리에서 우측 가장자리까지 수평 연결하여 관심 영역을 추출하는 단계;상기 관심 영역을 수평 방향으로 순차 스캐닝하면서 일정 너비가 확보된 가장 긴 직선 길이를 추출하는 단계;및 기 설정된 양수량 환산 비율에 따라 상기 가장 긴 직선 길이를 양수량으로 환산하여 출력하는 단계를 포함하는인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법."}
{"patent_id": "10-2019-0076999", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 인공지능 모델은 유-넷 모델로 구현되는 것을 특징으로 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법."}
{"patent_id": "10-2019-0076999", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서, 상기 학습 이미지를 획득하는 단계는 인공지능 모델의 학습에 이용할 초음파 이미지를 선택하고, 임계값에 기반한 이진화를 수행한 후 픽셀값이 1인픽셀들만을 남기는 단계;인접 픽셀들을 연결 및 그룹핑한 후 라벨링하고, 라벨들의 도심과 이미지 중심 값의 거리에 기반하여 초음파 영역을 파악하는 단계;상기 초음파 영역의 경계 값들을 연결하고 안을 채운 후, 상기 초음파 이미지와 곱셈 연산하여 학습 이미지를획득하는 단계;상기 학습 이미지의 크기를 기 설정된 크기로 통일하는 단계; 및 상기 학습 이미지내 양수 영역을 검출하고, 양수 영역 검출 결과를 상기 학습 이미지에 추가 표시하여 출력하는단계를 포함하는 것을 특징으로 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법."}
{"patent_id": "10-2019-0076999", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 가장 긴 양수 깊이를 검출하는 단계는 상기 관심 영역을 수직 방향으로 가로지는 스캐닝 라인을 생성하는 단계;상기 스캐닝 라인을 기 설정된 픽셀 간격으로 수평 이동시키면서, 상기 스캐닝 라인과 양수 영역 외곽선과의 교차점을 기반으로 다수의 직선을 생성하는 단계; 상기 다수의 직선 중, 양수 영역 외곽선을 기준으로 일정 너비 간격이 확보된 가장 긴 직선을 추출하는 단계;및 상기 다수의 직선 중 가장 긴 직선을 추출한 후, 상기 가장 긴 직선의 길이를 가장 긴 양수 깊이로 환산하여 출력하는 단계를 포함하는 것을 특징으로 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법. 공개특허 10-2021-0002197-3-청구항 5 제4항에 있어서, 초음파 기기로부터 초음파 촬영 각도가 추가 입력되는 경우, 상기 관심 영역의 표시 각도를 초음파 촬영 각도에따라 보정하고, 상기 스캐닝 라인은 상기 관심 영역을 카메라 촬영 각도로 가로지도록 하는 단계를 더 포함하는것을 특징으로 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법."}
{"patent_id": "10-2019-0076999", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서, 상기 관심 영역의 표시 각도는 \"초음파 촬영 각도 - 90°\"의 식에 따라 보정 각도를 산출한 후, 상기 보정 각도가 - 값인 경우에는 상기 관심영역을 시계방향으로 상기 보정 각도만큼 회전되고, 상기 보정 각도 + 값인 경우에는 상기 관심 영역을 반시계방향으로 상기 보정 각도만큼 회전되는 방식으로 보정되는 것을 특징으로 하는 인공 지능 모델에 기반한 자궁양수량 자동 측정 방법."}
{"patent_id": "10-2019-0076999", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서, 환자의 초음파 촬영 부위가 N(N은 2 이상의 자연수)개인 경우, N 개 부위의 양수량 모두를 고려하여 최종 양수량을 결정 및 통보하는 단계를 더 포함하는 것을 특징으로 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법에 관한 것으로, 이는 기 획득된 다수의 초음파 이미지를 선택 및 전처리하여, 자궁내 양수 영역이 라벨링된 다수의 학습 이미지를 획득하는 단계; 상기 다수의 학습 이미지를 통해 양수 영역 예측을 위한 인공지능 모델을 학습시키는 단계; 초음파 기기로부터 환자 자궁을 초음파 촬영한 환자 이미지가 입력되면, 상기 인공지능 모델을 통해 상기 환자 이미지내 양수 영역을 예측하는 단계; 상기 양수 영역의 좌측 가장자리에서 우측 가장자리까지 수평 연결하여 관심 영역을 추출하는 단계; 상기 관심 영역을 수평 방향으로 순차 스캐닝하면서 일정 너비가 확보된 가장 긴 직선 길이를 추출하는 단계; 및 기 설정된 양수량 환산 비율에 따라 상기 가장 긴 직선 길이를 양수량으로 환산하여 출력하는 단계를 포함할 수 있 다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 자궁 양수량 자동 측정 방법에 관한 것으로, 특히 자궁 양수량을 보다 객관적이고 신뢰성있게 측정할 수 있도록 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법에 관한 것이다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "양수는 자궁 내에서 태아의 성장과 발달에 중요한 역할을 한다. 양수는 외부의 충격으로부터 태아를 보호하는 완충 역할을 하며, 근골격계의 발달을 가능하게 하고, 감염으로부터 항균 역할, 태아 체온의 유지, 위장관과 호 흡계의 발달 및 태아의 성장과 발달에 필요한 수분과 영양소의 공급원으로서의 역할 등을 한다. 양수량의 이상은 태아 기형이나 다양한 태아 질환과 관련이 있으며, 정상 태아의 경우에도 양수량의 이상은 주 산기 유병률과 사망률을 증가시킨다. 따라서 임신 중 양수량의 측정은 태아의 안녕 등을 평가하는 중요한 항목 이다. 양수량을 정확하게 측정하기 위해서는 양수천자를 통해 색소희석방법으로 측정해야 하지만 임상적으로 시행하기 어려워 일반적으로 초음파를 이용한 반정량적 방법을 통해 측정한다. 일반적으로 단일 최대 양수포켓측정이나 양수지수측정을 통해 측정한다. 최대 양수포켓측정은 가장 깊은 하나의 양수포켓을 찾아 깊이를 측정하는 것이고, 양수지수측정은 자궁을 네 부분으로 나누어 각 부분의 가장 깊은 곳 을 측정한 후 값을 더하는 것이다. 하지만 초음파를 통해 양수량을 측정하기 위해서는, 측정자가 초음파 이미지를 통해 양수가 가장 많아 보이는 부분을 시각적으로 탐색하고, 이를 통해 가장 깊은 부분을 수동 선택하여 수직 직선거리를 측정해야 한다. 이에 1) 양수량이 가장 많은 부분을 선택할 때 문제, 2) 한 단면에서 가장 깊어 보이는 곳을 선택할 때 문제, 3) 직선을 그어 양수량을 측정할 때의 문제 등이 발생하고, 측정자의 주관에 따라 양수 측정량이 달라지는 문제 가 발생하게 된다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "이에 상기와 같은 문제점을 해결하기 위한 것으로서, 본 발명은 인공 지능 모듈을 이용하여 초음파 이미지로부 터 가장 깊은 양수 영역을 검출하고, 이에 기반한 양수량 측정 동작을 수행하도록 하는 인공 지능 모델에 기반 한 자궁 양수량 자동 측정 방법을 제공하고자 한다. 그리고 임산부 초음파 촬영과 양수량 산출 동작이 동시 수행될 수 있도록 하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법을 제공하고자 한다. 본 발명의 목적은 이상에서 언급한 목적으로 제한되지 않으며, 언급되지 않은 또 다른 목적들은 아래의 기재로 부터 본 발명이 속하는 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 과제를 해결하기 위한 수단으로서, 본 발명의 일 실시 형태에 따르면, 기 획득된 다수의 초음파 이미지를 선택 및 전처리하여, 자궁내 양수 영역이 라벨링된 다수의 학습 이미지를 획득하는 단계; 상기 다수의 학습 이 미지를 통해 양수 영역 예측을 위한 인공지능 모델을 학습시키는 단계; 초음파 기기로부터 환자 자궁을 초음파 촬영한 환자 이미지가 입력되면, 상기 인공지능 모델을 통해 상기 환자 이미지내 양수 영역을 예측하는 단계; 상기 양수 영역의 좌측 가장자리에서 우측 가장자리까지 수평 연결하여 관심 영역을 추출하는 단계; 상기 관심 영역을 수평 방향으로 순차 스캐닝하면서 일정 너비가 확보된 가장 긴 직선 길이를 추출하는 단계; 및 기 설정 된 양수량 환산 비율에 따라 상기 가장 긴 직선 길이를 양수량으로 환산하여 출력하는 단계를 포함하는 인공 지 능 모델에 기반한 자궁 양수량 자동 측정 방법을 제공한다. 상기 자궁 양수량 자동 측정 방법은 환자의 초음파 촬영 부위가 N(N은 2 이상의 자연수)개인 경우, N 개 부위의 양수량을 모두 합산하여 최종 양수량을 결정 및 통보하는 단계를 더 포함하는 것을 특징으로 한다. 상기 인공지능 모델은 유-넷 모델로 구현되는 것을 특징으로 한다. 상기 학습 이미지를 획득하는 단계는 인공지능 모델의 학습에 이용할 초음파 이미지를 선택하고, 임계값에 기반 한 이진화를 수행한 후 픽셀값이 1인 픽셀들만을 남기는 단계; 인접 픽셀들을 연결 및 그룹핑한 후 라벨링하고, 라벨들의 도심과 이미지 중심 값의 거리에 기반하여 초음파 영역을 파악하는 단계; 상기 초음파 영역의 경계 값 들을 연결하고 안을 채운 후, 상기 초음파 이미지와 곱셈 연산하여 학습 이미지를 획득하는 단계; 상기 학습 이 미지의 크기를 기 설정된 크기로 통일하는 단계; 및 상기 학습 이미지내 양수 영역을 검출하고, 양수 영역 검출 결과를 상기 학습 이미지에 추가 표시하여 출력하는 단계를 포함하는 것을 특징으로 한다. 상기 가장 긴 양수 깊이를 검출하는 단계는 상기 관심 영역을 수직 방향으로 가로지는 스캐닝 라인을 생성하는 단계; 상기 스캐닝 라인을 기 설정된 픽셀 간격으로 수평 이동시키면서, 상기 스캐닝 라인과 양수 영역 외곽선 과의 교차점을 기반으로 다수의 직선을 생성하는 단계; 및 상기 다수의 직선 중 , 양수 영역 외곽선을 기준으로 일정 너비 간격이 확보된 가장 긴 직선을 추출한 후, 상기 가장 긴 직선의 길이를 가장 긴 양수 깊이로 환산하 여 출력하는 단계를 포함하는 것을 특징으로 한다. 또한 상기 자궁 양수량 자동 측정 방법은 초음파 기기의 초음파 촬영 각도가 추가 입력되는 경우, 상기 관심 영 역의 표시 각도를 초음파 촬영 각도에 따라 보정하고, 상기 스캐닝 라인은 상기 관심 영역을 카메라 촬영 각도 로 가로지도록 하는 단계를 더 포함하는 것을 특징으로 한다. 이때, 상기 관심 영역의 표시 각도는 \"초음파 촬영 각도 - 90°\"의 식에 따라 보정 각도를 산출한 후, 상기 보 정 각도가 - 값인 경우에는 상기 관심 영역을 시계방향으로 상기 보정 각도만큼 회전되고, 상기 보정 각도 + 값 인 경우에는 상기 관심 영역을 반시계방향으로 상기 보정 각도만큼 회전되는 방식으로 보정되는 것을 특징으로 한다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은 인공 지능 모듈을 이용하여 초음파 이미지로부터 가장 깊은 양수 영역을 검출한 후, 이에 기반하여 양수량을 산출하도록 함으로써, 측정자의 주관적 개입을 필요로 하지 않으며, 보다 객관적이고 신뢰성있는 양수 량 측정 동작이 가능해지도록 한다. 그리고 임산부 초음파 촬영과 양수량 산출 동작이 동시 수행되도록 함으로써, 빠른 응답성을 확보할 수 있도록 한다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 목적 및 효과, 그리고 그것들을 달성하기 위한 기술적 구성들은 첨부되는 도면과 함께 상세하게 후술 되어 있는 실시예들을 참조하면 명확해질 것이다. 본 발명을 설명함에 있어서 공지 기능 또는 구성에 대한 구체 적인 설명이 본 발명의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명을 생략할 것이다. 그리고 후술되는 용어들은 본 발명에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러나 본 발명은 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있"}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "다. 단지 본 실시예들은 본 발명의 개시가 완전하도록 하고, 본 발명이 속하는 기술분야에서 통상의 지식을 가 진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명은 청구항의 범주에 의해 정의될 뿐 이다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 도 1은 본 발명의 일 실시예에 따른 양수량 자동 측정 시스템을 도시한 도면이다. 도 1을 참고하면, 본 발명의 양수량 자동 측정 시스템은 초음파 프로브를 통해 환자 복부를 촬영하여 초음 파 이미지를 획득 및 제공하는 초음파 기기, 그리고 초음파 기기와 연동하여, 자궁 양수량 자동 측정 동작을 수행하는 양수량 측정 장치 등을 포함한다. 본 발명의 양수량 측정 장치는 기 획득된 초음파 이미지들을 이용하여 양수 영역 예측을 위한 인공지능 모 델을 사전 학습시킨 후, 초음파 기기를 통해 획득된 초음파 이미지를 인공 지능 모델에 입력하여, 인공 지 능 모델이 초음파 이미지내 양수 영역을 자동으로 검출하도록 한다. 그리고 양수 영역의 가장 깊은 곳을 자동 탐색하고, 이에 기반하여 양수량을 산출하도록 한다. 더하여, 필요한 경우 초음파 기기는 초음파 프로브에 결합된 회전각 센서를 구비하고, 이를 이 용하여 초음파 촬영 각도를 추가적으로 센싱 및 출력할 수도 있도록 한다. 이러한 경우, 본 발명의 양수량 측정 장치는 회전각 센서를 통해 초음파 촬영 각도를 반영한 양수량 산출 동작까지 추가로 수행하여, 측정 자가 초음파 프로브를 산모 복부에 반드시 수직으로 거치하지 않아도 되도록 한다. 도 2는 본 발명의 일 실시예에 따른 자궁 양수량 자동 측정 방법을 설명하기 위한 도면이다. 도 2를 참고하면, 본 발명의 방법은 기 획득된 다수의 초음파 이미지를 선택 및 전처리하여, 자궁내 양수 영역 이 라벨링된 다수의 학습 이미지를 획득하는 단계(S1), 상기 다수의 학습 이미지를 통해 양수 영역 예측을 위한 인공지능 모델을 학습시키는 단계(S2), 초음파 기기로부터 환자 자궁을 초음파 촬영한 환자 이미지가 입력되면 (S3), 상기 인공지능 모델을 통해 상기 환자 이미지내 양수 영역을 예측하는 단계(S4), 상기 양수 영역의 좌측 가장자리에서 우측 가장자리까지 수평 연결하여 관심 영역을 추출하는 단계(S5), 상기 관심 영역을 수평 방향으 로 순차 스캐닝하면서 가장 긴 직선 길이를 추출하는 단계(S6), 기 설정된 양수량 환산 비율에 따라 상기 가장 긴 직선 길이를 양수량으로 환산하여 출력하는 단계(S7)를 포함하는 인공 지능 모델에 기반한 자궁 양수량 자동 측정 방법. 등을 포함한다. 특히, 본 발명은 단계 S3 내지 단계 S7을 임산부 초음파 촬영이 수행되는 동안 수행될 수 있으며, 그 결과 임산 부 초음파 촬영과 동시에 양수량 측정 동작이 수행될 수 있도록 한다. 또한 이러한 양수량 측정 동작은 한 부위 기반에 수행될 수 있으나, 필요한 경우 자궁을 N개 부위로 나눈 후, 양수량 측정 동작을 N개 부위 각각에 반복적으로 수행하고, 이들 양수량 측정 결과를 모두 고려하여(예를 들어, 합산 또는 평균하여) 최종 양수량을 산출 및 통보할 수도 있도록 한다. 이하, 도 3 내지 도 7을 참고하여 본 발명의 방법을 보다 상세히 설명하기로 한다. 도 3은 본 발명의 일 실시예에 따른 학습 이미지 획득 단계를 설명하기 위한 도면이다. 초음파 기기의 종류에 따라 초음파 이미지 크기와 초음파 표시 영역의 위치가 달라진다. 이에 본 발명에서는 이 미지 전처리 과정을 통해 여러 종류의 초음파 기기가 제공하는 초음파 이미지 크기와 초음파 표시 영역을 통일 화한 후, 이를 학습 이미지로써 인공지능 모델에 제공하도록 한다. 이를 위해, 의료 데이터베이스에 기 저장되어 있던 다수의 초음파 이미지들 중에서 인공지능 모델의 학습에 이 용할 초음파 이미지 하나를 선택 및 로딩한다(S11). 로딩된 초음파 이미지를 임계값(threshold)에 기반한 이진화 처리한 후, 픽셀값이 1인 픽셀들만을 남긴다(S12). 그리고 \"Connected Component With Stats 함수\"을 이용하여 인접 픽셀들을 연결 및 그룹핑한 후 라벨링한다 (S13). 라벨들의 도심(centroid)과 초음파 이미지의 중심 값간의 거리(Euclidean distance)를 계산하여 값이 기 설정값 (예를 들어, 220) 이하인, 즉 도심과 초음파 이미지 중심의 거리가 기 설정값 이하인 라벨들은 초음파 영역이라 고 판단한다(S14). \"Convex_hull 함수\" 를 이용하여 초음파 영역의 경계 값들을 연결한 후 안을 채움으로써, 학습 대상 영역을 획 득한다(S15). 도 2에서 노란색으로 표시된 부분의 픽셀들의 값은 1이며, 이외의 pixel들의 값은 모두 0이다. 단계 S15의 학습 대상 영역만을 인공 지능 모델이 학습할 수 있도록, 단계 S11의 초음파 이미지에 단계 S15의 초음파 영역을 곱셈 연산하여, 학습 이미지를 획득한다(S16). 곱셈 연산시, 동일 위치에 있는 픽셀 끼리 값이 곱해지는데, 단계 S15의 픽셀 값들이 1과 0으로만 표시되어 있으므로, 단계 S11의 이미지에서 단계 S15에서 픽 셀 값이 1인 부분은 그대로 남게 되고, 픽셀 값이 0인 부분은 0이 되어 사라지게 된다. 그리고 초음파 기기 별로 서로 상이한 이미지 크기를 가짐을 고려하여, 학습 이미지의 크기를 기 설정된 크기 (예를 들어, 1152mm × 872mm)로 통일한다(S17). 만약, 학습 이미지의 크기가 기 설정된 크기값 보다 작다면 이 미지의 우측과 하단부에 값이 0인 픽셀들을 추가함으로써, 이미지 크기를 맞출 수 있도록 한다. 마지막으로 라벨 이미지를 컨투어(Contour)하여 학습 이미지내 양수 영역을 검출하고, 양수 영역 검출 결과를 학습 이미지에 추가 표시하여 출력하도록 한다(S18). 도 4는 본 발명의 일 실시예에 따른 인공지능 모델 학습 단계를 설명하기 위한 도면이다. 본 발명에는 인공지능 모델을 의료 이미지 세크멘테이션(Segmentation)에 주로 사용되고 있는 유-넷(U-Net) 모 델로 구현하도록 한다. 도 3에서와 같이, U-net 모델은 이미지를 줄어나가는 엔코더(Encoder)와 이미지를 키워나가는 디코더(Decoder) 부분으로 나뉘어지며, 이는 다음과 같이 구동된다. 엔코더는 \"컨볼루션(Convolution) -> 드랍아웃(Dropout) -> 컨볼루션 -> 맥스풀링(MaxPooling)\" 순으로 6번에 걸쳐 반복되며, 마지막 n번째에는 맥스풀링을 하지 않아 맥스풀링은 총 n-1번 실행된다. 컨볼루션에서 사용하는 커널은 3*3이며 활성화 함수(activation function)으로 ReLu(Rectified Linear Unit)를 사용한다. 패딩(padding)값으로 'same'을 주어 컨볼루션의 입력과 출력은 동일한 이미지 크기를 가진다. 컨볼 루션을 할 때마다 채널의 수는 늘어나며 채널의 개수는 현재 2index개가 된다. 또한 가중치 초기화 방법으로 'he_normal'을 사용한다. 드랍아웃은 오버피팅(overfitting)을 막기 위한 것으로 일부 네트워크를 생략한다. 현 재 인덱스에 0.1만큼의 네트워크를 생략한다. 맥스풀링은 2*2 맥스풀링을 사용해 가장 큰 특징을 추출할 수 있 도록 하며, 맥스풀링 계산 시 이미지의 크기는 기존의 크기에 비해 1/2 씩 줄어든다. 디코더는 \"컨볼루션트랜스포즈(ConvoltionTranspose) -> 컨케드네이트(concatenate) -> 컨볼루션 -> 드랍아웃 -> 컨볼루션) 순으로 총 5번에 걸쳐 반복된다. 컨볼루션과 컨볼루션트랜스포즈로 총 2가지의 컨볼루션이 있다. 컨볼루션은 엔코더의 컨볼루션과 동일하며, 컨 볼루션트랜스포즈는 사용 커널의 크기가 2*2 라는 점과 컨볼루션의 역 연산으로 입력 이미지에 비해 출력 이미 지의 크기가 2배(커널 = 2*2)로 커진다는 점에서 차이가 있다. 컨케드네이트는 디코더의 현재 인덱스의 디코더와 엔코더를 합치는 과정으로 도 3의 회색 수평선에 해당한다. 드랍아웃은 엔코더의 드랍아웃과 동일하며 현재 인덱스의 0.1만큼의 네트워크를 생략한다. 디코더까지 완료한 후 컨볼루션트랜스포즈를 한번 더 적용한 뒤 모델을 완성한다. 이때, 컨볼루션트랜스포즈는 필터들의 값으로 1을 주어 하나의 채널, 즉 하나의 이미지가 출력으로 나오게 된다. 활성화 함수로 'sigmoid'는 적용하고, 가중치 초기화 방법으로 'glorot_normal'을 사용한다. 도 5는 본 발명의 일 실시예에 따른 관심 영역 추출 및 보정 단계를 설명하기 위한 도면이다. 단계 S3을 통해 환자 자궁을 초음파 촬영한 환자 이미지가 획득되면, 환자 이미지를 인공지능 모델에 입력하여 양수 영역을 예측한다. 그리고 환자 이미지의 크기를 기 설정된 크기값(예를 들어, 1152mm × 872mm)으로 통일 한다(S41). 양수 영역의 외곽선을 기준으로 하여 좌측, 우측, 상단, 하단의 가장 끝 점 좌표를 획득 및 저장한다. 도 5에서, 최좌측 좌표는 빨강색, 최우측 좌표는 연두색, 최상측 좌표는 파란색, 최하측 좌표는 하늘색으로 표시된 다(S42). 양수 영역의 최좌측 좌표와 최우측 좌표를 기반으로 양수 영역의 좌측 가장자리에서 우측 가장자리까지 수평 연 결한 관심 영역을 추출한다(S43). 도 6은 본 발명의 일 실시예에 따른 관심 영역 스캐닝 방법을 설명하기 위한 도면이다. 본 발명에서는 관심 영역을 수직 방향으로 가로지는 스캐닝 라인을 생성한다(S51). 그리고 이미지의 픽셀별 비교가 가능하도록, 스캐닝 라인의 직선 방정식의 x축 단위를 0.1의 소수점(float) 단 위에서 정수형(int) 단위로 변경한다(S52). 먼저, 스캐닝 라인에 포함되는 픽셀 중 중복되는 값과 (1152, 872)범위를 벗어나는 값을 삭제하여, 이를 하나의 배열(line)에 저장한다(S53). 그리고 'flag_line'이라는 이름의 bool 변수를 설정해 직선의 시작 여부를 계산한다. 직선의 값을 하나씩 보며 해당 픽셀이 예측된 양수 영역과 겹치는 지에 대한 여부와 flag_line 변수의 값에 따라서 직선의 시작과 끝 값 을 계산하고, 이를 하나의 배열(line_arr)에 저장한다(S54). 상황 별 알고리즘은 아래의 표 1과 같다. 표 1 예측된 양수 영역(predict)flag_line Do predict False 현재 pixel은 직선의 시작 pixel이 된다. flag_line 변수의 값을 True로 변경한다. Not predict True 현재 pixel은 직선의 끝 pixel이 된다. flag_line 변수의 값을 False로 변경한다. line_arr에 직선의 시작과 끝 점을 저장한다. 단계 S53 및 단계 S54는 관심 영역의 스캐닝이 완료될 때까지(S55), 스캐닝 라인을 관심 영역상에서 기 설정된 픽셀 간격으로 수평 이동시키면서 반복 수행되도록 한다(S56). 관심 영역의 스캐닝이 완료되면, line_arr에 저장된 여러 쌍의 점들(직선의 시작, 직선의 끝)을 기반으로 가장 긴 직선 길이를 찾는다(S55). 이 과정에서, 양수량 측정의 정확도를 증가시키고, 양수벽에 대한 영향을 최소화시키기 위하여 양수 영역 외곽 선을 기준으로 일정량의 너비를 확보한 직선 길이를 탐색한다. 도 9은 가장 긴 길이를 찾는 과정에서, 양수 영 역 외곽선을 기준으로 일정 너비를 확보한 선을 찾는 방법에 대한 설명을 위한 도면이다. 즉, 본 발명에서는 가 장 깊은 곳에 대한 탐색 과정 중에, 양수벽을 기준으로 일정 너비가 확보된 영역을 측정할 수 있도록 한다. 마지막으로 가장 긴 직선의 길이의 단위를 픽셀에서 mm으로 변환한 후, 이를 가장 긴 양수 깊이로 획득 및 출력 하도록 한다(S56). 단계 S56의 수행을 위한 가장 긴 직선의 길이의 단위를 픽셀에서 mm로 변환하기 위한 픽셀과 mm간 비율은 사전 획득 및 저장될 수 있으나, 필요시에는 도 8의 방법을 통해 초음파 이미지로부터 직접 획득될 수도 있도록 한다. 참고로, 초음파 이미지내에는 영상 크기 척도를 안내하기 위한 길이 인덱스들이 일렬 표시된다. 이에 길이 인덱 스들이 일렬 표시된 인덱스 표시 영역(예를 들어, 이미지 좌측의 100 열)을 선택한 후, 열 단위로 0 이외의 값 을 가지는 픽셀 개수를 카운팅한다(S56-1). 다만, 색이미지 일부 영역에 색 팔레트가 존재하는 경우, 색 팔레트 표시 영역을 제외한 후 픽셀 개수 카운팅 동작을 수행한다. 즉, 한 열에 대한 모든 픽셀 값을 하나씩 살펴보며 픽셀 값(밝기)이 50 이상인 픽셀들이 100 칸 이상 연결된 경우 해당 열은 제외하는 방식을 통해 예외처리를 한다(S56-2). 그리고 인덱스 표시 영역에 포함된 열들 중에서 카운팅된 픽셀 개수가 가장 큰 열을 기준 열로 선택한다(S56- 3). 해당 열의 픽셀 값이 1 이상인 값들을 모두 index_arr 배열에 모은다. index_arr 의 마지막 픽셀 값(final)에서 부터 index_arr 값을 하나씩 살펴본다. 만일 마지막 픽셀 값(final)과 연결되어 있지 않은 값이라면 해당 값을 다음 칸이라고 판단하여 이를 다음 픽셀값(beside)라 한다. final - beside의 값은 인덱스간 간격(예를 들어, 10mm)을 의미하며, 이로부터 픽셀과 mm간 비율 = 인덱스간 간격 길이/(final - beside)mm를 도출한다(S56-4). 더하여, 본 발명의 초음파 기기가 초음파 이미지 이외에 초음파 촬영 각도까지 제공한다면, 도 8에서와 같 이 관심 영역의 표시 각도와 스캐닝 각도를 초음파 촬영 각도에 따라 보정한 후, 가장 큰 양수 깊이를 탐색 동 작을 수행할 수도 있도록 한다. 즉, \"초음파 촬영 각도 - 90°\"의 식에 따라 보정 각도를 산출한 후, 보정 각도가 - 값인 경우에는 관심 영역을 시계방향으로 보정 각도만큼 회전시키고, 보정 각도 + 값인 경우에는 관심 영역을 반시계방향으로 보정 각도만 큼 회전시킴으로써, 관심 영역의 표시 각도를 보정하도록 한다. 그리고 스캐닝 라인의 각도 또한 초음파 촬영 각도에 따라 보정한 후(즉, 스캐닝 라인이 관심 영역을 카메라 촬영 각도로 가로지도록 한 후), 이를 기 설정된 픽셀 간격으로 수평 이동시키면서, 가장 큰 양수 깊이를 탐색할 수 있도록 한다. 이때, 초음파 촬영 각도는 초음파 프로브를 산모 복부에 수직 거치된 각도를 기준 각도(예를 들어, 90°) 로 설정한 후, 초음파 프로브 움직임에 따른 기준 각도 대비 Yaw 축 각도 변화량(90°-X°)을 추적함으로써 획 득 가능하다."}
{"patent_id": "10-2019-0076999", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "이상의 설명은 본 발명의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 발명이 속하는 기술분야에 서 통상의 지식을 가진 자라면 본 발명의 본질적인 특성에서 벗어나지 않는 범위에서 다양한 수정 및 변형이 가 능할 것이다. 따라서, 본 발명에 개시된 실시예들은 본 발명의 기술 사상을 한정하기 위한 것이 아니라 설명하 기 위한 것이고, 이러한 실시예에 의하여 본 발명의 기술 사상의 범위가 한정되는 것은 아니다. 본 발명의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 발명의 권리범위에 포함되는 것으로 해석되어야 할 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7 도면8 도면9"}
{"patent_id": "10-2019-0076999", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 자궁 양수량 자동 측정 방법을 설명하기 위한 도면이다. 도 2는 본 발명의 일 실시예에 따른 학습 이미지 획득 단계를 설명하기 위한 도면이다. 도 3는 본 발명의 일 실시예에 따른 인공지능 모델 학습 단계를 설명하기 위한 도면이다. 도 4 및 도 5는 본 발명의 일 실시예에 따른 관심 영역 추출 및 보정 단계를 설명하기 위한 도면이다. 도 6 내지 도 9은 본 발명의 일 실시예에 따른 관심 영역 스캐닝 방법을 설명하기 위한 도면이다."}
