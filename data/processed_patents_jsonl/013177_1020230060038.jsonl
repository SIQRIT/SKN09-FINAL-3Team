{"patent_id": "10-2023-0060038", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0163223", "출원번호": "10-2023-0060038", "발명의 명칭": "트램의 자율주행을 제어하는 시스템 및 이를 구현하는 방법", "출원인": "한국철도기술연구원", "발명자": "전희균"}}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "트램의 전방 또는 측방의 객체를 촬영하는 카메라;상기 트램의 전방 또는 측방의 객체에 대한 정보를 생성하는 라이다;상기 트램의 위치 정보를 생성하는 위치측정기;상기 트램의 진행 방향에 배치된 신호등으로부터 신호를 수신하는 신호수신기; 및상기 카메라, 상기 라이다, 상기 위치측정기, 상기 신호수신기로부터 정보를 수신하여 상기 트램의 이동 속도를결정하는 제어 명령 또는 상기 트램의 이동 또는 정지에 대응하는 제어 명령을 생성하며, 상기 카메라 및 라이다가 감지한 객체의 유클리드 거리를 반영하여 객체 검지 결과를 합성하여 객체를 식별하는 컨트롤러를 포함하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 컨트롤러는 상기 카메라가 촬영한 영상 데이터에 인공지능 객체 인식 모듈을 적용하여 객체를 인식 및 분류하며,상기 컨트롤러는 상기 라이다가 생성한 정보에 대해 포인트 클라우드 데이터 처리를 수행하는, 자율주행 제어시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 컨트롤러는 상기 카메라가 인식 및 분류한 객체의 정보 및 상기 포인트 클라우드 데이터 처리가 완료된 객체의 정보를 융합하여 상기 트램의 전방 또는 측방에 위치한 객체를 검지하고 종류를 구분하고 거리를측정하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 컨트롤러는 상기 검지된 객체의 위치와 상기 트램의 ROI(Region Of Interest) 영역을 비교하여 상기 객체와 상기 트램의 충돌 위험도를 판단하고 상기 트램의 운행 속도 또는 정지 여부를 결정하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 컨트롤러는 상기 객체 중 충돌 위험으로 판단되는 객체들 중, 가장 가까운 거리의 객체를 선별하고 충돌을회피하기 위한 감속 목표 속도를 계산하여 상기 객체와의 거리가 최소안전거리 이내일 때 긴급 정차를결정하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 컨트롤러는 상기 라이다가 산출한 정보에 SLAM(Simultaneous Localization and Mapping)을 적용하여 미리저장된 주행 구간 데이터맵과 상기 라이다가 측정한 포인트 클라우드를 비교하여 상기 트램의 위치를 상기 데이터맵에서 확인하는, 자율주행 제어 시스템.공개특허 10-2024-0163223-3-청구항 7 제6항에 있어서,상기 컨트롤러는 상기 위치측정기가 생성한 측위 결과와 상기 컨트롤러가 상기 데이터맵에서 확인한 트램의 위치를 융합하여 상기 트램의 위치를 확정하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 컨트롤러는 상기 트램이 주행하는 경로에 배치된 도로교통 요소들에 대한 정보가 정의된 벡터 맵과 상기트램의 실시간 위치를 비교하여 상기 트램의 주행 목표 속도를 결정하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항에 있어서,상기 신호수신기는 상기 트램의 전방에 배치된 신호등과 V2X 통신으로 현재 신호등의 신호 상태 및 신호 전환까지의 잔여시간 정보를 수신하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 컨트롤러는 상기 잔여시간 정보와 상기 트램의 주행 속도, 상기 신호등이 설치된 교차로와의 거리 정보를이용하여 트램의 속도와 정지 여부를 결정하는, 자율주행 제어 시스템."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "자율주행 제어 시스템의 카메라가 트램의 전방 또는 측방의 객체를 촬영하는 단계;상기 자율주행 제어 시스템의 라이다가 상기 트램의 전방 또는 측방의 객체에 대한 정보를 생성하는 단계;상기 자율주행 제어 시스템의 위치측정기가 상기 트램의 위치 정보를 생성하는 단계;상기 자율주행 제어 시스템의 신호수신기가 상기 트램의 진행 방향에 배치된 신호등으로부터 신호를 수신하는단계; 및상기 자율주행 제어 시스템의 컨트롤러가 상기 카메라, 상기 라이다, 상기 위치측정기, 상기 신호수신기로부터정보를 수신하여 상기 카메라 및 라이다가 감지한 객체의 유클리드 거리를 반영하여 객체 검지 결과를 합성하여객체를 식별하여 상기 트램의 이동 속도를 결정하는 제어 명령 또는 트램의 이동 또는 정지에 대응하는 제어 명령을 생성하는 단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 컨트롤러는 상기 카메라가 촬영한 영상 데이터에 인공지능 객체 인식 모듈을 적용하여 객체를 인식 및 분류하는 단계; 및상기 컨트롤러는 상기 라이다가 생성한 정보에 대해 포인트 클라우드 데이터 처리를 수행하는 단계를 포함하는,트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 컨트롤러는 상기 카메라가 인식 및 분류한 객체의 정보 및 상기 포인트 클라우드 데이터 처리가 완료된 객체의 정보를 융합하여 상기 트램의 전방 또는 측방에 위치한 객체를 검지하고 종류를 구분하고 거리를 측정하는단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "공개특허 10-2024-0163223-4-제13항에 있어서,상기 컨트롤러는 상기 검지된 객체의 위치와 상기 트램의 ROI(Region Of Interest) 영역을 비교하여 상기 객체와 상기 트램의 충돌 위험도를 판단하고 상기 트램의 운행 속도 또는 정지 여부를 결정하는 단계를 포함하는,트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서,상기 컨트롤러는 상기 객체 중 충돌 위험으로 판단되는 객체들 중, 가장 가까운 거리의 객체를 선별하고 충돌을회피하기 위한 감속 목표 속도를 계산하여 상기 객체와의 거리가 최소안전거리 이내일 때 긴급 정차를 결정하는단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제11항에 있어서,상기 컨트롤러는 상기 라이다가 산출한 정보에 SLAM(Simultaneous Localization and Mapping)을 적용하여 미리저장된 주행 구간 데이터맵과 상기 라이다가 측정한 포인트 클라우드를 비교하여 상기 트램의 위치를 상기 데이터맵에서 확인하는 단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제16항에 있어서,상기 컨트롤러는 상기 위치측정기가 생성한 측위 결과와 상기 컨트롤러가 상기 데이터맵에서 확인한 트램의 위치를 융합하여 상기 트램의 위치를 확정하는 단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제11항에 있어서,상기 컨트롤러는 상기 트램이 주행하는 경로에 배치된 도로교통 요소들에 대한 정보가 정의된 벡터 맵과 상기트램의 실시간 위치를 비교하여 상기 트램의 주행 목표 속도를 결정하는 단계를 포함하는, 트램의 자율주행을제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제11항에 있어서,상기 신호수신기는 상기 트램의 전방에 배치된 신호등과 V2X 통신으로 현재 신호등의 신호 상태 및 신호 전환까지의 잔여시간 정보를 수신하는 단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제19항에 있어서,상기 컨트롤러는 상기 잔여시간 정보와 상기 트램의 주행 속도, 상기 신호등이 설치된 교차로와의 거리 정보를이용하여 트램의 속도와 정지 여부를 결정하는 단계를 포함하는, 트램의 자율주행을 제어하는 방법."}
{"patent_id": "10-2023-0060038", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_21", "content": "제11항 내지 제20항 중 어느 한 항에 따른 트램의 자율주행을 제어하는 방법을 구현하는 컴퓨터 프로그램을 기록한 컴퓨터로 읽을 수 있는 매체."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 트램의 자율주행을 제어하는 시스템 및 이를 구현하는 방법에 관한 것으로, 본 발명의 일 실시예에 따 른 자율주행 제어 시스템은 트램의 전방 또는 측방의 객체를 촬영하는 카메라와 트램의 전방 또는 측방의 객체에 대한 정보를 생성하는 라이다와 트램의 위치 정보를 생성하는 위치측정기와 트램의 진행 방향에 배치된 신호등으 로부터 신호를 수신하는 신호수신기와 카메라, 라이다, 위치측정기, 신호수신기로부터 정보를 수신하여 트램의 이동 속도를 결정하는 제어 명령 또는 트램의 이동 또는 정지에 대응하는 제어 명령을 생성하며, 카메라 및 라이 다가 감지한 객체의 유클리드 거리를 반영하여 객체 검지 결과를 합성하여 객체를 식별하는 컨트롤러를 포함한다."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 트램의 자율주행을 제어하는 시스템 및 이를 구현하는 방법에 관한 것이다."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "트램은 도로를 주행하는 다른 교통수단에 대비하여 월등하게 우수한 수송력과 안전성, 그리고 접근성을 제공하 는 신 교통수단이다. 또한 트램은 도시 내에서 이동한다는 점에서 보행자, 자동차 등과의 충돌을 방지하며 이동 하는 것이 필요하다. 따라서, 트램을 운영함에 있어서 다양한 상황에 대처하여 충돌을 회피하는 방안이 요청된다."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 명세서에서는 자율주행 기반 트램이 안전하게 운영되도록 제어하는 기술을 제공하고자 한다. 본 명세서에서는 자율 주행 트램이 주행 중 보행자나 자동차가 끼어드는 상황에 충돌 없이 대응하는 기술을 제 공하고자 한다. 본 명세서에서는 자율 주행 트램이 주변 및 주행 방향 전후의 사물들을 식별하여 자율 주행의 정확도와 안전성 을 높이고자 한다. 본 발명이 해결하고자 하는 과제는 이상에서 언급한 과제들로 제한되지 않으며, 여기서 언급되지 않은 또 다른 과제들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 자율주행 제어 시스템은 트램의 전방 또는 측방의 객체를 촬영하는 카메라와 트램 의 전방 또는 측방의 객체에 대한 정보를 생성하는 라이다와 트램의 위치 정보를 생성하는 위치측정기와 트램의 진행 방향에 배치된 신호등으로부터 신호를 수신하는 신호수신기와 카메라, 라이다, 위치측정기, 신호수신기로 부터 정보를 수신하여 트램의 이동 속도를 결정하는 제어 명령 또는 트램의 이동 또는 정지에 대응하는 제어 명 령을 생성하며, 카메라 및 라이다가 감지한 객체의 유클리드 거리를 반영하여 객체 검지 결과를 합성하여 객체 를 식별하는 컨트롤러를 포함한다. 본 발명의 일 실시예에 따른 트램의 자율주행을 제어하는 방법은 자율주행 제어 시스템의 카메라가 트램의 전방 또는 측방의 객체를 촬영하는 단계와 자율주행 제어 시스템의 라이다가 트램의 전방 또는 측방의 객체에 대한 정보를 생성하는 단계와 자율주행 제어 시스템의 위치측정기가 트램의 위치 정보를 생성하는 단계와 자율주행 제어 시스템의 신호수신기가 트램의 진행 방향에 배치된 신호등으로부터 신호를 수신하는 단계와 자율주행 제어 시스템의 컨트롤러가 카메라, 라이다, 위치측정기, 신호수신기로부터 정보를 수신하여 카메라 및 라이다가 감지 한 객체의 유클리드 거리를 반영하여 객체 검지 결과를 합성하여 객체를 식별하여 트램의 이동 속도를 결정하는 제어 명령 또는 트램의 이동 또는 정지에 대응하는 제어 명령을 생성하는 단계를 포함한다."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시예를 구현할 경우 자율주행 기반 트램이 안전하게 자율 주행을 수행할 수 있다. 본 발명의 실시예를 구현할 경우 자율 주행 트램이 주행 중 보행자나 자동차가 끼어드는 상황에 충돌 없이 대응 할 수 있다. 본 발명의 실시예를 구현할 경우 자율 주행 트램이 주변 및 주행 방향 전후의 사물들을 식별하여 자율 주행의 정확도와 안전성을 높일 수 있다. 본 발명이 제공하는 효과는 이상에서 언급한 효과들로 제한되지 않으며, 여기서 언급되지 않은 또 다른 효과들 은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나, 본 발명은 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서 로 다른 다양한 형태로 구현될 것이며, 단지 본 실시예들은 본 발명의 개시가 완전하도록 하며, 본 발명이 속하"}
{"patent_id": "10-2023-0060038", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "는 기술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명 은 청구항의 범주에 의해 정의될 뿐이다. 본 발명을 명확하게 설명하기 위해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 동일 또는 유사한 구성요소에 대해서는 동일한 참조 부호를 붙이도록 한다. 또한, 본 발명의 일부 실시예들을 예시적인 도 면을 참조하여 상세하게 설명한다. 각 도면의 구성요소들에 참조부호를 부가함에 있어서, 동일한 구성요소들에 대해서는 비록 다른 도면상에 표시되더라도 가능한 한 동일한 부호를 가질 수 있다. 또한, 본 발명을 설명함에 있어, 관련된 공지 구성 또는 기능에 대한 구체적인 설명이 본 발명의 요지를 흐릴 수 있다고 판단되는 경우에 는 그 상세한 설명은 생략할 수 있다. 또한, 본 발명의 구성 요소를 설명하는 데 있어서, 제 1, 제 2, A, B, (a), (b) 등의 용어를 사용할 수 있다. 이러한 용어는 그 구성 요소를 다른 구성 요소와 구별하기 위한 것일 뿐, 그 용어에 의해 해당 구성 요소의 본 질, 차례, 순서 또는 개수 등이 한정되지 않는다. 어떤 구성 요소가 다른 구성요소에 \"연결\", \"결합\" 또는 \"접 속\"된다고 기재된 경우, 그 구성 요소는 그 다른 구성요소에 직접적으로 연결되거나 또는 접속될 수 있지만, 각 구성 요소 사이에 다른 구성 요소가 \"개재\"되거나, 각 구성 요소가 다른 구성 요소를 통해 \"연결\", \"결합\" 또는 \"접속\"될 수도 있다고 이해되어야 할 것이다. 본 명세서에서는 자율주행 기반 트램의 스마트 안전 운영 시스템 및 이를 구현하는 방법을 제시한다. 트램(Tram)은 도로를 주행하는 다른 교통수단과 비교할 때, 우수한 수송력과 안전성, 그리고 접근성을 제공하는 신 교통수단이다. 한편 트램은 다른 도로교통 수단보다 무게가 무겁기 때문에 낮은 속도에서도 짧지 않은 정지 거리를 가진다. 특히 철제 휠을 사용하는 트램의 경우에 정지 거리가 길어질 수 있다. 트램과 관련된 사고들 중에 높은 빈도로 발생하는 것은 갑자기 끼어드는 자동차, 보행자 등과의 충돌로 발생한 사고이다. 따라서 트램 주행 중 보행자나 자동차 등의 객체가 갑작스럽게 끼어드는 상황이 발생할 경우 이에 대 한 빠른 판단에 기반하여 제동이 필요하다. 이러한 중요한 사고 대처 방안은 기관사의 역량에만 의존하는 것보 다는 자율주행 시스템을 도입하는 것이 안전하다. 특히 자율주행 시스템은 기관사를 보조하거나 위험 상황에서 는 빠르게 대응할 수 있도록 하여 사고 발생율을 줄일 수 있다. 최근 새로운 운송 수단으로 트램을 도입하려는 시도가 증가하면서 도입 초기에 많은 교통사고가 우려되므로 이 에 즉각적으로 대응할 수 있는 안전 운영 시스템이 필요하다. 이하, 본 명세서에서는 트램 운영의 안전성을 높이기 위해서 트램의 자율 주행 과정에서 다음과 같은 기술적 특 징을 제공하는 시스템 및 방법에 대해 살펴본다. 본 명세서에서는 트램이 실시간 위치에 따른 구간의 제한속도 를 준수하도록 제어하는 실시예를 제시한다. 본 명세서는 트램이 V2X(Vehicle to Everything) 통신을 기반으로 교차로 신호등 상태를 감지하여 주행 또는 정 차 판단과 제어를 수행하는 실시예를 제시한다. 본 명세서에서는 트램의 전방과 측방의 객체의 감지 및 객체와 의 충돌 위험도를 판단하고 결과에 따라서 충돌 회피 기동을 스스로 시행하는 자율주행 기반 트램의 스마트 안 전 운영 시스템 및 방법을 제공하는 것을 실시예로 한다. 도 1은 본 발명의 일 실시예에 의한 시스템의 구성요소를 보여주는 도면이다. 각각의 구성요소들은 별도의 하드 웨어로 트램에 배치되며 각 구성요소들은 유선 통신 또는 무선 통신 프로토콜을 이용하여 컨트롤러와 통신 할 수 있다. 또한, 각각의 구성요소들은 소프트웨어를 더 포함할 수 있으며, 컨트롤러의 제어에 따라 동작 할 수 있다. 컨트롤러는 연산장치에 해당하며, 카메라, 라이다, 위치 측정기, 신호 수신기, 이동 거리 계산기 등이 획득한 정보를 처리하여 트램의 주행을 제어한다. 본 발명의 자율주행 제어 시스템(10 0)의 컨트롤러는 하나의 컴퓨터 또는 독립적인 하드웨어나 소프트웨어가 될 수 있으며, 컨트롤러는 TCMS(Train Control Monitoring System)에게 소정의 제어 명령을 전송한다. 다른 실시에예 의하면 자율주행 제어 시스템과 TCMS가 하나의 시스템을 구성할 수 있다. 카메라 및 라이다는 트램의 전방 또는 측방, 후방 등에 있는 사람이나 사물 등의 객체를 촬영한다. 그리고 촬영한 정보는 컨트롤러에게 전달된다. 위치 측정기는 트램의 위치를 추정한다. 신호 수신기는 교차로 등에 설치된 트램 전용 신호등이 생성 한 신호를 유선 또는 무선 통신을 통해 수신하여 이를 컨트롤러에게 전달하여 컨트롤러가 트램의 주 행을 제어한다. 이동 거리 계산기는 트램이 이동한 거리를 계산하는데, 예를 들어 차륜의 회전수를 카운팅하는 타코메터를 일 실시예로 포함한다. 컨트롤러는 위치 측정기 및 이동 거리 계산기가 제공한 정보를 결합하여 트램의 위치를 정밀하게 확인할 수 있다. 컨트롤러는 다양한 구성요소들이 제공하는 정보에 기반하여 트램이 급정지를 해야 하는 상황인지 혹은 주 행을 계속해야 하는 상황인지를 확인하여 자동으로 트램의 주행 상황을 변경하거나 유지할 수 있다. 컨트롤러 는 빠르고 정확하게 정보를 처리하기 위해 하나의 구성요소(하드웨어 또는 소프트웨어)로 구현될 수 있다. 또는 컨트롤러는 둘 이상의 구성요소(하드웨어 또는 소프트웨어)로 분리되어 동작할 수 있다. 또는 컨트롤러는 트램 운전자에게 주행 상황의 변경이나 유지를 제안할 수 있다. 인터페이스는 트램 운전자에게 현재 트램의 주행과 관련된 긴급 상황 정보, 일반 주행 정보 등을 제공한다. 전술한 카메라 및 라이다는 촬영 각도나 범위에 따라 트램의 전후좌우에 하나 또는 둘 이상 배치될 수 있다. 카메라 및 라이다의 결과를 이용하여 컨트롤러는 객체를 식별한다. 객체를 식별하는 작업은 객 체를 검사하여 객체임을 확인하는 일련의 작업들을 포함한다. 도 1의 구성을 정리하면 다음과 같다. 카메라는 트램의 전방 또는 측방의 객체를 촬영한다. 라이다 는 트램의 전방 또는 측방의 객체에 대한 정보를 생성한다. 위치측정기는 트램의 위치 정보를 생성하며 신호수신기는 트램의 진행 방향에 배치된 신호등으로부터 신호를 수신한다. 이동 거리 계산기 는 트램이 이동한 거리를 계산한다. 컨트롤러는 전술한 구성요소들로부터 정보를 수신하여 트램의 이동 속도를 결정하는 제어 명령 또는 트 램의 이동 또는 정지에 대응하는 제어 명령을 생성한다. 특히, 컨트롤러는 카메라 및 라이다(12 0)가 감지한 객체의 유클리드 거리를 반영하여 객체 검지 결과를 합성하여 객체를 식별한다. 객체 검지란 카메라나 라이다 등의 센서가 감지한 정보를 검사하여 객체의 유무 또는 외관 등을 확인하는 것을 의미한다. 또한 객체 검지는 객체를 감지하는 일련의 프로세스 및 감지 결과를 포함한다. 본 명세서의 자율주행제어 시스템은 두 개의 센서가 확보한 객체들 사이의 거리를 통해 객체 인식의 정확도를 높일 수 있다. 도 2는 본 발명의 일 실시예에 의한 각각의 구성요소들이 트램에 배치된 실시예를 보여주는 도면이다. 트램 의 외형은 다양하게 구현될 수 있다. 각각의 화살표는 카메라, 라이다 등의 구성요소가 배치된 위치를 지시한다. 각각의 구성요소들의 위치는 구성요소가 정보를 취득하기에 적합하도록 결정되며 본 발명이 이에 한 정되는 것은 아니다. 먼저 카메라들이 배치된 실시예를 살펴본다. 트램의 전방에 두 개의 카메라(110w, 110n)가 배치될 수 있다. 일 실시예로, 협각 카메라(110n)와 광각 카메라(110w)가 트램의 전방에 배치되어 전방 감시 카메라로 작동할 수 있다. 협각 카메라(110n)는 트램 전방의 장거리 객체를 촬영하고, 광각 카메라(110w)는 협각 카메라 (110n)가 관측하지 못하는 전방의 근거리 정보를 촬영한다. 카메라 영상 데이터는 컨버터 보드 또는 여러 통신 프로토콜을 이용하여 컨트롤러에게 전달된다. 또한, 측방 감시를 위해 광각 카메라 2대(110s1, 110s2)가 각각 트램의 후방과 전방을 감시하도록 설치될 수 있으며 이는 좌측 및 우측 모두에 배치될 수 있다. 또한, 측방에 배치된 카메라(110s1, 110s2)는 트램을 구 성하는 모든 차량에 각각 배치될 수도 있다. 측방에 배치된 카메라(110s1, 110s2)는 정거장 등에서 트램이 정차 또는 출발할 때 트램 인근에 근접한 보행자 또는 사물들을 촬영한다. 컨트롤러는 트램 주변에 근접한 보행자나 사물들과의 거리를 판단하여 트램의 출발, 정지, 서행 등을 제어할 수 있다. 또한 트램에는 두 개의 라이다를 배치할 수 있다. 일 실시예로 고채널 라이다(120h) 및 저채널 라이다(120a, 120b)를 모두 트램의 앞쪽에 배치할 수 있다. 고채널 라이다(120h)는 트램의 상단에 설치되어서 전방과 측방을 감시할 수 있으며, 64채널 라이다를 일 실시예로 한다. 또한, 저채널 라이다(120a, 120b)는 각각 트램 전방의 좌, 우에 위치하여 고채널 라이다의 사각지대를 감시할 수 있다. 위치를 측정하기 위해 GNSS-INS 모듈(130i)과 2대의 GNSS 안테나(130a, 130b)가 트램의 전방 및 상방에 배 치될 수 있다. GNSS-INS 모듈(130i)은 GPS와 IMU가 통합된 센서로써 고정밀 GPS 좌표 및 가속도 정보와 미터 단 위를 갖는 UTM 좌표를 제공하여 트램의 위치 추정의 정밀도를 높일 수 있다. 신호 수신기(140v)는 V2X 통신을 통해 교차로 등에 설치된 트램 전용 신호등과 통신을 수행한다. 트램이 신호등에 접근하면 신호 수신기(140v)는 신호등의 현재 상태정보(신호 상태, 다음 신호로 변경까지 잔여 시간)등을 수신하고, 신호 수신기(140v)는 수신한 신호 또는 수신한 신호에 대한 정보를 컨트롤러에게 V2X 통신을 통하여 제공할 수 있다. 이동 거리 계산기(180a)는 일 실시예로 타코메터 센서로 구현될 수 있으며, 트램의 주행에 따른 차륜의 회전 수를 카운트하고, 컨트롤러는 카운트한 회전수를 이용하여 주행 속도값을 계산할 수 있다. 정확도를 위해 이동 거리 계산기(180a)는 다수의 차륜에 배치될 수 있다. 도 3은 본 발명의 일 실시예에 의한 도 2의 구성요소의 배치를 상측 방향에서 도시한 도면이다. 트램의 좌측 및 우측에 각각 광각 카메라 4대(110s1, 110s2, 110s3, 110s4)가 배치되어 있으며, 저채널 라이 다(120a, 120b)가 트램 전방 좌측 및 우측에 각각 배치되어 있다. 그 외 각 구성요소에 대한 설명은 도 2를 참조한다. 본 발명의 일 실시예에 의하면 컨트롤러는 각각의 구성요소들(110, 120, 130, 140, 180)이 전송하는 정보 를 처리할 수 있다. 또는 도 2 및 도 3의 구성에서 정보의 빠른 연산을 위해 컨트롤러가 둘 이상 구성될 수 있다. 예를 들어 자율주행 제어 시스템은 빠른 연산 처리를 위해 전방에서 취득한 정보들을 처리하는 제1컨트롤러와 측방에서 취득한 정보들을 처리하는 제2컨트롤러를 포함할 수 있다. 이 경우, 각각의 컨트롤러들 이 처리한 정보들에 따라 종합적으로 트램의 주행 명령을 생성하여 TCMS에게 주행을 제어하는 명령을 전송하여 트램의 주행을 제어할 수 있다. 자율주행 제어 시스템은 미리 설정된 통신 채널(예를 들어 특정 포트)를 통해 트램의 주행 제어 명령값 을 출력하고 그에 따라 트램은 주행을 지속하거나 속도를 조절하거나 혹은 일시 정지를 할 수 있다.도 2 및 도 3의 실시예는 다수의 카메라들과 라이다, Lidar, GNSS-INS 등을 포함하는 센서들로부터 컨트롤러 가 데이터를 수집하고 처리하며, 자율주행을 위한 기능별 알고리즘을 적용한 트램의 자율주행 시스템을 보여준다. 도 4는 본 발명의 일 실시예에 의한 두 개의 컨트롤러가 다수의 구성 요소들로부터 정보를 수신하는 세부 구성 을 보여주는 도면이다. 도 4에서 두 개의 컨트롤러(150a, 150b)는 센서 데이터를 포함한 각종 정보의 취득, 데이터의 분석, 자율 주행 에 필요한 데이터를 산출하는 기능 등 다양한 기능을 분산하여 연산장치의 과부하에 따른 자율주행 기능 정지 등의 우발상황을 방지할 수 있다. 일 실시예로 도 4의 제1컨트롤러(150a)는 카메라 중 전방에 설치된 광각 카메라(110w) 및 협각 카메라(110n)로 부터 데이터를 수집할 수 있다. 이 과정에서 각각의 전방 컨버터(201n, 201w)는 카메라(110n, 110w)가 생성한 비디오 데이터의 고속 전송 및 안전 전송을 지원할 수 있다. 전방 컨버터(201n, 201w)는 전방에 설치된 카메라(110n, 110w)와의 통신에서 LVDS(Low Voltage Differential Signaling)를 적용할 수 있다. 또한 전방 컨버터(201n, 201w)는 제1컨트롤러(150a)와 USB에 기반하여 통신할 수 있다. 이를 위해 전방 컨버터(201n, 201w)는 전방에 설치된 카메라(110n, 110w)의 비디오 데이터를 USB 방식으 로 전환할 수 있다. 또한, 제1컨트롤러(150a)는 라이다(120a, 120b, 120h)로부터 데이터를 수집한다. 이 과정에서 스위치 허브(20 2)는 라이다(120a, 120b, 120h)가 생성한 데이터를 제1컨트롤러(150a)에게 이더넷(Ethernet) 방식으로 전송할 수 있다. 제1컨트롤러(150a)는 위치 측정기(130a, 130b, 130i)가 측정한 위치 정보를 전달받을 수 있다. 일 실시예로 절 대좌표 측정을 위한 GNSS-INS 모듈(130i)은 USB 방식으로 제1컨트롤러(150a)에게 데이터를 전송하며, LTE 라우 터가 2대의 GNSS 안테나(130a, 130b) 및 GNSS-INS 모듈(130i)이 생성한 데이터를 제1컨트롤러(150a)에게 이더넷(Ethernet) 방식으로 전송할 수 있다. 정리하면, 제1컨트롤러(150a)는 전방 카메라 데이터, 라이다 데이터, GNSS-INS 데이터를 수집하고, 트램의 고정밀 위치 추정과 전방의 객체를 식별하는 기능을 수행할 수 있다. 한편, 제2컨트롤러(150b)는 측방의 카메라(110s1, 110s2)로부터 데이터를 수집할 수 있다. 이 과정에서 각각의 측방 컨버터(201s1, 201s1)는 측방 카메라(110s1, 110s2)가 생성한 비디오 데이터의 고속 전송 및 안전 전송을 지원할 수 있다. 측방 컨버터(201s1, 201s1)는 측방 카메라(110s1, 110s2)와의 통신에서 LVDS(Low Voltage Differential Signaling)를 적용할 수 있다. 또한 측방 컨버터(201s1, 201s1)는 제2컨트롤러(150b)와 USB에 기 반하여 통신할 수 있다. 이를 위해 측방 컨버터(201s1, 201s1)는 측방 카메라(110s1, 110s2)의 비디오 데이터를 USB 방식으로 전환할 수 있다. 제2컨트롤러(150b)는 신호수신기(140v)로부터 트램 전용 신호기의 신호 정보를 수신할 수 있다. 신호수신기 (140v)는 V2X 통신에 기반하여 제2컨트롤러(150b)에게 신호기의 정보를 전송할 수 있다. 이동거리 계산기, 예를 들어 타코메터는 트램이 이동한 거리를 계산하고 이를 제2컨트롤러(150b)에게 USB 방식으로 전송할 수 있다. 제2컨트롤러(150b)는 측방 카메라(110s1, 110s2)를 이용한 측방의 객체를 검지하여 식별할 수 있다. 즉, 제2컨트롤러(150b)는 측방의 카메라들(110s1, 110s2)이 생성한 데이터에 기반한 객체 정보, 이동거리 계산 기가 생성한 타코메터 속도 데이터, 신호수신기(140v)로부터 V2X 통신에 의해 수신한 신호등 정보를 처리 할 수 있다. 그리고 제2컨트롤러(150b)는 제1컨트롤러(150a)로부터 트램의 고정밀 위치 정보와 전방 객체 정 보를 수신할 수 있다. 전방 객체 정보는 제1컨트롤러(150a)가 객체 검지 기능을 수행한 결과 산출된 정보로, 전 방에 설치된 광각 카메라(110w)와 협각 카메라(110n)와 라이다(120a, 120b, 120h)로부터 산출된 정보이다. 제2컨트롤러(150b)는 전술한 정보들을 종합하여 트램의 주행 명령을 계산하고 TCMS에게 주행 명령을 입 력한다. 제1컨트롤러(150a) 및 제2컨트롤러(150b)와 같이 기능을 분산한 것은 일 실시예이며, 본 발명은 이에 한정되지 않는다.본 명세서에서 컨트롤러는 하나 또는 그 이상의 컨트롤러들에 구현될 수 있으며 본 발명은 컨트롤러에 한 정되지 않는다. 도 3 및 도 4의 실시예에서 트램의 위치 정보의 정확도를 높이기 위해 트램의 실시간 절대좌표 측정을 위 한 GNSS-INS(130i)를 사용하며, 데이터의 수신율 및 정확도를 높이기 위한 2대의 안테나(130a, 130b)와 LTE 통 신 모듈로 데이터를 송수신할 수 있다. 이하 각 구성요소들의 세부적인 동작 과정을 살펴본다. 도 5는 본 발명의 일 실시예에 의한 카메라를 이용한 객체를 식별하고 분류하는 과정을 보여주는 도면이다. 컨트롤러는 각각의 카메라가 전송한 데이터에서 객체를 식별하고 추적한다(S11). 컨트롤러는 이미지 에서 객체를 검지하는 객체 검지 모듈을 하위 구성요소로 포함할 수 있다. 객체 검지 모듈은 카메라 영상에 AI 기술을 적용하여 이미지 내의 객체를 식별한다. 일 실시예로, 객체 검지 모듈은 YOLOX를 사용할 수 있으나 본 발명이 이에 한정되지 않는다. AI 학습을 적용하는 객체 검지 모듈은 범용 데이터셋을 이용하거나 혹은 해당 트램이 노선을 이동하며 촬영 한 이미지들에 기반하여 구성된 트램 노선용 데이터셋을 이용할 수 있다. 범용 데이터셋의 일 실시예로 객체 검 지 모듈은 MSCOCO 데이터셋을 적용하여 객체를 식별할 수 있다. MSCOCO 데이터셋은 80가지 종류의 다양한 객체정보를 포함하고 있고, 118,287개의 학습용 데이터, 5,000개의 학 습 결과모델 검증 데이터, 40,670개의 테스트용 일반 데이터를 포함한다. 본 발명의 일 실시예에 따라 객체 검지 모듈은 트램 노선이 이동하며 촬영한 이미지로 구성된 트램 노선용 데이 터셋을 이용하여 객체를 식별할 수 있다. 트램 노선용 데이터셋은 트램이 주기적으로 이동하는 공간에 특화 하여 객체들의 정보를 저장하므로, 객체 검지 모듈은 트램 노선용 데이터셋을 적용하여 보다 신속하게 객체를 식별할 수 있다. 또는 객체 검지 모듈은 범용 데이터셋과 트램 노선용 데이터셋을 모두 적용하여 객체를 식별할 수 있다. 객체 검지 모듈은 협각 카메라(110n) 및 다수의 광각 카메라들(110w, 110s1, 110s2 ... )이 촬영한 데이터에 범 용 데이터셋과 트램 노선용 데이터셋 중 어느 하나 또는 둘을 적용하여 객체를 검지하고 추적할 수 있다. 일 실시예로, 객체 검지 모듈은 각각의 카메라가 산출한 데이터에 대해 모두 YOLOX를 개별적으로 적용하여 객체 를 검지하고 추적할 수 있다. 또한 객체 검지 모듈은 전방의 카메라와 측방의 카메라가 촬영한 데이터에 대해서는 데이터셋을 각각 적용할 수 있다. 일 실시예로 객체 검지 모듈은 전방의 카메라(110w, 110n)가 촬영한 데이터에 대해서는 트램 노선용 데이 터셋을 적용하고 측방의 카메라(110s1, 110s2, 110s3, 110s4)가 촬영한 데이터에 대해서는 범용 데이터셋을 적 용할 수 있다. 또는 이와 반대로 적용할 수도 있다. 또한, 객체 검지 모듈은 협각 카메라(110n)가 촬영한 데이터에 대해서는 트램 노선용 데이터셋을 적용하고 광각 카메라(110w, 110s1, 110s2, 110s3, 110s4)가 촬영한 데이터에 대해서는 범용 데이터셋을 적용할 수 있다. 또는 이와 반대로 적용할 수도 있다. 컨트롤러는 객체에 대한 정보를 생성한다(S12). 예를 들어 컨트롤러는 객체 검지 모듈이 검지한 객체 에 대해 객체의 종류, 트램과의 2D 거리정보, 객체의 크기, 객체의 이동 속도를 생성할 수 있다. 그리고 컨트롤러는 검지된 객체들에 대해 생성된 정보를 기준으로 이미지 데이터에 포함된 객체들을 분류 한다. 일 실시예로, 컨트롤러는 검지된 객체가 사람, 자동차, 자전거, 오토바이에 해당하는지를 분류할 수 있다. 또한, 컨트롤러는 검지된 객체가 휠체어, 전동킥보드, 현수막 등에 해당하는지를 분류할 수 있다. 또한, 컨트롤러는 트램의 이동 노선에 가장 빈번하게 확인될 수 있는 객체들을 우선 구분하고 그 외의 객체들을 기타로 분류할 수 있다. 그 결과, 컨트롤러는 객체에 대해 사람, 자동차, 자전거, 오토바이를 우 선 분류할 수 있다. 또한 컨트롤러는 휠체어, 전동킥보드, 현수막 등은 기타로 분류할 수 있다. 일 실시예로, 촬영한 이미지 데이터가 사람이 휠체어를 타고 있거나 사람이 전동킥보드를 타고 있거나, 혹은 사람이 현수막을 설치하는 이미지를 포함할 경우, 컨트롤러는 해당 객체를 사람으로 우선적으로 분류할 수 있다. 도 6은 본 발명의 일 실시예에 의한 라이다를 이용한 객체를 식별하는 과정을 보여주는 도면이다. 도 6의 과정 은 라이다가 산출한 데이터를 이용하여 객체를 검지하는 과정을 보여준다. 컨트롤러는 라이다로부터 입력받은 3D 포인트 클라우드에서 지면에 해당되는 포인트들을 선별하고 지 면을 제거한다(S21). S21 단계에서 입력값은 포인트 클라우드 데이터와 랜덤 샘플 컨센서스(Random sample consensus)이다. 그리고 S21 단계에서 출력값은 분할된 지면과 분할된 관심 클라우드이다. 출력된 정보들은 식 별 정보를 별도로 가질 수 있다. 다음으로, 컨트롤러는 클라우드 필터링을 수행한다(S22). 컨트롤러는 지면이 제거된 3D 포인트 클라 우드에서 관심 영역의 포인트들만을 추출하고, 그 중에서 인접한 포인트 클라우드들을 군집화한다. 그 결과 지 면과 객체가 같이 군집화 되는 것을 방지하고, 불필요한 연산 포인트 수를 줄일 수 있다. S22단계에서 입력값은 분할된 관심 클라우드와 관심영역 필터링 매개변수이다. 그리고 S22단계에서 출력값은 필터링된 클라우드이다. 다음으로 컨트롤러는 복셀화(Voxcelization)를 수행한다(S23). 이는 3D 포인트 클라우드 공간에서 N개의 포인트를 1개의 셀 형식으로 변환해주는 작업으로, 컨트롤러는 다수의 포인트를 하나의 셀로 압축시킴으로 써 포인트 클라우드의 정규화, 이산신호화로 연산 효율을 높일 수 있다. S23단계에서 입력값은 필터링된 클라우 드와 복셀화된 매개변수이다. S23단계에서 출력값은 복셀화된 포인트 클라우드이다. 이후 컨트롤러는 군집을 추출한다(S24). 컨트롤러는 복셀화된 포인트 클라우드에서 유사한 값을 갖는 포인트들을 군집하고 각 군집체들의 무게 중심을 추출한다. S24 단계의 입력값은 복셀화된 포인트 클라우드와 군집화된 매개변수이다. S24단계에서 출력값은 객체 군집 및 군집의 무게 중심이다. 그리고 컨트롤러는 경계 영역을 추출한다(S25). 컨트롤러는 군집체들 사이의 경계영역을 추출하여 최 종적으로 객체를 검지한다. S25 단계의 입력값은 객체 군집과 군집의 무게 중심이다. 그리고 S25 단계의 출력값 은 객체 차원이다. 검지된 객체들의 정보는 트램과의 3D 거리, 객체의 크기, 객체의 이동 속도를 반환하며, 객 체의 종류는 구분하지 않는다. 이후 컨트롤러는 투영 프로세스를 수행한다(S26). 입력값으로는 이미지(앞/뒤), 내부 매개변수, 외부 매 개변수이며 출력값은 투영된 이미지이다. 이미지는 경우에 따라 좌/우인 실시예를 포함한다. 도 5 및 도 6의 실시예를 적용할 경우, 컨트롤러는 카메라가 촬영한 영상 데이터에 인공지능 객체 인 식 모듈을 적용하여 객체를 인식 및 분류한다. 또한, 컨트롤러는 라이다가 생성한 정보에 대해 포인 트 클라우드 데이터 처리를 수행한다. 또한 라이다가 주변의 객체를 검지한 결과는 위치 정보와 함께 누적 저장하여 추후 트램이 동일한 위치를 이동할 경우 다시 한번 이전의 객체 검지 결과와 비교하여 고정된 객체인지 여부를 판단할 수 있다. 만약 동일 한 객체가 반복하여 검지될 경우 컨트롤러는 해당 객체를 고정물로 판단할 수 있다. 트램은 고정된 영 역을 이동하므로 한번 설치된 객체(예를 들어 가로등, 현수막 등)는 고정되어 배치될 수 있다. 따라서 이를 반 영하여 트램의 객체 인식의 정확도를 높일 수 있다. 도 7은 본 발명의 일 실시예에 의한 카메라 및 라이다에서 수행한 객체 식별 결과를 합성하는 과정을 보여주는 도면이다. 컨트롤러는 전방, 측방의 감시 카메라가 생성한 영상 데이터에 인공지능 객체 검지 알고리즘을 적용하여 객체를 인식한다. 또한 컨트롤러는 라이다가 생성한 데이터에 대해 포인트 클라우드 데이터 처리를 수행하여 객체를 인 식한다. 컨트롤러는 두 개의 센서들(110, 120)이 생성한 정보들을 융합함으로써 트램 전방과 측방의 객체 를 검지하고 객체의 종류를 구분 및 분류하여 객체와 트램 사이의 거리를 측정하여 객체를 추적할 수 있다. 컨트롤러가 카메라 및 라이다가 객체를 검지한 결과를 합성하는 퓨전 알고리즘의 작동 과정이 다. 컨트롤러는 객체 간의 유클리드 거리와 OR 연산을 이용하여 카메라와 라이다로부터 검출된 각각의 객체들을 합성한다. 상세히 각 단계를 살펴본다. 컨트롤러는 카메라에서 생성된 이미지의 검출 결과(S18)를 이용하여 거리를 추정한다(S19). 또한 컨 트롤러는 라이다에서 생성된 라이다 검출 결과(S28)인 검지된 객체의 좌표값(x,y,z)을 카메라 영상의 좌표(x,y) 기준으로 변환하여 모든 객체들의 좌표 기준값을 2D로 변환하여 통일한다(S29). 또한 컨트롤러는 거리추정한 결과와 2D로 변환한 결과의 시간을 동기화시켜(S31) 입력 데이터를 분석한다 (S32). 그리고 컨트롤러는 유클리드 거리에 기반하여 퓨전한 후(S33) OR 연산을 수행한다(S34). 보다 상세히 살펴보면 컨트롤러는 객체들의 중앙점 사이의 거리를 계산하고 특정 값보다 낮은 거리를 갖는 객체는 하나의 객체로 가정하고 합성한다. 합성되지 못한 객체들에 대해 컨트롤러는 OR 연산으로 합성하여 카메라, 라이다 각각에서 검지된 객체의 모든 정보를 포함하는 객체 집합을 만든다. 컨트롤러는 합성된 객체의 거리 정보를 처리함에 있어 라이다로 측정된 거리정보를 우선 사용함으로 써 카메라로 측정한 객체의 거리정보 오차를 보완한다. 컨트롤러는 합성된 객체의 종류를 구분함에 있어서는 카메라의 객체 검지 결과를 우선 따르고, 종류 구분이 되지 않는 객체는 기타로 분류한다. 컨트롤러는 합성된 객체의 크기 정보를 산출함에 있어 카메라의 객체 검지 결과를 우선 따르고, 크기 가 파악되지 않는 객체는 라이다의 객체 검지 결과를 반영한다. 컨트롤러는 연산 결과를 출력한다 (S35). 또한, 시스템은 인체 감지의 정밀도를 높이기 위해 근접 거리 내의 인체를 감지하는 적외선 센서를 더 포 함하고 적외선 센서가 감지한 정보를 카메라 또는 라이다가 검지한 객체 식별 결과와 합성할 수 있다. 도 7의 실시예를 적용하면, 컨트롤러는 카메라가 인식 및 분류한 객체의 정보 및 포인트 클라우드 데 이터 처리가 완료된 객체의 정보를 융합하여 트램의 전방 또는 측방에 위치한 객체를 검지하고 종류를 구분 하고 거리를 측정할 수 있다. 본 발명의 실시예에서는 여러 환경적 변화에 대응하여 트램의 측위 정보의 정확도를 높이기 위해 컨트롤러 는 SLAM 알고리즘을 이용하여 라이다로부터 측정된 포인트 클라우드와 사전에 제작한 주행 구간 데이 터 맵을 실시간으로 비교하여 트램의 위치와 이동거리를 추정할 수 있다. 또한, 컨트롤러는 위치측정기, 예를 들어 GNSS-INS 센서에서 측정된 측위 결과와 앞서 SLAM 알고리즘 으로 추정된 측위 결과를 칼만필터를 이용하여 융합하여 위치 정보의 정확도를 높일 수 있다. 도 8에서 상세히 살펴본다. 도 8은 본 발명의 일 실시예에 의한 트램 위치를 추정하는 과정을 보여주는 도면이다. 위치측정기의 일 실 시예로 GNSS-INS 센서(130i)를 이용하며 또한 라이다의 SLAM(Simultaneous Localization and Mapping) 기술을 적용하여 두 가지의 위치 추정을 수행하여 측위 기술의 결과를 융합함으로써 위치 측정의 정확도와 신뢰도를 향 상시킨다. 본 발명의 위치측정기의 일 실시예로 GPS와 IMU(Inertial Measurement Unit)를 내재하고 있는 GNSS-INS 센서(130i)는 GPS 좌표, UTM 좌표, 주행 방향, 가속도, 각속도 등의 상태정보를 측정한다. GNSS-INS 센서(130 i)의 결과값의 일 실시예는 미터 단위를 갖는 UTM 좌표값이다. 본 발명의 위치측정기는 측정 데이터의 정 확도를 위해서 2대의 GNSS 안테나(130a, 130b)와 LTE 통신 모듈을 함께 사용할 수 있다. 컨트롤러는 위치측정기가 산출한 정보를 이용하여 위치를 추정한다(S37). 한편, 터널구간, LTE 통신 신호 간섭 등의 영향권에서는 측위의 정확도가 하락할 수 있으므로 컨트롤러는 라이다의 산출 결과를 함께 적용한다. 일 실시예로 컨트롤러는 라이다를 이용한 SLAM(Simultaneous Localization and Mapping) 알고리즘을 적용하여 위치를 추정할 수 있다(S38). 즉, 컨트롤러는 트램이 주행하는 선로 인근의 포인트 클라우드를 측정하여 3D map을 사전에 제작한다. 그리고 컨트롤러는 3D map과 트램이 주행하며 센싱한 라이다 센서값을 비교하며 미터 단위의 주행 거리 와 위치를 추정할 수 있다. 만약 주행 환경의 변화가 있을 시(새로운 사물이 등장하거나 사라지는 경우 등) 사전에 제작한 3D map과 현실 공간의 차이가 발생하므로 라이다 SLAM을 이용한 측위의 정확도가 하락할 수 있다. 반면 라이다 SLAM을 이용한 측위 방식은 터널구간, LTE 통신 신호 간섭 등의 영향으로부터 자유로우므로 위치측정기의 측위의 정확도가 낮아질 경우에 위치 측정의 정밀도를 높인다. 한편, 두 개의 위치 추정 결과를 획득한 컨트롤러는 확장형 칼만 필터(Extended Kalman Filter, EKF)를 이용하여 두 측위 기술의 결과를 융합한다(S39). 이는 터널구간, LTE 신호간섭, 주행 환경 변화 등에 의한 측위 오차율을 감소시킨다. 융합에 사용되는 데이터는 GNSS-INS에서 측정되는 UTM 좌표값, SLAM 알고리즘 결과인 주 행 거리, 그리고 두 측위 결과의 오차를 보정하기 위한 GNSS-INS에서 측정되는 주행 가속도와 각속도 정보를 포 함한다. 도 8의 실시예를 적용할 경우, 컨트롤러는 라이다가 산출한 정보에 SLAM을 적용하여 미리 저장된 주 행 구간 데이터맵과 라이다가 측정한 포인트 클라우드를 비교하여 트램의 위치를 데이터맵에서 확인할 수 있다. 그리고 컨트롤러는 위치측정기가 생성한 측위 결과와 컨트롤러가 데이터맵에서 확인한 트램의 위치를 융합하여 트램의 위치를 확정할 수 있다. 도 9는 본 발명의 일 실시예에 의한 컨트롤러가 수행하는 자율주행 과정을 보여주는 도면이다. 자율주행 제어 시스템이 트램의 자율주행을 제어하는 방법을 수행하는 과정이다. 컨트롤러는 다양한 정보들을 취득하고 그에 따라 트램의 자율 주행을 제어한다. 컨틀롤러는 트램 의 실시간 상태 정보(위치, 속도, 가속도 등)와 전방 객체 검지 정보를 종합하여 주행 목표 속도를 결정한다. 컨트롤러의 자율 주행 모드는 3가지 모드로 구분되어 주행 속도를 결정하는데, 각각 일반주행모드, 정차모 드, 충돌위험 정차모드로 구분되며 컨트롤러는 각각의 모드에 따른 주행 속도를 결정할 수 있다. 일 실시예로 도 9에서 트램은 정거장에 정차 중인 상태에서 컨트롤러는 자율 주행 기능을 시작한다 (S40). 컨트롤러는 도 8에 도시된 바와 같이 GPS와 3D 맵에 기반하여 트램의 위치(거리) 정보를 산출 한다(S42). 또한, 컨트롤러는 벡터 맵(vector map)을 보유하고 이에 기반한 Vprofile을 생성한다(S42). 벡터 맵이란, 트램이 주행하는 경로에 배치된 도로 교통 요소들에 대한 정보가 정의된 맵을 의미한다. 벡터 맵에 정의된 정보의 일 실시예는 신호등, 교차로, 정거장 등의 요소별 위치, 구간, 제한속도 등을 포함한다. 컨 트롤러는 제한속도 또는 거리 정보 등과 트램의 실시간 위치를 비교하여 트램의 주행 목표 속도를 결정할 수 있다. 즉, 벡터 맵은 트램이 주행하는 모든 경로에 대해서, 선로, 교차로, 횡단보도, 정거장 등의 도로교통 요소들 과 각각의 GPS 좌표(UTM 좌표값), 각 요소들의 구간 시작과 종료지점, 각 구간들의 통과 제한속도 정보가 정의 된 맵을 일 실시예로 한다. 트램이 일반주행모드로 동작 중, 컨트롤러는 트램의 측위 정보(실시간 위치 정보)와 벡터 맵을 실시 간으로 비교하여(S42) 현재 주행 중인 구간이 어디인지 파악하고 그에 맞는 제한속도를 벡터맵으로부터 도출하 여 주행 목표 속도인 Vprofile을 결정한다(S43). 또한, 트램이 일반주행모드 동작 중, 신호수신기는 전방 교차로에서 V2X 통신으로 신호등의 상태와 신 호 전환까지의 잔여시간 정보를 수신한다(S44). 즉, 신호수신기는 트램의 전방에 배치된 신호등과 V2X 통신으로 현재 신호등의 신호 상태 및 신호 전환까지의 잔여시간 정보를 수신할 수 있다. 컨트롤러는 신호 수신기가 수신한 정보를 이용하여 현재 속도를 유지하며 지속 주행할 시 교차로 통과까지의 잔여 시간 정 보를 계산한다. 컨트롤러는 잔여시간 정보와 트램의 주행 속도, 신호등이 설치된 교차로와의 거리 정보를 이용하여 트 램의 속도와 정지 여부를 결정할 수 있다. 일 실시예로, 전술한 정보를 비교하여 지속 주행으로 교차로 통과 가능 또는 통과 불가능에 따른 정차모드 전환을 판단할 수 있다. 보다 상세히, 전방에 트램 신호등이 존재하고 인지 결과 정지 신호인 경우(S44-Yes) 컨트롤러는 트램의 현재 위치를 반영하여 Vprofile을 계속 도출할 수 있다. 신호등에 가까워지며 정지 신호가 끝나기 전에 신호등 에 도달할 것으로 계산되면 컨트롤러는 정차 모드로 진입할 수 있다. 정차 모드인 경우 컨트롤러는 \"stop CMD\"를 생성하여 TCMS에게 제공할 수 있다. 트램이 정차 모드 로 동작 중, 컨트롤러는 트램의 측위 정보와 벡터맵을 실시간으로 비교하여 현재 위치로부터 정차 목표 위치까지의 잔여 거리정보를 파악하고 정차를 위한 목표 속도 계산에 활용한다.정차모드로 동작 중, 트램이 정차 목표 위치에 근접할수록 목표 속도는 작아지고 정차 목표 위치에 일정거리 이내로 트램이 접근하면 컨트롤러는 목표 속도를 0으로 설정함으로써 트램의 완전 정차를 유도한다. 정차모드 동작은 교차로 또는 횡단보도 앞 정지선 정차, 정거장 정차 등 예정된 주행 시나리오 상에서 정차되는 상황을 포함한다. 한편, 보행자, 자동차 등의 객체와의 충돌 위험에 따른 주행 결정은 충돌위험 정차모드에서 시행된다. 만약 신호등이 존재하지 않거나, 혹은 신호등이 존재하여도 정지 신호가 아닌 상태라면(S44-No) 컨트롤러 는 S45 단계를 진행한다. 컨트롤러는 검지된 객체의 위치와 트램의 이동 과정에서 설정되는 전방 관심영역(region of interest, roi) 을 비교하여 객체의 충돌 위험도를 판단할 수 있다. 컨트롤러는 라이다와 카메라가 검지한 객체 정보의 퓨전에 기반하여 검출된 객체의 x, y 및 거 리 정보를 산출한다(S45). 만약 트램의 전방 관심영역(ROI) 이내에 검출된 객체가 없다면(S45-Yes) 앞서 산 출한 Vprofile을 Vref의 값으로 설정한다(S56). ROI의 전방과 측방 영역은 트램의 일반 주행속도에 대한 제 동거리와 외형 크기를 고려하여 결정할 수 있다. 한편, 트램의 전방 관심영역(region of interest, roi) 이내에 보행자, 자동차 등의 객체가 존재한다면(S46- No) 컨트롤러는 충돌 위험 상황으로 판단하고 충돌위험 정차모드를 실행한다. 즉, 충돌위험 정차모드 동작 중, 컨트롤러는 ROI 이내에 위치한 모든 객체들 중에서 트램과 가장 가까 운 거리의 객체를 선별한다(S47). 그리고 컨트롤러는 이 객체와 트램의 상대 거리와 상대 속도를 이용 하여 충돌을 회피하기 위한 감속 명령을 계산한다. 예를 들어, 컨트롤러는 가장 가까운 거리에 있는 객체가 전방/측방의 최소 안전 거리 내에 존재하는지 확 인하고(S48-Yes) 존재한다면 \"stop CMD\"를 생성한다(S58). 즉, 충돌위험 정차모드 동작 중, 컨트롤러는 충 돌위험으로 판단되는 개체와의 상대거리가 최소 안전 거리보다 작다면 긴급제동 명령을 내릴 수 있다. 즉, 컨트롤러는 검지된 객체의 위치와 트램의 ROI 영역을 비교하여 객체와 트램의 충돌 위험도를 판 단하고 트램의 운행 속도 또는 정지 여부를 결정할 수 있다. 한편, S48의 확인 결과 객체가 전방/측방의 최소 안전 거리 내에 존재하지 않는 경우(S48-No), 컨트롤러는 트램 정차 시 최소 안전 거리를 유지하기 위한 Vref를 계산한다. 계산 결과 앞서 S43에서 산출한 속도(Vprofile)과 Vref를 비교하여 \"Vprofie ≤ Vref\"인 경우(S50-Yes) 컨트롤 러는 Vref의 값으로 Vprofile을 설정한다(S60). 이는 트램의 현재 위치를 고려해 산출된 속도로 충분히 안전 거리를 유지할 수 있는 상태임을 의미한다. 반면, \"Vprofie ≤ Vref \"의 조건이 충족되지 않는 경우(S50-No) Vref가 기준 속도(예를 들어 5km/h)보다 크거 나 같은지를 확인하고 \"Vref ≤ Vprofie \"인지를 확인한다(S51). 이는 \"(5km/h ≤ Vref) & (Vref ≤ Vprofile)\"의 True/False 값으로 산출될 수 있다. 참인 경우(S51-Yes) 컨트롤러는 Vref를 트램의 속도로 결정 및 리턴한다(S61). 한편 거짓인 경우(S51- No) 컨트롤러는 Vref의 범위가 0에서 기준 속도(예를 들어 5km/h) 사이인지를 확인한다(S52). 이는 \"( Vref ≤ 5km/h ) & ( 0 ≤ Vref )\"의 True/False 값으로 산출될 수 있다. 참인 경우(S52-Yes) 컨트롤러는 \"stop CMD\"를 생성한다(S62). 한편 거짓인 경우(S52-No) 컨트롤러는 긴급 제동 명령인 \"emergency CMD\"를 생성한다(S55). S56, S60, S61 에서 컨트롤러가 생성한 Vref를 토대로 컨트롤러는 트램의 속도는 현재 속도에서 Vref를 반영하도록 계산(Ev=Vref-V)한다(S64). Ev는 감속 또는 가속 범위를 의미하며 V는 현재 트램의 속도 이다. 또한, 컨트롤러가 S58, S62, S55에서 정지 또는 긴급 제동 명령을 생성했는지를 확인한다(S66). 전 술한 프로세스에 따라 TCMS에 전송되는 명령어는 속도를 완전히 줄여서 정지시키는 과정(S67) 또는 컨트롤 러가 산출한 정보에 따른 속도 조절(S68)의 과정을 거쳐 트램의 속도나 운행이 제어된다. 이후 S42 단 계를 반복한다. 도 9의 세부 실시예에서 트램이 정차 후 움직이기 시작하면서 자율 주행 기능을 시작할 수 있다(S40). 또는 완전한 수동 운행(기관사에 의한 수동 제어)에서 자율 주행 기능 모드가 선택되면 S40 단계를 시작할 수 있다.도 9의 세부 실시예에서 컨트롤러는 객체 중 충돌 위험으로 판단되는 객체들 중, 가장 가까운 거리의 객체 를 선별하고 충돌을 회피하기 위한 감속 목표 속도를 계산하여 객체와의 거리가 최소안전거리 이내일 때 긴급 정차를 결정할 수 있다. 도 9의 실시예를 적용할 경우, 교차로 등 신호등이 설치된 곳에서 트램은 신호 전환까지의 잔여 시간, 트램 의 현재 주행속도, 교차로 통과까지의 잔여 거리 정보를 이용하여 지속주행으로 교차로 통과 가능 또는 불가능 을 판단하여 트램을 감속/가속 운행하거나 또는 트램을 일시 정지 또는 긴급 정지시킬 수 있다. 전방의 교차로 또는 정거장 등 정차 위치가 있는 경우, 컨트롤러는 벡터맵과 트램의 측위 결과를 비교 한 결과와 트램의 주행 속도를 이용하여 목표 정차 위치의 정위치 정차하기 위해 트램의 정차 모드를 제 어한다. 이를 위해 컨트롤러는 주행 속도의 감속 범위를 결정할 수 있다. 즉, 컨트롤러는 트램의 측위 결과와 주행 속도를 이용하여 트램을 목표 정차 위치에 정차시킨다. 도 9의 실시예는 다음과 같은 시나리오에 적용할 수 있다. 예를 들어 트램이 교차로 앞 정지선에 정차해있음 을 가정한다. 컨트롤러의 자율주행 S/W가 실행되면 카메라, 라이다의 퓨전에 기반하여 객체 검 지 프로세스가 시작된다. 아울러, 위치측정 과정(S42), 즉 GNSS-INS(130i)와 라이다의 퓨전에 기반하여 측 위 프로세스가 시작된다, 그리고 컨트롤러는 트램의 이동을 예측 제어하는 플래닝 프로세스를 시작한다. 컨트롤러는 트램의 UTM 좌표값과 벡터맵을 매칭시켜서 현재 트램이 놓여있는 구간의 주행정보(제한 속도, 전방의 다음 구간까지 남은 거리)를 최신화한다. 그리고 전방 ROI 내에 객체가 존재하지 않고 V2X 신호가 주행 신호라면 컨트롤러는 제한속도 정보를 목표 속도로 설정하여 트램의 주행을 시작한다(S43, S45, S46-Yes). 한편, 컨트롤러는 교차로 구간을 통과한 후 트램의 현재 위치와 벡터맵을 다시 매칭하여 목표 속도를 변경할 수 있다. 만약 전방의 객체가 ROI 내로 들어왔다면(S47, S48, S49), 컨트롤러는 충돌 회피를 위하 여 감속된 목표 속도를 계산하고 트램에 전달한다(S60). 만약 객체와의 거리가 최소 안전 거리 이내로 판단된다면(S48 또는 S52 등) 컨트롤러는 정차 명령(S58, S62, S55)을 트램에 전달하여 긴급제동 명령을 실행할 수 있다. 한편, 컨트롤러는 주행 중 전방의 교차로에서 V2X 신호를 분석한 결과 신호 상태가 정차 신호이고 신호 전 환까지 아직 충분한 시간이 남아 있다면, 트램은 정지선 앞 정차 제어를 시행한다(S44). 트램이 정거장에 도착하여 승객의 승하차를 완료한 후, 컨트롤러는 트램의 측방 카메라로부터 트램 에 인접한 보행자, 자전거 등 객체가 존재하는지 확인한다. 만약 트램 측면에 인접한 객체가 존재하여 트램 출발 시 충돌 위험이 존재한다면 컨트롤러는 트램을 출발시키지 않고 기관사가 차외 방송으로 위험성을 알 리도록 한다. 인접한 객체가 일정 거리이상 멀어지면 컨트롤러는 안전 상태로 판단하고 트램에게 출발 제어 명령을 내릴 수 있다. 이와 같이, 컨트롤러에 의해 주변 사물들을 판단하고 신호등의 신호, 트램의 위치 등을 파악할 경우, 트램 주행 중 충돌 위험 상황에서 기관사의 개인 역량에 의존하지 않고 빠른 감속 및 정차 대처로 트램의 사 고율을 저감시킬 수 있다. 또한, V2X 신호 연계를 통하여 사전에 교차로 통과 가능여부를 판단하여 정차 또는 주행 함으로써 불필요한 가 속과 감속 상황을 예방하고 안정적인 주행으로 승객의 승차감 향상과 주행 안전성 확보, 에너지 사용 저감효과 를 기대할 수 있다. 전술한 실시예는 트램의 자율주행을 제어하는 방법을 구현하는 컴퓨터 프로그램을 기록한 컴퓨터로 읽을 수 있 는 매체를 포함한다. 컴퓨터로 읽을 수 있는 매체는 전술한 프로그램을 실행시켜 전술한 방법이 컴퓨터 등에서 수행될 수 있도록 한다. 본 발명의 실시 예에 따른 방법들은 다양한 컴퓨터 수단을 통하여 수행될 수 있는 프로그램 명령 형태로 구현되 어 컴퓨터 판독 가능 매체에 기록될 수 있다. 컴퓨터 판독 가능 매체는 프로그램 명령, 데이터 파일, 데이터 구 조 등을 단독으로 또는 조합하여 포함할 수 있다. 매체에 기록되는 프로그램 명령은 본 발명을 위하여 특별히 설계되고 구성된 것들이거나 컴퓨터 소프트웨어 당업자에게 공지되어 사용 가능한 것일 수도 있다. 이상과 같이 본 발명은 비록 한정된 실시예와 도면에 의해 설명되었으나, 본 발명은 상기의 실시예에 한정되는 것은 아니며, 본 발명이 속하는 분야에서 통상의 지식을 가진 자라면 이러한 기재로부터 다양한 수정 및 변형이 가능하다. 전술된 실시예는 모든 면에서 예시적인 것이며 한정적인 것이 아닌 것으로 이해되어야 하며, 본 발명 의 범위는 전술된 상세한 설명보다는 후술될 특허청구범위에 의해 나타내어질 것이다. 그리고 이 특허청구범위 의 의미 및 범위는 물론, 그 등가개념으로부터 도출되는 모든 변경 및 변형 가능한 형태가 본 발명의 범위에 포 함되는 것으로 해석되어야 한다. 따라서, 본 발명의 범위는 설명된 실시예에 국한되어 정해져서는 아니 되며, 후술하는 특허청구범위 및 이 특허 청구범위와 균등한 것들에 의해 정해져야 한다."}
{"patent_id": "10-2023-0060038", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 의한 시스템의 구성요소를 보여주는 도면이다. 도 2는 본 발명의 일 실시예에 의한 각각의 구성요소들이 트램에 배치된 실시예를 보여주는 도면이다. 도 3은 본 발명의 일 실시예에 의한 도 2의 구성요소의 배치를 상측 방향에서 도시한 도면이다. 도 4는 본 발명의 일 실시예에 의한 두 개의 컨트롤러가 다수의 구성 요소들로부터 정보를 수신하는 세부 구성 을 보여주는 도면이다. 도 5는 본 발명의 일 실시예에 의한 카메라를 이용한 객체를 식별하고 분류하는 과정을 보여주는 도면이다. 도 6은 본 발명의 일 실시예에 의한 라이다를 이용한 객체를 식별하는 과정을 보여주는 도면이다. 도 7은 본 발명의 일 실시예에 의한 카메라 및 라이다에서 수행한 객체 식별 결과를 합성하는 과정을 보여주는 도면이다. 도 8은 본 발명의 일 실시예에 의한 트램 위치를 추정하는 과정을 보여주는 도면이다. 도 9는 본 발명의 일 실시예에 의한 컨트롤러가 수행하는 자율주행 과정을 보여주는 도면이다."}
