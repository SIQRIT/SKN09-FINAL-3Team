{"patent_id": "10-2023-0102309", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0020939", "출원번호": "10-2023-0102309", "발명의 명칭": "무선 통신 시스템에서 MULTIPLE KEY SET을 활용하는 5G PROSE DISCOVERY 보안을 위한 방법 및", "출원인": "삼성전자주식회사", "발명자": "박준현"}}
{"patent_id": "10-2023-0102309", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "무선 통신 시스템에서, 제1 단말에 의해 수행되는 방법은,Direct Discovery 또는 U2N Relay Discovery와 관련한 제1 단말에 대한 정보를 획득하는 단계; U2U Relay Discovery와 관련한 제1 단말에 대한 정보를 획득하는 단계; 상기 제1 단말에 대한 정보에 기반하여, 상기 Direct Discovery의 관련 요소 또는 상기 U2N Relay Discovery의관련 요소에 보안을 적용하는 단계; 상기 제1 단말에 대한 정보에 기반하여, 상기 U2U Relay Discovery의 관련 요소에 보안을 적용하는 단계; 및 상기 Direct Discovery의 관련 요소, 상기 U2N Relay Discovery의 관련 요소, U2U Relay Discovery 관련 요소,또는 Relay_indication 중 적어도 하나를 포함하는 Discovery 메시지를 제2 단말로 송신하는 단계를 포함하며,상기 Discovery 메시지는 Direct Discovery 메시지 또는 U2N Relay Discovery 메시지인 것인 방법."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시는 보다 높은 데이터 전송률을 지원하기 위한 5G 또는 6G 통신 시스템에 관련된 것이다. 구체적으로 무 선 통신 시스템에서, 제1 단말에 의해 수행되는 방법은, Direct Discovery 또는 U2N Relay Discovery와 관련한 제1 단말에 대한 정보를 획득하는 단계, U2U Relay Discovery와 관련한 제1 단말에 대한 정보를 획득하는 단계, 상기 제1 단말에 대한 정보에 기반하여, 상기 Direct Discovery의 관련 요소 또는 상기 U2N Relay Discovery의 관련 요소에 보안을 적용하는 단계, 상기 제1 단말에 대한 정보에 기반하여, 상기 U2U Relay Discovery의 관련 요소에 보안을 적용하는 단계, 및 상기 Direct Discovery의 관련 요소, 상기 U2N Relay Discovery의 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Discovery 메시지를 제2 단 말로 송신하는 단계를 포함한다."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 무선 통신(또는, 이동 통신) 시스템에 대한 내용으로, 5G ProSe를 지원하는 환경에서 UE(user equipment)들이 서로를 발견하기 위해 전송하는 Discovery 메시지를 보호하기 위한 방법 및 장치에 관한 것이다. 구체적으로 본 개시는, UE들이 5G ProSe에 있어 Direct Discovery 서비스, UE-to-Network Relay Discovery 서 비스, 그리고 UE-to-UE Relay Discovery 서비스를 복합적으로 활용하는 경우, 이들 서비스에 연계된 Multiple Key Set을 통해 5G ProSe Discovery 메시지를 보호하기 위한 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "5G 이동통신 기술은 빠른 전송 속도와 새로운 서비스가 가능하도록 넓은 주파수 대역을 정의하고 있으며, 3.5 기가헤르츠(3.5GHz) 등 6GHz 이하 주파수('Sub 6GHz') 대역은 물론 28GHz와 39GHz 등 밀리미터파(㎜Wave)로 불 리는 초고주파 대역('Above 6GHz')에서도 구현이 가능하다. 또한, 5G 통신 이후(Beyond 5G)의 시스템이라 불리 어지는 6G 이동통신 기술의 경우, 5G 이동통신 기술 대비 50배 빨라진 전송 속도와 10분의 1로 줄어든 초저 (Ultra Low) 지연시간을 달성하기 위해 테라헤르츠(Terahertz, THz) 대역(예를 들어, 95GHz에서 3 테라헤르츠 대역과 같은)에서의 구현이 고려되고 있다. 5G 이동통신 기술의 초기에는, 초광대역 서비스(enhanced Mobile BroadBand, eMBB), 고신뢰/초저지연 통신 (Ultra-Reliable Low-Latency Communications, URLLC), 대규모 기계식 통신 (massive Machine-Type Communications, mMTC)에 대한 서비스 지원과 성능 요구사항 만족을 목표로, 초고주파 대역에서의 전파의 경로 손실 완화 및 전파의 전달 거리를 증가시키기 위한 빔포밍(Beamforming) 및 거대 배열 다중 입출력(Massive MIMO), 초고주파수 자원의 효율적 활용을 위한 다양한 뉴머롤로지 지원(복수 개의 서브캐리어 간격 운용 등)와 슬롯 포맷에 대한 동적 운영, 다중 빔 전송 및 광대역을 지원하기 위한 초기 접속 기술, BWP(Band-Width Part) 의 정의 및 운영, 대용량 데이터 전송을 위한 LDPC(Low Density Parity Check) 부호와 제어 정보의 신뢰성 높은 전송을 위한 폴라 코드(Polar Code)와 같은 새로운 채널 코딩 방법, L2 선-처리(L2 pre-processing), 특정 서 비스에 특화된 전용 네트워크를 제공하는 네트워크 슬라이싱(Network Slicing) 등에 대한 표준화가 진행되었다. 현재, 5G 이동통신 기술이 지원하고자 했던 서비스들을 고려하여 초기의 5G 이동통신 기술 개선(improvement) 및 성능 향상(enhancement)을 위한 논의가 진행 중에 있으며, 차량이 전송하는 자신의 위치 및 상태 정보에 기 반하여 자율주행 차량의 주행 판단을 돕고 사용자의 편의를 증대하기 위한 V2X(Vehicle-to-Everything), 비면허 대역에서 각종 규제 상 요구사항들에 부합하는 시스템 동작을 목적으로 하는 NR-U(New Radio Unlicensed), NR단말 저전력 소모 기술(UE Power Saving), 지상 망과의 통신이 불가능한 지역에서 커버리지 확보를 위한 단말- 위성 직접 통신인 비 지상 네트워크(Non-Terrestrial Network, NTN), 위치 측위(Positioning) 등의 기술에 대 한 물리계층 표준화가 진행 중이다. 뿐만 아니라, 타 산업과의 연계 및 융합을 통한 새로운 서비스 지원을 위한 지능형 공장 (Industrial Internet of Things, IIoT), 무선 백홀 링크와 액세스 링크를 통합 지원하여 네트워크 서비스 지역 확장을 위한 노드를 제공하는 IAB(Integrated Access and Backhaul), 조건부 핸드오버(Conditional Handover) 및 DAPS(Dual Active Protocol Stack) 핸드오버를 포함하는 이동성 향상 기술(Mobility Enhancement), 랜덤액세스 절차를 간소화하 는 2 단계 랜덤액세스(2-step RACH for NR) 등의 기술에 대한 무선 인터페이스 아키텍쳐/프로토콜 분야의 표준 화 역시 진행 중에 있으며, 네트워크 기능 가상화(Network Functions Virtualization, NFV) 및 소프트웨어 정 의 네트워킹(Software-Defined Networking, SDN) 기술의 접목을 위한 5G 베이스라인 아키텍쳐(예를 들어, Service based Architecture, Service based Interface), 단말의 위치에 기반하여 서비스를 제공받는 모바일 엣지 컴퓨팅(Mobile Edge Computing, MEC) 등에 대한 시스템 아키텍쳐/서비스 분야의 표준화도 진행 중이다. 이와 같은 5G 이동통신 시스템이 상용화되면, 폭발적인 증가 추세에 있는 커넥티드 기기들이 통신 네트워크에 연결될 것이며, 이에 따라 5G 이동통신 시스템의 기능 및 성능 강화와 커넥티드 기기들의 통합 운용이 필요할 것으로 예상된다. 이를 위해, 증강현실(Augmented Reality, AR), 가상현실(Virtual Reality, VR), 혼합 현실 (Mixed Reality, MR) 등을 효율적으로 지원하기 위한 확장 현실(eXtended Reality, XR), 인공지능(Artificial Intelligence, AI) 및 머신러닝(Machine Learning, ML)을 활용한 5G 성능 개선 및 복잡도 감소, AI 서비스 지 원, 메타버스 서비스 지원, 드론 통신 등에 대한 새로운 연구가 진행될 예정이다. 또한, 이러한 5G 이동통신 시스템의 발전은 6G 이동통신 기술의 테라헤르츠 대역에서의 커버리지 보장을 위한 신규 파형(Waveform), 전차원 다중입출력(Full Dimensional MIMO, FD-MIMO), 어레이 안테나(Array Antenna), 대규모 안테나(Large Scale Antenna)와 같은 다중 안테나 전송 기술, 테라헤르츠 대역 신호의 커버리지를 개선 하기 위해 메타물질(Metamaterial) 기반 렌즈 및 안테나, OAM(Orbital Angular Momentum)을 이용한 고차원 공 간 다중화 기술, RIS(Reconfigurable Intelligent Surface) 기술 뿐만 아니라, 6G 이동통신 기술의 주파수 효 율 향상 및 시스템 네트워크 개선을 위한 전이중화(Full Duplex) 기술, 위성(Satellite), AI(Artificial Intelligence)를 설계 단계에서부터 활용하고 종단간(End-to-End) AI 지원 기능을 내재화하여 시스템 최적화를 실현하는 AI 기반 통신 기술, 단말 연산 능력의 한계를 넘어서는 복잡도의 서비스를 초고성능 통신과 컴퓨팅 자 원을 활용하여 실현하는 차세대 분산 컴퓨팅 기술 등의 개발에 기반이 될 수 있을 것이다. 무선 통신 시스템의 발전에 따라, 5G 시스템은 ProSe(Proximity based Services)를 활용하여, 인접한 두 UE 간 의 직접 통신(Direct Communication) 서비스, 한 UE가 인접한 릴레이 UE를 거쳐 데이터 네트워크와 통신하는 UE-to-Network (U2N) Relay 통신 서비스, 그리고 두 UE가 인접한 릴레이 UE를 거쳐 통신하는 UE-to-UE (U2U) Relay 통신 서비스를 지원할 수 있다. 한편, 교신하고자 하는 UE들이 서로를 발견하고자 송수신하는 Discovery 메시지를 안전하게 보호하기 위한 다양한 방안이 요구된다. 앞서 언급한 보호 방안은 메시지의 무결성을 보장하 기 위한 무결성 보호(integrity protection), 메시지의 기밀성을 보장하기 위한 암호화/복호화 (encryption/decryption), 메시지의 재사용을 막기 위한 재전송 방지(anti-replay protection), 그리고 메시지 의 민감 정보 보호를 한층 더 보강하기 위한 스크램블링 보호(scrambling protection)를 포함할 수 있다."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "상술한 바와 같은 논의를 바탕으로, 본 개시(disclosure)는 무선 통신 시스템에서 서비스를 효과적이고 안전하 게 제공할 수 있는 방법 및 장치에 관해 기술한다. 본 개시에서 이루고자 하는 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급하지 않은"}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 2, "content": "또 다른 기술적 과제들은 아래의 기재로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하 게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기와 같은 문제점을 해결하기 위한 본 개시는, 무선 통신 시스템에서 제1 단말의 방법에 있어서, Direct Discovery 또는 U2N Relay Discovery와 관련한 제1 단말에 대한 정보를 획득하는 단계, U2U Relay Discovery와 관련한 제1 단말에 대한 정보를 획득하는 단계, 상기 제1 단말에 대한 정보에 기반하여, 상기 Direct Discovery의 관련 요소 또는 상기 U2N Relay Discovery의 관련 요소에 보안을 적용하는 단계, 상기 제1 단말에 대한 정보 에 기반하여, 상기 U2U Relay Discovery의 관련 요소에 보안을 적용하는 단계, 및 상기 Direct Discovery의 관 련 요소, 상기 U2N Relay Discovery의 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Discovery 메시지를 제2 단말로 송신하는 단계를 포함한다."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시의 다양한 실시예들은 무선 통신 시스템에서 서비스를 효과적이고 안전하게 제공할 수 있는 장치 및 방 법을 제공할 수 있다. 본 개시의 다양한 실시예들은, UE들이 활용하고자 하는 5G ProSe 서비스에 대한 보안 정책 및 파라미터를 제공 받고, 서로를 발견하기 위해 송수신하는 Discovery 메시지를 보호하는 방안을 제공한다. 나아가, 본 개시의 실 시예들에 따라, UE들이 5G ProSe에 있어 Direct Discovery 서비스, U2N Relay Discovery 서비스, 그리고 U2U Relay Discovery 서비스를 복합적으로 활용하는 경우, 이들 서비스에 연계된 Multiple Key Set을 통해 Discovery 메시지를 보호하는 방안이 제공됨으로써, UE들의 통신 효율을 증대하고 악의적인 사용자로부터 데이 터를 안전하게 보호할 수 있다. 본 개시에서 얻을 수 있는 효과는 이상에서 언급한 효과들로 제한되지 않으며, 언급하지 않은 또 다른 효과들은 아래의 기재로부터 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0102309", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 개시에서 사용되는 용어들은 단지 특정한 실시예를 설명하기 위해 사용된 것으로, 다른 실시예의 범위를 한 정하려는 의도가 아닐 수 있다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함할수 있다. 기술적이거나 과학적인 용어를 포함해서 여기서 사용되는 용어들은 본 개시에 기재된 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 것과 동일한 의미를 가질 수 있다. 본 개시에 사용된 용어 들 중 일반적인 사전에 정의된 용어들은, 관련 기술의 문맥상 가지는 의미와 동일 또는 유사한 의미로 해석될 수 있으며, 본 개시에서 명백하게 정의되지 않는 한, 이상적이거나 과도하게 형식적인 의미로 해석되지 않는다. 경우에 따라서, 본 개시에서 정의된 용어일지라도 본 개시의 실시예들을 배제하도록 해석될 수 없다. 이하에서 설명되는 본 개시의 다양한 실시예들에서는 하드웨어적인 접근 방법을 예시로서 설명한다. 하지만, 본 개시의 다양한 실시예들에서는 하드웨어와 소프트웨어를 모두 사용하는 기술을 포함하고 있으므로, 본 개시의 다양한 실시예들이 소프트웨어 기반의 접근 방법을 제외하는 것은 아니다. 이하 첨부된 도면을 참조하여 본 개시의 동작 원리를 상세히 설명한다. 본 개시를 설명하기에 있어 관련된 공지 기능 또는 구성에 대한 구체적인 설명이 본 개시의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우에는 그 상 세한 설명이 생략될 것이다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용 을 토대로 내려져야 할 것이다. 마찬가지 이유로 첨부 도면들에 있어서 일부 구성 요소는 생략되거나 개략적으로 도시되었다. 또한, 각 구성 요 소의 크기는 실제 크기를 전적으로 반영하는 것이 아니다. 각 도면에서 동일한 또는 대응하는 구성요소에는 동 일한 참조 번호가 부여되었다. 본 개시의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 개시는 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 수 있으며, 단지 본 실시예들은 본 개시가 완전하도록 하고, 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에게 본 개시의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 개시는 청 구항의 범주에 의해 정의될 뿐이다. 명세서 전체에 걸쳐 동일 참조 부호는 동일 구성 요소를 지칭한다. 이 때, 처리 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수행 될 수 있음을 이해할 수 있을 것이다. 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있으므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서를 통해 수행되는 그 인스트럭션들은 흐름도 블록(들)에서 설명된 기능들을 수 행하는 수단을 생성할 수 있다. 컴퓨터 프로그램 인스트럭션들은 특정 방식으로 기능을 구현하기 위해 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 지향할 수 있는 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메 모리에 저장되는 것도 가능하므로, 그 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메모리에 저장된 인스트럭션들은 흐름도 블록(들)에서 설명된 기능을 수행하는 인스트럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭션들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에 탑재 되는 것도 가능하므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에서 일련의 동작 단계들이 수행되어 컴퓨터로 실행되는 프로세스를 생성해서 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 수행하는 인스트럭션들은 흐름도 블록(들)에서 설명된 기능들을 실행하기 위한 단계들을 제공하는 것도 가능하 다. 또한, 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 몇 가지 대체 실행 예들에서는 블록들에서 언급된 기능들 이 순서를 벗어나서 발생하는 것도 가능하다. 예컨대, 잇달아 도시되어 있는 두 개의 블록들은 사실 실질적으로 동시에 수행되는 것도 가능하고 또는 그 블록들이 때때로 해당하는 기능에 따라 역순으로 수행되는 것도 가능하 다. 본 실시예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 하드웨어 구성요소를 의미하며, '~부'는 어떤 역할 들을 수행한다. 그렇지만 '~부'는 소프트웨어 또는 하드웨어에 한정되는 의미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구성될 수도 있다. 따라서, 일 예로서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구성요소들 및 태 스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레 이들, 및 변수들을 포함한다. 구성요소들과 '~부'들 안에서 제공되는 기능은 더 작은 수의 구성요소들 및 '~ 부'들로 결합되거나 추가적인 구성요소들과 '~부'들로 더 분리될 수 있다. 뿐만 아니라, 구성요소들 및 '~부'들 은 디바이스 또는 보안 멀티미디어카드 내의 하나 또는 그 이상의 CPU들을 재생시키도록 구현될 수도 있다. 또한 실시예에서 '~부'는 하나 이상의 프로세서를 포함할 수 있다. 이하에서 설명하는 본 개시의 실시예와 유사한 기술적 배경 또는 채널형태를 갖는 여타의 통신 시스템에도 본 개시의 실시예가 적용될 수 있다. 또한, 본 개시의 실시예는 숙련된 기술적 지식을 가진 자의 판단으로써 본 개 시의 범위를 크게 벗어나지 아니하는 범위에서 일부 변형을 통해 다른 통신시스템에도 적용될 수 있다. 본 개시의 실시예들을 구체적으로 설명함에 있어서, 통신 시스템은 각종 유선 혹은 무선 통신 시스템을 이용할 수 있으며, 예를 들어 무선 통신 규격 표준화 단체인 3GPP가 5G 통신 규격 상의 무선 접속 네트워크인 New RAN(NR)과 코어 네트워크인 패킷 코어(5G System, 혹은 5G Core Network, 혹은 NG Core(Next Generation Core))를 이용할 수 있다. 그리고 유사한 기술적 배경을 가지는 여타의 통신 시스템에도 본 개시의 범위를 크게 벗어 나지 아니 하는 범위에서 약간의 변형으로 적용 가능하며, 이는 본 개시의 기술 분야에서 숙련된 기술적 지식을 가진 자의 판단으로 가능 할 것이다. 이하 본 개시의 설명에서 사용되는 접속 노드(node)를 식별하기 위한 용어, 네트워크 객체(network entity)(예 를 들어, network function)들을 지칭하는 용어, 메시지들을 지칭하는 용어, NF(network function)들 간 인터 페이스를 지칭하는 용어, 다양한 식별 정보들을 지칭하는 용어 등은 설명의 편의를 위해 예시된 것이다. 따라서, 본 개시에서 후술되는 용어들에 한정되는 것은 아니며, 동등한 기술적 의미를 가지는 대상을 지칭하는 다른 용어가 사용될 수 있다. 또한, 본 개시는, 일부 통신 규격(예를 들어, 3GPP(3rd Generation Partnership Project))에서 사용되는 용어 들을 이용하여 다양한 실시예들을 설명하지만, 이는 설명을 위한 예시일 뿐이다. 본 개시의 다양한 실시예들은, 다른 통신 시스템에서도, 용이하게 변형되어 적용될 수 있다. 한편, 셀룰러 이동통신 표준을 담당하는 3GPP는 기존 4G LTE 시스템에서 5G 시스템으로의 진화를 꾀하기 위해 새로운 코어 네트워크(core network) 구조를 5G core(5GC)라는 이름으로 명명하고 표준화를 진행하고 있다. 5GC 는 기존 4G를 위한 네트워크 코어인 진화된 패킷 코어(evolved packet core, EPC) 대비 다음과 같은 차별화된 기능을 지원한다. 첫째, 5GC에서는 네트워크 슬라이스(network slice) 기능이 도입된다. 5G의 요구 조건으로, 5GC는 다양한 종류 의 단말 타입 및 서비스를 지원해야 한다. 예를 들면, 초광대역 이동 통신(enhanced mobile broadband, eMBB), 초고신뢰 저지연 통신(ultra reliable low latency communications, URLLC), 대규모 사물 통신(massive machine type communications, mMTC). 이러한 단말/서비스는 각각 코어 네트워크에 요구하는 요구조건이 다르다. 예를 들면, eMBB 서비스인 경우에는 높은 데이터 전송 속도(data rate)를 요구하고 URLLC 서비스인 경 우에는 높은 안정성과 낮은 지연을 요구한다. 이러한 다양한 서비스 요구조건을 만족하기 위해 제안된 기술이 네트워크 슬라이스(network slice) 방안이다. 네트워크 슬라이스는 하나의 물리적인 네트워크를 가상화(virtualization) 하여 여러 개의 논리적인 네트워크를 만드는 방법으로, 각 네트워크 슬라이스 인스턴스(network slice instance, NSI)는 서로 다른 특성을 가질 수 있다. 따라서, 각 NSI마다 그 특성에 맞는 네트워크 기능(network function, NF)을 가짐으로써 다양한 서비스 요구조건을 만족시킬 수 있다. 각 단말마다 요구하는 서비스의 특성에 맞는 NSI를 할당하여 여러 5G 서비스를 효율적으로 지원할 수 있다. 둘째, 5GC는 이동성 관리 기능과 세션 관리 기능의 분리를 통해 네트워크 가상화 패러다임 지원을 수월하게 할 수 있다. 기존 4G LTE에서는 모든 단말이 등록, 인증, 이동성 관리 및 세션 관리 기능을 담당하는 이동성 관리 엔티티(mobility management entity, MME)라는 단일 코어 장비와의 시그널링 교환을 통해서 망에서 서비스를 제 공받을 수 있었다. 하지만, 5G에서는 단말의 수가 폭발적으로 늘어나고 단말의 타입에 따라 지원해야하는 이동 성 및 트래픽/세션 특성이 세분화됨에 따라 MME와 같은 단일 장비에서 모든 기능을 지원하게 되면 필요한 기능 별로 엔티티를 추가하는 확장성(scalability)이 떨어질 수밖에 없다. 따라서, 제어 평면을 담당하는 코어 장비 의 기능/구현 복잡도와 시그널링 부하 측면에서 확장성 개선을 위해 이동성 관리 기능과 세션 관리 기능을 분리 하는 구조를 기반으로 다양한 기능들이 개발되고 있다. 본 개시의 다양한 실시예들에 따라, 이하, 기지국은 단말의 자원 할당을 수행하는 주체로서, eNode B(eNB), Node B, BS(Base Station), RAN(Radio Access Network), AN(Access Network), RAN node, NR NB, gNB, 무선 접 속 유닛, 기지국 제어기, 또는 네트워크 상의 노드 중 적어도 하나일 수 있다. 단말은 UE(User Equipment), MS(Mobile Station), 셀룰러 폰, 스마트폰, 컴퓨터, 또는 통신 기능을 수행할 수 있는 멀티미디어 시스템을 포함할 수 있다. 본 개시에서 하향링크(Downlink, DL)는 기지국이 단말에게 전송하는 신호의 무선 전송 경로이고, 상향링크는(Uplink, UL)는 단말이 기국에게 전송하는 신호의 무선 전송경로를 의미한다. 또한, 이하에서 LTE 혹 은 LTE-A 시스템을 일례로서 본 개시의 실시예를 설명하지만, 유사한 기술적 배경 또는 채널형태를 갖는 여타의 통신 시스템에도 본 개시의 실시예가 적용될 수 있다. 또한, 본 개시의 실시예는 숙련된 기술적 지식을 가진 자 의 판단으로써 본 개시의 범위를 크게 벗어나지 아니하는 범위에서 일부 변형을 통해 다른 통신시스템에도 적용 될 수 있다. 이하 본 개시의 설명에서 사용되는 접속 노드(node)를 식별하기 위한 용어, 네트워크 객체(network entity)(예 를 들어, network function)들을 지칭하는 용어, 메시지들을 지칭하는 용어, NF(network function)들 간 인터 페이스를 지칭하는 용어, 다양한 식별 정보들을 지칭하는 용어 등은 설명의 편의를 위해 예시된 것이다. 따라서, 본 개시에서 후술되는 용어들에 한정되는 것은 아니며, 동등한 기술적 의미를 가지는 대상을 지칭하는 다른 용어가 사용될 수 있다. 또한, 본 개시는, 일부 통신 규격(예를 들어, 3GPP(3rd Generation Partnership Project))에서 사용되는 용어 들을 이용하여 다양한 실시예들을 설명하지만, 이는 설명을 위한 예시일 뿐이다. 본 개시의 다양한 실시예들은, 다른 통신 시스템에서도, 용이하게 변형되어 적용될 수 있다. 이하, 본 개시의 코어망에서 이용되는 일부 용어 들이 미리 정의된다. AMF Access and Mobility Management Function CN Core Network CNF Containerized Network Function DNN Data Network Name PCF Policy Control Function HSS Home Subscriber Server SMF Session Management Function UDM User Data Management UPF User Plane Function CNF Containerized Network Function VNF Virtual Network Function 본 개시에서 네트워크 기술은 ITU(international telecommunication union) 또는 3GPP에 의하여 정의되는 표준 규격(예를 들어, TS 23.501, TS 23.502, TS 23.503 등)을 참조할 수 있으며, 후술할 도 1의 네트워크 구조에 포함되는 구성 요소들은 각각 물리적인 엔터티(entity)를 의미하거나, 혹은 개별적인 기능(function)을 수행하 는 소프트웨어 혹은 소프트웨어와 결합된 하드웨어를 의미할 수 있다. 도면들에서 Nx(N1, N2, N3 등)로 도시된 참조 부호들은 5G 코어 네트워크(core network, CN)에서 네트워크 기능(network function, NF)들 간의 공지된 인터페이스들을 나타낸 것이며, 관련 설명은 표준 규격(TS 23.501)을 참조할 수 있다. 도 1은 본 개시의 다양한 실시예들에 따른, 무선 통신 시스템에서 코어 망 객체들(core network entity)을 포함 하는 통신 망(communication network)을 도시한다. 5G 이동통신 네트워크는 5G UE(user equipment), 5G RAN(radio access network), 및 5G 코어망을 포함하여 구성될 수 있다. 도 1은 본 개시의 일 실시예에 따른 5G 시스템의 네트워크 구조 및 인터페이스를 나타낸 도면이다. 도 1의 5G 시스템의 네트워크 구조에 포함된 네트워크 엔티티(entity)는 시스템 구현에 따라 네트워크 기능 (network function; NF)를 포함할 수 있다. 도 1을 참조하면, 5G 시스템의 네트워크 구조는 다양한 네트워크 엔티티들을 포함할 수 있다. 일 예로, 5G 시스 템은 인증 서버 기능(authentication server function; AUSF), 액세스 및 이동성 관리 기능((core) access and mobility management function; AMF), 세션 관리 기능(session management function; SMF), 정책 제어 기능(PCF), 어플리케이션 기능(application function; AF), 통합된 데이터 관리(unified data management; UDM), 데이터 네트워크(data network; DN), 네트워크 노출 기능 (network exposure function; NEF), 네트워크 슬라이싱 선택 기능(network slicing selection function; NSSF), 에지 어플리케이션 서비스 도메인 저장소(edge application service domain repository; EDR, 미 도시), 에지 어플리케이션 서버(edge application server; EAS, 미도시), EAS 디스커버리 기능(EAS discovery function; EASDF, 미도시), 사용자 평면 기능(user plane function; UPF), (무선) 액세스 네트워크 ((radio) access network; (R)AN), 및 사용자 장치(user equipment; UE)(또는 단말)를 포함할 수 있 다. 5G 시스템의 각 NF들은 다음과 같은 기능을 지원할 수 있다. AUSF는 UE의 인증을 위한 데이터를 처리하고 저장할 수 있다. AMF는 UE 단위의 접속 및 이동성 관리를 위한 기능을 제공하며, 하나의 UE 당 기본적으로 하나의 AMF에 연 결될 수 있다. 구체적으로, AMF는 3GPP 액세스 네트워크들 간의 이동성을 위한 CN 노드 간 시그널링, 무선 액세스 네트워크(radio access network; RAN) CP 인터페이스(즉, N2 인터페이스)의 종단(termination), NAS(non access stratum) 시그널링의 종단(N1), NAS 시그널링 보안(NAS 암호화(ciphering) 및 무결성 보호 (integrity protection)), AS 보안 제어, 등록 관리(등록 영역(registration area) 관리), 연결 관리, 아이들 모드 UE 접근성(reachability) (페이징 재전송의 제어 및 수행 포함), 이동성 관리 제어(가입 및 정책), 인트라 -시스템 이동성 및 인터-시스템 이동성 지원, 네트워크 슬라이싱의 지원, SMF 선택, 합법적 감청(lawful intercept : LI)(AMF 이벤트 및 LI 시스템으로의 인터페이스에 대한), UE와 SMF 간의 세션 관리(session management; SM) 메시지의 전달 제공, SM(session management) 메시지 라우팅을 위한 트랜스패런트 프록시 (transparent proxy), 액세스 인증(access authentication), 로밍 권한 체크를 포함한 액세스 허가(access authorization), UE와 SMSF(short message service function) 간의 SMS 메시지의 전달 제공, 보안 앵커 기능 (security anchor function; SAF) 및/또는 보안 컨텍스트 관리(security context management; SCM) 등의 기능 을 지원할 수 있다. AMF의 일부 또는 전체의 기능들은 하나의 AMF의 단일 인스턴스(instance) 내에서 지원 될 수 있다. DN은 예를 들어, 운영자 서비스, 인터넷 접속 또는 서드파티(3rd party) 서비스 등을 의미할 수 있다. DN은 UPF로 하향링크 프로토콜 데이터 유닛(protocol data unit; PDU)을 전송하거나, UE로부터 전송된 PDU를 UPF로부터 수신할 수 있다. PCF는 어플리케이션 서버로부터 패킷 흐름에 대한 정보를 수신하여, 이동성 관리, 세션 관리 등의 정책을 결정하는 기능을 제공할 수 있다. 구체적으로, PCF는 네트워크 동작을 통제하기 위한 단일화된 정책 프레 임워크 지원, 제어평면 기능(들)(예를 들어, AMF, SMF 등)이 정책 규칙을 시행할 수 있도록 정책 규칙 제공, 사 용자 데이터 저장소(user data repository; UDR) 내 정책 결정을 위해 관련된 가입 정보에 액세스하기 위한 프 론트 엔드(front end) 구현 등의 기능을 지원할 수 있다. SMF는 세션 관리 기능을 제공하며, UE가 다수 개의 세션을 가지는 경우 각 세션 별로 서로 다른 SMF 에 의해 관리될 수 있다. 구체적으로, SMF는 세션 관리(예를 들어, UPF와 (R)AN 노드 간의 터널 (tunnel) 유지를 포함하여 세션 수립, 수정 및 해지), UE IP 주소 할당 및 관리(선택적으로 인증 포함), UP(user plane) 기능의 선택 및 제어, UPF에서 트래픽을 적절한 목적지로 라우팅하기 위한 트래픽 스티어 링(traffic steering) 설정, 정책 제어 기능(policy control functions)를 향한 인터페이스의 종단, 정책 및 QoS(quality of service)의 제어 부분 시행, 합법적 감청(LI)(SM 이벤트 및 LI 시스템으로의 인터페이스에 대한), NAS 메시지의 SM 부분의 종단, 하향링크 데이터 통지(downlink data notification), AN(access network) 특정 SM 정보의 개시자(AMF를 경유하여 N2를 통해 (R)AN에게 전달), 세션 및 서비스 연속 성(Session and Service Continuity (SSC)) 모드 결정, 로밍 기능 등의 기능을 지원할 수 있다. SMF의 일 부 또는 전체의 기능들은 하나의 SMF의 단일 인스턴스(instance) 내에서 지원될 수 있다. UDM은 사용자의 가입 데이터, 정책 데이터 등을 저장할 수 있다. UDM은 2개의 부분, 즉 어플리케이션 프론트 엔드(front end; FE)(미도시) 및 사용자 데이터 저장소(user data repository; UDR)(미도시)를 포함할 수 있다. FE(front end)(미도시)는 위치 관리, 가입 관리, 자격 증명(credential)의 처리 등을 담당하는 UDM FE와 정책 제어를 담당하는 PCF를 포함할 수 있다. UDR은 UDM-FE에 의해 제공되는 기능들을 위해 요구되는 데이터와 PCF에 의해 요구되는 정책 프로필을 저장할 수 있다. UDR 내 저장되는 데이터는 가입 식별자, 보안 자격 증명(security credential), 액세스 및 이동성 관련 가입 데이터 및 세션 관련 가입 데이터를 포함하는 사용자 가입 데이터와 정책 데이터를 포함할 수 있다. UDM-FE는 UDR에 저장된 가입 정보에 액세스하고, 인증 자격 증명 처리 (authentication credential processing), 사용자 식별자 핸들링(user identification handling), 액세스 인증, 등록/이동성 관리, 가입 관리, SMS 관리 등의 기능을 지원할 수 있다. UPF는 DN으로부터 수신한 하향링크 PDU를 (R)AN을 경유하여 UE에게 전달하며, (R)AN(11 2)을 경유하여 UE로부터 수신한 상향링크 PDU를 DN으로 전달할 수 있다. 구체적으로, UPF는 인 트라(intra)/인터(inter) RAT 이동성을 위한 앵커 포인트, 데이터 네트워크(Data Network)로의 상호연결 (interconnect)의 외부 PDU 세션 포인트, 패킷 라우팅 및 포워딩, 패킷 검사(inspection) 및 정책 규칙 시행의 사용자 평면 부분, 합법적 감청(lawful intercept), 트래픽 사용량 보고, 데이터 네트워크로의 트래픽 플로우의 라우팅을 지원하기 위한 상향링크 분류자(classifier), 멀티-홈(multi-homed) PDU 세션을 지원하기 위한 브랜치 포인트(branching point), 사용자 평면을 위한 QoS 핸들링(handling)(예를 들어 패킷 필터링, 게이팅(gating), 상향링크/하향링크 레이트 시행), 상향링크 트래픽 검증 (서비스 데이터 플로우(service data flow; SDF)와 QoS 플로우 간 SDF 매핑), 상향링크 및 하향링크 내 전달 레벨(transport level) 패킷 마킹, 하향링크 패킷 버퍼링 및 하향링크 데이터 통지 트리거링 기능 등의 기능을 지원할 수 있다. UPF의 일부 또는 전체의 기능들은 하나의 UPF의 단일 인스턴스(instance) 내에서 지원될 수 있다. AF는 서비스 제공(예를 들어, 트래픽 라우팅 상에서 어플리케이션 영향, 네트워크 능력 노출(network capability exposure)에 대한 접근, 정책 제어를 위한 정책 프레임워크와의 상호동작 등의 기능을 지원)을 위해 3GPP 코어 네트워크와 상호 동작할 수 있다. (R)AN은 4G 무선 액세스 기술의 진화된 버전인 진화된 E-UTRA(evolved E-UTRA)와 새로운 무선 액세스 기 술(new radio; NR)(예를 들어, gNB)을 모두 지원하는 새로운 무선 액세스 네트워크를 총칭한다. gNB은 무선 자원 관리를 위한 기능들(즉, 무선 베어러 제어(radio bearer control), 무선 허락 제어(radio admission control), 연결 이동성 제어(connection mobility control), 상향링크/하향링크에서 UE에게 자원의 동적 할당(dynamic allocation of resources)(즉, 스케줄링)), IP(internet protocol) 헤더 압축, 사용자 데이 터 스트림의 암호화(encryption) 및 무결성 보호(integrity protection), UE에게 제공된 정보로부터 AMF로의 라우팅이 결정되지 않는 경우, UE의 어태치(attachment) 시 AMF의 선택, UPF(들)로의 사용자 평면 데이터 라우 팅, AMF로의 제어 평면 정보 라우팅, 연결 셋업 및 해지, 페이징 메시지의 스케줄링 및 전송(AMF로부터 발생 된), 시스템 브로드캐스트 정보의 스케줄링 및 전송(AMF 또는 운영 및 유지(operating and maintenance; O&M) 로부터 발생된), 이동성 및 스케줄링을 위한 측정 및 측정 보고 설정, 상향링크에서 전달 레벨 패킷 마킹 (transport level packet marking), 세션 관리, 네트워크 슬라이싱의 지원, QoS 흐름 관리 및 데이터 무선 베 어러로의 매핑, 비활동 모드(inactive mode)인 UE의 지원, NAS 메시지의 분배 기능, NAS 노드 선택 기능, 무선 액세스 네트워크 공유, 이중 연결성(dual connectivity), NR과 E-UTRA 간의 밀접한 상호동작(tight interworking) 등의 기능을 지원할 수 있다. UE는 사용자 장치를 의미할 수 있다. 사용자 장치는 단말(terminal), ME(mobile equipment), MS(mobile station) 등의 용어로 언급될 수 있다. 또한, 사용자 장치는 노트북, 휴대폰, PDA(personal digital assistant), 스마트폰, 멀티미디어 기기 등과 같이 휴대 가능한 기기일 수 있고, 또는 PC(personal computer), 차량 탑재 장치와 같이 휴대 불가능한 기기일 수도 있다. NEF는 3GPP 네트워크 기능들에 의해 제공되는, 예를 들어, 제3자(3rd party), 내부 노출(internal exposure)/재노출(re-exposure), 어플리케이션 기능, 에지 컴퓨팅(Edge Computing)을 위한 서비스들 및 능력들 을 안전하게 노출하기 위한 수단을 제공할 수 있다. NEF는 다른 NF(들)로부터 (다른 NF(들)의 노출된 능력 (들)에 기반한) 정보를 수신할 수 있다. NEF는 데이터 저장 네트워크 기능으로의 표준화된 인터페이스를 이용하여 구조화된 데이터로서 수신된 정보를 저장할 수 있다. 저장된 정보는 NEF에 의해 다른 NF(들) 및 AF(들)에게 재노출(re-expose)되고, 분석 등과 같은 다른 목적으로 이용될 수 있다. NRF 는 서비스 디스커버리 기능을 지원할 수 있다. NF 인스턴스로부터 NF 디스커버리 요청 수신하고, 발견 된 NF 인스턴스의 정보를 NF 인스턴스에게 제공할 수 있다. 또한, 이용 가능한 NF 인스턴스들과 그들이 지원하 는 서비스를 유지할 수 있다. 한편, 도 1에서는 설명의 편의상 UE가 하나의 PDU 세션을 이용하여 하나의 DN에 엑세스하는 경우에 대한 참조 모델을 예시하나, 본 개시는 이에 한정되지 않는다.UE는 다중의 PDU 세션들을 이용하여 예를 들어 2개의(즉, 지역적(local) 그리고 중심되는(central)) 데이 터 네트워크에 동시에 액세스할 수 있다. 이때, 서로 다른 PDU 세션을 위해 2개의 SMF들이 선택될 수 있다. 다 만, 각 SMF는 PDU 세션 내 지역적인 UPF 및 중심되는 UPF를 모두 제어할 수 있는 능력을 가질 수 있다. 또한, UE는 단일의 PDU 세션 내에서 제공되는 예를 들어 2개의(즉, 지역적인 그리고 중심되는) 데이터 네 트워크에 동시에 액세스할 수도 있다. NSSF는 UE를 서빙하는 네트워크 슬라이스 인스턴스들의 세트를 선택할 수 있다. 또한, NSSF는 허여된 NSSAI(network slice selection assistance information)를 결정하고, 필요한 경우, 가입된 S- NSSAI(single-network slice selection assistance information)들에 대한 매핑을 수행할 수 있다. 또한, NSSF는 설정된 NSSAI를 결정하고, 필요한 경우, 가입된 S-NSSAI들에 대한 매핑을 수행할 수 있다. 또한, NSSF는 UE를 서비스하는데 사용되는 AMF 세트를 결정하거나, 설정에 따라 NRF에 문의하여 후부 (candidate) AMF의 목록을 결정할 수 있다. NRF는 서비스 디스커버리 기능을 지원할 수 있다. NF 인스턴스로부터 NF 디스커버리 요청 수신하고, 발견 된 NF 인스턴스의 정보를 NF 인스턴스에게 제공할 수 있다. 또한, 이용 가능한 NF 인스턴스들과 그들이 지원하 는 서비스를 유지할 수 있다. 3GPP 시스템에서는 5G 시스템 내 NF들 간을 연결하는 개념적인 링크를 참조 포인트(reference point)라고 정의 한다. 다음은 도 1에서 표현된 5G 시스템 아키텍처에 포함되는 참조 포인트를 예시한다. - N1: UE와 AMF 간의 참조 포인트 - N2: (R)AN과 AMF 간의 참조 포인트 - N3: (R)AN과 UPF 간의 참조 포인트 - N4: SMF와 UPF 간의 참조 포인트 - N5: PCF와 AF 간의 참조 포인트 - N6: UPF와 데이터 네트워크 간의 참조 포인트 - N7: SMF와 PCF 간의 참조 포인트 - N8: UDM과 AMF 간의 참조 포인트 - N9: 2개의 코어 UPF들 간의 참조 포인트 - N10: UDM과 SMF 간의 참조 포인트 - N11: AMF와 SMF 간의 참조 포인트 - N12: AMF와 AUSF 간의 참조 포인트 - N13: UDM과 인증 서버 기능(authentication server function, AUSF) 간의 참조 포인트 - N14: 2개의 AMF들 간의 참조 포인트 - N15: 비-로밍 시나리오의 경우, PCF와 AMF 간의 참조 포인트, 로밍 시나리오의 경우 방문 네트워크(visited network) 내 PCF와 AMF 간의 참조 포인트 이하의 설명에서 단말은 UE를 의미할 수 있으며, UE 또는 단말의 용어가 혼용되어 사용될 수 있다. 이런 경우 특별히 단말을 부가적으로 정의하지 않는 한 UE로 이해될 수 있다. 도 2a는 본 개시의 실시예들에 따른, 단말의 기능적 구조의 예를 도시한다. 도 2a에 예시된 구성은 단말의 구성으로서 이해될 수 있다. 이하 사용되는 '~부', '~기' 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어, 또는, 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 도 2a를 참조하면, 단말은 통신부, 저장부, 제어부를 포함한다. 통신부는 무선 채널을 통해 신호를 송수신하기 위한 기능들을 수행한다. 예를 들어, 통신부는 시스템 의 물리 계층 규격에 따라 기저대역 신호 및 비트열 간 변환 기능을 수행한다. 예를 들어, 데이터 송신 시, 통신부는 송신 비트열을 부호화 및 변조함으로써 복소 심벌들을 생성한다. 또한, 데이터 수신 시, 통신부 는 기저대역 신호를 복조 및 복호화를 통해 수신 비트열을 복원한다. 또한, 통신부는 기저대역 신호 를 RF 대역 신호로 상향변환한 후 안테나를 통해 송신하고, 안테나를 통해 수신되는 RF 대역 신호를 기저대역 신호로 하향변환한다. 예를 들어, 통신부는 송신 필터, 수신 필터, 증폭기, 믹서, 오실레이터, DAC, ADC 등을 포함할 수 있다. 또한, 통신부는 다수의 송수신 경로(path)들을 포함할 수 있다. 나아가, 통신부는 다수의 안테나 요 소들로 구성된 적어도 하나의 안테나 어레이를 포함할 수 있다. 하드웨어의 측면에서, 통신부는 디지털 회 로 및 아날로그 회로(예: RFIC(radio frequency integrated circuit))로 구성될 수 있다. 여기서, 디지털 회로 및 아날로그 회로는 하나의 패키지로 구현될 수 있다. 또한, 통신부는 다수의 RF 체인들을 포함할 수 있다. 나아가, 통신부는 빔포밍을 수행할 수 있다. 통신부는 상술한 바와 같이 신호를 송신 및 수신한다. 이에 따라, 통신부의 전부 또는 일부는 '송신 부', '수신부' 또는 '송수신부'로 지칭될 수 있다. 또한, 이하 설명에서 무선 채널을 통해 수행되는 송신 및 수 신은 통신부에 의해 상술한 바와 같은 처리가 수행되는 것을 포함하는 의미로 사용된다. 저장부는 단말의 동작을 위한 기본 프로그램, 응용 프로그램, 설정 정보 등의 데이터를 저장한다. 저장부 는 휘발성 메모리, 비휘발성 메모리 또는 휘발성 메모리와 비휘발성 메모리의 조합으로 구성될 수 있다. 그리고, 저장부는 제어부의 요청에 따라 저장된 데이터를 제공한다. 제어부는 단말의 전반적인 동작들을 제어한다. 예를 들어, 제어부는 통신부를 통해 신호를 송신 및 수신한다. 또한, 제어부는 저장부에 데이터를 기록하고, 읽는다. 그리고, 제어부는 통신 규 격에서 요구하는 프로토콜 스택의 기능들을 수행할 수 있다. 이를 위해, 제어부는 적어도 하나의 프로세서 또는 마이크로(micro) 프로세서를 포함하거나, 또는, 프로세서의 일부일 수 있다. 또한, 통신부 의 일부 및 제어부는 CP(communication processor)라 지칭될 수 있다. 다양한 실시 예들에 따라, 제어부는 무선 통신망을 이용한 동기화를 수행하도록 제어할 수 있다. 예를 들어, 제어부는 단말이 후술하는 다양한 실시 예들에 따른 동작들을 수행하도록 제어할 수 있다. 본 개시의 다양한 실시예들에 따라, 단말은 ME(mobile equipment)와 USIM(UMTS(universal mobile telecommunications service) subscriber identity module)으로 구성될 수 있다. ME는 MT(mobile terminal)와 TE(terminal equipment)를 포함할 수 있다. MT는 무선 접속 프로토콜이 동작하는 부분일 수 있고, TE는 제어 기 능이 동작하는 부분일 수 있다. 예를 들어, 무선 통신 단말(예: 이동전화)의 경우 MT와 TE는 통합되어 있을 수 있고, 노트북의 경우에는 MT와 TE가 분리되어 있을 수 있다. 본 개시는 각 구성의 동작에 따라, ME와 USIM을 구 분되는 엔티티로 표현할 수 있으나, 이에 제한되지 않고 ME와 USIM을 포함하여 단말(예: UE)로 표현할 수 있거 나 ME를 단말로 표현하여 본 개시의 다양한 실시예들을 서술할 수 있음은 물론이다. 도 2b는 본 개시의 실시예들에 따른, 기지국의 기능적 구조의 예를 도시한다. 도 2b에 예시된 구성은 기지국 의 구성으로서 이해될 수 있다. 이하 사용되는 '~부', '~기' 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어, 또는, 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 도 2b를 참고하면, 기지국은 무선통신부, 백홀통신부, 저장부, 제어부를 포함한다. 무선통신부는 무선 채널을 통해 신호를 송수신하기 위한 기능들을 수행한다. 예를 들어, 무선통신부 는 시스템의 물리 계층 규격에 따라 기저대역 신호 및 비트열 간 변환 기능을 수행한다. 예를 들어, 데이터 송 신 시, 무선통신부는 송신 비트열을 부호화 및 변조함으로써 복소 심벌들을 생성한다. 또한, 데이터 수신 시, 무선통신부는 기저대역 신호를 복조 및 복호화를 통해 수신 비트열을 복원한다. 또한, 무선통신부는 기저대역 신호를 RF(radio frequency) 대역 신호로 상향변환한 후 안테나를 통해 송신 하고, 안테나를 통해 수신되는 RF 대역 신호를 기저대역 신호로 하향변환한다. 이를 위해, 무선통신부는 송신 필터, 수신 필터, 증폭기, 믹서(mixer), 오실레이터(oscillator), DAC(digital to analog convertor), ADC(analog to digital convertor) 등을 포함할 수 있다. 또한, 무선통신부는 다수의 송수신 경로(path) 들을 포함할 수 있다. 나아가, 무선통신부는 다수의 안테나 요소들(antenna elements)로 구성된 적어도 하 나의 안테나 어레이(antenna array)를 포함할 수 있다.하드웨어의 측면에서, 무선통신부는 디지털 유닛(digital unit) 및 아날로그 유닛(analog unit)으로 구성 될 수 있으며, 아날로그 유닛은 동작 전력, 동작 주파수 등에 따라 다수의 서브 유닛(sub-unit)들로 구성될 수 있다. 디지털 유닛은 적어도 하나의 프로세서(예: DSP(digital signal processor))로 구현될 수 있다. 무선통신부는 상술한 바와 같이 신호를 송신 및 수신한다. 이에 따라, 무선통신부의 전부 또는 일부 는 '송신부(transmitter)', '수신부(receiver)' 또는 '송수신부(transceiver)'로 지칭될 수 있다. 또한, 이하 설명에서, 무선 채널을 통해 수행되는 송신 및 수신은 무선통신부에 의해 상술한 바와 같은 처리가 수행되 는 것을 포함하는 의미로 사용된다. 백홀통신부는 네트워크 내 다른 노드들과 통신을 수행하기 위한 인터페이스를 제공한다. 즉, 백홀통신부 는 기지국에서 다른 노드, 예를 들어, 다른 접속 노드, 다른 기지국, 상위 노드, 코어 망 등으로 송신되는 비트열을 물리적 신호로 변환하고, 다른 노드로부터 수신되는 물리적 신호를 비트열로 변환한다. 저장부는 기지국의 동작을 위한 기본 프로그램, 응용 프로그램, 설정 정보 등의 데이터를 저장한다. 저장 부는 휘발성 메모리, 비휘발성 메모리 또는 휘발성 메모리와 비휘발성 메모리의 조합으로 구성될 수 있다. 그리고, 저장부는 제어부의 요청에 따라 저장된 데이터를 제공한다. 제어부는 기지국의 전반적인 동작들을 제어한다. 예를 들어, 제어부는 무선통신부를 통해 또는 백홀통신부를 통해 신호를 송신 및 수신한다. 또한, 제어부는 저장부에 데이터를 기록하고, 읽 는다. 그리고, 제어부는 통신 규격에서 요구하는 프로토콜 스택(protocol stack)의 기능들을 수행할 수 있 다. 다른 구현 예에 따라, 프로토콜 스텍은 무선통신부에 포함될 수 있다. 이를 위해, 제어부는 적어 도 하나의 프로세서(processor)를 포함할 수 있다. 다양한 실시 예들에 따라, 제어부 는 무선 통신망을 이용한 동기화를 수행하도록 제어할 수 있다. 예를 들어, 제어부 는 기지국이 후술하는 다양한 실시 예들 에 따른 동작들을 수행하도록 제어할 수 있다. 도 2c는 본 개시의 실시예들에 따른, 코어 네트워크 객체의 기능적 구조의 예를 도시한다. 본 개시의 다양한 실 시예들에 따른 무선 통신 시스템에서 코어 망 객체의 구성을 도시한다. 도 2c에 예시된 구성은 도 1의 AMF(15 0)를 포함하는 네트워크 엔티티들 중 적어도 하나의 기능을 가지는 장치의 구성으로서 이해될 수 있다. 이하 사 용되는 '~부', '~기' 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어, 또는, 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 상기 도 2c를 참고하면, 코어 망 객체는 통신부, 저장부, 제어부를 포함하여 구성된다. 통신부는 네트워크 내 다른 장치들과 통신을 수행하기 위한 인터페이스를 제공한다. 즉, 통신부는 코 어 망 객체에서 다른 장치로 송신되는 비트열을 물리적 신호로 변환하고, 다른 장치로부터 수신되는 물리적 신 호를 비트열로 변환한다. 즉, 통신부는 신호를 송신 및 수신할 수 있다. 이에 따라, 통신부는 모뎀 (modem), 송신부(transmitter), 수신부(receiver) 또는 송수신부(transceiver)로 지칭될 수 있다. 이때, 통신 부는 코어 망 객체가 백홀 연결(예: 유선 백홀 또는 무선 백홀)을 거쳐 또는 네트워크를 거쳐 다른 장치들 또는 시스템과 통신할 수 있도록 한다. 저장부는 코어 망 객체의 동작을 위한 기본 프로그램, 응용 프로그램, 설정 정보 등의 데이터를 저장한다. 저장부는 휘발성 메모리, 비휘발성 메모리 또는 휘발성 메모리와 비휘발성 메모리의 조합으로 구성될 수 있다. 그리고, 저장부는 제어부의 요청에 따라 저장된 데이터를 제공한다. 제어부는 코어 망 객체의 전반적인 동작들을 제어한다. 예를 들어, 제어부는 통신부를 통해 신 호를 송수신한다. 또한, 제어부는 저장부에 데이터를 기록하고, 읽는다. 이를 위해, 제어부는 적어도 하나의 프로세서(processor)를 포함할 수 있다. 본 개시의 다양한 실시예들에 따라, 제어부는 무선 통신망을 이용한 동기화를 수행하도록 제어할 수 있다. 예를 들어, 제어부는 코어 망 객체가 후술하는 다 양한 실시예들에 따른 동작들을 수행하도록 제어할 수 있다. 이하에서, 본 개시는 무선 네트워크 환경에서 5G ProSe를 효과적이고 안전하게 지원하기 위한 방법 및 장치를 제공하는 것을 목적으로 한다. 5G 시스템에서는, 5G ProSe를 통해 인접한 두 UE 간의 직접 통신(Direct Communication) 서비스, 한 UE가 인접 한 릴레이 UE를 거쳐 데이터 네트워크와 통신하는 UE-to-Network (U2N) Relay 통신 서비스, 그리고 두 UE가 인 접한 릴레이 UE를 거쳐 통신하는 UE-to-UE (U2U) Relay 통신 서비스를 지원할 수 있다. 5G ProSe를 통해 교신하 고자 하는 UE들은 서로를 발견하고자 Discovery 메시지 송수신할 수 있다. 한편, UE들이 송수신하는 Discovery 메시지는 사용자 식별자(user ID), IP(Internet Protocol) 주소, 그리고 서비스 코드를 포함할 수 있다. 이와 관련한 과정들에 기반하여, Discovery 메시지에 대해 무결성 및 재전송 보호가 지원되지 않는 경우, 공격자가 해당 메시지를 조작(message manipulation)하거나 재전송 공격(replay attack)을 감행하는 문제점이 있을 수 있다. 나아가 Discovery 메시지에 대해 기밀성 보호가 지원되지 않는 경우, 공격자는 해당 메시지에 포함된 사 용자의 개인 정보를 무단으로 습득하여 악용하는 문제점이 있을 수 있다. 이에 따라, 본 개시에서는 5G ProSe를 통해 교신하고자 하는 UE들이 서로를 발견하기 위해 송수신하는 Discovery 메시지를 보호하는 방안을 제공하고자 한다. 보다 구체적으로, UE들이 5G ProSe에 있어 Direct Communication, U2N Relay Communication, 그리고 U2U Relay Communication 서비스를 복합적으로 활용하는 경 우, 이들 서비스에 연계된 Multiple Key Set을 통해 Discovery 메시지를 보호하는 방안을 제안하고자 한다. 도 3은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 Direct Communication 구조를 도시한다. 도 3을 참조하면, UE-1과 UE-2는 모두 5G ProSe enabled UE로써 서로와 직접 통신을 할 수 있다. 또 한, UE-1과 UE-2는 데이터 및 시그날링을 전송하기 위해서 PC5 인터페이스를 사용할 수 있다. 도 4는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-Network Relay Communication 구조를 도시한다. 도 4를 참조하면, Remote UE와 U2N Relay는 모두 5G ProSe enabled UE로써 Remote UE는 U2N Relay를 이용하여 NG-RAN 및 5G Core에 접근할 수 있고, 다양한 서비스를 제공하는 데이터 네 트워크와 통신할 수도 있다. U2N Relay는 Remote UE가 NG-RAN 및 5G Core에 접근할 수 있고, 다양한 서비스를 제공하는 데이터 네트워크와 통신할 수 있도록 데이터 Relay 서비스를 제공할 수도 있다. 또한, Remote UE와 U2N Relay는 데이터 및 시그날링을 전송하기 위해서 PC5 인터페이스를 사용할 수 있다. U2N Relay와 NG-RAN은 데이터 및 시그날링을 전송하기 위해서 Uu 인터페이스를 사용 할 수 있다. 5G Core와 데이터 네트워크는 데이터 및 시그날링을 전송하기 위해서 N6 인터페이스를 사용한다. 도 5는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-UE Relay Communication 구조를 도시한다. 도 5를 참조하면, End UE-1, End UE-2, 그리고 U2U Relay는 모두 5G ProSe enabled UE로써 End UE-1과 End UE-2는 U2U Relay를 이용하여 통신을 할 수 있다. U2U Relay는 End UE- 1과 End UE-2가 통신을 할 수 있도록 데이터 Relay 서비스를 제공할 수 있다. 또한, 5G End UE- 1, End UE-2, 그리고 U2U Relay는 데이터 및 시그날링을 전송하기 위해서 PC5 인터페이스를 사 용할 수 있다. 도 6은 본 개시의 다양한 실시예들에 따른, UE가 5G ProSe의 Discovery 메시지를 생성하고, Discovery 메시지 및 구성 요소에 보안을 적용하여 전송하는 과정을 도시한다. 도 6을 참조하면, 단계에서, UE는 5G ProSe Discovery 서비스에 대한 권한이 있는지 검증(authorized)받 을 수 있고, 5G ProSe Discovery 관련 Policy/Parameter를 획득(provisioned)할 수 있다. 5G ProSe Discovery 관련 Policy/Parameter는 User Info ID(s), ProSe Code 또는 ProSe Code와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. 5G ProSe Discovery 관련 Security material은, PC5 security policies, Discovery User Integrity Key (DUIK), Discovery User Scrambling Key (DUSK), Discovery User Confidentiality Key (DUCK), Encrypted_bits_mask, chosen PC5 ciphering algorithm, CURRENT_TIME, UTC (Universal Time Coordinated)-based counter, MAX_OFFSET, 또는 Validity Timer 중 적어도 하나를 포함할 수 있다. User Info ID(s)는 Discovery 메시지 종류에 따라 Announcer Info, Discoverer Info, 또는 Discoveree Info 중 적어도 하나로 사용될 수 있다. ProSe Code는 UE가 인가받은 ProSe Application 또는 Service와 연관될 수 있다. 그리고 ProSe Code는 Discovery 서비스의 종류(Type)에 따라, ProSe Application Code, ProSe Restricted Code, ProSe Query Code, ProSe Response Code, 또는 Relay Service Code (RSC) 중 하나일 수 있다. PC5 security policies는 UE가 ProSe Code와 연관된 ProSe Application 또는 Service 지원을 위해 인근 UE와 PC5 링크를 수립할 시 사용하는 보안 정책일 수 있다. DUIK는 UE가 Discovery 메시지 구성 요소에 무결성 보호를 적 용하기 위해 사용하는 Key일 수 있다. UE는 DUIK를 사용하여 Discovery 메시지 구성 요소에 포함되는 Message Integrity Check (MIC)를 계산할 수 있다. DUSK는 UE가 Discovery 메시지 구성 요소에 스크램블링 보호를 적용 하기 위해 사용하는 Key일 수 있다. UE가 DUSK를 사용하여 전송하는 Discovery 메시지 구성 요소들 간의 연관성 을 배제하면, 장시간에 걸친 추적(Tracking over time)을 방지할 수 있다. DUCK는 UE가 Discovery 메시지 구성 요소에 기밀성 보호를 적용하기 위해 사용하는 Key일 수 있다. UE는 DUCK, Encrypted_bits_mask, 또는 chosen ciphering algorithm 중 적어도 하나를 사용하여 Discovery 메시지의 구성 요소의 특정 부분을 암호화할 수 있 다. CURRENT_TIME은 현재의 UTC 시간 값으로 제공될 수 있으며, UE가 향후 5G ProSe 동작의 시간 기준으로 삼는 ProSe Clock을 설정하는 데 사용될 수 있다. UTC-based counter는 UTC 시간 기준으로 하나의 Discovery slot과 연관되어 있으며, UE가 ProSe의 Discovery 관련 동작을 수행하도록 허용된 시점을 나타내는 값일 수 있다. MAX_OFFSET은 UE가 5G ProSe의 Discovery 관련 동작을 수행하도록 허용된 시점과 UE가 5G ProSe의 Discovery 관련 동작을 수행한 시점 사이에 발생할 수 있는 최대 시간 차이를 나타내는 값일 수 있다. MAX_OFFSET 값은, 공격자가 획득한 Discovery 메시지로 재사용 공격(Replay attack)을 감행하는 것을 제한하기 위해 사용될 수 있 다. Validity Timer는 5G ProSe 서비스에 대한 권한 및 관련 Policy/Parameter가 유효한 시간을 나타내는 값일 수 있다. 단계에서, UE는 Discovery 메시지를 생성(create 또는 form)할 수 있다. Discovery 메시지는 인가받은 5G ProSe Discovery 관련 요소로 구성될 수 있으며, Type of Discovery Message, UTC-based counter의 LSB (Least Significant Bits), MIC, ProSe Code, Application layer group ID, Application layer ID, UE info ID(s), Status indicator, Metadata, NCGI (NR Cell Global Identifier), RRC (Radio Resource Control) container, 또는 Relay TAI (Tracking Area Identity) 중 적어도 하나를 포함할 수 있다. Type of Discovery Message는 전송하는 Discovery 메시지의 Type을 나타낼 수 있다. UTC-based counter의 LSB 는 단계에서 제공받은 UTC-based counter의 least significant 4-bits 값일 수 있다. MIC는 UE가 Discovery 메시지 구성 요소의 무결성 보호를 위해 포함하는 값일 수 있다. Application layer group ID는 UE 가 속한 Application layer group을 identify하는 값일 수 있다. Application layer ID는 Discoveree user info를 나타내는 값일 수 있다. UE info ID(s)는 UE가 획득한 UE info ID(s)정보로, UE의 필요에 따라 Announcer Info, Discoverer info, Target user info, Discoveree info, Target discoveree info, Source discoverer end UE info, Target discoveree end UE info, UE-to-UE relay UE info, 또는 end UE info list 중 적어도 하나일 수 있다. Status indicator는 Relay 역할을 하는 UE가 Connectivity 서비스를 제공하기에 충 분한 자원을 갖고 있는지 표시하기 위한 값일 수 있다. Metadata는 Application 계층의 Metadata 정보를 포함하 는 값일 수 있다. NCGI는 U2N Relay가 캠핑하고 있는 Serving cell의 NCGI 정보일 수 있다. RRC container는 하단 계층에서 수신한 RRC container 정보일 수 있다. Relay TAI는 U2N Relay의 Serving cell에 대응하는 Tracking area identity 정보일 수 있다. 단계에서, UE가 단계에서 DUIK를 획득한 경우, UE는 DUIK를 이용하여 계산한 MIC 값으로 Discovery 메시지의 구성 요소의 MIC 값을 설정할 수 있다. 그리고 UE는 MIC 값을 설정함으로써, Discovery 메시지의 구성 요소에 무결성 보호(integrity protection)을 적용할 수 있다. UE가 단계에서 DUIK를 획득하지 못한 경우, UE는 32-bits 랜덤 string으로 Discovery 메시지 구성 요소의 MIC 값을 설정할 수 있다. 단계에서, UE가 단계에서 DUCK, Encrypted_bits_mask, 또는 chosen ciphering algorithm중 적어도 하나를 획득한 경우, UE는 획득한 DUCK, Encrypted_bits_mask, 또는 chosen ciphering algorithm 중 적어도 하 나를 이용하여 Discovery 메시지의 구성 요소의 특정 부분을 암호화할 수 있다. 예를 들어, UE는 Discovery 메 시지의 구성 요소에 기밀 보호(confidentiality protection)를 적용할 수 있다. 단계에서, UE가 단계에서 DUSK를 획득한 경우, UE는 Discovery 메시지의 구성 요소에 스크램블링 보 호(scrambling protection)를 적용할 수 있다. 단계에서, UE는 Discovery 메시지를 전송할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다.도 7은 본 개시의 다양한 실시예들에 따른, UE가 5G ProSe의 Discovery 메시지를 수신하고, Discovery 메시지 및 구성 요소에 적용된 보안을 해제하는 과정을 도시한다. 도 7을 참조하면, 단계에서, UE는 5G ProSe Discovery 서비스에 대한 권한이 있는지 검증받을 수 있고, 5G ProSe Discovery 관련 Policy/Parameter를 획득할 수 있다. 5G ProSe Discovery 관련 Policy/Parameter는 Discovery filter, User Info ID(s), ProSe Code 또는 ProSe Code와 연관된 Security material 중 적어도 하나 를 포함할 수 있다. 5G ProSe Discovery 관련 Security material은, PC5 security policies, DUIK, DUSK, DUCK, Encrypted_bits_mask, chosen PC5 ciphering algorithm, CURRENT_TIME, UTC-based counter, MAX_OFFSET, 또는 Validity Timer 중 적어도 하나를 포함할 수 있다. Discovery filter는 ProSe Code를 포함할 수 있으며, UE가 수신한 Discovery 메시지에 대해, 특정 ProSe Code 와 연관된 Discovery 메시지를 선별하는데 사용될 수 있다. DUIK는 UE 또는 네트워크가 수신한 Discovery 메시 지 구성 요소의 무결성을 검증하기 위해 사용하는 Key일 수 있다. UE 또는 네트워크는 수신한 Discovery 메시지 구성 요소의 MIC를 계산할 수 있다. 그리고 UE 또는 네트워크는 계산한 MIC를 Discovery 메시지 구성 요소에 포 함된 MIC와 비교할 수 있다. DUSK는 UE가 수신한 Discovery 메시지 구성 요소에 적용된 스크램블링 보호를 해제 하기 위해 사용하는 Key일 수 있다. DUCK는 UE가 수신한 Discovery 메시지 구성 요소에 적용된 기밀성 보호를 해제하기 위해 사용하는 Key일 수 있다. UE는 DUCK, Encrypted_bits_mask, 또는 chosen ciphering algorithm 중 적어도 하나를 사용하여 특정 부분이 암호화된 Discovery 메시지의 구성 요소를 복호화할 수 있다. 단계에서, UE는 Discovery 메시지를 수신할 수 있다. 단계에서, UE가 단계에서 DUSK를 획득한 경우, UE는 Discovery 메시지 구성 요소에 적용된 스크램블 링 보호를 해제(undo 또는 release)할 수 있다. 단계에서, UE는 Discovery 메시지 구성 요소의 암호화되지 않은 정보가 Discovery filter에 부합하는지 확 인할 수 있다. 일부의 정보도 Discovery filter에 부합하지 않는 경우, UE는 Discovery 메시지의 처리를 중단할 수 있다. 단계에서, UE가 단계에서 DUCK, Encrypted_bits_mask, 또는 chosen ciphering algorithm 중 적어도 하나를 획득한 경우, UE는 DUCK, Encrypted_bits_mask, 또는 chosen ciphering algorithm 중 적어도 하나를 이 용하여 암호화된 Discovery 메시지의 구성 요소를 복호화 할 수 있다. 예를 들어, UE는 Discovery 메시지의 구 성 요소에 적용된 기밀 보호를 해제(undo 또는 release)할 수 있다. 단계에서, UE는 복호화된 Discovery 메시지 구성 요소의 정보가 Discovery filter에 부합하는지 확인할 수 있다. Discovery 메시지 구성 요소의 정보가 Discovery filter에 부합하지 않는 경우, Discovery 메시지 처리 를 중단할 수 있다. 단계에서, UE가 단계에서 DUIK를 획득하고 MIC 검증을 필요로 하는 경우, UE가 DUIK를 사용하여 직접 (directly) MIC 검증을 수행할 수 있다. UE가 단계에서 DUIK를 획득하지 않았고 MIC 검증을 필요로 하는 경우, 네트워크에 요청하여 MIC 검증을 수행할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다. 도 8은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 Direct Discovery 모델 A 절차를 도시한다. 도 8을 참조하면, UE-1, UE-2, UE-3, UE-4, 그리고 UE-5는 도 1에서 단말의 구 성 일부 또는 전부를 포함할 수 있다. 본 개시에서 Announcing UE 역할의 UE-1이 Direct Discovery Announcement 메시지를 전송하면 Monitoring UE 역할의 UE-2, UE-3, UE-4, 그리고 UE-5가 Direct Discovery Announcement 메시지를 수신하여 UE-1을 발견할 수 있다. 도 8을 참조하면, 단계에서, UE-1, UE-2, UE-3, UE-4, 그리고 UE-5는 다음의 과정들 중 적어도 하나를 수행할 수 있다. - UE-1 -- Direct Discovery 모델 A 서비스에 대한 권한이 있는지 검증받을 수 있다. -- Direct Discovery 모델 A 관련 Policy/Parameter를 획득할 수 있다. Direct Discovery 모델 A 관련 Policy/Parameter는 User Info ID(s), ProSe Restricted Code, 또는 ProSe Restricted Code와 연관된 Security material 중 적어도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. 또한, U2U Relay Discovery 관련 Policy/Parameter는, Direct Discovery 메시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책을 포함할 수 있다. Direct Discovery 메 시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책은 다양한 요 소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나를 포함)를 기준으로 설정될 수 있으며, 앞서 열거한 요소들 외에 적어도 하나의 다른 요소가 추가되어 기준으로 활용될 수 있다. - UE-2, UE-3, UE-4, 그리고 UE-5 -- Direct Discovery 모델 A 서비스에 대한 권한이 있는지 검증 받을 수 있다. -- Direct Discovery 모델 A 관련 Policy/Parameter를 획득할 수 있다. Direct Discovery 모델 A 관련 Policy/Parameter는 Discovery filter, User Info ID(s), ProSe Restricted Code, 또는 ProSe Restricted Code와 연관된 Security material 중 적어도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. 단계에서, Discovery 메시지를 송신하는 UE는, U2U Relay 서비스에 대한 권한을 승인받을 수 있다. 송신 UE는 U2U Relay Discovery 관련 Policy/Parameter를 획득한 경우, 송신할 Discovery 메시지가 U2U Relay Discovery 관련 Policy/Parameter에 해당하는 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 결정할 수 있다. 송신 UE의 Discovery 메시지가 U2U Relay 서비스에 의해 릴레이 된다면, 송신 UE는 기존 1홉(hop) 통신 범위 밖의 UE와 서로를 발견할 수 있다. 그리고 송신 UE는 기존 1홉 통신 범위 밖의 UE와 5G ProSe 통신을 수행 할 수 있다. Discovery 메시지의 릴레이 허용 여부는 ProSe Application Server 또는 네트워크 정책에 의해 결정될 수 있지 만, 송신 UE의 상황에 따라 동적으로 설정될 수도 있다. 일 예로, 단말이 드문드문(Sparsely) 배치되어 있는 현 장에서 송신 UE 인근에 수신 UE가 존재하지 않는 것으로 판단되는 경우, 송신 UE는 Discovery 메시지의 릴레이 를 허용할 수 있다. 따라서, 송신 UE는 보다 먼 거리에 있는 수신 UE와의 통신 기회를 탐색할 수 있다. 또한, 송신 UE의 Battery level이 일정 수준 이하로 내려가거나 송신 UE가 처리하는 Traffic load가 일정 수준 이상으 로 올라갔을 때, 송신 UE는 Discovery 메시지가 릴레이되지 못하도록 설정할 수 있다. 따라서, 송신 UE는 1홉 통신 범위 안의 UE만을 대상으로 데이터 및 시그날링을 수행하도록 통신 기회를 제한할 수 있다. 본 개시에서 송신 UE가 Discovery 메시지의 릴레이 허용 여부를 결정할 때 사용하는 기준은 위에 열거한 요소(neighbor density, battery level, 또는 traffic load 중 적어도 하나를 포함)로 제한되지 않으며, 앞서 열거한 요소 외 에 다른 요소가 추가되어 기준으로 활용될 수도 있다. 단계에서, UE-1은 Direct Discovery Announcement 메시지를 단계에서 제공받은 Security material들을 이용하여 보호한 후 UE-2, UE-3, UE-4, 그리고 UE-5에 전송할 수 있다. UE-1이 Direct Discovery Announcement 메시지가 U2U Relay에 의해 릴레이되는 것을 단계에서 허용 하지 않은 경우, UE-1은 Direct Discovery 관련 요소를 포함하는 Direct Discovery Announcement 메시지 를 구성할 수 있다. Direct Discovery 관련 요소는 ProSe Restricted Code와 연계되어 있을 수 있다. UE- 1은 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관 련 요소에 보안을 적용할 수 있다. UE-1이 Direct Discovery Announcement 메시지가 U2U Relay에 의해 릴레이되는 것을 단계에서 허용 한 경우, UE-1은 Direct Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Direct Discovery Announcement 메시지를 구성할 수 있다. Direct Discovery 관련 요소는 ProSe Restricted Code와 연계되어 있을 수 있다. UE-1은 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. UE-1은 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있다. Relay_indication은 UE-1이 Direct Discovery Announcement 메시지가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. UE-1은 보안이 적용된 Direct Discovery 관련 요소, 보안이 적용된 U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Direct Discovery Announcement 메시지를 구성할 수 있다. 본 개시에서, UE가 Discovery 메시지가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 표시하는 방법은 Relay_indication으로 제한되지 않는다. Relay_indication은 다른 명칭으로 사용될 수 있다. 또는, UE- 1은 Discovery 메시지에 Relay_indication을 포함하지 않더라도, 다른 직/간접적인 방법으로 Discovery 메시지가 U2U Relay에 의해 릴레이되는 것을 허용함을 표시할 수 있다. 단계에서, Monitoring UE 역할의 UE-2, UE-3, UE-4, 그리고 UE-5는 단계에서 제공받은 Discovery filter에 부합하는 Direct Discovery Announcement 메시지를 수신할 수 있다. Direct Discovery Announcement 메시지를 수신한 UE(예를 들어, UE-2, UE-3, UE-4, 또는 UE- 5 중 적어도 하나)는, 수신한 Direct Discovery Announcement 메시지가 Relay_indication을 포함하지 않 는 경우, 또는 수신한 Direct Discovery Announcement 메시지가 Relay_indication을 포함하지만 수신 UE가 단 계에서 U2U Relay 서비스에 대한 권한에 승인을 받지 않은 경우, Direct Discovery Announcement 메시지 에 포함된 Direct Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소에 적용된 보안을 해제할 수 있다. 수신 UE는, Direct Discovery 관련 요소가 단계에서 제공받은 Direct Discovery 관련 Discovery filter에 부합한다면 UE-1을 발견할 수 있다. Direct Discovery Announcement 메시지를 수신한 UE(예를 들어, UE-2, UE-3, UE-4, 또는 UE- 5 중 적어도 하나)는, 수신한 Direct Discovery Announcement 메시지가 Relay_indication을 포함하고 수 신 UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받은 경우, Direct Discovery Announcement 메 시지에 포함된 Direct Discovery 관련 요소와 U2U Relay Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 메시지의 Direct Discovery 관 련 요소에 적용된 보안을 해제할 수 있다. 수신 UE는, Direct Discovery 관련 요소가 단계에서 제공받은 Direct Discovery 관련 Discovery filter에 부합한다면 UE-1을 발견할 수 있다. 수신 UE는, 단계에 서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 메시지의 U2U Relay Discovery 관련 요 소에 적용된 보안을 해제할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter 부합하는 U2U Relay Discovery 서비 스를 제공할 때, 보안이 적용되어 있는 Direct Discovery 관련 요소를 이용할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다. 도 9는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 Direct Discovery 모델 B 절차를 도시한다. 도 9을 참조하면, UE-1, UE-2, UE-3, UE-4, 그리고 UE-5는 도 1에서 단말의 구 성 일부 또는 전부를 포함할 수 있다. 본 개시에서 Discoverer UE 역할의 UE-1이 Direct Discovery Solicitation 메시지를 전송할 수 있다. Discoveree UE 역할의 UE-2, UE-3, UE-4, 그리고 UE- 5가 Direct Discovery Solicitation 메시지를 수신할 수 있고, UE-1을 발견할 수 있고, UE-1에 게 Direct Discovery Response 메시지를 전송할 수 있다. UE-1은 Direct Discovery Response 메시지를 수 신할 수 있고, Direct Discovery Response 메시지를 전송한 Discoveree UE를 발견할 수 있다. 도 9을 참조하면, 단계에서, UE-1, UE-2, UE-3, UE-4, 그리고 UE-5는 다음의 과정들 중 적어도 하나를 수행할 수 있다.- UE-1 -- Direct Discovery 모델 B 서비스에 대한 권한이 있는지 검증 받을 수 있다. -- Direct Discovery 모델 B 관련 Policy/Parameter를 획득한다. Direct Discovery 모델 B 관련 Policy/Parameter는 Discovery filter, User Info ID(s), ProSe Query Code, 또는 ProSe Query Code와 연관된 Security material 중 적어도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. 또한, U2U Relay Discovery 관련 Policy/Parameter는, Direct Discovery 메시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책을 포함할 수 있다. UE가 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나를 포함)를 기준으로 설정될 수 있으며, 앞서 열거한 요소 외에 다른 요소가 추가되어 기준으로 활용될 수도 있다. - UE-2, UE-3, UE-4, 그리고 UE-5 -- Direct Discovery 모델 B 서비스에 대한 권한이 있는지 검증받을 수 있다. -- Direct Discovery 모델 B 관련 Policy/Parameter를 획득할 수 있다. Direct Discovery 모델 B 관련 Policy/Parameter는 Discovery filter, User Info ID(s), ProSe Response Code, 또는 ProSe Response Code와 연관된 Security material 중 적어도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. 또한, U2U Relay Discovery 관련 Policy/Parameter는, Direct Discovery 메시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책을 포함할 수 있다. UE가 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나를 포함)를 기준으로 설정될 수 있으며, 앞서 열거한 요소 외에 다른 요소가 추가되어 기준으로 활 용될 수도 있다. 단계은, 도 8의 단계의 동작을 포함할 수 있다. 단계에서, UE-1은 Direct Discovery Solicitation 메시지를 단계에서 제공받은 Security material들을 이용하여 보호한 후, UE-1, UE-2, UE-3, UE-4, 그리고 UE-5에 전송할 수 있다. UE-1이 Direct Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 단계에서 허용 하지 않은 경우, UE-1은 Direct Discovery 관련 요소를 포함하는 Direct Discovery Solicitation 메시지 를 구성할 수 있다. Direct Discovery 관련 요소는 ProSe Query Code와 연계되어 있을 수 있다. UE-1은 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소에 보안을 적용할 수 있다. UE-1이 Direct Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 단계에서 허용 한 경우, UE-1은 Direct Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Direct Discovery Solicitation 메시지를 구성할 수 있다. Direct Discovery 관련 요소는 ProSe Query Code와 연계되어 있을 수 있다. UE-1은 단계에서 제공받은 Direct Discovery 관 련 Security material을 사용하여 Direct Discovery 관련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. UE-1은 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있다. Relay_indication은 UE-1이 Direct Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의 미할 수 있다. UE-1은 보안이 적용된 Direct Discovery 관련 요소, 보안이 적용된 U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Direct Discovery Solicitation 메시지를 구성 할 수 있다.단계에서, Discoveree UE 역할의 UE-2, UE-3, UE-4, 그리고 UE-5는 단계에서 제공받은 Discovery filter에 부합하는 Direct Discovery Solicitation 메시지를 수신할 수 있다. Direct Discovery Solicitation 메시지를 수신한 UE(예를 들어, UE-2, UE-3, UE-4, 또는 UE- 5 중 적어도 하나)는, 수신한 Direct Discovery Solicitation 메시지가 Relay_indication을 포함하지 않 는 경우, 또는 수신한 Direct Discovery Solicitation 메시지가 Relay_indication을 포함하지만 수신 UE가 단 계에서 U2U Relay 서비스에 대한 권한에 승인을 받지 않은 경우, Direct Discovery Solicitation 메시지 에 포함된 Direct Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소에 적용된 보안을 해제할 수 있다. 수신 UE는, Direct Discovery 관련 요소가 단계에서 제공받은 Direct Discovery 관련 Discovery filter에 부합한다면 UE-1을 발견할 수 있다. Direct Discovery Solicitation 메시지를 수신한 UE(예를 들어, UE-2, UE-3, UE-4, 또는 UE- 5 중 적어도 하나)는, 수신한 Direct Discovery Solicitation 메시지가 Relay_indication을 포함하고 수 신 UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받은 경우, Direct Discovery Solicitation 메 시지에 포함된 Direct Discovery 관련 요소와 U2U Relay Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 메시지의 Direct Discovery 관 련 요소에 적용된 보안을 해제할 수 있다. 수신 UE는, Direct Discovery 관련 요소가 단계에서 제공받은 Direct Discovery 관련 Discovery filter에 부합한다면 UE-1을 발견할 수 있다. 수신 UE는, 단계에 서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 메시지의 U2U Relay Discovery 관련 요 소에 적용된 보안을 해제할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합하는 U2U Relay Discovery 서 비스를 제공할 때, 보안이 적용되어 있는 Direct Discovery 관련 요소를 이용할 수 있다. 단계에서, UE-1을 발견한 UE-2 그리고 UE-3은 Direct Discovery Response 메시지를 회신 하기로 결정할 수 있다. 또한, 단계은, 도 8의 단계의 동작을 포함할 수 있다. 단계에서, UE-2 그리고 UE-3은 Direct Discovery Response 메시지를 단계에서 제공받은 Security material들을 이용하여 보호한 후, UE-1에 전송할 수 있다. 단계에서 UE-2 그리고 UE-3이 Direct Discovery Response 메시지가 U2U Relay에 의해 릴레이되 는 것을 허용하지 않은 경우, UE-2 그리고 UE-3은 Direct Discovery 관련 요소를 포함하는 Direct Discovery Response 메시지를 구성할 수 있다. Direct Discovery 관련 요소는 ProSe Response Code와 연계되어 있을 수 있으며, UE-2 그리고 UE-3은 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소에 보안을 적용할 수 있다. 단계에서 UE-2 그리고 UE-3이 Direct Discovery Response 메시지가 U2U Relay에 의해 릴레이되 는 것을 허용한 경우, UE-2 그리고 UE-3은 Direct Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Direct Discovery Response 메시지를 구성할 수 있다. Direct Discovery 관련 요소는 ProSe Response Code와 연계되어 있을 수 있다. UE-2 그리고 UE- 3은 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관 련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있으며, UE- 2 그리고 UE-3은 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있다. Relay_indication은 UE-2 그리고 UE-3이 Direct Discovery Response 메시지가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. UE- 2 그리고 UE-3은 보안이 적용된 Direct Discovery 관련 요소, 보안이 적용된 U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 Direct Discovery Response 메시지를 구성할 수 있다. 그리고 UE-2 그리고 UE-3은 Direct Discovery Response 메시지를 UE-1으로 전송할 수 있 다.단계에서, Discoverer UE 역할의 UE-1은 단계에서 제공받은 Discovery filter에 부합하는 Direct Discovery Response 메시지를 UE-2 그리고 UE-3로부터 수신할 수 있다. UE-1은, 수신한 Direct Discovery Response 메시지가 Relay_indication을 포함하지 않는 경우, 또는 수신 한 Direct Discovery Response 메시지가 Relay_indication을 포함하지만 UE-1이 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받지 않은 경우, Direct Discovery Response 메시지에 포함된 Direct Discovery 관련 요소를 확인할 수 있다. UE-1은, 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소에 적용된 보안을 해제할 수 있다. UE-1은, Direct Discovery 관 련 요소가 단계에서 제공받은 Direct Discovery 관련 Discovery filter에 부합한다면, Discovery filter 에 부합하는 Direct Discovery Response 메시지를 송신한 UE를 발견할 수 있다. UE-1은, 수신한 Direct Discovery Response 메시지가 Relay_indication을 포함하고 UE-1이 단계 에서 U2U Relay 서비스에 대한 권한에 승인을 받은 경우, Direct Discovery Response 메시지에 포함된 Direct Discovery 관련 요소와 U2U Relay Discovery 관련 요소를 확인할 수 있다. UE-1은, 단계에서 제공받은 Direct Discovery 관련 Security material을 사용하여 메시지의 Direct Discovery 관련 요소에 적용 된 보안을 해제할 수 있다. UE-1은, Direct Discovery 관련 요소가 단계에서 제공받은 Direct Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합하는 Direct Discovery Response 메 시지를 송신한 UE를 발견할 수 있다. UE-1은, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 메시지의 U2U Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있다. UE- 1은, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제공할 때, 보안이 적용되 어 있는 Direct Discovery 관련 요소를 이용할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다. 도 10은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-Network Relay Discovery 모델 A 절차를 도시한 다. 도 10을 참조하면, U2N Relay, Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4는 도 1에서 단말의 구성 일부 또는 전부를 포함할 수 있다. 본 개시에서 Announcing UE 역할의 U2N Relay이 U2N Relay Discovery Announcement 메시지를 전송하면 Monitoring UE 역할의 Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4가 U2N Relay Discovery Announcement 메시지를 수신하여 U2N Relay을 발견할 수 있다. U2N Relay은 Relay Discovery Additional Information 메시지를 전송할 수도 있다. 단계에서, U2N Relay, Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4는 다음의 과정들 중 적어도 하나를 수행할 수 있다. - U2N Relay -- U2N Relay Discovery 모델 A 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2N Relay Discovery 모델 A 관련 Policy/Parameter를 획득할 수 있다. U2N Relay Discovery 모델 A 관련 Policy/Parameter는 User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 User Info ID(s), RSC 또는 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. 또한, U2U Relay Discovery 관련 Policy/Parameter는, U2N Relay Discovery 메시지가 U2U Relay 서비스 에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책을 포함할 수 있다. UE가 결정하는데 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나)를 기준으로 설정될 수 있다. 또한, 앞서 열거한 요소들 외에 다른 요소가 추가되어 기준으로 활용될 수도 있다. - Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4 -- U2N Relay Discovery 모델 A 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2N Relay Discovery 모델 A 관련 Policy/Parameter를 획득할 수 있다. U2N Relay Discovery 모델 A 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다.-- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또한 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. 단계은, 도 8의 단계의 동작을 포함할 수 있다. 단계에서, U2N Relay은 U2N Relay Discovery Announcement 메시지를 단계에서 제공받은 Security material들을 이용하여 보호할 수 있고, Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4에 전송할 수 있다. 단계에서 U2N Relay이 U2N Relay Discovery Announcement 메시지가 U2U Relay에 의해 릴레이되는 것을 허용하지 않은 경우, U2N Relay은 U2N Relay Discovery 관련 요소를 포함하는 U2N Relay Discovery Announcement 메시지를 구성할 수 있다. U2N Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. U2N Relay은 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 보안을 적용할 수 있다. 단계에서 U2N Relay이 U2N Relay Discovery Announcement 메시지가 U2U Relay에 의해 릴레이되는 것을 허용한 경우, U2N Relay은 U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2N Relay Discovery Announcement 메시지를 구성할 수 있다. U2N Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, U2N Relay은 단계에서 제 공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 보안을 적 용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, U2N Relay은 단계 에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소 에 보안을 적용할 수 있다. Relay_indication은 U2N Relay이 U2N Relay Discovery Announcement 메시지 가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. U2N Relay은 보안이 적용된 U2N Relay Discovery 관련 요소, 보안이 적용된 U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2N Relay Discovery Announcement 메시지를 구성할 수 있다. 단계에서, Monitoring UE 역할의 Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4는 단계에서 제공받은 Discovery filter에 부합하는 U2N Relay Discovery Announcement 메시지를 수신할 수 있다. U2N Relay Discovery Announcement 메시지를 수신한 UE(예를 들어, Remote UE-1, Remote UE-2, Remote UE-3, 또는 Remote UE-4 중 적어도 하나)는, 수신한 U2N Relay Discovery Announcement 메 시지가 Relay_indication을 포함하지 않는 경우, 또는 수신한 U2N Relay Discovery Announcement 메시지가 Relay_indication을 포함하지만 수신 UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받지 않은 경우, U2N Relay Discovery Announcement 메시지에 포함된 U2N Relay Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있다. 수신 UE는, U2N Relay Discovery 관련 요소가 단계 에서 제공받은 U2N Relay Discovery 관련 Discovery filter에 부합한다면 U2N Relay을 발견할 수 있다. U2N Relay Discovery Announcement 메시지를 수신한 UE(예를 들어, Remote UE-1, Remote UE-2, Remote UE-3, 또는 Remote UE-4 중 적어도 하나)는, 수신한 U2N Relay Discovery Announcement 메 시지가 Relay_indication을 포함하고 수신 UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받은 경우, U2N Relay Discovery Announcement 메시지에 포함된 U2N Relay Discovery 관련 요소와 U2U Relay Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 메시지의 U2N Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있다. 수 신 UE는, U2N Relay Discovery 관련 요소가 단계에서 제공받은 U2N Relay Discovery 관련 Discovery filter에 부합한다면 U2N Relay을 발견할 수 있다. 수신 UE는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 메시지의 U2U Relay Discovery 관련 요소에 적용된 보안을 해제 할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제공할 때, 보안이 적용되어 있는 U2N Relay Discovery 관련 요소를 이용할 수 있다. 단계에서, U2N Relay는 U2N Relay Discovery Announcement 메시지와 동일 또는 유사한 방식으로 Relay Discovery Additional Information 메시지를 전송할 수 있다. 단계은, 도 10의 단계의 동작 을 포함할 수 있다. 단계에서, Remote UE-1, Remote UE-2, Remote UE-3, 그리고 Remote UE-4는, U2N Relay Discovery Announcement 메시지와 동일 또는 유사한 방식으로 Relay Discovery Additional Information 메시지를 수신할 수 있다. 단계은, 도 10의 단계의 동작을 포함할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다. 도 11은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-Network Relay Discovery 모델 B 절차를 도시한 다. 도 11을 참조하면, Remote UE, U2N Relay-1, U2N Relay-2, U2N Relay-3, 그리고 U2N Relay-4는 도 1에서 단말의 구성 일부 또는 전부를 포함할 수 있다. 본 개시에서 Discoverer UE 역 할의 Remote UE이 U2N Relay Discovery Solicitation 메시지를 전송할 수 있다. Discoveree UE 역할의 U2N Relay-1, U2N Relay-2, U2N Relay-3, 그리고 U2N Relay-4가 U2N Relay Discovery Solicitation 메시지를 수신하여 Remote UE을 발견할 수 있다. 그리고 U2N Relay-1, U2N Relay-2, U2N Relay-3, 그리고 U2N Relay-4는 Remote UE에게 U2N Relay Discovery Response 메시지를 전송할 수 있다. Remote UE은 U2N Relay Discovery Response 메시지를 수 신할 수 있고, U2N Relay Discovery Response 메시지를 전송한 Discoveree UE를 발견할 수 있다. 도 11를 참조하면, 단계에서, Remote UE, U2N Relay-1, U2N Relay-2, U2N Relay- 3, 그리고 U2N Relay-4는 다음의 과정들 중 적어도 하나를 수행할 수 있다. - Remote UE -- U2N Relay Discovery 모델 B 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2N Relay Discovery 모델 B 관련 Policy/Parameter를 획득할 수 있다. U2N Relay Discovery 모델 B 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. 또한, U2U Relay Discovery 관련 Policy/Parameter는, U2N Relay Discovery 메시지가 U2U Relay 서비스 에 의해 릴레이되는 것을 허용할 지 결정하는데 UE가 활용할 수 있는 정책을 포함할 수 있다. UE가 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나를 포 함)를 기준으로 설정될 수 있다. 또한, 앞서 열거한 요소 외에 다른 요소가 추가되어 기준으로 활용될 수도 있 다. - U2N Relay-1, U2N Relay-2, U2N Relay-3, 그리고 U2N Relay-4 -- U2N Relay Discovery 모델 B 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2N Relay Discovery 모델 B 관련 Policy/Parameter를 획득할 수 있다. U2N Relay Discovery 모델 B 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. -- U2U Relay 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material을 포함할 수 있다. 또한, U2U Relay Discovery 관련 Policy/Parameter는, U2N Relay Discovery 메시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 결정하는데 UE가 활용할 수 있는 정책을 포함할 수 있다. UE가 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나를 포 함)를 기준으로 설정될 수 있다. 또한, 앞서 열거한 요소 외에 다른 요소가 추가되어 기준으로 활용될 수도 있 다. 단계은, 도 8의 단계의 동작을 포함할 수 있다. 단계에서, Remote UE은 U2N Relay Discovery Solicitation 메시지를 단계에서 제공받은 Security material들을 이용하여 보호할 수 있고, U2N Relay-1, U2N Relay-2, U2N Relay-3, 그리고 U2N Relay-4로 전송할 수 있다. 단계에서 Remote UE이 U2N Relay Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 허용하지 않은 경우, Remote UE은 U2N Relay Discovery 관련 요소를 포함하는 U2N Relay Discovery Solicitation 메시지를 구성할 수 있다. U2N Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, Remote UE은 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 보안을 적용할 수 있다. 단계에서 Remote UE이 U2N Relay Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 허용한 경우, Remote UE은 U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2N Relay Discovery Solicitation 메시지를 구성할 수 있다. U2N Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, Remote UE은 단계에서 제 공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 보안을 적 용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, Remote UE은 단계 에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소 에 보안을 적용할 수 있다. Relay_indication은 Remote UE이 U2N Relay Discovery Solicitation 메시지 가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. Remote UE은 보안이 적용된 U2N Relay Discovery 관련 요소, 보안이 적용된 U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2N Relay Discovery Solicitation 메시지를 구성할 수 있다. 단계에서, Discoveree UE 역할의 U2N Relay-1, U2N Relay-2, U2N Relay-3, 그리고 U2N Relay-4는 단계에서 제공받은 Discovery filter에 부합하는 U2N Relay Discovery Solicitation 메시지를 수신할 수 있다. U2N Relay Discovery Solicitation 메시지를 수신한 UE(예를 들어, U2N Relay-1, U2N Relay-2, U2N Relay-3, 또는 U2N Relay-4 중 적어도 하나)는, 수신한 U2N Relay Discovery Solicitation 메 시지가 Relay_indication을 포함하지 않는 경우, 또는 수신한 U2N Relay Discovery Solicitation 메시지가 Relay_indication을 포함하지만 수신 UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받지 않은 경우, U2N Relay Discovery Solicitation 메시지에 포함된 U2N Relay Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있다. 수신 UE는, U2N Relay Discovery 관련 요소가 단계 에서 제공받은 U2N Relay Discovery 관련 Discovery filter에 부합한다면 Remote UE을 발견할 수 있다. U2N Relay Discovery Solicitation 메시지를 수신한 UE(예를 들어, U2N Relay-1, U2N Relay-2, U2N Relay-3, 또는 U2N Relay-4 중 적어도 하나)는, 수신한 U2N Relay Discovery Solicitation 메 시지가 Relay_indication을 포함하고 수신 UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받은 경우, U2N Relay Discovery Solicitation 메시지에 포함된 U2N Relay Discovery 관련 요소와 U2U Relay Discovery 관련 요소를 확인할 수 있다. 수신 UE는, 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 메시지의 U2N Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있다. 수 신 UE는, U2N Relay Discovery 관련 요소가 단계에서 제공받은 U2N Relay Discovery 관련 Discovery filter에 부합한다면 Remote UE을 발견할 수 있다. 수신 UE는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 메시지의 U2U Relay Discovery 관련 요소에 적용된 보안을 해제 할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제공할 때, 보안 이 적용되어 있는 U2N Relay Discovery 관련 요소를 이용할 수 있다.단계에서, Remote UE를 발견한 U2N Relay-1 그리고 U2N Relay-2은 U2N Relay Discovery Response 메시지를 회신하기로 결정할 수 있다. 또한, 단계은, 도 8의 단계의 동작을 포 함할 수 있다. 단계에서, U2N Relay-1 그리고 U2N Relay-2은 U2N Relay Discovery Response 메시지를 단계 에서 제공받은 Security material들을 이용하여 보호할 수 있고, Remote UE에 전송할 수 있다. 단계에서 U2N Relay-1 그리고 U2N Relay-2이 U2N Relay Discovery Response 메시지가 U2U Relay에 의해 릴레이되는 것을 허용하지 않은 경우, U2N Relay-1 그리고 U2N Relay-2은 U2N Relay Discovery 관련 요소를 포함하는 U2N Relay Discovery Response 메시지를 구성할 수 있다. U2N Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, U2N Relay-1 그리고 U2N Relay-2은 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 보안을 적용할 수 있다. 단계에서 U2N Relay-1 그리고 U2N Relay-2이 U2N Relay Discovery Response 메시지가 U2U Relay에 의해 릴레이되는 것을 허용한 경우, U2N Relay-1 그리고 U2N Relay-2은 U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2N Relay Discovery Response 메시지를 구성할 수 있다. U2N Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, U2N Relay-1 그리고 U2N Relay-2은 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 보안을적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, U2N Relay-1 그리고 U2N Relay-2은 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있다. Relay_indication은 U2N Relay-1 그리고 U2N Relay-2이 U2N Relay Discovery Response 메시지가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. U2N Relay- 1 그리고 U2N Relay-2은 보안이 적용된 U2N Relay Discovery 관련 요소, 보안이 적용된 U2U Relay Discovery 관련 요소, 또한 Relay_indication 중 적어도 하나를 포함하는 U2N Relay Discovery Response 메시 지를 구성할 수 있다. 단계에서, Discoverer UE 역할의 Remote UE은 단계에서 제공받은 Discovery filter에 부합 하는 U2N Relay Discovery Response 메시지를 수신할 수 있다. Remote UE은, 수신한 U2N Relay Discovery Response 메시지가 Relay_indication을 포함하지 않는 경우, 또는 수신한 U2N Relay Discovery Response 메시지가 Relay_indication을 포함하지만 Remote UE가 단계 에서 U2U Relay 서비스에 대한 승인을 받지 않은 경우, U2N Relay Discovery Response 메시지에 포함된 U2N Relay Discovery 관련 요소를 확인할 수 있다. Remote UE은, 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 U2N Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있 다. Remote UE은, U2N Relay Discovery 관련 요소가 단계에서 제공받은 U2N Relay Discovery 관련 Discovery filter에 부합한다면, U2N Relay Discovery Response 메시지를 송신한 UE를 발견할 수 있다. Remote UE은, 수신한 U2N Relay Discovery Response 메시지가 Relay_indication을 포함하고 Remote UE가 단계에서 U2U Relay 서비스에 대한 권한에 승인을 받은 경우, U2N Relay Discovery Response 메시지에 포함된 U2N Relay Discovery 관련 요소와 U2U Relay Discovery 관련 요소를 확인할 수 있다. Remote UE은, 단계에서 제공받은 U2N Relay Discovery 관련 Security material을 사용하여 메시지의 U2N Relay Discovery 관련 요소에 적용된 보안을 해제할 수 있다. Remote UE은, U2N Relay Discovery 관련 요소가 단계에서 제공받은 U2N Relay Discovery 관련 Discovery filter에 부합한다면 U2N Relay Discovery Response 메시지를 송신한 UE를 발견할 수 있다. Remote UE은, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 메시지의 U2U Relay Discovery 관련 요소에 적용된 보안 을 해제할 수 있다. Remote UE은, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제공할 때, 보안이 적용되어 있는 U2N Relay Discovery 관련 요소를 이용할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다.도 12는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-UE Relay Discovery 모델 A 절차를 도시한다. 도 12을 참조하면, U2U Relay, End UE-1, 그리고 End UE-2은 도 1에서 단말의 구성 일 부 또는 전부를 포함할 수 있다. 본 개시에서 Announcing UE 역할의 U2U Relay이 이전에 참여했던 5G ProSe Discovery 절차에서 획득한 인접 UE(들)의 Discovery 메시지 정보를 포함하는 U2U Relay Discovery Announcement 메시지를 전송하면, Monitoring UE 역할의 End UE-1 그리고 End UE-2이 U2U Relay Discovery Announcement 메시지를 수신하여 U2U Relay과 U2U Relay의 인근 UE(들)를 발견할 수 있 다. 단계에서, U2U Relay, End UE-1, 그리고 End UE-2은 다음의 과정들 중 적어도 하나를 수행할 수 있다. - U2U Relay -- U2U Relay Discovery 모델 A 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 모델 A 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 모델 A 관련 Policy/Parameter는 User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. - End UE-1 그리고 End UE-2 -- U2U Relay Discovery 모델 A 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 모델 A 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 모델 A 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. -- Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 B 서비스 중 적어도 하나에 대한 권한(들)이 있는지 검증받을 수 있다. -- Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 B 중 적어도 하나에 관련된 Policy/Parameter를 획득할 수 있다. Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 B 중 적어도 하나와 관련된 Policy/Parameter는 Discovery filter(s), User Info ID(s), ProSe Code(s), 또는 ProSe Code(s)와 연관된 Security material 중 적어도 하나를 포함할 수 있 다. 단계에서, U2U Relay는 이전에 5G ProSe의 Direct Discovery 절차, U2N Relay Discovery 절차, 또 는 U2U Relay Discovery 절차 중 적어도 하나에 참여했던 경우, 사용할 수 있는 인접 UE(들)의 5G ProSe Discovery 메시지 정보를 수신했을 수 있다. 일 예로, U2U Relay가 Direct Discovery 모델 A 절차에서 Monitoring UE 역할을 맡을 수 있고, Announcing UE로부터 Direct Discovery Announcement 메시지를 수신할 수 있다. 수신한 Direct Discovery Announcement 메시지가 Relay_indication을 포함하고, Direct Discovery Announcement 메시지에 포함된 U2U Relay Discovery 관련 요소가 U2U Relay의 Discovery filter에 부합한다면, U2U Relay는 Direct Discovery Announcement 메시지에 포함된 (보안이 적용되어 있는) Direct Discovery 관련 요소를, U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 Direct Discovery 모델 B 절차에서 Discoverer UE 역할을 맡을 수 있고, Discoveree UE로부터 Direct Discovery Response 메시지를 수신할 수 있다. 수신한 Direct Discovery Response 메시지가 Relay_indication을 포함하고, Direct Discovery Response 메시지에 포함된 U2U Relay Discovery 관 련 요소가 U2U Relay의 Discovery filter에 부합한다면, U2U Relay는 Direct Discovery Response 메시지에 포함된 (보안이 적용되어 있는) Direct Discovery 관련 요소를, U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 Direct Discovery 모델 B 절차에서 Discoveree UE 역할을 맡을 수 있고, Discoverer UE로부터 Direct Discovery Solicitation 메시지를 수신할 수 있다. 수신한 Direct Discovery Solicitation 메시지가 Relay_indication을 포함하고, Direct Discovery Solicitation 메시지에 포함된 U2URelay Discovery 관련 요소가 U2U Relay의 Discovery filter에 부합하면, U2U Relay는 Direct Discovery Solicitation 메시지에 포함된 (보안이 적용되어 있는) Direct Discovery 관련 요소를, U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 U2N Relay Discovery 모델 A 절차에서 Monitoring UE 역할을 맡을 수 있고, Announcing UE로부터 U2N Relay Discovery Announcement 메시지를 수신할 수 있다. 수신한 U2N Relay Discovery Announcement 메시지가 Relay_indication을 포함하고, U2N Relay Discovery Announcement 메시지에 포함된 U2U Relay Discovery 관련 요소가 U2U Relay의 Discovery filter에 부합하면, U2U Relay는 U2N Relay Discovery Announcement 메시지에 포함된 (보안이 적용되어 있는) U2N Relay Discovery 관련 요소를, U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 U2N Relay Discovery 모델 B 절차에서 Discoverer UE 역할을 맡을 수 있고, Discoveree UE로부터 U2N Relay Discovery Response 메시지를 수신할 수 있다. 수신한 U2N Relay Discovery Response 메시지가 Relay_indication을 포함하고, U2N Relay Discovery Response 메시지에 포함된 U2U Relay Discovery 관련 요소가 U2U Relay의 Discovery filter에 부합하면, U2U Relay는 U2N Relay Discovery Response 메시지에 포함된 (보안이 적용되어 있는) U2N Relay Discovery 관련 요소를, U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 U2N Relay Discovery 모델 B 절차에서 Discoveree UE 역할을 맡을 수 있고, Discoverer UE로부터 U2N Relay Discovery Solicitation 메시지를 수신할 수 있다. 수신한 U2N Relay Discovery Solicitation 메시지가 Relay_indication을 포함하고 U2N Relay Discovery Solicitation 메시지에 포함된 U2U Relay Discovery 관련 요소가 U2U Relay의 Discovery filter에 부합하면, U2U Relay는 U2N Relay Discovery Solicitation 메시지에 포함된 (보안이 적용되어 있는) U2N Relay Discovery 관련 요소를, U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 U2U Relay Discovery 모델 A 절차에서 Monitoring UE 역할을 맡을 수 있고, Announcing UE로부터 U2U Relay Discovery Announcement 메시지를 수신할 수 있다. 수신한 U2U Relay Discovery Announcement 메시지가 U2U Relay의 Discovery filter에 부합하면, U2U Relay Discovery Announcement 메시지의 end UE info list 중 Relay_indication을 포함하는 (보안이 적용되어 있는) Direct Discovery 관련 요소 또는 Relay_indication을 포함하는 (보안이 적용되어 있는) U2N Relay Discovery 관련 요 소 중 적어도 하나를 U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 U2U Relay Discovery 모델 B 절차에서 Discoverer UE 역할을 맡을 수 있고, Discoveree UE로부터 U2U Relay Discovery Response 메시지를 수신할 수 있다. 수신한 U2U Relay Discovery Response 메시지가 U2U Relay의 Discovery filter에 부합하면, U2U Relay Discovery Response 메시지 안 에 Relay_indication을 포함하는 (보안이 적용되어 있는) Direct Discovery 관련 요소 또는 Relay_indication 을 포함하는 (보안이 적용되어 있는) U2N Direct Discovery 관련 요소 중 적어도 하나를 U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 일 예로, U2U Relay가 U2U Relay Discovery 모델 B 절차에서 Discoveree UE 역할을 맡을 수 있고, Discoverer UE로부터 U2U Relay Discovery Solicitation 메시지를 수신할 수 있다. 수신한 U2U Relay Discovery Solicitation 메시지가 U2U Relay의 Discovery filter에 부합하면, U2U Relay Discovery Solicitation 메시지 안에 Relay_indication을 포함하는 (보안이 적용되어 있는) Direct Discovery 관련 요소 또는 Relay_indication을 포함하는 (보안이 적용되어 있는) U2N Direct Discovery 관련 요소 중 적어도 하나를 U2U Relay Discovery Announcement 메시지에 포함할 수 있다. 단계에서, U2U Relay은 U2U Relay Discovery Announcement 메시지를 단계에서 제공받은 Security material들을 이용하여 보호할 수 있고, End UE-1 그리고 End UE-2에 전송할 수 있다. U2U Relay은, 단계에서 확인하여 포함할 수 있는 Direct Discovery 관련 요소(들), 단계에 서 확인하여 포함할 수 있는 U2N Relay Discovery 관련 요소(들), 또는 U2U Relay Discovery 관련 요소(들) 중 적어도 하나를 포함하는 U2U Relay Discovery Announcement 메시지를 구성할 수 있다. U2U Relay이 획득 한 Direct Discovery 관련 요소(들)은 보안이 적용되어 있는 상태일 수 있다. 또한, U2U Relay는 U2U Relay Discovery Solicitation메시지를 수신하였을 때 포함되었던 Relay_indication을 Direct Discovery 관련 요소(들)에 그대로 덧붙여 사용하거나 또는 덧붙이지 않고 사용할 수도 있다. Relay_indication이 덧붙여 사용되는 Direct Discovery 관련 요소(들)은 다른 U2U Relay에 의해 또 다시 릴레이 될 수 있다. U2U Relay 이 획득한 U2N Relay Discovery 관련 요소(들)은 보안이 적용되어 있는 상태일 수 있다. 또한, U2U Relay는 U2U Relay Discovery Solicitation메시지를 수신하였을 때 포함되었던 Relay_indication을 U2N Relay Discovery 관련 요소(들)에 그대로 덧붙여 사용하거나 또는 덧붙이지 않고 사용할 수도 있다. Relay_indication이 덧붙여 사용되는 U2N Relay Discovery 관련 요소(들)은 다른 U2U Relay에 의해 또 다시 릴 레이 될 수 있다. U2U Relay는, 단계에서 확인하여 포함할 수 있는 Direct Discovery 관련 요소 (들)과 U2N Relay Discovery 관련 요소(들)을 통합 또는 포함하여 end UE info list를 구성할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. U2U Relay는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여, end UE info list 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Announcement 메시지에 보안을 적용할 수 있다. 보안 적용 방법의 일 실시 예로, U2U Relay는, 단계 에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소 에 보안을 적용하고, end UE info list 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Announcement 메시지를 구성할 수도 있다. 단계에서, Monitoring UE 역할의 End UE-1 그리고 End UE-2는 단계에서 제공받은 Discovery filter에 부합하는 U2U Relay Discovery Announcement 메시지를 수신할 수 있다. U2U Relay Discovery Announcement 메시지를 수신한 UE(예를 들어, End UE-1 또는 End UE-2 중 적 어도 하나)는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery Announcement 메시지에 적용된 보안을 해제할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소 가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, U2U Relay Discovery Announcement 메시지에 포함된 end UE info list를 확인할 수 있다. U2U Relay Discovery Announcement 메시지 에 포함된 end UE info list는 Announcing UE가 발견하여 포함한 인근 UE(들)의 Direct Discovery 관련 요소 (들)과 U2N Relay Discovery 관련 요소(들)을 포함할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, Discovery filter에 부합 하는 U2U Relay Discovery 서비스를 제공할 때, U2U Relay로부터 수신한 U2U Relay Discovery Announcement 메시지의 end UE info list 중 Relay_indication을 포함하는 (보안이 적용되어 있는) Direct Discovery 관련 요소(들) 또는 Relay_indication을 포함하는 (보안이 적용되어 있는) U2N Relay Discovery 관 련 요소(들) 중 적어도 하나를 이용할 수 있다. U2U Relay Discovery Announcement 메시지를 수신한 UE(예를 들어, End UE-1 또는 End UE-2 중 적 어도 하나)는, 단계에서 제공받은 5G ProSe Discovery 관련 Security material(s)을 사용하여 Direct Discovery 관련 요소(들)과 U2N Relay Discovery 관련 요소(들)에 적용된 보안을 해제할 수 있다. 수신 UE는, 단계에서 제공받은 Discovery filter(s)에 부합하는 Direct Discovery 관련 요소(들)와 U2N Relay Discovery 관련 요소(들)에 대응하는 UE(들)을 발견할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다. 도 13은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-UE Relay Discovery 모델 B 절차를 도시한다. 도 13을 참조하면, End UE-1, U2U Relay-1, U2U Relay-2, U2U Relay-3, 그리고 End UE-2는 도 1에서 단말의 구성 일부 또는 전부를 포함할 수 있다. 본 개시에서 Discoverer UE 역할의 End UE-1이 U2U Relay Discovery Solicitation 메시지를 전송할 수 있다. U2U Relay 역할의 U2U Relay- 1 그리고 U2U Relay-2는 U2U Relay Discovery Solicitation 메시지를 수신할 수 있다. 또한, U2U Relay-1 그리고 U2U Relay-2는 Discoveree UE 역할의 End UE-2에게 U2U Relay Discovery Solicitation 메시지를 전송할 수 있다. End UE-2는 U2U Relay Discovery Solicitation 메시지를 수신하 여 End UE-1, U2U Relay-1, 그리고 U2U Relay-2을 발견할 수 있다. 또한, End UE-2는 U2U Relay-1 그리고 U2U Relay-2에게 U2U Relay Discovery Response 메시지를 전송할 수 있다. U2U Relay-1 그리고 U2U Relay-2는 U2U Relay Discovery Response 메시지를 수신할 수 있다. 또한, U2U Relay-1 그리고 U2U Relay-2는 End UE-1에게 U2U Relay Discovery Response 메시지를 전송할 수 있다. End UE-1은 U2U Relay Discovery Response 메시지를 수신하여 U2U Relay- 1, U2U Relay-2, 그리고 End UE-2를 발견할 수 있다. 도 13을 참조하면, 단계에서, End UE-1, U2U Relay-1, U2U Relay-2, U2U Relay- 3, 그리고 End UE-2는 다음의 과정들 중 적어도 하나를 수행할 수 있다. - End UE-1 그리고 End UE-2 -- U2U Relay Discovery 모델 B 서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 모델 B 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 모델 B 관련 Policy/Parameter는 User Info ID(s), RSC, 또한 RSC와 연관된 Security material 중 적어도 하나를 포함할 수 있다. -- Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 서비스 중 적어도 하나에 대한 권한(들)이 있는지 검증받을 수 있다. -- Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 중 적어도 하나와 관련된 Policy/Parameter를 획득할 수 있다. Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 중 적어도 하나와 관련된 Policy/Parameter는 Discovery filter(s), User Info ID(s), ProSe Code(s), 또는 ProSe Code(s) 중 적어도 하나와 연관된 Security material을 포함할 수 있 다. 또한, Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 중 적어도 하나와 관련된 Policy/Parameter는, U2U Relay Discovery 메시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책 을 포함할 수 있다. UE가 결정하는데 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나)를 기준으로 설정될 수 있다. 또한, 앞서 열거한 요소들 외에 다른 요소가 추가되어 기준으로 활용될 수 있다. - U2U Relay-1, U2U Relay-2, 그리고 U2U Relay-3 -- U2U Relay Discovery 모델 B서비스에 대한 권한이 있는지 검증받을 수 있다. -- U2U Relay Discovery 모델 B 관련 Policy/Parameter를 획득할 수 있다. U2U Relay Discovery 모델 B 관련 Policy/Parameter는 Discovery filter, User Info ID(s), RSC, 또는 RSC와 연관된 Security material 중 적어 도 하나를 포함할 수 있다. -- Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 서비스 중 적어도 하나에 대한 권한(들)이 있는지 검증받을 수 있다. -- Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 중 적어도 하나와 관련된 Policy/Parameter를 획득할 수 있다. Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 중 적어도 하나와 관련된 Policy/Parameter는 Discovery filter(s), User Info ID(s), ProSe Code(s), 또는 ProSe Code(s) 중 적어도 하나와 연관된 Security material을 포함할 수 있 다. 또한, Direct Discovery 모델 A, Direct Discovery 모델 B, U2N Relay Discovery 모델 A, U2N Relay Discovery 모델 B, 또는 U2U Relay Discovery 모델 A 중 적어도 하나와 관련된 Policy/Parameter는, U2U Relay Discovery 메시지가 U2U Relay 서비스에 의해 릴레이되는 것을 허용할 지 UE가 결정하는데 활용할 수 있는 정책 을 포함할 수 있다. UE가 결정하는데 활용할 수 있는 정책은 다양한 요소(일 예로, neighbor density, battery level, 또는 traffic load 중 적어도 하나)를 기준으로 설정될 수 있다. 또한, 앞서 열거한 요소들 외에 다른 요소가 추가되어 기준으로 활용될 수 있다. 단계에서, 도 8의 단계의 동작을 포함할 수 있다. 단계에서, End UE-1은 U2U Relay Discovery Solicitation 메시지를 단계에서 제공받은 Security material들을 이용하여 보호할 수 있고, U2U Relay-1, U2U Relay-2, 그리고 U2U Relay- 3에 전송할 수 있다. 단계에서 End UE-1이 U2U Relay Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 허용하지 않은 경우, End UE-1는 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소, 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메 시지를 구성할 수 있다. Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 ProSe Code와 연계되어 있을 수 있다. 또한, End UE-1는 단계에서 제공받은 Direct Discovery 또 는 U2N Relay Discovery 관련 Security material 중 적어도 하나를 사용하여 Direct Discovery 또는 U2N Relay Discovery 중 적어도 하나의 관련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연 계되어 있을 수 있다. 또한, End UE-1은 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지에 보안을 적용할 수 있다. 보 안 적용 방법의 일 실시 예로, End UE-1는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있고, Direct Discovery 관 련 요소, U2N Relay Discovery 관련 요소, 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지를 구성할 수도 있다. 단계에서 End UE-1이 U2U Relay Discovery Solicitation 메시지가 U2U Relay에 의해 릴레이되는 것을 허용한 경우, End UE-1는 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지를 구성할 수 있다. Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 ProSe Code와 연계되어 있을 수 있다. 또한, End UE-1는 단계에서 제공받은 Direct Discovery 또 는 U2N Relay Discovery 관련 Security material 중 적어도 하나를 사용하여 Direct Discovery 또는 U2N Relay Discovery 중 적어도 하나의 관련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연 계되어 있을 수 있다. 또한, End UE-1은 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지에 보안을 적용할 수 있다. Relay_indication은 End UE-1이 U2U Relay Discovery Solicitation 메시지가 U2U Relay 에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. 보안 적용 방법의 일 실시 예로, End UE-1는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있고, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery, 또는 Relay_indication 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지를 구성할 수도 있다. 단계에서, U2U Relay 역할의 U2U Relay-1, U2U Relay-2, 그리고 U2U Relay-3는 단계 에서 제공받은 Discovery filter에 부합하는 U2U Relay Discovery Solicitation 메시지를 수신할 수 있 다. U2U Relay Discovery Solicitation 메시지를 수신한 UE(예를 들어, U2U Relay-1, U2U Relay-2, 또 는 U2U Relay-3 중 적어도 하나)는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery Solicitation 메시지에 적용된 보안을 해제할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부 합하면, U2U Relay Discovery Solicitation 메시지에 포함된 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 정보를 U2U Relay Discovery Solicitation 메시지에 포함하여 전송하기로 결정할 수 있다. 수신 UE는, U2U Relay Discovery 관련 요소가 단 계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합하면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제공할 때, 수신한 U2U Relay Discovery Solicitation 메시지의 Relay_indication을 포함하는 (보안이 적용되어 있는) Direct Discovery 관련 요소 또는 Relay_indication을 포함하는 (보안이 적용되어 있는) U2N Relay Discovery 관련 요소 중 적어도 하나를 이용할 수 있다. 단계에서, U2U Relay-1 그리고 U2U Relay-2는, U2U Relay Discovery Solicitation 메시지를 전송하기로 결정한 경우, U2U Relay Discovery Solicitation 메시지를 단계에서 제공받은 Security material들을 이용하여 보호할 수 있고, End UE-2에 전송할 수 있다. U2U Relay-1 그리고 U2U Relay-2는, 단계에서 제공받은 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 단계에서 제공받은 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지를 구성할 수 있다. U2U Relay-1 그리고 U2U Relay-2가 획득한 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 보안이 적용되어 있는 상태일 수 있다. 또한, U2U Relay-1 그리고 U2U Relay-2가 U2U Relay Discovery Solicitation 메시지를 수신하였을 때 Relay_indication이 포함되었다면, Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나에 Relay_indication을 그대로 덧붙여 사용하거나 또는 덧붙이 지 않고 사용할 수 있다. Relay_indication이 덧붙여 사용되는 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 다른 U2U Relay에 의해 또 다시 릴레이 될 수 있다. U2U Relay-1 그리고 U2U Relay-2는, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지를 구성할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또는, U2U Relay- 1 그리고 U2U Relay-2는 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지에 보안을 적용할 수 있다. 보안 적용 방법의 일 실시 예로, U2U Relay-1 그리고 U2U Relay-2는, 단계에서 제공 받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용 할 수 있고, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery, 또는 Relay_indication 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Solicitation 메시지를 구성할 수도 있다. 단계에서, Discoveree UE 역할의 End UE-2는, 단계에서 제공받은 Discovery filter에 부합 하는 U2U Relay Discovery Solicitation 메시지를 수신할 수 있다. End UE-2는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Solicitation 메시지에 적용된 보안을 해제할 수 있다. End UE-2는, U2U Relay Discovery 관련 요 소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, U2U Relay Discovery Solicitation 메시지에 포함된 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소를 확인할 수 있다. End UE-2는, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합하면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제 공할 때, 수신한 U2U Relay Discovery Solicitation 메시지에서 Relay_indication을 포함하는 (보안이 적용되 어 있는) Direct Discovery 관련 요소 또는 Relay_indication을 포함하는 (보안이 적용되어 있는) U2N Relay Discovery 관련 요소 중 적어도 하나를 이용할 수 있다. End UE-2는, 단계에서 제공받은 ProSe Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나에 적용된 보안을 해제할 수 있다. End UE-2는 단계에서 제공받은 Discovery filter에 부합하는 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나로 대응하는 UE를 발견할 수 있다. 단계에서, End UE-1, U2U Relay-1, 그리고 U2U Relay-2을 발견한 End UE-2는 U2U Relay Discovery Response 메시지를 회신하기로 결정할 수 있다. 또한, 단계은, 도 8의 단계의 동작을 포함할 수 있다. 단계에서, End UE-2는 U2U Relay Discovery Response 메시지를 단계에서 제공받은 Security material들을 이용하여 보호할 수 있고, U2U Relay-1, 그리고 U2U Relay-2에 전송할 수 있다. 단계에서 End UE-2가 U2U Relay Discovery Response 메시지가 U2U Relay에 의해 릴레이되는 것을 허용하지 않은 경우, End UE-2는 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지를 구성할 수 있다. Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 ProSe Code와 연계 되어 있을 수 있다. 또한, End UE-2는 단계에서 제공받은 Direct Discovery 또는 U2N Relay Discovery 중 적어도 하나와 관련된 Security material을 사용하여 Direct Discovery 또는 U2N Relay Discovery 중 적어도 하나의 관련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연 계되어 있을 수 있다. 또한, End UE-2는 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지에 보안을 적용할 수 있다. 보안 적 용 방법의 일 실시 예로, End UE-2는, 단계에서 제공받은 U2U Relay Discovery 관련 Securitymaterial을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있고, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지를 구성할 수도 있다. 단계에서 End UE-2가 U2U Relay Discovery Response 메시지가 U2U Relay에 의해 릴레이되는 것을 허용한 경우, End UE-2는 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시 지를 구성할 수 있다. Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 ProSe Code와 연계되어 있을 수 있다. 또한, End UE-2는 단계에서 제공받은 Direct Discovery 또 는 U2N Relay Discovery 중 적어도 하나와 관련된 Security material을 사용하여 Direct Discovery 또는 U2N Relay Discovery 중 적어도 하나의 관련 요소에 보안을 적용할 수 있다. U2U Relay Discovery 관련 요소는 RSC 와 연계되어 있을 수 있다. 또한, End UE-2는 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또한 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시 지에 보안을 적용할 수 있다. Relay_indication은 End UE-2가 U2U Relay Discovery Solicitation 메시지 가 U2U Relay에 의해 릴레이되는 것을 허용했다는 것을 의미할 수 있다. 보안 적용 방법의 일 실시 예로, End UE-2는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있고, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지를 구성할 수도 있다. 단계에서, U2U Relay 역할의 U2U Relay-1, U2U Relay-2, 그리고 U2U Relay-3는 단계 에서 제공받은 Discovery filter에 부합하는 U2U Relay Discovery Response 메시지를 수신할 수 있다. 단계에서, U2U Relay 역할의 U2U Relay-1, U2U Relay-2, 그리고 U2U Relay-3가 U2U Relay Discovery Response 메시지를 처리하는 방법은, 단계에서, U2U Relay 역할의 U2U Relay-1, U2U Relay-2, 그리고 U2U Relay-3가 U2U Relay Discovery Solicitation 메시지를 처리하는 방법과 동일 또는 유사할 수 있다. 예를 들어, 단계은, 도 13의 단계의 동작을 포함할 수 있다. 단계에서, U2U Relay-1 그리고 U2U Relay-2는, U2U Relay Discovery Response 메시지를 전 송하기로 결정한 경우, U2U Relay Discovery Response 메시지를 단계에서 제공받은 Security material들 을 이용하여 보호할 수 있고, End UE-1에게 전송할 수 있다. U2U Relay-1 그리고 U2U Relay-2는, 단계에서 제공받은 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, 또는 단계에서 제공받은 U2U Relay Discovery 관련 요소 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지를 구성할 수 있다. U2U Relay-1 그리고 U2U Relay- 2가 획득한 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 보안이 적용되어 있는 상태일 수 있다. 또한, U2U Relay-1 그리고 U2U Relay-2는 U2U Relay Discovery Response 메시지를 수신하였을 때 Relay_indication이 포함되었다면, Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나에Relay_indication을 그대로 덧붙여 사용하거나 또는 덧붙이지 않고 사용할 수 있다. Relay_indication이 덧붙여 사용되는 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나는 다른 U2U Relay에 의해 또 다시 릴레이 될 수 있다. U2U Relay-1 그리고 U2U Relay-2는, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관 련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지를 구성할 수 있다. U2U Relay Discovery 관련 요소는 RSC와 연계되어 있을 수 있다. 또한, U2U Relay-1 그리고 U2U Relay-2는 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지에 보안을 적용할 수 있다. 보안 적용 방법의 일 실시 예로, U2U Relay-1 그리고 U2U Relay-2는, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Discovery 관련 요소에 보안을 적용할 수 있고, Direct Discovery 관련 요소, U2N Relay Discovery 관련 요소, U2U Relay Discovery 관련 요소, 또는 Relay_indication 중 적어도 하나를 포함하는 U2U Relay Discovery Response 메시지를 구성할 수도 있다. 단계에서, Discoverer UE 역할의 End UE-1는, 단계에서 제공받은 Discovery filter에 부합 하는 U2U Relay Discovery Response 메시지를 수신할 수 있다. End UE-1은, 단계에서 제공받은 U2U Relay Discovery 관련 Security material을 사용하여 U2U Relay Response 메시지에 적용된 보안을 해제할 수 있다. End UE-1은, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합한다면, U2U Relay Discovery Response 메시지에 포함된 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나를 확인할 수 있다. End UE-1은, U2U Relay Discovery 관련 요소가 단계에서 제공받은 U2U Relay Discovery 관련 Discovery filter에 부합하면, Discovery filter에 부합하는 U2U Relay Discovery 서비스를 제 공할 때, 수신한 U2U Relay Discovery Response 메시지에서 Relay_indication을 포함하는 (보안이 적용되어 있 는) Direct Discovery 관련 요소 또는 Relay_indication을 포함하는 (보안이 적용되어 있는) U2N Relay Discovery 관련 요소 중 적어도 하나를 이용할 수 있다. End UE-1은, 단계에서 제공받은 ProSe Discovery 관련 Security material을 사용하여 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나에 적용된 보안을 해제할 수 있다. End UE-1은 단계에서 제공받은 Discovery filter에 부합하는 Direct Discovery 관련 요소 또는 U2N Relay Discovery 관련 요소 중 적어도 하나로 대응하는 UE를 발견할 수 있다. 물론 상기 실시예의 단계들에 제한되는 것은 아니며, 상기 단계들 중 적어도 하나의 단계가 생략될 수 있다. 또 는, 상기 실시예의 단계들 외에 새로운 단계가 추가될 수도 있다. 전술한 구성도, 제어/데이터 신호 송신 방법의 예시도, 동작 절차 예시도, 구성도들은 본 개시의 권리범위를 한 정하기 위한 의도가 없음을 유의하여야 한다. 즉, 본 개시의 실시예에 기재된 모든 구성부, 엔티티, 또는 동작 의 단계가 개시의 실시를 위한 필수구성요소인 것으로 해석되어서는 안되며, 일부 구성요소 만을 포함하여도 개 시의 본질을 해치지 않는 범위 내에서 구현될 수 있다. 또한 각 실시예는 필요에 따라 서로 조합되어 운용할 수 있다. 예컨대, 본 개시에서 제안하는 방법들의 일부분들이 서로 조합되어 네트워크 엔티티와 단말이 운용될 수 있다. 앞서 설명한 기지국이나 단말의 동작들은 해당 프로그램 코드를 저장한 메모리 장치를 기지국 또는 단말 장치 내의 임의의 구성부에 구비함으로써 실현될 수 있다. 즉, 기지국 또는 단말 장치의 제어부는 메모리 장치 내에 저장된 프로그램 코드를 프로세서 혹은 CPU(Central Processing Unit)에 의해 읽어내어 실행함으로써 앞서 설명 한 동작들을 실행할 수 있다. 본 명세서에서 설명되는 엔티티, 기지국 또는 단말 장치의 다양한 구성부들과, 모듈(module)등은 하드웨어 (hardware) 회로, 일 예로 상보성 금속 산화막 반도체(complementary metal oxide semiconductor) 기반 논리 회로와, 펌웨어(firmware)와, 소프트웨어(software) 및/혹은 하드웨어와 펌웨어 및/혹은 머신 판독 가능 매체에 삽입된 소프트웨어의 조합과 같은 하드웨어 회로를 사용하여 동작될 수도 있다. 일 예로, 다양한 전기 구조 및 방법들은 트랜지스터(transistor)들과, 논리 게이트(logic gate)들과, 주문형 반도체와 같은 전기 회로들을 사 용하여 실시될 수 있다. 본 개시의 청구항 또는 명세서에 기재된 실시예들에 따른 방법들은 하드웨어, 소프트웨어, 또는 하드웨어와 소 프트웨어의 조합의 형태로 구현될(implemented) 수 있다. 소프트웨어로 구현하는 경우, 하나 이상의 프로그램(소프트웨어 모듈)을 저장하는 컴퓨터 판독 가능 저장 매체 가 제공될 수 있다. 컴퓨터 판독 가능 저장 매체에 저장되는 하나 이상의 프로그램은, 전자 장치(device) 내의 하나 이상의 프로세서에 의해 실행 가능하도록 구성된다(configured for execution). 하나 이상의 프로그램은, 전자 장치로 하여금 본 개시의 청구항 또는 명세서에 기재된 실시예들에 따른 방법들을 실행하게 하는 명령어 (instructions)를 포함한다. 이러한 프로그램(소프트웨어 모듈, 소프트웨어)은 랜덤 액세스 메모리 (random access memory), 플래시(flash) 메모리를 포함하는 불휘발성(non-volatile) 메모리, 롬(ROM: Read Only Memory), 전기적 삭제가능 프로그램가 능 롬(EEPROM: Electrically Erasable Programmable Read Only Memory), 자기 디스크 저장 장치(magnetic disc storage device), 컴팩트 디스크 롬(CD-ROM: Compact Disc-ROM), 디지털 다목적 디스크(DVDs: Digital Versatile Discs) 또는 다른 형태의 광학 저장 장치, 마그네틱 카세트(magnetic cassette)에 저장될 수 있다. 또는, 이들의 일부 또는 전부의 조합으로 구성된 메모리에 저장될 수 있다. 또한, 각각의 구성 메모리는 다수개 포함될 수도 있다. 또한, 상기 프로그램은 인터넷(Internet), 인트라넷(Intranet), LAN(Local Area Network), WLAN(Wide LAN), 또 는 SAN(Storage Area Network)과 같은 통신 네트워크, 또는 이들의 조합으로 구성된 통신 네트워크를 통하여 접 근(access)할 수 있는 부착 가능한(attachable) 저장 장치(storage device)에 저장될 수 있다. 이러한 저장 장 치는 외부 포트를 통하여 본 개시의 실시예를 수행하는 장치에 접속할 수 있다. 또한, 통신 네트워크상의 별도 의 저장장치가 본 개시의 실시예를 수행하는 장치에 접속할 수도 있다. 상술한 본 개시의 구체적인 실시예들에서, 개시에 포함되는 구성 요소는 제시된 구체적인 실시예에 따라 단수 또는 복수로 표현되었다. 그러나, 단수 또는 복수의 표현은 설명의 편의를 위해 제시한 상황에 적합하게 선택된 것으로서, 본 개시가 단수 또는 복수의 구성 요소에 제한되는 것은 아니며, 복수로 표현된 구성 요소라고 하더 라도 단수로 구성되거나, 단수로 표현된 구성 요소라 하더라도 복수로 구성될 수 있다. 한편 본 개시의 상세한 설명에서는 구체적인 실시예에 관해 설명하였으나, 본 개시의 범위에서 벗어나지 않는 한도 내에서 여러 가지 변형이 가능함은 물론이다. 그러므로 본 개시의 범위는 설명된 실시예에 국한되어 정해 져서는 아니 되며 후술하는 특허청구의 범위뿐만 아니라 이 특허청구의 범위와 균등한 것들에 의해 정해져야 한 다. 즉, 본 개시의 기술적 사상에 바탕을 둔 다른 변형예들이 실시 가능하다는 것은 본 개시의 속하는 기술 분 야에서 통상의 지식을 가진 자에게 자명한 것이다. 또한 상기 각각의 실시예는 필요에 따라 서로 조합되어 운용 할 수 있다. 예컨대, 본 개시에서 제안하는 방법들의 일부분들이 서로 조합되어 기지국과 단말이 운용될 수 있 다. 또한 상기 실시예들은 5G, NR 시스템을 기준으로 제시되었지만, LTE, LTE-A, LTE-A-Pro 시스템 등 다른 시 스템에도 상기 실시예의 기술적 사상에 바탕을 둔 다른 변형예들이 실시 가능할 것이다."}
{"patent_id": "10-2023-0102309", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 다양한 실시예들에 따른, 무선 통신 시스템에서 코어 망 객체들(core network entity)을 포함 하는 통신 망(communication network)을 도시한다. 도 2a는 본 개시의 실시예들에 따른, 단말의 기능적 구조의 예를 도시한다. 도 2b는 본 개시의 실시예들에 따른, 기지국의 기능적 구조의 예를 도시한다. 도 2c는 본 개시의 실시예들에 따른, 코어 네트워크 객체의 기능적 구조의 예를 도시한다. 도 3은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 Direct Communication 구조를 도시한다. 도 4는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-Network Relay Communication 구조를 도시한다. 도 5는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-UE Relay Communication 구조를 도시한다. 도 6은 본 개시의 다양한 실시예들에 따른, UE가 5G ProSe의 Discovery 메시지를 생성하고, Discovery 메시지 및 구성 요소에 보안을 적용하여 전송하는 과정을 도시한다. 도 7은 본 개시의 다양한 실시예들에 따른, UE가 5G ProSe의 Discovery 메시지를 수신하고, Discovery 메시지 및 구성 요소에 적용된 보안을 해제하는 과정을 도시한다. 도 8은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 Direct Discovery 모델 A 절차를 도시한다. 도 9는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 Direct Discovery 모델 B 절차를 도시한다. 도 10은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-Network Relay Discovery 모델 A 절차를 도시한 다. 도 11은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-Network Relay Discovery 모델 B 절차를 도시한 다. 도 12는 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-UE Relay Discovery 모델 A 절차를 도시한다. 도 13은 본 개시의 다양한 실시예들에 따른, 5G ProSe의 UE-to-UE Relay Discovery 모델 B 절차를 도시한다."}
