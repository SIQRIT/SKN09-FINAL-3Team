{"patent_id": "10-2023-0077382", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0176567", "출원번호": "10-2023-0077382", "발명의 명칭": "이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 이미지를 생성하는 방법 및 장치", "출원인": "태나다 주식회사", "발명자": "정일회"}}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방법에 있어서, 사용자 단말로부터 합성대상인 배경이미지를 포함하는 배경이미지입력을 수신하는 단계;상기 사용자 단말로부터 3차원 가상객체에 대한 가상객체 합성 요청을 수신하는 단계 ― 상기 가상객체 합성 요청은 상기 3차원 가상객체에 대한 합성객체정보, 합성위치 및 합성방향(orientation)을 포함함 ―;상기 배경이미지입력에 기초하여, 상기 배경이미지의 깊이맵(depth map)을 생성하는 단계;상기 가상객체합성요청에 기초하여, 상기 배경이미지에서 상기 3차원 가상객체와 연관된 기준가상평면을 결정하는 단계;상기 깊이맵 및 상기 기준가상평면에 기초하여, 상기 배경이미지에서 깊이유지영역을 결정하는 단계;상기 배경이미지 및 상기 깊이유지영역에 기초하여, 합성배경이미지를 생성하는 단계; 및상기 합성배경이미지 및 상기 가상객체 합성 요청에 기초하여, 상기 3차원 가상객체를 렌더링하고, 렌더링된 3차원 가상객체를 포함하는 합성이미지를 생성하는 단계를 포함하는 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,상기 배경이미지의 깊이맵을 생성하는 단계는입력된 이미지의 깊이맵을 출력하도록 사전에 트레이닝된 깊이맵 인공신경망에 의하여, 상기 배경이미지의 깊이맵을 생성하고, 상기 깊이맵 인공신경망은 훈련용 배경 이미지 및 훈련용 깊이맵을 포함하는 트레이닝 데이터 세트에 의하여,입력된 배경이미지에 대한 깊이맵을 출력하도록 사전에 트레이닝된 인공신경망인 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,상기 배경이미지에서 상기 3차원 가상객체와 연관된 기준가상평면을 결정하는 단계는상기 배경이미지에서 적어도 하나의 후보가상평면을 추출하는 단계; 및상기 가상객체 합성요청에 기초하여, 상기 추출된 적어도 하나의 후보가상평면 중 하나를 기준가상평면으로 결정하는 단계를 포함하는 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 3 항에 있어서,상기 추출된 적어도 하나의 후보가상평면 중 하나를 기준가상평면으로 결정하는 단계는상기 가상객체 합성요청에 포함된 가상객체의 합성위치 및 합성방향에 기초하여, 상기 추출된 적어도 하나의 후보가상평면의 위치와 상기 가상객체의 합성위치를 비교하고, 상기 추출된 적어도 하나의 후보가상평면의 법석벡터와 상기 가상객체의 합성방향을 비교하고, 비교 결과에 기초하여 상기 기준가상평면을 결정하는 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "공개특허 10-2024-0176567-3-제 1 항에 있어서, 상기 배경이미지에서 깊이유지영역을 결정하는 단계는상기 배경이미지의 깊이맵에서 각 영역의 깊이에 기초하여 적어도 하나의 깊이영역으로 구별하고, 상기 적어도 하나의 깊이영역 중 상기 기준가상평면을 포함하는 깊이영역을 상기 깊이유지영역으로 결정하는 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 1 항에 있어서, 상기 사용자 단말로부터, 상기 합성이미지를 생성할 때 사용자의 희망그림체를 나타내는 희망그림체요청을 획득하는 단계를 더 포함하고, 상기 합성배경이미지를 생성하는 단계는상기 희망그림체요청에 기초하여, 상기 깊이유지영역 이외의 영역 내에 포함된 이미지를 상기 희망그림체와 동일한 그림체를 갖는 이미지로 변경함으로써 상기 합성배경이미지를 생성하는 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 6 항에 있어서, 상기 3차원 가상객체를 렌더링하고, 렌더링된 3차원 가상객체를 포함하는 합성이미지를 생성하는 단계는상기 합성객체 정보에 기초하여 상기 3차원 가상객체를 렌더링하고, 렌더링된 3차원 가상객체를 상기 기준가상평면 상에서 상기 합성위치 및 상기 합성방향에 따라 상기 합성배경 이미지에 합성함으로써, 상기 합성이미지를생성하는 것을 특징으로 하는 합성이미지 생성 방법."}
{"patent_id": "10-2023-0077382", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 1 항 내지 제 7 항 중 어느 한 항에 기재된 방법을 수행하는 프로그램이 기록된 컴퓨터 판독 가능한 기록매체."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "배경이미지의 깊이맵에 기초하여 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법 및 장치에 관한 것으로, 배경이미지에 대한 깊이맵을 생성하고, 생성된 깊이맵에 기초하여 합성이미지의 배경이미지를 사용자가 원하는 그림체로 변경하고, 변경된 배경에 3차원 가상객체를 합성함으로써, 사용자로 하여금 사용자가 원하는 합 성이미지를 간단하고 쉽게 생성할 수 있다."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "가상현실(VR: Virtual Reality) 기술은 현실 세계의 객체 및 배경 등을 컴퓨터로 시뮬레이션하고 시뮬레이션된 가상객체 및 가상 배경을 사용자에 제공하고, 증강현실(AR: Augmented Reality) 기술은 현실 세계의 영상 상에 가상으로 만들어진 가상객체를 함께 제공하고, 혼합현실(MR: Mixed Reality) 기술은 현실세계에 가상현실이 접 목되어 현실의 물리적 객체와 가상객체가 상호작용하는 환경을 제공한다. 가상현실(VR) 기술은 현실 세계의 객체 및 배경을 모두 가상객체로 변환하고 가상객체만으로 구성된 영상을 제 공하기 때문에 객체 및 배경 모두를 렌더링한다. 이에 반하여, 증강현실(AR) 기술은 대상 객체만이 렌더링되고 그외의 객체 및 배경은 렌더링 되지 않은 영상을 제공하기 때문에 대상 객체만을 렌더링하고 그외에는 렌더링하 지 않는다. 다시 말해, 가상현실(VR) 화면은 객체 및 배경이 모두 3D 렌더링에 의해 생성된 가상객체를 나타내 는 데에 반하여, 증강현실(AR) 화면은 일부 객체만이 3D 렌더링에 의해 생성된 가상객체이고 그 외에는 카메라 모듈에 의해 촬영된 현실세계의 실제 객체 및 실제 공간을 나타낸다. 상술한 바와 같이, 증강현실(AR)은 현실세계의 이미지나 배경에 3차원 가상객체를 겹쳐서 하나의 영상으로 보여 주는 기술이다. 예를 들어, 현실세계를 나타내는 데이터는 카메라에 의해 촬영된 이미지 또는 영상 데이터일 수 있고, 가상현실을 나타내는 데이터, 즉 가상객체는 현실세계와 관련되는 정보 예컨대 현실세계의 가상객체를 설 명하는 텍스트 설명일 수 있다. 구체적인 예를 들어, 사용자가 카메라를 포함하는 스마트폰으로 남대문을 촬영하는 경우, 스마트폰은 디스플레이부에 남대문을 나타내는 이미지 데이터 상에 남대문에 대한 설명이 기재된 텍 스트를 함께 표시하여 사용자에게 제공한다. 이처럼, 증강현실(AR)은 현실세계의 현실객체와 가상현실의 가상객 체가 동시에 디스플레이되기 때문에 가상객체가 현실세계를 나타내는 이미지 데이터 상에 현실성있게 통합되어 야 한다. 최근 인공지능 기술이 발전함에 따라 가상현실 분야뿐만 아니라 이미지 처리 분야에서도 인공지능이 많이 활용 되고 있다. 특히, A.I. Diffusion 기술이 등장함에 따라 3차원 객체를 특정 이미지에 합성하거나 3차원 이미지 를 생성하는 것이 매우 용이해졌다. 그러나, 기존의 3차원 객체를 다른 이미지에 합성하는 기술은 3차원 객체와 배경 간의 일치감이 낮아, 이미지에 합성된 3차원 객체와 배경 사이에 일체감이 낮이 낮아 이미지가 어색한 문제점이 있었다. 선행기술문헌 특허문헌 (특허문헌 0001) 대한민국공개특허공보 제10-2020-0078214호 (특허문헌 0002) 대한민국공개특허공보 제10-2022-0056068호 (특허문헌 0003) 대한민국공개특허공보 제10-2022-0080696호 (특허문헌 0004) 대한민국공개특허공보 제10-2023-0010714호"}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 이미지를 생성하는 방법 및 장치를 제공하는 데에 있다. 또한, 상기된 바와 같은 기술적 과제들로 한정되지 않으며, 이하의 설명으로부터 또 다른 기술적 과제가 도출될 수도 있다."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방법은 사 용자 단말로부터 합성대상인 배경이미지를 포함하는 배경이미지입력을 수신하는 단계; 상기 사용자 단말로부터 3차원 가상객체에 대한 가상객체 합성 요청을 수신하는 단계 ―상기 가상객체 합성 요청은 상기 3차원 가상객체 에 대한 합성객체정보, 합성위치 및 합성방향(orientation)을 포함함―; 상기 배경이미지입력에 기초하여, 상기 배경이미지의 깊이맵(depth map)을 생성하는 단계; 상기 가상객체합성요청에 기초하여, 상기 배경이미지에서 상 기 3차원 가상객체와 연관된 기준가상평면을 결정하는 단계; 상기 깊이맵 및 상기 기준가상평면에 기초하여, 상 기 배경이미지에서 깊이유지영역을 결정하는 단계; 상기 배경이미지 및 상기 깊이유지영역에 기초하여, 합성배 경이미지를 생성하는 단계; 및 상기 합성배경이미지 및 상기 가상객체 합성 요청에 기초하여, 상기 3차원 가상 객체를 렌더링하고, 렌더링된 3차원 가상객체를 포함하는 합성이미지를 생성하는 단계를 포함한다. 상기 배경이미지의 깊이맵을 생성하는 단계는 입력된 이미지의 깊이맵을 출력하도록 사전에 트레이닝된 깊이맵 인공신경망에 의하여, 상기 배경이미지의 깊이맵을 생성하고, 상기 깊이맵 인공신경망은 훈련용 배경 이미지 및 훈련용 깊이맵을 포함하는 트레이닝 데이터 세트에 의하여, 입력된 배경이미지에 대한 깊이맵을 출력하도록 사 전에 트레이닝된 인공신경망이다. 상기 배경이미지에서 상기 3차원 가상객체와 연관된 기준가상평면을 결정하는 단계는 상기 배경이미지에서 적어 도 하나의 후보가상평면을 추출하는 단계; 및 상기 가상객체 합성요청에 기초하여, 상기 추출된 적어도 하나의 후보가상평면 중 하나를 기준가상평면으로 결정하는 단계를 포함한다. 상기 추출된 적어도 하나의 후보가상평면 중 하나를 기준가상평면으로 결정하는 단계는 상기 가상객체 합성요청 에 포함된 가상객체의 합성위치 및 합성방향에 기초하여, 상기 추출된 적어도 하나의 후보가상평면의 위치와 상 기 가상객체의 합성위치를 비교하고, 상기 추출된 적어도 하나의 후보가상평면의 법석벡터와 상기 가상객체의 합성방향을 비교하고, 비교 결과에 기초하여 상기 기준가상평면을 결정한다, 상기 배경이미지에서 깊이유지영역을 결정하는 단계는 상기 배경이미지의 깊이맵에서 각 영역의 깊이에 기초하 여 적어도 하나의 깊이영역으로 구별하고, 상기 적어도 하나의 깊이영역 중 상기 기준가상평면을 포함하는 깊이 영역을 상기 깊이유지영역으로 결정한다. 본 발명의 일 실시예에 따른 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방법은 상 기 사용자 단말로부터, 상기 합성이미지를 생성할 때 사용자의 희망그림체를 나타내는 희망그림체요청을 획득하 는 단계를 더 포함하고, 상기 합성배경이미지를 생성하는 단계는 상기 희망그림체요청에 기초하여, 상기 깊이유 지영역 이외의 영역 내에 포함된 이미지를 상기 희망그림체와 동일한 그림체를 갖는 이미지로 변경함으로써 상 기 합성배경이미지를 생성한다. 상기 3차원 가상객체를 렌더링하고, 렌더링된 3차원 가상객체를 포함하는 합성이미지를 생성하는 단계는 상기 합성객체 정보에 기초하여 상기 3차원 가상객체를 렌더링하고, 렌더링된 3차원 가상객체를 상기 기준가상평면 상에서 상기 합성위치 및 상기 합성방향에 따라 상기 합성배경 이미지에 합성함으로써, 상기 합성이미지를 생성 한다. 본 발명의 또 다른 실시예에 따른 컴퓨터 판독 가능한 기록매체는 본 발명의 일 실시예에 따른 방법을 수행하는 프로그램이 기록된다."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방법은 배경이미지의 깊이 정보에 기초 하여 배경이미지의 영역을 구별하고, 구별된 영역 중 가상객체입력 합성 요청에 기초하여 깊이유지영역을 결정 한다. 합성이미지 생성 방법은 깊이유지영역 이외의 영역 내의 배경이미지를 사용자의 선호도에 맞는 배경으로 변경하고, 변경된 합성배경이미지에 가상객체를 합성함으로써, 3차원 가상객체를 포함하는 새로운 이미지를 쉽 게 생성할 수 있다. 또한, 본 발명에 따른 합성이미지 생성 방법은 배경이미지의 깊이를 고려하여 깊이가 상이한 영역으로 구별하고, 구별된 깊이영역 중 3차원 가상객체가 합성되는 기준가상평면을 포함하는 깊이영역을 깊이유지영역으 로 결정하고, 깊이유지영역 이외의 영역 내의 배경이미지를 사용자가 좋아하는 그림체의 이미지로 변경함으로써, 3차원 가상객체가 변형된 배경이미지와 높은 일체감을 갖는 자연스런 합성이미지를 생성할 수 있 다. 추가적으로, 본 발명에 따른 합성이미지 생성 방법은 사용자의 선호도를 획득하고, 획득한 선호도에 기초하여 사용자의 선호도에 맞는 이미지로 배경이미지를 변경함으로써, 사용자의 선호에 적합한 이미지를 배경으로 하면 서 사용자가 입력한 가상객체를 포함하는 합성이미지를 생성할 수 있다."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명은 다양한 변경을 가할 수 있고 여러 가지 실시예를 가질 수 있는 바, 특정 실시예들을 도면에 예시하고 상세한 설명에 상세하게 설명한다. 그러나, 이는 본 발명을 특정한 실시 형태에 대해 한정하려는 것이 아니며,본 발명의 사상 및 기술 범위에 포함되는 모든 변경, 균등물 내지 대체물을 포함하는 것으로 이해되어야 할 것 이다. 또한, 본 실시예들을 설명하는 데 있어서, 제 1, 제 2, A, B, (a), (b) 등의 용어를 사용할 수 있다. 이러한 용 어는 그 구성요소를 다른 구성요소와 구별하기 위한 것일 뿐, 그 용어에 의해 해당 구성요소의 본질이나 차례 또는 순서 등이 한정되지 않는다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 '포함', '구비'한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있 는 것을 의미한다. 이하의 본 발명의 실시예들에 대한 상세한 설명에서 기재된 용어는 다음과 같은 의미를 갖는다. “실제현실 (real world)”은 물리적인 현실 공간을 의미하고, “가상현실”은 실제현실의 공간의 일부 또는 전체를 반영하 는(mirroring) 3차원의 가상의 공간을 의미한다. “실제객체”는 물리적인 현실 공간에 존재하는 물리적인 객체 를 의미하고, “가상객체”는 물리적인 객체가 복제되어 가상 공간에 존재하는 비물리적인 객체를 의미한다. “ 증강현실(AR: Augmented Reality)”은 실제현실과 가상현실이 혼합된 공간으로, 실제현실의 이미지 또는 배경에 3차원의 가상객체가 겹쳐져 하나의 이미지를 사용자에게 제공한다. “그림체(drawing style)”는 작가 개인 고 유의 그림 형식으로, 구도, 색체, 형태, 선 등에 의하여 나타내는 작가 고유의 개성을 의미한다. 도 1은 본 발명의 일 실시예에 따른 이미지 합성 시스템을 도시한 도면이다. 도 1을 참고하면, 본 발명의 일 실 시예에 따른 이미지 합성 시스템은 이미지합성서버 및 사용자 단말을 포함한다. 이미지합성서버(1 1)는 사용자 단말로부터 입력된 이미지합성명령에 기초하여 3차원 가상객체를 포함하는 합성이미지를 생성 한다. 이미지합성서버는 사용자의 이미지합성명령에 기초하여 3차원 가상객체를 포함하는 합성이미지를 생 성하는 방법을 수행하는 어플리케이션을 사용자 단말로 제공한다. 사용자 단말은 합성이미지를 생성하는 방법을 수행하는 어플리케이션을 실행하고, 어플리케이션을 통하여 사용자에게 3차원 가상객체를 포함하는 합성이미지를 제공한다. 사용자 단말은 통신기능을 가지고 다양한 어플리케이션을 실행할 수 있는 컴퓨팅 디바이스로서, 그 예로는 스마트폰(smart phone), 태블릿 PC(tablet pc) 등을 들 수 있다. 사용자 단말은 생성된 합성이미지를 출력할 수 있는 디스플레이 모듈을 포함한다. 본 발명의 일 실시에에 따른 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법을 구성하는 단계들은 이미 지 합성 시스템의 이미지합성서버 및 사용자 단말에서 수행될 수 있다. 예를 들어, 사용자 단말(1 2)은 사용자로부터 입력을 수신하고, 수신된 사용자 입력을 통신 네트워크를 통하여 이미지합성서버로 전송 한다. 이미지합성서버는 전송된 사용자 입력에 기초하여 가상객체를 포함하는 합성 이미지를 생성하고, 생 성된 합성 이미지를 사용자 단말로 전송한다. 사용자 단말은 전송된 합성이미지를 디스플레이를 통하여 사용자에게 제공한다. 이하에서는, 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법에 대하여 상세하게 설명하기로 한다. 도 2는 도 1에 도시된 이미지합성서버의 구성도이다. 도 2를 참고하면, 이미지합성서버는 프로세서 , 통신모듈, 스토리지, 깊이맵(depth map) 생성모듈, 가상평면결정모듈, 배경 합성모듈 및 3차원 가상객체 합성모듈을 포함한다. 이미지합성서버의 프로세서는 이미지합성서버에서 수행되는 일반적인 테스크를 처리한다. 이미지합성서버의 통신모듈은 이동통신 기지국 또는 와이파이 중계기 등에 접속하여 인터넷 등과 같 은 광역 네트워크를 통하여 사용자 단말 및 외부 서버(미도시) 등과 데이터, 메시지 및 신호를 송수신할 수 있다. 이미지합성서버의 스토리지는 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법을 실행하는 어 플리케이션 또는 프로그램을 실행하는데 필요한 데이터를 저장한다. 예를 들어, 스토리지는 이미지합성서 버의 합성이미지의 배경이 되는 복수 개의 배경이미지를 저장한다. 또한, 스토리지는 이미지합성서 버에 포함된 적어도 하나의 인공신경망을 트레이닝하기 위한 훈련용 트레이닝 세트를 저장한다. 이미지합성서버의 깊이맵(depth map) 생성모듈은 배경이미지의 깊이맵을 생성한다. 깊이맵 생성모듈 은 임의의 관찰시점(viewpoint)으로부터 배경이미지 내의 물체의 표면가지의 거리와 관련된 정보를 나타 내는 깊이맵을 생성한다. 깊이맵 생성모듈은 배경이미지의 임의의 위치에 가상 카메라를 배치하고, 배치 된 가상카메라로부터 배경이미지의 각 부분의 거리를 산출하고, 산출된 거리에 기초하여 배경이미지의 깊이맵을 생성한다. 깊이맵 생성모듈은 입력된 이미지의 깊이맵을 출력하도록 사전에 트레이닝된 깊이맵 인공신경 망을 포함할 수 있다. 깊이맵 생성모듈에서 깊이맵을 생성하는 구체적인 방식에 대하여는 이하에서 상세하게 설명하기로 한다. 이미지합성서버의 가상평면결정모듈은 배경이미지 상에서 가상객체를 합성하기 위한 기준이 되는 기 준가상평면을 결정한다. 가상평면결정모듈은 가상객체합성요청에 포함된 가상객체의 합성위치 및 합성방 향에 기초하여, 기준가상평면을 결정한다. 가상평면결정모듈은 배경이미지를 반영하는 3차원 가상공간을 생성하고, 3차원 가상공간 상의 적어도 하나의 가상평면 중 하나를 기준가상평면으로 결정한다. 기준가상평면을 결정하는 구체적인 방법에 대하여는 이하에서 상세하게 설명하기로 한다. 이미지합성서버의 배경합성모듈은 3차원 가상객체를 포함하는 합성이미지의 배경인 합성배경이미지를 생성한다. 배경합성모듈은 깊이유지영역 및 배경 이미지에 기초하여, 배경이미지에서 깊이유지영역 이외 의 깊이영역을 상이한 이미지로 변경하고, 깊이유지영역을 동일하게 유지한 합성배경 이미지를 생성한다. 합성 배경이미지를 생성하는 구체적인 방법에 대하여는 이하에서 상세하게 설명하기로 한다. 이미지합성서버의 3차원 가상객체 합성모듈은 사용자 단말로부터 전송된 가상객체 합성요청에 따 른 3차원 가상객체를 렌더링하고, 렌더링된 3차원 가상객체를 합성배경 이미지에 합성한다. 3차원 가상객체 합 성모듈은 가상객체 합성요청에 포함된 가상객체의 합성객체정보, 합성위치 및 합성방향에 따라 기준가상 평면 상에서 가상객체를 렌더링한다. 3차원 가상객체 합성모듈은 사용자가 입력한 합성객체정보와 대응되 는 가상객체를 합성배경 이미지에서 기준가상평면 상에 사용자가 입력한 합성위치 및 합성방향으로 생성한다. 3 차원 가상객체 합성모듈에서 3차워너 가상객체를 렌더링하는 구체적인 방법에 대하여는 이하에서 상세하 게 설명하기로 한다. 이미지합성서버에서 깊이맵(depth map) 생성모듈, 가상평면결정모듈, 배경합성모듈 및 3 차원 가상객체 합성모듈은 프로세서와 다른 별개의 전용 프로세서에 의해 구현될 수도 있고, 프로 세서에서 실행되는 컴퓨터 프로그램에 의해 구현될 수도 있다. 이미지합성서버는 이상에서 설명된 구성요소들 외에 추가적인 구성요소를 더 포함할 수 있다. 예를 들어, 이미지합성서버는 도 2에 도시된 바와 같이, 구성요소들 간에 데이터를 전송하기 위한 버스를 포함하고, 도 2에는 생략되어 있으나 각 구성요소에 구동전원을 공급하는 전원모듈을 더 포함한다."}
{"patent_id": "10-2023-0077382", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "이와 같이, 본 실시예가 속하는 기술분야에서 통상의 지식을 가진 자에게 자명한 구성요소에 대한 설명은 본 실 시예의 특징을 흐려지게 함에 따라 생략하기로 한다. 이하에서는 본 발명의 일 실시예에 따른 가상객체를 포함 하는 합성이미지 생성 방법을 설명하는 과정에서 이미지합성서버의 각 구성요소에 대해 상세하게 설명하기 로 한다. 도 3은 본 발명의 실시예에 따른 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법의 흐름도이다. 도 3을 참고하면, 301 단계에서, 이미지합성서버는 사용자 단말로부터 3차원 가상 객체를 합성할 대상인 배경 이미지를 포함하는 배경이미지 입력을 수신한다. 사용자 단말은 사용자로부터 3 차원 가상객체를 합성하려는 배경 이미지에 대한 선택을 입력받는다. 예를 들어, 사용자가 숲속을 통과하는 도 로를 나타내는 이미지에 3차원 가상객체를 합성하고자 하는 경우, 사용자는 해당 이미지를 선택하는 방식으로 배경이미지를 선택할 수 있다. 이미지합성서버의 통신모듈은 사용자 단말로부터 배경이미지를 포 함하는 배경이미지 입력을 획득한다. 이미지합성서버의 통신모듈은 사용자 단말로부터 획득한 배 경이미지입력을 깊이맵(depth map) 생성모듈 및 가상평면결정모듈로 입력한다. 302 단계에서, 이미지합성서버는 사용자 단말로부터 배경이미지에 합성하려는 3차원 가상객체에 대한 가상객체 합성 요청을 수신한다. 이미지합성서버의 통신모듈은 사용자 단말로부터 가상객체 합성 요청을 수신한다. 보다 구체적으로, 사용자 단말은 사용자로부터 배경이미지에 합성하려는 3차원 가상객체 의 합성객체정보, 합성위치 및 합성방향(orientation) 중 적어도 하나를 포함하는 가상객체 합성 요청을 입력받 는다. 합성객체정보는 배경 이미지에 합성하고자 하는 가상객체의 텍스트, 이미지 및 애니메이션에 대한 정보를 포함한다. 사용자는 배경이미지에 합성을 원하는 가상객체에 대한 요청을 사용자 단말의 입력모듈을 통하여 입력할 수 있다. 합성위치는 배경이미지 상에서 가상객체를 합성하고자 하는 위치이며, 합성방향은 배경이미지 상에서 가상객체가 합성되는 방향이다. 예를 들어, 사용자 단말의 입력모듈이 터치스크린인 경우, 사용자는 가상객체를 합성하고자 하는 배경이미 지 상에 디스플레이하고, 배경이미지 상에 합성하고자 하는 가상객체를 합성하고자 하는 위치 및 방향으로 배열 할 수 있다. 이와 관련하여, 도 4는 본 발명의 일 실시예에 따른 3차원 가상객체가 합성된 합성이미지를 도시한 예시이다. 도 4를 참고하면, 숲을 통과하는 도로를 나타내는 배경이미지에서, “길 위에 내가 있다”라는 텍스트가 도로가 진행하는 방향으로 합성되어 있다. 사용자는 사용자 단말을 통하여 숲을 통과하는 이미지를 배경이미지로 선택하고, 배경이미지 상에 “길 위에 내가 있다”란 텍스트의 가상객체를 특정 위치 및 방향으로 합성하는 가 상객체 합성 요청을 입력할 수 있다. 이미지합성서버의 통신모듈은 사용자 단말로부터 획득한 가상객체 합성요청을 가상평면결정모듈 , 배경합성모듈 및 3차원 가상객체 합성모듈로 입력한다. 303 단계에서, 이미지합성서버는 배경이미지입력에 기초하여, 배경이미지의 깊이맵(depth map)을 생성한다. 이미지합성서버의 깊이맵 생성모듈은 배경이미지입력에 포함된 배경이미지의 깊이맵을 생성한다. 깊 이맵은 관찰 시점(viewpoint)로부터 배경이미지 내의 물체의 표면까지의 거리와 관련된 정보를 나타내는 이미지 이다. 본 발명의 일 실시예에 따른 깊이맵 생성모듈은 배경이미지의 임의의 위치에 가상 카메라를 배치하고, 배 치된 가상카메라로부터 배경이미지의 각 부분의 거리를 산출하고, 산출된 거리에 기초하여 배경이미지의 깊이맵 을 생성한다. 본 발명의 다른 실시예에 따른 깊이맵 생성모듈은 입력된 이미지의 깊이맵을 출력하도록 사전에 트레이닝 된 깊이맵 인공신경망을 포함할 수 있다. 깊이맵 인공신경망은 훈련용 배경 이미지 및 훈련용 배경이미지에 대 한 훈련용 깊이맵 이미지를 포함하는 트레이닝 데이터 세트에 의하여, 입력된 배경이미지에 대한 깊이맵을 출력 하도록 사전에 트레이닝된 인공신경망이다. 깊이맵 인공신경망은 배경이미지입력에 포함된 배경이미지에 대한 깊이맵을 출력한다. 깊이맵 생성모듈은 출력된 배경이미지에 대한 깊이맵을 배경합성모듈로 입력한다. 304 단계에서, 이미지합성서버는 가상객체합성요청에 기초하여, 배경이미지에서 가상객체를 합성하기 위하 여 기준이 되는 기준가상평면을 결정한다. 기준가상평면은 배경이미지에서 가상객체를 합성하기 위하여 기준이 되는 가상평면이다. 이미지합성서버의 가상평면결정모듈은 가상객체합성요청에 포함된 가상객체의 합 성위치 및 합성방향에 기초하여, 3차원 가상객체와 연관된 기준가상평면을 결정한다. 기준가상평면을 결정하는 구체적인 과정에 대하여는 이하에서 도 5 및 도 6을 참조하여 설명하기로 한다. 도 5는 도 3에 도시된 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방법에서 기준가 상평면을 결정하는 단계의 상세흐름도이고, 도 6은 기준가상평면을 결정하는 과정을 표시한 예시화면을 도시한 도면이다. 도 5 및 도 6을 참고하면, 3041 단계에서 가상평면결정모듈은 가상객체를 합성할 배경 이미지에 기초하여 적어도 하나의 후보가상평면을 추출한다. 도 6의 (a)는 배경 이미지를 나타내는 화면을 도시한 도면이고, 도 6 의 (b)는 배경이미지에서 추출된 적어도 하나의 후보가상평면을 도시한 도면이다. 가상평면결정모듈은 배 경이미지 내에 포함된 평면을 검출하고, 검출된 평면을 적어도 하나의 후보가상평면으로 추출한다. 보다 구체적으로, 가상평면결정모듈은 배경이미지를 반영하는(mirroring) 3차원의 가상공간을 생성한다. 가상평면결정모듈은 배경이미지에서 복수 개의 특징점(feature point)을 추출하고, 추출된 복수 개의 특 징점으로 구성되는 적어도 하나의 평면을 추출한다. 가상평면결정모듈은 추출된 평면과 대응되는 가상평 면을 3차원의 가상공간 상에 생성한다. 가상평면결정모듈은 가상공간 상에서 추출된 평면과 대응되는 위 치에 가상평면을 생성한다. 가상평면결정모듈은 생성된 적어도 하나의 가상평면을 후보가상평면으로 결정 한다. 도 6의 (b)는 최초 동영상 프레임이 나타내는 이미지에서 추출된 적어도 하나의 후보가상평면을 도시한 도면이다. 도 6의 (b)의 도면에서 음영된 평면이 추출된 복수 개의 후보 평면이다. 3042 단계에서, 가상평면결정모듈은 가상객체 합성 요청에 기초하여 3041 단계에서 추출된 적어도 하나의 후보가상평면 중 어느 하나의 후보가상평면을 기준가상평면으로 결정한다. 가상평면결정모듈은 가상객체 합성 요청에 포함된 가상객체의 합성위치 및 합성방향에 기초하여 적어도 하나의 후보가상평면 중에서 어느 하 나를 기준가상평면을 결정한다. 보다 구체적으로, 가상평면결정모듈은 추출된 후보가상평면의 법선벡터와 가상객체의 합성방향을 비교하 고, 후보가상평면의 위치 좌표와 가상객체의 합성위치를 비교하고, 이러한 비교 결과에 기초하여 기준가상평면 을 결정한다. 가상평면결정모듈은 후보가상평면의 법선벡터와 가상객체의 합성방향을 비교할 때 후보가상 평면의 법선벡터와 가상객체를 둘러싼 바운딩 박스(bounding box)의 상면, 하면, 정면, 배면 각각에 대한 법선벡터와 후보가상평면의 법선벡터를 비교한다. 가상평면결정모듈은 가상객체의 합성위치와 가까운 소정의 개수의 후보가상평면들을 결정하고, 결정된 후보가상평면들 중 가상객체의 합성방향과 각도차이가 가장 적은 법 선벡터를 갖는 후보가상평면을 기준가상평면으로 결정한다. 도 6의 (c)는 배경이미지 상에서 가상객체 합성 요 청에 기초한 가상객체“길 위에 내가 있다”의 위치 및 방향을 나타내는 예시화면이고, 도 6의 (d)는 배경이미 지 상에서 결정된 기준가상평면을 나타내는 예시화면이다. 도 6의 (c)에서 가상객체 “길 위에 내가 있다”는 동영상에서 우측 하단에 화면으로 들어가는 방향으로 배치된다. 도 6의 (d)에서 가상객체 “길 위에 내가 있다 ”의 하단에 위치한 음영된 평면이 결정된 기준가상평면이다. 본 발명의 또 다른 실시예에 따른 가상평면결정모듈은 가상객체 합성 요청에 기초하여 결정된 기준가상평 면을 수정한다. 가상평면결정모듈은 가상객체 합성 요청에 포함된 가상객체의 합성위치 및 합성방향에 기 초하여 결정된 기준가상평면의 방향 및 위치를 수정한다. 가상평면결정모듈은 기준가상평면의 위치 및 방 향을 가상객체 합성 요청에 포함된 가상객체의 합성위치와 합성방향에 부합하도록 기준가상평면으로 결정된 후 보가상평면의 위치 및 방향을 수정한다. 304 단계에서, 가상평면결정모듈은 결정된 기준가상평면을 배경합성모듈로 입력한다. 305 단계에서, 이미지합성서버는 깊이맵 및 기준가상평면에 기초하여, 배경이미지에서 깊이유지영역을 결정 한다. 배경합성모듈은 303 단계에서 결정된 배경이미지의 깊이맵에서 304 단계에서 결정된 기준가상평면 의 위치 및 방향에 기초하여, 배경이미지의 깊이유지영역을 결정한다. 배경합성모듈은 깊이맵에서 기준가 상평면을 포함하는 영역을 깊이유지영역으로 결정한다. 여기에서, 깊이유지영역은 합성이미지의 배경인 합성배 경이미지를 생성할 때, 배경이미지에서 이미지를 변경하지 않고 유지하는 영역을 의미한다. 보다 구체적으로, 배경합성모듈은 303 단계에서 생성된 깊이맵에서 각 영역의 깊이에 기초하여 적어도 하 나의 깊이영역으로 구별하고, 구별된 각 깊이 영역 중 기준가상평면을 포함하는 깊이영역을 깊이유지영역으로 결정한다. 이와 관련하여, 도 7은 도 6에 도시된 예시화면에 대한 깊이맵을 도시한 도면이다. 도 7(a)는 도 6에 도시된 예시 배경이미지에 대한 깊이맵을 도시한 도면이고, 도 7(b)는 예비 배경이미지의 깊이맵을 깊이영역으 로 구별한 예시를 도시한 도면이고, 도 7(c)는 도 6에 도시된 예시 배경이미지에 대한 깊이맵에서 깊이유지영역 외의 영역의 이미지를 제거한 예시도면을 도시한 도면이다. 도 7을 참고하면, 깊이맵 생성모듈은 도 6에 도시된 예시 배경이미지에 대한 깊이맵을 생성한다. 깊이맵 은 예시 배경이미지의 깊이를 나타내는 이미지로서, 깊이맵에서 색깔이 어두울수록 깊이가 깊으며, 밝을수록 깊 이가 깊지 않다. 배경합성모듈은 깊이맵에서 이미지의 깊이에 기초하여 적어도 하나의 깊이영역으로 구별 한다. 보다 구체적으로, 배경합성모듈은 근처 영역과 깊이 차이가 임계깊이차이 이상인 경우 상이한 영역 으로 구별한다. 여기서, 임계깊이차이는 사용자에 의하여 미리 설정될 수 있다. 도 7(b)를 참고하면, 배경합성 모듈은 도 7(a)에 도시된 예시 배경이미지의 깊이맵을 4개의 깊이영역으로 구별한다. 배경합성모듈(110 6)은 기준가상평면을 포함하는 3번 깊이영역을 깊이유지영역으로 결정한다. 배경합성모듈은 입력된 깊이맵에 포함된 적어도 하나의 깊이영역을 나타내는 깊이영역구별 이미지를 출력 하도록 사전에 트레이닝된 깊이영역구별 인공신경망을 포함할 수 있다. 깊이영역구별 인공신경망은 훈련용 깊이 맵 및 각 훈련용 깊이맵에 대한 깊이영역을 나타내는 훈련용 깊이영역구별 이미지를 포함하는 트레이닝 데이터 세트에 의하여, 입력된 깊이맵에 대한 깊이영역구별 이미지를 출력하도록 사전에 트레이닝된 인공신경망이다. 깊이영역구별 인공신경망은 입력된 깊이맵을 각 깊이영역으로 구별한 이미지를 나타내는 깊이영역구별 이미지를 출력한다. 배경합성모듈은 출력된 깊이영역구별 이미지로부터 깊이유지영역을 결정한다. 306 단계에서, 이미지합성서버는 배경이미지 및 결정된 깊이유지영역에 기초하여, 합성배경 이미지를 생성 한다. 이미지합성서버의 배경합성모듈은 배경이미지 및 깊이유지영역에 기초하여, 배경이미지에서 깊 이유지영역 이외의 깊이영역을 상이한 이미지로 변경하고, 깊이유지영역을 동일하게 유지한 합성배경 이미지를 생성한다. 배경합성모듈은 배경이미지에서 깊이유지영역의 이미지는 동일하게 유지하고, 깊이유지영역 이 외의 영역은 상이한 이미지로 변경된 합성배경 이미지를 생성한다. 여기에서, 합성배경 이미지는 3차원 가상객 체를 포함하는 합성이미지의 배경을 나타내는 이미지이다. 합성배경 이미지는 깊이유지영역에서 배경 이미지와 동일한 이미지를 포함하고 깊이유지영역 외에서 배경 이미지와 상이한 이미지를 포함한다. 이와 관련하여, 도 8은 본 발명의 실시예에 따라 생성된 합성이미지의 예시를 도시한 도면이다. 보다 구체적으 로, 도 8(a)는 도 4에 도시된 예시이미지를 클림트 그림체로 배경을 변경하고 가상객체를 합성한 합성이미지의 예시이고, 도 8(b)는 도 4에 도시된 예시이미지를 고흐 그림체로 배경을 변경하고 가상객체를 합성한 합성이미지의 예시이다. 본 발명의 일 실시예에 따른 이미지합성서버는 사용자 단말로부터 전송된 합성배경 이미지에 대한 희망 그림체요청을 획득하고, 배경이미지, 획득한 희망그림체요청 및 깊이유지영역에 기초하여 합성배경 이미지를 생 성한다. 보다 구체적으로, 본 발명의 합성이미지 생성 방법은 사용자 단말로부터 합성배경 이미지에 대한 희망그림체요청을 획득하는 단계를 더 포함한다. 여기에서, 희망그림체요청은 합성이미지를 생성할 때 사용자가 희망하는 그림체를 나타내는 요청으로서, 예를 들어, 화가 클림트 그림체, 화가 모네 그림체, 화가 고흐 그림체 등을 사용자 단말로 입력할 수 있다. 희망 그림체요청은 사용자가 변경을 원하는 그림체로 그려진 이미지, 또는 화가 성명 등을 포함할 수 있다. 배경합성 모듈은 희망그림체요청에 기초하여 합성배경 이미지를 생성한다. 배경합성모듈은 사용자로부터 입 력된 희망그림체요청에 기초하여 배경이미지에서 깊이유지영역 외의 영역의 이미지를 희망그림체요청에 포함된 희망그림체와 동일한 그림체를 갖는 이미지로 변경하고, 깊이유지영역 내의 이미지는 배경이미지와 동일한 이미 지로 유지함으로써, 합성배경 이미지를 생성한다. 깊이유지영역 외의 이미지를 변경하는 구체적인 방법은 다음과 같다. 배경합성모듈은 깊이유지영역 외의 영역의 이미지를 희망그림체의 이미지로 변경한다. 배경합성모듈은 깊이유지영역 외의 이미지와 유사한 희망그림체로 그려진 변경후보 이미지를 검색한다. 배경합성모듈은 스토리지에 저장된 복수 개의 이미지 중 유사한 희망그림체로 그려진 적어도 하나의 변경후보 이미지를 추출하다. 배경합성모듈은 추출 된 적어도 하나의 변경후보 이미지를 깊이유지영역 외의 이미지와 비교하고, 비교결과 깊이유지영역 외의 이미 지와 가장 높은 유사도를 갖는 변경후보 이미지를 변경이미지로 결정한다. 배경합성모듈은 깊이유지영역 외의 이미지를 결정된 변경이미지로 변경한다. 추가적으로, 배경합성모듈은 깊이유지영역 내의 이미지를 깊이유지영역 내의 깊이를 유지하면서 희망그림 체요청에 포함된 그림체로 변경할 수 있다. 보다 구체적으로, 배경합성모듈은 깊이유지영역 내의 이미지 의 색상(hue), 채도(saturation) 및 명도(lightness)를 희망그림체와 유사하게 변경한다. 배경합성모듈은 깊이유지영역 내에서 각 부분의 깊이를 고려하여 색상, 채도 및 명도를 변경한다. 본 발명의 다른 실시예에 따른 이미지합성서버는 배경이미지, 사용자의 배경 선호도 및 깊이유지영역에 기 초하여, 합성배경 이미지를 생성한다. 이미지합성서버는 사용자의 배경 선호도를 획득하고, 획득한 사용자 의 배경 선호도에 기초하여 합성배경 이미지를 생성한다. 보다 구체적으로 배경합성모듈은 사용자 단말 로부터 사용자의 배경 이미지에 대한 선호도를 나타내는 배경 선호도를 획득한다. 배경합성모듈은 획 득된 배경 선호도에 기초하여, 사용자의 배경 선호도와 유사도가 가장 높은 이미지로 깊이유지영역 외의 영역을 변경함으로써, 합성배경 이미지를 생성한다. 여기에서, 배경선호도는 사용자가 선호하는 배경 이미지에 대한 정 보로서, 사용자가 평소에 선호하는 선호 이미지를 포함한다. 보다 구체적으로, 이미지합성서버의 배경합성모듈은 사용자의 선호도 정보에 기초하여, 사용자의 선 호도와 높은 유사도를 갖는 후보배경이미지를 스토리지에서 추출한다. 배경합성모듈은 사용자의 배 경선호도에 포함된 선호 이미지와 가장 유사한 후보배경이미지를 추출한다. 배경합성모듈은 선호 이미지 와 가장 높은 유사도를 갖는 후보배경이미지를 추출하도록 사전에 트레이닝된 후보배경 인공신경망을 포함할 수 있다. 후보배경 인공신경망은 훈련용 선호 이미지 및 훈련용 후보배경이미지를 포함하는 트레이닝 데이터 세트 에 의하여, 입력된 선호 이미지에 대한 후보배경이미지를 출력하도록 사전에 트레이닝된 인공신경망이다. 후보 배경 인공신경망은 입력된 선호이미지와 가장 유사한 후보배경이미지를 출력한다. 배경합성모듈은 배경이 미지에서 깊이유지영역 이외의 영역을 출력된 후보배경이미지로 변경함으로써, 합성배경 이미지를 생성한다. 배경합성모듈은 생성된 합성배경 이미지를 3차원 가상객체 합성모듈로 입력한다. 307 단계에서, 이미지합성서버는 합성배경 이미지 및 가상객체 합성요청에 기초하여, 3차원 가상객체를 렌 더링하고, 렌더링된 3차원 가상객체를 포함하는 합성이미지를 생성한다. 이미지합성서버의 3차원 가상객체 합성모듈은 가상객체 합성요청에 포함된 가상객체의 합성객체정보, 합성위치 및 합성방향에 따라 기준가 상평면 상에서 가상객체를 렌더링한다. 3차원 가상객체 합성모듈은 사용자가 입력한 합성객체정보와 대응 되는 가상객체를 합성배경 이미지에서 기준가상평면 상에 사용자가 입력한 합성위치 및 합성방향으로 생성한다. 보다 구체적으로, 3차원 가상객체 합성모듈은 304 단계에서 결정된 기준가상평면의 위치좌표 및 방향에 기초하여 가상공간 상에서의 가상객체의 합성위치 좌표 및 합성방향을 산출한다. 3차원 가상객체 합성모듈은 기준가상평면을 기준으로 가상객체의 위치 및 방향을 나타내는 상대적 객체 매트릭스를 산출하고, 가상공간 상에서 기준가상평면의 위치 및 방향을 나타내는 베이스 매트릭스를 산출한다. 3차원 가상객체 합성모듈은 가상객체의 상대적 객체 매트릭스 및 베이스 매트릭스를 이용하여 가상공간 상에서 가상객체의 합성위치 및 합성방향을 나타내는 절대적 객체 매트릭스를 산출한다. 가상객체의 절대적 객체 매트 릭스는 다음의 수학식 1로 표현될 수 있다. [수학식 1] absolute object matrix = relative object matrix * base matrix 여기에서, absolute object matrix는 가상공간 상에서 가상객체의 합성위치 및 합성방향을 나타내는 절대적 객 체 매트릭스이고, relative object matrix는 기준가상평면을 기준으로 가상객체의 위치 및 방향을 나타내는 상 대적 객체 매트릭스이고, base matrix는 가상공간 상에서 기준가상평면의 위치 및 방향을 나타내는 베이스 매트 릭스이다. 3차원 가상객체 합성모듈은 산출된 가상객체의 합성위치 좌표 및 합성방향에 따라 가상객체를 렌더링한다. 3차원 가상객체 합성모듈은 렌더링된 가상객체를 합성배경 이미지에 합성한다. 3차원 가상객 체 합성모듈은 가상객체 합성 요청에 포함된 가상객체를 306 단계에서 생성된 합성배경 이미지에 합성한 다. 3차원 가상객체 합성모듈은 상술한 방식으로 렌더링된 3차원 가상객체를 포함하는 합성이미지를 생성 한다. 308 단계에서, 이미지합성서버는 생성된 합성이미지를 사용자 단말로 전송한다. 이미지합성서버의 통신모듈은 3차원 가상객체를 포함하는 합성이미지를 사용자 단말로 전송한다. 사용자 단말은 3 차원 가상객체를 포함하는 합성이미지를 디스플레이 모듈(미도시)을 통하여 출력하여 사용자에게 제공한다. 상술한 본 발명의 실시예들에 따른 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방 법은 배경이미지의 깊이 정보에 기초하여 배경이미지의 영역을 구별하고, 구별된 영역 중 가상객체입력 합성 요 청에 기초하여 깊이유지영역을 결정한다. 합성이미지 생성 방법은 깊이유지영역 이외의 영역 내의 배경이미지를 사용자의 선호도에 맞는 배경으로 변경하고, 변경된 합성배경이미지에 가상객체를 합성함으로써, 3차원 가상객 체를 포함하는 새로운 이미지를 쉽게 생성할 수 있다. 또한, 본 발명에 따른 합성이미지 생성 방법은 배경이미지의 깊이를 고려하여 깊이가 상이한 영역으로 구별하고, 구별된 깊이영역 중 3차원 가상객체가 합성되는 기준가상평면을 포함하는 깊이영역을 깊이유지영역으 로 결정하고, 깊이유지영역 이외의 영역 내의 배경이미지를 사용자가 좋아하는 그림체의 이미지로 변경함으로써, 3차원 가상객체가 변형된 배경이미지와 높은 일체감을 갖는 자연스런 합성이미지를 생성할 수 있 다. 추가적으로, 본 발명에 따른 합성이미지 생성 방법은 사용자의 선호도를 획득하고, 획득한 선호도에 기초하여 사용자의 선호도에 맞는 이미지로 배경이미지를 변경함으로써, 사용자의 선호에 적합한 이미지를 배경으로 하면 서 사용자가 입력한 가상객체를 포함하는 합성이미지를 생성할 수 있다. 한편 상술한 본 발명의 실시예들은 컴퓨터에서 실행될 수 있는 프로그램으로 작성가능하고, 컴퓨터로 읽을 수 있는 기록매체를 이용하여 상기 프로그램을 동작시키는 범용 디지털 컴퓨터에서 구현될 수 있다. 또한, 상술한 본 발명의 실시예에서 사용된 데이터의 구조는 컴퓨터로 읽을 수 있는 기록매체에 여러 수단을 통하여 기록될 수 있다. 상기 컴퓨터로 읽을 수 있는 기록매체는 마그네틱 저장매체 (예를 들면 롬 플로피 디스크 하드디스크 등), 광학적 판독 매체(예를 들면, 시디롬, 디브이디 등)같은 저장매체를 포함한다. 컴퓨터 판독 가능한 기록매 체에는 본 발명의 실시예들에 따른 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법을 수행하는 프로그 램을 기록된다. 이제까지 본 발명에 대하여 바람직한 실시예들을 중심으로 살펴보았다. 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자는 본 발명이 본 발명의 본질적인 특성에서 벗어나지 않는 범위에서 변형된 형태로 구현될 수 있 음을 이해할 수 있을 것이다. 그러므로 개시된 실시예들은 한정적인 관점이 아니라 설명적인 관점에서 고려되어 야 한다. 본 발명의 범위는 전술한 설명이 아니라 특허청구범위에 나타나 있으며, 그와 동등한 범위 내에 있는 모든 차이점은 본 발명에 포함된 것으로해석되어야 할 것이다."}
{"patent_id": "10-2023-0077382", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 이미지 합성 시스템을 도시한 도면이다. 도 2는 도 1에 도시된 이미지합성서버의 구성도이다. 도 3은 본 발명의 실시예에 따른 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지를 생성하는 방법의 흐름도이다. 도 4는 본 발명의 일 실시예에 따른 3차원 가상객체가 합성된 합성이미지를 도시한 예시이다. 도 5는 도 3에 도시된 이미지 깊이 정보에 기초한 3차원 가상객체를 포함하는 합성이미지 생성 방법에서 기준가 상평면을 결정하는 단계의 상세흐름도이다. 도 6은 기준가상평면을 결정하는 과정을 표시한 예시화면을 도시한 도면이다. 도 7은 도 6에 도시된 예시화면에 대한 깊이맵을 도시한 도면이다. 도 8은 본 발명의 실시예에 따라 생성된 합성이미지의 예시를 도시한 도면이다."}
