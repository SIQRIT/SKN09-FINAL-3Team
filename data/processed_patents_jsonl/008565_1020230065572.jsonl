{"patent_id": "10-2023-0065572", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0168495", "출원번호": "10-2023-0065572", "발명의 명칭": "차량의 경로 추종 시스템", "출원인": "재단법인대구경북과학기술원", "발명자": "임용섭"}}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "차량의 2차원 좌표 정보( ) 및 상기 차량의 전방에 놓인 장애물의 2차원 좌표 정보( )를 기반으로목표 회전 값() 및 목표 횡방향 거동 값()을 산출하는 상기 차량의 주행 경로를 설정하는 경로 지령 생성부;상기 차량에 장착되어 상기 차량의 회전 정보를 센싱하는 센서부;상기 센서부로부터 전달된 상기 회전 정보를 학습된 인공신경망 기반 추론 모델에 입력하여 상기 차량의 휠의종방향 힘()과 상기 차량의 횡방향 속도()를 산출하는 자세 정보 추정부;상기 경로 지령 생성부로부터 상기 목표 회전 값() 및 상기 목표 횡방향 거동 값()을 전달받고 상기 자세 정보 추정부로부터 상기 차량의 휠의 종방향 힘()과 상기 차량의 횡방향 속도()를 전달받아 모델 예측 제어기(MPC;Model Predict Control)를 통해 상기 차량의 휠의 요구 조향각()을 산출하는 자세 제어부;상기 요구 조향각()을 기반으로 상기 차량의 조향각을 제어하는 조향각 제어부;를 포함하는 차량의 경로 추종시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 경로 지령 생성부는,상기 차량의 2차원 좌표 정보( )에 기초하여 3D Artificial Potential Field(APF)를 생성하고, 상기 장애물의 2차원 좌표 정보( )를 기반으로 차량의 이동 방향에 관한 정보를 생성하는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,상기 회전 정보는,차량의 롤 레이트(), 피치 레이트(), 요 레이트(), 롤 앵글() 및 요 앵글()을 포함하는 차량의 경로 추종시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서,상기 자세 정보 추정부는,상기 추론 모델은 LSTM(Long Short Term Memory model) 기반의 인공신경망 모듈로 제공되며,상기 회전 정보를 전처리하는 전처리부; 및전처리된 상기 회전 정보를 학습하는 학습 수행부를 포함하는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서,상기 모델 예측 제어기는,공개특허 10-2024-0168495-3-조향각 제어부로 최적화된 상기 요구 조향각()을 전달하는 최적화부;상기 최적화부로 제한 조건을 전달하는 제한 조건 설정부;상기 경로 지령 생성부로부터 상기 목표 회전 값() 및 상기 목표 횡방향 거동 값()을 전달받아 목표 값 행렬을 생성하는 목표 함수 설정부;상기 자세 정보 추정부로부터 상기 차량의 휠의 종방향 힘()과 상기 차량의 횡방향 속도()를 전달받아 차량의동역학에 따른 시스템 행렬을 생성하는 차량의 동역학 산출부;를 포함하고,상기 최적화부는,상기 제한 조건 하에서 상기 목표 값 행렬 그리고 상기 시스템 행렬을 통합하여 상기 요구 조향각()을 산출및 최적화하는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 차량의 2촤원 좌표 정보( ) 및 상기 차량의 전방에 놓인 장애물의 2차원 좌표 정보( )는 GPS를 통해 획득되는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서,상기 센서부는 IMU(Inertial Measurement Unit) 센서를 포함하는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 자세 정보 추정부는,상기 차량의 휠의 각각의 종방향 힘( )과 상기 차량의 횡방향 속도()를 산출하여 상기 자세 제어부로전달하는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항 내지 제8항 중 어느 한 항에 있어서,상기 차량은,각각의 휠이 독립적으로 구동 가능한 인휠 시스템이 제공되는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 요구 조향각()은,상기 휠 각각의 요구 조향각(,…)으로 제공되는 차량의 경로 추종 시스템."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 차량의 경로 추종 시스템은, 차량의 2차원 좌표 정보( ) 및 차량의 전방에 놓인 장애물의 2차원 좌표 정보( )를 기반으로 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 산출하는 차량의 주행 경로를 설정하는 경로 지령 생성부; 차량에 장착되어 차량의 회전 정보를 센싱하는 센서부; 센서부 로부터 전달된 회전 정보를 학습된 인공신경망 기반 추론 모델에 입력하여 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 산출하는 자세 정보 추정부; 경로 지령 생성부로부터 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 전달받고 자세 정보 추정부로부터 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 전달받아 모델 예측 제어기(MPC;Model Predict Control)를 통해 차량의 휠의 요구 조향각( )을 산출하는 자세 제어부; 요구 조 향각( )을 기반으로 차량의 조향각을 제어하는 조향각 제어부;를 포함할 수 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 차량의 회전 정보를 학습된 인공신경망 기반의 추론 모델에 입력하여 차량의 휠의 종방향 힘과 차량 의 횡방향 속도를 산출하고, 산출된 차량의 휠의 종방향 힘과 차량의 횡방향 속도를 기반으로 MPC를 통해 차량의 휠의 요구 조향각을 산출하는 차량의 경로 추종 시스템에 관한 것이다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "차량을 운행할 시에, 주행중 갑자기 전방차량이 급정거를 하거나, 적재물이 도로에 떨어져 피하지 못함에 따라 심각한 차량 사고가 발생하는 경우가 많다. 이와 같은 사고를 방지하기 위해, 차량에는 경로 추종 시스템이 갖 춰진다. 특히, 자율 주행 차량에 적용되는 경로 추종 시스템은, 차량과 차량 주변의 장애물의 위치 및 속도 그리고 IMU 센서를 얻은 화전 정보 등을 기반으로 차량의 조향각을 제어한다. 다만, 차량의 조향각을 정확하게 산출해내는 것이 어렵다. 특히, 차량의 횡방향 거동을 예측하기 어렵다. 이에, 차량의 횡방향 거동을 기반으로 차량의 조향각을 제어하는 것이 어려운 문제가 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 일 목적은, 차량의 횡방향 거동을 분석의 정확도를 높일 수 있는 차량의 경로 추종 시스템을 제공하 기 위한 것이다. 또한, 본 발명의 일 목적은, 차량의 경로를 추종 시 차량의 무게, 차량의 속도, 노면의 환경 등이 변하더라도 추종 성능이 우수한 차량의 경로 추종 시스템을 제공하기 위한 것이다. 본 발명의 과제는 이상에서 언급된 과제들로 제한되지 않으며, 언급되지 않은 다른 과제들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상술한 바와 같은 과제를 해결하기 위하여, 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템은, 차량의 2 차원 좌표 정보( ) 및 차량의 전방에 놓인 장애물의 2차원 좌표 정보( )를 기반으로 목표 회전 값 ( ) 및 목표 횡방향 거동 값( )을 산출하는 차량의 주행 경로를 설정하는 경로 지령 생성부; 차량에 장착되어 차량의 회전 정보를 센싱하는 센서부; 센서부로부터 전달된 회전 정보를 학습된 인공신경망 기반 추론 모델에 입력하여 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 산출하는 자세 정보 추정부; 경로 지령 생성부 로부터 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 전달받고 자세 정보 추정부로부터 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 전달받아 모델 예측 제어기(MPC;Model Predict Control)를 통해 차량의 휠의 요구 조향각( )을 산출하는 자세 제어부; 요구 조향각( )을 기반으로 차량의 조향각을 제어하는 조향각 제어 부;를 포함할 수 있다. 일 실시예에서, 경로 지령 생성부는, 차량의 2차원 좌표 정보( )에 기초하여 3D Artificial Potential Field(APF)를 생성하고, 장애물의 2차원 좌표 정보( )를 기반으로 차량의 이동 방향에 관한 정보를 생성 할 수 있다. 일 실시예에서, 회전 정보는, 차량의 롤 레이트( ), 피치 레이트( ), 요 레이트( ), 롤 앵글( ) 및 요 앵글( ) 을 포함할 수 있다. 일 실시예에서, 자세 정보 추정부는, 추론 모델은 LSTM(Long Short Term Memory model) 기반의 인공신경망 모 듈로 제공되며, 회전 정보를 전처리하는 전처리부; 및 전처리된 회전 정보를 학습하는 학습 수행부를 포함할 수 있다. 일 실시예에서, 모델 예측 제어기는, 조향각 제어부로 최적화된 요구 조향각( )을 전달하는 최적화부; 최적화부 로 제한 조건을 전달하는 제한 조건 설정부; 경로 지령 생성부로부터 목표 회전 값( ) 및 목표 횡방향 거동 값 ( )을 전달받아 목표 값 행렬을 생성하는 목표 함수 설정부; 자세 정보 추정부로부터 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 전달받아 차량의 동역학에 따른 시스템 행렬을 생성하는 차량의 동역학 산출 부;를 포함하고, 최적화부는, 제한 조건 하에서 목표 값 행렬 그리고 시스템 행렬을 통합하여 요구 조향각( ) 을 산출 및 최적화할 수 있다. 일 실시예에서, 차량의 2차원 좌표 정보( ) 및 차량의 전방에 놓인 장애물의 2차원 좌표 정보( ) 는 GPS를 통해 획득될 수 있다. 일 실시예에서, 센서부는 IMU(Inertial Measurement Unit) 센서를 포함할 수 있다. 일 실시예에서, 자세 정보 추정부는, 차량의 휠의 각각의 종방향 힘( )과 차량의 횡방향 속도( )를 산출 하여 자세 제어부로 전달할 수 있다. 일 실시예에서, 차량은, 각각의 휠이 독립적으로 구동 가능한 인휠 시스템이 제공될 수 있다. 일 실시예에서, 요구 조향각( )은, 휠 각각의 요구 조향각( , … )으로 제공될 수 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 일 실시예에 따르면, 차량의 횡방향 거동을 분석의 정확도를 높일 수 있는 이점이 있다. 본 발명의 일 실시예에 따르면, 차량의 경로를 추종 시 차량의 무게, 차량의 속도, 노면의 환경 등이 변하더라 도 추종 성능이 우수한 이점이 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과가 상술한 효과들로 한정되는 것은 아니며, 언급되지 않은 효과들은 본 명세서 및 첨부된 도면으"}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 3, "content": "로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 명확히 이해될 수 있을 것이다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 명세서에 기재된 실시 형태는 여러 가지 다른 형태로 변형될 수 있으며, 일 구현예에 따른 기술이 이하 설명"}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "하는 실시형태로 한정되는 것은 아니다. 또한 일 구현예의 실시 형태는 당해 기술분야에서 평균적인 지식을 가 진 자에게 본 개시를 더욱 완전하게 설명하기 위해서 제공되는 것이다. 또한 명세서 및 첨부된 특허청구범위에서 사용되는 단수 형태는 문맥에서 특별한 지시가 없는 한 복수 형태도 포함하는 것으로 의도할 수 있다. 또한, 본 명세서에서 사용되는 수치 범위는 하한치와 상한치와 그 범위 내에서의 모든 값, 정의되는 범위의 형 태와 폭에서 논리적으로 유도되는 증분, 이중 한정된 모든 값 및 서로 다른 형태로 한정된 수치 범위의 상한 및 하한의 모든 가능한 조합을 포함한다. 본 발명의 명세서에서 특별한 정의가 없는 한 실험 오차 또는 값의 반올 림으로 인해 발생할 가능성이 있는 수치범위 외의 값 역시 정의된 수치범위에 포함된다. 나아가, 명세서 전체에서 어떤 구성요소를 \"포함\"한다는 것은 특별히 반대되는 기재가 없는 한 다른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있다는 것을 의미한다. 도 1은 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 나타낸다. 도 1을 참조하면, 본 발명의 차량의 경로 추종 시스템은, 경로 지령 생성부, 센서부, 자세 정보 추정부, 자세 제어부 그리고 조향각 제어부를 포함한다. 일 예에서, 본 발명의 차량의 경로 추종 시스템은 자율 주행 차량에 적용될 수 있다.일 예에서, 경로 지령 생성부는, 차량의 2차원 좌표 정보( ) 및 차량의 전방에 놓인 장애물의 2차 원 좌표 정보( )를 기반으로 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 산출하는 차량의 주행 경로를 설정한다. 일 예에서, 차량의 2촤원 좌표 정보( ) 및 차량의 전방에 놓인 장애물의 2차원 좌표 정보( )는 GPS를 통해 획득된다. 이와 달리, 차량의 2차원 좌표 정보( ) 및 차량의 전방에 놓인 장애물의 2차원 좌 표 정보( )는 물체의 위치를 2차원 좌표로 얻을 수 있는 다른 수단에 의해 획득될 수 있다. 일 예에서, 경로 지령 생성부는, 3D Artificial Potential Field(이하, APF)를 포함할 수 있다. 일반적으 로, APF는 로봇의 경로 계획을 위한 반응적 방법이다. APF는 위치 관련 포텐셜 기능을 사용하여 장애물 회피를 달성하고 로봇이 변화하는 환경에 유연하게 대처하도록 한다. 본 발명에서, 경로 지령 생성부는, 로봇 분 야에서 연구되었던 APF를 차량 플랫폼에 적합하도록 포텐셜 함수(Potential Function)를 구성하고 충돌 회피를 위한 경로 계획(Path planning)을 수행할 수 있다. 예컨대, 경로 지령 생성부는, 차량의 2촤원 좌표 정보( )를 기반으로, 차량의 위치에 기초하여 3D 포텐셜 필드를 생성한다. 이후, 포텐셜 필드 및 장애물의 2차원 좌표 정보( )를 기반으로 차량의 이동 방 향에 관한 정보를 생성하고 이에 따라 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 산출하는 차량의 주행 경 로를 설정한다. 센서부는, 차량에 장착되어 차량의 회전 정보를 센싱한다. 일 예에서, 센서부는, IMU(Inertial Measurement Unit) 센서를 포함할 수 있다. IMU 센서는 일종의 관성 측정 장치로, 가속도계, 자이로스코프, 자 력계를 통해 속도, 방향, 자성을 측정하여 방향, 적정한 가속도, 위치를 구할 수 있다. 일 예에서, 센서부(10 5)가 획득하는 회전 정보는, 차량의 롤 레이트( ), 피치 레이트( ), 요 레이트( ), 롤 앵글( ) 및 요 앵글( )을 포함한다. 자세 정보 추정부는, 센서부로부터 전달된 회전 정보를 학습된 인공신경망 기반 추론 모델에 입력하 여 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 산출한다. 인공 신경망 모듈의 입력은, 차량의 롤 레 이트( ), 피치 레이트( ), 요 레이트( ), 롤 앵글( ) 및 요 앵글( )이고, 출력은, 휠의 종방향 힘( )과 차량의 횡방향 속도( )이다. 자세 정보 추정부는, 후술하는 모델 예측 제어기 내의 차량의 동역학 산출부로 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 전달한다. 휠의 종방향 힘( )과 차량의 횡방향 속도( )는 차량의 동역학 산출부에서 사용되는데, 이는 실측이 매우 어렵다. 이에, 본 발명에서는 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 인공신경망 기반 추론 모델을 이 용하여 산출해낸다. 일 예에서, 추론 모델은 LSTM(Long Short Term Memory model) 기반의 인공신경망 모듈일 수 있다. 도 2는 본 발명의 일 실시예에 따른 LSTM 기반의 인공신경망 모듈의 모습을 나타낸다. LSTM은 기존의 인공신경 망 모듈이 데이터와 결과 간의 장기적인 인과 관계를 학습하기 어렵다는 문제를 극복한 것이다. 도 2를 참조하면, LSTM의 각 레이어의 내부는 3개의 게이트(Forget gate, Input gate, Output gate), 1개의 기 억셀(Memory cell)과 cell state로 구성된다. cell state를 통해 이전 레이어(layer)의 정보가 다음 레이어 (layer)로 전달된다. 각각의 게이트 내부의 비선형 활성화 함수가 데이터를 얼마나 삭제할지 또는 유지할지를 조절하면서 데이터를 흘려준다. cell state는 컨베이어 벨트와 같아서, 작은 linear interaction만을 적용시키면서 전체 체인을 계속 구동시킨 다. cell state는 정보가 전혀 바뀌지 않고 그대로 흐르게 할 수 있다. LSTM은 cell state에 뭔가를 더하거나 없앨 수 있는데, 이는 3개의 게이트 구조에 의해서 이루어진다. 게이트는 정보가 전달될 수 있는 방법으로, sigmoid layer와 pointwise 곱셈으로 이루어져 있다. Sigmoid layer는 0과 1사이의 숫자를 내보내는데, 이 값은 각 컴포넌트가 얼마나 정보를 전달해야 하는지에 대한 척도를 나타낸다. 그 값이 0이라면 \"아무 것도 넘기지 말라\"가 되고, 값이 1이라면 \"모든 것을 넘겨라\"가 된다. LSTM의 첫 단계로는 cell state로부터 어떤 정보를 버릴 것인지를 정하는 것으로, sigmoid layer에 의해 결정된다. 그래서 이 단계 의 게이트를 \"forget gate layer\"라고 부른다. 이 단계에서는 과 를 받아서 를 받아서 0과 1 사이의 값을 에 보내준다. 그 값이 1이면 모든 정보를 보존하고, 0이면 버린다. LSTM은 앞으로 들어오는 새로운 정보 중 어떤 것을 cell state에 저장할 것인지를 정한다. 먼저, Input gate라 고 불리는 sigmoid layer가 어떤 값을 업데이트할 지 정한다. 그 다음에 tanh layer가 새로운 후보 값들인 라 는 vector를 만들고, 이를 cell state에 더할 준비를 한다. 이렇게 두 단계에서 나온 정보를 합쳐서 state를 업 데이트할 재료를 만들게 된다. 만약, 기존의 데이터를 잊어버리기로 하고 새로운 정보를 cell state에 더하고 싶을 경우, 과거 state인 를 업데이트 해서 새로운 cell state인 를 만들 것이다. 상술한 바와 같이 이미 이전 단계에서 어떤 값을 얼마나 업데이트해야 할 지 다 정해 놨으므로 여기서는 그 일을 실천만 하면 된다. 우선 이전 state에 를 곱해서 가장 첫 단계에서 잊어버리기로 정했던 것들을 잊어버린다. 그리고나서 * 를 더한다. 이 값은 두 번째 단계에서 업데이트하기로 한 값을 얼마나 업데이트할 지 정한 만큼 scale한 값이 된다. 이 단계는 이전 정보를 없애고 새로운 정보를 더하게 되는데, 이는 지난 단계들에서 미리 정했던 것들을 실천하는 단계이다. 마지막으로 무엇을 output으로 내보낼 지 정하는데, output은 cell state를 바탕으로 필터된 값이다. 가장 먼저, sigmoid layer에 input 데이터를 입력하여 cell state의 어느 부분을 output으로 내보낼 지를 정한다. 그리고 나서 cell state를 tanh layer에 입력하여 -1과 1 사이의 값을 받은 뒤에 방금 전에 계산한 sigmoid 게 이트의 output과 곱해준다. 그렇게 하면 output으로 보내고자 하는 부분만 내보낼 수 있게 된다. 본 발명의 자세 정보 추정부는, 데이터 전처리부를 통해 센서부로부터 전달된 회전 정보(차량의 롤 레이트( ), 피치 레이트( ), 요 레이트( ), 롤 앵글( ) 및 요 앵글( )을 수집 및 전처리한다. 그리고, 학습 수 행부를 통해 전처리 된 회전 정보 데이터를 LSTM 모듈을 통해 학습시킨다. 이후, 차량의 경로 추종 시스템을 이 용할 시에, 센서부로부터 회전 정보가 전달되면, LSTM 모듈을 통해 휠의 종방향 힘( )과 차량의 횡방향 속 도( )를 획득한다. 일 예에서, 자세 정보 추정부는, 차량의 휠의 각각의 종방향 힘( )과 차량의 횡방향 속도( )를 산 출하여 자세 제어부로 전달한다. 일 예에서, 차량은 4륜으로 제공될 수 있다. 예컨대, 차량은 전륜과 후륜 이 각각 2개인 차량으로 제공될 수 있다. 이에, 차량의 휠의 종방향 힘은, 좌측 전륜의 종방향 힘( ), 우측 전 륜의 종방향 힘( ), 좌측 후륜의 종방향 힘( ), 우측 후륜의 종방향 힘( )으로 나타낼 수 있다. 자세 정보 추정부는 각각의 휠의 종방향의 힘을 구하도록 변수가 설정될 수 있다. 일 예에서, 차량은, 각각의 휠이 독립적으로 구동 가능한 인휠 시스템이 제공될 수 있다. 차량은, 각 휠이 독립 적으로 구동 및 조향된다. 이 경우, 각각의 휠의 종방향의 힘을 구하고, 후술하는 요구 조향각 역시 각 휠 별로 산출될 수 있다. 이에 따라, 차량의 각 휠 별로 요구 조향각을 얻고 이에 따라 차량의 거동이 제어될 수 있다. 자세 제어부는, 경로 지령 생성부로부터 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 전달받고 자 세 정보 추정부로부터 차량의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 전달받아 모델 예측 제어기 (MPC;Model Predict Control)를 통해 차량의 휠의 요구 조향각( )을 산출한다. MPC는 Optimal Control의 한 방법으로, 로보틱스의 path planning및 제어에 많이 활용되고 있다. MPC를 사용하 면 로봇이나 차량의 속도 및 가속력과 같은 dynamics와 주변 환경 조건을 function으로 넣어 상황에 맞는 최적 화된 제어 명령을 생성하여 이를 통해 안정적으로 로봇 이나 차량의 자율항법을 가능하게 한다. MPC는 k-1일때의 상태변수를 가지고 k부터 몇 수 앞까지의 제어 명령을 미리 계획 해놓고 제어 명령을 출력 한 후에 현재(k step)의 상태변수를 피드백 받는다. 이때 제어명령의 출력과 그에 따른 응답을 비교 및 평가하고이에 따라 objective function을 업데이트해서 다시 k+1 부터 k+n 까지의 제어입력을 계산하는 방식이다. 즉,MPC는 계획과 평가를 반복하여 미래의 출력을 알아내는 것이다. 도 3은 본 발명의 일 실시예에 따른, 자세 제어부의 모습을 나타낸다. 도 3을 참조하면, 일 예에서, 모델 예측 제어기는, 최적화부, 제한 조건 설정부, 목표 함수 설정부, 차량의 동역학 산출부를 포함한다. MPC는, 원하는 (예측하고 싶은 미래 출력 수(Prediction horizon))개의 출력 model이 있다면, 출 력을 얻기 위한 (예측하고 싶은 미래 제어 입력 수 (Control horizon))개의 제어 입력을 구하는 과정을 포함 한다. 이에 대해, 각 구성은 아래와 같은 역할을 갖는다. MPC는 일정한 제한을 가지고 최적화된 제어 입력을 생성한다. 제한 조건 설정부는, 최적화부로 제한 조건을 전달한다. input은 다음과 같이 개의 입력이 된다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "또한, 예측할 output은 아래와 같다. y(k), y(k+1), y(k+2), …y(K+ ) 제한 조건 설정부에서는, 자세 제어부에서 요구 조향각( )을 산출할 시의 조건이 설정된다. 일예에서, 제한 조건 설정부에서는, input에 대해 아래와 같은 조건을 부여할 수 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "여기서, 는 input 각도이고, 는 input 각도의 변화량으로 각각 사용자가 원하는 범위 내의 각도가 입력될 수 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "또한, 제한 조건 설정부에는 센서부, GPS 등으로부터 얻은 요 앵글 값이 입력될 수 있다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 6, "content": "목표 함수 설정부는, 경로 지령 생성부로부터 목표 회전 값( ) 및 목표 횡방향 거동 값( )을 전달받 아 objective function을 통해 목표 값 행렬을 생성한다. 목표 함수 설정부에서 생성하는 목표 값 행렬 이 란, MPC를 시작하기 위한 기본 모델인 discrete-time augmented state-space model을 matrix-form으로 정리한 값이다. 일 예에서, 목표 함수 설정부에서 산출한 state-space model을 matrix-form은 아래와 같다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 7, "content": "F = , H = , ="}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 8, "content": "(여기서, x: state, :augmented state, r: reference, : vectorized matrix of r, Y: vectorized matrix of y, : rate of change of input, R: control increment weight matrix, Q: output error weight) A는 시스템행렬, B는 입력행렬, C는 출력행렬로 구성된다. object function의 예측 출력 Y에 F와 H 행렬은 A,B,C의 행렬의 계산으로 얻게 된다. 후술하는 차량의 동역학 산출부에서 시스템 dynamics의 모델링이 이 루어지고, 이와 같은 모델링에 따른 값은 출력 Y를 계산할 때 관여된다. MPC에서 제일 중요한것은 현재 스텝에서의 상태변수를 가지고 다음 스텝에서의 '미래 출력'을 알아내는 것이기 때문에 시스템 dynamics의 모델링이 필요하다. 차량의 동역학 산출부는 자세 정보 추정부로부터 차량 의 휠의 종방향 힘( )과 차량의 횡방향 속도( )를 전달받아 차량의 동역학에 따른 시스템 행렬을 생성한다. 도 4는 차량의 차량의 자유물체도(free body diagram)를 나타낸다. 도 4를 참조하면, 일 예에서, 차량은 전륜과 후륜이 각각 2개인 4륜의 인휠 시스템을 갖춘 차량이고, 차량의 동 역학 산출부는 자세 정보 추정부로부터, 좌측 전륜의 종방향 힘( ), 우측 전륜의 종방향 힘( ), 좌측 후륜의 종방향 힘( ), 우측 후륜의 종방향 힘( ) 그리고 차량의 횡방향 속도( )를 전달받는다. 이를 전달받아, 차량의 동역학 산출부는 아래의 수식을 통해 출력 Y를 계산할 때에 시스템 dynamics의 모델링 값을 제공한다."}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 9, "content": ")"}
{"patent_id": "10-2023-0065572", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 10, "content": "여기서, : sprung mass, : moment of inertia(yawing) w: vehicle width, : vehicle length(forward), : vehicle length(backward), : Front tire cornering stiffness, : rear tire cornering stiffness α:side slip angle of each tire 를 제외한 파라미터는 획득 가능하기 때문에 를 LSTM을 통해 추정하여 Side slip angle이 계산된다. 따라서 LSTM을 사용하여 횡방향 속도를 추정함으로써 횡방향 타어이 힘을 계산할 수 있다. 최적화부는, 모델 예측 제어기의 최종단에 제공되어 조향각 제어부로 최적화된 요구 조향각( )을 전 달한다. 최적화부는, 제한 조건 하에서 목표 값 행렬 그리고 시스템 행렬을 통합하여 요구 조향각( )을 산출하고 이를 최적화한다. 제한 조건 설정부에서 정한 제한은 존재하지만 계산된 각도에 의해 자유롭게 제어된다. 조향각 제어부는, 요구 조향각( )을 기반으로 차량의 조향각을 제어한다. 일 예에서, 차량은, 각각의 휠이 독립적으로 구동 가능한 인휠 시스템이 제공될 수 있다. 차량은, 각 휠이 독립적으로 구동 및 조향된다. 이 경 우, 요구 조향각( )은, 휠 각각의 요구 조향각( , … )으로 제공될 수 있다. 예컨대, 차량은 전륜과 후륜이 각각 2개인 4륜의 인휠 시스템을 갖춘 차량이고 휠 각각의 요구 조향각은, 좌측 전륜의 요구 조향각( , 우측 전륜의 요구 조향각( , 좌측 후륜의 요구 조향각( , 우측 후륜의 요구 조향각( 으로 제공될 수 있다. 이 와 달리, 차량은 이륜구동으로 제공될 수 있다. 이 경우 , 또는, , 의 값이 0이된다. 도 5 내지 도 8은, 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 평가한 그래프를 나타낸다. 시스템 평가 목적은 장애물 회피 기동 성능과 낮은 마찰계수 도로에서 얼마나 빠르게 안정한 상태로 복원하는 능력을 검증하기 위한 것이다. 도 5는, 4WIS(4 wheel independent steering; 4륜 독립 조향)인 경우와 FWS(Front wheel steering; 전방 조 향)인 경우를 각각 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 통해 평가한 그래프를 나타낸다. 도 5의 (a)는 차량의 trajectory를 나타낸 그래프이고, 도 5의 (b)는 차량의 안정성을 확인할 수 있는 yaw rate 를 나타낸 그래프이고, 도 5의 (c)는 lateral acceleration를 나타낸 그래프이다. 도 5의 (d)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고, 도 5의 (e)는 추정된 lateral velocity와 실제의 lateral velocity를 나타낸다. 차량의 경로에서 friction coefficient가 급격하게 변하는 경우, yaw rate와 lateral acceleration은 각각 도 5의 (b) 내지 (c)에 도시된 바와 같이 급격하게 변한다. 또한, 도 5의 (d) 내지 (e)에 도시된 바와 같이 longitudinal tire force 와 lateral velocity 역시 급격하게 변한다. 그러나, 도 5의 (d) 내지 (e)에 도시된 바와 같이 본 발명의 차량의 경로 추종 시스템에 따라 예측한 longitudinal tire force 와 lateral velocity 값이 실제 값과 유사하다는 것을 확인할 수 있다. 도 6 내지 도 7은, 노이즈를 포함하는 경우를 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 통해 평 가한 그래프를 나타낸다. 실제 측정 데이터는 노이즈를 포함한다. 따라서 시뮬레이션 진행 시 측정데이터에 가우시안 노이즈를 추가하여 제어기와 추정기가 노이즈에 강건한지 검증하였다. Noise case1은 분산 0.2를 갖는 노이즈를 포함한 롤 가속도 데이터, Noise case2는 case1보다 noise 분산값이 더 큰 0.4를 갖는 롤 가속도 데이터이다. 도 6은 롤 가속도의 측정값을 보여준다. 측정값이란 실제환경에서는 센서를 이용하여 측정하는 값이지만 도 6은 시뮬레이션을 통해 얻은 값으로 CarSim 에서 제공하는 데이터를 사용하였다. (a)와 (c)에 주황색으로 표시된 No noise는 noise가 없는 신호이며 동일한 롤 가속도 데이터를 보여준다. (b)와 (d)는 각각 (a)와 (c)에 적용된 분산값이 다른 노이즈를 포함시켜 센서를 사용하는 실제환경과 비슷하게 가우시안 노이즈를 추가한 것을 나타내는 그래프이다. (b)와 (d)의 X축은 롤 가속도를 나타내고 Y축은 Roll acceleration PD(Probability Density)를 나타낸다. (d)의 경우 노이즈의 분산값 이 0.4로써 (b)의 0.2보다 크기 때문에 더 많은 노이즈를 포함한 case이다. (a)와 (c)를 살펴보면, 본 발명에 따르면, 노이즈를 포함함에도 불구하고 노이즈가 없는 경우와 롤가속도의 시 간 흐름의 따른 변화가 유사하다는 것을 확인할 수 있다. 도 7의 (a)는 도 6의 시뮬레이션에 따른 차량의 경로를 나타낸 그래프를 나타낸다. 도 7의 (a)를 참조하면, 본 발명에 따르면, 노이즈를 포함함에도 불구하고 reference 값인 Ground truth와 큰 차이가 없는 trajectory 결과 를 볼 수 있다(Detail A 참조). 도 7의 (b), (c)의 결과에서도 본 발명에 따르면, 노이즈를 포함함에도 불구하 고 추정데이터의 성능이 좋은 결과를 볼 수 있다. 이는, 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템 이 노이즈에 강건함을 보여주는 결과이다. 도 8 내지 도 9는, 차량의 무게가 다른 경우를 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 통해 평 가한 그래프를 나타낸다. 차량에 탑승 인원에 따라 차량의 무게가 변한다. 도 8 내지 도 9는 질량변화 상황을 고려한 시뮬레이션 결과를 보여준다. 도 8은 차량의 무게가 1165kg으로 제공된 경우이고, 도 9는 차량의 무게가 1581kg으로 제공된 경우이 다. 해당 질량의 선정 기준은 basic condition의 차량 무게를 1375kg으로 정하고, 이의 + -15%의 질량으로 선정 했다. 도 8의 (a)는 질량 1165kg(-15%)에서의 차량의 trajectory를 나타내고, 도 8의 (b)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고 도 8의 (c)는 추정된 lateral velocity와 실제의 lateral velocity를 나타낸다. 또한, 도 9의 (a)는 질량 1581kg(+15%)에서의 차량의 trajectory를 나타내고, 도 9의 (b)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고 도 9의 (c)는 추 정된 lateral velocity와 실제의 lateral velocity를 나타낸다. 도 8 내지 도 9를 참조하면, 질량의 변화에도 tracking 성능과 추정성능의 결과가 매우 좋은 것을 확인한 것으 로 보아 본 발명에 따른 차량의 경로 추종 시스템은 질량의 변화에 강건함을 알 수 있다. 도 10 내지 도 11은, 차량의 횡방향 코너링 강성이 다른 경우를 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 통해 평가한 그래프를 나타낸다. 차량의 횡방향 코너링 강성은 선형화된 값이므로 불확실성이 큰 파라미터 중 하나이다. 코너링 강성의 선정은 basic condition의 코너링 강성의 +-15%의 값으로 선정했다. Cf는 전방 타이어의 코너링 강성, Cr은 후방 타이 어의 코너링 강성이다. 도 10 내지 도 11은 황방향 코너링 강성이 다른 상황을 고려한 시뮬레이션 결과를 보여준다. 도 10은 코너링 강성이 -15%인 경우로, Cf 38219 N/rad, Cr 26726 N/rad에서 시뮬레이션한 결과이고, 도 11은 코너링 강성이+15%인 경우로, Cf 53170 N/rad, Cr 36158 N/rad에서 시뮬레이션한 결과이다. 도 10의 (a)는 Cf 310219 N/rad, Cr 26726 N/rad에서의 차량의 trajectory를 나타내고, 도 10의 (b)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고 도 10의 (c)는 추정된 lateral velocity와 실제의 lateral velocity를 나타낸다. 또한, 도 11의 (a)는 Cf 53170 N/rad, Cr 36158 N/rad에서의 차량의 trajectory를 나타내고, 도 11의 (b)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고 도 11의 (c)는 추정된 lateral velocity와 실제의 lateral velocity를 나타낸다. 도 10 내지 도 11을 참조하면, 타이어 강성의 변화에도 tracking 성능과 추정성능의 결과가 매우 좋은 것을 확 인한 것으로 보아 본 발명에 따른 차량의 경로 추종 시스템은 타이어 강성의 변화에 강건함을 알 수 있다. 도 12 내지 도 13은 차량의 속도와 마찰 계수가 다른 경우를 본 발명의 일 실시예에 따른 차량의 경로 추종 시 스템을 통해 평가한 그래프를 나타낸다. 딥러닝 모델의 효과적인 사용을 위해서는 학습에 사용된 환경 이외에의 상황에서도 추정성능이 보장되어야 한다. 따라서 extrapolation ability를 평가하기 위해서 학습상황 이외의 상황에서 차량의 경로 추종 시스템을 평가하였다. 도 12는, 자동차 속도 90km/h, 마찰계수 0.8의 노면에서의 시뮬레이션 결과를 보여주고, 도 13은, 자동차 속도 100km/h, 마찰계수 0.5의 노면에서의 시뮬레이션 결과를 보여준다. 도 12의 (a)는 자동차 속도 90km/h, 마찰계수 0.8의 노면에서의 차량의 trajectory를 나타내고, 도 12의 (b)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고 도 12의 (c)는 추정된 lateral velocity와 실제의 lateral velocity를 나타낸다. 또한, 도 13의 (a)는 자동차 속도 100km/h, 마찰계수 0.5의 노면에서의 차량의 trajectory를 나타내고, 도 13의 (b)는 추정된 longitudinal tire force와 실제의 longitudinal tire force를 나타내고 도 13의 (c)는 추정된 lateral velocity와 실제의 lateral velocity를 나 타낸다. 도 12 내지 도 13을 참조하면, 학습에 사용된 환경 이외의 상황에서도 tracking 성능과 추정성능의 결과가 매우 좋은 것을 확인한 것으로 보아 본 발명에 따른 차량의 경로 추종 시스템은 차량의 속도 변화와 노면의 환경 변 화에 강건함을 알 수 있다. 본 발명에 따르면, 각 휠별로 종방향의 힘을 산출하고 이에 따라 각 휠별로 요구 조향각을 산출하여 이에 기반 한 차량의 거동 제어가 가능하므로, 노면의 변화나 차량의 속도, 차량의 무게 변화 등이 있을 시에도 차량의 경 로 추종이 용이한 이점이 있다. 또한, 본 발명에 따르면, 저렴한 IMU센서만으로도 인공지능을 이용하여 타이어의 종방향 힘 및 자동차 횡 방향 속도의 추종이 가능한 이점이 있다. 이상과 같이 본 명세서에서는 특정된 사항들과 한정된 실시예에 의해 본 개시가 설명되었으나 이는 본 개시의 보다 전반적인 이해를 돕기 위해서 제공된 것일 뿐, 본 개시는 상기의 실시예에 한정되는 것은 아니며, 본 개시 가 속하는 분야에서 통상의 지식을 가진 자라면 이러한 기재로부터 다양한 수정 및 변형이 가능하다. 따라서, 본 명세서에 기재된 사상은 설명된 실시예에 국한되어 정해져서는 아니되며, 후술하는 특허청구범위뿐 만 아니라 이 특허청구범위와 균등하거나 등가적 변형이 있는 모든 것들은 본 명세서에 기재된 사상의 범주에 속한다고 할 것이다. 본 발명에 따르면, 각 휠별로 종방향의 힘을 산출하고 이에 따라 각 휠별로 요구 조향각을 산출하여 이에 기반 한 차량의 거동 제어가 가능하므로, 노면의 변화나 차량의 속도, 차량의 무게 변화 등이 있을 시에도 차량의 경 로 추종이 용이한 이점이 있다. 또한, 본 발명에 따르면, 저렴한 IMU센서만으로도 인공지능을 이용하여 타이어의 종방향 힘 및 자동차 횡 방향 속도의 추종이 가능한 이점이 있다. 이상과 같이 본 명세서에서는 특정된 사항들과 한정된 실시예에 의해 본 개시가 설명되었으나 이는 본 개시의 보다 전반적인 이해를 돕기 위해서 제공된 것일 뿐, 본 개시는 상기의 실시예에 한정되는 것은 아니며, 본 개시 가 속하는 분야에서 통상의 지식을 가진 자라면 이러한 기재로부터 다양한 수정 및 변형이 가능하다. 따라서, 본 명세서에 기재된 사상은 설명된 실시예에 국한되어 정해져서는 아니되며, 후술하는 특허청구범위뿐 만 아니라 이 특허청구범위와 균등하거나 등가적 변형이 있는 모든 것들은 본 명세서에 기재된 사상의 범주에 속한다고 할 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7 도면8 도면9 도면10 도면11 도면12 도면13"}
{"patent_id": "10-2023-0065572", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 나타낸다. 도 2는 본 발명의 일 실시예에 따른 LSTM 기반의 인공신경망 모듈의 모습을 나타낸다. 도 3은 본 발명의 일 실시예에 따른, 자세 제어부의 모습을 나타낸다. 도 4는 차량의 차량의 자유물체도(free body diagram)를 나타낸다. 도 5 내지 도 13은, 각각 본 발명의 일 실시예에 따른 차량의 경로 추종 시스템을 평가한 그래프를 나타낸다."}
