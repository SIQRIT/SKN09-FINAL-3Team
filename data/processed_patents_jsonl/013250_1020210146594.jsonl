{"patent_id": "10-2021-0146594", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0061883", "출원번호": "10-2021-0146594", "발명의 명칭": "OCT 영상에서 망막 단층의 측정 방법", "출원인": "주식회사 휴비츠", "발명자": "김형욱"}}
{"patent_id": "10-2021-0146594", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "망막의 OCT 단층 영상을 획득하는 S10 단계;획득된 OCT 영상에서 망막 단층을 표시하는 기준 경계선을 검출하는 S12 단계;상기 검출된 기준 경계선이 베이스라인이 되도록 OCT 영상의 각 컬럼의 상하 위치를 정렬하여 정렬된 OCT 영상을 얻는 S14 단계;정렬된 OCT 영상으로부터 망막 단층 영역을 예측하는 S20 단계;예측된 망막 단층 영역 사이의 경계선을 산출하는 S22 단계; 및상기 베이스라인이 다시 상기 기준 경계선이 되도록, 상기 산출된 망막 단층의 경계선의 상하 위치를 각 컬럼별로 정렬하여, 정렬된 경계선이 원래의 OCT 영상의 망막 단층의 경계선의 위치로 복원되도록 하는 S30 단계;를포함하는 망막 단층의 측정 방법."}
{"patent_id": "10-2021-0146594", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 복원된 망막 단층 경계선이 원래의 OCT 영상에 오버레이되어 사용자에게 디스플레이되는단계를 더욱 포함하는 망막 단층의 측정 방법."}
{"patent_id": "10-2021-0146594", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서, 상기 망막 단층은 망막 신경섬유층을 포함하고, 상기 복원된 각각의 망막 단층 사이의 경계선위치로부터 망막 신경섬유층의 두께를 측정하는 S32 단계를 더욱 포함하는 망막 단층의 측정 방법."}
{"patent_id": "10-2021-0146594", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 기준 경계선은 망막의 유리체와 망막 내측면 사이의 경계선이고, 상기 베이스라인은 망막단층의 불규칙한 굴곡에 의한 측정 오차를 감소시킬 수 있도록, 기준 경계선을 평탄화하는 기준선인 것인, 망막단층의 측정 방법."}
{"patent_id": "10-2021-0146594", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서, 상기 망막 단층 영역의 예측 및 망막 단층 영역 사이의 경계선 산출은 상기 기준 경계선이 베이스라인으로 정렬된 OCT 영상과 이를 분석한 망막 단층의 경계선 데이터 영상을 이용하여 학습된 심층 신경망에 의하여 수행되는 것인, 망막 단층의 측정 방법."}
{"patent_id": "10-2021-0146594", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서, 상기 심층 신경망의 학습은(i) OCT 망막 단면 영상과 (ii) 상기 OCT 망막 단면 영상에 대하여 작성된 레이블 영상의 훈련 데이터 집합을입력하는 S50 단계;입력된 OCT 영상 및 레이블 영상에서, 망막 단층을 표시하는 기준 경계선을 검출하는 S52 단계;상기 검출된 기준 경계선이 베이스라인이 되도록, OCT 영상 및 레이블 영상의 각 컬럼의 상하 위치를 정렬하는S54 단계;OCT 영상과 레이블 영상이 정렬되면, OCT 영상으로부터 망막 단층의 위치를 예측하는 S62 단계;예측된 망막 단층의 위치와 레이블 영상을 비교하여 예측 오차(Loss)를 계산하는 S64 단계; 및계산된 예측 오차에 따라 각 단층으로 예측될 가중치를 업데이트하는 S66 단계에 의하여 수행되는 것인, 망막단층의 측정 방법.공개특허 10-2023-0061883-3-"}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "곡률 변화가 큰 OCT 망막 단면 영상에서 망막 신경섬유층의 두께를 신뢰성있게 측정할 수 있는 방법이 개시된다. 상기 망막 단층의 측정 방법은, 망막의 OCT 단층 영상을 획득하는 S10 단계; 획득된 OCT 영상에서 망막 단층을 표시하는 기준 경계선을 검출하는 S12 단계; 상기 검출된 기준 경계선이 베이스라인이 되도록 OCT 영상의 각 컬 럼의 상하 위치를 정렬하여 정렬된 OCT 영상을 얻는 S14 단계; 정렬된 OCT 영상으로부터 망막 단층 영역을 예측 하는 S20 단계; 예측된 망막 단층 영역 사이의 경계선을 산출하는 S22 단계; 및 상기 베이스라인이 다시 상기 기 준 경계선이 되도록, 상기 산출된 망막 단층의 경계선의 상하 위치를 각 컬럼별로 정렬하여, 정렬된 경계선이 원 래의 OCT 영상의 망막 단층의 경계선의 위치로 복원되도록 하는 S30 단계;를 포함한다."}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 OCT 영상에서 단층의 측정 방법에 관한 것으로서, 더욱 상세하게는, 곡률 변화가 큰 OCT 망막 단면 영상에서 망막 신경섬유층의 두께를 신뢰성있게 측정할 수 있는 방법에 관한 것이다."}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "녹내장, 망막 질환 등의 안과 검사나 각막 수술 등의 안과 수술을 위해, 환자 안구의 3차원 단면 영상을 비침습 적으로 촬영하기 위하여, 광간섭 단층촬영 (Optical coherence tomography; OCT) 장치가 사용되고 있다. 광간 섭 단층촬영(OCT) 장치는 검사 대상(예를 들면, 망막)으로 측정광(예를 들면, 근적외선광)을 투과시키고, 검사 대상의 내부 및 각 단층에서 반사되는 반사광(산란광)을 검출하여, 검사 대상의 내부 단면 영상을 얻는다. OCT 영상을 분석하여 자동으로 단층을 분할하는 일반적인 방법은 단층 영역 사이를 구분하는 경계 지점에서 영 상 픽셀의 밝기 변화(Gradient)를 검출하고, 밝기가 변화하는 경계선을 찾는 것이다. 대표적인 그래프 이론 기 반 최적화 알고리즘의 경우, 영상의 각 픽셀을 노드로 하고, 노드 사이를 연결하는 간선(Edge)의 비용을 양쪽 노드의 그래디언트 값으로 하는 그래프 구조에서, 영상을 좌우로 가로지르는 최소 비용의 경로를 찾고, 이를 망 막 단층의 경계선으로 한다. OCT 영상은 망막의 생체 조직에서 반사되는 광의 간섭 신호를 영상화한 것이므로, 잡음(Noise) 성분을 많이 포 함하고 있고, 대상체인 안구의 특성(고도 근시 등)에 따라 획득된 망막 단면 영상의 품질(SNR)이 크게 달라진다. 특히 시신경 유두의 중심부는 망막 신경섬유층(RNFL: retinal nerve fiber layer)을 포함한 망막의 단층이 안구의 시신경으로 연결되면서, 망막 단층에 급한 곡률 변화가 나타난다. 또한, 황반 변성(AMD), 당뇨성 망막증, 녹내장(Glaucoma) 등과 같은 안과 질환이 있는 경우, 신생 혈관의 발현, 출혈, 부종 등과 같은 병변이 진행되면서 망막 단층의 형태가 더욱 변형된다. 따라서, OCT 영상의 지역적인 밝기 정보만을 이용하여 단층의 경계선을 식별하는 것은 어렵고, 다양한 망막 형 태의 단층 경계선을 탐색하는 과정에서, 단층 사이의 거리, 허용되는 곡률 등의 여러 사전 조건과 규칙을 설정 하여, 단층 경계선 설정의 정확도를 높이는 것은 많은 비용과 노력이 필요하다. [선행기술문헌] 특허공개 10-2019-0128292 (특허출원 10-2018-0052271) 특허공개 10-2014-0068346 (특허출원 10-2012-0135683) 미국 특허 9589346호 미국 특허 10123689호"}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 목적은, 곡률 변화가 큰 OCT 망막 단면 영상에서 망막 신경섬유층의 두께를 신뢰성있게 측정할 수 있 는 망막 단층의 측정 방법을 제공하는 것이다."}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 목적을 달성하기 위하여, 본 발명은, 망막의 OCT 단층 영상을 획득하는 S10 단계; 획득된 OCT 영상에서 망 막 단층을 표시하는 기준 경계선을 검출하는 S12 단계; 상기 검출된 기준 경계선이 베이스라인이 되도록 OCT 영 상의 각 컬럼의 상하 위치를 정렬하여 정렬된 OCT 영상을 얻는 S14 단계; 정렬된 OCT 영상으로부터 망막 단층 영역을 예측하는 S20 단계; 예측된 망막 단층 영역 사이의 경계선을 산출하는 S22 단계; 및 상기 베이스라인이 다시 상기 기준 경계선이 되도록, 상기 산출된 망막 단층의 경계선의 상하 위치를 각 컬럼별로 정렬하여, 정렬 된 경계선이 원래의 OCT 영상의 망막 단층의 경계선의 위치로 복원되도록 하는 S30 단계;를 포함하는 망막 단층 의 측정 방법을 제공한다."}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따른 망막 단층의 측정 방법은, 곡률 변화가 큰 OCT 망막 단면 영상에서 망막 신경섬유층의 두께를 신뢰성있게 측정할 수 있다."}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면을 참조하여, 본 발명을 상세히 설명한다. 도 1은 본 발명의 일 실시예에 따라 OCT 영상에서 망막 단층, 특히 망막 신경섬유층을 측정하는 방법을 설명하 기 위한 플로우챠트이다. 도 1에 도시된 바와 같이, 본 발명에 따라 OCT 영상에서 망막 단층을 측정하기 위해서 는, 먼저, 망막의 OCT 단층 영상을 획득한다(S10). 상기 OCT 단층 영상은 예를 들면, 시신경 유두 영역의 단층 영상일 수 있고, 구체적으로는 시신경 유두 중심부에서 망막 형태 또는 곡률이 급격히 변화하거나, 중증 질환자 의 병변 발현으로 인해 망막 단층의 변형이 있는 OCT 단층 영상일 수 있다. 다음으로, 획득된 OCT 영상에서 망막 단층을 표시하는 기준 경계선, 예를 들면, 망막의 유리체와 망막 내측면 사이의 경계선을 검출한다(S12, 전처리 과정). 도 2는 본 발명에 따른 망막 단층의 측정 방법에서, 망막 단층을 표시하는 기준 경계선을 검출하기 위한 방법의 일 예를 보여주는 도면이다. 구체적으로, 도 2의 A에 도시된 바 와 같이, 시신경 유두에서 획득한 OCT 영상에서, 망막 단층이 시작되는 상단의 유리체(Vitreous, 0)와 망막 단 층의 내측 경계막(ILM: inner limiting membrane, 1) 사이의 경계선을 검출하여, OCT 영상을 2개의 영역으로 분할한다. 유리체 영역은 OCT의 측정광의 반사가 이루어지지 않아 배경 영역으로 어둡기 때문에, 영상의 상 단으로부터 수직 방향으로 픽셀의 밝기가 기준치 이상으로 증가하는 픽셀 지점을 찾고, 이들을 연결하여, 좌우 로 가로지르는 기준 경계선을 설정한다. 이를 수행하기 위해, 예를 들면, OCT 영상에 대하여 수직 방향으로 밝기의 1차 미분값을 나타내는 필터 함수(도 2의 C 참조)를 구하고, 이를 OCT 영상에 적용하여, 그래디언트 (gradient, 도 2의 B) 영상을 만들고, 그래디언트 영상의 각 컬럼(y 방향, 즉, 수직 방향으로 위치한 1줄의 화 소)마다 엣지(밝기가 변화하는 부분)의 위치를 찾는 방법을 사용할 수 있다. 도 3은 이와 같이 검출된 기준 경 계선을 시신경 유두 OCT 영상에 표시한 예들을 보여주는 사진이다. 다음으로, 상기 검출된 기준 경계선이 베이스라인이 되도록 OCT 영상의 각 컬럼의 상하 위치를 정렬하여 정렬된 OCT 영상을 얻고, 필요에 따라, 정렬된 OCT 영상으로부터 관심 영역(ROI: Region of Image)의 부분 영상을 추출 한다(S14). 도 4는 기준 경계선이 베이스라인이 되도록 정렬된 OCT 영상의 일 예를 보여주는 도면이다. 도 4의 A에 도시된 바와 같이, 상기 망막의 기준 경계선 상의 픽셀이, 베이스라인의 위치(특정 y 좌표 위치)로 이동할 수 있도록, 기준 경계선과 베이스라인의 y 좌표값의 차이를 A-스캔 방향(y 방향)으로의 이동 오 프셋으로 설정하고, 각각의 컬럼에 대하여 상기 오프셋의 거리만큼 픽셀 데이터를 이동시켜서, OCT 영상을 정렬 한다. 즉, 상기 OCT 영상 데이터의 정렬은 A-스캔 단위(y 방향으로의 한번의 스캔)로 수행될 수 있다. 이때 정 렬되는 베이스라인의 y 좌표 위치는 영상 상단으로부터 일정한 여유 공간(예, 48 번째 픽셀)을 가지도록 설 정될 수 있다. 정렬된 영상에서 베이스라인 하단으로 관심이 되는 망막 단층 영역이 충분히 포함될 수 있도록 관심 영역(ROI)을 설정할 수 있다(예, 384 픽셀 높이). 상기 베이스라인은 망막 단층의 불규칙한 굴곡에 의한 측정 오차를 감소시킬 수 있도록, 기준 경계선을 평탄화하는 기준선의 역할을 한다. 따라서, 상기 베이스 라인은 기준 경계선 보다 균일하게 배치된 기준선일 수 있고, 바람직하게는 기준 경계선 보다 균일한 곡률 을 가지는 곡선이거나, 직선일 수 있고, 더욱 바람직하게는 도 4의 A에 도시된 바와 같이 직선일 수 있다. OCT 영상은 영상 상단에서 하단으로의 Axial 방향으로 고정된 크기 (높이)의 픽셀을 가지고, 영상의 좌측에서 우측으로의 빠른 스캔(Fast Scan) 방향으로 획득 방식(스캔 패턴)에 따라 가변적인 크기(넓이)의 픽셀을 가지므 로, 관심 영역(ROI) 영상은 고정된 크기의 폭(넓이) 및 높이로 설정될 수 있다. 예를 들면, 다양한 크기(너비) 의 OCT 영상으로부터, 망막층이 존재하는 영역으로서, 384 픽셀 높이 및 256 픽셀 넓이를 가지도록 잘라낸 영상 (Cropped Image)을 관심 영역(ROI) 영상으로 사용할 수 있다. 상기 기준 경계선이 베이스라인과 일치하도록 OCT 영상의 각 컬럼의 상하 위치를 정렬하면, 시신경 유 두 중심부에서 영상 하단으로 불규칙하고 급격한 경사를 이루며 함몰되거나 병변 진행에 의해 변형이 일어난 망 막신경섬유층(도 3 참조)의 상단이 베이스라인(수평 기준선, 20)을 따라 정렬되면서, 전체적인 단층 형태가 단 순화된다(도 4의 A 참조). 이와 같이, 망막 단층 형태가 베이스라인을 따라 정렬되면, 망막 단층의 형태를 보다 정확하게 분석할 수 있고, 망막 단층의 형태를 분석하기 위한 심층 신경망의 학습에도 유리하다. 심층 신경망은 (i) 망막의 여러 위치에서 획득된 OCT 망막 단면 영상과 (ii) 상기 OCT 망막 단면 영상에 대하여 안과 의사 등 전문가에 의해 작성된 망막 단층의 경계선 데이터(이하, ‘레이블(label) 영상’이라 한다)로 구 성된 다수의 훈련 데이터 집합에 의해서 학습되어, OCT 망막 단면 영상을 분석하는 인공지능 소프트웨어이다. 예를 들면, OCT 영상과 동일한 크기의 레이블(label) 영상에서 각 단층의 경계선을 따라 영상을 분할하고, OCT 영상의 망막 내부 영역의 모든 픽셀에 대해, 해당하는 망막 단층의 인덱스 값을 부여한다. 도 5a 및 5b는 심층 신경망을 구성하기 위한 OCT 망막 단면 영상과 레이블 영상의 일 예를 보여주는 도면으로서, 도 5a는 황반 (Macular) 영역의 OCT 단면 영상 및 레이블 영상을 나타내고, 도 5b는 시신경 유두(ONH) 영역의 OCT 단면 영상 및 레이블 영상을 나타낸다. 도 5에서, “0”은 유리체(Vitreous)층, “1”은 신경섬유층(NFL), “2”는 신경절 세포층(GCL), 내부얼기층(IPL) 및 외부얼기층(OPL), “3”은 외부핵층(ONL), “4”는 망막 색소 상피층(RPE), “5”는 맥락막 층(Choroids)을 나타낸다. 도 6은 망막 단층 분할을 위한 심층 신경망의 훈련 과정을 설명하기 위한 플로우챠트이다. 도 6에 도시된 바와 같이, 인공지능 딥러닝 기반의 심층 신경망을 얻기 위해서는, 먼저, 인공지능 컴퓨터 등의 심층 신경망(연산 장 치)에, (i) OCT 망막 단면 영상과 (ii) 상기 OCT 망막 단면 영상에 대하여 작성된 레이블(label) 영상의 훈련 데이터 집합을 입력한다(S50). 다음으로, 입력된 OCT 영상 및 레이블 영상에서, 망막 단층을 표시하는 기준 경 계선, 예를 들면, 망막의 유리체와 망막 내측면 사이의 경계선을 검출한다(S52, 전처리 과정, 상기 S12 과정과 유사하다). 다음으로, 상기 검출된 기준 경계선이 베이스라인이 되도록, OCT 영상 및 레이블 영상의 각 컬럼의 상하 위치를 정렬하고, 필요에 따라, 실제로 망막층을 포함하고 있는 관심 영역(ROI: Region of Image)의 부분 영상을 추출한다(S54, 상기 S14 과정과 유사하다). 도 4의 A는 이와 같이 베이스라인을 따라 정렬된 OCT 영상의 일 예를 보여주며, 도 4의 B는 베이스라인을 따라 정렬된 레이블 영상의 일 예를 보여준다. 필요에 따라, 관심 영역(ROI)으로 미리 잘려진 OCT 망막 단면 영상과 레이블(label) 영상의 훈련 데이터 집합을 입력 영상으로 사 용할 수도 있다. OCT 영상과 레이블 영상이 정렬되면, 심층 신경망은 OCT 영상으로부터, 예를 들면, 각 화소의 밝기 차이를 이용 하여, 망막 단층의 위치를 예측한다(S62). 예를 들면, 심층 신경망은 영상의 각 픽셀이 분류 가능한 N개 단층 (도 5에서는 6개) 중 k번째 망막 단층으로 분류되는 확률값을 예측한 결과로써, 각 단층에 대응하는 N개 채널의 확률 지도를 출력한다. 다음으로, 예측된 망막 단층의 위치(확률 지도)와 레이블 영상을 비교하여 예측 오차 (Loss)를 계산하고(S64), 계산된 예측 오차에 따라 각 단층으로 예측될 가중치를 업데이트한다(S66). 본 발명의 일 실시예에 있어서, OCT 영상의 특정 픽셀에 대하여, 레이블 영상에서의 단층 분류와 다른 망막 단층으로 예측 된 확률의 크기는 예측 오차가 되고, 이는 크로스 엔트로피 손실(Cross Entropy Loss) 함수로 계산되며, 역전파 (Backpropagation) 알고리즘에 의해 각 층을 구성하는 합성 필터(Convolution Filter)의 가중치를 업데이트한 다. 심층 신경망의 훈련 단계에서, 훈련 OCT 영상으로 예측한 결과가 레이블 영상에서의 망막 단층 영역 분포와 유사하게 되도록 반복적으로 학습이 진행되고(S68), 가장 낮은 손실(Loss)로 수렴할 때, 예를 들면, 예측 오차 가 소정값 이하가 될 때, 학습이 완료된다. 이로부터 심층 신경망은 망막의 변형과 단층의 곡률 변화에 의한 영향을 최소화하면서, 효율적으로 망막 단층 영역의 특징을 학습할 수 있고, 망막 분할의 정확도를 높일 수 있다. 또한 망막 분할 학습에 요구되는 심층 신경망의 가중치 변수의 숫자를 작게 유지함으로써, 네트워크 모델의 크기를 줄이고, OCT 획득 영상을 더 빠르게 처리하며, 망막 신경섬유층의 두께를 비롯한 망막의 분석 결과를 효과적으로 산출할 수 있다. 다시 도 1을 참조하면, 정렬된 OCT 영상으로부터 망막 단층 영역, 예를 들면, 망막 신경섬유층 영역을 예측하고 (S20), 예측된 망막 단층 영역 사이의 경계선을 산출한다(S22). 여기서, 상기 망막 단층 영역의 예측(S20) 및/ 또는 경계선 산출(S22)은 다양한 방법으로 수행될 수 있다. 예를 들면, 통상의 그래프 이론 기반 최적화 알고리 즘을 이용하여 각각의 망막 단층 영역을 예측하거나, 상술한 바와 같이 사전 학습된 심층 신경망을 이용하여 각 각의 망막 단층 영역을 예측할 수 있다. 바람직하게는, 상기 심층 신경망은 상기 기준 경계선이 직선 상의 베이 스라인으로 정렬된 OCT 영상과 이를 분석한 망막 단층의 경계선 데이터(레이블 영상)를 이용하여 학습된 것일 수 있다. 이와 같이, 각각의 망막 단층 영역의 경계선을 산출하면, OCT 영상의 망막신경섬유층 영역을 분할할 수 있다. 학습된 심층 신경망을 이용하여, 획득된 OCT 영상의 망막 단층을 분할하고, 망막 단층 영역 사이의 경계선을 산 출하는 단계에서, 먼저 기준 경계선이 베이스라인으로 정렬된 OCT 영상, 예를 들면, ROI 영상이 심층 신경망으 로 입력되고, 결과로 예측된 N개 채널의 망막 단층의 확률 지도로부터, 특정 망막 단층 사이(k-1번째와 k번째) 를 분할하는 경계선을 산출하기 위해, 다음과 같이 그래프 이론 기반의 최소 비용 탐색 알고리즘이 사용될 수 있다. OCT 영상을 하나의 그래프 구조로 간주하면, 영상의 각 픽셀은 그래프를 구성하는 노드(Node)가 되고, (x, y) 좌표의 픽셀 노드는, x 좌표가 1 증가하고, 임의의 y 좌표인 (x+1, y’) 좌표의 픽셀들로 단 방향성을 갖는 간 선 (Unidirectional Edge)으로 연결된다. (x, y) 좌표의 픽셀이 k-1 번째 단층이 될 확률과 k 번째 단층이 될 확률을 각각 Pk-1(x, y) 및 Pk(x, y)라 할 때, k-1 번째 단층 내부의 임의의 픽셀 위치에서, 이미지의 y 좌표를 증가시키면(Axial 방향으로 이동), 단층 사이의 경계선에 근접할수록 Pk-1가 감소하고, Pk는 증가한다. 따라서 하기 수학식 1로 나타낸 바와 같이, (x, y) 좌표의 픽셀에서 Pk로부터 Pk-1를 뺀 값을 Ck-1,k으로 하고, 하기 수학 식 2와 같이 Axial 방향으로 C가 변화하는 그래디언트 ΔC를 노드의 비용으로 하면, 하기 수학식 3과 같이, (x, y) 노드에서 (x’, y’) 노드로 연결하는 간선의 비용 Ek-1,k은 두 노드에서의 비용의 합이 된다. [수학식 1]"}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "[수학식 2]"}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "[수학식 3]"}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "하기 수학식 4에 나타낸 바와 같이, OCT 영상의 좌측에서 이미지가 시작하는 (x= 0, y)인 노드에서 우측 끝의 (x= 너비(w)-1, y)의 노드까지, 좌우로 가로지르며 연결하는 간선들의 비용의 합을 최소화하는 간선들의 집합이 망막 단층의 경계선이 된다. [수학식 4]"}
{"patent_id": "10-2021-0146594", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "최소 비용 경로 탐색을 효과적으로 구현하기 위해, 통상적인 다익스트라 알고리즘과 다이나믹 프로그래밍과 같 은 기법을 사용할 수 있다. 필요에 따라, 상기와 같은 방법으로, OCT 영상에서 각각의 망막 단층을 분할하고 있 는 모든 경계선에 대하여, S20 단계 및 S22 단계를 반복하여, 각각의 망막 단층을 분할하고 있는 모든 경계선을 산출한다(S40).다음으로, 상기 베이스라인이 다시 상기 기준 경계선이 되도록, 상기 산출된 망막 단층의 경계선의 상하 위치(y 방향 위치)를 각 컬럼별로 정렬하여, 정렬된 경계선이 원래의 OCT 영상의 망막 단층의 경계선의 위치로 복원되 도록 한다(S30). 예를 들면, 정렬된 OCT 영상의 경계선을 구성하고 있는 (x, y) 좌표 지점마다, 심층 신경망으 로 입력을 위해 영상을 정렬하는 단계에서 적용한 y축 방향 오프셋 (원래의 OCT 영상 데이터를 A-스캔 방향으로 이동했던 오프셋)을 반대 부호로 적용한다. 이와 같이 변환된, 즉, 복원된 망막 단층 경계선은 원래의 OCT 영상의 단층 경계와 일치하므로, 원래의 OCT 영 상에 오버레이되어 사용자에게 디스플레이될 수 있다. 즉, 원래의 OCT 영상을 오프셋 만큼 변환하여 정렬된 OCT 영상을 얻고, 정렬된 OCT 영상에서 단층 경계선 데이터를 얻은 다음, 얻어진 경계선 데이터를 상기 오프셋 만 큼 다시 반대로 변환한 후, 원래의 OCT 영상에 부가하여, 단층 경계선이 표시된 OCT 영상을 얻을 수 있다. 이와 같이 복원된 각각의 망막 단층 사이의 경계선 위치로부터 망막 신경섬유층의 두께를 측정하면(S32), 망막 단층의 상태, 예를 들면, 녹내장의 위험 정도를 진단할 수 있다. 도 7은 본 발명에 따라 망막 단층 경계선이 표 시된 OCT 영상의 일 예를 보여주는 도면이다. 도 7의 경계선이 부가된 OCT 영상을 참조하면, 유리체와 망막 신 경섬유층(NFL) 사이의 경계선 L1과 망막 신경섬유층(NFL)과 신경절세포층, 내/외부얼기층의 복합 단층(GCL & IPL & OPL) 사이의 경계선 L2로 분할된 영역으로부터, 망막 신경섬유층(RNFL)의 두께를 측정할 수 있다. 도 8은 이와 같은 방식으로 시신경 유두 주변 둘레의 망막 신경섬유층(RNFL) 두께를 측정하여 나타낸 그래프이다. 도 8 에 도시된 바와 같이, 시신경 유두의 둘레 영역(TSNIT 방향)에서 산출된 신경섬유층 두께를 TSNIT 방향의 각 영 역마다 표시하고, 임상적인 두께 분포의 평균으로부터 유의하게 편차를 갖는 측정 영역을 색상으로 구분하여 표 시하는 방법에 의해 녹내장의 위험도를 빠르게 인식하고, 진단 및 경과 관찰에 도움을 줄 수 있다. 본 발명에 의하면, 망막의 시신경 유두 부근에서 획득된 OCT 영상을 정렬하고, 인공지능 기술의 딥러닝 기반으 로 학습된 심층 신경망을 이용하여, 망막을 구성하는 각각의 단층 영역을 예측한 확률 지도를 구하고, 이로부터 단층 사이의 경계선을 검출하여 망막을 구성하는 각각의 단층을 분할할 수 있다. 본 발명에서 망막 단층 분할을 위한 심층 신경망은 합성곱 네트워크 (Convolutional Network) 모델로써, 입력 영상이 네트워크를 구성하는 각 층의 합성곱 필터와 비선형 활성 함수를 차례로 통과하면서, 영상 크기(Dimension)가 압축되는 대신, 영상 전체 로부터 전역적인 특징 (Contextual Features) 들이 추출된다. 이후 영상 크기를 복원하는 단계를 거치면서, 이 전 단계에서 추출한 보다 지역적인 특징(Local Features) 들이 반영되어, 최종적으로 원래의 입력 영상 크기로 픽셀 마다 망막 단층들로 분류하는 예측 확률 값을 포함한 확률 지도를 구하는 형식의 인코더-디코더(Encoder- Decoder) 구조로 구현된다. 본 발명은, 광간섭 단층촬영(OCT)으로 획득한 시신경 유두(ONH) 주변의 망막신경 섬유층(RNFL) 영상을 인공지능 딥러닝 기반의 심층 신경망(Deep Neural Network)에 입력하고, 예측된 망막 단층의 확률 지도를 이용하여, 망막 신경섬유층 영역을 분할한다. 결과로부터 망막 신경섬유층 두께와 영역을 측정하여, 녹내장의 위험 정도를 정확 하고, 빠르게 진단할 수 있다. 이상 본 발명이 예시적인 실시예들을 참조하여 설명되었지만, 본 발명은 상술한 실시예들로 한정되지 않는다. 하기 청구항들의 범위는 예시적인 실시예의 변형들, 등가의 구성들 및 기능들을 모두 포괄하도록 가장 넓게 해 석되어야 한다.도면 도면1 도면2 도면3 도면4 도면5a 도면5b 도면6 도면7 도면8"}
{"patent_id": "10-2021-0146594", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따라 OCT 영상에서 망막 단층을 측정하는 방법을 설명하기 위한 플로우챠트. 도 2는 본 발명에 따른 망막 단층의 측정 방법에서, 망막 단층을 표시하는 기준 경계선을 검출하기 위한 방법의 일 예를 보여주는 도면. 도 3은 본 발명에 따른 망막 단층의 측정 방법에서 검출된 기준 경계선을 시신경 유두 OCT 영상에 표시한 예들 을 보여주는 도면. 도 4는 본 발명에 따른 망막 단층의 측정 방법에서, 기준 경계선이 베이스라인이 되도록 정렬된 OCT 영상의 일 예를 보여주는 도면. 도 5a 및 5b는 심층 신경망을 구성하기 위한 OCT 망막 단면 영상과 레이블 영상의 일 예를 보여주는 도면. 도 6은 망막 단층 분할을 위한 심층 신경망의 훈련 과정을 설명하기 위한 플로우챠트. 도 7은 본 발명에 따라 망막 단층 경계선이 표시된 OCT 영상의 일 예를 보여주는 도면. 도 8은 본 발명에 따라 시신경 유두 주변 둘레의 망막 신경섬유층(RNFL) 두께를 측정하여 나타낸 그래프."}
