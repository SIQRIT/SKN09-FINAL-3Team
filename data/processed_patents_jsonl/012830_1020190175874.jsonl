{"patent_id": "10-2019-0175874", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0083524", "출원번호": "10-2019-0175874", "발명의 명칭": "영상 비율을 확장 또는 축소하기 위한 영상 리타겟팅 방법 및 장치", "출원인": "주식회사 픽스트리", "발명자": "신재섭"}}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "입력 이미지(Input Image)(I)를 입력받는 과정;상기 입력 이미지(I)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정하는 과정;상기 입력 이미지(I)로부터 상기 보존 마스크(M)를 제외한 영역에 대한 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성하는 과정;상기 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을 탐색하여 추출하는과정;상기 보존 마스크(M)의 영역을 보존하면서 상기 라인 삽입 이미지(I+)를 획득하는 과정;상기 라인 삽입 이미지(I+)를 미리 기계 학습 기반으로 학습된 인공지능 모델을 이용하여 영상 비율이 확장된 리타겟 이미지(I^R)로 생성하는 과정;을 포함하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 보존 마스크(M)로 설정하는 과정은,상기 입력 이미지(I)에 대해 인스턴스 세그먼트(Instance Segmentation)을 수행하고, 각 세그멘테이션 영역마다부여된 점수(Saliency map)와 상기 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합쳐서 중요한영역으로 판별되는 곳에 상기 보전 마스크(M)를 설정하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,정답 이미지(IR)를 입력받는 과정;상기 정답 이미지(IR)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정하는 과정;상기 정답 이미지(IR)로부터 상기 보존 마스크(M)를 제외한 영역에 대해 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성하는 과정;상기 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을 탐색하여 추출하는과정;상기 보존 마스크(M)의 영역을 보존하면서 상기 라인 삭제 이미지(I-)를 획득하는 과정;상기 인공지능 모델을 이용하여 상기 라인 삭제 이미지(I-)를 영상 비율이 축소된 리타겟 이미지로 생성하는 과정을 추가로 포함하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 입력 이미지(I) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삽입한 상기 라인 삽입 이미지(I공개특허 10-2021-0083524-3-+)와 상기 정답 이미지(IR) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삭제한 상기 라인 삭제 이미지(I-)를 쌍으로 학습하여 상기 인공지능 모델을 학습되도록 하는 과정;를 추가로 포함하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 인공지능 모델을 학습하도록 하는 과정은,상기 정답 이미지(IR) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삭제한 상기 라인 삭제 이미지(I-)를 순차적으로 획득하면서 상기 입력 이미지(I)를 생성하는 과정을 학습하고,상기 입력 이미지(I) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삽입한 상기 라인 삽입 이미지(I+)를 순차적으로 획득하여 상기 정답 이미지를 생성하는 과정을 학습하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제3항에 있어서,상기 보존 마스크(M)로 설정하는 과정은상기 정답 이미지(IR)에 대한 인스턴스 세그멘테이션(Instance Segmentation) 또는 오브젝트 디텍션(objectdetection)을 샐리언시 맵(Saliency Map)과 결합하는 방식을 이용하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 보존 마스크(M)로 설정하는 과정은,상기 정답 이미지(IR)에 대한 상기 인스턴스 세그먼트(Instance Segmentation)를 수행하고, 각 세그멘테이션 영역마다 부여된 점수(Saliency map)와 상기 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합쳐서중요한 영역으로 판별되는 곳에 상기 보전 마스크(M)를 설정하는 것을 특징으로 하는 영상 리타겟팅 방법."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "입력 이미지(Input Image)(I)를 입력받는 입력부;상기 입력 이미지(I)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정하는 마스크 설정부;상기 입력 이미지(I)로부터 상기 보존 마스크(M)를 제외한 영역에 대한 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성하는 에너지맵 생성부;상기 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을 탐색하여 추출하는 라인추출부;상기 보존 마스크(M)의 영역을 보존하면서 상기 라인 삽입 이미지(I+)를 획득하는 라인 삽입부;미리 기계 학습 기반으로 학습된 인공지능 모델을 이용하여 상기 라인 삽입 이미지(I+)를 영상 비율이 확장된 리타겟 이미지(I^R)로 생성하는 영상 비율 확장부;를 포함하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,공개특허 10-2021-0083524-4-상기 마스크 설정부는,상기 입력 이미지(I)에 대해 인스턴스 세그먼트(Instance Segmentation)을 수행하고, 각 세그멘테이션 영역마다부여된 점수(Saliency Map)와 상기 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합쳐서 중요한영역으로 판별되는 곳에 상기 보전 마스크(M)를 설정하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제8항에 있어서,상기 입력부에서 정답 이미지(IR)를 입력받으면,상기 마스크 설정부에서 상기 정답 이미지(IR)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정하는과정;상기 에너지맵 생성부에서 상기 정답 이미지(IR)로부터 상기 보존 마스크(M)를 제외한 영역에 대해 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성하고상기 라인추출부에서 상기 에너지 맵 내의 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을탐색하여 추출하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서,상기 보존 마스크(M)의 영역을 보존하면서 상기 라인 삭제 이미지(I-)를 획득하는 라인 삭제부;상기 인공지능 모델을 이용하여 상기 라인 삭제 이미지(I-)를 영상 비율이 축소된 리타겟 이미지로 생성하는 영상 비율 축소부를 추가로 포함하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 입력 이미지(I) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삽입한 상기 라인 삽입 이미지(I+)와 상기 정답 이미지(IR) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삭제한 상기 라인 삭제 이미지(I-)를 쌍으로 학습하여 상기 인공지능 모델을 학습하도록 하는 학습부를 추가로 포함하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 학습부는,상기 정답 이미지(IR) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삭제한 상기 라인 삭제 이미지(I-)를 순차적으로 획득하면서 원래의 상기 입력 이미지(I)를 생성하는 과정을 학습하고, 상기 입력 이미지(I) 내의 상기 보존 마스크(M)의 영역을 보존하면서 라인을 삽입한 상기 라인 삽입 이미지(I+)를 순차적으로 획득하여 상기 정답 이미지(IR)을 생성하는 과정을 학습하는 것을 특징으로 하는 영상 리타겟팅장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제12항에 있어서,상기 마스크 설정부는,공개특허 10-2021-0083524-5-상기 정답 이미지(IR)에 대한 인스턴스 세그멘테이션(Instance Segmentation) 또는 오브젝트 디텍션(objectdetection)을 샐리언시 맵(Saliency Map)과 결합하는 방식을 이용하여 상기 보존 마스크(M)를 설정하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제13항에 있어서,상기 마스크 설정부는,상기 정답 이미지(IR)에 대한 상기 인스턴스 세그먼트(Instance Segmentation)을 수행하고, 각 세그멘테이션 영역마다 부여된 점수(Saliency map)와 상기 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합쳐서중요한 영역으로 판별되는 곳에 상기 보전 마스크(M)를 설정하는 것을 특징으로 하는 영상 리타겟팅 장치."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "영상 비율을 확장 또는 축소하기 위한 영상 리타겟팅 방법 및 장치를 개시한다. 본 실시예는 입력 이미지에서 보존하고자 하는 영역을 제외한 영역에 대한 에너지 맵(Energy Map)에서 추출된 라 인(Line)을 삽입한 이미지를 획득하여 영상 비율이 확장하거나, 정답 이미지에서 보존하고자 하는 영역을 제외한 영역에 대한 에너지 맵에서 추출된 라인 삭제 이미지를 획득하여 영상 비율을 축소하는 영상 리타겟팅 방법 및 장치를 제공한다."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 실시예는 영상 비율을 확장 또는 축소하기 위한 영상 리타겟팅 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "이하에 기술되는 내용은 단순히 본 실시예와 관련되는 배경 정보만을 제공할 뿐 종래기술을 구성하는 것이 아니 다. 사용자의 편의에 따라 새로운 영상을 형성하기 위해 영상의 단편을 수정하거나 합성하는 영상 편집/합성 기술은 다양한 방법으로 개발되어 왔다. 영상 편집/합성 기술은 일반적으로 원치 않는 영상 부분을 지우거나 원하는 부 분을 분리하고 새로운 부분과 합성하는 목적을 가지고 개발되고 있다. 영상을 합성하기 위하여 이미지 내의 객체 추출이 요구되는데, 객체를 추출하는 영상 분할 기술(Image Segmentation)로는 워터쉐드(Watershed) 알고리즘과 그래프 컷(Graph Cut) 알고리즘 등의 기술들이 개발되어 다 양한 방법으로 활용되고 있다. 영상 크기 조정을 위해 개발된 기술로는 심 카빙(seam carving/insertion) 알고리즘이 있다. 심 카빙 알고리즘 은 원본 영상에서 각각의 화소(pixel)간 중요도를 계산하여, 동적 계획법(Dynamic Programming)에 의해 중요도 가 낮은 화소들을 연결시킨 라인(Line)을 구성하고, 중요도가 낮은 순서로 라인을 제거(Removal)하거나 삽입 (Insertion)하여 영상의 크기를 축소하거나 확장한다. 심 카빙 기술은 본래 다양한 해상도를 갖는 장치에서 이 미지를 표시하는 데 있어서 왜곡 없이 나타내기 위한 목적으로 고안되었다. 종래기술들은 단순히 배경영상에 객체영상을 덮어씌워 합성하는 방식을 이용하였다. 영상의 확대 및 축소 과정 에서도 객체영상과 배경영상의 비율 등에 상관없이 단순히 전체 영상을 확대하거나 축소하였기 때문에 영상 편 집/합성에 한계가 있으며, 이에 따라 자연스러운 합성영상을 제공하기 어려운 문제점이 있다."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 실시예는 입력 이미지에서 보존하고자 하는 관심 영역을 설정하고, 해당 영역을 제외한 나머지 영역에 대해 관심 정도가 낮은 순서로 빈 라인(Line)을 삽입한 영상을 구성하여, 기계 학습에 기반하여 해당 라인을 채우거 나 보정하는 것을 목표로 하는 영상 리타겟팅 방법 및 장치를 제공하는 데 목적이 있다."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 실시예의 일 측면에 의하면, 입력 이미지(Input Image)(I)를 입력받는 과정; 상기 입력 이미지(I)의 일부 영 역을 보존 마스크(Preservation Mask)(M)로 설정하는 과정; 상기 입력 이미지(I)로부터 상기 보존 마스크(M)를 제외한 영역에 대한 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성하는 과정; 상기 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을탐색하여 추출하는 과정; 상기 보존 마스크(M)의 영역을 보존하면서 상기 라인 삽입 이미지(I+)를 획득하는 과정; 상기 라인 삽입 이미지(I+)를 미리 기계 학습 기반으로 학습된 인공지능 모델을 이용하여 영상 비율이 확 장된 리타겟 이미지(I^ R)로 생성하는 과정을 포함하는 것을 특징으로 하는 영상 리타겟팅 방법을 제공한다. 본 실시예의 다른 측면에 의하면, 입력 이미지(Input Image)(I)를 입력받는 입력부; 상기 입력 이미지(I)의 일 부 영역을 보존 마스크(Preservation Mask)(M)로 설정하는 마스크 설정부; 상기 입력 이미지(I)로부터 상기 보 존 마스크(M)를 제외한 영역에 대한 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성하는 에너지맵 생성부; 상기 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연 결로 이루어지는 라인(Line)을 탐색하여 추출하는 라인 추출부; 상기 보존 마스크(M)의 영역을 보존하면서 상기 라인 삽입 이미지(I+)를 획득하는 라인 삽입부; 미리 기계 학습 기반으로 학습된 인공지능 모델을 이용하여 상기 라인 삽입 이미지(I+)를 영상 비율이 확장된 리타겟 이미지(I^ R)로 생성하는 영상 비율 확장부;를 포함하는 것을 특징으로 하는 영상 리타겟팅 장치를 제공한다."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이상에서 설명한 바와 같이 본 실시예에 의하면, 입력 이미지에서 보존하고자 하는 영역을 제외한 영역에 대한 에너지 맵(Energy Map)에서 추출된 라인(Line)을 삽입한 이미지를 획득하여 영상 비율이 확장하거나, 정답 이미 지에서 보존하고자 하는 영역을 제외한 영역에 대한 에너지 맵에서 추출된 라인을 삭제한 이미지를 획득하여 영 상 비율을 축소할 수 있는 효과가 있다."}
{"patent_id": "10-2019-0175874", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 실시예를 첨부된 도면을 참조하여 상세하게 설명한다. 도 1a,1b,1c는 본 실시예에 따른 영상 비율을 확장 또는 축소하기 위한 영상 리타겟팅 장치를 개략적으로 나타 낸 블럭 구성도이다. 본 실시예에 따른 영상 리타켓팅 장치는 탑재된 영상 리타겟팅 프로그램을 이용하여 영상의 비율을 확장 또는 축소한다. 영상 리타겟팅 프로그램은 라인 카빙, 인페이팅 기술, 인공지능 모델을 이용하여 영 상의 비율을 확장 또는 축소한다. 영상 리타켓팅 장치는 영상 리타겟팅 프로그램을 이용하여 입력 이미지(I)의 일부 영역을 보존 마스 크(Preservation Mask)(M)로 설정하고, 에너지 맵(Energy Map)을 생성한 후 추출된 라인(Line)을 삽입한 이미 지(I+)를 획득한 후 기 학습된 인공지능 모델에 이용하여 영상 비율을 확장한다. 영상 리타켓팅 장치는 영상 리타겟팅 프로그램을 이용하여 정답 이미지(IR)의 일부 영역을 보존 마스 크(Preservation Mask)(M)로 설정하고, 에너지 맵(Energy Map)을 생성한 후 추출된 라인(Line)을 삭제한 이미 지(I-)를 획득한 후 기 학습된 인공지능 모델에 이용하여 영상 비율을 축소한다. 영상 리타켓팅 장치는 영상 리타겟팅 프로그램을 탑재하는 사용자 단말기 또는 응용 서버, 서비스 서 버, 서버 단말기일 수 있다. 영상 리타켓팅 장치는 각기 (ⅰ) 각종 기기 또는 유무선 통신망과 통신을 수행하기 위한 통신 모뎀 등의 통신 장치, (ⅱ) 영상 비율을 확장하기 위한 각종 프로그램과 데이터를 저장하기 위한 메모리, (ⅲ) 영상 리타 겟팅 프로그램을 실행하여 연산 및 제어하기 위한 마이크로프로세서 등을 구비하는 다양한 장치를 의미할 수 있다. 적어도 일 실시예에 따르면, 메모리는 램(Random Access Memory: RAM), 롬(Read Only Memory: ROM), 플래시 메모리, 광 디스크, 자기 디스크, 솔리드 스테이트 디스크(Solid State Disk: SSD) 등의 컴퓨터로 판독 가능한 기록/저장매체일 수 있다. 적어도 일 실시예에 따르면, 마이크로프로세서는 명세서에 기재된 동작과 기 능을 하나 이상 선택적으로 수행하도록 프로그램될 수 있다. 적어도 일 실시예에 따르면, 마이크로프로세서는 전체 또는 부분적으로 특정한 구성의 주문형반도체(Application Specific Integrated Circuit: ASIC) 등의 하 드웨어로써 구현될 수 있다. 일반적으로 학습에 필요한 데이터 셋을 생성하는 과정에서, 라인(Line)을 만든 다음에 일반적인 인페이딩 기술 로 라인을 채우는 경우, 라인에 채워지는 영상의 통계적인 특성이 다르기 때문에, 영상이 이질감을 갖게 된다. 예컨대, 사람의 얼굴이 좌우로 늘어난 경우, 데이터 셋 자체를 해당 환경에 맞게 만들어야 한다. 따라서, 본 실시예에 따른 영상 리타겟팅 프로그램은 기계 학습을 기반으로 보존하고자 하는 영역에 보존 마스크(M)를 설정한 후 보존 마스크 영역을 제외한 나머지 영역에서 라인을 찾는다. 이후, 영상 리타겟팅 프로 그램은 라인을 제거하면 축소 영상을 만들 수 있으며, 정답 영상(IR)에서 축소 영상을 만드는 과정에서 보 존 마스크(M)가 설정될 영역을 기계 학습으로 찾을 수 있다. 영상 리타겟팅 프로그램은 보존 마스크(M)가 설정될 영역을 찾은 다음에 라인을 제거하여 데이터 셋(입력 이미지(I), 정답 이미지(IR))을 만들 수 있다. 영상 리타겟팅 프로그램은 라인 카빙과 인페이팅 기술을 활용하여 영상의 비율을 확장한다. 영상 리타겟팅 프로그램은 기계 학습 기술 대비 아티팩트가 적고 일반화 성능이 뛰어난 라인 카빙 기술을 이용하여 영상 비율을 확장하고, 확장된 라인을 인페인팅 기술을 통해 채운다. 영상 리타겟팅 프로그램은 입력 이미지(I)에서 보존 마스크(M)의 영역을 보존하면서 라인 삽입 이미지(I +)를 획득하고, 정답 이미지(IR)에서 보존 마스크(M)의 영역을 보존하면서 라인 삭제 이미지(I-)를 획득할 수 있 다. 영상 리타겟팅 프로그램은 라인 삽입 이미지(I+)를 생성할 때, 인페이팅(Inpainting) 기법을 이용할 수 있다. 따라서, 학습에 필요한 데이터셋을 만들 때, 정답 이미지(IR)가 존재하면 라인 삭제 이미지(I-), 라인 삽입 이미 지(I+)를 쌍으로 학습 데이터에 이용할 수 있다. 여기서, 정답 이미지(IR)는 학습에 필요한 이미지를 의미한다. 영상 리타겟팅 프로그램은 학습 데이터를 만들 때는 정답 이미지(IR)(오리지널 영상)로부터 라인을 제거한 영상 라인 삭제 이미지(I-)를 만든 후 입력 영상(I), 영상 비율이 확장된 리타겟 이미지(I^ R)와 함께 학습에 이 용한다. 영상 리타겟팅 프로그램은 라인 삽입 이미지(I+)를 CNN에 입력하여 정답 이미지(IR)를 만든다. 영상 리타겟팅 프로그램은 학습 데이터를 기초로 늘려야 하는 입력 영상(I)이 입력되면, 영상 비율이 확장 된 리타겟 이미지(I^ R)를 만든다. 영상 리타겟팅 프로그램은 인공지능 모델을 학습시킬 때, 라인 삭제 이미 지(I-), 정답 이미지(IR)를 입력한다. 영상 리타겟팅 프로그램은 라인 삽입 이미지(I+)와 라인 삭제 이미지 (I-)를 쌍으로 입력받아 학습하여 인공지능 모델을 학습한다. 도 2a,2b,2c는 본 실시예에 따른 영상 리타겟팅 장치 내에 탑재되는 영상 리타겟팅 프로그램을 개략적으로 나타 낸 블럭 구성도이다. 본 실시예에 따른 영상 리타겟팅 프로그램은 입력부, 마스크 설정부, 에너지맵 생성부, 라 인 추출부, 라인 삽입부, 라인 삭제부, 영상 비율 확장부, 영상 비율 축소부, 학습부 를 포함한다. 영상 리타겟팅 프로그램에 포함된 구성요소는 반드시 이에 한정되는 것은 아니다. 영상 리타겟팅 프로그램에 포함된 각 구성요소는 장치 내부의 소프트웨어적인 모듈 또는 하드웨어적인 모 듈을 연결하는 통신 경로에 연결되어 상호 간에 유기적으로 동작할 수 있다. 이러한 구성요소는 하나 이상의 통 신 버스 또는 신호선을 이용하여 통신한다. 도 2에 도시된 영상 리타겟팅 프로그램의 각 구성요소는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 소프트웨어적인 모듈, 하드웨어적인 모듈 또는 소프트웨어와 하드웨어의 결합으로 구현될 수 있다.입력부는 입력 이미지(Input Image)(I)를 입력받는다. 입력부는 정답 이미지(IR)를 입력받는다. 마스크 설정부는 입력 이미지(I)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정한다. 마스크 설정부는 입력 이미지(I)에 대해 인스턴스 세그먼트(Instance Segmentation)을 수행하고, 각 세그멘테이션 영역마다 부여된 점수(Saliency Map)와 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합쳐서 중 요한 영역으로 판별되는 곳에 보전 마스크(M)를 설정한다. 마스크 설정부는 정답 이미지(IR)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정한다. 마스크 설정부는 정답 이미지(IR)에 대한 인스턴스 세그멘테이션(Instance Segmentation) 또는 오브젝트 디텍션 (object detection)을 샐리언시 맵(Saliency Map)과 결합하는 방식을 이용하여 보존 마스크(M)를 설정한다. 마 스크 설정부는 정답 이미지(IR)에 대한 인스턴스 세그먼트(Instance Segmentation)를 수행하고, 각 세그멘 테이션 영역마다 부여된 점수(Saliency map)와 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합 쳐서 중요한 영역으로 판별되는 곳에 보전 마스크(M)를 설정한다. 에너지맵 생성부는 입력 이미지(I)로부터 보존 마스크(M)를 제외한 영역에 대한 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성한다. 에너지맵 생성부는 정 답 이미지(IR)로부터 보존 마스크(M)를 제외한 영역에 대해 모든 화소(Pixel)에 대해 중요도를 계산하고, 각 화 소의 중요도로 구성된 에너지 맵(Energy Map)을 생성한다. 라인 추출부는 입력 이미지(I)에 대한 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을 탐색하여 추출한다. 라인 추출부는 정답 이미지(IR)에 대한 에너지 맵 내의 상대적으로 중요 도가 낮은 화소의 연결로 이루어지는 라인(Line)을 탐색하여 추출한다. 라인 삽입부는 입력 이미지(I) 내의 보존 마스크(M)의 영역을 보존하면서 라인 삽입 이미지(I+)를 획득한 다. 라인 삭제부는 정답 이미지(IR) 내의 보존 마스크(M)의 영역을 보존하면서 라인 삭제 이미지(I-)를 획 득한다. 영상 비율 확장부는 미리 기계 학습 기반으로 학습된 인공지능 모델을 이용하여 라인 삽입 이미지(I+)를 영상 비율이 확장된 리타겟 이미지(I^ R)로 생성한다. 영상 비율 축소부는 인공지능 모델을 이용하여 라인 삭제 이미지(I-)를 영상 비율이 축소된 리타겟 이미지로 생성한다. 학습부는 입력 이미지(I) 내의 보존 마스크(M)의 영역을 보존하면서 라인을 삽입한 라인 삽입 이미지(I+) 와 정답 이미지(IR) 내의 보존 마스크(M)의 영역을 보존하면서 라인을 삭제한 라인 삭제 이미지(I-)를 쌍으로 학 습하여 인공지능 모델을 학습시킨다. 학습부는 정답 이미지(IR) 내의 보존 마스크(M)의 영역을 보존하면서 라인을 삭제한 라인 삭제 이미지(I- )를 순차적으로 획득하면서 원래의 입력 이미지(I)를 생성하는 과정을 학습한다. 학습부는 입력 이미지(I) 내의 보존 마스크(M)의 영역을 보존하면서 라인을 삽입한 라인 삽입 이미지(I+)를 순차적으로 획득하여 정답 이 미지(IR)를 생성한다. 도 3은 본 실시예에 따른 영상 비율을 확장 또는 축소하는 방식을 나타낸 도면이다. 영상 리타겟팅 프로그램은 입력 이미지(I)에 대한 세그멘테이션을 수행한다. 영상 리타겟팅 프로그램은 각각의 세그멘테이션에 대한 점수(Saliency Map)를 산출한다. 이때, 영상 리타 겟팅 프로그램에서 인스턴스 세그먼트(객체로 사람이 존재하면, 사람마다 세그먼테이션)를 수행하여 각 세 그먼트 영역마다 점수를 부여한다. 영상 리타겟팅 프로그램은 각 세그먼트 영역마다 부여된 점수(Saliency map)와 인스턴스 세그먼트 (Instance Segmentation)를 수행한 결과를 합쳐서 보전 마스크(Preservation mask)(M)를 생성한다. 영상 리타겟팅 프로그램은 입력 이미지(I)로부터 보존 마스크(M)를 설정할 영역을 예측한다. 영상 리타겟 팅 프로그램은 인스턴스 세그멘테이션 또는 오브젝트 디텍션을 샐리언시 맵과 결합하여 보존 마스크(M)를설정할 영역을 예측할 수 있다. 영상 리타겟팅 프로그램은 중요한 영역을 판별하여 유지하기 위한 보존 마스크(M)를 생성한다. 즉, 영상 리타겟팅 프로그램은 일반적인 심 카빙을 수행하는 것이 아니라 각 세그먼트 영역마다 부여된 점수 (Saliency map)와 인스턴스 세그먼트(Instance Segmentation)를 수행한 결과를 합쳐서 중요한 영역으로 판별되 는 곳에 보전 마스크(M)를 설정한다. 일반적인 심 카빙 방식에도 마스크를 설정하나 본 실시예에서는 영상 리타겟팅 프로그램이 보존 마스크 (M)를 설정할 때, 보존 마스크(M) 영역을 세그먼테이션하여 점수를 부여하여, 의미 있는 영역만을 보존 마스크 (M)로 설정한다. 세그먼테이션 영역 중 점수가 낮은 영역은 보존하지 않는다. 다시 말해, 일반적인 심 카빙 방 식에서는 마스크를 만들 때 사람이 직접 영역 또는 개체를 선택하였으나, 본 실시예에서는 영상 리타겟팅 프로 그램 인공지능을 이용하여 영역 또는 객체를 자동으로 보존 마스크(M)로 설정한다. 심 카빙 알고리즘은 사람이 관심을 가지지 않는 영역을 라인으로 찾은 다음에 라인으로 채우면서 영상을 확장시 키는 방식이다. 에너지 맵은 각각의 픽셀값마다 점수값이 부여되고, 점수값을 맵 형태로 펼쳐진 것을 의미한다. 심 카빙 알고리즘은 점수값을 픽셀에서의 그래디언트 매그니튜드로 계산한다. 그래디언트 매그니튜드는 픽셀값을 기준으로 예컨대, 왼쪽에 있는 픽셀값과 차이와 위쪽에 있는 픽셀값의 차이 값의 절대값의 합을 의미한다. 영상 내에서의 변화량이 큰 영역은 사람이 존재하는 영역은 변화량이 크기 때문 에, 마스크를 씌우지 않아도, 라인을 피해나갈 수 있다. 심 카빙 방식은 이미지를 연장할 때, 채워야하는 라인을 채우는 방식을 의미하며, 영상을 확장 또는 축소시킬 수 있다. 영상을 축소할 때는 라인을 찾은 다음 라인을 그대로 제거한다. 라인이 불필요하다고 판단하고, 라인 을 찾아서 합치면서 줄여나간다. 영상을 확장할 때는 라인을 찾은 다음 라인을 2배로 확장한다. 라인을 확장한 다음에 적당한 값(보간값(interpolation))을 채워 넣는다. 심 카빙 방식은 마스킹을 필요한 경우, 특정 영역에 마스크를 씌울 수 있다. 라인을 찾기 전에 에너지 맵을 구 성하며, 에너지 맵은 그래디언트 매그니튜드로 계산한다. 예컨대, 붉은 마스크는 에너지를 최대값으로 만들게 되며, 보존할 영역에 씌워진 붉은 마스크는 라인을 피할 수 있다. 예컨대, 녹색 마스크는 에너지를 최소값으로 만들게 되며, 지워야할 영역에 씌워진 녹색 마스크는 라인을 지나게 된다. 일반적인 심 카빙 방식에서는 사람이 직접 마스킹했으나, 본 실시예에서는 사람이 관심을 갖는 영역을 선별하여 마스킹을 수행한다. 영상 리타겟팅 프로그램은 입력 이미지(I)에서 보전 마스크(M)를 제외한 나머지에 대해서만 심 카빙(Seam Carving)을 수행하며, 보존 마스크(M)의 영역을 보존하면서 라인 삽입 이미지(I+)를 획득한다. 영상 리타겟팅 프로그램은 입력 이미지(I)에서 심 카빙을 수행할 때, 예컨대, 8k 정답 이미지(IR)를 심 카 빙하면서 줄여나가면서 에너지 맵을 순차적으로 생성한 후 정보 제거하면서 원래의 입력 이미지(I)를 만든 다음, 다시 입력 이미지(I)를 기반으로 정답 이미지(IR)을 만드는 과정을 학습한다. 즉, 영상 리타겟팅 프로그램은 심 카빙을 역으로 수행한 결과값을 기반으로 다시 학습할 수 있다. 영상 리 타겟팅 프로그램은 확장된 원본 영역(정답 이미지(IR))을 역으로 심 카빙하여 축소된 이미지를 생성한다. 영상 리타겟팅 프로그램은 축소된 이미지를 가지고 심 카빙하여 정답 이미지(IR)을 만드는 학습을 수행한다. 영상 리타겟팅 프로그램은 라인 삽입 이미지(I+)의 삽입된 라인을 마스크로 하여 영상 비율이 확장된 리타 겟 이미지(I^ R)를 예측한다. 즉, 영상 리타겟팅 프로그램은 심 카빙과 인페이팅 기술을 활용하여 영상의 비 율을 확장한다. 영상 리타겟팅 프로그램은 학습을 수행하기 위해 정답 이미지(IR)로부터 보존 마스크(M)를 예측한다. 영상 리타겟팅 프로그램은 보존 마스크(M)의 영역을 보존하면서 라인 삭제 이미지(I-)를 획득한다. 영상 리타겟 팅 프로그램은 라인 삭제 이미지(I-)와 리타겟 이미지(IR)을 쌍으로 하여 학습 데이터를 구성한다. 도 4는 본 실시예에 따른 영상 비율을 확장하는 방법을 설명하기 위한 순서도이다. 영상 리타겟팅 프로그램은 입력 이미지(Input Image)(I)를 입력받는다(S410). 영상 리타겟팅 프로그램 은 입력 이미지(I)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정한다(S420). 단계 S420에서, 영상 리타겟팅 프로그램은 입력 이미지(I)에 대해 인스턴스 세그먼트(Instance Segmentation)을 수행하고, 각 세그멘테이션 영역마다 부여된 점수(Saliency Map)와 인스턴스 세그먼트 (Instance Segmentation)를 수행한 결과를 합쳐서 중요한 영역으로 판별되는 곳에 보전 마스크(M)를 설정한다. 영상 리타겟팅 프로그램은 입력 이미지(I)로부터 보존 마스크(M)를 제외한 영역에 대한 모든 화소(Pixel) 에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성한다(S430). 영상 리타겟팅 프로그램은 입력 이미지(I)에 대한 에너지 맵에서 상대적으로 중요도가 낮은 화소의 연결로 이루어지는 라인(Line)을 탐색하여 추출한다(S440). 영상 리타겟팅 프로그램은 입력 이미지(I) 내의 보존 마스크(M)의 영역을 보존하면서 라인 삽입 이미지 (I+)를 획득한다(S450). 영상 리타겟팅 프로그램은 미리 기계 학습 기반으로 학습된 인공지능 모델을 이용하여 라인 삽입 이미지 (I+)를 영상 비율이 확장된 리타겟 이미지(I^ R)로 생성한다(S460). 도 4에서는 단계 S410 내지 단계 S460을 순차적으로 실행하는 것으로 기재하고 있으나, 반드시 이에 한정되는 것은 아니다. 다시 말해, 도 4에 기재된 단계를 변경하여 실행하거나 하나 이상의 단계를 병렬적으로 실행하는 것으로 적용 가능할 것이므로, 도 4는 시계열적인 순서로 한정되는 것은 아니다. 전술한 바와 같이 도 4에 기재된 본 실시예에 따른 영상 비율을 확장하는 방법은 프로그램으로 구현되고 컴퓨터 로 읽을 수 있는 기록매체에 기록될 수 있다. 본 실시예에 따른 영상 비율을 확장하는 방법을 구현하기 위한 프 로그램이 기록되고 컴퓨터가 읽을 수 있는 기록매체는 컴퓨터 시스템에 의하여 읽혀질 수 있는 데이터가 저장되 는 모든 종류의 기록장치를 포함한다. 도 5는 본 실시예에 따른 영상 비율을 축소하는 방법을 설명하기 위한 순서도이다. 영상 리타겟팅 프로그램은 정답 이미지(IR)를 입력받는다(S510). 영상 리타겟팅 프로그램은 정답 이 미지(IR)의 일부 영역을 보존 마스크(Preservation Mask)(M)로 설정한다(S520). 단계 S520에서, 영상 리타겟팅 프로그램은 정답 이미지(IR)에 대한 인스턴스 세그멘테이션(Instance Segmentation) 또는 오브젝트 디텍션(object detection)을 샐리언시 맵(Saliency Map)과 결합하는 방식을 이용 하여 보존 마스크(M)를 설정한다. 영상 리타겟팅 프로그램은 정답 이미지(IR)에 대한 인스턴스 세그먼트(Instance Segmentation)을 수행하고, 각 세그멘테이션 영역마다 부여된 점수(Saliency map)와 인스턴스 세그먼트(Instance Segmentatio n)를 수행한 결과를 합쳐서 중요한 영역으로 판별되는 곳에 보전 마스크(M)를 설정한다. 영상 리타겟팅 프로그램은 정답 이미지(IR)로부터 보존 마스크(M)를 제외한 영역에 대해 모든 화소(Pixe l)에 대해 중요도를 계산하고, 각 화소의 중요도로 구성된 에너지 맵(Energy Map)을 생성한다(S530). 영상 리타겟팅 프로그램은 정답 이미지(IR)에 대한 에너지 맵 내의 상대적으로 중요도가 낮은 화소의 연결 로 이루어지는 라인(Line)을 탐색하여 추출한다(S540). 영상 리타겟팅 프로그램은 정답 이미지(IR) 내의 보존 마스크(M)의 영역을 보존하면서 라인 삭제 이미지(I- )를 획득한다(S550). 영상 리타겟팅 프로그램은 인공지능 모델을 이용하여 라인 삭제 이미지(I-)를 영상 비율이 축소된 리타겟 이미지로 생성한다(S560). 도 5에서는 단계 S510 내지 단계 S560을 순차적으로 실행하는 것으로 기재하고 있으나, 반드시 이에 한정되는 것은 아니다. 다시 말해, 도 5에 기재된 단계를 변경하여 실행하거나 하나 이상의 단계를 병렬적으로 실행하는 것으로 적용 가능할 것이므로, 도 5는 시계열적인 순서로 한정되는 것은 아니다. 전술한 바와 같이 도 5에 기재된 본 실시예에 따른 영상 비율을 축소하는 방법은 프로그램으로 구현되고 컴퓨터 로 읽을 수 있는 기록매체에 기록될 수 있다. 본 실시예에 따른 영상 비율을 축소하는 방법을 구현하기 위한 프로그램이 기록되고 컴퓨터가 읽을 수 있는 기록매체는 컴퓨터 시스템에 의하여 읽혀질 수 있는 데이터가 저장되 는 모든 종류의 기록장치를 포함한다. 이상의 설명은 본 실시예의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 실시예가 속하는 기술 분 야에서 통상의 지식을 가진 자라면 본 실시예의 본질적인 특성에서 벗어나지 않는 범위에서 다양한 수정 및 변 형이 가능할 것이다. 따라서, 본 실시예들은 본 실시예의 기술 사상을 한정하기 위한 것이 아니라 설명하기 위 한 것이고, 이러한 실시예에 의하여 본 실시예의 기술 사상의 범위가 한정되는 것은 아니다. 본 실시예의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 실시예의 권리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2019-0175874", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1a,1b,1c는 본 실시예에 따른 영상 비율을 확장 또는 축소하기 위한 영상 리타겟팅 장치를 개략적으로 나타 낸 블럭 구성도이다. 도 2a,2b,2c는 본 실시예에 따른 영상 리타겟팅 장치 내에 탑재되는 영상 리타겟팅 프로그램을 개략적으로 나타 낸 블럭 구성도이다. 도 3은 본 실시예에 따른 영상 비율을 확장 또는 축소하는 방식을 나타낸 도면이다. 도 4는 본 실시예에 따른 영상 비율을 확장하는 방법을 설명하기 위한 순서도이다. 도 5는 본 실시예에 따른 영상 비율을 축소하는 방법을 설명하기 위한 순서도이다."}
