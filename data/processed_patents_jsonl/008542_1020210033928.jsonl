{"patent_id": "10-2021-0033928", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2022-0129265", "출원번호": "10-2021-0033928", "발명의 명칭": "설명가능 AI 기반 불량검출 장치 및 방법", "출원인": "현대모비스 주식회사", "발명자": "김태현"}}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "컴퓨팅 장치가 수행하는 불량검출 방법에 있어서, 검사 대상인 제품에 대한 이미지를 획득하는 과정;상기 이미지를 기반으로 딥러닝 기반의 제1 분류모델을 이용하여 상기 제품의 양/불량에 대한 판정결과를 생성하고, 상기 판정결과에 대한 판정근거를 제공하는 과정, 여기서, 상기 제1 분류모델은 프리트레이닝(pre-training)되거나 업데이트된 채로 저장되어 있는 제2 분류모델과 동일한 파라미터를 가짐; 및상기 제품의 판정근거가 이상치로 판단된 경우, 상기 제1 분류모델에 대한 적응화(adaptation)를 수행하는 과정을 포함하되,상기 적응화를 수행하는 과정은,상기 판정근거에 대한 유형(category)을 포함하는 유형집합을 업데이트하는 과정; 및상기 제2 분류모델 및 업데이트된 유형집합을 이용하여 상기 제1 분류모델을 트레이닝하는 과정을 포함하는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 트레이닝을 위한 출현(seen) 데이터 및 대응하는 타겟 판정결과를 이용하여 상기 제2 분류모델에 대한 프리트레이닝을 수행하고, 상기 출현 데이터를 이용하여 상기 제2 분류모델이 생성한 판정근거의 유형을 분류함으로써상기 유형집합을 초기화하는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서, 상기 제품의 판정근거와 상기 유형집합에 포함된 유형 각각에 대한 대표값 간의 차이 모두가 기설정된 기준값보다 큰 경우, 상기 판정근거를 상기 이상치로 판단하는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서, 상기 유형집합을 업데이트하는 과정은,상기 제1 분류모델로 하여금 상기 이상치 및 대응하는 판정결과를 생성하도록 하는 이미지를 미출현(unseen) 데이터로 분류하고, 상기 이상치에 대응하는 판정결과를 상기 타겟 판정결과에 포함시키는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 제1 분류모델을 트레이닝하는 과정은, 상기 출현 데이터를 이용하는 잠재공간 매칭(latent space matching) 과정; 및상기 미출현 데이터를 이용하는 정밀조정(fine-tuning) 과정을 포함하되, 상기 제1 분류모델의 성능이 기설정된 기준성능을 만족할 때까지, 상기 제1 분류모델에 대해 상기공개특허 10-2022-0129265-3-잠재 공간 매칭 과정, 및 상기 정밀조정 과정을 반복적으로 수행하는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서,상기 잠재공간 매칭 과정은, 제1 손실함수(loss function)를 감소시키는 방향으로 상기 제1 분류모델의 파라미터를 업데이트시키되, 상기 제1 손실함수는, 상기 출현 데이터를 이용하여 상기 제1 분류모델이 생성하는 판정근거와 상기 출현 데이터를 이용하여 상기 제2 분류모델이 생성하는 판정근거 간의 차이에 기반하여 정의되는 것을 특징으로 하는 불량검출방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제5항에 있어서,상기 정밀조정 과정은,제2 손실함수를 감소시키는 방향으로 상기 제1 분류모델의 파라미터를 업데이트시키되, 상기 제2 손실함수는,상기 미출현 데이터를 이용하여 상기 제1 분류모델이 생성하는 판정결과와 대응되는 타겟 판정결과 간의 차이에기반하여 정의되는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제5항에 있어서, 상기 제1 분류모델을 트레이닝하는 과정은,상기 제1 분류모델의 성능이 상기 기설정된 기준성능을 만족한 후, 상기 제1 분류모델의 파라미터를 상기 제2분류모델 측으로 복사하여 상기 제2 분류모델을 업데이트하고, 상기 미출현 데이터를 상기 출현 데이터에 포함시키는 것을 특징으로 하는 불량검출 방법."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "검사 대상인 제품에 대한 이미지를 획득하는 입력부;상기 이미지를 기반으로 딥러닝 기반의 제1 분류모델을 이용하여 상기 제품의 양/불량에 대한 판정결과를 생성하고, 상기 판정결과에 대한 판정근거를 제공하는 제품검사부, 여기서, 상기 제1 분류모델은 프리트레이닝(pre-training)되거나 업데이트된 채로 저장되어 있는 제2 분류모델과 동일한 파라미터를 가짐; 및상기 제품의 판정근거가 이상치로 판단된 경우, 상기 제1 분류모델에 대한 적응화(adaptation)를 수행하는 적응화부를 포함하되,상기 적응화부는,상기 판정근거에 대한 유형(category)을 포함하는 유형집합을 업데이트하는 유형집합 생성부; 및상기 제2 분류모델 및 업데이트된 유형집합을 이용하여 상기 제1 분류모델을 트레이닝하는 트레이닝부를 포함하는 것을 특징으로 하는 불량검출 장치."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서, 상기 제1 분류모델 및 제2 분류모델 각각은,인코더, 설명가능 AI(eXplainable Artificial Intelligence: XAI), 및 전연결 레이어를 포함하여, 상기 인코더는 상기 이미지로부터 잠재 벡터(latent vector)를 생성하고, 상기 XAI는 상기 잠재 벡터로부터 상기 판정근거를 생성하고, 상기 전연결 레이어는 상기 잠재 벡터로부터 상기 판정결과를 생성하는 것을 특징으로 하는 불량검출 장치.공개특허 10-2022-0129265-4-청구항 11 제9항에 있어서, 상기 트레이닝부는,트레이닝을 위한 출현(seen) 데이터 및 대응하는 타겟 판정결과를 이용하여 상기 제2 분류모델에 대한 프리트레이닝을 수행하는 것을 특징으로 하는 불량검출 장치."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서, 상기 유형집합 생성부는, 상기 프리트레이닝을 위한 출현 데이터를 이용하여 상기 제2 분류모델이 생성한 판정근거의 유형을 분류함으로써, 상기 유형집합을 초기화하는 것을 특징으로 하는 불량검출 장치."}
{"patent_id": "10-2021-0033928", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제1항 내지 제8항 중 어느 한 항에 따른 불량검출 방법이 포함하는 각 단계를 실행시키기 위하여 컴퓨터로 읽을수 있는 기록매체에 저장된 컴퓨터프로그램."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "설명가능 AI 기반 불량검출 장치 및 방법을 개시한다. 본 실시예는, 제품에 대한 이미지를 기반으로 딥러닝 기반 분류모델을 이용하여 제품의 양/불량을 판정함에 있어 서, 설명 가능한 인공지능(eXplainable AI: XAI)을 이용하여 분류모델이 제공하는 양/불량에 대한 판단 근거를 제공하고, 판단 근거에 대한 유형집합을 생성하며, 유형집합을 이용하여 분류모델의 파라미터를 지속적으로 업데 이트하는 불량검출 장치 및 방법을 제공한다."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 설명가능 AI 기반 불량검출 장치 및 방법에 관한 것이다. 더욱 상세하게는, 제품에 대한 이미지를 기 반으로 딥러닝 기반 분류모델을 이용하여 제품의 양/불량을 판정함에 있어서, 설명 가능한 인공지능 (eXplainable AI: XAI)을 이용하여 분류모델이 제공하는 양/불량에 대한 판단 근거를 제공하고, 판단 근거에 대 한 유형집합을 생성하며, 유형집합을 이용하여 분류모델의 파라미터를 지속적으로 업데이트하는 불량검출 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "이하에 기술되는 내용은 단순히 본 발명과 관련되는 배경 정보만을 제공할 뿐 종래기술을 구성하는 것이 아니다. 규칙기반 알고리즘을 이용하는 불량검출 방법에 비해, 딥러닝 기반 불량검출 방법은 더욱 정교한 제품검사를 수 행함으로써, 품질 관리 수준을 향상시킬 수 있다는 장점을 갖는다. 하지만 딥러닝 기술이 실제 공정에 적용되었 을 때, 기존의 규칙기반 머신비전 기술에 비해 관리 감독이 어려울 수 있다. 이는 딥러닝 기반 불량검출 방법이 제품의 양/불량에 대한 명확한 판정근거를 제시하지 못할 수 있기 때문이다. 따라서, 불량 발생 시, 원인 분석 이 어려울 뿐만 아니라 알고리즘의 정상 작동 여부를 파악하는 것 또한 어려울 수 있다. 이러한 문제는, 딥러닝 기반 알고리즘에 대한 입증된 성능에도 불구하고 실제 공정 적용 시에 기술장벽으로 작용할 수 있다. 또한, 딥러닝 기반 머신비전이 적용된 불량검출 방법은, 양/불량 판정에 다양한 근거가 존재함에도 불구하고, 단지 양/불량이라는 두 가지 결과만을 제공한다. 환경 변화 또는 공정 이슈의 발생으로 인하여 딥러닝 알고리즘 의 파라미터가 업데이트될 필요가 있다. 단지 판정결과가 제공되기 때문에 딥러닝 알고리즘의 파라미터에 대한 업데이트가 적절한 시기에 진행되지 않는다면, 추후 딥러닝 알고리즘은 제품에 대한 지속적인 오판정을 유발할 수 있다. 이러한 오판정의 지속에 따른 낮은 직행률(nonadjusted ratio)은, 최종적으로 생산 과정에서 심각한 손해를 발생시킬 수 있다. 따라서, 불량검출 방법의 활용 및 유지보수 측면에서, 딥러닝 알고리즘의 판정결과에 대한 설명 가능한 근거를 제시하는 방안, 및 이러한 설명 가능한 근거를 기반으로 딥러닝 알고리즘을 업데이트 할 수 있는 방안이 고려될 필요가 있다."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시는, 제품에 대한 이미지를 기반으로 딥러닝 기반 분류모델을 이용하여 제품의 양/불량을 판정함에 있어 서, 설명 가능한 인공지능(eXplainable Artificial Intelligence: XAI)을 이용하여 분류모델이 제공하는 양/불 량에 대한 판단 근거를 제공하고, 판단 근거에 대한 유형집합을 생성하며, 유형집합을 이용하여 분류모델의 파 라미터를 지속적으로 업데이트함으로써, 환경 변화에 맞게 분류모델을 적응시키는 불량검출 장치 및 방법을 제 공하는 데 주된 목적이 있다."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 개시의 실시예에 따르면, 컴퓨팅 장치가 수행하는 불량검출 방법에 있어서, 검사 대상인 제품에 대한 이미지 를 획득하는 과정; 상기 이미지를 기반으로 딥러닝 기반의 제1 분류모델을 이용하여 상기 제품의 양/불량에 대 한 판정결과를 생성하고, 상기 판정결과에 대한 판정근거를 제공하는 과정, 여기서, 상기 제1 분류모델은 프리 트레이닝(pre-training)되거나 업데이트된 채로 저장되어 있는 제2 분류모델과 동일한 파라미터를 가짐; 및 상 기 제품의 판정근거가 이상치로 판단된 경우, 상기 제1 분류모델에 대한 적응화(adaptation)를 수행하는 과정을 포함하되, 상기 적응화를 수행하는 과정은, 상기 판정근거에 대한 유형(category)을 포함하는 유형집합을 업데 이트하는 과정; 및 상기 제2 분류모델 및 업데이트된 유형집합을 이용하여 상기 제1 분류모델을 트레이닝하는 과정을 포함하는 것을 특징으로 하는 불량검출 방법을 제공한다. 본 개시의 다른 실시예에 따르면, 검사 대상인 제품에 대한 이미지를 획득하는 입력부; 상기 이미지를 기반으로 딥러닝 기반의 제1 분류모델을 이용하여 상기 제품의 양/불량에 대한 판정결과를 생성하고, 상기 판정결과에 대 한 판정근거를 제공하는 제품검사부, 여기서, 상기 제1 분류모델은 프리트레이닝(pre-training)되거나 업데이트 된 채로 저장되어 있는 제2 분류모델과 동일한 파라미터를 가짐; 및 상기 제품의 판정근거가 이상치로 판단된 경우, 상기 제1 분류모델에 대한 적응화(adaptation)를 수행하는 적응화부를 포함하되, 상기 적응화부는, 상기 판정근거에 대한 유형(category)을 포함하는 유형집합을 업데이트하는 유형집합 생성부; 및 상기 제2 분류모델 및 업데이트된 유형집합을 이용하여 상기 제1 분류모델을 트레이닝하는 트레이닝부를 포함하는 것을 특징으로 하는 불량검출 장치를 제공한다. 본 개시의 다른 실시예에 따르면, 불량검출 방법이 포함하는 각 단계를 실행시키기 위하여 컴퓨터로 읽을 수 있 는 기록매체에 저장된 컴퓨터프로그램을 제공한다."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이상에서 설명한 바와 같이 본 실시예에 따르면, 설명 가능한 인공지능을 이용하여 딥러닝 기반 분류모델이 제 공하는 양/불량에 대한 판단 근거를 제공하고, 판단 근거에 대한 유형집합을 생성하며, 유형집합을 이용하여 분 류모델의 파라미터를 지속적으로 업데이트하는 불량검출 장치 및 방법을 제공함으로써, 딥러닝 알고리즘의 활용 및 유지보수 측면에서, 환경 변화에 따른 불량 원인에 대한 실시간 적응, 및 새로운 유형의 불량에 대한 유연한 대처가 가능해지는 효과가 있다. 또한 본 실시예에 따르면, 설명 가능한 인공지능을 이용하여 딥러닝 기반 분류모델이 제공하는 양/불량에 대한 판단 근거를 제공하는 불량검출 장치 및 방법을 제공함으로써, 이미지 내에서 불량 판정의 원인이 되는 특정한 잠재적 결함 요소를 파악하여 제품생산 공정과 관련된 새로운 노하우(knowhow)를 축적하는 것이 가능해지는 효 과가 있다."}
{"patent_id": "10-2021-0033928", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 발명의 실시예들을 예시적인 도면을 참조하여 상세하게 설명한다. 각 도면의 구성요소들에 참조부호를 부가함에 있어서, 동일한 구성요소들에 대해서는 비록 다른 도면상에 표시되더라도 가능한 한 동일한 부호를 가지도록 하고 있음에 유의해야 한다. 또한, 본 실시예들을 설명함에 있어, 관련된 공지 구성 또는 기능에 대한 구체적인 설명이 본 실시예들의 요지를 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명은 생략한다. 또한, 본 실시예들의 구성요소를 설명하는 데 있어서, 제 1, 제 2, A, B, (a), (b) 등의 용어를 사용할 수 있다. 이러한 용어는 그 구성요소를 다른 구성요소와 구별하기 위한 것일 뿐, 그 용어에 의해 해당 구성요소의 본질이나 차례 또는 순서 등이 한정되지 않는다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 '포함', '구비'한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소를 제외하는 것이 아니라 다른 구성요 소를 더 포함할 수 있는 것을 의미한다. 또한, 명세서에 기재된 '…부', '모듈' 등의 용어는 적어도 하나의 기 능이나 동작을 처리하는 단위를 의미하며, 이는 하드웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으 로 구현될 수 있다. 첨부된 도면과 함께 이하에 개시될 상세한 설명은 본 발명의 예시적인 실시형태를 설명하고자 하는 것이며, 본 발명이 실시될 수 있는 유일한 실시형태를 나타내고자 하는 것이 아니다. 본 실시예는 설명가능 AI 기반 불량검출 장치 및 방법에 관한 내용을 개시한다. 보다 자세하게는, 제품에 대한 이미지를 기반으로 딥러닝(deep learning) 기반 분류모델(classification model)을 이용하여 제품의 양/불량 (good/no good)을 판정함에 있어서, 설명 가능한 인공지능(eXplainable AI: XAI)을 이용하여 분류모델이 제공하 는 양/불량에 대한 판단 근거를 제공하고, 판단 근거에 대한 유형집합(category set)을 생성하며, 유형집합을 이용하여 분류모델의 파라미터를 지속적으로 업데이트하는 불량검출 장치 및 방법을 제공한다. 이하의 본 개시에 대한 설명에서, 분류모델은 제1 분류모델과 동일한 딥러닝 기반 신경망(neural network)을 나 타낸다. 한편, 제2 분류모델은 제1 분류모델과 동일한 구조를 갖는 신경망으로서, 제1 분류모델을 백업(backu p)하기 위해 이용된다. 또한, 제1 분류모델의 파라미터를 업데이트하는 과정에서 제2 분류모델이 이용될 수 있 다. 도 1은 본 개시의 일 실시예에 따른 불량검출 장치에 대한 개념적인 블록도이다. 본 실시예에 따른, 불량검출 장치는 제품에 대한 이미지를 기반으로 딥러닝 기반 분류모델을 이용하여 제 품의 양/불량을 판정한다. 또한, 불량검출 장치는 설명 가능한 인공지능(eXplainable AI: XAI)을 이용하여 분류모델이 제공하는 양/불량에 대한 판단 근거를 제공하고, 판단 근거에 대한 유형집합을 생성하며, 유형집합 을 이용하여 분류모델의 파라미터를 지속적으로 업데이트한다. 불량검출 장치는 입력부, 제품검사부 및 유형집합 생성부의 전부 또는 일부를 포함한다. 여기서, 본 실시예에 따른 불량검출 장치에 포함되는 구성요소가 반드시 이에 한정되는 것은 아니다. 예컨대, 불량검출 장치는 분류모델의 프리트레이 닝(pre-training) 및 트레이닝을 위한 트레이닝부(미도시)를 추가로 구비하거나, 외부의 트레이닝부와 연동되는 형태로 구현될 수 있다. 도 1의 도시는 본 실시예에 따른 예시적인 구성이며, 입력의 형태, XAI 기반의 판정근거의 형태, 분류모델의 구 조, 유형집합 생성 방법 등에 따라 다른 구성요소 또는 구성요소 간의 다른 연결을 포함하는 다양한 구현이 가 능하다. 입력부는 머신비전(machine vision) 카메라로부터 제품의 이미지를 획득한다. 여기서, 이미지는 검사의 대 상이 되는 제품을 촬영한 것이다. 예컨대, 대상 제품에 포함된 PCB(Printed Circuit Board)를 검사하는 경우, 이미지는 PCB를 촬영한 것이다. 대상 제품의 외관을 촬영하는 경우, 이미지는 제품의 외관을 촬영한 것일 수 있 다. 또는, 대상 제품이 디스플레이를 포함하는 경우, 디스플레이되는 영상을 머신비전 카메라로 촬영한 것일 수 있다. 제품검사부는 이미지를 기반으로 딥러닝 기반 분류모델(제1 분류모델)을 이용하여 제품의 양/불량에 대한 판정결과를 생성한다. 또한, 분류모델은 판정결과에 대한 XAI 기반의 판정근거를 생성한다. 판정근거는 직관적 으로 인지하기 쉬운 시각적 결과물로 표현될 수 있는데, 제품검사부는 입력으로 이용된 이미지 상에 히트 맵(heat map) 형태로 판정근거를 제공할 수 있다. 분류모델(또한, 제2 분류모델)은, 도 2에 예시된 바와 같이, 인코더, XAI 및 전연결 레이어(fully-connected layer)를 포함한다. 여기서, 인코더는 제품에 대한 이미지로부터 특성 맵(feature map)을 추출하는 기능을 수행 하며, 예컨대, 영상처리에 적합하다고 알려진 신경망인 CNN(Convolutional Neural Network)을 이용하여 구현될 수 있다. 이하, 인코더가 추출하여 최종적으로 출력하는 특성 맵을 잠재 벡터(latent vector)로 나타낸다. 전연결 레이어는 인코더의 출력인 잠재 벡터를 기반으로 제품의 양/불량에 대한 판정 결과를 생성한다. 한편, XAI는 잠재 벡터를 이용하여 판정결과에 대응되는 판정근거를 생성한다. XAI는 고정 파라미터를 갖는 알 고리즘이다. 이러한 XAI 알고리즘으로는 응답 맵 기반의(response map based) CAM(Class Activation Mapping) 및 ABN(Attention Branch Network) 알고리즘, 특이 마스크 기반의(saliency mask based) GradCAM(Gradient- weighted CAM) 및 GradCAM++ 알고리즘 등이 이용될 수 있다. 본 실시예에 따른 트레이닝부는 학습을 위한 출현(seen) 데이터 및 대응되는 타겟 판정결과를 이용하여 제2 분 류모델을 프리트레이닝시킨다. 여기서, 출현 데이터는 프리트레이닝을 위해 사전에 확보된 이미지를 나타낸다. 트레이닝부는 출현 데이터를 기반으로 제2 분류모델이 추론한 판정결과와 타겟 판정결과 간의 거리(distance)에 기반하여 손실함수(loss function)를 정의하고, 손실함수를 감소시키는 방향으로 제2 분류모델의 파라미터를 업 데이트함으로써, 프리트레이닝을 수행한다. 여기서 거리는 L1 메트릭(metric), L2 메트릭 등, 두 비교 대상 간 의 거리 차이를 표현할 수 있는 어느 것이든 이용될 수 있다. 한편, 프리트레이닝 과정에서, 트레이닝부는 제2 분류모델의 모든 구성요소(인코더 및 전연결 레이어)의 파라미 터를 업데이트할 수 있다. 유형집합 생성부는, 제2 분류모델에 대한 프리트레이닝이 종료된 후, 제2 분류모델이 출현 데이터로부터 생성한 판정근거인 히트맵을 분류하여, 양/불량 판정결과에 대해 복수의 유형(category)을 생성함으로써, 유형 집합을 초기화한다. 판정근거를 유형화하기 위한 유형화 알고리즘으로는 k-평균법(k-means), kNN(k Nearest Neighbors), GMM(Gaussian Mixture Model) 등이 이용될 수 있다. 유형화 알고리즘은 판정근거 간의 유사도 (similarity)를 기반으로 유사한 판정근거들을 그룹으로 묶음으로써 판정근거에 대한 유형화를 수행할 수 있다. 여기서, 유사도로는 유클리드(Euclid) 거리, 마할라노비스(Mahalanobis) 거리, 밀도함수 등이 이용될 수 있다. 유형집합은, 양품 판정결과에 대응되는 유형들의 집합과 불량 판정결과에 대응되는 유형들의 집합의 합집합으로 표현될 수 있다. 유형집합은 포함된 유형들 각각에 대한 대표 히트맵(또는 대표 벡터)을 포함한다. 대표 히트맵 은, 판정근거의 유형화에 이용되는 유형화 알고리즘 및 유사도에 따라 다르게 생성될 수 있다. 제품검사부는 프리트레이닝되거나 업데이트된 채로 저장되어 있는 제2 분류모델의 파라미터를 분류모델로 복사한 후, 분류모델을 이용하여 불량검출을 수행한다. 판정근거에 이상치(abnormal value)가 발생하는 경우, 제품검사부는 해당되는 판정근거 및 판정결과를 유 형집합 생성부 측으로 전달한다. 여기서, 임의의 판정근거와 각 유형집합에 포함된 유형 각각에 대한 대표 히트맵 간의 유사도 차이가 모두 기설정된 기준값보다 큰 경우, 이러한 임의의 판정근거를 이상치로 나타낸다. 한편, 판정결과의 양/불량 여부와 무관하게 이상치가 발생할 수 있다. 유형집합 생성부는, 판정근거에 이상치가 발생하는 경우, 이상치를 신규 판정근거로 분류함으로써 유형집 합을 업데이트할 수 있다. 업데이트된 유형집합은, 다음 순서의 제품에 대한 추후 불량검사 과정에서 판정근거 중 이상치의 발생을 확인하기 위한 용도로 이용될 수 있다. 유형집합 생성부는, 분류모델로 하여금 이상치 및 대응되는 판정결과를 생성하도록 하는 이미지를 미출현 (unseen) 데이터로 분류한다. 또한 유형집합 생성부는 이상치에 대응되는 판정결과를 트레이닝을 위한 타 겟 판정결과에 포함시킴으로써 타겟 판정결과를 업데이트할 수 있다. 유형집합 생성부는 미출현 데이터, 업데이트된 타겟 판정결과 등을 트레이닝부 측에 제공한다. 트레이닝부는 (i) 저장하고 있던 출현 데이터와 제2 분류모델, 및 (ii) 미출현 데이터와 업데이트된 타겟 판정 결과를 이용하여 분류모델에 대한 트레이닝을 수행할 수 있다. 분류모델에 대한 트레이닝 과정은 추후 설명하기 로 한다. 도 3은 본 개시의 일 실시예에 따른 불량검출 방법의 흐름도이다. 불량검출 장치는 검사 대상인 제품에 대한 이미지를 획득한다(S300). 불량검출 장치는 이미지를 기반으로 분류모델을 이용하여 제품의 양/불량에 대한 판정결과를 생성하고, 판 정결과에 대해 XAI 기반의 판정근거를 제공한다(S302). 여기서, 분류모델은 프리트레이닝된 제2 분류모델의 파 라미터를 복사하여 형성된다. 또는, 분류모델은 업데이트된 채로 저장되어 있는 제2 분류모델과 동일한 파라미 터를 갖는다. 전술한 바와 같이, 불량검출 장치의 트레이닝부는, 학습을 위한 출현(seen) 데이터 및 대응 되는 타겟 판정결과를 기반으로 제2 분류모델에 대한 프리트레이닝을 수행할 수 있다. 불량검출 장치는 유형집합을 이용하여 제품의 판정근거가 이상치인지의 여부를 판단한다(S304). 여기서, 임의의 판정근거와 유형집합에 포함된 유형 각각에 대한 대표 히트맵 간의 유사도 차이가 모두 기설정된 기준치 보다 큰 경우, 이러한 임의의 판정근거를 이상치로 나타낸다. 판정근거가 이상치가 아닌 경우, 해당 제품에 대한 검사과정을 종료하고, 다음 순서의 제품에 대한 불량검사가 지속될 수 있다. 판정근거가 이상치인 경우, 불량검출 장치는 분류모델에 대한 적응화 과정을 수행한다. 본 개시의 다른 실시예에 있어서, 이상치가 발생한 제품이 기설정된 개수 이상 누적된 경우, 분류모델에 대한 적응화 과정을 수행할 수 있다. 분류모델에 대한 적응화 과정(S306 및 S308)은 다음과 같다. 불량검출 장치는 유형집합을 업데이트한다(S306). 불량검출 장치는 이상치를 신규 판정근거로 분류함 으로써 유형집합을 업데이트할 수 있다. 업데이트된 유형집합은, 다음 순서의 제품에 대한 추후 불량검사 과정 에서 판정근거 중 이상치의 발생을 확인하기 위한 용도로 이용될 수 있다. 불량검출 장치는, 분류모델로 하여금 이상치 및 대응되는 판정결과를 생성하도록 하는 이미지를 미출현 데 이터로 분류한다. 또한, 불량검출 장치는 이상치에 대응되는, 양/불량 판정결과를 트레이닝을 위한 타겟 판정결과에 포함시킴으로써 타겟 판정결과를 업데이트할 수 있다. 불량검출 장치는 미출현 데이터, 업데이 트된 타겟 판정결과 등을 트레이닝부 측에 제공한다. 이상에서 설명한 바와 같이 본 실시예에 따르면, 불량검출 장치는, 이상치의 발생에 대해 신규 유형집합을 생성하는 대신 기존의 유형집합을 업데이트함으로써, 신규 데이터의 발생에 따른 불량검사 과정의 중단이 없이, 연속적으로 동작하는 것이 가능해지는 효과가 있다. 불량검출 장치는 제2 분류모델 및 업데이트된 유형집합을 이용하여 분류모델을 트레이닝한다(S308). 분류모델에 대한 트레이닝 과정은 분류모델에 대한 잠재공간 매칭(S320) 및 정밀조정(S322)를 포함한다. 분류모델에 대한 정밀조정(fine-tuning)은 분류모델을 미출현 데이터에 적응시키는 과정이다. 미출현 데이터를 이용하는 정밀조정의 적용에 따라, 출현 데이터를 기반으로 분류모델의 인코더가 생성하는 잠재 벡터가 영향을 받을 수 있다. 잠재공간 매칭(latent space matching)은 이러한 영향을 감소시키기 위해 수행될 수 있다. 또한, 잠재 벡터에 대한 영향이 억제될 수 있다면, 전연결 레이어에 변동성을 줄 필요가 없다. 따라서, 분류모델에 대 한 트레이닝 과정에서는, 분류모델 내 전연결 레이어는 고정된 채로, 인코더의 파라미터가 업데이트될 수 있다. 도 4는 본 개시의 일 실시예에 따른 분류모델에 대한 잠재공간 매칭 과정을 개념적으로 나타낸 예시도이다. 잠재공간 매칭 과정에서, 불량검출 장치의 트레이닝부는, 출현 데이터(S0)에 대해, 분류모델과 제2 분류모 델이 생성하는 잠재 벡터가 상호 일관성(consistency)을 갖도록 분류모델을 트레이닝한다. 트레이닝부는, 출현 데이터를 이용하여 분류모델이 생성하는 판정근거(z1)과 동일한 출현 데이터를 이용하여 제2 분류모델이 생성하 는 판정근거(z2) 간의 차이에 기반하여, 손실함수 Lmatch(z1, z2)를 정의한다. 트레이닝부는 손실함수 Lmatch를 감소 시키는 방향으로 분류모델 내 인코더의 파라미터를 업데이트할 수 있다. 전술한 바와 같이, 분류모델 내 전연결 레이어의 파라미터는 고정된 상태를 유지한다. 도 5는 본 개시의 일 실시예에 따른 분류모델에 대한 정밀조정 과정을 개념적으로 나타낸 예시도이다. 정밀조정 과정에서, 트레이닝부는, 미출현 데이터(S1)를 이용하여 분류모델이 생성하는 판정결과(y1)와 해당하는 타겟 판정결과(yt) 간의 차이에 기반하여, 손실함수 Lclass(y1, yt)를 정의한다. 트레이닝부는 손실함수 Lclass를 감 소시키는 방향으로 분류모델 내 인코더의 파라미터를 업데이트할 수 있다. 전술한 바와 같이, 분류모델 내 전연 결 레이어의 파라미터는 고정된 상태를 유지한다. 불량검출 장치는, 분류모델의 성능이 기설정된 기준성능을 만족하는지에 대한 여부를 확인한다(S324). 여 기서, 분류모델의 성능이 기설정된 기준성능을 만족한다는 것은, 예컨대, 손실함수 Lmatch가 기설정된 제1 기준값 이하로 감소하고, 손실함수 Lclass도 기설정된 제2 기준값 이하로 감소되는 것을 나타낸다. 분류모델의 성능이 기설정된 기준성능을 만족하지 않는 경우, 불량검출 장치는 분류모델에 대한 트레이닝 (S320 및 S322)을 반복하여 수행한다. 분류모델의 성능이 기설정된 기준성능을 만족하는 경우, 불량검출 장치는 분류모델의 파라미터를 제2 분류 모델 측으로 복사하고, 미출현 데이터를 출현 데이터에 포함시킨다(S310), 불량검출 장치는 제2 분류모델 을 저장하고, 출현 데이터를 업데이트함으로써, 분류모델에 대한 트레이닝을 종료한다. 본 실시예에 따른 불량검출 장치가 탑재되는 디바이스(미도시)는 프로그램가능 컴퓨터일 수 있으며, 서버 (미도시)와 연결이 가능한 적어도 한 개의 통신 인터페이스를 포함한다. 전술한 바와 같은 분류모델에 대한 트레이닝은, 불량검출 장치가 탑재되는 디바이스의 컴퓨팅 파워를 이용 하여 불량검출 장치가 탑재되는 디바이스에서 진행될 수 있다. 또는, 분류모델에 대한 트레이닝은 서버에 서 진행될 수 있다. 이상에서 설명한 바와 같이 본 실시예에 따르면, 설명 가능한 인공지능을 이용하여 딥러닝 기반 분류모델이 제 공하는 양/불량에 대한 판단 근거를 제공하는 불량검출 장치 및 방법을 제공함으로써, 딥러닝 알고리즘의 활용 및 유지보수 측면에서, 환경 변화에 따른 불량 원인에 대한 실시간 적응, 및 새로운 유형의 불량에 대한 유연한 대처가 가능해지는 효과가 있다. 본 실시예에 따른 각 순서도에서는 각각의 과정을 순차적으로 실행하는 것으로 기재하고 있으나, 반드시 이에 한정되는 것은 아니다. 다시 말해, 순서도에 기재된 과정을 변경하여 실행하거나 하나 이상의 과정을 병렬적으 로 실행하는 것이 적용 가능할 것이므로, 순서도는 시계열적인 순서로 한정되는 것은 아니다. 본 명세서에 설명되는 시스템들 및 기법들의 다양한 구현예들은, 디지털 전자 회로, 집적 회로, FPGA(field programmable gate array), ASIC(application specific integrated circuit), 컴퓨터 하드웨어, 펌웨어, 소프 트웨어, 및/또는 이들의 조합으로 실현될 수 있다. 이러한 다양한 구현예들은 프로그래밍가능 시스템 상에서 실 행가능한 하나 이상의 컴퓨터 프로그램들로 구현되는 것을 포함할 수 있다. 프로그래밍가능 시스템은, 저장 시 스템, 적어도 하나의 입력 디바이스, 그리고 적어도 하나의 출력 디바이스로부터 데이터 및 명령들을 수신하고 이들에게 데이터 및 명령들을 전송하도록 결합되는 적어도 하나의 프로그래밍가능 프로세서(이것은 특수 목적 프로세서일 수 있거나 혹은 범용 프로세서일 수 있음)를 포함한다. 컴퓨터 프로그램들(이것은 또한 프로그램들, 소프트웨어, 소프트웨어 애플리케이션들 혹은 코드로서 알려져 있음)은 프로그래밍가능 프로세서에 대한 명령어 들을 포함하며 \"컴퓨터가 읽을 수 있는 기록매체\"에 저장된다. 컴퓨터가 읽을 수 있는 기록매체는, 컴퓨터 시스템에 의하여 읽혀질 수 있는 데이터가 저장되는 모든 종류의 기록장치를 포함한다. 이러한 컴퓨터가 읽을 수 있는 기록매체는 ROM, CD-ROM, 자기 테이프, 플로피디스크, 메 모리 카드, 하드 디스크, 광자기 디스크, 스토리지 디바이스 등의 비휘발성(non-volatile) 또는 비일시적인 (non-transitory) 매체일 수 있다. 또한 컴퓨터가 읽을 수 있는 기록매체는 네트워크로 연결된 컴퓨터 시스템 에 분산되어, 분산방식으로 컴퓨터가 읽을 수 있는 코드가 저장되고 실행될 수도 있다. 이상의 설명은 본 실시예의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 실시예가 속하는 기술 분 야에서 통상의 지식을 가진 자라면 본 실시예의 본질적인 특성에서 벗어나지 않는 범위에서 다양한 수정 및 변 형이 가능할 것이다. 따라서, 본 실시예들은 본 실시예의 기술 사상을 한정하기 위한 것이 아니라 설명하기 위 한 것이고, 이러한 실시예에 의하여 본 실시예의 기술 사상의 범위가 한정되는 것은 아니다. 본 실시예의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 실시예의 권리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2021-0033928", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 일 실시예에 따른 불량검출 장치에 대한 개념적인 블록도이다. 도 2는 본 개시의 일 실시예에 따른 분류모델을 개념적으로 나타낸 블록도이다. 도 3은 본 개시의 일 실시예에 따른 불량검출 방법의 흐름도이다. 도 4는 본 개시의 일 실시예에 따른 분류모델에 대한 잠재공간 매칭 과정을 개념적으로 나타낸 예시도이다. 도 5는 본 개시의 일 실시예에 따른 분류모델에 대한 정밀조정 과정을 개념적으로 나타낸 예시도이다."}
