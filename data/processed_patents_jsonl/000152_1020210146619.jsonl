{"patent_id": "10-2021-0146619", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0061891", "출원번호": "10-2021-0146619", "발명의 명칭": "인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 시스템 및 방법", "출원인": "주식회사 리얼타임테크", "발명자": "이승국"}}
{"patent_id": "10-2021-0146619", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "입력된 제품 이미지 내에서 설정된 크기의 타일 이미지를 일정 간격 슬라이딩 이동시키면서 전후 이미지가 일정부분 중복 영역을 갖도록 다수개의 타일 이미지를 생성하는 타일 이미지 생성부와;기 수행된 학습 결과에 기초하여 개별 타일 이미지에 대한 결함 여부에 따라 0 ~ 1의 값을 출력하고, 개별 타일이미지에 대한 출력값들을 원래 타일 이미지의 위치/순서에 따라 병합하여 병합 결과 행렬을 생성하는 제1 스테이지 모델과;기 수행된 학습 결과에 기초하여 상기 제1 스테이지 모델로부터 입력되는 병합 결과 행렬에 대하여 0 ~ 1의 값을 출력하는 제2 스테이지 모델을 포함하고,상기 제2 스테이지 모델의 출력값에 클램프 함수를 적용하여 입력된 제품 이미지에 대한 최종 분류가 수행되는것을 특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 시스템."}
{"patent_id": "10-2021-0146619", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 일정 간격은 타일 이미지 폭의 1/3 ~ 2/3인 것을 특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 시스템."}
{"patent_id": "10-2021-0146619", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,전체 이미지의 너비를 W, 높이를 H, 타일링 이미지의 너비를 w', 높이를 h'로 설정하고, 타일 이미지 간의 상기일정 간격이 이미지 타일 폭의 1/2로 설정된 경우, 병합 행렬의 크기는 (2H/h') × (2W/w')인 것을 특징으로하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 시스템."}
{"patent_id": "10-2021-0146619", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "입력된 제품 이미지 내에서 설정된 크기의 타일 이미지를 일정 간격 슬라이딩 이동시키면서 전후 이미지가 일정부분 중복 영역을 갖도록 다수개의 타일 이미지를 생성하는 단계;기 수행된 제1 학습 결과에 기초하여 개별 타일 이미지에 대한 결함 여부에 따라 0 ~ 1의 값을 출력하고, 개별타일 이미지에 대한 출력값들을 원래 타일 이미지의 위치/순서에 따라 병합하여 병합 결과 행렬을 생성하는 단계;기 수행된 제2 학습 결과에 기초하여 상기 병합 결과 행렬에 대하여 0 ~ 1의 값을 출력하는 단계; 및상기 출력값에 클램프 함수를 적용하여 입력된 제품 이미지에 대한 최종 분류를 수행하는 단계를 포함하는 것을특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 방법."}
{"patent_id": "10-2021-0146619", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 제1 학습 결과는 개별 타일 이미지에 결함이 포함되어 있는지 여부에 따라 0 또는 1의 값으로 레이블링된공개특허 10-2023-0061891-3-타일 이미지들에 대한 학습 결과인 것을 특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 방법."}
{"patent_id": "10-2021-0146619", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제4항에 있어서,상기 제2 학습 결과는 상기 제품 이미지에 결함이 포함되어 있는지 여부에 따라 0 또는 1의 값으로 레이블링된병합 결과 행렬에 대한 학습 결과인 것을 특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 방법."}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지시스템 및 방법에 관한 것으로서, 입 력된 제품 이미지 내에서 설정된 크기의 타일 이미지를 일정 간격 슬라이딩 이동시키면서 전후 이미지가 일정부 분 중복 영역을 갖도록 다수개의 타일 이미지를 생성하는 단계, 기 수행된 제1 학습 결과에 기초하여 개별 타일 (뒷면에 계속)"}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 인공지능 기반 고해상도 제품 이미지 상에서 이상치 탐지 방법에 관한 것으로서, 보다 상세하게는 고 해상도 이미지 입력 시 미세 특징들을 찾아내어 해당 이미지가 어떤 분류에 속하는지 판별할 수 있고, 자동화 공정에서 고 해상도의 제품 이미지에 존재하는 미세 결함을 분석 및 분류할 수 있도록 하는 검사 방법에 관한 것이다."}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "인공지능 기술의 발전에 따라 인공지능은 자연어 처리, 음성 인식, 데이터 마이닝, 비전 기술, 지능형 로봇 등 매우 다양한 분야에서 사용되고 있다. 이 중 비전 기술은 종래 캐드 도면 기반의 룰 베이스 검사 기술의 한계를 보완하기 위한 목적으로 사용되는 인 공지능 비전 검사기술과 영상 내에서 특정 객체를 탐지하기 위한 객체 탐지 기술 등의 목적으로 점차 보편화되 고 있다. 일반적으로 인공지능 기술을 이용한 이미지 처리는 비교적 작은 해상도(288 × 288, 512 × 512, 1024 × 102 4)를 대상으로 구현된다. 그러나, 최근 반도체 등의 산업 분야에서는 부품의 초미세화가 진행되고 있고, 그에 따라 검사 이미지도 위에서 언급한 해상도보다 훨씬 높은 고 해상도의 영상이 사용되고 있기 때문에, 기존 인공지능 기술을 이용한 이미지 처리기법으로는 고 해상도의 이미지 내의 작은 특징을 찾아내기에는 여러 문제가 있다. 예를 들어 입력 이미지가 일반적인 크기에 비해 큰 8192 × 8192 크기의 이미지이고, 이미지를 분류하기 위한 대상 특징의 크기가 40 × 40일 경우에. 이미지 내 대상 크기가 차지하는 비율은 0.003% 이하로 매우 작다. 이때, 기존 인공지능 방법론을 이용하기 위해 입력 이미지를 1024 × 1024로 줄이게 되면 인식 대상의 크기가 5 × 5 픽셀 미만으로 줄어들어 인식이 매우 힘들다. 종래의 가장 큰 문제점은 AI 신경망의 입력 데이터 크기에 맞춰서 입력 이미지의 크기를 강제로 줄이는 것에 의 해 발생한다. 특히 반도체 공정과 같은 미세 공정에서는 결함의 크기가 매우 작기 때문에 불량 판별을 위해서는 고해상도 촬영이 반드시 필요하다. 이때, 종래 AI 기술 이용을 위해서 이미지 크기를 줄이게 되면 각 원본 픽셀 이 가지고 있는 정보를 잃게 되는 문제가 있다. 즉, 단순히 리사이징을 통해 입력 이미지의 크기를 줄이는 방식은 픽셀 정보의 손실을 일으킬 수 있다. 실제 상 황에서는 전체 이미지에 대해 결함이 차지하는 비율이 굉장히 작기 때문에 이러한 정보의 손실이 치명적으로 작 용할 수 있다. 선행기술문헌특허문헌 (특허문헌 0001) 한국공개특허 제2021-0086303호(딥러닝 기반 패턴 검사 장치 및 그 장치를 이용한 검사 방법)"}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 상기와 같은 문제점을 해결하기 위해 안출된 것으로서, 주어진 고해상도 제품 이미지를 작은 크기의 이미지들로 슬라이드-타일링하고, 각각의 타일 이미지를 이미지 분류 모델에 입력하여 분류를 수행한다. 이렇게 얻은 정보를 다시 취합하고 최종 불량 여부를 판독하는 모델에 입력하여 대상 이미지에 대한 최종 불량 여부를 판독할 수 있도록 하는 것을 목표로 한다."}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 목적을 달성하기 위한 본 발명에 따르면, 입력된 제품 이미지 내에서 설정된 크기의 타일 이미지를 일정 간격 슬라이딩 이동시키면서 전후 이미지가 일정부분 중복 영역을 갖도록 다수개의 타일 이미지를 생성하는 타 일 이미지 생성부와, 기 수행된 학습 결과에 기초하여 개별 타일 이미지에 대한 결함 여부에 따라 0 ~ 1의 값을 출력하고, 개별 타일 이미지에 대한 출력값들을 원래 타일 이미지의 위치/순서에 따라 병합하여 병합 결과 행렬 을 생성하는 제1 스테이지 모델과, 기 수행된 학습 결과에 기초하여 상기 제1 스테이지 모델로부터 입력되는 병 합 결과 행렬에 대하여 0 ~ 1의 값을 출력하는 제2 스테이지 모델을 포함하고, 상기 제2 스테이지 모델의 출력 값에 클램프 함수를 적용하여 입력된 제품 이미지에 대한 최종 분류가 수행되는 것을 특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지 시스템이 제공된다. 여기서, 타일 이미지 간의 일정 간격은 타일 이미지 폭의 1/3 ~ 2/3로 설정할 수 있고, 전체 이미지의 너비를 W, 높이를 H, 타일링 이미지의 너비를 w', 높이를 h'로 설정하고, 타일 이미지 간의 상기 일정 간격이 타일 이 미지 폭의 1/2인 경우, 병합 행렬의 크기는 (2H/h') × (2W/w')인 것이 바람직하다. 본 발명의 바람직한 다른 일 실시예에 따르면, 입력된 제품 이미지 내에서 설정된 크기의 타일 이미지를 일정 간격 슬라이딩 이동시키면서 전후 이미지가 일정부분 중복 영역을 갖도록 다수개의 타일 이미지를 생성하는 단 계, 기 수행된 제1 학습 결과에 기초하여 개별 타일 이미지에 대한 결함 여부에 따라 0 ~ 1의 값을 출력하고, 개별 타일 이미지에 대한 출력값들을 원래 타일 이미지의 위치/순서를 이용하여 병합하여 병합 결과 행렬을 생 성하는 단계, 기 수행된 제2 학습 결과에 기초하여 상기 병합 결과 행렬에 대하여 0 ~ 1의 값을 출력하는 단계 및 상기 출력값에 클램프 함수를 적용하여 입력된 제품 이미지에 대한 최종 분류를 수행하는 단계를 포함하는 것을 특징으로 하는 인공지능 기반 고해상도 제품 이미지 상에서의 미세 이상치 탐지방법이 제공된다. 여기서, 상기 제1 학습 결과는 개별 타일 이미지에 결함이 포함되어 있는지 여부에 따라 0 또는 1의 값으로 레 이블링된 타일 이미지들에 대한 학습 결과이고, 상기 제2 학습 결과는 상기 제품 이미지에 결함이 포함되어 있 는지 여부에 따라 0 또는 1의 값으로 레이블링된 병합 결과 행렬에 대한 학습 결과일 수 있다."}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "상기와 같은 본 발명에 의하면, 미세 공정에 대한 불량품 분류에 활용이 가능하며, 예시적으로 광소자 어레이 도파관 그레이팅(Light-element Arrayed Waveguide Grating) 제품에 대한 불량품 탐지에 본 발명을 활용할 수 있다. 또한 비교적 넓은 범위의 지역을 촬영하는 위성 영상에서의 비행 유무 판별, 사람의 유무 판별 등의 상황에서도 본 발명 기술이 활용될 수 있다. 전체 이미지에 비해 굉장히 작은 대상 객체를 판별해내는 작업은 사람에게 굉장히 소모적인 행동이며 오차가 발 생할 확률 역시 높다. 본 발명에서 제시하는 기술을 활용함으로써 불량 판별에 투입되는 인력 자원과 시간을 절 약할 수 있을 것이다"}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하에서는 도면을 참조하여 본 발명을 보다 상세하게 설명한다. 도면들 중 동일한 구성요소들은 가능한 어느 곳에서든지 동일한 부호들로 나타내고 있음에 유의해야 한다. 또한 발명의 요지를 불필요하게 흐릴 수 있는 공 지기능 및 구성에 대한 상세한 설명은 생략한다. 도 1은 본 발명에 따른 미세 이상치 탐지 시스템을 도시한 것이다. 도 1을 참조하면, 본 발명에 따른 미세 이상치 탐지 시스템은 타일 이미지 생성부, 제1 스테이지 모델, 제2 스테이지 모델 및 클램핑부를 포함하여 구성된다. 타일 이미지 생성부는 1개의 고 해상도 제품 이미지에 대하여 슬라이드 타일링을 적용하여 다수개의 타일 이미지를 생성한다. 이를 도 1과 도 2를 통해 설명하면 다음과 같다. 도 2는 고 해상도 제품 이미지에서 슬라이드-타일링을 통해 타일 이미지를 생성하는 개념을 설명한 것으로서, 슬라이드-타일링은 전체 제품 이미지 내에서 설정된 크기의 직사각형 형태의 작은 타일 이미지를 일정 간격 슬 라이딩 이동시키면서 전후 이미지가 일정 부분 중복 영역을 갖도록 다수개의 타일 이미지를 생성하는 과정을 의 미한다. 도 2의 (a)를 참조하면, 전체 이미지의 너비를 W, 높이를 H, 타일링 이미지의 너비를 w', 높이를 h'라고 할 때, 첫 번째 타일 이미지의 네 꼭지점의 좌표는 아래와 같다. - 첫번째 타일 이미지의 네 꼭지점=(0,0), (w',0), (0,h'), (w',h') 이후, 다음 타일 이미지는 열(W) 방향으로 w'/n만큼 이동한다. 여기서, n은 타일 이미지를 얼마나 촘촘하게 추 출할 것인가에 대한 변수로서 원하는 처리 속도와 검출 정확도에 따라 적절한 값이 선택될 수 있다. 도 1의 (b)에서는 n=2인 경우를 예시하고 있다. 이 경우 2번째 타일 이미지의 네 꼭지점의 좌표는 아래와 같다. 두번째 타일 이미지 꼭지점=(w'/2,0),(w'/2+w',0),(w'/2,h'),(w'/2+w',h') 이러한 방식으로 열(W) 방향으로 이미지에 대한 슬라이드-타일링을 진행하면 한 열마다 추출되는 타일 이미지의 개수는 로 정의되며, 이것이 도 3(a)에 도시되어 있다. 위와 같은 과정을 행(H) 방향으로 동일하게 진행하며. 이때 한 행마다 추출되는 타일 이미지의 개수는 2H/h'로 정의되며 이것이 도 3(b)에 도시되어 있다. 따라서, 전체 이미지 한 장당 얻을 수 있는 타일 이미지의 개수는 아래와 같으며, 이것이 도 3(c)에 도시되어 있다. - 전체 이미지 내 타일 이미지 개수= (2W/w') × (2H/h') 제1 스테이지 모델은 슬라이드-타일링된 타일 이미지들을 분류(예 결함여부 등)하는 역할을 한다. 일반적인 이미지 분류 인공지능 신경망(예 EfficientNet, MobileNet)이 이용될 수 있다.인공지능 신경망을 통해 이미지를 분류하기 위해서는 먼저 학습 과정이 필요하다. 이를 위해 제품 이미지들을 대상으로 슬라이드-타일링 방법을 이용해 타일 이미지들을 생성하고, 각 타일 이미지들을 2가지로 레이블링하여 타일 이미지에 대한 결함 검출 방법을 학습시킨다. 이때, 결함이 없는 타일 이미지는 0, 결함을 포함한 타일 이 미지는 1로 레이블링 될 수 있다. 제1 스테이지 모델의 인공지능 신경망의 입력은 3×h'×w' 크기의 타일 이미지이며, 출력 값은 0 ~ 1 사이 의 값이 되도록 학습 시에 다음과 같은 비선형 함수를 이용하도록 한다."}
{"patent_id": "10-2021-0146619", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "학습이 완료된 후, 제1 스테이지 모델에 3×h'×w' 크기의 타일 이미지가 입력되면 제1 스테이지 모델 은 각 타일 이미지에 대하여 해당 타일 이미지가 0 또는 1 중 어느 쪽에 가까운지를 분류하여 0 ~ 1 사이의 값 을 출력하게 된다. 도 4는 생성된 타일 이미지에 제1 스테이지 모델을 적용하여 병합 결과 행렬을 생성하는 과정을 도시한 것이다. 도 4에 도시된 바와 같이, 제1 스테이지 모델의 출력값은 각각 0~1 사이의 값을 가지게 된다. 이 값은 각 이미지가 0 또는 1중 어느 쪽에 가까운지를 의미한다. 제1 스테이지 모델은 개별 타일 이미지에 대한 출력 값들을 원래 타일 이미지의 위치/순서에 따라 병합하여 병합 결과 행렬을 생성한다. 병합 결과 행렬의 크기는 타일 개수와 동일하므로 아래와 같이 정의된다. 병합 결과 행렬 크기=(2H/h') × (2W/w') 제2 스테이지 모델은 제1 스테이지 모델에서 생성된 병합 결과 행렬을 이용하여 최종 분류 결과를 결정 하는 역할을 한다. 제2 스테이지 모델은 Convolution2D(합성 곱) 레이어와 Fully-Connected 레이어를 조합 한 인공지능 신경망을 이용하는데, 이 과정이 도 5에 도시되어 있다. 도 5에 도시된 인공지능 신경망은 공지의 기술이므로 세부 설명은 생략하기로 한다. 제2 스테이지 모델 또한 제1 스테이지 모델과 마찬가지로 학습 과정이 필요하며, 레이블링 및 학습 과 정은 다음과 같다. 제품 이미지들을 정상제품과 결함 제품으로 레이블링한다. 이 후, 레이블링된 제품 이미지들을 슬라이드-타일링 방법을 이용해 타일 이미지들을 생성한다. 각 타일 이미지들을 학습된 제1 스테이지 모델에 입력한다. 타일 이미지들에 대한 제1 스테이지 모델의 수행 결과가 하나로 병합되어 병합 결과 행렬이 생성된다. 제2 스테이지 모델이 병합된 병합 결과 행렬을 입력받아 단계에서 레이블링 된 0 ~ 1 값을 출력하도록 학습한다. 즉, 정상 제품에 대하여 제1 스테이지 모델에서 생성되는 병합 결과 행렬에 대해서는 정상 제품으로서 0의 값이 레이블링되고, 결함 제품에 대하여 제1 스테이지 모델에서 생성되는 병합 결과 행렬에 대해서는 결합 제품으로 서 1의 값이 레이블링되도록 지도학습을 수행한다. 이후, 제2 스테이지 모델은 특정 고 해상도 제품 이미지에 대하여 제1 스테이지 모델에서 생성한 병합 결과 행 렬이 입력되면 학습된 결과에 기초하여 해당 병합 결과 행렬에 대하여 0 ~ 1 값을 출력하게 된다. 클램핑부는 0~1 사이의 값으로 출력되는 제2 스테이지 모델의 출력값에 대하여 Clamp 함수를 적용하여 0.5 이상은 1(예 불량 제품) 나머지는 0(예 정상 제품)으로 변환하여 최종적으로 분류를 수행한다. 도 6은 제2 스테이지 모델과 클램프부를 통해 최종 분류 결과를 도출하는 과정을 설명하는 것이다. 도 6에 도시된 것과 같이, 제2 스테이지 모델은 예시된 것과 같은 형태의 병합 결과 행렬이 입력되면, 학습 결과에 기초하여 0~1 사이의 1개의 출력값을 출력한다. 도 6에는 출력값으로 0.8이 출력된 경우가 예시되어 있 다. 이 값에 클램프 함수를 적용하면 0.8은 0.5보다 큰 값이므로 최종 분류 결과는 1이 되어 해당 제품 이미지 는 결함을 포함하는 불량 제품인 것으로 분류된다.비록 본 발명이 상기 바람직한 실시 예들과 관련하여 설명되었지만, 발명의 요지와 범위로부터 벗어남이 없이 다양한 수정이나 변형을 하는 것이 가능하다. 따라서, 첨부된 특허 청구범위는 본 발명의 요지에 속하는 이러한 수정이나 변형을 포함할 것이다."}
{"patent_id": "10-2021-0146619", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명에 따른 미세 이상치 탐지 시스템을 도시한 것이다. 도 2는 고 해상도 제품 이미지에서 슬라이드 타일링을 통해 타일 이미지를 생성하는 개념을 설명한 것이다. 도 3은 슬라이드 타일링 과정을 통해 생성되는 타일 이미지의 개수를 설명하는 도면이다. 도 4는 생성된 타일 이미지에 제1 스테이지 모델을 적용하여 병합 결과 행렬을 생성하는 과정을 도시한 것이다. 도 5는 제2 스테이지 모델의 인공지능 신경망 생성 과정을 도시한 것이다. 도 6은 제2 스테이지 모델과 클램프 함수를 통해 최종 분류 결과를 도출하는 과정을 설명하는 것이다."}
