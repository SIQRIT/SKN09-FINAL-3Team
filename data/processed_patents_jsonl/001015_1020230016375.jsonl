{"patent_id": "10-2023-0016375", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0123675", "출원번호": "10-2023-0016375", "발명의 명칭": "다중 심층신경망을 이용한 심전도 데이터 분석 방법 및 기록매체", "출원인": "강원대학교산학협력단", "발명자": "최성욱"}}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "컴퓨터 실행가능 명령어가 저장되는 메모리와, 상기 컴퓨터 실행가능 명령어를 실행하는 프로세서가 포함된 컴퓨터에 의해 구현되는 심전도(ECG) 데이터 분석 방법으로서, 심전도 데이터를 수신하는 데이터 수신단계;상기 심전도 데이터를 신호 처리하여 입력데이터를 생성하는 전처리 단계;사전에 학습된 분석 알고리즘을 이용하여 상기 입력데이터 내 특이점들을 검출하는 특이점 검출단계; 및 상기 특이점들로부터 심전도 파라미터를 도출하는 파라미터 도출단계; 를 포함하고,상기 분석 알고리즘은 적어도 둘 이상의 심층신경망으로 구성된 다중 심층신경망(Multiple Deep NeuralNetwork; mDNN)이며,상기 다중 심층신경망을 구성하는 심층신경망들은 입력층(Input layer)과 출력층(Output layer) 사이에 적어도둘 이상의 은닉층(Hidden layer)으로 구성된 공통된 구조를 가지는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 전처리 단계는, 일정한 크기를 갖는 윈도우가 기 설정된 시간 단위만큼 이동하면서 상기 윈도우 영역 내에 해당하는 심전도 데이터를 분석용 데이터로 추출하는 추출단계;상기 분석용 데이터에 톰킨스(tompkins) 연산을 적용하여 신호 처리한 제1 신호처리 데이터를 생성하는 제1 신호처리 단계; 상기 윈도우의 크기에 비해 작은 크기를 가지도록 설정된 판정영역 내에 해당하는 분석용 데이터 중 P파(Pwave), QRS군(QRS complex) 및 T파(T wave) 중 적어도 어느 하나의 파형에서 피크(Peak)가 강조되도록 신호 처리한 뒤 각 파형에서 피크 위치를 추출한 제2 신호처리 데이터를 생성하는 제2 신호처리 단계;상기 윈도우가 상기 심전도 데이터를 이동하며 분석용 데이터를 연속적으로 추출하되, 상기 윈도우가 일 시점에추출한 분석용 데이터보다 이전 시점에 추출한 분석용 데이터 내 포함된 QRS군 파형에서 Q 점, R 점 및 S 점 중적어도 어느 하나에 대한 값으로부터 QRS 데이터를 생성하는 QRS 데이터 생성단계; 및상기 분석용 데이터, 제1 신호처리 데이터, 제2 신호처리 데이터 및 QRS 데이터 중 적어도 둘 이상의 데이터를조합하여 입력데이터를 생성하는 입력데이터 생성단계; 를 포함하며,상기 입력데이터 생성단계에서 생성된 입력데이터는, 상기 다중 심층신경망을 구성하는 각각의 심층신경망에 공통적으로 입력되는 것을 특징으로 하는 다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 QRS 데이터 생성단계는, 공개특허 10-2024-0123675-3-상기 윈도우가 일 시점에 추출한 분석용 데이터에 포함된 파형을 기준으로 직전 파형에서 나타난 Q 점, R 점 및S 점 중 적어도 어느 하나에 대한 값으로부터 n-1 QRS 데이터를 생성하는 제1 QRS 데이터 생성단계; 및상기 윈도우가 일 시점에 추출한 분석용 데이터에 포함된 파형을 기준으로 두 박동 전 파형에서 나타난 Q 점, R점 및 S 점 중 적어도 어느 하나에 대한 값으로부터 n-2 QRS 데이터를 생성하는 제2 QRS 데이터 생성단계; 를포함하고,상기 QRS 데이터는 상기 n-1 QRS 데이터 및 n-2 QRS 데이터 중 적어도 어느 하나를 포함하는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에 있어서,상기 전처리 단계에서 상기 윈도우가 이동하는 시간 단위는 상기 윈도우의 크기에 비해 작게 설정되어 연속하여생성된 입력데이터의 일부 영역이 서로 중첩되는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제3항에 있어서,상기 전처리 단계는,상기 추출단계 전 상기 데이터 수신단계에서 수신한 심전도 데이터를 다운 샘플링(Down-Sampling)하는 샘플링단계; 를 더 포함하는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5항에 있어서,상기 전처리 단계는, 상기 샘플링 단계에서 상기 심전도 데이터를 순차적으로 n분주하여 다운 샘플링된 n개의데이터 셋으로부터 상기 n개의 데이터 셋 각각과 대응되는 n개의 입력데이터를 생성하고,상기 특이점 검출단계는, 상기 심전도 데이터의 해상도가 유지되도록 상기 n개의 입력데이터로부터 특이점을 검출한 결과값들을 도출하되, 상기 심전도 데이터와 대응되도록 상기 결과값들을 순차적으로 취합하여 최종 특이점 검출 결과를 판정하는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제4항 또는 제6항에 있어서,상기 특이점 검출단계에서, 상기 특이점은 상기 입력데이터 중 P파, QRS군 및 T파 중 적어도 어느 하나의 시작점(Start point)과 끝점(End point)을 포함하고,상기 다중 심층신경망은, 상기 특이점을 개별적으로 검출하기 위한 심층신경망들로 구성된 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법.공개특허 10-2024-0123675-4-청구항 8 제7항에 있어서,상기 특이점 검출단계는, 상기 전처리 단계에서 연속적으로 생성된 입력데이터를 분석하되, 일부 영역이 상호중첩된 입력데이터를 연속적으로 분석함에 따라 중첩된 일부 영역의 특이점을 중복 검출하는 것을 특징으로 하는 다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,상기 파라미터 도출단계는, 상기 특이점 검출단계를 통해 특이점들이 검출되면, 상기 입력데이터 내 상기 특이점들의 위치를 기준으로 P파, QRS군 및 T파에 해당하는 각 파의 특징과 이웃한 파간의 관계로부터 기간(duration), 면적(area), 간격(interval) 및 분절(segment) 중 적어도 어느 하나를 포함하는 심전도 파라미터를 계산하는 것을 특징으로 하는 다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,기 정의된 알고리즘을 이용하여 상기 심전도 파라미터를 종합적으로 평가하며, 평가 결과에 따라 유형별로 분류하는 유형 분류단계; 를 더 포함하며,상기 유형 분류단계는, 상기 심전도 파라미터의 평가 결과와 기 설정된 기준 값 간의 차이에 따라 평가가 이루어진 심전도 파라미터를 새로운 유형으로 분류하거나, 기 분류된 유형에 분류하되, 해당 유형에 속하는 심전도파라미터 값을 갱신하는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석 방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제1항에 있어서,상기 입력데이터 내 특이점에 대한 레이블이 저장된 학습데이터가 저장되는 저장단계; 및상기 다중 심층신경망을 통해 상기 학습데이터를 학습하면서 임의의 심전도 데이터로부터 생성된 입력데이터 내특이점 존재 유무 판단이 이루어지도록 상기 분석 알고리즘을 최적화하는 학습단계; 를 더 포함하는 것을 특징으로 하는다중 심층신경망을 이용한 심전도 데이터 분석방법."}
{"patent_id": "10-2023-0016375", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제1항 내지 제11항 중 어느 한 항에 기재된 방법을 수행하기 위한 프로그램이 기록된 컴퓨터로 읽을 수 있는 기록매체."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 컴퓨터 실행가능 명령어가 저장되는 메모리와, 상기 컴퓨터 실행가능 명령어를 실행하는 프로세서가 포함된 컴퓨터에 의해 구현되는 심전도(ECG) 데이터 분석 방법으로서, 심전도 데이터를 수신하는 데이터 수신단 계; 상기 심전도 데이터를 신호 처리하여 입력데이터를 생성하는 전처리 단계; 사전에 학습된 분석 알고리즘을 이용하여 상기 입력데이터 내 특이점들을 검출하는 특이점 검출단계; 및 상기 특이점들로부터 심전도 파라미터를 도출하는 파라미터 도출단계; 를 포함하고, 상기 분석 알고리즘은 적어도 둘 이상의 심층신경망으로 구성된 다중 심층신경망(Multiple Deep Neural Network; mDNN)이며, 상기 다중 심층신경망을 구성하는 심층신경망들은 입력 층(Input layer)과 출력층(Output layer) 사이에 적어도 둘 이상의 은닉층(Hidden layer)으로 구성된 공통된 구 조를 가지는 것을 특징으로 하는 다중 심층신경망을 이용한 심전도 데이터 분석 방법을 제공한다."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 다중 심층신경망을 이용한 심전도 데이터 분석 방법 및 기록매체에 관한 것이다."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "코로나19로 인해 비대면 진료가 늘어나고 홀터(Holter)와 같은 휴대형 심전도 측정 장비의 사용이 증가함에 따 라 방대한 양의 원격 심전도 데이터를 신속하게 분석할 수 있는 기술이 요구되어왔다. 심전도 데이터 분석에는 주파수 또는 기타 수학적으로 표현할 수 있는 특징을 검출하는 디지털 신호처리 기술이 주로 이용되고 있으나, 이 기술은 주파수 성분이 동일한 잡음을 구분하기 어렵고 수학적으로 표현하기 어려운 파형의 특징을 검출하는데 부정확한 문제점이 있어서 제한적인 용도로만 사용되고 있다. 이에, 사람의 인식능력을 모사할 수 있는 심층신경망(Deep Neural Network, DNN)을 이용하여 심전도의 특징을 판독하는 기술이 제안된 바 있다. 심층신경망을 이용하여 심전도를 분석하는 기존의 연구는 주로 질환을 진단하거나, 치료 방법을 결정하고 진료 와 관련된 주요 파라미터를 확보하는 것에 집중되었다. 예를 들어 심근경색 환자를 진단하거나, 관상동맥재건술 이 필요한 환자를 구분하는 용도의 심층 신경망이 개발된 바 있으며, 자동제세동기(Automated External Defibrillator, AED)에 적용할 목적으로 심전도를 분석하여 전기쇼크를 줄 시점을 결정하는 심층신경망이 개발 된 바 있다. 기존 제안된 심층신경망 기술들은 판정의 정확도를 높이기 위해 많은 뉴런과 은닉층으로 구성된 복잡한 구조를 갖추고 있으며, 기계학습을 위한 많은 양의 학습데이터가 요구되었다. 즉, 이러한 심층신경망을 기계학습하고 가동하기 위해서는 고성능 컴퓨터 등 고가의 자원이 사용되어야 하였다. 앞서 언급한 심층신경망 기술들은 고가의 자원이 사용되어야했음에도 불구하고 그 기능과 출력이 단순하여 다른 용도로 응용하기 어려웠다. 게다가 복잡한 신경망을 사용할수록 그 개발에 많은 시간과 비용이 투자되지만, 학 습데이터가 특정 인종, 연력, 질환에 편중될 경우 발생하는 과적합으로 인해 모든 환자에게 일반화되어 적용되 기에는 그 정확성이 떨어질 수 있었다. 특히, 질환의 판정과 진단을 위해서는 과학적 또는 의학적 이론과 경험 에 기반하여야 하는데, 심층신경망의 판정은 어떤 과학적 이론이나 경험을 바탕으로 수행되는 것이 아니고 오류 를 예측할 수 있는 자료 또한 제공하지 못하기 때문에 실제 임상에 적용되기에는 한계점이 있었다. 이에 본 발명은 상술한 문제점을 해결하기 위해 뉴런의 수가 적은 단순한 심층신경망을 사용하는 대신, 여러 개 의 심층신경망을 사용하여 얻어진 여러 결과를 응용함으로써 기존의 심층신경망보다 다양한 결과를 해석할 수 있는 다중 심층신경망(Multiple Deep Neural Network, mDNN)을 이용한 심전도 데이터 분석방법을 제안하고자 한 다. 선행기술문헌 특허문헌 (특허문헌 0001) 대한민국 등록특허공보 제10-2163217호(등록일 : 2020.09.29., “심층 컨볼루션 신경망을 이용 한 심전도 부정맥 분류 방법 및 장치”) (특허문헌 0002) 대한민국 등록특허공보 제10-2417949호(등록일 : 2022.07.01., “인공지능 기반 자동심장충격 기용 심전도 분석 및 적용 방법”)"}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 상술한 문제점을 해결하기 위한 것으로, 다음과 같은 목적이 있다. 첫째, 다중 심층신경망으로부터 판정된 결과의 신뢰성을 확보할 수 있는 심전도 데이터 분석 방법을 제공하고자 한다.둘째, 다중 심층신경망이 판정한 결과와 신뢰도를 바탕으로 정상 심전도를 구분하고 다양한 심전도 파라미터를 도출할 수 있는 심전도 데이터 분석방법을 제공하고자 한다. 셋째, 도출된 심전도 파라미터를 이용하여 심전도 파형의 유형을 자동으로 분류할 수 있는 심전도 데이터 분석 방법을 제공하고자 한다."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "이러한 목적을 달성하기 위하여 본 발명의 일 실시예에 따른 다중 심층신경망을 이용한 심전도 데이터 분석 방 법은 컴퓨터 실행가능 명령어가 저장되는 메모리와, 상기 컴퓨터 실행가능 명령어를 실행하는 프로세서가 포함 된 컴퓨터에 의해 구현되는 심전도(ECG) 데이터 분석 방법으로서, 심전도 데이터를 수신하는 데이터 수신단계; 상기 심전도 데이터를 신호 처리하여 입력데이터를 생성하는 전처리 단계; 사전에 학습된 분석 알고리즘을 이용 하여 상기 입력데이터 내 특이점들을 검출하는 특이점 검출단계; 및 상기 특이점들로부터 심전도 파라미터를 도 출하는 파라미터 도출단계; 를 포함하고, 상기 분석 알고리즘은 적어도 둘 이상의 심층신경망으로 구성된 다중 심층신경망(Multiple Deep Neural Network; mDNN)이며, 상기 다중 심층신경망을 구성하는 심층신경망들은 입력 층(Input layer)과 출력층(Output layer) 사이에 적어도 둘 이상의 은닉층(Hidden layer)으로 구성된 공통된 구조를 가지는 것을 특징으로 한다. 여기서, 상기 전처리 단계는, 일정한 크기를 갖는 윈도우가 기 설정된 시간 단위만큼 이동하면서 상기 윈도우 영역 내에 해당하는 심전도 데이터를 분석용 데이터로 추출하는 추출단계; 상기 분석용 데이터에 톰킨스 (tompkins) 연산을 적용하여 신호 처리한 제1 신호처리 데이터를 생성하는 제1 신호처리 단계; 상기 윈도우의 크기에 비해 작은 크기를 가지도록 설정된 판정영역 내에 해당하는 분석용 데이터 중 P파(P wave), QRS군(QRS complex) 및 T파(T wave) 중 적어도 어느 하나의 파형에서 피크(Peak)가 강조되도록 신호 처리한 뒤 각 파형에 서 피크 위치를 추출한 제2 신호처리 데이터를 생성하는 제2 신호처리 단계; 상기 윈도우가 상기 심전도 데이터 를 이동하며 분석용 데이터를 연속적으로 추출하되, 상기 윈도우가 일 시점에 추출한 분석용 데이터보다 이전 시점에 추출한 분석용 데이터 내 포함된 QRS군 파형에서 Q 점, R 점 및 S 점 중 적어도 어느 하나에 대한 값으 로부터 QRS 데이터를 생성하는 QRS 데이터 생성단계; 및 상기 분석용 데이터, 제1 신호처리 데이터, 제2 신호처 리 데이터 및 QRS 데이터 중 적어도 둘 이상의 데이터를 조합하여 입력데이터를 생성하는 입력데이터 생성단계; 를 포함하며, 상기 입력데이터 생성단계에서 생성된 입력데이터는, 상기 다중 심층신경망을 구성하는 각각의 심 층신경망에 공통적으로 입력되는 것을 특징으로 한다. 이때, 상기 QRS 데이터 생성단계는, 상기 윈도우가 일 시점에 추출한 분석용 데이터에 포함된 파형을 기준으로 직전 파형에서 나타난 Q 점, R 점 및 S 점 중 적어도 어느 하나에 대한 값으로부터 n-1 QRS 데이터를 생성하는 제1 QRS 데이터 생성단계; 및 상기 윈도우가 일 시점에 추출한 분석용 데이터에 포함된 파형을 기준으로 두 박 동 전 파형에서 나타난 Q 점, R 점 및 S 점 중 적어도 어느 하나에 대한 값으로부터 n-2 QRS 데이터를 생성하는 제2 QRS 데이터 생성단계; 를 포함하고, 상기 QRS 데이터는 상기 n-1 QRS 데이터 및 n-2 QRS 데이터 중 적어도 어느 하나를 포함하는 것을 특징으로 한다. 또한, 상기 전처리 단계에서 상기 윈도우가 이동하는 시간 단위는 상기 윈도우의 크기에 비해 작게 설정되어 연 속하여 생성된 입력데이터의 일부 영역이 서로 중첩되는 것을 특징으로 한다. 그리고, 상기 전처리 단계는, 상기 추출단계 전 상기 데이터 수신단계에서 수신한 심전도 데이터를 다운 샘플링 (Down-Sampling)하는 샘플링 단계; 를 더 포함하는 것을 특징으로 한다. 이때, 상기 샘플링 단계에서 상기 심전도 데이터를 순차적으로 n분주하여 다운 샘플링된 n개의 데이터 셋으로부 터 상기 n개의 데이터 셋 각각과 대응되는 n개의 입력데이터를 생성하고, 상기 특이점 검출단계는, 상기 심전도 데이터의 해상도가 유지되도록 상기 n개의 입력데이터로부터 특이점을 검출한 결과값들을 도출하되, 상기 심전 도 데이터와 대응되도록 상기 결과값들을 순차적으로 취합하여 최종 특이점 검출 결과를 판정하는 것을 특징으 로 한다. 또한, 상기 특이점 검출단계에서, 상기 특이점은 상기 입력데이터 중 P파(P wave), QRS군(QRS complex) 및 T파 (T wave) 중 적어도 어느 하나의 시작 점(Start point)과 끝점(End point)을 포함하고, 상기 다중 심층신경망은, 상기 특이점을 개별적으로 검출하기 위한 심층신경망들로 구성된 것을 특징으로 한다. 이때, 상기 특이점 검출단계는, 상기 전처리 단계에서 연속적으로 생성된 입력데이터를 분석하되, 일부 영역이 상호 중첩된 입력데이터를 연속적으로 분석함에 따라 중첩된 일부 영역의 특이점을 중복 검출하는 것을 특징으 로 한다. 또한, 상기 파라미터 도출단계는, 상기 특이점 검출단계를 통해 특이점들이 검출되면, 상기 입력데이터 내 상기 특이점들의 위치를 기준으로 P파, QRS군 및 T파에 해당하는 각 파의 특징과 이웃한 파간의 관계로부터 기간 (duration), 면적(area), 간격(interval) 및 분절(segment) 중 적어도 어느 하나를 포함하는 심전도 파라미터 를 계산하는 것을 특징으로 한다. 한편, 상술한 본 발명의 일 실시예에 따른 다중 심층신경망을 이용한 심전도 데이터 분석 방법은 기 정의된 알 고리즘을 이용하여 상기 심전도 파라미터를 종합적으로 평가하며, 평가 결과에 따라 유형별로 분류하는 유형 분 류단계; 를 더 포함하며, 상기 유형 분류단계는, 상기 심전도 파라미터의 평가 결과와 기 설정된 기준 값 간의 차이에 따라 평가가 이루어진 심전도 파라미터를 새로운 유형으로 분류하거나, 기 분류된 유형에 분류하되, 해 당 유형에 속하는 심전도 파라미터 값을 갱신하는 것을 특징으로 한다. 아울러, 상술한 본 발명의 일 실시예에 따른 다중 심층신경망을 이용한 심전도 데이터 분석 방법은 상기 입력데 이터 내 특이점에 대한 레이블이 저장된 학습데이터가 저장되는 저장단계; 및 상기 다중 심층신경망을 통해 상 기 학습데이터를 학습하면서 임의의 심전도 데이터로부터 생성된 입력데이터 내 특이점 존재 유무 판단이 이루 어지도록 상기 분석 알고리즘을 최적화하는 학습단계; 를 더 포함하는 것을 특징으로 한다. 이러한 목적을 달성하기 위하여 본 발명의 다른 실시형태로서, 컴퓨터로 읽을 수 있는 기록매체에는 전술한 다 중 심층신경망을 이용한 심전도 데이터 분석 방법을 수행하기 위한 프로그램이 기록될 수 있다."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이상에서 설명한 바와 같이 본 발명에 의하면, 다음과 같은 효과가 도출될 수 있다. 첫째, 심전도 데이터를 실시간 분석하되, 심전도 데이터 내 특이점에 대한 판정 영역이 일부 중첩됨에 따라, 중 첩된 영역에 대한 특이점 판정이 중복 누적되면서 판정 결과의 정확도가 향상되고, 이로부터 다중 심층신경망을 이용한 판정 결과값에 대한 신뢰성이 확보될 수 있다. 둘째, 다중 심층신경망에 포함된 각각의 심층신경망은 단순한 형태로 적은 학습데이터로도 학습이 가능하며 과 적합의 문제가 발생하지 않는다. 셋째, 다중 심층신경망이 판정한 결과에 대한 신뢰성을 바탕으로 다양한 심전도 파라미터를 도출할 수 있으며, 도출된 심전도 파라미터를 이용하여 심전도 파형을 유형 별로 자동 분류할 수 있다. 넷째, 본 발명이 제안하는 분석 방법으로부터 도출된 심전도 파라미터들은 그 조합으로부터 자동 분류된 심전도 파형의 유형에 따라 측정자의 특성뿐 아니라, 건강 척도(예컨대, 심혈관 질환 유무, 진단 등)를 가늠할 수 있는 진단 지표로 활용될 수 있다."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 바람직한 실시 예에 대하여 첨부된 도면을 참조하여 더 구체적으로 설명하되, 이미 주지되어진 기술 적 부분에 대해서는 설명의 간결함을 위해 생략하거나 압축하기로 한다. 도1은 본 발명의 일 실시예에 따른 다중 심층신경망을 이용한 심전도 데이터 분석 방법(이하, ‘ECG 분석 방법 ’이라 칭함)을 개략적으로 도시한 흐름도이고, 도2는 심전도에서 심장 박동 시 발생하는 파형의 시작점과 끝 점을 설명하기 위해 예시한 것이며, 도3 내지 도14는 본 발명의 일 실시예에 따른 다중 심층신경망을 이용한 심 전도 데이터 분석 방법의 구체적인 실험예를 설명하기 위해 예시한 것이다. 일예로, 본 발명이 제안하는 ECG 분석 방법은 각 방법을 구현하기 위한 구성들(예컨대, 수신부, 전처리부, 저장 부, 학습부, 특이점 검출부, 파라미터 도출부, 유형 분류부, 출력부 및 제어부)을 포함하는 ECG 분석 장치에 의 해 구현될 수 있다. 상기한 구성은 후술할 단계들 중 유사한 명칭으로 명명된 각 단계와 대응되는 기능을 수행 할 수 있다. 참고로 제어부는 상기한 구성들을 제어하기 위한 구성이다. 또 다른 예로, 본 발명이 제안하는 ECG 분석 방법은 컴퓨터에 의해 구현될 수 있다. 컴퓨터는 적어도 하나의 통신 네트워크를 통해 통신하는 통신장치, 화면정보를 출력하는 디스플레이, 컴퓨터 실행가능 명령어가 저장되 는 메모리 및 메모리와 전기적으로 연결되며 컴퓨터 실행가능 명령어를 실행하는 프로세서를 포함할 수 있다. 이하에서는, 도1 내지 도14를 참조하여 본 발명이 제안하는 ECG 분석 방법에 대해 구체적으로 설명하고자 한다. 1. 데이터 수신단계<S100> 데이터 수신단계(S100)는 심전도 측정 센서로부터 측정된 심전도 데이터를 수신하는 단계이다. 참고로, 데이터 수신단계(S100)에서는 후술할 학습단계(미도시)에서 학습이 이루어질 학습데이터를 수신할 수 있음은 물론이다. 2. 전처리 단계<S200> 전처리 단계(S200)는 데이터 수신단계(S100)에서 수신한 심전도 데이터를 신호 처리하여 입력데이터를 생성하는 단계이다. 전처리 단계(S200)는 추출단계(S210), 제1 신호처리 단계(S220), 제2 신호처리 단계(S230), QRS 데이터 생성단 계(S240) 및 입력데이터 생성단계(S250)를 포함할 수 있다. 추출단계(S210)는 일정한 크기를 갖는 윈도우(Window)가 기 설정된 시간 단위만큼 이동하면서 윈도우 영역 내에 해당하는 심전도 데이터를 분석용 데이터로 추출하는 단계이다. 좀더 구체적으로 설명하면, 일정한 크기(예컨대, n=30)의 윈도우는 심전도 데이터 위를 한 칸씩(데이터 한 개씩) 통과하면서 분석용 데이터를 가공하게 되는데, 분석용 데이터는 윈도우 내에 포함된 30 개 데이터 전체를 의미한다. 참고로, 후술할 제2 신호처리 데이터, QRS 데이터의 생성뿐 아니라 특이점 검출단계(S300)에서 특이점을 검출하 는 구간 즉, 판정영역(judgment area)은 윈도우 내 포함된 데이터 중 16 ~ 30 번째 영역이다. 이때, 판정영역은 softmax 활성 함수의 사용으로 인해 판정구간에서 1이 2개 이상 나오는 경우를 방지하기 위하여 윈도우 크기 대 비 축소 설정한 것으로, 윈도우 크기보다 일정 수준 작은 크기를 가지도록 설정되면 되므로 상술한 크기에 한정 되진 않는다. 제1 신호처리 단계(S220)은 분석용 데이터에 톰킨스(Tomkins) 연산을 적용하여 신호 처리한 제1 신호처리 데이 터를 생성하는 단계이다. 일예로, 제1 신호처리 단계(S220)는 분석용 데이터에 미분 후 제곱하는 수학적 연산을 적용하여 제1 신호처리 데이터를 생성할 수 있다. 이러한 미분 후 제곱을 취하는 연산 외에 다른 수학적 연산에 대한 톰킨스 연산을 적 용하는 것도 가능하다. 제2 신호처리 단계(S230)는 윈도우 크기에 비해 작은 크기를 가지도록 설정된 판정영역 내에 해당하는 분석용 데이터 중 P파, QRS군 및 T파 중 적어도 어느 하나의 파형에서 피크(Peak)가 강조되도록 신호 처리한 뒤 각 파 형에서 피크 위치를 추출한 제2 신호처리 데이터를 생성하는 단계이다. 좀더 구체적으로 설명하면, 제2 신호처리 단계(S230)는 윈도우 내 30개의 분석용 데이터 중 뒤쪽에 편중된 15개 의 판정영역에 해당하는 분석용 데이터에서 기존의 신호처리 방식을 이용하여 각 파형의 피크를 찾은 뒤, P파 및 T파의 피크 위치는 -1, QRS군의 피크 위치는 1로 저장하여 15개 길이의 피크 데이터를 제2 신호처리 데이터 로 생성하는 것이다. 참고로, 기존의 신호처리 방식이란 판정영역에 해당하는 분석용 데이터의 최댓값 및 최솟값을 일반화 (normalizing)하거나, 기울기 값을 비교하는 등 각 파형의 피크를 강조할 수 있는 신호처리 방식이면 그 어떠한 것도 적용 가능하다. 즉, 제2 신호처리 단계(S230)에서 신호처리는 분석용 데이터에 포함된 각 파형의 피크를 찾기 위해 수행된다. 이때 제2 신호처리 데이터를 생성하는데 있어 신호처리방식을 사용하기 때문에 실험을 통 해 기 결정된 임계값을 적용하는 것이 바람직할 수 있다. QRS 데이터 생성단계(S240)는 윈도우가 심전도 데이터를 이동하며 분석용 데이터를 연속적으로 추출하되, 윈도 우가 일 시점에 추출한 분석용 데이터보다 이전 시점에 추출한 분석용 데이터 내 포함된 QRS군 파형에서 Q 점, R 점 및 S 점 중 적어도 어느 하나에 대한 값으로부터 QRS 데이터를 생성하는 단계이다. 이러한 QRS 데이터 생성단계(S240)는 제1 QRS 데이터 생성단계(미도시) 및 제2 QRS 데이터 생성단계(미도시)를 포함할 수 있다. 제1 QRS 데이터 생성단계는 윈도우가 일 시점에 추출한 분석용 데이터에 포함된 파형을 기준으로 직전 파형에서 나타난 Q 점, R 점 및 S 점 중 적어도 어느 하나에 대한 값으로부터 n-1 QRS 데이터를 생성하는 단계이다. 좀더 구체적으로 설명하면, 제1 QRS 데이터 생성단계는 윈도우가 통과하고 있는 파형의 직전 파형에서 나타난 Q점, R 점, S 점의 값을 의미하는 3개 길이의 n-1 QRS 데이터를 생성한다. 제2 QRS 데이터 생성단계는 윈도우가 일 시점에 추출한 분석용 데이터에 포함된 파형을 기준으로 두 박동 전 파 형에서 나타난 Q 점, R 점 및 S 점 중 적어도 어느 하나에 대한 값으로부터 n-2 QRS 데이터를 생성하는 단계이 다. 좀더 구체적으로 설명하면, 제2 QRS 데이터 생성단계는 윈도우가 통과하고 있는 파형의 두 박동 전 파형에 서 나타난 Q점, R점, S 점의 값을 의미하는 3개 길이의 n-2 QRS 데이터를 생성한다. 이때, QRS 데이터 생성단계(S240)는 n-1 QRS 데이터 및 n-2 QRS 데이터 중 적어도 어느 하나를 포함하는 QRS 데 이터를 생성한다. 입력데이터 생성단계(S250)는 분석용 데이터, 제1 신호처리 데이터, 제2 신호처리 데이터 및 QRS 데이터 중 적어도 둘 이상의 데이터를 조합하여 입력데이터를 생성하는 단계이다. 좀더 구체적으로 설명하면, 입력데이터 생성단계(S250)는 앞서 생성된 분석용 데이터(n=30)와, 제1 신호처리 데 이터(n=30)와, 제2 신호처리 데이터(n=15)와, n-1 QRS 데이터(n=3)와, n-2 QRS 데이터(n=3)을 결합하여 81개의 길이를 가지는 입력데이터를 생성한다. 이때, 입력데이터 생성단계(S250)에서 생성된 입력데이터는 기존 다른 연구와 달리 파형(wave) 데이터뿐만 아니 라 특징(feature) 값을 포함하고 있다. 즉, 입력데이터에 기존 다른 연구 대비 더 많은 정보를 포함시켰으며, 이로 인해 정확도가 크게 개선될 수 있었다. 그리고, 입력데이터 생성단계(S250)에서 생성된 입력데이터는 다중 심층신경망을 구성하는 각각의 심층신경망에 공통적으로 입력된다. 즉, 상술한 일련의 과정을 거쳐 생성된 입력데이터는 다중 심층신경망을 구성하는 6개의 심층신경망의 공통 입력으로 사용되는 것이다. 여러 개의 심층신경망을 사용하였음에도 동일한 입력데이터를 공 유함으로써, 학습데이터 제작이 원활하였으며, 이로부터 효율적인 학습효과를 얻을 수 있었다. 참고로, 전처리 단계(S200)에서 윈도우가 이동하는 시간 단위는 윈도우 크기에 비해 작게 설정되어 연속하여 생 성된 입력데이터의 일부 영역이 서로 중첩되게 된다. 또한, 전처리 단계(S200)에서는 추출단계(S210) 전 데이터 수신단계(S100)에서 수신한 심전도 데이터를 다운 샘 플링(Down-Sampling)하는 샘플링 단계(미도시)가 수행될 수 있다. 좀더 구체적으로 설명하면, 데이터 수신단계(S100)에서 수신한 심전도 데이터는 62.5 Hz의 샘플링 속도 (sampling rate)로 다운 샘플링될 수 있는데, 이는 같은 크기의 윈도우 내 더 많은 파형의 변화를 포함시키기 위함이다. 샘플링 단계가 포함될 경우, 샘플링 단계 이후 상술한 추출단계(S210), 제1 신호처리 단계(S220), 제2 신호처리 단계(S230), QRS 데이터 생성단계(S240) 및 입력데이터 생성단계(S250)가 순차적으로 수행되며 최종적으로 후술 할 다중 심층신경망에 입력될 입력데이터가 생성되게 된다. 샘플링 단계가 포함될 경우, 전처리 단계(S200)는 샘플링 단계에서 심전도 데이터를 순차적으로 n분주한 n개의 데이터 셋으로부터 상기 n개의 데이터 셋 각각과 대응되는 n개의 입력데이터를 생성하고, 후술할 특이점 검출단 계(S300)는 심전도 데이터의 해상도가 유지되도록 n개의 입력데이터로부터 특이점을 검출한 결과값들을 도출하 되, 심전도 데이터와 대응되도록 상기 결과값들을 순차적으로 취합하여 최종 특이점 검출 결과를 판정할 수 있 다. 즉, 샘플링 단계를 통해 n분주된 n개의 데이터 셋 각각에 다중 심층심경망을 적용한 뒤, 각 결과값을 취합하여 원 데이터에 적용함으로써, 데이터의 해상도를 그대로 유지할 수 있다. 구체적인 예시를 들어 샘플링 단계 및 이후 단계들에 대해 설명하면, 샘플링 단계에서 심전도 데이터 즉, 원데 이터(raw data)가 250 Hz에서 62.5 Hz로 다운 샘플링될 경우, 4개의 데이터 셋으로 분주된다. 이때, 원 데이터 에서 순차적으로 4분주된 4개의 데이터 셋은 상술한 추출단계(S210), 제1 신호처리 단계(S220), 제2 신호처리 단계(S230), QRS 데이터 생성단계(S240) 및 입력데이터 생성단계(S250)를 거치며 4개의 입력데이터로 각각 가공 되게 된다. 이 후, 전처리 단계(S200)를 통해 가공된 4개의 입력데이터는 후술할 특이점 검출단계(S300)에서 각각 독립적으 로 다중 심층신경망에 입력되어 그에 대한 결과값이 출력될 수 있다. 좀더 구체적으로 설명하면, 특이점 검출단계(S300)는 n개의 입력데이터 각각으로부터 특이점을 검출한 결과값들 을 도출하되, 이를 취합하여 원 데이터에 적용함으로써, 심전도 데이터의 해상도를 그대로 유지하며 특이점 판 정을 수행하게 된다. 즉, 분석 알고리즘을 통해 분석되는 n분주된 입력데이터(62.5 Hz)들은 원 데이터(250 Hz) 대비 낮은 샘플링 주파수가 적용되며, 원 데이터로부터 가공된 입력데이터 좀더 조밀한 분석이 가능하게 된다. 이때, n개의 입력데이터 각각으로부터 특이점을 검출한 결과값들은 분주된 순서대로 다시 취합되며, 원 데이터 와 대응되는 형태로 조합된 분석데이터(분석 데이터는 분주된 입력데이터로부터 기 검출된 특이점 검출 결과값 이 순차적으로 조합된 것을 의미함)에서 누적 판정된 특이점 검출 결과값들을 최종 특이점 검출 결과로 판정하 게 된다. 결과적으로, 다운 샘플링된 62.5 Hz의 샘플링 데이터가 아닌 250 Hz의 원 데이터에서 심전도 파라미터를 연산함 으로써, 파라미터 해상도를 높일 수 있다. 3. 특이점 검출단계<S300> 특이점 검출단계(S300)는 사전에 학습된 분석 알고리즘을 이용하여 입력데이터 내 특이점들을 검출하는 단계이 다.여기서, 분석 알고리즘은 적어도 둘 이상의 심층신경망으로 구성된 다중 심층신경망(Multiple Deep Neural Network; mDNN)이며, 다중 심층신경망을 구성하는 심층신경망들은 입력층(Input layer)과 출력층(Output layer) 사이에 적어도 둘 이상의 은닉층(Hidden layer)으로 구성된 공통된 구조를 가진다. 즉, 다중 심층신경망 은 특이점들을 개별적으로 검출하기 위한 다수개의 심층신경망으로 구성된다. 이때, 특이점은 입력데이터 중 P파(P wave), QRS군(QRS complex) 및 T파(T wave) 중 적어도 어느 하나의 시작 점(Start point)과 끝점(End point)을 포함한다. 예컨대, 특이점은 P파의 시작점과 끝점인 Ps, Pe와, QRS군의 시작점과 끝점인 Qs, Se와, T파의 시작점과 끝점인 Ts, Te를 포함할 수 있다. 즉, 특이점 검출단계(S300)에서 다중 심층신경망을 구성하는 심층신경망들은 각각의 심층신경망이 특이점 예컨 대, Ps, Pe, Qs, Se, Ts, Te의 위치를 탐색하는 역할을 수행한다. 다중 심층신경망에 입력데이터가 입력된 뒤 이로부터 특이점들의 위치가 결정되었다면, 이후 파라미터 도출단계(S400)를 통해 심전도 파라미터를 도출할 수 있다. 참고로, 특이점 검출단계(S300)는 전처리 단계(S200)에서 윈도우가 일정 시간 간격으로 이동하며 연속적으로 생 성된 입력데이터를 분석하되, 일부 영역이 상호 중첩된 입력데이터를 연속적으로 분석함에 따라 중첩된 일부 영 역의 특이점을 중복 검출할 수 있다. 본 발명이 제안하는 ECG 분석 방법은, 특이점 검출 단계에서 6개의 심층신경망이 연속적으로 생성된 입력데이터 들을 분석하되, 판정영역에 해당하는 15 크기만큼 중복하여 중복된 구간 내에서 판정값을 누적시켜 최종 판정하 기 때문에 기존 인공지능 관련 ECG 분석모델 대비 구성 뉴런 수가 적더라도 높은 판정 정확도 즉, 높은 특이점 검출 정확도를 가질 수 있다. 또한, 기존 인공신경망 대비 뉴런수와 데이터 연산량을 줄임에 따라 비교적 저사양이거나 저성능인 하드웨어에 서도 빠른 구현이 가능하며 실시간 처리가 가능할 수 있다. 참고로, 특이점 검출단계(S300) 이전에는 입력데이터 내 특이점에 대한 레이블이 저장된 학습데이터가 저장되는 저장단계(미도시) 및 다중 심층신경망을 통해 학습데이터를 학습하면서 임의의 심전도 데이터로부터 생성된 입 력데이터 내 특이점 존재 유무 판단이 이루어지도록 분석 알고리즘을 최적화하는 학습단계(미도시)가 선행될 수 있다. 좀더 구체적으로 설명하면, 데이터 수신단계(S100)를 통해 학습을 위한 임의의 심전도 데이터가 수신되면, 이후 앞서 언급한 전처리 단계(S200)를 거쳐 전문가에 의해 라벨링되어 답이 미리 정해진 학습데이터를 기반으로 학 습단계를 수행하며 분석 알고리즘 즉, 다중 심층신경망을 최적화할 수 있다. 이때, 학습단계를 거치며 각 레이어에 포함된 뉴런들에 가중치를 부가하며 반복적인 가중치 조정이 이루어지고, 이를 통해 높은 정확도의 판단 결과를 제공하는 최적의 분석 알고리즘이 구성될 수 있는 것이다. 4. 파라미터 도출단계<S400> 파라미터 도출단계(S400)는 특이점들로부터 심전도 파라미터를 도출하는 단계이다. 여기서, 파라미터 도출단계(S400)는 특이점 검출단계(S300)를 통해 특이점들이 검출되면, 입력데이터 내 특이점 들의 검출 위치를 기준으로 P파, QRS군 및 T파에 해당하는 각 파의 특징과 이웃한 파간의 관계로부터 기간 (duration), 면적(area), 간격(interval) 및 분절(segment) 중 적어도 어느 하나를 포함하는 심전도 파라미터 를 계산할 수 있다. 심전도 파라미터 계산과 관련하여 좀더 구체적으로 설명하자면, 먼저, P duration의 경우에는 Ps와 Pe 간격을 계산하여 구할 수 있으며, QRS duration의 경우에는 Qs와 Se 간격을 계산하여 구할 수 있고, T duration의 경우 에는 Ts와 Te의 간격을 계산하여 구할 수 있다. 다음으로, P area의 경우에는 Ps와 Pe사이의 구분구적법을 통해 계산할 수 있으며, QRS area 및 T area의 경우 에도 각 특이점 사이의 구분구적법을 통해 계산될 수 있다. 또한, ST interval의 경우에는 Se와 Ts 사이 간격을 계산하여 얻을 수 있으며, ST segment는 Se와 Ts 사이 파 형의 평균값을 계산하여 얻을 수 있다. 이외 심전도 파라미터들의 경우에도 각 특이점 간의 연산을 통해 계산될수 있다. 참고로, 본 발명이 제안하는 ECG 분석 방법은 일반적으로 사용되는 RR interval 대신 QQ interval 혹은 SS interval을 사용하는데, 이는 심층신경망 타겟 특이점이 Qs 혹은 Se로 설정되어 있기에, 다중 심층신경망으로부 터 판정된 판정값을 기반으로 심전도 파라미터의 계산을 진행하기 위함이다. 5. 유형 분류단계<S500> 유형 분류단계(S500)는 기 정의된 알고리즘을 이용하여 심전도 파라미터를 종합적으로 평가하며, 평가 결과에 따라 유형별로 분류하는 단계이다. 이러한 유형 분류단계(S500)는 심전도 파라미터의 평가 결과와 기 설정된 기준 값 간의 차이에 따라 평가가 이 루어진 심전도 파라미터를 새로운 유형으로 분류하거나, 기 분류된 유형에 분류하되, 해당 유형에 속하는 심전 도 파라미터 값을 갱신할 수 있다. 좀더 구체적으로 설명하면, 유형 분류단계(S500)는 먼저, 1회 측정한 심전도 데이터에 대해 상술한 일련의 과정 을 통해 분석된 각 박동별 심전도 파라미터들을 저장한다. 이때, 박동은 도2에 예시된 파형에서 Ps부터 Te까지 를 의미한다. 이후, 첫 번째 박동에서 구해진 duration, area, interval, segment 등의 심전도 파라미터들을 유형 1의 대표 파라미터로 정의한다. 다음으로, 두 번째 박동에서 구해진 심전도 파라미터와 유형1의 대표 파라미터 간의 차이 를 구한 뒤, 각 심전도 파라미터별로 임계값을 부여하여 유형 판정을 위한 하나의 값(y)을 만든다. 각 심전도 파라미터에 부여되는 임계값(a1, a2, ..., an)은 실험을 통해 결정될 수 있다. 앞서 언급한 유형 판정을 위한 값(y)은 하기와 같은 알고리즘으로 정의될 수 있다. “y = a1*abs(type1’s P_duration-2nd beat’s P_duration) + a2*abs(type1’s QRS_duration-2nd beat’s QRS_duration) + ... + an*abs(type1’s TP_segment-2nd beat’s TP_segment)” 만약, y가 기 설정된 기준 값보다 크다면 유형1(type1)과 다른 유형(예컨대, Type2)를 생성하며, y가 기준 값보 다 작다면 유형1에 포함시킨 심전도 파라미터별 평균을 계산하여 이로부터 유형1을 대표하는 파라미터를 갱신할 수 있다. 다른 박동들도 마찬가지로 상술한 바와 같이, 각 유형을 대표하는 심전도 파라미터와 비교 분석하여 새로운 유 형을 만들거나, 기존 유형에 귀속시킬 수 있다."}
{"patent_id": "10-2023-0016375", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "상술한 일련의 과정들을 통해 최초 수신된 심전도 데이터는 심전도 파라미터의 조합으로부터 그 유형이 분류될 수 있으며, 이러한 유형 분류를 통해 측정자 개인의 특성뿐 아니라 심장 질환 혹은 심혈관 진단의 예측이 가능 할 수 있다. 즉, 본 발명이 제안하는 ECG 분석 방법을 통해 도출된 심전도 파라미터와, 이로부터 분류된 유형에 대한 결과는 의학적 진단 혹은 건강 진단의 지표로 활용될 수 있음은 물론이다. 이에, 상술한 유형 분류단계(S500) 이후에는 측정자의 특성 혹은 의학적 진단에 대한 예측 결과를 제시하는 출 력단계(미도시)를 더 포함할 수 있다. 아울러, 본 발명의 다양한 실시예들은 컴퓨터로 읽을 수 있는 기록매체에 컴퓨터가 읽을 수 있는 코드로서 구현 하는 것이 가능하다. 컴퓨터가 읽을 수 있는 기록매체는 컴퓨터 시스템에 의하여 읽혀질 수 있는 데이터가 저장 되는 모든 종류의 기록장치를 포함한다. 컴퓨터가 읽을 수 있는 기록매체의 예로는 ROM, RAM, CD-ROM, 자기 테 이프, 광 데이터 저장장치 등이 있다. 또한, 컴퓨터가 읽을 수 있는 기록매체는 네트워크로 연결된 컴퓨터 시스 템에 분산되어 분산방식으로 컴퓨터가 읽을 수 있는 코드가 저장되고 실행될 수 있다.이하에서는 구체적인 실험예를 통해 본 발명을 보다 상세하게 설명한다. 하기 실험예들은 본 발명의 이해를 돕 기 위한 하나의 예시에 불과하므로 본 발명의 권리범위가 이에 제한되거나 한정되는 것은 아니다. <실험예> 1. 연구방법 본 연구에서 사용한 다중 심층신경망은 6개의 심층신경망으로 구성되어 있으며, 도3과 같이 입력데이터는 심전 도 신호(EGC)와 QRS군을 강조하는 필터, 피크 점을 강조하는 필터, 이전 QRS의 시간/크기 정보로 구성되어 있다. 각 필터의 출력은 하나의 1차원 데이터로 구성된 후 6개의 심층신경망의 공통 입력으로 사용된다. 즉, 상 술한 전처리 단계(S200)를 통해 생성된 입력데이터가 6개의 심층신경망의 공통 입력으로 사용되는 것이다. 이때 각 심층신경망은 공통된 구조를 가지고 있으며, 6개의 심층신경망은 각각 P파, QRS 군 및 T파의 시작점과 끝점 을 인식하도록 기계학습되었다. 학습데이터의 입력에 사용되는 심전도의 길이는 0.48s이며, 이 길이는 ECG 파형 중 P 파형부터 T 파형의 끝이 모두 들어가기에 충분한 길이이다. 심층신경망은 이 중 0.24s 구간에서 P, QRS, T 파형의 시작과 끝점을 판정하 므로 최초 판정이 이루어지기까지의 지연시간은 0.12s, 최종 판정이 완료될 때까지 0.36s의 지연시간이 발생할 수 있으나, 다음 심박동이 발생하기 전에 심전도 파라미터를 계산하는 실시간 판정이 가능하다. 입력데이터의 시간해상도(time resolution)는 16 ms로 심전도의 입력데이터 수는 30개 출력 데이터 수는 16개이 다. 좀더 구체적으로 설명하면, 심층신경망 즉, DNN의 입력데이터는 심전도 외에도 QRS를 강조하는 디지털 필터 값 30개와 피크(Peak) 정보값 15개, 이전 R파(R wave)의 시간 크기 정보 6등 총 81개의 입력값으로 구성되고 DNN의 출력값은 출력 15개와 출력 값의 유무를 표시하는 1개의 출력값 등 총 16개의 출력값으로 구성된다. 또한, 본 연구에서 사용하는 DNN은 4 ms씩 입력데이터의 영역을 변경하여 출력값을 얻기 때문에 하나의 판정구 간(0.24 sec, 15개)의 데이터에 대해 총 60회의 출력 결과를 누적하는 구조를 갖추고 있다. P, QRS, T의 시작점과 끝점을 판정하기 위한 6개의 심층신경망을 학습시키기 위해 Physionet에서 얻은 12 lead ECG recorder(Surveyor, Mortara Instrument, Milwaukee, WI) 데이터중 10초씩 5명에게서 측정한 ecgrdvq(ECG Effects of Ranolazine, Dofetilide, Verapamil, and Quinidine)DB를 학습데이터로 사용하였다. 이는, 도4에 예시되었다. 참고로, 0.48s 길이의 윈도우를 0.016 s 간격으로 이동시킬 때마다 학습데이터 1개를 생성할 수 있기 때문에 학 습데이터는 5명 전체에 대해 총 143,030개 확보할 수 있었다. 6개의 심층신경망을 학습시키기 위해 Tensorflow를 사용하였으며, 최적화 함수와 손실함수는 각각 AdamsOptimizer와 CrossEntropy를 채택하였다. learning_rate=0.001, drop_out=0.7 조건에서 기계학습을 수행 했을 때, Ps, Pe, Qs, Se, Ts, Te을 구하는 DNN의 1회 판정 정확도는 epoch=1,000일 때, 75.5, 79.1, 84.4, 83.9, 80.9, 78.8%의 정확도를 보였으며, Epoch=2,000 학습을 진행했을 때, 각각 82.8, 87.0,93.2, 92.2, 88.8, 89.7%까지 상승하였다. 그런데 본 연구에서 6개 각각의 DNN은 판정구간을 15 크기만큼 중복하여 중복된 구간 내에서 판정값을 누적시켜 최종 판정하기 때문에 학습데이터에 대한 심전도의 Ps, Pe, Qs, Se, Ts, Te 판 정의 정확도는 1회 판정 정확도보다 높은 100%의 정확도를 보였다. 도5에 도시된바와 같이 심전도 파라미터의 판정 정확도를 평가하기 위한 Test data는 Physionet, CEBS(Combined measurement of ECG, Breathing and Seismocardiograms) DB를 사용하였으며, CEBS DB에는 19-30세 사이의 젊은 정상인 10명을 대상으로 Biopac MP36(Santa Barbara, CA, USA)를 이용하여 측정한 2채널 ECG(lead I & II) 데 이터가 저장 되어 있다. 도6을 참조하면, DNN을 통해 얻은 Ps,Pe, Qs, Se, Ts, Te의 인식 위치는 한 점에 일치하여 판정된 경우가 있었 다. 그러나 판정 결과가 여러 점에 걸쳐 흩어지는 경우가 발생할 수 있다. 이 경우 도6에 예시된 바와 같이, 가 장 여러 번 선택된 점을 실제 특이점으로 결정하였다. 결정된 특이점들 즉, Ps, Pe, Qs, Se, Ts, Te의 각 점 간의 시간 간격을 계산하여 P 파, QRS 군, T 파의 폭과 면적뿐 아니라 PQ interval, STinterval, QQ interval을 구할 수 있다. Tompkins 방식에 따라 R 파를 구하는 알고리즘은 RR interval을 측정하지만, 본 연구에서 DNN은 연속적인 Qs를 측정하여 QQ interval을 구하였다. 도7은 6개의 심층신경망과 심전도 파라미터를 분석하기 위한 알고리즘이며 도8은 저장된 CEBS db 값이 연속적으로 전송되었을 때, 심전도 파라미터를 0.48s 이내에 분석한 화면을 나타낸 것이다. 각 심박동에 대한 심전도 파라 미터는 도8과 같이 디스플레이 화면에 출력되며 데이터베이스에 별도로 저장된다. 한편, T 파의 끝 점이 판정될 때마다, 심박동 시점의 심전도 파라미터가 측정된다. 새로 측정된 심전도 파라미 터는 이전에 저장된 심전도 파라미터의 유형들과 비교된다. 심전도 파라미터 간의 차이는 chamfer distance 방 식으로 평가된다. 새로 측정된 심전도 파라미터가 이전의 파라미터와 차이가 크다고 평가되면 이 심전도의 박동 을 새로운 유형으로 정의하고, 다음 심전도 파라미터가 구해질 때 파형을 분류하는 새로운 기준으로 사용된다. 이러한 방식으로 각 심박동 간 파형의 차이를 구할 경우, 파형의 일시적인 변화를 확인할 수 있으며, 유형에 따 라 저장된 파형을 분석함으로써 파형의 변형이 동잡음에 의한 것인지 여부를 확인할 수 있다. 제안한 방법이 심전도 파형의 특징을 구분할 수 있는지를 평가하기 위해 도5에 예시된 바와 같이, 부정맥이 없 는 젊고 건강한 10명의 일반인에게서 측정된 심전도 데이터를 합친 하나의 데이터를 이용하였다. 별도의 정보가 없는 10명의 ECG에 대해 제안된 알고리즘을 이용하여 각 심박동이 검출될 때마다 심전도 파라미터를 구하였고, 기존의 심전도 파라미터와 비교하여 유형을 분류하였다. 2. 연구결과 본 연구에서는 다중 심층신경망을 이용하여 10명의 심전도 파라미터를 구하였고 각 실험대상자의 심전도 파라미 터가 일관성 있게 측정되었는지를 확인하였다. 도9에서 상단에 배치된 그래프는 심전도 데이터가 입력되었을 때, 각 파형의 끝 지점이 판독된 후, 심전도 파라미터 중 P 파의 폭, QRS 군의 폭, T 파의 폭을 실시간 계산하 여 화면에 표시한 예이다. 도9에서 하단에 배치된 그래프는 측정된 각 심박동에서 심전도의 파라미터를 구하여 저장한 예이다. 도10은 본 발명이 제안하는 알고리즘을 이용하여 각 실험 대상에게서 측정한 모든 심전도 파라 미터값의 평균과 표준편차를 보여준다. P 파형의 경우 6번, 7번 대상자의 표준 편차가 다른 대상자에 비해 큰 폭의 변화가 관찰된 것을 볼 수 있었다. 심전도 파라미터의 유형을 chamfer distance로 평가하였을 때, 1, 3, 5, 6, 7번 대상자에게서 2개 유형의 심전 도파형이 나타난 것을 확인할 수 있었다. 이중 가장 많이 관찰된 1개 유형의 심전도 파라미터를 구하면 도11에 도시된 바와 같이 1, 3, 5, 6, 7번 대상자의 표준편차가 줄어들고 심전도 파라미터가 일정하게 유지되는 것을 확인할 수 있었다. 1번부터 10번 대상자의 심전도 데이터를 특별한 표시 없이 하나의 파일로 묶은 후, 제안된 알고리즘을 이용하여 심전도 파형의 유형을 구분하였다. 총 16개의 유형이 관찰되었는데 이 중 5개 유형은 두 명의 심전도 파형 데이 터를 연결하는 과정에서 불연속적 연결이 발생하여 일시적으로 나타난 것이며 각각 1회씩 측정된 파형이기 때문 에 유형 목록에서 제외하였다. 또한 대상자 1의 경우 일시적인 잡음에 의해 측정된 이상 유형으로 역시 1회만 측정되었기 때문에 유형 목록에서 제외되었다. 총 10개 심전도 파형의 유형은 도12와 같다. 10개의 심전도 파형 이 가진 심전도 파라미터는 도13에 표시하였다. 제안된 알고리즘을 이용하여 10명의 대상자를 분석했을 때, 도14와 같이 총 10개의 유형이 관찰되었는데, 유형 1은 1, 3, 5, 10번 대상자에게서 나타났고, 3, 5번 대상자는 유형 1 외에 유형 2의 파형이 일부 관찰되었다. 6 번 대상자에게서는 유형 5가 주로 관찰되었고 일시적으로 유형 6이 관찰되었다. 7번 대상자에게서는 유형 7, 8 번만이 관찰되었으며, 다른 2, 4, 8, 9, 10 대상자에게서는 단지 1종류의 유형만 관찰되었다. 본 연구를 통해 다양한 기능을 가진 초단 신경망을 학습시킨 후, 이를 재해석하기 위해 신경망 대신 초단 신경 망의 기능을 이해하는 프로그래머에 의해 작성된 알고리즘이나 규칙에 적용할 경우, 다양한 기능을 갖춘 효율적 인 신경망 알고리즘을 만들 수 있음을 입증하였다. 즉, 본 발명이 제안하는 단순한 여러 개의 DNN을 이용하여 기존의 지식 체계 또는 검증된 알고리즘과 상호작용 할 수 있게 하는 다중 심층신경망을 포함하는 ECG 분석 방법은 기존 제안된 심층신경망 출력 해석과 달리, 그 해석을 위한 새로운 방법을 제공할 수 있으며, 전통적인 알고리즘이나 진단 방법의 활용성을 높이는 데 기여할 수 있다. 또한, 본 발명이 제안하는 ECG 분석 방법은, 다중 심층신경망으로부터 검출된 특이점들을 이용하여 서로 다른 12개의 심전도 파라미터를 가공할 수 있는데, 이는 다중 심층신경망으로부터 출력된 출력데이터가 심전도를 다양하게 분석하는 분석 수단으로 활용될 수 있음은 시사한다. 이에, 학습데이터 학습 후 HR, HRV, 질환 등을 바로 결정하는 형식으로 개발된 상당수의 신경망 대비 판정에 대 한 근거들을 제시할 수 있어, 그 신뢰성이 확보될 수 있다. 위에서 설명한 바와 같이 본 발명에 대한 구체적인 설명은 첨부된 도면을 참조한 실시 예에 의해서 이루어졌지 만, 상술한 실시 예는 본 발명의 바람직한 예를 들어 설명하였을 뿐이기 때문에, 본 발명이 상기의 실시 예에만 국한되는 것으로 이해되어져서는 아니 되며, 본 발명의 권리범위는 후술하는 청구범위 및 그 균등개념으로 이해 되어져야 할 것이다. *이 과제는 2022년도 교육부의 재원으로 한국연구재단의 지원을 받아 수행된 지자체-대학 협력 기반 지역혁신 사업의 결과입니다. (세부과제번호 : 2022RIS-005, 부처명 : 교육부, 과제관리(전문)기관명 : 강원지역혁신플랫 폼 정밀의료사업단, 사업명 : 지자체-대학 협력기반 혁신사업, 과제명 :출력 중첩 심층신경망을 이용한 환자 데 이터 분석, 과제수행기관명 : 강원대학교, 연구기간 : 2022.10.07.~ 2023.02.28.). 또한, 이 성과는 정부(과학기술통신부)의 재원으로 한국연구재단의 지원을 받아 수행된 연구임을 알립니다.(과 제고유번호 : 202209740001, 부처명 : 과학기술정보통신부, 과제관리(전문)기관명 : 과학기술일자리진흥원, 사 업명 : 2022년 지역산업연계 대학 Open-Lab 육성지원, 과제명 :생체제어기기 개발 Open-Lap 휴대형 심폐소생술 기기의 최적제어 기술 개발, 과제수행기관명 : 강원대학교, 연구기간 : 2022.07.01.~ 2022.12.31.)."}
{"patent_id": "10-2023-0016375", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도1은 본 발명의 일 실시예에 따른 다중 심층신경망을 이용한 심전도 데이터 분석 방법을 개략적으로 도시한 흐 름도이다. 도2는 심전도에서 심장 박동 시 발생하는 파형의 시작점과 끝 점을 설명하기 위해 예시한 것이다. 도3은 다중 심층신경망에 입력되는 입력데이터와 다중 심층신경망을 구성하는 각 심층신경망에서의 출력 파형을 설명하기 위하여 예시된 것이다. 도4는 12 lead 심전도를 이용하여 제작한 학습데이터의 참여자 특성을 도시한 것이다. 도5는 휴대용 심전계를 이용하여 측정한 평가데이터의 대상자 특성을도시한 것이다. 도6은 다중 심층신경망을 이용하여 심전도 파형을 분석했을 때, P, QRS, T 파형의 시작점과 끝점에 대한 판정을 예시한 것이다. 도7은 본 발명이 제안하는 다중 심층신경망을 이용한 심전도 데이터 분석 방법에 대한 알고리즘을 예시한 것이다. 도8은 도7의 예시된 알고리즘을 통해 도출된 판정값에 대한 출력화면을 예시한 것이다. 도9는 측정된 심전도 데이터에 대해 심전도 파라미터를 실시간으로 계산한 결과와 각 심박동에서 분석된 심전도 파라미터를 예시한 것이다. 도10은 도7에 예시된 알고리즘을 이용하여 구한 환자별 심전도 파라미터를 예시한 것이다. 도11은 2개의 심전도 유형이 관찰된 1, 3, 5, 6, 7번 대상자에서 가장 우세하게 측정된 1개 유형의 심전도 파라 미터를 도시한 것이다. 도12는 10명의 대상자에게서 관찰된 10개의 심전도 유형을 예시한 것이다. 도13은 10개의 심전도 유형이 가진 심전도 파라미터 값을 예시한 것이다. 도14는 10명의 대상자의 심전도 데이터를 하나로 묶었을 때, 10개의 심전도 유형 분포를 예시한 것이다."}
