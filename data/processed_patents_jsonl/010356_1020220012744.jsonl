{"patent_id": "10-2022-0012744", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0115820", "출원번호": "10-2022-0012744", "발명의 명칭": "네트워크 혼잡 상황에서 패킷 처리 지원 방법 및 장치", "출원인": "삼성전자주식회사", "발명자": "김혜성"}}
{"patent_id": "10-2022-0012744", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "무선 통신 시스템에서 SMF(session management function)의 동작 방법에 있어서,네트워크 혼잡 경험 패킷(congestion experienced packet)에 대한 처리 기능을 지원하는 UPF(user planefunction)를 선택하는 단계;QoS(quality of service) 프로필, QoS 플로우 ID(QFI), 및 상기 네트워크 혼잡 경험 패킷에 대한 처리 정보를포함하는 제1 메시지를 AMF(access and mobility management function)로 전송하는 단계; 및상기 네트워크 혼잡 경험 패킷에 대한 처리 동작 활성화 여부에 관한 정보를 포함하는 제2 메시지를 상기 AMF로부터 수신하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2022-0012744", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "무선 통신 시스템에서 SMF(session management function)에 있어서,송수신부; 및제어부를 포함하고, 상기 제어부는,네트워크 혼잡 경험 패킷(congestion experienced packet)에 대한 처리 기능을 지원하는 UPF(user planefunction)를 선택하고,QoS(quality of service) 프로필, QoS 플로우 ID(QFI), 및 상기 네트워크 혼잡 경험 패킷에 대한 처리 정보를포함하는 제1 메시지를 AMF(access and mobility management function)로 전송하도록 제어하고,상기 네트워크 혼잡 경험 패킷에 대한 처리 동작 활성화 여부에 관한 정보를 포함하는 제2 메시지를 상기 AMF로부터 수신하도록 제어하는 것을 특징으로 하는 SMF."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시는 보다 높은 데이터 전송률을 지원하기 위한 5G 또는 6G 통신 시스템에 관련된 것이다. 본 개시의 실시 예에 따른 무선 통신 시스템에서 SMF(session management function)의 동작 방법은, 네트워크 혼잡 경험 패킷 (congestion experienced packet)에 대한 처리 기능을 지원하는 UPF(user plane function)를 선택하는 단계와, QoS(quality of service) 프로필, QoS 플로우 ID(QFI), 및 상기 네트워크 혼잡 경험 패킷에 대한 처리 정보를 포함하는 제1 메시지를 AMF(access and mobility management function)로 전송하는 단계와, 상기 네트워크 혼잡 경험 패킷에 대한 처리 동작 활성화 여부에 관한 정보를 포함하는 제2 메시지를 상기 AMF로부터 수신하는 단계를 포함할 수 있다."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 무선 통신 시스템에 관련된 것으로, 보다 구체적으로 본 발명은 네트워크 혼잡 상황에서 패킷을 처리 하는 방법에 관한 기술이다."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "5G 이동통신 기술은 빠른 전송 속도와 새로운 서비스가 가능하도록 넓은 주파수 대역을 정의하고 있으며, 3.5 기가헤르츠(3.5GHz) 등 6GHz 이하 주파수('Sub 6GHz') 대역은 물론 28GHz와 39GHz 등 밀리미터파(㎜Wave)로 불 리는 초고주파 대역('Above 6GHz')에서도 구현이 가능하다. 또한, 5G 통신 이후(Beyond 5G)의 시스템이라 불리 어지는 6G 이동통신 기술의 경우, 5G 이동통신 기술 대비 50배 빨라진 전송 속도와 10분의 1로 줄어든 초저 (Ultra Low) 지연시간을 달성하기 위해 테라헤르츠(Terahertz) 대역(예를 들어, 95GHz에서 3 테라헤르츠(3THz) 대역과 같은)에서의 구현이 고려되고 있다. 5G 이동통신 기술의 초기에는, 초광대역 서비스(enhanced Mobile BroadBand, eMBB), 고신뢰/초저지연 통신 (Ultra-Reliable Low-Latency Communications, URLLC), 대규모 기계식 통신 (massive Machine-Type Communications, mMTC)에 대한 서비스 지원과 성능 요구사항 만족을 목표로, 초고주파 대역에서의 전파의 경로 손실 완화 및 전파의 전달 거리를 증가시키기 위한 빔포밍(Beamforming) 및 거대 배열 다중 입출력(Massive MIMO), 초고주파수 자원의 효율적 활용을 위한 다양한 뉴머롤로지 지원(복수 개의 서브캐리어 간격 운용 등)와 슬롯 포맷에 대한 동적 운영, 다중 빔 전송 및 광대역을 지원하기 위한 초기 접속 기술, BWP(Band-Width Part) 의 정의 및 운영, 대용량 데이터 전송을 위한 LDPC(Low Density Parity Check) 부호와 제어 정보의 신뢰성 높은 전송을 위한 폴라 코드(Polar Code)와 같은 새로운 채널 코딩 방법, L2 선-처리(L2 pre-processing), 특정 서비스에 특화된 전용 네트워크를 제공하는 네트워크 슬라이싱(Network Slicing) 등에 대한 표준화가 진행되었다. 현재, 5G 이동통신 기술이 지원하고자 했던 서비스들을 고려하여 초기의 5G 이동통신 기술 개선(improvement) 및 성능 향상(enhancement)을 위한 논의가 진행 중에 있으며, 차량이 전송하는 자신의 위치 및 상태 정보에 기 반하여 자율주행 차량의 주행 판단을 돕고 사용자의 편의를 증대하기 위한 V2X(Vehicle-to-Everything), 비면허 대역에서 각종 규제 상 요구사항들에 부합하는 시스템 동작을 목적으로 하는 NR-U(New Radio Unlicensed), NR 단말 저전력 소모 기술(UE Power Saving), 지상 망과의 통신이 불가능한 지역에서 커버리지 확보를 위한 단말- 위성 직접 통신인 비 지상 네트워크(Non-Terrestrial Network, NTN), 위치 측위(Positioning) 등의 기술에 대 한 물리계층 표준화가 진행 중이다. 뿐만 아니라, 타 산업과의 연계 및 융합을 통한 새로운 서비스 지원을 위한 지능형 공장 (Industrial Internet of Things, IIoT), 무선 백홀 링크와 액세스 링크를 통합 지원하여 네트워크 서비스 지역 확장을 위한 노드를 제공하는 IAB(Integrated Access and Backhaul), 조건부 핸드오버(Conditional Handover) 및 DAPS(Dual Active Protocol Stack) 핸드오버를 포함하는 이동성 향상 기술(Mobility Enhancement), 랜덤액세스 절차를 간소화하 는 2 단계 랜덤액세스(2-step RACH for NR) 등의 기술에 대한 무선 인터페이스 아키텍쳐/프로토콜 분야의 표준 화 역시 진행 중에 있으며, 네트워크 기능 가상화(Network Functions Virtualization, NFV) 및 소프트웨어 정 의 네트워킹(Software-Defined Networking, SDN) 기술의 접목을 위한 5G 베이스라인 아키텍쳐(예를 들어, Service based Architecture, Service based Interface), 단말의 위치에 기반하여 서비스를 제공받는 모바일 엣지 컴퓨팅(Mobile Edge Computing, MEC) 등에 대한 시스템 아키텍쳐/서비스 분야의 표준화도 진행 중이다. 이와 같은 5G 이동통신 시스템이 상용화되면, 폭발적인 증가 추세에 있는 커넥티드 기기들이 통신 네트워크에 연결될 것이며, 이에 따라 5G 이동통신 시스템의 기능 및 성능 강화와 커넥티드 기기들의 통합 운용이 필요할 것으로 예상된다. 이를 위해, 증강현실(Augmented Reality, AR), 가상현실(Virtual Reality, VR), 혼합 현실 (Mixed Reality, MR) 등을 효율적으로 지원하기 위한 확장 현실(eXtended Reality, XR), 인공지능(Artificial Intelligence, AI) 및 머신러닝(Machine Learning, ML)을 활용한 5G 성능 개선 및 복잡도 감소, AI 서비스 지 원, 메타버스 서비스 지원, 드론 통신 등에 대한 새로운 연구가 진행될 예정이다. 또한, 이러한 5G 이동통신 시스템의 발전은 6G 이동통신 기술의 테라헤르츠 대역에서의 커버리지 보장을 위한 신규 파형(Waveform), 전차원 다중입출력(Full Dimensional MIMO, FD-MIMO), 어레이 안테나(Array Antenna), 대규모 안테나(Large Scale Antenna)와 같은 다중 안테나 전송 기술, 테라헤르츠 대역 신호의 커버리지를 개선 하기 위해 메타물질(Metamaterial) 기반 렌즈 및 안테나, OAM(Orbital Angular Momentum)을 이용한 고차원 공 간 다중화 기술, RIS(Reconfigurable Intelligent Surface) 기술 뿐만 아니라, 6G 이동통신 기술의 주파수 효 율 향상 및 시스템 네트워크 개선을 위한 전이중화(Full Duplex) 기술, 위성(Satellite), AI(Artificial Intelligence)를 설계 단계에서부터 활용하고 종단간(End-to-End) AI 지원 기능을 내재화하여 시스템 최적화를 실현하는 AI 기반 통신 기술, 단말 연산 능력의 한계를 넘어서는 복잡도의 서비스를 초고성능 통신과 컴퓨팅 자 원을 활용하여 실현하는 차세대 분산 컴퓨팅 기술 등의 개발에 기반이 될 수 있을 것이다."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시는 네트워크 혼잡 상황 또는 네트워크 혼잡 상황이 예상되는 상황에서 패킷에 대한 처리 방법을 제안한 다. 구체적으로, 본 개시에서는 네트워크 혼잡 상황에서 경험 패킷에 대한 처리 정책 또는 규칙에 대한 정보를 네트워크 엔티티 및 단말 간 송수신하는 방안을 제안한다."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 개시의 실시예에 따른 무선 통신 시스템에서 SMF(session management function)의 동작 방법은, 네트워크 혼 잡 경험 패킷(congestion experienced packet)에 대한 처리 기능을 지원하는 UPF(user plane function)를 선택 하는 단계와, QoS(quality of service) 프로필, QoS 플로우 ID(QFI), 및 상기 네트워크 혼잡 경험 패킷에 대한 처리 정보를 포함하는 제1 메시지를 AMF(access and mobility management function)로 전송하는 단계와, 상기 네트워크 혼잡 경험 패킷에 대한 처리 동작 활성화 여부에 관한 정보를 포함하는 제2 메시지를 상기 AMF로부터 수신하는 단계를 포함할 수 있다. 본 개시의 실시예에 따른 무선 통신 시스템에서 SMF는, 송수신부, 및 제어부를 포함할 수 있다. 상기 제어부는, 네트워크 혼잡 경험 패킷(congestion experienced packet)에 대한 처리 기능을 지원하는 UPF(user planefunction)를 선택하고, QoS(quality of service) 프로필, QoS 플로우 ID(QFI), 및 상기 네트워크 혼잡 경험 패 킷에 대한 처리 정보를 포함하는 제1 메시지를 AMF(access and mobility management function)로 전송하도록 제어하고, 상기 네트워크 혼잡 경험 패킷에 대한 처리 동작 활성화 여부에 관한 정보를 포함하는 제2 메시지를 상기 AMF로부터 수신하도록 제어할 수 있다."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시의 실시예에 따른 방법 및 장치는 네트워크 혼잡 상황을 겪는 패킷을 드롭하지 않고 패킷에 네트워크 혼 잡 상황을 표시할 수 있고, RAN, 단말, UPF 에서 네트워크 혼잡 상황을 겪는 패킷에 대한 처리 방법을 설정할 수 있다. 또한, 본 개시의 실시예에 따른 방법 및 장치는 패킷 자체에 네트워크 혼잡 상황을 지시할 수 있으며, 해당 지 시 정보를 단말 내 어플리케이션 또는 어플리케이션 서버에 전달할 수 있다. 또한, 본 개시의 실시예에 따른 방법 및 장치는 패킷 자체에 네트워크 혼잡 상황을 지시하여 어플리케이션에서 전송율을 조절하고, Low Latency Low Loss Scalable throughput 을 지원할 수 있다."}
{"patent_id": "10-2022-0012744", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하 첨부된 도를 참조하여 본 발명의 동작 원리를 상세히 설명한다. 그리고 후술되는 용어들은 본 발명에서의 기능을 고려하여 정의된 용어들이다. 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있으므로 그 정의는 본 명세서 전반에 걸친 내용에 따라 정해져야 한다. 본 게시에서 사용되는 망 객체(network entity) 및 Edge Computing 시스템의 객체들을 지칭하는 용어, 메시지들 을 지칭하는 용어, 식별 정보들을 지칭하는 용어 등은 설명의 편의를 위해 예시된 것이다. 따라서, 본 발명이 후술되는 용어들에 한정되는 것은 아니며, 동등한 기술적 의미를 가지는 대상을 지칭하는 다른 용어가 사용될 수 있다. 이하 편의를 위하여, 본 발명은 5G 시스템 규격에서 정의하는 용어와 명칭들을 사용하지만 상기 용어 및 명칭들 에 의해 한정되는 것은 아니며, 다른 규격에 따르는 시스템에도 동일하게 적용될 수 있다. 도 1의 본 개시의 실시예에 따른 통신 시스템의 구조를 나타낸다. 에지 컴퓨팅 시스템을 지원하는 5G 통신 시스템은 다양한 네트워크 기능(network function, NF) 또는 네트 워크 엔티티를 포함할 수 있다. 도 1을 참조하면, 5G 통신 시스템은 단말 (user equipment, UE), (무선) 액세스 네트워크((radio) access network, (R)AN), 사용자 평면 기능(user plane function, UPF), 데이터 네트워크(data network, DN), 통합된 데이터 관리(unified data management, UDM), 액세스 및 이동성 관리 기능 (access and mobility management function, AMF), 세션 관리 기능(session management function, SMF), 정책 제어 기능(policy control function, PCF), 어플리케이션 기능(application function, AF), 및 에지 어플리케이션 서버 디스커버리 기능(edge application server discovery function, EASDF)를 포함할 수 있다. 각 NF들은 다음과 같은 기능을 지원한다. - AMF는 UE 단위의 접속 및 이동성 관리를 위한 기능을 제공하며, 하나의 UE 당 기본적으로 하 나의 AMF에 연결될 수 있다. - DN은 예를 들어, 운영자 서비스, 인터넷 접속 또는 서드파티(3rd party) 서비스 등이 존재하는 5GS 외부 의 네트워크를 의미한다. DN은 UPF로 하향링크 프로토콜 데이터 유닛(protocol data unit, PDU)을 전송하거나, UE로부터 전송된 PDU를 UPF로부터 수신한다. - PCF는 어플리케이션 서버로부터 패킷 흐름에 대한 정보를 수신하여, 이동성 관리, 세션 관리 등의 정책 을 결정하는 기능을 제공한다. 구체적으로, PCF는 네트워크 동작을 통제하기 위한 단일화된 정책 프레임워 크 지원, 제어평면 기능(들)(예를 들어, AMF, SMF 등)이 정책 규칙을 시행할 수 있도록 정책 규칙 제 공, 사용자 데이터 저장소(user data repository, UDR) 내 정책 결정을 위해 관련된 가입 정보에 액세스하기 위 한 프론트 엔드(front end) 구현 등의 기능을 지원한다. - SMF는 세션 관리 기능을 제공하며, UE가 다수 개의 세션을 가지는 경우 각 세션 별로 서로 다른 SMF에 의해 관리될 수 있다. - UDM은 사용자의 가입 데이터, 정책 데이터 등을 저장한다. - UPF는 DN으로부터 수신한 하향링크 PDU를 (R)AN을 경유하여 UE에게 전달하며, (R)AN을 경유하여 UE로부터 수신한 상향링크 PDU를 DN으로 전달할 수 있다. 도 2는 본 개시의 실시예에 따른 네트워크 혼잡 상황 경험 패킷 처리 정보를 제공하는 방법을 도시한다. 도 2를 참조하면, 통신 시스템은 SMF, UPF, AMF, RAN, UE, 및 EAS(edge application server, 260)를 포함할 수 있다. 도 2의 동작들을 수행하기 이전에 통신 시스템에서 아래의 사전 동작이 수행될 수 있다. SMF는 local configuration 또는 PCF로부터 수신한 세션 관리 및 QoS 관련 정책 정보 또는 UDM으로부터 획득 가능한 네트워크 혼잡 경험 패킷 처리 정보 중 적어도 하나를 획득할 수 있다. SMF는 UPF를 선 택하여 N4 세션 생성을 성공적으로 수행할 수 있고, 이와 관련된 구체적인 설명은 도 3 의 실시예에서 구체적으 로 설명하기로 한다. 도 2를 참조하면, 동작 1에서, SMF는 local configuration 또는 PCF 로부터 수신한 QoS 관련 정책 정보 또는 UDM으로부터 획득한 혼잡 상황 경험 패킷 처리 관련 가입자 정보를 기반으로 생성(또는) 결정한 QoS profile, QoS flow ID (QFI), 네트워크 혼잡 상황 경험 패킷 처리 정보(congestion experience packet processing information)를 AMF로 전송할 수 있다. 실시예에 따라, 네트워크 혼잡 상황 경험 패킷 처리 정보는 QoS profile 에 포함될 수도 있다. 실시예에 따라, SMF가 제공하는 QFI 값은 Low Latency Low Loss Scalable throughput 를 지원해야 하는 QoS flow 에 해당하는 5QI 값과 동일할 수 있다. 실시 예에 따라, 네트워크 혼잡 상황 경험 패킷 처리 정보는 처리 대상 패킷 정보, 네트워크 혼잡 상황 경험 패 킷 처리 동작 수행 지시자, RAN 적용 네트워크 혼잡 상황 경험 패킷 처리 scheme index 또는 적용 규칙 식별자, 네트워크 혼잡 상황 경험 패킷 처리 규칙, 및 단말 적용 네트워크 혼잡 상황 경험 패킷 처리 규칙 중에서 적어 도 하나를 포함할 수 있다. 처리 대상 패킷 정보, 네트워크 혼잡 상황 경험 패킷 처리 동작 수행 지시자, RAN 적용 네트워크 혼잡 상황 경 험 패킷 처리 scheme index 또는 적용 규칙 식별자, 네트워크 혼잡 상황 경험 패킷 처리 규칙, 및 단말 적용 네 트워크 혼잡 상황 경험 패킷 처리 규칙 각각에 대한 구체적인 설명은 아래와 같다. 처리 대상 패킷 정보: 5QI 또는 QFI, 만약 처리 대상 패킷 정보가 포함되어 있지 않으면 QoS profile 이 맵핑된 QFI로 식별되는 QoS flow 에 해당하는 패킷이 처리 대상 패킷인 것으로 RAN은 판단할 수 있다. 네트워크 혼잡 상황 경험 패킷 처리 동작 수행 지시자와 RAN 적용 네트워크 혼잡 상황 경험 패킷 처리 scheme index 또는 적용 규칙 식별자: SMF는 RAN에서 적용할 수 있는 네트워크 혼잡 상황 경험 패킷 처리 scheme 또는 매커니즘에 대한 index 를 사업자 설정 등을 통해서 알 수 있다. 또는 SMF는 PCF부터 네트워크 혼잡 상황 경험 패킷 처리 scheme 또는 매커니즘 index 정보를 제공받을 수 있다. 또는 SMF는 UDM으로부터 획득할 수 있는 특정 단말 가입자 정보에 포함되어 있는 네트워크 혼잡 상 황 경험 패킷 처리 scheme 또는 매커니즘 index 정보를 AMF로 전송할 수 있다. 예를 들어, 해당 scheme 또는 매커니즘 index 로 특정되는 패킷 처리 방법은 explicit congestion notification 과 같이 혼잡 상황을 겪는 (또는 겪을 것으로 예상되는) 패킷에 대한 marking 을 수행하는 동작 등이 있을 수 있다. 실시예에 따라, RAN은 네트워크 혼잡 경험 패킷 처리 scheme 또는 매커니즘 index 에 해당되는 패킷 처리 동작을 확인하고 이를 네트워크 혼잡 상황 경험 패킷 처리 대상 QoS flow (네트워크 혼잡 상황 경험 패킷 처리 정보에 맵핑되는 QFI 값에 해당되는 QoS flow) 의 패킷에 적용할 수 있다. 구체적으로 RAN에서 congestion 발생 판단 기준이 네트워크 혼잡 경험 패킷 처리 scheme index 에 따라 설정될 수 있다. 예를 들어, RAN의 하위 계층의 스케줄러에서 계산되는 큐잉 딜레이 또는 RAN과 단말 사이의 채널 상태 또는 quality 일 정 이하 수준일 때 해당 패킷들에 대한 혼잡 상황 발생 표시를 수행할 수 있다. 패킷에 혼잡 상황 발생 표시하 는 방법 또한 네트워크 혼잡 상황 경험 패킷 처리 scheme index 에 의해 정의된 동작을 따른다. 예를 들어, 어 떠한 계층 (예를 들어 Packet Data Convergence Protocol 계층)에서 패킷에 대한 표시를 수행할지가 정의될 수 있다. 또 다른 예로, RAN은 앞서 설명한 네트워크 혼잡 상황 발생 한 QoS flow 에 대한 통지를 AMF와 SMF를 통해서 UPF로 전송하여 UPF에서 패킷의 IP 헤더에 congestion encountered 비트를 설정하도록 할 수 있다. 네트워크 혼잡 상황 경험 패킷 처리 규칙: 네트워크 혼잡 상황 경험 처리 패킷 처리 scheme index 외에 구체적 인 동작 규칙 (예를 들어, explicit congestion notification enforcement rule) 을 제공할 수 있다. 예를 들 어 다음의 파라미터가 포함되어 있을 수 있다: packet marking rule 또는 network congestion handling rule 또는 network congestion experienced packet handling rule 중 하나로 명시될 수 있으며, packet detection rule 과 바인딩되어 사용될 수 있다. Marking probability (구체적인 확률 0과 1사이의 확률값) 또는 marking rule (예를 들어, 큐 길이 비례 비율 로 마킹 또는 큐일 딜레이에 비례하여 마킹) 네트워크 혼잡 경험 마킹 임계값 (marking threshold value): 큐잉 딜레이 또는 큐잉 길이 값 또는 평균 전송율 또는 채널 상태 정보 값으로 표현될 수 있다. 네트워크 혼잡 정도가 임계값에 도달하면 (큐잉 길이 또는 딜레이 가 임계값을 넘거나 평균 전송율 또는 채널 상태 정보값이 임계값보다 낮아지게 되면) 해당 플로우에 대한 마킹 을 marking probability 또는 marking rule 에 따라 수행한다. 위의 큐잉 딜레이, 큐잉 길이 값, 평균 전송율 은 네트워크 혼잡 상황 경험 패킷 처리 규칙과 같이 제공되는 아래의 averaging window 길이 동안 계산되어 적 용할 수 있다. Averaging window for calculating network congestion level DL marking or UL marking: 상향 링크 또는 하향 링크에 대해서 마킹을 수행할지를 나타낸다. 단말 적용 네트워크 혼잡 상황 경험 패킷 처리 규칙: UE에서 적용할 수 있는 네트워크 혼잡 상황 경험 패 킷 처리 scheme 또는 mechanism index 값 또는 구체적인 동작이 포함될 수 있다. 예를 들어, 상향 링크에 대한 큐잉 딜레이가 증가하는 경유 해당 패킷에 혼잡 발생을 표시하는 방법 (위 설명의 marking probability 및 마킹 임계값 등) 이 포함될 수 있다. 도 2의 동작 2에서, AMF는 SMF로부터 수신한 QoS profile, QFI, 네트워크 혼잡 상황 경험 패킷 처리 정보 중에서 적어도 하나를 RAN으로 전달할 수 있다. 도 2의 동작 3에서, RAN은 AMF로부터 수신한 QoS profile 및 네트워크 혼잡 상황 경험 패킷 처리 정 보에 기반한 동작(예를 들어, 네트워크 혼잡 경험 패킷 처리 동작을 활성화)을 수행할 수 있다. 도 2의 동작 4에서, RAN은 단말에 PDU 세션 생성 accept 메시지를 전송할 수 있다. 해당 PDU 세션 생성 accept 메시지에는 QoS rule, QoS flow level QoS parameter, 및 단말 적용 네트워크 혼잡 경험 패킷 처 리 규칙 중에서 적어도 하나가 포함될 수 있다. 단말은 RAN으로부터 수신한 단말 적용 네트워크 혼잡 경험 패킷 처리 규칙에 명시된 동작을 활성화하고 활성화 성공 여부를 RAN으로 전송할 수 있다. 도 2의 동작 5에서, RAN은 RAN과 UE 각각에서의 네트워크 혼잡 경험 패킷 처리 동작 활성화 성 공 여부에 관한 정보를 AMF로 전송할 수 있다. 해당 메시지는 N2 PDU 세션 응답 메시지 내에 포함될 수 있 다. 도 2의 동작 6에서, AMF는 RAN으로부터 수신한 네트워크 혼잡 경험 패킷 처리 동작 활성화 성공 여부 에 관한 정보를 RAN 주소 정보와 같이 SMF로 전송할 수 있다. 도 2의 동작 7에서, SMF는 RAN과 UPF 사이의 연결 설정을 마무리하기 위한 N4 세션 수정 절차를 수행할 수 있다. 도 2의 동작 8에서, SMF는 단계 6의 응답 메시지 내 CN 터널 정보를 포함하여 AMF로 전송할 수 있다. 위의 동작이 완료된 후 RAN은 네트워크 혼잡 상황이 발생했을 때 SMF 로부터 수신한 네트워크 혼잡 상황 경험 패킷에 대한 처리 동작을 수행할 수 있다. 도 2의 동작 9에서, EAS는 패킷을 전송하고, RAN은 수신한 패킷에 대한 마킹을 앞의 동작 3에서 수신 한 네트워크 혼잡 상황 경험 패킷 처리 정보에 기반하여 수행할 수 있다. RAN은 마킹된 네트워크 혼잡 상 황 경험 패킷을 UE로 전송할 수 있다 도 3은 본 개시의 실시예에 따른 네트워크 혼잡 경험 패킷에 대한 처리 정책을 설정하는 과정을 도시한다. 도 3을 참조하면, 통신 시스템은 SMF, PCF, 및 UPF를 포함할 수 있다. 도 3의 동작 1에서, SMF는 PDU 세션 생성 또는 수정 절차 중 PCF로 세션 관리 정책을 요청할 수 있다. 도 3의 동작 2에서, PCF는 해당 세션에 대한 네트워크 혼잡 상황 경험 패킷에 대한 처리 정책을 SMF 로 제공할 수 있다. 실시예에 따라, 네트워크 혼잡 상황 경험 패킷 처리 정책은 처리 대상 패킷 정보, 네트워크 혼잡 상황 경험 패 킷 처리 동작 수행 지시자와 네트워크 혼잡 상황 경험 패킷 처리 적용 scheme index 또는 적용 규칙 식별자, 및 네트워크 혼잡 상황 경험 패킷 처리 규칙 중에서 적어도 하나를 포함할 수 있다. 처리 대상 패킷 정보, 네트워크 혼잡 상황 경험 패킷 처리 동작 수행 지시자와 네트워크 혼잡 상황 경험 패킷 처리 적용 scheme index 또는 적용 규칙 식별자, 및 네트워크 혼잡 상황 경험 패킷 처리 규칙 각각에 대한 구체 적인 설명은 다음과 같다. 처리 대상 패킷 정보: Source interface (core side, access side, 또는 N6-Lan, 또는 5G VN internal 등), UE IP 주소, DNN, S- NSSAI, app ID, 5-tuple 값, 5QI 또는 QoS Flow ID (QFI) 값, framed route information 실시예에 따라, Low Latency Low Loss Scalable throughput 를 지원해야 하는 QoS flow 에 대한 QFI 또는 5QI 값이 설정될 수 있다.) 네트워크 혼잡 상황 경험 패킷 처리 동작 수행 지시자와 네트워크 혼잡 상황 경험 패킷 처리 적용 scheme index 또는 적용 규칙 식별자: PCF는 UPF에서 적용할 수 있는 네트워크 혼잡 상황 경험 패킷 처리 scheme 또는 매커니즘에 대한 index 를 사업자 설정 등을 통해서 알 수 있다. 해당 scheme 또는 매커니즘 index 로 특 정되는 패킷 처리 방법은 예를 들어 explicit congestion notification 과 같이 혼잡 상황을 겪는 (또는 겪을 것으로 예상되는) 패킷에 대한 marking 을 수행하는 동작 등이 있을 수 있다. 네트워크 혼잡 상황 경험 패킷 처리 규칙: 내부 설정 또는 사업자 정책에 따라 PCF는 네트워크 혼잡 상황 경험 처리 패킷 처리 scheme index 외에 구체적인 동작 규칙(예를 들어, explicit congestion notificationenforcement rule)을 제공할 수 있다. 예를 들어 다음의 파라미터가 포함되어 있을 수 있다. 네트워크 혼잡 상황 경험 패킷 처리 규칙은 QoS Enforcement Rule 의 일부 규칙 정보로 포함될 수 있다. 또는 별도의 규칙으로 생성될 수 있다. 예를 들어, packet marking rule 또는 network congestion handling rule 또 는 network congestion experienced packet handling rule 중 하나로 명시될 수 있으며, packet detection rule 과 바인딩되어 사용될 수 있다. Marking probability (구체적인 확률 0과 1사이의 확률값) 또는 marking rule (예를 들어, 큐 길이 비례 비율 로 마킹 또는 큐일 딜레이에 비례하여 마킹) 네트워크 혼잡 경험 마킹 임계값 (marking threshold value): 큐잉 딜레이 또는 큐잉 길이 값으로 표현될 수 있 다. 임계값이 넘으면 해당 플로우에 대한 마킹을 marking probability 또는 marking rule 에 따라 수행한다. 큐잉 딜레이 및 큐잉 길이 값은 네트워크 혼잡 상황 경험 패킷 처리 규칙과 같이 제공되는 아래의 averaging window 길이 동안 계산되어 적용할 수 있다. Averaging window for calculating network congestion level DL marking or UL marking: 상향 링크 또는 하향 링크에 대해서 마킹을 수행할지를 나타낸다. Correlated packet detection rule (PDR) information: 바인딩된 PDR 의 Rule ID 도 3의 동작 3에서, SMF는 PCF로부터 네트워크 혼잡 상황 경험 패킷 처리 정책을 제공 받으면 UPF 선 택 시 해당 기능을 지원하는 UPF를 선택하고, 선택된 UPF에 네트워크 혼잡 상황 경험 패킷 처리 정책 을 설정할 수 있다. 또한, 선택된 UPF에 설정되는 네트워크 혼잡 상황 경험 패킷 처리 정책 예를 들어, SMF가 UPF discovery 및 선택 동작을 수행할 때 NRF 또는 SCP 에 네트워크 혼잡 상황 경험 패킷 처리 기능 을 지원하는 UPF 를 요청할 수 있다. 실시예에 따라, SMF는 이용 가능한 UPF 중 해당 기능을 지원하는 UPF를 선택한다. 실시예에 따라, UPF 또는 OAM 이 NRF 에 사용 가능한 UPF 를 설정할 때 네트워크 혼잡 상황 경험 패킷 처리 기능 지원 여 부를 명시할 수 있고, 이에 대한 구체적인 설명은 도 3의 동작에서 설명하기로 한다. 도 3의 동작 4에서, UPF는 SMF에 성공적으로 N4 세션이 설정되고 N4 세션 컨텍스트가 생성 되었음을 응답할 수 있다. 도 4는 본 개시의 실시예에 따른 네트워크 혼잡 경험 패킷 처리 기능을 지원하는 UPF 설정 또는 선택 방법을 도 시한다. 도 4를 참조하면, 통신 시스템은 SMF, NRF, OAM, 및 UPF를 포함할 수 있다. 도 4의 동작 1에서, SMF는 네트워크 혼잡 경험 패킷 처리 기능 지원 UPF가 이용 가능하게 됨을 notification 받기 위해 NRF로 subscribe 요청 메시지를 전송할 수 있다. 실시예에 따라, SMF는 NRF Status Subscribe 요청 메시지 내 target UPF provisioning info 에 네트워크 혼잡 경험 패킷 처리 기능을 명 시하여 NRF로 전송할 수 있다. 실시예에 따라, Target UPF provisioning info 에는 추가적으로 data network access identifier, service area, data network name, network slice information (S-NSSAI) 중에서 적어도 하나의 정보가 포함될 수 있다. 이는, 특정 지역 또는 특정 데이터 네트워크 또는 특정 데이터 센터에 대한 트래픽을 담당하는 UPF 중 네트워크 혼잡 경험 패킷 처리 기능 지원 UPF에 대한 정보만을 획득하기 위함이 다. 실시예에 따라, target UPF provisioning info 에는 Low Latency Low Loss Scalable throughput 지원 QoS flow 를 처리할 수 있는 기능을 지원하는지에 대한 정보가 포함될 수 있다. 도 4의 동작 2에서, NRF는 subscribe 식별자를 포함하는 응답 메시지를 SMF로 전송할 수 있다. 도 4의 동작 3에서, 네트워크 혼잡 경험 패킷 처리 기능을 지원하는 UPF가 OAM에 의해 deploy될 수 있다. 도 4의 동작 4에서, 설치된 UPF는 OAM에 의해 등록을 수행할 수 있는 NRF 정보가 설정될 수 있다. 실 시예에 따라, 해당 UPF 가 지원하는 기능들에 대한 정보를 포함하는 UPF provisioning information가 같이 포함 (또는 설정)될 수 있다. 실시예에 따라, UPF provisioning information 은 data network access identifier, service area, data network name, network slice information (S-NSSAI) 등의 정보를 포함할 수 있다. 도 4의 동작 5에서, 설치 및 설정이 완료된UPF는 NRF에 등록 요청 메시지를 전송할 수 있다. 해당 요 청 메시지는 NF type, N4 인터페이스 주소 정보, 전술한 단계에서 설정된 네트워크 혼잡 경험 패킷 처리 기능 지원 여부가 포함된 UPF provisioning information 중에서 적어도 하나를 포함할 수 있다. 실시예에 따라, UPF provisioning information 은 data network access identifier, service area, data network name, network slice information (S-NSSAI) 중에서 적어도 하나를 추가로 포함할 수 있다. 도 4의 동작 6에서, 또 다른 예시로 동작 4와 동작 5가 수행되지 않고 OAM은 동작 3 직후 직접 deploy 된 UPF를 NRF에 등록할 수 있다. OAM은 해당 UPF에 대한 NF type, N4 인터페이스 주소 정보, 전술 한 UPF provisioning information 중에서 적어도 하나를 NRF로 설정할 수 있다. 도 4의 동작 7에서, NRF는 SMF로 동작 1의 구독에 매칭되는 UPF 정보(주소, 지원 기능, N4 인터페이 스 정보)를 포함하는 notification 을 전송할 수 있다. 해당 notification 메시지는 NRF 에 등록되어 있는 UPF provisioning information 등이 포함될 수 있다. 실시예에 따라, NRF에 네트워크 혼잡 경험 패킷 처리 기능을 지원하는 UPF가 등록/설정 되어 있으면, SMF가 필요에 따라 NF discovery 요청 메시지 내에 네트워크 혼잡 경험 패킷 처리 기능 요구 지시자(추가 로, 어느 지역 또는 데이터 네트워크 또는 특정 데이터 센터를 지원하는 UPF 를 요구하기 위한 정보인 data network access identifier, service area, data network name, network slice information (S-NSSAI) 등이 같이 제공될 수 있음)를 포함하여 NRF로 전송했을 때, NRF로부터 해당 기능을 지원하고 이용 가능한 UPF에 대한 정보를 제공 받을 수 있다. 실시예에 따라, UDM 에는 특정 단말 가입자에게 Home PLMN 이 네트워크 혼잡 상황 경험 패킷에 대한 marking 기 능 (예를 들어, explicit congestion notification 동작)을 제공할 수 있는 QoS Flow 에 대한 QoS profile 이 저장되어 있을 수 있다. 도 5는 본 개시의 실시예에 따른 네트워크 기능(또는 네트워크 엔티티)의 구조를 나타낸다. 도 1 내지 도 4를 참조하여 설명한 SMF, UPF, AMF, RAN, PCF, NRF, OAM 각각은 도 5의 네트워크 기능(또는 네 트워크 엔티티)에 대응될 수 있다. 도 5을 참조하면, 네트워크 기능(또는 네트워크 엔티티)은 송수신부, 메모리, 및 제어부로 구성될 수 있다. 전술한 네트워크 기능(또는 네트워크 엔티티)의 통신 방법에 따라, 네트워크 기능(또는 네트워크 엔티티)의 송 수신부, 제어부 및 메모리가 동작할 수 있다. 다만, 네트워크 기능(또는 네트워크 엔티티)의 구 성 요소가 전술한 예에 한정되는 것은 아니다. 예를 들어, 네트워크 기능(또는 네트워크 엔티티)은 전술한 구성 요소들 보다 더 많은 구성 요소를 포함하거나 더 적은 구성 요소를 포함할 수도 있다. 뿐만 아니라 송수신부 , 제어부 및 메모리가 하나의 칩(chip) 형태로 구현될 수도 있다. 또한, 제어부는 하나 이 상의 프로세서를 포함할 수 있다. 송수신부는 네트워크 기능(또는 네트워크 엔티티)의 수신부와 네트워크 기능(또는 네트워크 엔티티)의 송 신부를 통칭한 것으로서, 다른 장치와 신호를 송수신할 수 있다. 이를 위해, 송수신부는 전송되는 신호의 주파수를 상승 변환 및 증폭하는 RF 송신기와, 수신되는 신호를 저 잡음 증폭하고 주파수를 하강 변환하는 RF 수신기 등으로 구성될 수 있다. 다만, 이는 송수신부의 일 실시예일뿐이며, 송수신부의 구성 요소가 RF 송신기 및 RF 수신기에 한정되는 것은 아니다. 또한, 송수신부는 무선 채널을 통해 신호를 수신하여 제어부로 출력하고, 제어부로부터 출력된 신호를 무선 채널을 통해 전송할 수 있다. 메모리는 네트워크 기능(또는 네트워크 엔티티)의 동작에 필요한 프로그램 및 데이터를 저장할 수 있다. 또한, 메모리는 네트워크 기능(또는 네트워크 엔티티)에서 획득되는 신호에 포함된 제어 정보 또는 데이터 를 저장할 수 있다. 메모리는 롬(ROM), 램(RAM), 하드디스크, CD-ROM 및 DVD 등과 같은 저장 매체 또는 저 장 매체들의 조합으로 구성될 수 있다. 또한, 메모리는 별도로 존재하지 않고 제어부에 포함되어 구 성될 수도 있다. 제어부는 상술한 본 개시의 실시예에 따라 네트워크 기능(또는 네트워크 엔티티)이 동작할 수 있도록 일련 의 과정을 제어할 수 있다. 제어부는 네트워크 혼잡 경험 패킷(congestion experienced packet)에 대한 처리 기능을 지원하는 UPF(user plane function)를 선택할 수 있다.제어부는 QoS(quality of service) 프로필, QoS 플로우 ID(QFI), 및 상기 네트워크 혼잡 경험 패킷에 대 한 처리 정보를 포함하는 제1 메시지를 AMF(access and mobility management function)로 전송하도록 제어할 수 있다. 제어부는 상기 네트워크 혼잡 경험 패킷에 대한 처리 동작 활성화 여부에 관한 정보를 포함하는 제2 메시 지를 상기 AMF로부터 수신하도록 제어할 수 있다. 도 6은 본 개시의 실시예에 따른 UE의 구조를 나타낸다. 도 1 내지 도 4를 참조하여 설명한 UE(또는 단말)은 도 6의 단말에 대응될 수 있다. 도 6을 참조하면, UE는 송 수신부, 메모리, 및 제어부로 구성될 수 있다. 전술한 UE의 통신 방법에 따라, UE의 송수신부, 제어부 및 메모리가 동작할 수 있다. 다만, UE 의 구성 요소가 전술한 예에 한정되는 것은 아니다. 예를 들어, UE는 전술한 구성 요소들 보다 더 많은 구성 요 소를 포함하거나 더 적은 구성 요소를 포함할 수도 있다. 뿐만 아니라 송수신부, 제어부 및 메모리 가 하나의 칩(chip) 형태로 구현될 수도 있다. 또한, 제어부는 하나 이상의 프로세서를 포함할 수 있 다. 송수신부는 UE의 수신부와 UE의 송신부를 통칭한 것으로서, 다른 장치와 신호를 송수신할 수 있다. 이를 위해, 송수신부는 전송되는 신호의 주파수를 상승 변환 및 증폭하는 RF 송신기와, 수신되는 신호를 저 잡 음 증폭하고 주파수를 하강 변환하는 RF 수신기 등으로 구성될 수 있다. 다만, 이는 송수신부의 일 실시예 일뿐이며, 송수신부의 구성 요소가 RF 송신기 및 RF 수신기에 한정되는 것은 아니다. 또한, 송수신부는 무선 채널을 통해 신호를 수신하여 제어부로 출력하고, 제어부로부터 출력된 신호를 무선 채널을 통해 전송할 수 있다. 메모리는 UE의 동작에 필요한 프로그램 및 데이터를 저장할 수 있다. 또한, 메모리는 UE에서 획득되 는 신호에 포함된 제어 정보 또는 데이터를 저장할 수 있다. 메모리는 롬(ROM), 램(RAM), 하드디스크, CD- ROM 및 DVD 등과 같은 저장 매체 또는 저장 매체들의 조합으로 구성될 수 있다. 또한, 메모리는 별도로 존 재하지 않고 제어부에 포함되어 구성될 수도 있다. 제어부는 상술한 본 개시의 실시예에 따라 UE가 동작할 수 있도록 일련의 과정을 제어할 수 있다. 본 발명의 청구항 또는 명세서에 기재된 실시 예들에 따른 방법들은 하드웨어, 소프트웨어, 또는 하드웨어와 소 프트웨어의 조합의 형태로 구현될(implemented) 수 있다. 소프트웨어로 구현하는 경우, 하나 이상의 프로그램(소프트웨어 모듈)을 저장하는 컴퓨터 판독 가능 저장 매체 가 제공될 수 있다. 컴퓨터 판독 가능 저장 매체에 저장되는 하나 이상의 프로그램은, 전자 장치(device) 내의 하나 이상의 프로세서에 의해 실행 가능하도록 구성된다(configured for execution). 하나 이상의 프로그램은, 전자 장치로 하여금 본 발명의 청구항 또는 명세서에 기재된 실시 예들에 따른 방법들을 실행하게 하는 명령어 (instructions)를 포함한다. 이러한 프로그램(소프트웨어 모듈, 소프트웨어)은 랜덤 액세스 메모리 (random access memory), 플래시(flash) 메모리를 포함하는 불휘발성(non-volatile) 메모리, 롬(ROM: Read Only Memory), 전기적 삭제가능 프로그램가 능 롬(EEPROM: Electrically Erasable Programmable Read Only Memory), 자기 디스크 저장 장치(magnetic disc storage device), 컴팩트 디스크 롬(CD-ROM: Compact Disc-ROM), 디지털 다목적 디스크(DVDs: Digital Versatile Discs) 또는 다른 형태의 광학 저장 장치, 마그네틱 카세트(magnetic cassette)에 저장될 수 있다. 또는, 이들의 일부 또는 전부의 조합으로 구성된 메모리에 저장될 수 있다. 또한, 각각의 구성 메모리는 다수 개 포함될 수도 있다. 또한, 상기 프로그램은 인터넷(Internet), 인트라넷(Intranet), LAN(Local Area Network), WLAN(Wide LAN), 또 는 SAN(Storage Area Network)과 같은 통신 네트워크, 또는 이들의 조합으로 구성된 통신 네트워크를 통하여 접 근(access)할 수 있는 부착 가능한(attachable) 저장 장치(storage device)에 저장될 수 있다. 이러한 저장 장 치는 외부 포트를 통하여 본 발명의 실시 예를 수행하는 장치에 접속할 수 있다. 또한, 통신 네트워크상의 별도 의 저장장치가 본 발명의 실시 예를 수행하는 장치에 접속할 수도 있다. 본 발명의 상세한 설명에서는 구체적인 실시 예에 관해 설명하였으나, 본 발명의 범위에서 벗어나지 않는 한도 내에서 여러 가지 변형이 가능함은 물론이다. 그러므로 본 발명의 범위는 설명된 실시 예에 국한되어 정해져서는 아니 되며 후술하는 특허청구의 범위만 아니라 이 특허청구의 범위와 균등한 것들에 의해 정해져야 한다."}
{"patent_id": "10-2022-0012744", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1의 본 개시의 실시예에 따른 통신 시스템의 구조를 나타낸다. 도 2는 본 개시의 실시예에 따른 네트워크 혼잡 상황 경험 패킷 처리 정보를 제공하는 방법을 도시한다. 도 3은 본 개시의 실시예에 따른 네트워크 혼잡 경험 패킷에 대한 처리 정책을 설정하는 과정을 도시한다. 도 4는 본 개시의 실시예에 따른 네트워크 혼잡 경험 패킷 처리 기능을 지원하는 UPF 설정 또는 선택 방법을 도 시한다. 도 5는 본 개시의 실시예에 따른 네트워크 기능(또는 네트워크 엔티티)의 구조를 나타낸다. 도 6은 본 개시의 실시예에 따른 UE의 구조를 나타낸다."}
