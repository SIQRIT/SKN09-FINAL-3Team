{"patent_id": "10-2021-0148126", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0063170", "출원번호": "10-2021-0148126", "발명의 명칭": "스토리지 컨트롤러를 포함하는 스토리지 장치 및 이의 동작 방법", "출원인": "삼성전자주식회사", "발명자": "은희석"}}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "스토리지 컨트롤러 및 비휘발성 메모리를 포함하는 스토리지 장치의 동작 방법으로서,호스트로부터 데이터 및 상기 데이터와 관련된 필드를 포함하는 커맨드를 수신하는 단계;상기 커맨드에 응답하여 동작 모드를 결정하는 단계;상기 동작 모드를 기초로 상기 데이터를 선택적으로 암호화하는 단계; 및상기 선택적으로 암호화된 데이터를 상기 비휘발성 메모리에 저장하는 단계를 포함하고,상기 데이터를 선택적으로 암호화하는 단계는, 상기 동작 모드가 제1 모드인 경우, 상기 데이터를 동형 암호 알고리즘인 제1 암호화 알고리즘을 기초로 암호화하는 단계; 및 상기 동작 모드가 제2 모드인 경우, 상기 데이터를 상기 동형 암호 알고리즘과 상이한 알고리즘인 제2 암호화알고리즘을 기초로 암호화하는 단계를 포함하는 것을 특징으로 하는 스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 비휘발성 메모리에 저장하는 단계는,상기 동작 모드를 나타내는 정보를 상기 비휘발성 메모리에 저장하는 단계를 포함하는 것을 특징으로 하는 스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,상기 호스트로부터 리드 커맨드를 수신하는 단계;상기 리드 커맨드에 대응하는 데이터를 상기 비휘발성 메모리로부터 리드하는 단계;상기 리드된 데이터에 대응하는 암호화 알고리즘을 사용하여 상기 리드된 데이터를 선택적으로 복호화하는단계; 및상기 복호화된 데이터를 상기 호스트에 제공하는 단계를 더 포함하고,상기 리드된 데이터를 복호화하는 단계는, 상기 동작 모드가 상기 제1 모드인 경우, 상기 비휘발성 메모리로부터 리드된 데이터를 상기 제1 암호화 알고리즘을 사용하여 복호화하는 단계; 및 상기 동작 모드가 상기 제2 모드인 경우, 상기 비휘발성 메모리로부터 리드된 데이터를 상기 제2 암호화 알고리즘을 사용하여 복호화하는 단계를 포함하는 것을 특징으로 하는 스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서,상기 제1 암호화 알고리즘을 기초로 암호화된 데이터를 상기 비휘발성 메모리로부터 버퍼 메모리로 로드하는 단계; 및상기 스토리지 컨트롤러가 상기 버퍼 메모리에 로드된 데이터를 기초로 기계 학습(machine learning)의 훈련 연산(training operation)을 수행함으로써 학습 파라미터를 생성하는 단계를 더 포함하는 것을 특징으로 하는 스공개특허 10-2023-0063170-3-토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 호스트로부터 추론 대상 데이터를 수신하는 단계;상기 추론 대상 데이터를 상기 제1 암호화 알고리즘을 사용하여 암호화하는 단계;상기 암호화된 추론 대상 데이터 및 상기 학습 파라미터를 기초로 출력 데이터를 생성하는 단계; 및상기 출력 데이터를 상기 호스트에 제공하는 단계를 더 포함하는 것을 특징으로 하는 스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 제1 암호화 알고리즘은,동형(homomorphic) 암호 알고리즘이고,상기 제2 암호화 알고리즘은,대칭 키 암호 알고리즘 또는 비대칭 키 암호 알고리즘인 것을 특징으로 하는 스토리지 컨트롤러의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서,상기 커맨드에 응답하여 동작 모드를 결정하는 단계는,상기 스토리지 컨트롤러 내에서 상기 데이터에 대한 연산이 수행될지 여부를 나타내는 제1 필드 또는 상기 커맨드에 포함된 상기 데이터가 암호화된 데이터인지 여부를 나타내는 제2 필드를 식별하는 단계; 및상기 제1 필드 또는 상기 제2 필드를 기초로 상기 동작 모드를 결정하는 단계를 포함하는 것을 특징으로 하는스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에 있어서,상기 제1 필드 또는 상기 제2 필드를 기초로 상기 동작 모드를 결정하는 단계는,상기 제2 필드가 상기 데이터가 암호화된 데이터임을 나타내지 않고, 상기 제1 필드가 상기 데이터에 훈련 연산또는 추론 연산이 수행될 것임을 나타내는 경우, 상기 동작 모드를 상기 제1 모드로 결정하는 단계;상기 제2 필드가 상기 데이터가 암호화된 데이터임을 나타내지 않고, 상기 제1 필드가 상기 데이터에 산술 연산이 수행될 것임을 나타내지 않는 경우, 상기 동작 모드를 상기 제2 모드로 결정하는 단계; 및상기 제2 필드가 상기 데이터가 암호화된 데이터임을 나타내는 경우, 상기 동작 모드를 제3 모드로 결정하는 단계를 포함하는 것을 특징으로 하는 스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,상기 동작 모드가 상기 제3 모드인 경우, 상기 데이터에 대한 암호화를 생략하고 상기 데이터를 상기 비휘발성메모리에 저장하는 단계를 더 포함하는 것을 특징으로 하는 스토리지 장치의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "비휘발성 메모리를 제어하는 스토리지 컨트롤러의 동작 방법으로서,호스트로부터 데이터 및 상기 데이터와 관련된 필드를 포함하는 커맨드를 수신하는 단계;공개특허 10-2023-0063170-4-동형 암호 알고리즘인 제1 암호화 알고리즘 및 상기 동형 암호 알고리즘과 상이한 암호 알고리즘인 제2 암호화알고리즘을 포함하는 복수의 암호화 알고리즘들 중 상기 필드를 기초로 결정되는 암호화 알고리즘을 사용하여상기 데이터를 선택적으로 암호화하는 단계;상기 선택적으로 암호화된 데이터를 상기 비휘발성 메모리에 저장하는 단계를 포함하고,상기 커맨드는,상기 데이터에 대한 연산이 수행될지 여부를 나타내는 제1 필드 또는 상기 데이터가 암호화된 데이터인지 여부를 나타내는 제2 필드를 포함하는 것을 특징으로 하는 스토리지 컨트롤러의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에 있어서,상기 데이터를 암호화하는 단계는,상기 제2 필드가 상기 데이터가 암호화된 데이터임을 나타내는 경우, 상기 데이터에 대한 암호화를 생략하는 단계;상기 제2 필드가 상기 데이터가 암호화되지 않은 데이터임을 나타내고, 상기 제1 필드가 상기 데이터에 대해 연산이 수행될 것임을 나타내는 경우, 상기 제1 암호화 알고리즘을 사용하여 상기 데이터를 암호화하는 단계; 및상기 제2 필드가 상기 데이터가 암호화되지 않은 데이터임을 나타내고, 상기 제1 필드가 상기 데이터에 대해 연산이 수행되지 않을 것임을 나타내는 경우, 상기 제2 암호화 알고리즘을 사용하여 상기 데이터를 암호화하는 단계를 포함하는 것을 특징으로 하는 스토리지 컨트롤러의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서,상기 선택적으로 암호화된 데이터를 상기 비휘발성 메모리에 저장하는 단계는,상기 제2 필드가 상기 데이터가 암호화된 데이터임을 나타내는 경우, 상기 데이터를 상기 비휘발성 메모리에 저장하는 단계; 및상기 제2 필드가 상기 데이터가 암호화되지 않은 데이터임을 나타내는 경우, 상기 제1 암호화 알고리즘 또는 상기 제2 암호화 알고리즘에 의해 암호화된 데이터를 상기 비휘발성 메모리에 저장하는 단계를 포함하는 것을 특징으로 하는 스토리지 컨트롤러의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 제1 암호화 알고리즘에 의해 암호화된 데이터를 상기 비휘발성 메모리에서 리드하는 단계; 및상기 제1 암호화 알고리즘에 의해 암호화된 데이터를 기초로 산술 연산을 수행하는 단계를 포함하는 것을 특징으로 하는 스토리지 컨트롤러의 동작 방법."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "동형 암호 알고리즘인 제1 암호화 알고리즘을 기초로 데이터를 암호화 또는 복호화하도록 구성되는 제1 암호화회로;상기 동형 암호 알고리즘과 상이한 암호 알고리즘인 제2 암호화 알고리즘을 기초로 데이터를 암호화 또는 복호화하도록 구성되는 제2 암호화 회로;호스트로부터 수신되는 커맨드에 포함되는 필드를 기초로, 호스트로부터 수신되는 데이터를 상기 제1 암호화 회로 또는 상기 제2 암호화 회로에 전달하도록 구성되는 제1 인터페이스 회로; 및상기 제1 암호화 회로 또는 상기 제2 암호화 회로에 의해 생성되는 암호화 데이터를 비휘발성 메모리에 전달하는 제2 인터페이스 회로를 포함하는 스토리지 컨트롤러.공개특허 10-2023-0063170-5-청구항 15 제14항에 있어서,상기 제1 암호화 알고리즘은, 동형(homomorphic) 암호 알고리즘이고,상기 제2 암호화 알고리즘은, 대칭 키 암호 알고리즘 또는 비대칭 키 암호 알고리즘인 것을 특징으로 하는 스토리지 컨트롤러."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제14항에 있어서,상기 제1 암호화 알고리즘을 기초로 암호화된 암호화 데이터를 사용하여 산술 연산을 수행하는 가속기 회로를더 포함하는 것을 특징으로 하는 스토리지 컨트롤러."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제14항에 있어서,상기 커맨드는,상기 데이터에 대한 연산이 수행될지 여부를 나타내는 제1 필드 또는 상기 데이터가 암호화된 데이터인지 여부를 나타내는 제2 필드를 포함하는 것을 특징으로 하는 스토리지 컨트롤러."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제17항에 있어서,상기 제1 인터페이스 회로는,상기 제1 필드를 기초로 결정되는 상기 데이터에 대한 연산이 수행될지 여부에 따라, 상기 데이터는 상기 제1암호화 회로 또는 상기 제2 암호화 회로에 전달하는 것을 특징으로 하는 스토리지 컨트롤러."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제17항에 있어서,상기 제1 인터페이스 회로는,상기 제2 필드를 기초로 결정되는 데이터의 암호화 여부에 따라, 상기 호스트로부터 수신되는 데이터를 상기 제1 암호화 회로 및 상기 제2 암호화 회로에 전달하는 것을 생략하고,상기 제2 인터페이스 회로는,상기 호스트로부터 수신되는 데이터를 상기 비휘발성 메모리에 전달하는 것을 특징으로 하는 스토리지컨트롤러."}
{"patent_id": "10-2021-0148126", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제14항에 있어서,상기 제2 인터페이스 회로는,상기 비휘발성 메모리로부터 데이터 및 상기 데이터에 대응되는 상기 필드에 대한 정보를 수신하고, 상기 필드에 대한 정보를 기초로 상기 수신된 데이터를 상기 제1 암호화 회로 또는 상기 제2 암호화 회로에 전달하는 것을 특징으로 하는 스토리지 컨트롤러."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시의 기술적 사상에 따른 스토리지 장치의 동작 방법은, 호스트로부터 데이터 및 데이터와 관련된 필드를 포함하는 커맨드를 수신하는 단계, 커맨드에 응답하여 동작 모드를 결정하는 단계, 동작 모드를 기초로 데이터를 선택적으로 암호화하는 단계 및 선택적으로 암호화된 데이터를 비휘발성 메모리에 저장하는 단계를 포함하고, 데 이터를 선택적으로 암호화하는 단계는,상기 동작 모드가 제1 모드인 경우, 데이터를 제1 암호화 알고리즘을 기초 로 암호화하는 단계 및상기 동작 모드가 제2 모드인 경우, 데이터를 제2 암호화 알고리즘을 기초로 암호화하는 단계를 포함한다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시의 기술적 사상은 스토리지 장치에 관한 것으로서, 자세하게는 호스트로부터 수신되는 커맨드를 기초로 데이터를 선택적으로 암호화하는 스토리지 장치에 관한 것이다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "그래픽 처리 장치(Graphic Processing Unit, GPU) 및 FPGA(Field Programmable Gate Array)와 같은 가속기 회 로는 인공지능 연산 또는 기계 학습의 연산에 사용될 수 있다. 또한, 중앙 처리 장치(Central Processing Unit, CPU)와 스토리지 장치 간의 데이터 인터페이싱 속도가 데이터 연산이 미치는 영향이 크므로, 스토리지 장치 내의 가속기 회로를 이용하여, 스토리지 장치 내에서 데이터에 대 한 일부 연산을 처리할 수 있다. 한편, 스토리지 장치는 데이터에 대한 보안 성능을 제공하기 위하여 암호화된 데이터를 저장할 수 있다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시의 기술적 사상은 데이터를 암호화하는 스토리지 장치에 관한 것으로서, 커맨드에 포함되는 필드를 기초 로 데이터를 선택적으로 암호화하는 스토리지 장치 및 이의 동작 방법을 제공한다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기와 같은 목적을 달성하기 위하여, 본 개시의 일 측면에 따른 스토리지 장치의 동작 방법은, 호스트로부터 데이터 및 데이터와 관련된 필드를 포함하는 커맨드를 수신하는 단계, 커맨드에 응답하여 동작 모드를 결정하는 단계, 동작 모드를 기초로 데이터를 선택적으로 암호화하는 단계 및 선택적으로 암호화된 데이터를 비휘발성 메 모리에 저장하는 단계를 포함하고, 데이터를 선택적으로 암호화하는 단계는,상기 동작 모드가 제1 모드인 경우, 데이터를 제1 암호화 알고리즘을 기초로 암호화하는 단계 및상기 동작 모드가 제2 모드인 경우, 데이터를 제2 암호화 알고리즘을 기초로 암호화하는 단계를 포함한다. 본 개시의 다른 측면에 따른 스토리지 컨트롤러의 동작 방법은, 호스트로부터 데이터 및 데이터와 관련된 필드 를 포함하는 커맨드를 수신하는 단계, 복수의 암호화 알고리즘들 중 필드를 기초로 결정되는 암호화 알고리즘을 사용하여 데이터를 선택적으로 암호화하는 단계, 선택적으로 암호화된 데이터를 비휘발성 메모리에 저장하는 단 계를 포함하고, 커맨드는, 데이터에 대한 연산이 수행될지 여부를 나타내는 제1 필드 또는 커맨드에 포함된 데 이터가 암호화된 데이터인지 여부를 나타내는 제2 필드를 포함한다. 본 개시의 다른 측면에 따른 스토리지 컨트롤러는, 제1 암호화 알고리즘을 기초로 데이터를 암호화 또는 복호화 하도록 구성되는 제1 암호화 회로, 제2 암호화 알고리즘을 기초로 데이터를 암호화 또는 복호화하도록 구성되는 제2 암호화 회로, 호스트로부터 수신되는 커맨드에 포함되는 필드를 기초로, 호스트로부터 수신되는 데이터를 제1 암호화 회로 또는 제2 암호화 회로에 전달하도록 구성되는 제1 인터페이스 회로 및 제1 암호화 회로 또는 제2 암호화 회로에 의해 생성되는 암호화 데이터를 비휘발성 메모리에 전달하는 제2 인터페이스 회로를 포함한 다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시의 예시적 실시 예에 따라, 커맨드에 포함되는 필드를 기초로 데이터를 선택적으로 암호화함으로써 보안 성능 및 향상된 저장 속도를 제공하는 스토리지 장치 및 이의 동작 방법이 제공될 수 있다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 발명의 다양한 실시 예가 첨부된 도면을 참조하여 기재된다. 도 1은 본 개시의 예시적 실시 예에 따른 스토리지 시스템을 설명하는 블록도이다. 도 1을 참조하면, 스토리지 시스템은 스토리지 장치 및 호스트를 포함할 수 있다. 호스트는 스 토리지 장치에 커맨드(CMD), 예를 들어, 쓰기 커맨드를 제공하고 평문(Plain Text, PT)을 스토리지 장치 에 저장할 수 있다. 평문(PT)은 암호화되지 않은 데이터를 의미할 수 있다. 일부 실시예들에서, 커맨드 (CMD)는 리드 커맨드일 수 있다. 호스트가 리드 커맨드를 스토리지 장치에 제공하는 경우, 스토리지 장 치는 리드 커맨드에 대응하는 평문(PT)을 호스트에 제공할 수 있다. 스토리지 장치는 호스트로부터의 커맨드에 따라 데이터를 저장하기 위한 저장 매체들을 포함할 수 있다. 일 예로서, 스토리지 장치는 SSD(Solid State Drive), 임베디드(embedded) 메모리 및 착탈 가능한 외장(external) 메모리 중 적어도 하나를 포함할 수 있다. 스토리지 장치가 SSD인 경우, 스토리지 장치(1 0)는 NVMe(non-volatile memory express) 표준을 따르는 장치일 수 있다. 스토리지 장치가 임베디드 메모 리 혹은 외장(external) 메모리인 경우, 스토리지 장치는 UFS(universal flash storage) 혹은 eMMC(embedded multi-media card) 표준을 따르는 장치일 수 있다. 호스트와 스토리지 장치는 각각 채 용된 표준 프로토콜에 따른 패킷을 생성하고 이를 전송할 수 있다. 스토리지 장치의 비휘발성 메모리가 플래시 메모리를 포함할 때, 상기 플래시 메모리는 2D NAND 메모 리 어레이나 3D(또는 수직형, Vertical) NAND(VNAND) 메모리 어레이를 포함할 수 있다. 다른 예로서, 스토리지 장치는 다른 다양한 종류의 비휘발성 메모리들을 포함할 수도 있다. 예를 들어, 스토리지 장치는 MRAM(Magnetic RAM), 스핀전달토크 MRAM(Spin-Transfer Torgue MRAM), Conductive bridging RAM(CBRAM), FeRAM(Ferroelectric RAM), PRAM(Phase RAM), 저항 메모리(Resistive RAM) 및 다른 다양한 종류의 메모리가 적 용될 수 있다. 스토리지 컨트롤러는 호스트 인터페이스, 제1 암호화 회로 및 제2 암호화 회로를 포함할 수 있다. 호스트 인터페이스는 호스트와 패킷(packet)을 송수신할 수 있다. 호스트로부터 호스트 인터페이 스에 전송되는 패킷은 커맨드(CMD) 또는 비휘발성 메모리에 기록될 데이터(즉, 평문(PT)) 등을 포함 할 수 있다. 호스트 인터페이스로부터 호스트로 전송되는 패킷은 커맨드에 대한 응답(response) 또는 비휘발성 메모리로부터 리드된 데이터 등을 포함할 수 있다. 본 개시의 예시적 실시예에 따른 호스트 인터 페이스는, 커맨드(CMD)에 포함되는 데이터와 관련된 필드를 기초로, 평문(PT)을 제1 암호화 회로 또 는 제2 암호화 회로에 전달할 수 있다. 제1 암호화 회로는 제1 암호화 알고리즘에 따라 평문(PT)을 암호화함으로써 제1 암호문(CT1)을 생성할 수 있고, 제1 암호화 알고리즘에 따라 제1 암호문(CT1)을 복호화할 수 있다. 일부 실시예들에서, 제1 암호화 알고 리즘은 동형 암호(homomorphic encryption) 알고리즘일 수 있다. 제1 암호화 알고리즘은, 연산이 가능한 암호문 을 제공할 수 있다. 구체적으로, 제1 암호문(CT1)에 대한 연산(예를 들어, 산술 연산) 결과를 복호화함으로써 생성되는 복호화 데이터는, 평문에 대한 연산 결과와 동일할 수 있다. 즉, 제1 암호문(CT1)을 사용하여, 평문에 대한 보안이 유지됨과 동시에 연산이 수행될 수 있다.제2 암호화 회로는 제2 암호화 알고리즘에 따라 평문(PT)을 암호화함으로써 제2 암호문(CT2)을 생성할 수 있고, 제2 암호화 알고리즘에 따라 제2 암호문(CT2)을 복호화할 수 있다. 일부 실시예들에서, 제2 암호화 알고 리즘은 대칭 키(symmetric key) 알고리즘 또는 비대칭 키(asymmetric key) 알고리즘일 수 있다. 제2 암호화 알 고리즘은, 간단한 암호화 및 복호화 알고리즘일 수 있고, 빠른 암호화 및 복호화 속도를 제공할 수 있다. 따라 서, 제2 암호화 알고리즘에 따라 평문(PT)을 암호화하는 경우 호스트와 스토리지 장치 간의 인터페이스 성능이 향상될 수 있다. 본 개시의 예시적 실시 예에 따른 호스트 인터페이스는 커맨드(CMD)에 포함된 제1 필드 또는 제2 필드를 기초로 평문(PT)을 제1 암호화 회로 또는 제2 암호화 회로에 전달할 수 있다. 제1 필드는 호스트(2 0)로부터 수신되는 데이터에 대해 연산이 수행될 것인지 여부를 나타내는 정보를 포함할 수 있다. 예를 들어, 제1 필드가 '1'을 포함하는 경우 호스트로부터 수신되는 데이터에 대한 산술 연산, 머신 러닝의 학습 연산 또는 머신 러닝의 추론 연산이 스토리지 장치 내에서 수행될 수 있다. 제1 필드가 '0'을 포함하는 경우, 호 스트로부터 수신되는 데이터에 대한 산술 연산, 머신 러닝의 학습 연산 또는 머신 러닝의 추론 연산이 스토 리지 장치 내에서 수행되지 않을 수 있다. 제2 필드는 호스트로부터 수신되는 데이터가 평문인지 여부, 즉, 데이터의 암호화 여부를 나타내는 정보를 포함할 수 있다. 예를 들어, 제2 필드가 '1'을 포함하는 경우 호 스트로부터 수신되는 데이터는 암호화되지 않은 평문일 수 있고, 제2 필드가 '0'을 포함하는 경우 호스트 로부터 수신되는 데이터는 암호문일 수 있다. 도 2는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 구체적으로, 도 2는 호스트로부터 수신된 데이터를 비휘발성 메모리에 저장하는 스토리지 장치의 쓰기 동작 방 법을 설명할 수 있다. 도 2를 참조하면, 스토리지 장치의 동작 방법은 복수의 단계들(S210 내지 S240)을 포함할 수 있다. 도 2는 도 1을 참조하여 후술될 수 있다. S210 단계에서, 스토리지 장치에 포함된 호스트 인터페이스는 호스트로부터 데이터 및 커맨드를 수신할 수 있다. 데이터는 암호화되지 않은 평문이거나 암호문일 수 있다. 커맨드는 데이터에 대한 적어도 하나 의 필드를 포함할 수 있다. 일부 실시예들에서, 커맨드는 제1 필드 또는 제2 필드를 포함할 수 있다. 제1 필드 는 데이터에 대한 연산이 수행될 것인지 여부를 나타낼 수 있고, 제2 필드는 데이터의 암호화 여부를 나타낼 수 있다. S220 단계에서, 스토리지 장치는 커맨드에 포함된 적어도 하나의 필드를 기초로 동작 모드를 결정할 수 있 다. 구체적으로, 호스트 인터페이스는 커맨드에 포함되는 제1 필드 또는 제2 필드를 식별할 수 있고, 스토 리지 장치는 제1 필드 또는 제2 필드에 저장된 정보에 따라 동작 모드를 결정할 수 있다. 예를 들어, 제2 필드가 데이터가 암호화되지 않은 것을 나타내고, 제1 필드가 데이터에 대한 연산이 수행될 것임을 나타내는 경 우, 스토리지 장치는 제1 동작 모드로 동작할 수 있다. 제2 필드가 데이터가 암호화되지 않은 것을 나타내 고, 제1 필드가 데이터에 대한 연산이 수행되지 않을 것임을 나타내는 경우, 스토리지 장치는 제2 동작 모 드로 동작할 수 있다. 제2 필드가 데이터가 암호화된 것임을 나타내는 경우, 스토리지 장치는 제3 동작 모 드로 동작할 수 있다. S230 단계에서, 스토리지 장치는 결정된 동작 모드에 대응하는 암호화 알고리즘을 사용하여 호스트로부 터 수신된 데이터를 선택적으로 암호화할 수 있다. 예를 들어, 제1 동작 모드에서, 호스트 인터페이스는 데이터를 제1 암호화 회로에 전달할 수 있고, 제1 암호화 회로는 제1 암호화 알고리즘을 사용하여 데 이터를 암호화할 수 있다. 제2 동작 모드에서, 호스트 인터페이스는 데이터를 제2 암호화 회로에 전 달할 수 있고, 제2 암호화 회로는 제2 암호화 알고리즘을 사용하여 데이터를 암호화할 수 있다. 제3 동작 모드에서, 호스트 인터페이스는 데이터에 대한 암호화를 생략할 수 있다. 제3 동작 모드에서, 호스트 로부터 수신된 데이터는 이미 암호화된 데이터일 수 있다. S240 단계에서, 스토리지 장치는 암호화된 데이터를 비휘발성 메모리에 저장할 수 있다. 예를 들어, 제1 동작 모드에서, 제1 암호화 회로에 의해 암호화된 데이터는 비휘발성 메모리에 저장될 수 있다. 제2 동작 모드에서, 제2 암호화 회로에 의해 암호화된 데이터는 비휘발성 메모리에 저장될 수 있다. 제3 동작 모드에서, 호스트 인터페이스에 의해 수신된 데이터는 비휘발성 메모리에 저장될 수 있다. 일부 실시예들에서, 스토리지 장치는 암호화된 데이터 뿐만 아니라 커맨드에 포함된 제1 필드 및 제2 필드 의 정보를 비휘발성 메모리에 저장할 수도 있다. 즉, 스토리지 장치는 동작 모드를 나타내는 정보 또 한 비휘발성 메모리에 저장할 수도 있다.도 3은 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 구체적으로, 도 3은 비휘발성 메모리에 저장된 데이터를 호스트에 전달하는 스토리지 장치의 리드 동작 방법을 설명할 수 있다. 도 3을 참조하면, 스토리지 장치의 동작 방법은 복수의 단계들(S310 내지 S340)을 포함할 수 있다. 도 3은 도 1을 참조하여 후술될 수 있다. S310 단계에서, 스토리지 장치는 호스트로부터 리드 커맨드를 수신할 수 있다. 구체적으로, 호스트 인 터페이스는 호스트로부터 리드 커맨드를 수신할 수 있다. 스토리지 장치는 리드 커맨드 뿐만 아니 라 리드 대상이 되는 데이터의 위치를 가리키는 어드레스도 함께 수신할 수 있다. S320 단계에서, 스토리지 장치는 비휘발성 메모리로부터 데이터를 리드할 수 있다. 리드된 데이터는 버퍼 메모리(미도시)에 임시로 저장될 수 있다. 일부 실시예들에서, 스토리지 장치는 데이터 뿐만 아니라 동작 모드를 나타내는 정보 또한 비휘발성 메모리로부터 리드할 수 있다. 즉, 스토리지 장치는 데이터에 대응되 는 제1 필드 및 제2 필드 정보를 비휘발성 메모리로부터 리드할 수 있다. S330 단계에서, 스토리지 장치는 리드된 데이터에 대응되는 동작 모드를 기초로 리드된 데이터를 선택적으 로 복호화할 수 있다. 스토리지 장치는 리드된 데이터에 대응되는 제1 필드 및 제2 필드 정보를 기초로 리 드된 데이터에 대응되는 동작 모드를 판단할 수 있다. 구체적으로, 제1 동작 모드에서, 스토리지 장치는 제 1 암호화 알고리즘을 사용하여 리드된 데이터를 복호화할 수 있다. 제2 동작 모드에서, 스토리지 장치는 제 2 암호화 알고리즘을 사용하여 리드된 데이터를 복호화할 수 있다. 제3 동작 모드에서, 스토리지 장치는 리 드된 데이터에 대한 복호화를 생략할 수 있다. S340 단계에서, 스토리지 장치는 선택적으로 복호화된 데이터를 호스트에 제공할 수 있다. 구체적으로, 제1 동작 모드에서, 스토리지 장치는 제1 암호화 알고리즘을 사용하여 복호화된 데이터를 호스트에 제 공할 수 있다. 제2 동작 모드에서, 스토리지 장치는 제2 암호화 알고리즘을 사용하여 복호화된 데이터를 호 스트에 제공할 수 있다. 제3 동작 모드에서, 스토리지 장치는 비휘발성 메모리로부터 리드된 데이 터를 호스트에 제공할 수 있다. 도 4는 본 개시의 예시적 실시 예에 따른 스토리지 시스템을 설명하는 블록도이다. 도 4를 참조하면, 스토리지 시스템은 스토리지 장치 및 호스트를 포함할 수 있다. 일부 실시예들에 서, 호스트는 호스트 컨트롤러 및 호스트 메모리를 포함할 수 있다. 호스트 메모리는 스토리지 장치로 전송될 데이터, 혹은 스토리지 장치로부터 전송된 데이터를 임시로 저장하기 위한 버퍼 메모리 로서 기능할 수 있다. 일 실시예에 따라, 호스트 컨트롤러와 호스트 메모리는 별도의 반도체 칩으로 구현될 수 있다. 또는, 일부 실시예들에서, 호스트 컨트롤러와 호스트 메모리는 동일한 반도체 칩에 집적될 수 있다. 일 예로 서, 호스트 컨트롤러는 어플리케이션 프로세서(Application Processor)에 구비되는 다수의 모듈들 중 어느 하나일 수 있으며, 상기 어플리케이션 프로세서는 시스템 온 칩(System on Chip, SoC)으로 구현될 수 있다. 또 한, 호스트 메모리는 상기 어플리케이션 프로세서 내에 구비되는 임베디드 메모리이거나, 또는 상기 어플리 케이션 프로세서의 외부에 배치되는 비휘발성 메모리 또는 메모리 모듈일 수 있다. 호스트 컨트롤러는 호스트 메모리의 데이터(예컨대, 기록 데이터)를 비휘발성 메모리에 저장하거 나, 비휘발성 메모리의 데이터(예컨대, 독출 데이터)를 호스트 메모리에 저장하는 동작을 관리할 수 있다. 스토리지 장치는 스토리지 컨트롤러 및 비휘발성 메모리(NVM, 400)를 포함할 수 있다. 스토리지 컨트롤러는 호스트 인터페이스, 메모리 인터페이스 및 스토리지 프로세서를 포함 할 수 있다. 또한, 스토리지 컨트롤러는 플래시 변환 레이어(Flash Translation Layer(FTL), 340), 패킷 매니저, 버퍼 컨트롤러, ECC(error correction code, 370) 엔진, 제1 암호화 회로 및 제2 암호 화 회로를 더 포함할 수 있다. 스토리지 컨트롤러는 플래시 변환 레이어(FTL, 340)가 로딩되는 워킹 메모리(미도시)를 더 포함할 수 있으며, 스토리지 프로세서가 플래시 변환 레이어를 실행하는 것에 의해 비휘발성 메모리에 대한 데이터 기록 및 독출 동작이 제어될 수 있다. 메모리 인터페이스는 비휘발성 메모리에 기록될 데이터를 비휘발성 메모리로 송신하거나, 비휘 발성 메모리로부터 독출된 데이터를 수신할 수 있다. 이러한 메모리 인터페이스는 토글(Toggle) 혹은 온파이(ONFI)와 같은 표준 규약을 준수하도록 구현될 수 있다. 본 발명의 일 실시예에 따르면, 메모리 인터페이 스는 제1 암호화 회로 또는 제2 암호화 회로에 의해 암호화된 암호문(CT)을 비휘발성 메모리 에 전달하거나, 비휘발성 메모리로부터 독출된 암호문(CT)을 수신할 수 있다. 플래시 변환 레이어는 어드레스 매핑(address mapping), 웨어-레벨링(wear-leveling), 가비지 콜렉션 (garbage collection)과 같은 여러 기능을 수행할 수 있다. 어드레스 매핑 동작은 호스트로부터 수신한 논 리 어드레스(logical address)를, 비휘발성 메모리 내에 데이터를 실제로 저장하는 데 사용되는 물리 어드 레스(physical address)로 바꾸는 동작이다. 웨어-레벨링은 비휘발성 메모리 내의 블록(block)들이 균일하 게 사용되도록 하여 특정 블록의 과도한 열화를 방지하기 위한 기술로, 예시적으로 물리 블록(physical block) 들의 소거 카운트들을 밸런싱하는 펌웨어 기술을 통해 구현될 수 있다. 가비지 콜렉션은, 블록의 유효 데이터를 새 블록에 복사한 후 기존 블록을 소거(erase)하는 방식을 통해 비휘발성 메모리 내에서 사용 가능한 용량 을 확보하기 위한 기술이다. 패킷 매니저는 호스트와 협의된 인터페이스의 프로토콜에 따른 패킷(Packet)을 생성하거나, 호스트 로부터 수신된 패킷(Packet)으로부터 각종 정보를 파싱할 수 있다. 또한, 버퍼 컨트롤러는 스토리지 컨트롤러 외부에 구비되는 버퍼 메모리에 데이터가 임시로 저장되도록 제어할 수 있다. 구체적으로, 버퍼 컨트롤러의 제어에 의해, 비휘발성 메모리에 기록될 데이터 혹은 비휘발성 메모리로부터 독출될 데이터가 버퍼 메모리에 임시로 저장될 수 있다. 도 4에 도시된 바와 같이, 버퍼 메모리는 스 토리지 컨트롤러 내에 구비될 수 있으나, 스토리지 컨트롤러의 외부에 배치될 수도 있다. ECC 엔진은 비휘발성 메모리로부터 독출되는 독출 데이터에 대한 오류 검출 및 정정 기능을 수행할 수 있다. 보다 구체적으로, ECC 엔진은 비휘발성 메모리에 기입될 기입 데이터에 대하여 패리티 비트 (parity bit)들을 생성할 수 있으며, 이와 같이 생성된 패리티 비트들은 기입 데이터와 함께 비휘발성 메모리 내에 저장될 수 있다. 비휘발성 메모리로부터의 데이터 독출 시, ECC 엔진은 독출 데이터와 함 께 비휘발성 메모리로부터 독출되는 패리티 비트들을 이용하여 독출 데이터의 에러를 정정하고, 에러가 정 정된 독출 데이터를 출력할 수 있다. 제1 암호화 회로는 제1 암호화 알고리즘에 따라 평문(PT)을 암호화할 수 있다. 제1 암호화 알고리즘은 동 형 암호 알고리즘일 수 있다. 제1 암호화 회로는 호스트 인터페이스로 입력되는 평문(PT)에 대한 암 호화 동작과 복호화 동작 중 적어도 하나를 제1 암호화 알고리즘을 사용하여 수행할 수 있다. 제1 암호화 회로 는 평문(PT)을 암호화함으로써 암호문(CT)을 생성할 수 있다. 제1 암호화 회로에 의해 생성된 암호문 (CT)은 버퍼 컨트롤러의 제어에 의해 버퍼 메모리에 임시로 저장될 수 있고, 메모리 인터페이스(32 0)에 제공될 수 있다. 제2 암호화 회로는 제2 암호화 알고리즘에 따라 평문(PT)을 암호화할 수 있다. 제2 암호화 알고리즘은 대 칭 키 알고리즘일 수 있다. 제2 암호화 회로는 호스트 인터페이스로 입력되는 평문(PT)에 대한 암호 화 동작과 복호화 동작 중 적어도 하나를 제2 암호화 알고리즘을 사용하여 수행할 수 있다. 제2 암호화 회로 에 의해 생성된 암호문(CT)은 버퍼 컨트롤러의 제어에 의해 버퍼 메모리에 임시로 저장될 수 있 고, 메모리 인터페이스에 제공될 수 있다. 스토리지 프로세서는 중앙 처리 장치(Central Processing Unit, CPU)를 포함할 수 있다. CPU는 하나 이상의 CPU 코어를 포함할 수 있다. 스토리지 프로세서는 AI(Artificial Intelligence) 데이터 연산 등 고속 데이터 연산을 위한 전용 회로인 가속기를 더 포함할 수 있다. 가속기는 GPU(Graphics Processing Unit), NPU(Neural Processing Unit) 및/또는 DPU(Data Processing Unit), FPGA(Field Programmable Gate Array) 등을 포함할 수 있으며, CPU와 물리적으로 독립된 별개의 칩으로 구현될 수도 있다. 가속기는 비휘발성 메모리에 저장된 데이터에 대한 연산을 수행할 수 있다. 구체적으로, 가속기(33 2)는 덧셈 연산, 곱셈 연산 등과 같은 산술 연산 뿐만 아니라, 기계 학습의 훈련 연산 또는 추론 연산도 수행할 수 있다. 가속기는 제1 암호화 알고리즘을 기초로 암호화된 암호문에 대해 연산을 수행할 수 있다. 일부 실시예들에서, 가속기는 비휘발성 메모리로부터 버퍼 메모리에 로드된 제1 암호문(CT1)을 사용 하여 기계 학습의 훈련 연산을 수행할 수 있다. 가속기는 훈련 연산을 통해 학습 모델의 학습 파라미터를 생성할 수 있고, 학습 파라미터를 버퍼 메모리에 임시로 저장하거나 비휘발성 메모리에 저장할 수 있 다. 일부 실시예들에서, 가속기는 학습 파라미터를 기초로 기계 학습의 추론 연산을 수행할 수도 있다. 예를 들어, 추론 연산 시, 스토리지 컨트롤러는 호스트로부터 추론 대상 데이터를 수신할 수 있고, 추론 대상 데이터를 제1 암호화 알고리즘을 사용하여 암호화할 수 있다. 이후, 가속기는 학습 파라미터를 기초 로 추론 대상 데이터로부터 학습 모델에 따른 출력 데이터를 생성할 수 있다. 스토리지 컨트롤러는 출력 데이터를 호스트에 제공할 수 있다. 도 5는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 스토리지 장치의 동작 방법은 복수의 단계들(S610 내지 S660)을 포함할 수 있다. 도 5는 도 4를 참조하여 후술될 수 있다. S610 단계에서, 호스트 인터페이스는 호스트로부터 평문 및 커맨드를 수신할 수 있다. 평문은 암호화 되지 않은 데이터일 수 있다. 커맨드는 리드 커맨드 또는 쓰기 커맨드를 포함할 수 있다. 커맨드는 스토리지 장 치 내에서 평문에 대한 연산이 수행될 것인지 여부를 나타내는 제1 필드를 포함할 수 있다. 연산은, AI 데 이터 연산, 머신 러닝의 학습 연산 또는 추론 연산을 의미할 수 있다. 연산은 스토리지 프로세서에 포함된 CPU 또는 가속기에 의해 수행될 수 있다. S620 단계에서, 스토리지 장치는 커맨드의 제1 필드를 식별할 수 있다. 일부 실시예들에서, 호스트 인터페 이스는 커맨드를 구성하는 비트들 중 미리 정해진 비트를 통해 제1 필드를 식별할 수 있다. 예를 들어, 커 맨드를 구성하는 비트들 중 제1 필드를 구성하는 비트가'1'인 경우, 제1 필드는 호스트로부터 수신된 평문 에 대해 스토리지 장치 내에서 연산이 수행될 것임을 나타낼 수 있다. 또한, 커맨드를 구성하는 비트들 중 제1 필드를 구성하는 비트가'0'인 경우, 제1 필드는 호스트로부터 수신된 평문에 대해 스토리지 장치 내에서 연산이 수행되지 않을 것임을 나타낼 수 있다. 설명의 편의를 위하여, 호스트 인터페이스가 제1 필 드를 식별하는 것으로 도시하였으나, 일부 실시예들에서, 스토리지 프로세서가 제1 필드를 식별할 수도 있 다. S630 단계에서, 평문이 연산 대상 데이터인 경우 S640 단계가 수행될 수 있고, 평문이 연산 대상 데이터가 아닌 경우 S650 단계가 수행될 수 있다. 연상 대상 데이터는, 스토리지 장치 내에서 수행되는 연산의 대상이 되 는 데이터를 의미할 수 있다. S640 단계에서, 제1 암호화 회로는 제1 암호화 알고리즘을 사용하여 평문을 암호화할 수 있다. 제1 암호화 알고리즘은 동형 암호 알고리즘일 수 있다. 일부 실시예들에서, 제1 암호화 회로는 제1 암호화 알고리즘을 사용하여 평문을 암호화함으로써 제1 암호문을 생성할 수 있고, 제1 암호문은 버퍼 메모리에 임시로 저장 될 수 있다. 일부 실시예들에서, 제1 암호문에 대한 연산의 결과로서 연산 데이터가 생성될 수 있다. 제1 암호 화 알고리즘을 사용하여 연산 데이터가 복호화됨으로써 복호화 데이터가 생성될 수 있고, 복호화 데이터는, 암 호화되기 전 평문에 대해 수행된 연산의 결과와 동일할 수 있다. 즉, 스토리지 장치가 연산의 대상이 되는 평문을 제1 암호화 알고리즘을 사용하여 암호화함으로써, 평문이 암호화된 상태에서, 평문에 대한 연산이 스토 리지 장치 내에서 가능해질 수 있다. 따라서, 스토리지 장치는 평문에 대한 연산 기능을 제공함과 동시 에 데이터의 보안을 보장할 수 있다. S650 단계에서, 제2 암호화 회로는 제2 암호화 알고리즘을 사용하여 평문을 암호화할 수 있다. 일부 실시 예들에서, 제2 암호화 회로는 제2 암호화 알고리즘을 사용하여 평문을 암호화함으로써 제2 암호문을 생성 할 수 있고, 제2 암호문은 버퍼 메모리에 임시로 저장될 수 있다. 제2 암호화 알고리즘은 대칭 키 알고리 즘 또는 비대칭 키 알고리즘일 수 있다. 제2 암호화 알고리즘은 제1 암호화 알고리즘에 비해 상대적으로 빠른 암호화 성능을 제공할 수 있다. 즉, 스토리지 장치 내에서 연산이 되지 않을 평문에 대해 제2 암호화 알고 리즘을 사용하여 암호화가 수행됨으로써 스토리지 장치는 데이터의 보안을 보장함과 동시에 향상된 속도를 갖는 암호화 성능을 제공할 수 있다. S660 단계에서, 스토리지 컨트롤러는 제1 암호화 알고리즘 또는 제2 암호화 알고리즘에 의해 생성된 제1 암호문 또는 제2 암호문을 비휘발성 메모리에 저장할 수 있다. 구체적으로, 메모리 인터페이스는 제1 암호화 회로 또는 제2 암호화 회로로부터 제1 암호문 또는 제2 암호문을 수신하고, 비휘발성 메모리 에 제공할 수 있다. 일부 실시예들에서, 메모리 인터페이스는 버퍼 메모리에 임시로 저장된 제1 암호문 또는 제2 암호문을 수신하고, 비휘발성 메모리에 제공할 수도 있다. 메모리 인터페이스는 제1 또는 제2 암호문과 함께 쓰기 커맨드를 비휘발성 메모리에 제공할 수도 있다. 도 6은 본 개시의 예시적 실시 예에 따른 커맨드 구조를 설명하는 도면이다. 도 6은 도 1을 참조하여 후술될 수 있다. 도 6을 참조하면, 커맨드(CMD)는 복수의 필드들을 포함할 수 있다. 일부 실시예들에서, 커맨드(CMD)는 연 산 코드(opcode) 필드 및 제1 필드를 포함할 수 있다. 연산 코드(opcode) 필드는 커맨드의 종류를 나타내는 필드일 수 있다. 예를 들어, 연산 코드(opcode)는 쓰기 커맨드 또는 리드 커맨드를 나타내는 정보를 포함할 수 있 다. 설명의 편의를 위하여 커맨드(CMD)라는 용어를 사용하였으나, 커맨드(CMD)는 요청(request), 쿼리(query) 또는 패킷(packet)으로 지칭될 수도 있다. 도 6을 참조하면, 도 6의 커맨드(CMD)는, 제1 필드(field1) 및 제2 필드(field2)를 더 포함할 수 있다. 제1 필 드는 스토리지 장치 내에서 데이터에 대해 연산이 수행될 것인지 여부를 나타내는 정보를 포함할 수 있다. 일부 실시예들에서, 제1 필드는 하나의 비트로 구성될 수 있다. 예를 들어, 제1 필드가 ‘1’을 포함하는 경우 호스트로부터 수신되는 데이터에 대한 산술 연산, 머신 러닝의 학습 연산 또는 머신 러닝의 추론 연산이 스 토리지 장치 내에서 수행될 수 있다. 제1 필드가 ‘0’을 포함하는 경우, 호스트로부터 수신되는 데이 터에 대한 산술 연산, 머신 러닝의 학습 연산 또는 머신 러닝의 추론 연산이 스토리지 장치 내에서 수행되 지 않을 수 있다. 제2 필드는 호스트로부터 수신되는 데이터가 암호화되었는지 여부를 나타내는 정보를 포 함할 수 있다. 일부 실시예들에서, 제2 필드는 하나의 비트로 구성될 수 있다. 예를 들어, 제2 필드가 '1'을 포 함하는 경우, 호스트로부터 수신되는 데이터는 암호화되지 않은 평문일 수 있고, 제2 필드가 '0'을 포함하 는 경우, 호스트로부터 수신되는 데이터는 암호문일 수 있다. 호스트로부터 수신되는 데이터가 평문인 경우, 도 1 내지 5를 통해 전술된 바와 같이, 제1 암호화 알고리즘 또는 제2 암호화 알고리즘을 사용하여 평문에 대한 암호화가 수행될 수 있다. 호스트로부터 수신되는 데이 터가 암호문인 경우, 호스트로부터 수신되는 데이터에 대해 암호화가 수행되지 않고 데이터는 비휘발성 메 모리에 저장될 수 있다. 도 7a 및 도 7b는 본 개시의 예시적 실시 예에 따른 커맨드의 예시를 나타내는 도면이다. 구체적으로, 도 7a는 UFS 표준에 의해 지원되는 커맨드의 예시를 나타내고, 도 7b는 NVMe 표준에 의해 지원되는 커맨드의 예시를 나 타내는 도면이다. 도 7a를 참조하면, 커맨드(CMD)는 복수의 필드들을 포함할 수 있다. 구체적으로, 커맨드는 타입 코드(Type code) 필드, 플래그(Flags) 필드, LUN(Logical Unit Number) 필드, 태스크 태그(Task Tag) 필드, 개시자 식별 자(Initiator ID) 필드, 커맨드 세트 타입(Command Set Type) 필드, 제1 내지 4 예비 필드(Rserved 1 내지 4), 토탈 엑스트라 헤더 세그먼트(Extra Header Segment, EHS) 길이 필드, 데이터 세그먼트 길이 필드, 예상 데이터 전송 길이 필드, 커맨드 디스크립터 블록(Command Descriptor Block, CDB) 필드 및 헤더 E2ECRC 필드를 포함할 수 있다. 타입 코드 필드는, 커맨드(CMD)의 종류를 나타내는 비트를 포함할 수 있다. 플래그 필드는, 데이터 전송의 방향 을 나타내는 정보 또는 커맨드의 우선권 정보를 포함할 수 있다. LUN(Logical Unit Number) 필드는, 커맨드가 전달되는 장치의 로지컬 유닛 넘버에 대한 정보를 포함할 수 있다. 태스크 태그 필드는, 태스크와 관련된 트랜 잭션들에 대해 유지되는 고유의 태그 값을 포함할 수 있다. 개시자 식별자 필드는, 커맨드를 전송하는 장치의 식별자에 대한 정보를 포함할 수 있다. 커맨드 세트 타입 필드는, CDB 필드에서 커맨드 비트가 정의하는 커맨드 세트에 대한 정보를 포함할 수 있다. 토탈 EHS 길이 필드는, 추가적인 헤더 세그먼트들의 크기를 나타내는 정보 를 포함할 수 있다. 데이터 세그먼트 길이 필드는, 커맨드에 후속하는 데이터 세그먼트의 길이를 나타내는 정보 를 포함할 수 있다. 예상 데이터 전송 길이 필드는, SCSI(Small Computer System Interface) 커맨드 요청을 완 료하기 위해 전송되는 비트의 개수에 대한 정보를 포함할 수 있다. CDB 필드는, UFS 커맨드 세트들에 의해 정의 되는 표준 커맨드 디스크립터 블록에 대한 정보를 포함할 수 있다. 헤더 E2ECRC 필드는, 커맨드를 전송하는 장 치와 수신하는 장치 간의 CRC(Cyclic Redundancy Check) 결과에 대한 정보를 포함할 수 있다. 본 개시의 예시적 실시 예에 따르면, 도 7a의 커맨드(CMD)는 도 6의 제1 필드 및 제2 필드를 포함할 수 있다. 일 예로서, 도 7a의 커맨드(CMD)의 제1 내지 4 예비 필드(Reserved 1 내지 4) 중 하나는 2개의 필드로 분할됨으 로써 제1 필드 및 제2 필드로서 활용될 수 있다. 일 예로서, 도 7a의 커맨드(CMD)의 제1 내지 4 예비 필드 (Reserved 1 내지 4) 중 두 개의 필드는 도 6의 제1 필드 및 제2 필드로 활용될 수 있다. 도 7b를 참조하면, 커맨드(CMD)는 복수의 필드들을 포함할 수 있다. 구체적으로, 커맨드는 연산 코드(opcode) 필드, 퓨즈(FUSE) 필드, 제1 예비 필드(Reserved 1), PSDT(PRP or SGL for Data Transfer) 필드, CID(Command Identifier) 필드, NSID(NameSpace Identifier) 필드, 제2 예비 필드(Reserved 2), MPTR(Metadata Pointer) 필드, DPTR(Data Pointer) 필드, NDT(Number of Dwords in Data Transfer) 필드, NDM(Number of Dwords in Metadata Transfer) 필드를 포함할 수 있다. 연산 코드(opcode) 필드는, 실행될 커맨드의 연산 코드를 나타낼 수 있다. 퓨즈(FUSE) 필드는, 두 개의 커맨드 를 결합시키는 퓨즈 연산(fused operation)을 수행할지 여부를 나타낼 수 있다. PSDT 필드는, 어드레스를 포함 하는 정보(PRP(physical region page) 또는 SGL(Scatter Gather List))가 커맨드와 연관된 데이터 전송에 사용 되는지 여부를 나타낼 수 있다. CID 필드는, 커맨드에 대한 고유의 식별자를 나타낼 수 있다. NSID 필드는, 커 맨드가 적용될 네임스페이스의 식별자를 나타낼 수 있다. MPTR 필드는, 메타 데이터에 대한 인접한 물리적 버퍼 의 어드레스를 포함하거나 SGL 세그먼트의 어드레스를 포함할 수 있다. DPTR 필드는, 커맨드에 사용되는 데이터 (PRP 엔트리 또는 SGL 엔트리)를 포함할 수 있다. NDT 필드는, 데이터 전송 시 단위 크기(예를 들어, 32 바이트)의 데이터의 개수를 나타낼 수 있다. NDM은 메타데이터 전송 시 단위 크기(예를 들어, 32 바이트)의 데 이터의 개수를 나타낼 수 있다. 본 개시의 예시적 실시 예에 따르면, 도 7b의 커맨드(CMD)는 도 6의 제1 필드 및 제2 필드를 포함할 수 있다. 일 예로서, 도 7b의 커맨드(CMD)의 제1 및 2 예비 필드(Reserved 1 및 2) 중 하나는 2개의 필드로 분할됨으로써 제1 필드 및 제2 필드로서 활용될 수 있다. 일 예로서, 도 7b의 커맨드(CMD)의 제1 및 2 예비 필드(Reserved 1 내지 2)는 도 6의 제1 필드 및 제2 필드로 활용될 수 있다. 도 8은 본 개시의 예시적 실시 예에 따른 스토리지 시스템을 설명하는 블록도이다. 도 8을 참조하면, 스토리지 시스템은 스토리지 장치 및 호스트를 포함할 수 있다. 호스트는 도 4의 호스트와 달리, 호스트 암호화 회로를 더 포함할 수 있다. 호스트 암호화 회로는 평문(PT)에 대한 암호문(CT)을 생성할 수 있다. 암호문(CT)은 스토리지 장치에 제공될 수 있다. 도시되지 않았으나, 호스트는 암호문(CT)과 함께 스토리지 장치에 커맨드를 제공할 수 도 있다. 커맨드는 도 7에 도시된 바와 같이 제2 필드를 포함할 수 있다. 제2 필드는 수신된 데이터가 암호문인 지 여부에 대한 정보를 포함할 수 있다. 호스트 인터페이스는 암호문(CT) 및 커맨드를 수신하고, 커맨드에 포함된 제2 필드를 기초로 수신된 데이 터가 암호문(CT)인지 여부를 판단할 수 있다. 수신된 데이터가 암호문(CT)이 아닌 평문(PT)으로 판단된 경우, 스토리지 장치는 도 1 내지 5를 참조하여 전술된 바와 같이, 제1 암호화 알고리즘 또는 제2 암호화 알고리 즘을 선택적으로 사영하여 평문(PT)을 암호화할 수 있다. 수신된 데이터가 암호문(CT)으로 판단된 경우, 스토리 지 장치는 암호문(CT)을 비휘발성 메모리에 저장할 수 있다. 일부 실시예들에서, 메모리 인터페이스 는 암호문(CT)을 비휘발성 메모리에 전달함으로써 암호문(CT)을 비휘발성 메모리에 저장할 수 있다. 도 9는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 스토리지 장치의 동작 방법은 복수의 단계들(S910 내지 S980)을 포함할 수 있다. 도 9는 도 8을 함께 참조하여 후술될 수 있다. S910 단계에서, 호스트 인터페이스는 호스트로부터 데이터 및 커맨드를 수신할 수 있다. 데이터는 평 문 또는 암호문일 수 있다. 호스트는 호스트 암호화 회로에 의해 암호화된 암호문 또는 평문을 호스트 인터페이스에 제공할 수 있다. S920 단계에서, 스토리지 장치는 커맨드에 포함된 제2 필드를 식별할 수 있다. 일부 실시예들에서, 호스트 인터페이스는 커맨드를 구성하는 비트들 중 미리 정해진 비트를 통해 제2 필드를 식별할 수 있다. 예를 들 어, 커맨드를 구성하는 비트들 중 제2 필드를 구성하는 비트가'1'인 경우, 제2 필드는 호스트로부터 수신된 데이터가 암호문임을 나타낼 수 있다. 또한, 커맨드를 구성하는 비트들 중 제2 필드를 구성하는 비트가'0'인 경 우, 제2 필드는 호스트로부터 수신된 데이터가 평문임을 나타낼 수 있다. 설명의 편의를 위하여, 호스트 인 터페이스가 제2 필드를 식별하는 것으로 도시하였으나, 일부 실시예들에서, 스토리지 프로세서가 제2 필드를 식별할 수도 있다. S930 단계에서, 데이터가 암호문인 경우 S980 단계가 수행될 수 있고, 데이터가 평문인 경우 S940 단계가 수행 될 수 있다. S940 단계에서, 스토리지 장치는 커맨드의 제1 필드를 식별할 수 있다. 일부 실시예들에서, 호스트 인터페 이스는 커맨드를 구성하는 비트들 중 미리 정해진 비트를 통해 제1 필드를 식별할 수 있다. 설명의 편의를 위하여, 호스트 인터페이스가 제1 필드를 식별하는 것으로 도시하였으나, 일부 실시예들에서, 스토리지 프 로세서가 제1 필드를 식별할 수도 있다. S940 단계는 도 6의 S630 단계와 동일할 수 있다. S950 단계에서, 평문이 연산 대상 데이터인 경우 S960 단계가 수행될 수 있고, 평문이 연산 대상 데이터가 아닌 경우 S970 단계가 수행될 수 있다. 연상 대상 데이터는, 스토리지 장치 내에서 수행되는 연산의 대상이 되는 데이터를 의미할 수 있다. S960 단계에서, 제1 암호화 회로는 제1 암호화 알고리즘을 사용하여 데이터, 즉, 평문을 암호화할 수 있다. 제1 암호화 회로는 제1 암호화 알고리즘을 사용하여 평문을 암호화함으로써 제1 암호문을 생성할 수 있다. 제1 암호화 알고리즘은 동형 암호 알고리즘일 수 있다. S960 단계는 도 6의 S640 단계와 동일할 수 있다. S970 단계에서, 제2 암호화 회로는 제2 암호화 알고리즘을 사용하여 데이터, 즉, 평문을 암호화할 수 있다. 일부 실시예들에서, 제2 암호화 회로는 제2 암호화 알고리즘을 사용하여 평문을 암호화함으로써 제2 암호문을 생성할 수 있다. 제2 암호화 알고리즘은 대칭 키 알고리즘 또는 비대칭 키 알고리즘일 수 있다. S970 단계는 도 6의 S650 단계와 동일할 수 있다. S980 단계에서, 스토리지 컨트롤러는 암호문을 비휘발성 메모리에 저장할 수 있다. 구체적으로, 메모 리 인터페이스는 호스트로부터 수신된 암호문, 제1 암호화 회로가 생성한 제1 암호문 또는 제2 암호화 회로가 생성한 제2 암호문을 비휘발성 메모리에 저장할 수 있다. 구체적으로, 메모리 인터페이스 는 호스트로부터 수신된 암호문, 제1 암호문 또는 제2 암호문을 수신하고, 비휘발성 메모리에 제 공할 수 있다. 본 개시의 예시적 실시 예에 따른 스토리지 장치는, 호스트로부터 암호문을 수신하면, 암호문에 대한 암호화를 생략하고 비휘발성 메모리에 암호문을 저장할 수 있다. 암호화가 생략될 수 있으므로 데이터 저 장 속도가 빨라질 수 있다. 또한, 스토리지 장치는 호스트로부터 평문을 수신하면 암호문에 대한 암호 화를 수행하고 생성된 암호문을 비휘발성 메모리에 저장할 수 있다. 즉, 스토리지 장치는 호스트 로부터 수신된 데이터가 평문인지 암호문인지에 따라 암호화를 선택적으로 수행함으로써 향상된 저장 속도 및 데이터 보안 성능을 제공할 수 있다. 도 10은 본 개시의 예시적 실시 예에 따른 제1 암호화 알고리즘을 사용한 암호화 과정을 설명하는 도면이다. 도 11은 본 개시의 예시적 실시 예에 따른 제1 암호문에 대한 연산을 설명하는 도면이다. 도 10 및 11은 도 8을 참 조하여 후술될 수 있다. 도 10을 참조하면, 평문(PT)이 제1 암호화 알고리즘에 따라 암호화됨으로써 제1 암호문(CT)이 생성될 수 있다. 제1 암호화 알고리즘은 동형 암호 알고리즘일 수 있다. 도 10의 암호화는 예를 들어, 도 1, 도 8의 제1 암호화 회로(121, 381)에 의해 수행될 수 있다. 제1 암호문(CT1)은 동형 암호 알고리즘의 성질상 예비문(preliminary text)(PreT), 메세지(message)(M) 및 에러(error)(E)를 포함할 수 있다. 메시지(message)는 에러를 포함하지 않는 유효 비트일 수 있다. 암호문에 대한 곱셈 연산이 수행될 때마다, 예비문의 길이는 감소할 수 있다. 따라 서, 예비문의 길이가 길면 암호문에 대해 더 많은 곱셈 연산이 수행될 수 있다. 제1 암호화 회로(121, 381)는 길이 D를 갖는 평문(PT)에, 길이 Q를 갖는 랜덤 비트 및 길이 B를 갖는 에러 비트 (E)를 더함으로써 제1 암호문(CT)을 생성할 수 있다. D는 Q보다 작을 수 있고, B보다 클 수 있다. 제1 암호문 CT1)에서 유효 비트의 길이는 P일 수 있고, 예비문(PreT)의 길이는 L일 수 있다. 도 8 및 도 11을 참조하면, 가속기는 제3 암호문(CT3) 및 제4 암호문(CT4)을 사용하여 곱셈 연산을 수행할 수 있다. 제3 암호문(CT3) 및 제4 암호문(CT4)은 제1 암호화 알고리즘을 사용하여 암호화된 암호문일 수 있다. 도 11을 통해 곱셈 연산에 대하여 후술되나, 가속기는 덧셈 연산 등을 더 수행할 수 있고, 나아가, AI 데 이터 연산, 머신 러닝의 학습 연산 또는 머신 러닝의 추론 연산을 수행할 수도 있다. 제3 암호문(CT3)은 제1 예비문(PreT1), 제1 메시지(M1) 및 제1 에러(E1)를 포함할 수 있다. 제3 암호문(CT3)은 제1 평문(PT1)에 대응되는 암호문일 수 있다. 제3 암호문(CT1)의 전체 길이는 Q일 수 있고, 제1 평문(PT1)의 길 이는 D일 수 있다. 또한, 제1 예비문(PreT1)의 길이는 L일 수 있고, 제1 평문(PT1)의 유효 비트를 나타내는 제1 메시지(M1)의 길이는 P이고, 제1 에러(E1)의 길이는 B일 수 있다. 마찬가지로, 제4 암호문(CT4)은 제2 예비문 (PreT2), 제2 메시지(M2) 및 제2 에러(E2)를 포함할 수 있다. 제4 암호문(CT4)은 제2 평문(PT2)에 대응되는 암 호문일 수 있다. 제4 암호문(CT4)의 전체 길이는 Q일 수 있고, 제2 평문(PT2)의 길이는 D일 수 있다. 또한, 제2 예비문(PreT2)의 길이는 L일 수 있고, 제2 평문(PT2)의 유효 비트를 나타내는 제2 메시지(M2)의 길이는 P이고, 제2 에러(E2)의 길이는 B일 수 있다. 가속기는 제3 암호문(CT3)과 제4 암호문(CT4)을 이용해 곱셈 연산을 수행함으로써 제5 암호문(CT5)을 생성 할 수 있다. 제5 암호문(CT5)은 제3 예비문(PreT3), 제3 메시지(M3) 및 제3 에러(E3)를 포함할 수 있다. 제5 암 호문(CT5)의 전체 길이는 Q일 수 있고, 제3 예비문(PreT3)의 길이는 L’일 수 있고, 제3 메시지(M3)의 길이는 P ’일 수 있고, 제3 에러(E3)의 길이는 B’일 수 있다. 동형 암호문에 대한 곱셈 연산의 성질 상, 제3 예비문(PreT3)의 길이 L’은 L보다 짧을 수 있고, 제3 메시지(M3)의 길이 P’은 P보다 짧을 수 있고, 제3 에러(E3)의 길이 B’은 B보다 길 수 있다. 제1 암호화 알고리즘을 사용하여 제5 암호문(CT5)을 복호화한 결과는, 제1 평문 (PT1)과 제2 평문(PT2)의 곱셈 연산의 결과와 동일할 수 있다. 일부 실시예들에서, 가속기는 제5 암호문(CT5)에 포함된 제3 에러(E3)의 하위 비트(LSB) 일부를 제거함으 로써 변경된 제3 에러(E3t)를 획득할 수 있다. 제거되는 하위 비트의 개수는 D로 설정될 수 있다. 따라서, 변경 된 제3 에러(E3t)의 길이 Bt는 B’보다 짧을 수 있다. 다만, 곱셈 연산의 성질 상, 변경된 제3 에러(E3t)의 길 이 Bt는 제1 에러(E1)의 길이 B보다 길 수 있으므로, 곱셈 연산이 반복될수록 암호문에 포함되는 에러의 길이는 길어질 수 있다. 제5 암호문(CT5)의 길이 Q에서 길이가 D인 하위 비트가 제거되었으므로, 변경된 제5 암호문 (CT3t)의 길이 Q’는 Q보다 짧을 수 있다. 결론적으로, 곱셈 연산이 반복될수록 암호문의 전체 길이 및 암호문 에 포함되는 유효 비트의 길이는 짧아질 수 있고, 에러의 길이는 길어질 수 있다. 제1 암호화 알고리즘을 사용 하여 변경된 제5 암호문(CT5t)을 복호화한 결과는, 제1 평문(PT1)과 제2 평문(PT2)의 곱셈 연산의 결과와 동일 할 수 있다. 도 12는 본 개시의 예시적 실시 예에 따른 데이터 저장 방법을 설명하는 블록도이다. 도 12는 도 8을 함께 참조 하여 후술될 수 있다. 스토리지 컨트롤러는 도 8의 스토리지 컨트롤러의 일 예시일 수 있다. 도 12를 참조하면, 비휘발성 메모리는 노멀 영역 및 메타 영역을 포함할 수 있다. 노멀 영역 은 암호문(CT)이 저장될 수 있는 저장 영역일 수 있고, 메타 영역은 필드 데이터(field data)가 저장 될 수 있는 저장 영역일 수 있다. 노멀 영역과 메타 영역은 물리적으로 구분된 저장 영역일 수 있다. 스토리지 컨트롤러는 암호문(CT)이 노멀 영역에 저장되도록 비휘발성 메모리를 제어할 수 있다. 암호문(CT)은 호스트로부터 수신되거나, 제1 암호화 회로 또는 제2 암호화 회로에 의해 생성될 수 있다. 스토리지 컨트롤러는 필드 데이터(field data)가 메타 영역에 저장되도록 비휘발성 메모리를 제 어할 수 있다. 필드 데이터(field data)는 호스트로부터 수신된 커맨드에 포함되는 제1 필드 또는 제2 필드 에 저장된 정보를 의미할 수 있다. 예를 들어, 스토리지 컨트롤러는 암호문(CT)을 노멀 영역에 저장 하고, 암호문(CT)과 관련된 커맨드의 제1 필드 또는 제2 필드에 대한 정보를 비휘발성 메모리에 저장할 수 있다. 따라서, 스토리지 컨트롤러는 메타 영역에 저장된 데이터를 리드함으로써 암호문(CT)이 연산 대상 데이터인지 여부 또는 호스트로부터 수신될 때 암호화된 상태였는지 여부를 확인할 수 있다. 도 13는 본 개시의 예시적 실시 예에 따른 데이터 저장 방법을 설명하는 블록도이다. 도 13은 도 8을 함께 참조 하여 후술될 수 있다. 스토리지 컨트롤러는 도 8의 스토리지 컨트롤러의 일 예시일 수 있다. 도 13을 참조하면, 비휘발성 메모리는 제1 노멀 영역 및 제2 노멀 영역을 포함할 수 있다. 제1 노멀 영역은 제1 암호문(CT1)이 저장되는 저장 영역일 수 있고, 제2 노멀 영역은 제2 암호문(CT2)이 저장되는 저장 영역일 수 있다. 제1 노멀 영역과 제2 노멀 영역은 물리적으로 구분된 저장 영역일 수 있다. 제1 암호문(CT1)은 제1 암호화 알고리즘을 사용하여 암호화된 암호문을 의미할 수 있고, 제2 암호문(CT 2)은 제2 암호화 알고리즘을 사용하여 암호화된 암호문을 의미할 수 있다. 일부 실시예들에서, 제1 암호화 알고 리즘은 동형 암호 알고리즘일 수 있고, 제2 암호화 알고리즘은 대칭 키 또는 비대칭 키 알고리즘일 수 있다. 스토리지 컨트롤러는 제1 암호문(CT1)이 제1 노멀 영역에 저장되도록 비휘발성 메모리를 제어할 수 있다. 제1 암호문(CT1)은 제1 암호화 회로에 의해 생성될 수 있다. 스토리지 컨트롤러는 제2 암호문(CT2)이 제2 노멀 영역에 저장되도록 비휘발성 메모리를 제어할 수 있다. 제2 암호문(CT2)은 제2 암호화 회로에 의해 생성될 수 있다. 스토리지 컨트롤러는 제1 노멀 영역에서 제1 암호문(CT1)을 리드함으로써 제1 암호문(CT1)이 제1 암 호화 알고리즘에 의해 암호화된 것임을 판단할 수 있고, 제2 노멀 영역에서 제2 암호문(CT2)을 리드함으로 써 제2 암호문(CT2)이 제2 암호화 알고리즘에 의해 암호화된 것임을 판단할 수 있다. 도 14는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 구체적으로, 도 14는 스토리지 장치의 리드 방법을 설명할 수 있다. 도 14는 도 12 및 도 8을 참조하여 후술될 수 있다. 스토리 지 장치의 동작 방법은 복수의 단계들(S1410 내지 S1430)을 포함할 수 있다. S1410 단계에서, 스토리지 컨트롤러는 노멀 영역에서 암호문(CT)을 리드할 수 있다. 구체적으로, 스 토리지 컨트롤러는 노멀 영역 중 호스트로부터 수신된 어드레스에 대응되는 영역을 리드함으로써암호문(CT)을 획득할 수 있다. S1420 단계에서, 스토리지 컨트롤러는 메타 영역에서 필드 데이터를 리드할 수 있다. 구체적으로, 스 토리지 컨트롤러는 리드된 암호문에 대응되는 필드 데이터를 리드할 수 있다. 필드 데이터는 제1 필드에 대한 정보 또는 제2 필드에 대한 정보를 포함할 수 있다. 제1 필드에 대한 정보는 암호문(CT)이 연산 대상 데이 터인지 여부를 나타낼 수 있고, 제2 필드에 대한 정보는 암호문(CT)이 호스트로부터 수신될 때 암호화된 상 태였는지 여부를 나타낼 수 있다. S1430 단계에서, 스토리지 컨트롤러는 필드 데이터를 기초로 암호문(CT)을 선택적으로 복호화할 수 있다. 구체적으로, 제2 필드가 암호문(CT)이 호스트로부터 수신될 때 암호화된 상태였음을 나타내는 경우, 스토리 지 컨트롤러는 암호문(CT)에 대한 복호화를 생략할 수 있다. 스토리지 컨트롤러는 암호문(CT)을 호스 트에 제공할 수 있다. 제2 필드가 암호문(CT)이 호스트로부터 수신될 때 암호화되지 않은 상태였음을 나타내는 경우, 스토리지 컨트롤러는 제1 필드에 대한 정보를 기초로 암호문(CT)을 복호화할 수 있다. 제1 필드에 대한 정보가 암호문(CT)이 연산 대상 데이터임을 나타내는 경우, 스토리지 컨트롤러는 암호문(CT) 을 제1 암호화 알고리즘에 따라 복호화함으로써 평문을 생성할 수 있다. 제1 필드에 대한 정보가 암호문(CT)이 연산 대상 데이터가 아님을 나타내는 경우, 스토리지 컨트롤러는 암호문(CT)을 제2 암호화 알고리즘에 따 라 복호화함으로써 평문을 생성할 수 있다. 스토리지 컨트롤러는 생성된 평문을 호스트에 제공할 수 있다. 도 15는 본 발명의 일 실시 예에 따른 스토리지 장치가 적용된 데이터 센터를 나타내는 도면이다. 도 15를 참조하면, 데이터 센터는 각종 데이터를 모아두고 서비스를 제공하는 시설로서, 데이터 스토리지 센터라고 지칭될 수도 있다. 데이터 센터는 검색 엔진 및 데이터 베이스 운용을 위한 시스템일 수 있으며, 은행 등의 기업 또는 정부기관에서 사용되는 컴퓨팅 시스템일 수 있다. 데이터 센터는 어플리케 이션 서버들(3100 내지 3100n) 및 스토리지 서버들(3200 내지 3200m)을 포함할 수 있다. 어플리케이션 서버들 (3100 내지 3100n)의 개수 및 스토리지 서버들(3200 내지 3200m)의 개수는 실시예에 따라 다양하게 선택될 수 있고, 어플리케이션 서버들(3100 내지 3100n)의 개수 및 스토리지 서버들(3200 내지 3200m)의 개수는 서로 다를 수 있다. 어플리케이션 서버 또는 스토리지 서버는 프로세서(3110, 3210) 및 메모리(3120, 3220) 중 적어도 하나를 포함할 수 있다. 스토리지 서버를 예시로 설명하면, 프로세서는 스토리지 서버의 전 반적인 동작을 제어할 수 있고, 메모리에 액세스하여 메모리에 로딩된 명령어 및/또는 데이터를 실 행할 수 있다. 메모리는 DDR SDRAM(Double Data Rate Synchronous DRAM), HBM(High Bandwidth Memory), HMC(Hybrid Memory Cube), DIMM(Dual In-line Memory Module), Optane DIMM 또는 NVMDIMM(Non-Volatile DIM M)일 수 있다. 실시예에 따라, 스토리지 서버에 포함되는 프로세서의 개수 및 메모리의 개수 는 다양하게 선택될 수 있다. 일 실시예에서, 프로세서와 메모리는 프로세서-메모리 페어를 제공할 수 있다. 일 실시예에서, 프로세서와 메모리의 개수는 서로 다를 수도 있다. 프로세서는 단 일 코어 프로세서 또는 다중 코어 프로세서를 포함할 수 있다. 스토리지 서버에 대한 상기 설명은, 어플 리케이션 서버에도 유사하게 적용될 수 있다. 실시예에 따라, 어플리케이션 서버는 스토리지 장치 를 포함하지 않을 수도 있다. 스토리지 서버는 적어도 하나 이상의 스토리지 장치를 포함할 수 있다. 스토리지 서버에 포함되는 스토리지 장치의 개수는 실시예에 따라 다양하게 선택될 수 있 다. 어플리케이션 서버들(3100 내지 3100n) 및 스토리지 서버들(3200 내지 3200m)은 네트워크를 통해 서로 통 신할 수 있다. 네트워크는 FC(Fibre Channel) 또는 이더넷(Ethernet) 등을 이용하여 구현될 수 있다. 이 때, FC는 상대적으로 고속의 데이터 전송에 사용되는 매체이며, 고성능/고가용성을 제공하는 광 스위치를 사용 할 수 있다. 네트워크의 액세스 방식에 따라 스토리지 서버들(3200 내지 3200m)은 파일 스토리지, 블록 스토리지, 또는 오브젝트 스토리지로서 제공될 수 있다. 일 실시예에서, 네트워크는 SAN(Storage Area Network)와 같은 스토리지 전용 네트워크일 수 있다. 예를 들어, SAN은 FC 네트워크를 이용하고 FCP(FC Protocol)에 따라 구현된 FC-SAN일 수 있다. 다른 예를 들어, SAN 은 TCP/IP 네트워크를 이용하고 iSCSI(SCSI over TCP/IP 또는 Internet SCSI) 프로토콜에 따라 구현된 IP- SAN일 수 있다. 다른 실시예에서, 네트워크는 TCP/IP 네트워크와 같은 일반 네트워크일 수 있다. 예를 들 어, 네트워크는 FCoE(FC over Ethernet), NAS(Network Attached Storage), NVMe-oF(NVMe over Fabrics) 등의 프로토콜에 따라 구현될 수 있다.이하에서는, 어플리케이션 서버 및 스토리지 서버를 중심으로 설명하기로 한다. 어플리케이션 서버 에 대한 설명은 다른 어플리케이션 서버(3100n)에도 적용될 수 있고, 스토리지 서버에 대한 설명은 다른 스토리지 서버(3200m)에도 적용될 수 있다. 어플리케이션 서버는 사용자 또는 클라이언트가 저장 요청한 데이터를 네트워크를 통해 스토리지 서버들(3200 내지 3200m) 중 하나에 저장할 수 있다. 또한, 어플리케이션 서버는 사용자 또는 클라이언트 가 독출 요청한 데이터를 스토리지 서버들(3200 내지 3200m) 중 하나로부터 네트워크를 통해 획득할 수 있다. 예를 들어, 어플리케이션 서버는 웹 서버 또는 DBMS(Database Management System) 등으로 구현될 수 있다. 어플리케이션 서버는 네트워크를 통해 다른 어플리케이션 서버(3100n)에 포함된 메모리(3120n) 또 는 스토리지 장치(3150n)에 액세스할 수 있고, 또는 네트워크를 통해 스토리지 서버(3200-3200m)에 포함 된 메모리(3220-3220m) 또는 스토리지 장치(3250-3250m)에 액세스할 수 있다. 스토리지 장치(3250-3250m) 각각 은 도 1, 5, 8, 12 및 13을 참조하여 전술된 스토리지 장치들(10, 30, 60, 70)로서 구현될 수 있다. 어플리케이 션 서버는 어플리케이션 서버들(3100-3100n) 및/또는 스토리지 서버들(3200-3200m)에 저장된 데이터에 대 해 다양한 동작들을 수행할 수 있다. 예를 들어, 어플리케이션 서버는 어플리케이션 서버들(3100-3100n) 및/또는 스토리지 서버들(3200-3200m) 사이에서 데이터를 이동 또는 카피(copy)하기 위한 명령어를 실행할 수 있다. 이 때 데이터는 스토리지 서버들(3200-3200m)의 스토리지 장치로(3250-3250m)부터 스토리지 서버들(3200- 3200m)의 메모리들(3220-3220m)을 거쳐서, 또는 바로 어플리케이션 서버들(3100-3100n)의 메모리(3120- 3120n)로 이동될 수 있다. 네트워크를 통해 이동하는 데이터는 보안 또는 프라이버시를 위해 암호화된 데 이터일 수 있다. 스토리지 서버를 예시로 설명하면, 인터페이스는 프로세서와 컨트롤러의 물리적 연결 및 NIC와 컨트롤러의 물리적 연결을 제공할 수 있다. 예를 들어, 인터페이스는 스토리지 장 치를 전용 케이블로 직접 접속하는 DAS(Direct Attached Storage) 방식으로 구현될 수 있다. 또한, 예를 들어, 인터페이스는 ATA(Advanced Technology Attachment), SATA(Serial ATA), e-SATA(external SATA), SCSI(Small Computer Small Interface), SAS(Serial Attached SCSI), PCI(Peripheral Component Interconnection), PCIe(PCI express), NVMe(NVM express), IEEE 1394, USB(universal serial bus), SD(secure digital) 카드, MMC(multi-media card), eMMC(embedded multi-media card), UFS(Universal Flash Storage), eUFS(embedded Universal Flash Storage), CF(compact flash) 카드 인터페이스 등과 같은 다양한 인 터페이스 방식으로 구현될 수 있다. 스토리지 서버는 스위치 및 NIC을 더 포함할 수 있다. 스위치는 프로세서의 제 어에 따라 프로세서와 스토리지 장치를 선택적으로 연결시키거나, NIC과 스토리지 장치 를 선택적으로 연결시킬 수 있다. 일 실시예에서 NIC는 네트워크 인터페이스 카드, 네트워크 어댑터 등을 포함할 수 있다. NIC는 유 선 인터페이스, 무선 인터페이스, 블루투스 인터페이스, 광학 인터페이스 등에 의해 네트워크에 연결될 수 있다. NIC는 내부 메모리, DSP, 호스트 버스 인터페이스 등을 포함할 수 있으며, 호스트 버스 인터페 이스를 통해 프로세서 및/또는 스위치 등과 연결될 수 있다. 호스트 버스 인터페이스는, 앞서 설명 한 인터페이스의 예시들 중 하나로 구현될 수도 있다. 일 실시예에서, NIC는 프로세서, 스위 치, 스토리지 장치 중 적어도 하나와 통합될 수도 있다. 스토리지 서버(3200-3200m) 또는 어플리케이션 서버(3100-3100n)에서 프로세서는 스토리지 장치(3130-3130n, 3250-3250m) 또는 메모리(3120-3120n, 3220-3220m)로 커맨드를 전송하여 데이터를 프로그램하거나 리드할 수 있 다. 이 때 데이터는 ECC(Error Correction Code) 엔진을 통해 에러 정정된 데이터일 수 있다. 데이터는 데이터 버스 변환(Data Bus Inversion: DBI) 또는 데이터 마스킹(Data Masking: DM) 처리된 데이터로서, CRC(Cyclic Redundancy Code) 정보를 포함할 수 있다. 데이터는 보안 또는 프라이버시를 위해 암호화된 데이터일 수 있다. 스토리지 장치(3150-3150m, 3250-3250m)는 프로세서로부터 수신된 리드 커맨드에 응답하여, 제어 신호 및 커맨 드/어드레스 신호를 NAND 플래시 메모리 장치(3252-3252m)로 전송할 수 있다. 이에 따라 NAND 플래시 메모리 장 치(3252-3252m)로부터 데이터를 독출하는 경우, RE(Read Enable) 신호는 데이터 출력 제어 신호로 입력되어, 데 이터를 DQ 버스로 출력하는 역할을 할 수 있다. RE 신호를 이용하여 DQS(Data Strobe)를 생성할 수 있다. 커맨 드와 어드레스 신호는 WE(Write Enable) 신호의 상승 엣지 또는 하강 엣지에 따라 페이지 버퍼에 래치될 수 있다. 컨트롤러는 스토리지 장치의 동작을 전반적으로 제어할 수 있다. 일 실시예에서, 컨트롤러는 SRAM(Static Random Access Memory)을 포함할 수 있다. 컨트롤러는 기입 커맨드에 응답하여 낸드 플래시 에 데이터를 기입할 수 있고, 또는 독출 커맨드에 응답하여 낸드 플래시로부터 데이터를 독출할 수 있다. 예를 들어, 기입 커맨드 및/또는 독출 커맨드는 스토리지 서버 내의 프로세서, 다른 스토리 지 서버(3200m) 내의 프로세서(3210m) 또는 어플리케이션 서버(3100, 3100n) 내의 프로세서(3110, 3110n)로부 터 제공될 수 있다. DRAM은 낸드 플래시에 기입될 데이터 또는 낸드 플래시로부터 독출된 데 이터를 임시 저장(버퍼링)할 수 있다. 또한, DRAM은 메타 데이터를 저장할 수 있다. 여기서, 메타 데이터 는 사용자 데이터 또는 낸드 플래시를 관리하기 위해 컨트롤러에서 생성된 데이터이다. 스토리지 장치는 보안 또는 프라이버시를 위해 SE(Secure Element)를 포함할 수 있다. 이상에서와 같이 도면과 명세서에서 예시적인 실시 예들이 개시되었다. 본 명세서에서 특정한 용어를 사용하여 실시 예들을 설명되었으나, 이는 단지 본 개시의 기술적 사상을 설명하기 위한 목적에서 사용된 것이지 의미 한 정이나 특허청구범위에 기재된 본 개시의 범위를 제한하기 위하여 사용된 것은 아니다."}
{"patent_id": "10-2021-0148126", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "그러므로 본 기술분야의 통상의 지식을 가진 자라면 이로부터 다양한 변형 및 균등한 타 실시 예가 가능하다는 점을 이해할 것이다. 따라서, 본 개시의 진정한 기술적 보호범위는 첨부된 특허청구범위의 기술적 사상에 의해 정해져야 할 것이다."}
{"patent_id": "10-2021-0148126", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 개시의 예시적 실시 예에 따른 스토리지 시스템을 설명하는 블록도이다. 도 2는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 도 3은 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 도 4는 본 개시의 예시적 실시 예에 따른 스토리지 시스템을 설명하는 블록도이다. 도 5는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 도 6은 본 개시의 예시적 실시 예에 따른 커맨드 구조를 설명하는 도면이다. 도 7a 및 도 7b는 본 개시의 예시적 실시 예에 따른 커맨드의 예시를 나타내는 도면이다.도 8은 본 개시의 예시적 실시 예에 따른 스토리지 시스템을 설명하는 블록도이다. 도 9는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 도 10은 본 개시의 예시적 실시 예에 따른 제1 암호화 알고리즘을 사용한 암호화 과정을 설명하는 도면이다. 도 11은 본 개시의 예시적 실시 예에 따른 제1 암호문에 대한 연산을 설명하는 도면이다. 도 12는 본 개시의 예시적 실시 예에 따른 데이터 저장 방법을 설명하는 블록도이다. 도 13는 본 개시의 예시적 실시 예에 따른 데이터 저장 방법을 설명하는 블록도이다. 도 14는 본 개시의 예시적 실시 예에 따른 스토리지 장치의 동작 방법을 설명하는 흐름도이다. 도 15는 본 발명의 일 실시 예에 따른 스토리지 장치가 적용된 데이터 센터를 나타내는 도면이다."}
