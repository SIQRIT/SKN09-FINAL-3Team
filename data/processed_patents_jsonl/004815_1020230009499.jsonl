{"patent_id": "10-2023-0009499", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0117308", "출원번호": "10-2023-0009499", "발명의 명칭": "학습된 신경망을 통한 혈관 정보의 획득 방법 및 이를 수행하는 컴퓨팅 장치", "출원인": "(주)휴톰", "발명자": "윤영노"}}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "컴퓨팅 장치에서 수행되는 학습된 신경망을 통한 혈관 정보의 획득 방법에 있어서,대상 이미지에 포함된 혈관에 대한 세그멘테이션 정보를 포함하는 제1 타겟 이미지를 입력 받는 단계;상기 대상 이미지에 포함된 장기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지를 입력 받는 단계;상기 제1 타겟 이미지 및 상기 제2 타겟 이미지 내 특징 요소 간의 인접성을 정의하는 그래프를 생성하는 단계및,상기 생성된 그래프에 따라 제1 타겟 이미지의 픽셀 값이 갱신된 제3 타겟 이미지를 생성하는 단계를 포함하는것을 특징으로 하는 신경망을 통한 혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,제1 타겟 이미지를 입력 받는 단계는,학습된 제1 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 혈관의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제1 세그멘테이션 네트워크의 계층별 확장 과정을 통해확장한 제1 타겟 이미지를 입력 받되,상기 축약 과정 및 확장 과정은 계층 간 상호 연결되는 것을 특징으로 하는 신경망을 통한 혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,제2 타겟 이미지를 입력 받는 단계는,학습된 제2 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 장기의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제2 세그멘테이션 네트워크의 계층별 확장 과정을 통해확장한 제2 타겟 이미지를 입력 받되,상기 축약 과정 및 확장 과정은 상호 연결되는 것을 특징으로 하는 신경망을 통한 혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 1 항에 있어서,상기 그래프를 생성하는 단계는,임계값 이상의 상기 제1 타겟 이미지의 픽셀 별 혈관 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징요소를 그래프의 노드로 구성하는 것을 특징으로 하는 신경망을 통한 혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 4 항에 있어서,상기 그래프를 생성하는 단계는,상기 특징 요소의 상기 간격 내 인접 여부를 상기 노드의 에지로 구성하는 것을 특징으로 하는 신경망을 통한혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "공개특허 10-2024-0117308-3-제 5 항에 있어서,상기 그래프를 생성하는 단계는,상기 생성된 그래프 내 노드를 단위로 인접한 노드 들의 확률 값을 학습된 그래프 네트워크의 가중치에 따라 반영하여 갱신하는 것을 특징으로 하는 신경망을 통한 혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 1 항에 있어서,상기 그래프를 생성하는 단계는,임계값 이상의 상기 제2 타겟 이미지의 픽셀 별 장기 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징요소를 그래프의 노드로 구성하는 것을 특징으로 하는 신경망을 통한 혈관 정보의 획득 방법."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "프로세서; 및상기 프로세서와 통신하는 메모리를 포함하고,상기 메모리는 상기 프로세서로 하여금 동작들을 수행하게 하는 명령들을 저장하고,상기 동작들은, 대상 이미지에 포함된 혈관에 대한 세그멘테이션 정보를 포함하는 제1 타겟 이미지를 입력 받는 동작,상기 대상 이미지에 포함된 장기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지를 입력 받는 동작,상기 제1 타겟 이미지 및 상기 제2 타겟 이미지 내 특징 요소 간의 인접성을 정의하는 그래프를 생성하는 동작및,상기 생성된 그래프에 따라 제1 타겟 이미지의 픽셀 값이 갱신된 제3 타겟 이미지를 생성하는 동작을 포함하는것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제 8 항에 있어서,제1 타겟 이미지를 입력 받는 동작은,학습된 제1 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 혈관의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제1 세그멘테이션 네트워크의 계층별 확장 과정을 통해확장한 제1 타겟 이미지를 입력 받되,상기 축약 과정 및 확장 과정은 계층 간 상호 연결되는 것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 9 항에 있어서,제2 타겟 이미지를 입력 받는 동작은,학습된 제2 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 장기의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제2 세그멘테이션 네트워크의 계층별 확장 과정을 통해확장한 제2 타겟 이미지를 입력 받되,상기 축약 과정 및 확장 과정은 상호 연결되는 것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제 8 항에 있어서,상기 그래프를 생성하는 동작은,공개특허 10-2024-0117308-4-임계값 이상의 상기 제1 타겟 이미지의 픽셀 별 혈관 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징요소를 그래프의 노드로 구성하는 것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제 11 항에 있어서,상기 그래프를 생성하는 동작은,상기 특징 요소의 상기 간격 내 인접 여부를 상기 노드의 에지로 구성하는 것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제 12 항에 있어서,상기 그래프를 생성하는 동작은,상기 생성된 그래프 내 노드를 단위로 인접한 노드 들의 확률 값을 학습된 그래프 네트워크의 가중치에 따라 반영하여 갱신하는 것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제 8 항에 있어서,상기 그래프를 생성하는 동작은,임계값 이상의 상기 제2 타겟 이미지의 픽셀 별 장기 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징요소를 그래프의 노드로 구성하는 것을 특징으로 하는 컴퓨팅 장치."}
{"patent_id": "10-2023-0009499", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제 1 항 내지 제 8 항 중 어느 한 항에 따른 컴퓨팅 장치에서 수행되는 신경망을 통한 혈관 정보의 획득 방법을수행하는 프로그램이 저장된 컴퓨터 판독 가능한 기록 매체."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 객체 세그멘테이션을 위한 방법에 관한 것이다. 본 발명에 따른 컴퓨팅 장치에서 수행되는 학습된 신 경망을 통한 혈관 정보의 획득 방법에 있어서, 대상 이미지에 포함된 혈관에 대한 세그멘테이션 정보를 포함하는 제1 타겟 이미지를 입력 받는 단계; 상기 대상 이미지에 포함된 장기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지를 입력 받는 단계; 상기 제1 타겟 이미지 및 상기 제2 타겟 이미지 내 특징 요소 간의 인접성을 정 의하는 그래프를 생성하는 단계 및, 상기 생성된 그래프에 따라 제1 타겟 이미지의 픽셀 값이 갱신된 제3 타겟 이미지를 생성하는 단계를 포함한다. 본 발명에 따르면 보다 정확한 객체 세그멘테이션 결과를 생성할 수 있으며 나아가, 의료 이미지 내 신체의 장기와 혈관을 구분한 파이프라인을 통하여 보다 정밀한 혈관의 세그멘테이션을 통한 수술과 진단을 보조할 수 있다."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 객체 세그멘테이션을 위한 방법에 관한 것이다. 보다 구체적으로 본 발명은 의료 이미지 내 객체의 마스크를 획득하기 위한 방법에 관한 것이다."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "인공지능 기술의 발달로 다양한 기술 분야에 인공지능이 적용하고 있다. 특히 입력된 이미지에 대한 픽셀 값들을 특징으로 수학적인 연산을 통해 객체를 추적하고, 추적된 객체를 분류 하기 위해 딥러닝 기반의 다양한 알고리즘들이 개발되고 있으며, 행렬로 정의되는 특징 값들에 대한 컨볼루션 연산을 수행하는 복수의 레이어들로 결합된 CNN(Convolution Neural Network) 신경망 모델들은 적용되는 도메인 에 따라 최적화되어 이용되고 있다. 구체적으로 객체의 분류와 함께 이미지 내에서 객체가 존재하는 위치를 바운딩박스 형태로 제공하는 검출기술과, 픽셀단위로 객체를 세분화하여 영역을 추출하는 세그멘테이션 기술로 발전되고 있다. 이러한 객체 세그멘테이션 기술은 의료 분야에도 다양하게 적용되고 있다. 일 예로 오토 인코더(autoencoder)는 인코더-디코더(encoder-decoder) 기반 모델로, 인코딩 과정에서는 컨볼루 션 연산을 통해 입력 이미지의 특징을 포착할 수 있도록 채널의 수를 늘리면서 차원을 축소하고, 디코딩 과정에 서는 반대로 디컨볼루션 연산을 통해 저차원으로 인코딩된 정보를 이용하여 채널의 수를 줄이고 차원을 늘려서 다시 고차원의 이미지를 복원함으로써 관심 객체의 특징들이 원본 이미지의 크기에서 강조되어 나타날 수 있도 록 한다. 하지만 오토 인코더의 경우 인코딩 단계에서 차원 축소를 거치면서 이미지 객체에 대한 자세한 위치 정보를 잃 게 됨으로써 디코딩 과정에서 위치 정보 손실을 회복하지 못하게 되는 단점이 있다. 이러한 문제점을 해결하기 위하여 고안된 U-Net(U-Net :Convolutional Networks for Biomedical Image Segmentation 2015)은 인코더 레이어와 디코더 레이어의 직접 연결을 통해 특징들이 축약된 저차원 값 뿐만 아 니라 축약 이전의 고차원 정보도 이용함으로써 이미지의 특징을 추출함과 동시에 정확한 위치 파악도 가능하도 록 한다. 다만, 이러한 U-Net의 구조에서도 비 정형적인 특징이 강하고 비교적 크기가 작은 혈관을 보다 정확히 구분하기 위해서는 추가적인 방법이 고안될 필요가 있다."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "이상 본 발명은 의료 이미지 내 객체의 상대적인 위치 관계를 고려한 세그멘테이션 방법을 제안하는 것을 목적 으로 한다. 보다 구체적으로 본 발명은 객체 세그멘테이션을 위한 신경망의 구조를 제안하는 것을 목적으로 한다."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 기술적 과제를 해결하기 위한 본 발명의 일 실시예에 따른 컴퓨팅 장치에서 수행되는 학습된 신경망을 통 한 혈관 정보의 획득 방법에 있어서, 대상 이미지에 포함된 혈관에 대한 세그멘테이션 정보를 포함하는 제1 타 겟 이미지를 입력 받는 단계; 상기 대상 이미지에 포함된 장기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지를 입력 받는 단계; 상기 제1 타겟 이미지 및 상기 제2 타겟 이미지 내 특징 요소 간의 인접성을 정의하 는 그래프를 생성하는 단계 및, 상기 생성된 그래프에 따라 제1 타겟 이미지의 픽셀 값이 갱신된 제3 타겟 이미 지를 생성하는 단계를 포함한다. 제1 타겟 이미지를 입력 받는 단계는, 학습된 제1 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 혈관의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제1 세그멘테이션 네트워크의 계층별 확장 과정을 통해 확장한 제1 타겟 이미지를 입력 받되, 상기 축약 과정 및 확장 과정은 계 층 간 상호 연결되는 것이 바람직하다. 제2 타겟 이미지를 입력 받는 단계는, 학습된 제2 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 장기의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제2 세그멘테이션 네트워크의 계층별 확장 과정을 통해 확장한 제2 타겟 이미지를 입력 받되, 상기 축약 과정 및 확장 과정은 상 호 연결되는 것이 바람직하다. 상기 그래프를 생성하는 단계는, 임계값 이상의 상기 제1 타겟 이미지의 픽셀 별 혈관 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징 요소를 그래프의 노드로 구성하는 것이 바람직하다. 상기 그래프를 생성하는 단계는, 상기 특징 요소의 상기 간격 내 인접 여부를 상기 노드의 에지로 구성하는 것 이 바람직하다. 상기 그래프를 생성하는 단계는, 상기 생성된 그래프 내 노드를 단위로 인접한 노드 들의 확률 값을 학습된 그 래프 네트워크의 가중치에 따라 반영하여 갱신하는 것이 바람직하다. 상기 그래프를 생성하는 단계는, 임계값 이상의 상기 제2 타겟 이미지의 픽셀 별 장기 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징 요소를 그래프의 노드로 구성하는 것이 바람직하다. 상기 기술적 과제를 해결하기 위한 본 발명의 일 실시예에 따른 컴퓨팅 장치는 프로세서; 및 상기 프로세서와 통신하는 메모리를 포함하고, 상기 메모리는 상기 프로세서로 하여금 동작들을 수행하게 하는 명령들을 저장하 고, 상기 동작들은, 대상 이미지에 포함된 혈관에 대한 세그멘테이션 정보를 포함하는 제1 타겟 이미지를 입력 받는 동작, 상기 대상 이미지에 포함된 장기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지를 입력 받 는 동작, 상기 제1 타겟 이미지 및 상기 제2 타겟 이미지 내 특징 요소 간의 인접성을 정의하는 그래프를 생성 하는 동작 및, 상기 생성된 그래프에 따라 제1 타겟 이미지의 픽셀 값이 갱신된 제3 타겟 이미지를 생성하는 동 작을 포함한다. 제1 타겟 이미지를 입력 받는 동작은, 학습된 제1 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 혈관의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제1 세그멘테이션 네트워크의 계층별 확장 과정을 통해 확장한 제1 타겟 이미지를 입력 받되, 상기 축약 과정 및 확장 과정은 계 층 간 상호 연결되는 것이 바람직하다. 제2 타겟 이미지를 입력 받는 동작은, 학습된 제2 세그멘테이션 네트워크의 계층별 축약 과정을 통해 상기 대상 이미지 내 장기의 특징을 정의된 크기의 특징 맵으로 축약하고, 상기 축약된 특징맵을 상기 제2 세그멘테이션 네트워크의 계층별 확장 과정을 통해 확장한 제2 타겟 이미지를 입력 받되, 상기 축약 과정 및 확장 과정은 상 호 연결되는 것이 바람직하다. 상기 그래프를 생성하는 동작은, 임계값 이상의 상기 제1 타겟 이미지의 픽셀 별 혈관 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징 요소를 그래프의 노드로 구성하는 것이 바람직하다. 상기 그래프를 생성하는 동작은, 상기 특징 요소의 상기 간격 내 인접 여부를 상기 노드의 에지로 구성하는 것 이 바람직하다. 상기 그래프를 생성하는 동작은, 상기 생성된 그래프 내 노드를 단위로 인접한 노드 들의 확률 값을 학습된 그 래프 네트워크의 가중치에 따라 반영하여 갱신하는 것이 바람직하다. 상기 그래프를 생성하는 동작은, 임계값 이상의 상기 제2 타겟 이미지의 픽셀 별 장기 확률 값을 결정된 간격에 따라 구분하여 추출된 상기 특징 요소를 그래프의 노드로 구성하는 것이 바람직하다."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면 보다 정확한 객체 세그멘테이션 결과를 생성할 수 있다. 본 발명은 의료 이미지 내 신체의 장기와 혈관을 구분한 파이프라인을 통하여 보다 정밀한 혈관의 세그멘테이션 을 수행할 수 있다. 또한, 본 발명은 세그멘테이션 결과로 획득된 의료 이미지 내 객체의 정확한 위치 정보를 이용하여 수술이나 진 단의 정확도를 높일 수 있다."}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하의 내용은 단지 발명의 원리를 예시한다. 그러므로 당업자는 비록 본 명세서에 명확히 설명되거나 도시 되 지 않았지만 발명의 원리를 구현하고 발명의 개념과 범위에 포함된 다양한 장치를 발명할 수 있는 것이다. 또한, 본 명세서에 열거된 모든 조건부 용어 및 실시 예들은 원칙적으로, 발명의 개념이 이해되도록 하기 위한목적으로만 명백히 의도되고, 이외같이 특별히 열거된 실시 예들 및 상태들에 제한적이지 않는 것으로 이해되어 야 한다. 상술한 목적, 특징 및 장점은 첨부된 도면과 관련한 다음의 상세한 설명을 통하여 보다 분명해질 것이며, 그에"}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "따라 발명이 속하는 기술분야에서 통상의 지식을 가진 자가 발명의 기술적 사상을 용이하게 실시할 수 있을 것 이다. 또한, 발명을 설명함에 있어서 발명과 관련된 공지 기술에 대한 구체적인 설명이 발명의 요지를 불필요하게 흐 릴 수 있다고 판단되는 경우에 그 상세한 설명을 생략하기로 한다. 이하에는 첨부한 도면을 참조하여 본 발명의 바람직한 실시 예에 대해 상세하게 설명한다. 이하, 도 1을 참조하여 본 실시예에 따른 컴퓨팅 장치의 혈관 세그멘테이션(Segmentation) 과정을 보다 상 세히 설명한다. 도 1은 본 발명의 일 실시예에 따른 컴퓨팅 장치는 이미지 장치로부터 다양한 이미지를 수신할 수 있다. 본 실시예에서 컴퓨팅 장치는 프로세서를 포함하는 단일 컴퓨터 또는 서버, 복수의 서버로 구성되는 서버 시스템으로 구현될 수 있다. 따라서, 컴퓨팅 장치는 단일 프로세스 상에서 수신된 이미지로부터 세그멘테이션을 수행하는 것 외에 네트 워크 통신이 가능한 형태로 구성될 수 있으며 클라우드 형태로 구현되어 다양한 촬영 장치에서 촬영된 이미지들 을 수신하여 처리하는 것도 가능하다. 또한, 컴퓨팅 장치는 프로세서 외에 수집된 이미지들을 이용하여 학습 데이터로 활용하거나 학습 데이터의 증강(Augmentation)을 위해 클라우드 기반의 메모리 장치를 포함하여 구성될 수 있다. 컴퓨팅 장치가 수신된 이미지로부터 직접 세그멘테이션 정보를 획득하는 엣지 컴퓨터로 구현되는 경우 직 접적인 세그멘테이션 과정을 수행할 수 있으며, 또는 중앙의 서버로 구현되는 경우 세그멘테이션을 수행하는 신 경망의 학습 또는 추론을 위하여 수집된 이미지에 대한 배치단위의 처리를 수행하고, 추론 결과를 API 호출에 대한 응답 형태로 제공하는 것도 가능하다. 본 실시예에서 이미지 장치는 의료 이미지 장치로 초음파, 컴퓨터 단층촬영((CT, Computed Tomography), 자기공 명이미지(MRI, Magnetic Resonance Imaging) 또는 PET(Positron Emission Tomography)와 CT를 통합시킨 하이브 리드 양식으로 PET-CT, MRI와 결합한 PET-MRI 등의 다양한 모달리티의 이미지를 출력하고, 컴퓨팅 장치는 출력된 이미지를 수신하여 객체 검출을 수행할 수 있다. 본 실시예에서 객체의 검출은 이미지에 포함된 객체의 분류(Classification)와 함께 바운딩 박스 형태의 위치 검출(detection)에서 나아가 객체가 위치하는 영역을 픽셀 단위로 구분하는 것을 의미할 수 있다. 일반적인 바운딩 박스 형태의 객체의 검출은 객체가 위치하는 영역을 좌표와 높이 및 크기로 결정하는 경우 실 제 객체의 영역 외에 불필요한 부분이 포함됨에 따른 오류가 포함될 수 있으며 의료 이미지와 같이 혈관의 형태 나 특성을 통해 진단이나 수술 처치를 위해서는 보다 정확한 위치에 대한 검출이 필요하다. 따라서 본 실시예에서 신경망은 세그멘테이션 정보로서 정의된 클래스에 기초하여 이미지를 픽셀 단위로 구분하 여 분류함으로써 객체에 대한 마스크를 획득하는 것을 목적으로 할 수 있다. 일 예로 컴퓨팅 장치는 CT 장치로부터 획득된 CT 이미지를 입력으로 신체의 장기와 혈관을 구분하고 혈관 영역에 대한 세그멘테이션 정보를 출력할 수 있다. CT 이미지는 신체의 절편에 대한 복수의 2차원 이미지들의 집합으로 3차원으로 재구성될 수 있으며 따라서 세그 멘테이션 정보는 3차원 공간 상에서 추출될 수 있다. 컴퓨팅 장치는 내부의 신경망을 통하여 CT 이미지로부터 장기와 혈관의 정보들을 추출할 수 있으며, 신경 망은 검출고자 하는 객체의 특징을 강조하도록 학습된 축약 과정과 축약된 특징의 위치와 크기 정보를 획득하기 위하여 원본 또는 결정된 크기로 확대하는 확장 과정을 수행하는 구조로 구성될 수 있다. 예를 들어 신경망은 U-Net구조를 통하여 CT 이미지 내 장기나 혈관의 특징들의 차원을 축소 후 확장하는 과정에 서 축소 과정의 결과를 활용함으로써 보다 정확한 위치 정보를 갖는 세그멘테이션 정보를 획득할 수 있다. 이때 신경망은 복수의 2차원 CT 이미지에 대한 각각의 세그멘테이션 정보를 추출하는 대신, CT 이미지를 3차원으로 재구성한 3차원 볼륨 데이터를 입력으로 하는 3d U-Net을 통해 3차원 컨볼루션과 3차원 풀링 과정, 3차원 디컨볼루션을 수행하여 3차원의 세그멘테이션 정보로 출력되는 것도 가능하다. 이때, 신경망은 혈관을 추출하는 신경망과 장기를 추출하는 신경망으로 구분되어 각각의 최적화된 특징을 출력 할 수 있도록 구성된다. 컴퓨팅 장치는 각 신경망에서 출력된 장기와 장기에 혈액을 공급하기 위한 혈관은 신체 해부학 특징 상 공 통된 공간 상에서 상호 연결됨을 전제로, 장기와 혈관의 상호 인접성에 근거한 특징들의 정제 과정을 수행할 수 있도록 한다. 이하, 본 실시예에 따른 구체적인 세그멘테이션 방법에 대하여 설명한다. 도 2는 본 발명의 일 실시예에 따른 컴퓨팅 장치의 객체 세그멘테이션 방법을 나타내는 흐름도이다. 먼저 본 실시예에 따른 컴퓨팅 장치는 세그멘테이션을 위해 대상 이미지(I)를 입력 받고, 대상 이미지에 포함된 혈관의 특징을 정의된 크기의 특징 맵으로 축약한다(S100). 본 실시예에서 입력되는 세그멘테이션 대상 이미지(I)는 CT 이미지 장치를 통해 촬영된 것으로 목적에 따라 다 양한 모달리티 이미지들을 포함할 수 있다. 컴퓨팅 장치는 대상 이미지(I)를 제1 세그멘테이션 네트워크(S1)에 입력하여 대상 이미지(I) 내 적어도 일 객체의 특징이 축약된 특징 맵(F)을 출력한다(S100). 도 3을 참고하면, 제1 세그멘테이션 네트워크(S1) 내의 인코더는 계층별 축약 과정(Contracting Path)을 위해 컨볼루션(Convolution) 연산을 수행하는 컨볼루션 네트워크로 구성될 수 있다. 컨볼루션 네트워크는 복수 의 컨볼루션 레이어들로 구성되며 컨볼루션 레이어들은 내부의 필터와 이미지의 픽셀 값들 간의 컨볼루션 연산 을 채널 별로 수행함으로써 객체와 관련된 특징들이 강조될 수 있도록 하며, 컨볼루션 과정에서 차원이 축소됨 에 따라 축약된 형태의 특징맵을 출력할 수 있다. 이어서, 본 실시예에 따른 컴퓨팅 장치는 출력된 특징 맵(F)을 디코더에 입력하여 특징들이 원본 크 기의 이미지 내에서 복원될 수 있도록 객체의 특징을 확장시키며, 이러한 특징들이 확장된 제1 타겟 이미지를 생성할 수 있다(S200). 디코더는 인코더에 대칭되는 형상으로 구현될 수 있으며 따라서 계층별 확장 과정(Expanding Path)을 위해 디컨볼루션(De-convolution) 연산을 수행하는 디컨볼루션 네트워크로 구성될 수 있다. 즉, 디컨볼루션 네트워크 내 각각의 레이어들은 인코더의 출력인 특징맵을 입력으로 특징 맵 내 특징 정보 들을 위치 정보를 복원하고, 원본 이미지의 크기에서 해당 특징들이 잘 표현될 수 있도록 확장 시킨다. 제1 세그멘테이션 네트워크(S1)는 인코더 내부의 컨볼루션 레이어와 디코더의 디컨볼루션 레이어의 스킵 연결(skip connection)을 통해 특징들이 축약된 저차원 값 뿐만 아니라 축약 이전의 고차원 정보도 이용함 으로써 이미지의 특징을 추출함과 동시에 정확한 위치 파악도 가능하도록 한다. 제1 세그멘테이션 네트워크(S1)는 인코딩 단계의 각 레이어에서 얻은 특징을 대응되는 디코딩 단계의 각 레이어 의 연산 과정에서 합치는(concatenation) 과정을 수행하고 결합된 특징 맵을 통해 복원을 수행함으로써 보다 정 확한 세그멘테이션 정보를 추출할 수 있도록 한다. 대칭적인 구조에 따라 인코더의 최종 출력된 특징 맵의 크기는 디코더의 입력을 위한 차원과 채널을 가질 수 있으며, 디코더는 내부의 디컨볼루션 레이어를 거치면서 미리 결정된 제1 크기의 바람직하게는 원 본 이미지 크기에서 특징들의 위치 정보들이 복원된 세그멘테이션 맵을 제1 타겟 이미지로 출력할 수 있다. 제1 세그멘테이션 네트워크(S1)는 디코더의 출력으로 세그멘테이션 맵 내 특징 값들은 픽셀 단위로 클래스 별 필터들의 가중치 값과 연산 될 수 있다. 필터들은 분류하고자 하는 객체의 클래스 별로 정의된 가중치(W1, W2, … Wn) 집합으로 구성될 수 있으며, 제1 타겟 이미지의 픽셀 별 특징 값들은 필터를 통해 가중 연산 된다. 각각의 가중치는 해당 클래스에서 각 채널의 중요도를 의미하며 가중치와 벡터 값의 연산은 활성화 함수로 소프트맥스의 입력으로 주어짐으로써, 객체의 분 류 결과는 확률 값 형태로 최종 출력될 수 있다. 본 실시예에서는 이상의 분류 결과에 따라 임계값 이상의 높은 확률을 갖는 클래스에 해당하는 제1 타겟 이미지 의 값들을 마스크(V)로 생성할 수 있다. 즉, CT 이미지로부터 소프트 맥스 함수를 통해 클래스별 확률에 따른분류 결과로 각각의 혈관에 해당하는 마스크들이 세그멘테이션 정보로 최종 출력될 수 있다. 다만, 상술한 바와 같이 인코더의 특징 맵으로부터 출력된 세그멘테이션 맵은 혈관의 세밀한 위치정보까지 포함하기는 어려우므로 추가적인 처리를 수행할 필요가 있으며 따라서 본 실시예에서는 혈관을 통해 혈액을 공 급받는 장기의 특성을 고려하여 객체의 영역을 보다 세밀하게 정제(Refinement)하여 재구성하는 과정을 수행한 다. 이때, 정제를 위해서는 제1 세그멘테이션 네트워크(S1)의 출력 결과에 해당하는 제1 타겟 이미지와 장기의 특징 에 대한 제2 타겟 이미지를 활용한다. 구체적으로 도 4를 참고하면 대상 이미지에 포함된 장기의 특징을 축약한다(S10). 도 5를 참고하면, 컴퓨팅 장치는 제2 세그멘테이션 네트워크(S2)를 통해 대상 이미지(I) 내 장기의 특징을 축약 후 확장함으로써 장기에 대한 위치와 크기에 대한 정보를 갖는 제2 타겟 이미지(Og)를 생성할 수 있다 (S20). 이때, 제2 세그멘테이션 네트워크(S2)는 상술한 제1 세그멘테이션 네트워크(S1)에 대응되는 인코더-디코더 구조 로 구성될 수 있다. 다음, 제2 세그멘테이션 네트워크(S2)의 출력 제2 타겟 이미지와 상기 제1 타겟 이미지를 결합한다(S30). 결 합과정에 대하여 도 6을 참고하여 보다 상세히 설명하면, 컴퓨팅 장치는 제1 세그멘테이션 네트워크 (S1)의 혈관에 대한 세그멘테이션 정보를 포함하는 제1 타겟 이미지(V')와 제2 세그멘테이션 네트워크(S2)의 장 기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지(Og)를 그래프 네트워크(G1)의 입력으로 제공함으로써 결합과정을 수행할 수 있다. 그래프 네트워크(G1)는 장기의 위치 정보를 기준으로 혈관들의 특징 정보를 갱신하기 위하여 노드와 에지로 구 성된 그래프를 생성하고 제1 타겟 이미지(V') 내 픽셀들의 특징 값(바람직하게는 확률 값)들의 갱신을 수행한다. 이때 컴퓨팅 장치는 그래프 네트워크(G1)의 입력을 위한 그래프의 생성을 위해 각각의 타겟 이미지들을 전 처리할 수 있다. 도 7을 참조하면, 혈관에 대한 제1 타겟 이미지(V')의 픽셀 별 혈관 확률 값을 미리 결정된 임계값과 비교하여 임계값 이상의 특징 값들만 추출함으로써 스켈레톤화 할 수 있다. 컴퓨팅 장치는 스켈레톤화 된 스켈레톤 이미지(Sk)를 통해 혈관의 위상적 특성들을 강조할 수 있으며, 혈 액을 공급하는 혈관의 본연의 목적에 따른 장기와의 위치 관계가 위상학 적으로 강조될 수 있도록 그래프 네트 워크(G1)는 학습될 수 있다. 컴퓨팅 장치는 정규화를 위해 스켈레톤 이미지(Sk) 내 혈관을 정의하는 픽셀 들을 등간격에 따라 구분함으 로써 구간을 정의함으로써 특징 요소를 추출하고, 추출된 특징 요소들을 그래프의 노드로 생성한다. 정규화된 스켈레톤 이미지는 에지와 노드 구조의 그래프(G)로 표현될 수 잇으며, 그래프(G) 상의 노드는 혈관에 대한 확률 값과 혈관의 분류 정보를 포함할 수 있다. 노드와 노드를 연결하는 에지는 혈관의 각 지점들의 연결 강도와 거리를 정의할 수 있다. 나아가, 그래프(G)는 장기의 정보를 더욱 포함할 수 있으며 장기는 복수의 노드들로 구성하되, 노드들의 확률 값은 최대값으로 고정됨으로써 혈관의 형태가 장기에 인접할 수 있도록 방향성을 가지며 학습되도록 할 수 있다. 도 8을 참고하면, 구체적으로 스켈레톤화된 제1 타겟 이미지와 제2 타겟 이미지는 공통의 공간 상에서 장기(O g)의 위치와 혈관(V')의 위치 및 확률 값을 픽셀별로 가질 수 있으며 해당 값들은 설정된 간격에 따라 그래프로 생성될 수 있다. 이때 그래프(G)는 3차원 구조로 구성되는 것도 가능하다. 생성된 그래프(G)에 대하여 연산을 수행하는 그래프 네트워크(G1)는 순차적인 레이어로 구성될 수 있으며, 인접 한 노드들의 특성을 반영하되 레이어가 깊어 질수록 보다 먼 거리의 이웃 노드들의 특성들도 반영될 수 있도록 한다. 도 9를 참고하여 그래프 네트워크 설명하면, 그래프(G)가 주어질 때 그래프 네트워크(G1)은 입력으로 노드에 대 한 특징 값으로 확률을 정의하는 행렬 X와 그래프 구조에 대한 표현으로 그래프(G) 내 노드들 간의 인접성을 나타내는 인접성 행렬 (adjacency matrix)(A)을 입력 받을 수 있다. 이 때 그래프 네트워크(G1)의 각 l번째 레이어의 각 노드들의 상태들로 히든스테이트(H)는 아래의 수학식으로 표현될 수 있다. [수학식]"}
{"patent_id": "10-2023-0009499", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "여기서, W(l) 은 l 번째 레이어의 가중치를 의미하며, b는 l 번째 레이어의 바이어스로, 인접행렬 A에 따라 l번 째 레이어로 입력된 노드들의 히든스테이트에 가중치를 곱하고 바이어스를 더한 뒤 활성화 함수 σ를 통해 노드 들을 업데이트 할 수 있도록 한다. 활성화 함수는 레이어 별 출력 값들을 지정된 범위 예를 들어, 0과 1 사이의 값으로 정규화할 수 있다. 본 실시예에서 그래프의 노드 들은 장기들과 혈관들을 등간격으로 구분함으로써 예를 들어 간은 L1, L2, L3…로 각각의 노드로, 우간동맥(Right hepatic artery는 RHA1, RHA2, RHA3…로 좌간동맥(Left hepatic artery)는 LHA1, LHA2, LHA3…로 구분될 수 있다. 또한 기타 장기들로 예를 들어 비장(Spleen)은 S1, S2으로 구분되어 각 각의 확률 값을 상태로 할 수 있다. 그래프(G)는 그래프 네트워크(G1)의 각 레이어(GC1, GC2, … GCn)를 통과함으로써 장기의 위치를 기준으로 가깝 거나 장기의 위치를 향하는 에지들로 연결된 노드들의 특징 값들은 더욱 강조될 수 있다. 제1 레이어(GC1)로 입력된 그래프 내 각 노드들의 특징 값들은 인접한 노드들 간의 특징 값들의 가중합으로 갱 신될 수 있으며 그래프 내 모든 노드들에 대하여 수행될 수 있다. 예를 들어, 간에 대한 특정 노드 L2는 인접한 좌간동맥 LHA3, LHA2, 우간동맥 RHA2과 인접하므로 각 노드들의 특징 값들을 이용하여 갱신된다. 인접한 좌간동맥 LHA3, LHA2, 우간동맥 RHA2의 노드는 다른 인접한 노드들의 특징 값들을 이용하여 갱신된다. 이어서 제2 레이어(GC1)는 제1 레이어를 통과한 각 노드들의 특징 값들에 대하여 인접한 노드들의 특징 값들을 반영할 수 있도록 컨볼루션 연산을 수행함으로써 좌간동맥 LHA1, 간에 대한 다른 노드 L3, L1, 우간동맥 RHA1, RHA3에 대한 특징 값들을 인접한 좌간동맥 LHA3, LHA2, 우간동맥 RHA2를 통해 반영할 수 있다. 레이어의 깊이가 깊어 질수록 보다 먼 거리의 인접한 노드들의 특징들이 반영될 수 있으며 그래프 네트워크의 최종 출력(Gp)을 통해 모든 노드들의 특징 값들은 갱신될 수 있다. 이상의 과정을 통해 변경된 노드들의 특징 값은 다시 제1 타겟 이미지의 특징 값에 반영될 수 있다. 도 10를 참고하면, 컴퓨팅 장치는 그래프 네트워크(G1)의 출력(Gp)과 제1 세그멘테이션 네트워크의 출력인 제1 타겟 이미지(V')를 결합하여 제3 타겟 이미지(Ve)를 생성힐 수 있다(S40). 결합 과정은 제1 타겟 이미지(V')의 픽셀 값을 그래프(Gp)의 대응되는 노드의 특징 값으로 대체하는 과정으로 수행되거나 가중합 등을 통해 수행될 수 있으며, 활성화 함수를 통하여 결합 과정에서 산출된 합산 결과는 확률 값으로 변환될 수 있다. 예를들어 활성화 함수는 Softmax 함수, Sigmoid 함수, 또는 ReLU 함수 일 수 있으나 이에 한정되는 것은 아니다. 다음 컴퓨팅 장치는 보다 갱신된 제3 타겟 이미지의 픽셀 값을 기초로 각 분류 별 세그멘테이션 맵으로 혈 관 마스크를 제공할 수 있다(S50). 이하 도 11를 참고하여 본 실시예에 따른 객체 세그멘테이션 정보의 획득 방법을 수행하는 컴퓨팅 장치로 서 서버의 구체적인 하드웨어 구현에 대하여 설명한다. 도 11을 참조하면, 본 발명의 몇몇 실시예들에서 서버는 컴퓨팅 장치의 형태로 구현될 수 있다. 서버(30 0)를 구성하는 각각의 모듈 중 하나 이상은 범용 컴퓨팅 프로세서 상에서 구현되며 따라서 프로세서 (processor), 입출력 I/O, 메모리 (memory), 인터페이스(interface) 및 버스(314, bus)를 포함할 수 있다. 프로세서, 입출력 장치, 메모리 및/또는 인터페이스는 버스를 통하 여 서로 결합될 수 있다. 버스는 데이터들이 이동되는 통로(path)에 해당한다. 구체적으로, 프로세서는 CPU(Central Processing Unit), MPU(Micro Processor Unit), MCU(Micro Controller Unit), GPU(Graphic Processing Unit), 마이크로프로세서, 디지털 신호 프로세스, 마이크로컨트롤러, 어플리케이션 프로세서(AP, application processor) 및 이들과 유사한 기능을 수행할 수 있는 논리 소자들 중에서 적어도 하나를 포함할 수 있다. 입출력 장치는 키패드(keypad), 키보드, 터치스크린 및 디스플레이 장치 중 적어도 하나를 포함할 수 있다. 메모리 장치는 데이터 및/또는 프로그램 등을 저장할 수 있다. 인터페이스는 통신 네트워크로 데이터를 전송하거나 통신 네트워크로부터 데이터를 수신하는 기능을 수행 할 수 있다. 인터페이스는 유선 또는 무선 형태일 수 있다. 예컨대, 인터페이스는 안테나 또는 유무 선 트랜시버 등을 포함할 수 있다. 메모리 는 프로세서의 동작을 향상시키되, 개인정보의 보호를 위 한 휘발성의 동작 메모리로서, 고속의 디램 및/또는 에스램 등을 더 포함할 수도 있다. 또한, 메모리 내에는 여기에 설명된 일부 또는 모든 모듈의 기능을 제공하는 프로그래밍 및 데이터 구성을 저장한다. 예를 들어, 상술한 학습 방법의 선택된 양태들을 수행하도록 하는 로직을 포함할 수 있다. 메모리 에 저장된 상술한 학습 방법을 수행하는 각 단계를 포함하는 명령어들의 집합으로 프로그램 또는 어플리케이션을 로드하고 프로세서가 각 단계를 수행할 수 있도록 한다. 예를 들어, 대상 이미지에 포함된 혈관 에 대한 세그멘테이션 정보를 포함하는 제1 타겟 이미지를 입력 받는 동작, 상기 대상 이미지에 포함된 장기에 대한 세그멘테이션 정보를 포함하는 제2 타겟 이미지를 입력 받는 동작, 상기 제1 타겟 이미지 및 상기 제2 타 겟 이미지 내 특징 요소 간의 인접성을 정의하는 그래프를 생성하는 동작 및, 상기 생성된 그래프에 따라 제1 타겟 이미지의 픽셀 값이 갱신된 제3 타겟 이미지를 생성하는 동작 등이 포함된 컴퓨터 프로그램이 프로세서에 의해 수행될 수 있다. 이상의 본 발명에 따르면 보다 정확한 객체 세그멘테이션 결과를 생성할 수 있다. 본 발명은 의료 이미지 내 신체의 장기와 혈관을 구분한 파이프라인을 통하여 보다 정밀한 혈관의 세그멘테이션 을 수행할 수 있다. 또한, 본 발명은 세그멘테이션 결과로 획득된 의료 이미지 내 객체의 정확한 위치 정보를 이용하여 수술이나 진 단의 정확도를 높일 수 있다. 나아가, 여기에 설명되는 다양한 실시예는 예를 들어, 소프트웨어, 하드웨어 또는 이들의 조합된 것을 이용하여 컴퓨터 또는 이와 유사한 장치로 읽을 수 있는 기록매체 내에서 구현될 수 있다. 하드웨어적인 구현에 의하면, 여기에 설명되는 실시예는 ASICs (application specific integrated circuits), DSPs (digital signal processors), DSPDs (digital signal processing devices), PLDs (programmable logic devices), FPGAs (field programmable gate arrays, 프로세서(processors), 제어기(controllers), 마이크로 컨 트롤러(micro-controllers), 마이크로 프로세서(microprocessors), 기타 기능 수행을 위한 전기적인 유닛 중 적어도 하나를 이용하여 구현될 수 있다. 일부의 경우에 본 명세서에서 설명되는 실시예들이 제어 모듈 자체로 구현될 수 있다. 소프트웨어적인 구현에 의하면, 본 명세서에서 설명되는 절차 및 기능과 같은 실시예들은 별도의 소프트웨어 모 듈들로 구현될 수 있다. 상기 소프트웨어 모듈들 각각은 본 명세서에서 설명되는 하나 이상의 기능 및 작동을 수행할 수 있다. 적절한 프로그램 언어로 씌여진 소프트웨어 어플리케이션으로 소프트웨어 코드가 구현될 수 있 다. 상기 소프트웨어 코드는 메모리 모듈에 저장되고, 제어모듈에 의해 실행될 수 있다. 이상의 설명은 본 발명의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 발명이 속하는 기술 분야에 서 통상의 지식을 가진 자라면 본 발명의 본질적인 특성에서 벗어나지 않는 범위 내에서 다양한 수정, 변경 및 치환이 가능할 것이다. 따라서, 본 발명에 개시된 실시 예 및 첨부된 도면들은 본 발명의 기술 사상을 한정하기 위한 것이 아니라 설명 하기 위한 것이고, 이러한 실시 예 및 첨부된 도면에 의하여 본 발명의 기술 사상의 범위가 한정되는 것은 아니 다. 본 발명의 보호 범위는 아래의 청구 범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기 술 사상은 본 발명의 권리 범위에 포함되는 것으로 해석되어야 할 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7 도면8 도면9 도면10 도면11"}
{"patent_id": "10-2023-0009499", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 시스템 구성을 나타내는 도이다. 도 2는 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 프로세스를 나타내는 도이다. 도 3은 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 신경망의 동작 파이프라인을 나타내는 도이다. 도 4는 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 프로세스를 나타내는 도이다. 도 5 내지 6은 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 신경망의 세부 동작 파이프라인 을 나타내는 도이다. 도 7 내지 8은 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 그래프의 생성 과정을 나타내는 도이다. 도 9는 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 그래프 네트워크의 동작 파이프라인을 나타내는 도이다. 도 10는 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 신경망의 동작 파이프라인을 나타내는 도이다. 도 11은 본 발명의 일 실시예에 따른 혈관 세그멘테이션 정보를 획득하는 방법을 수행하는 컴퓨팅 장치의 구현 을 나타내는 도이다."}
