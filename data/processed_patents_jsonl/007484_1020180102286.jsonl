{"patent_id": "10-2018-0102286", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2020-0025238", "출원번호": "10-2018-0102286", "발명의 명칭": "영상 생성 장치, 영상 생성 장치를 포함하는 이미징 시스템 및 이미징 시스템의 동작 방법", "출원인": "한국전자통신연구원", "발명자": "채승훈"}}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "이미징 시스템의 동작 방법에 있어서,광 조사기에 의해 광원으로부터 피사체에 광을 조사하는 단계;광 감지기에 의해 상기 피사체에 대한 2차원의 투영영상을 획득하는 단계;상기 피사체의 3차원 좌표와 상기 투영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스(projection matrix)를생성하는 단계;상기 제1 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제1 볼륨 영상을 생성하는 단계;상기 제1 볼륨 영상으로부터 상기 피사체에 대한 2차원의 가상 투영영상을 생성하는 단계;상기 투영영상과 상기 가상 투영영상을 매칭하고, 매칭 결과를 기반으로 상기 제1 프로젝션 매트릭스를 업데이트하여 제2 프로젝션 매트릭스를 생성하는 단계; 및상기 제2 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제2 볼륨 영상을 생성하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,상기 프로젝션 매트릭스는 상기 광원과 상기 광 감지기의 중심까지의 거리, 상기 광원과 상기 피사체의 중심까지의 거리, 상기 광원의 회전각, 상기 광원의 방위각 및 상기 광 감지기의 중심 좌표를 이용하여 생성되고,상기 피사체의 3차원 좌표가 (X, Y, Z) 좌표계로 표현되고, 상기 광 조사기 및 상기 광 감지기가 Z 축을 기준으로 회전하는 경우, 상기 피사체의 중심은 상기 광원과 상기 광 감지기의 중심까지를 연결한 선분과 상기 Z 축이만나는 지점이고, 상기 광원의 회전각은 상기 광원이 X-Y 평면으로 수직 투영되었을 때, Y 축을 기준으로 산정된 각도이고, 상기 광원의 방위각은 상기 광원과 상기 X-Y 평면이 이루는 각도인 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,상기 제1 볼륨 영상을 생성하는 단계는,상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표값을 획득하는 단계; 및상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 1 항에 있어서,상기 가상 투영영상을 생성하는 단계는,상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 가상 투영영상의 2차원좌표 값을 획득하는 단계; 및상기 제1 볼륨 영상의 3차원 좌표 값의 픽셀 값을 상기 가상 투영영상의 2차원 좌표 값의 픽셀 값에 누적하는단계를 포함하는 동작 방법.공개특허 10-2020-0025238-3-청구항 5 제 1 항에 있어서,상기 제2 프로젝션 매트릭스를 생성하는 단계는,상기 투영영상 및 상기 가상 투영영상 중 하나를 평행이동 및 회전시켜 상기 투영영상 및 상기 가상 투영영상사이의 유사도를 산출하는 단계; 및상기 유사도가 가장 높은 경우의 평행이동 값 및 회전 값을 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 5 항에 있어서,상기 제1 프로젝션 매트릭스를 업데이트하는 단계는,상기 광 감지기의 중심 좌표, 상기 회전 값 및 상기 평행이동 값을 기반으로 제1 변환 매트릭스를 산출하는 단계;상기 제1 변환 매트릭스 및 상기 회전 값에 기초하여 제2 변환 매트릭스를 산출하는 단계; 및상기 제2 변환 매트릭스와 상기 제1 프로젝션 매트릭스를 곱하여 상기 제2 프로젝션 매트릭스를 산출하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 6 항에 있어서,상기 제1 변환 매트릭스는, 이고,상기 제2 변환 매트릭스는 이고,상기 u0 및 상기 v0 는 상기 광 감지기의 중심 좌표 값이고, 상기 r 은 상기 회전 값이고, 상기 Tu 및 상기 Tv는 상기 평행이동 값이고, 상기 TRu 는 상기 제1 변환 매트릭스의 첫 번째 행 값이고, 상기 TRv 는 상기 제1 변환 매트릭스의 두 번째 행 값인 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 1 항에 있어서,상기 제2 볼륨 영상을 생성하는 단계는,상기 제2 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표값을 획득하는 단계; 및상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "광원으로부터 피사체에 광을 조사하도록 구성된 광 조사기;상기 피사체에 대한 2차원의 투영영상을 획득하도록 구성된 광 감지기; 및공개특허 10-2020-0025238-4-상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 볼륨 영상을 생성하도록 구성된 영상 생성 장치를 포함하고,상기 영상 생성 장치는,상기 피사체의 3차원 좌표와 상기 투영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스(projection matrix)를생성하도록 구성된 프로젝션 매트릭스 생성 모듈;상기 제1 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제1 볼륨 영상을 생성하도록 구성된 볼륨 영상 생성 모듈;상기 제1 볼륨 영상으로부터 상기 피사체에 대한 2차원의 가상 투영영상을 생성하도록 구성된 가상 투영영상 생성 모듈; 및상기 투영영상과 상기 가상 투영영상을 매칭하고, 매칭 결과를 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하여 제2 프로젝션 매트릭스를 생성하도록 구성된 프로젝션 매트릭스 업데이트 모듈을 포함하고,상기 볼륨 영상 생성 모듈은 상기 제2 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제2 볼륨 영상을 생성하도록 더 구성된 이미징 시스템."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 9 항에 있어서,상기 볼륨 영상 생성 모듈은,상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표값을 획득하고, 상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하여 상기 제1 볼륨 영상을 생성하고,상기 제2 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표값을 획득하고, 상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하여 상기 제2 볼륨 영상을 생성하도록 구성된 이미징 시스템."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제 9 항에 있어서,상기 프로젝션 매트릭스 업데이트 모듈은 상기 투영영상 및 상기 가상 투영영상 중 하나를 평행이동 및 회전시켜 상기 투영영상 및 상기 가상 투영영상 사이의 유사도를 산출하고, 상기 유사도가 가장 높은 경우의 평행이동값 및 회전 값을 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하도록 구성된 이미징 시스템."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제 11 항에 있어서,상기 프로젝션 매트릭스 업데이트 모듈은,상기 광 감지기의 중심 좌표, 상기 회전 값 및 상기 평행이동 값을 기반으로 제1 변환 매트릭스를 산출하고, 상기 제1 변환 매트릭스 및 상기 회전 값에 기초하여 제2 변환 매트릭스를 산출하고, 상기 제2 변환 매트릭스와상기 제1 프로젝션 매트릭스를 곱하여 상기 제2 프로젝션 매트릭스를 산출하도록 구성되는 이미징 시스템."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "피사체에 대한 광을 조사하여 획득된 2차원의 투영영상으로부터 상기 피사체에 대한 3차원의 볼륨 영상을 생성하는 영상 생성 장치에 있어서,프로세서; 및상기 프로세서와 연결된 메모리를 포함하고,상기 메모리는 명령어들을 저장하고, 상기 명령어들이 상기 프로세서에 의해 실행되는 경우, 상기 명령어들은상기 프로세서가:공개특허 10-2020-0025238-5-상기 피사체의 3차원 좌표와 상기 투영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스(projection matrix)를생성하고,상기 제1 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제1 볼륨 영상을 생성하고,상기 제1 볼륨 영상으로부터 상기 피사체에 대한 2차원의 가상 투영영상을 생성하고,상기 투영영상과 상기 가상 투영영상을 매칭하고, 매칭 결과를 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하여 제2 프로젝션 매트릭스를 생성하고,상기 제2 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제2 볼륨 영상을 생성하도록 야기하는 영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제 13 항에 있어서,상기 제1 볼륨 영상을 생성하는 것은:상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표값을 획득하고,상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 것을 포함하는영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제 13 항에 있어서,상기 가상 투영영상을 생성하는 것은:상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 가상 투영영상의 2차원좌표 값을 획득하고,상기 제1 볼륨 영상의 3차원 좌표 값의 픽셀 값을 상기 가상 투영영상의 2차원 좌표 값의 픽셀 값에 누적하는것을 포함하는 영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제 13 항에 있어서,상기 제2 프로젝션 매트릭스를 생성하는 것은:상기 투영영상 및 상기 가상 투영영상 중 하나를 평행이동 및 회전시켜 상기 투영영상 및 상기 가상 투영영상사이의 유사도를 산출하고,상기 유사도가 가장 높은 경우의 평행이동 값 및 회전 값을 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하는 것을 포함하는 영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제 16 항에 있어서,상기 유사도는 상호정보량(mutual information) 기법, 구조적 유사성 인덱스(SSIM; structural similarityindex) 기법 및 인공지능 기법 중 하나를 이용하여 산출되는 영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제 16 항에 있어서,상기 제1 프로젝션 매트릭스를 업데이트하는 것은:상기 투영영상의 중심 좌표, 상기 회전 값 및 상기 평행이동 값을 기반으로 제1 변환 매트릭스를 산출하고,공개특허 10-2020-0025238-6-상기 제1 변환 매트릭스 및 상기 회전 값에 기초하여 제2 변환 매트릭스를 산출하고,상기 제2 변환 매트릭스와 상기 제1 프로젝션 매트릭스를 곱하여 상기 제2 프로젝션 매트릭스를 산출하는 것을포함하는 영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제 13 항에 있어서,상기 제2 볼륨 영상을 생성하는 것은:상기 제2 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표값을 획득하는 것,상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 것을 포함하는영상 생성 장치."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명의 하나의 실시 예에 따른 이미징 시스템의 동작 방법은 광 조사기에 의해 광원으로부터 피사체에 광을 조사하는 단계, 광 감지기에 의해 피사체에 대한 2차원의 투영영상을 획득하는 단계, 피사체의 3차원 좌표와 투 영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스(projection matrix)를 생성하는 단계, 제1 프로젝션 매트릭 스 및 투영영상에 기초하여 피사체에 대한 3차원의 제1 볼륨 영상을 생성하는 단계, 제1 볼륨 영상으로부터 피사 체에 대한 2차원의 가상 투영영상을 생성하는 단계, 투영영상과 가상 투영영상을 매칭하고, 매칭 결과를 기반으 로 제1 프로젝션 매트릭스를 업데이트하여 제2 프로젝션 매트릭스를 생성하는 단계 및 제2 프로젝션 매트릭스 및 투영영상에 기초하여 피사체에 대한 3차원의 제2 볼륨 영상을 생성하는 단계를 포함한다."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 이미징 시스템에 관한 것으로써, 좀 더 상세하게는 광원, 피사체 및 광 감지기 사이의 기하학적 관계 를 정밀하게 파악하여 3차원 CT 영상의 화질을 향상시키기 위한 이미징 시스템에 관한 것이다."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "콘빔 CT(Cone Beam Computed Tomography) 시스템은 엑스선(X-ray) 광원 및 엑스선 감지기를 포함한다. 엑스선 광원 및 엑스선 감지기는 피사체를 중심으로 회전하면서 복수의 2차원 투영영상을 획득할 수 있다. 획득된 2차 원 투영영상으로부터 피사체에 대한 3차원 영상을 생성하기 위해, 투영영상을 획득할 당시의 엑스선 광원, 엑스 선 감지기 및 피사체의 위치 관계가 정확하게 판별되어야 한다. 엑스선 광원, 엑스선 감지기 및 피사체의 위치 관계가 정확하게 판별되지 못하면, 피사체에 대한 3차원 영상의 선명도가 떨어질 수 있다. 콘빔 CT 시스템에서, 피사체를 촬영하기 위해 엑스선 광원과 엑스선 감지기를 지지하는 프레임(frame)인 갠트리 (gantry)가 궤도를 따라 회전할 수 있다. 갠트리의 회전 궤적이 정확하게 판별 가능한 경우, 엑스선 광원, 엑스 선 감지기 및 피사체 사이의 위치 관계가 정확하게 판별될 수 있다. 그러나, 갠트리의 구조적 처짐이 발생하거 나 회전 궤적의 변형으로 인하여 갠트리의 회전 궤적을 정확하게 판별하는 것이 어렵고, 엑스선 광원, 엑스선 감지기 및 피사체 사이의 위치 관계를 정확하게 판별하기가 매우 어렵다. 이에 따라, 피사체에 대한 3차원 영상 의 선명도가 떨어질 수 있다."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 상술된 기술적 과제를 해결하기 위한 것으로써, 본 발명의 목적은 갠트리의 회전 궤적이 정확하게 판 별될 수 없는 경우, 피사체에 대한 3차원 영상의 선명도를 향상시킬 수 있는 이미징 시스템을 제공하는 데 있다."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 하나의 실시 예에 따른 이미징 시스템의 동작 방법은 광 조사기에 의해 광원으로부터 피사체에 광을 조사하는 단계, 광 감지기에 의해 상기 피사체에 대한 2차원의 투영영상을 획득하는 단계, 상기 피사체의 3차원 좌표와 상기 투영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스(projection matrix)를 생성하는 단계, 상기 제1 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제1 볼륨 영상을 생성하는 단 계, 상기 제1 볼륨 영상으로부터 상기 피사체에 대한 2차원의 가상 투영영상을 생성하는 단계, 상기 투영영상과 상기 가상 투영영상을 매칭하고, 매칭 결과를 기반으로 상기 제1 프로젝션 매트릭스를 업데이트하여 제2 프로젝 션 매트릭스를 생성하는 단계 및 상기 제2 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제2 볼륨 영상을 생성하는 단계를 포함한다. 하나의 실시 예에 있어서, 상기 프로젝션 매트릭스는 상기 광원과 상기 광 감지기의 중심까지의 거리, 상기 광 원과 상기 피사체의 중심까지의 거리, 상기 광원의 회전각, 상기 광원의 방위각 및 상기 광 감지기의 중심 좌표 를 이용하여 생성되고, 상기 피사체의 3차원 좌표가 (X, Y, Z) 좌표계로 표현되고, 상기 광 조사기 및 상기 광 감지기가 Z 축을 기준으로 회전하는 경우, 상기 피사체의 중심은 상기 광원과 상기 광 감지기의 중심까지를 연 결한 선분과 상기 Z 축이 만나는 지점이고, 상기 광원의 회전각은 상기 광원이 X-Y 평면으로 수직 투영되었을 때, Y 축을 기준으로 산정된 각도이고, 상기 광원의 방위각은 상기 광원과 상기 X-Y 평면이 이루는 각도일 수 있다. 하나의 실시 예에 있어서, 상기 제1 볼륨 영상을 생성하는 단계는 상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표 값을 획득하는 단계 및 상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 단계를 포함할 수 있다. 하나의 실시 예에 있어서, 상기 가상 투영영상을 생성하는 단계는 상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 가상 투영영상의 2차원 좌표 값을 획득하는 단계 및 상기 제1 볼륨 영 상의 3차원 좌표 값의 픽셀 값을 상기 가상 투영영상의 2차원 좌표 값의 픽셀 값에 누적하는 단계를 포함할 수 있다. 하나의 실시 예에 있어서, 상기 제2 프로젝션 매트릭스를 생성하는 단계는 상기 투영영상 및 상기 가상 투영영 상 중 하나를 평행이동 및 회전시켜 상기 투영영상 및 상기 가상 투영영상 사이의 유사도를 산출하는 단계 및 상기 유사도가 가장 높은 경우의 평행이동 값 및 회전 값을 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하 는 단계를 포함할 수 있다. 하나의 실시 예에 있어서, 상기 제1 프로젝션 매트릭스를 업데이트하는 단계는 상기 광 감지기의 중심 좌표, 상 기 회전 값 및 상기 평행이동 값을 기반으로 제1 변환 매트릭스를 산출하는 단계, 상기 제1 변환 매트릭스 및 상기 회전 값에 기초하여 제2 변환 매트릭스를 산출하는 단계 및 상기 제2 변환 매트릭스와 상기 제1 프로젝션 매트릭스를 곱하여 상기 제2 프로젝션 매트릭스를 산출하는 단계를 포함할 수 있다. 하나의 실시 예에 있어서, 상기 제1 변환 매트릭스는 이고, 상기 제2 변환 매트릭스는 이고, 상기 u0 및 상기 v0 는 상기 광 감지기의 중심 좌표 값이 고, 상기 r 은 상기 회전 값이고, 상기 Tu 및 상기 Tv 는 상기 평행이동 값이고, 상기 TRu 는 상기 제1 변환 매 트릭스의 첫 번째 행 값이고, 상기 TRv 는 상기 제1 변환 매트릭스의 두 번째 행 값일 수 있다. 하나의 실시 예에 있어서, 상기 제2 볼륨 영상을 생성하는 단계는 상기 제2 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표 값을 획득하는 단계 및 상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 단계를 포함할 수 있다. 본 발명의 하나의 실시 예에 따른 이미징 시스템은 광원으로부터 피사체에 광을 조사하도록 구성된 광 조사기, 상기 피사체에 대한 2차원의 투영영상을 획득하도록 구성된 광 감지기 및 상기 투영영상에 기초하여 상기 피사 체에 대한 3차원의 볼륨 영상을 생성하도록 구성된 영상 생성 장치를 포함하고, 상기 영상 생성 장치는 상기 피 사체의 3차원 좌표와 상기 투영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스(projection matrix)를 생성하 도록 구성된 프로젝션 매트릭스 생성 모듈, 상기 제1 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피 사체에 대한 3차원의 제1 볼륨 영상을 생성하도록 구성된 볼륨 영상 생성 모듈, 상기 제1 볼륨 영상으로부터 상 기 피사체에 대한 2차원의 가상 투영영상을 생성하도록 구성된 가상 투영영상 생성 모듈 및 상기 투영영상과 상 기 가상 투영영상을 매칭하고, 매칭 결과를 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하여 제2 프로젝션 매트릭스를 생성하도록 구성된 프로젝션 매트릭스 업데이트 모듈을 포함하고, 상기 볼륨 영상 생성 모듈은 상기 제2 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대한 3차원의 제2 볼륨 영상을 생성하도록 더 구성된다. 하나의 실시 예에 있어서, 상기 볼륨 영상 생성 모듈은 상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표 값을 획득하고, 상기 투영영상의 2차원 좌표 값의 픽셀값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하여 상기 제1 볼륨 영상을 생성하고, 상기 제2 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표 값을 획득하고, 상 기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하여 상기 제2 볼륨 영상을 생성하도록 구성될 수 있다. 하나의 실시 예에 있어서, 상기 프로젝션 매트릭스 업데이트 모듈은 상기 투영영상 및 상기 가상 투영영상 중 하나를 평행이동 및 회전시켜 상기 투영영상 및 상기 가상 투영영상 사이의 유사도를 산출하고, 상기 유사도가 가장 높은 경우의 평행이동 값 및 회전 값을 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하도록 구성될 수 있다. 하나의 실시 예에 있어서, 상기 프로젝션 매트릭스 업데이트 모듈은 상기 광 감지기의 중심 좌표, 상기 회전 값 및 상기 평행이동 값을 기반으로 제1 변환 매트릭스를 산출하고, 상기 제1 변환 매트릭스 및 상기 회전 값에 기 초하여 제2 변환 매트릭스를 산출하고, 상기 제2 변환 매트릭스와 상기 제1 프로젝션 매트릭스를 곱하여 상기 제2 프로젝션 매트릭스를 산출하도록 구성될 수 있다. 본 발명의 하나의 실시 예에 따른 피사체에 대한 광을 조사하여 획득된 2차원의 투영영상으로부터 상기 피사체 에 대한 3차원의 볼륨 영상을 생성하는 영상 생성 장치는 프로세서 및 상기 프로세서와 연결된 메모리를 포함하 고, 상기 메모리는 명령어들을 저장하고, 상기 명령어들이 상기 프로세서에 의해 실행되는 경우, 상기 명령어들 은 상기 프로세서가 상기 피사체의 3차원 좌표와 상기 투영영상의 2차원 좌표 사이의 제1 프로젝션 매트릭스 (projection matrix)를 생성하고, 상기 제1 프로젝션 매트릭스 및 상기 투영영상에 기초하여 상기 피사체에 대 한 3차원의 제1 볼륨 영상을 생성하고, 상기 제1 볼륨 영상으로부터 상기 피사체에 대한 2차원의 가상 투영영상 을 생성하고, 상기 투영영상과 상기 가상 투영영상을 매칭하고, 매칭 결과를 이용하여 상기 제1 프로젝션 매트 릭스를 업데이트하여 제2 프로젝션 매트릭스를 생성하고, 상기 제2 프로젝션 매트릭스 및 상기 투영영상에 기초 하여 상기 피사체에 대한 3차원의 제2 볼륨 영상을 생성하도록 야기한다. 하나의 실시 예에 있어서, 상기 제1 볼륨 영상을 생성하는 것은 상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표 값을 획득하고, 상기 투영영상의 2차원 좌표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 것을 포함할 수 있다. 하나의 실시 예에 있어서, 상기 가상 투영영상을 생성하는 것은 상기 제1 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 가상 투영영상의 2차원 좌표 값을 획득하고, 상기 제1 볼륨 영상의 3 차원 좌표 값의 픽셀 값을 상기 가상 투영영상의 2차원 좌표 값의 픽셀 값에 누적하는 것을 포함할 수 있다. 하나의 실시 예에 있어서, 상기 제2 프로젝션 매트릭스를 생성하는 것은 상기 투영영상 및 상기 가상 투영영상 중 하나를 평행이동 및 회전시켜 상기 투영영상 및 상기 가상 투영영상 사이의 유사도를 산출하고, 상기 유사도 가 가장 높은 경우의 평행이동 값 및 회전 값을 이용하여 상기 제1 프로젝션 매트릭스를 업데이트하는 것을 포 함할 수 있다. 하나의 실시 예에 있어서, 상기 유사도는 상호정보량(mutual information) 기법, 구조적 유사성 인덱스(SSIM; structural similarity index) 기법 및 인공지능 기법 중 하나를 이용하여 산출될 수 있다. 하나의 실시 예에 있어서, 상기 제1 프로젝션 매트릭스를 업데이트하는 것은 상기 투영영상의 중심 좌표, 상기 회전 값 및 상기 평행이동 값을 기반으로 제1 변환 매트릭스를 산출하고, 상기 제1 변환 매트릭스 및 상기 회전 값에 기초하여 제2 변환 매트릭스를 산출하고, 상기 제2 변환 매트릭스와 상기 제1 프로젝션 매트릭스를 곱하여 상기 제2 프로젝션 매트릭스를 산출하는 것을 포함할 수 있다. 하나의 실시 예에 있어서, 상기 제2 볼륨 영상을 생성하는 것은 상기 제2 프로젝션 매트릭스를 이용하여 상기 피사체의 3차원 좌표 값에 대응하는 상기 투영영상의 2차원 좌표 값을 획득하는 것, 상기 투영영상의 2차원 좌 표 값의 픽셀 값을 상기 피사체의 3차원 좌표 값의 픽셀 값에 누적하는 것을 포함할 수 있다."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시 예에 따르면, 프로젝션 매트릭스를 이용하여 피사체에 대한 3차원 영상을 획득할 수 있는 이미 징 시스템을 제공할 수 있다. 또한, 본 발명의 실시 예에 따른 이미징 시스템은 프로젝션 매트릭스를 빠르게 업데이트하고, 업데이트된 프로 젝션 매트릭스를 이용하여 화질이 향상된 3차원 영상을 빠르게 제공할 수 있다."}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면들을 참조하여 본 발명의 실시 예들이 상세하게 설명된다. 이하의 설명에서, 상세한 구성들 및 구조들과 같은 세부적인 사항들은 단순히 본 발명의 실시 예들의 전반적인 이해를 돕기 위하여 제공된다. 그 러므로 본 발명의 기술적 사상 및 범위로부터의 벗어남 없이 본문에 기재된 실시 예들의 변형들은 통상의 기술 자 의해 수행될 수 있다. 더욱이, 명확성 및 간결성을 위하여 잘 알려진 기능들 및 구조들에 대한 설명들은 생 략된다. 본 명세서에서 사용된 용어들은 본 발명의 기능들을 고려하여 정의된 용어들이며, 특정 기능에 한정되 지 않는다. 용어들의 정의는 상세한 설명에 기재된 사항을 기반으로 결정될 수 있다. 이하의 도면들 또는 상세한 설명에서의 모듈들은 도면에 도시되거나 또는 상세한 설명에 기재된 구성 요소 이외 에 다른 것들과 연결될 수 있다. 모듈들 또는 구성 요소들 사이의 연결은 각각 직접적 또는 비직접적일 수 있다. 모듈들 또는 구성 요소들 사이의 연결은 각각 통신에 의한 연결이거나 또는 물리적인 접속일 수 있다. 상세한 설명에서 사용되는 부 또는 유닛(unit), 모듈(module), 계층(layer), 로직(logic) 등의 용어를 참조하여 설명되는 구성 요소들은 소프트웨어, 또는 하드웨어, 또는 그것들의 조합의 형태로 구현될 수 있다. 예시적으로, 소프트웨어는 기계 코드, 펌웨어, 임베디드 코드, 및 애플리케이션 소프트웨어일 수 있다. 예를 들 어, 하드웨어는 전기 회로, 전자 회로, 프로세서, 컴퓨터, 집적 회로, 집적 회로 코어들, 압력 센서, 관성 센서, 멤즈(Micro Electro Mechanical System; MEMS), 수동 소자, 또는 그것들의 조합을 포함할 수 있다. 다르게 정의되지 않는 한, 본문에서 사용되는 기술적 또는 과학적인 의미를 포함하는 모든 용어들은 본 발명이 속하는 기술 분야에서 통상의 지식을 지닌 자에 의해 이해될 수 있는 의미를 갖는다. 일반적으로 사전에서 정의 된 용어들은 관련된 기술 분야에서의 맥락적 의미와 동등한 의미를 갖도록 해석되며, 본문에서 명확하게 정의되 지 않는 한, 이상적 또는 과도하게 형식적인 의미를 갖도록 해석되지 않는다. 도 1은 본 발명의 하나의 실시 예에 따른 이미징 시스템의 개략도를 나타내는 도면이다. 도 1을 참조하면, 이미 징 시스템은 피사체 촬영 장치, 영상 생성 장치 및 영상 표시 장치를 포함할 수 있다. 피 사체 촬영 장치는 피사체 주위를 회전하면서 광 조사기를 통해 피사체에 광을 조사할 수 있다. 광 조 사기는 광원으로부터 피사체에 광을 조사할 수 있다. 광 감지기는 피사체 촬영 장치의 회전에 따라 다양한 각도에서 촬영된 피사체에 대한 2차원 투영영상(PI)들을 획득할 수 있다. 투영영상(PI)은 광 조사 기 및 광 감지기의 특정 위치에서 촬영된 피사체에 대한 2차원 이미지일 수 있다. 광 감지기는 피사체를 투과하여 도달한 광을 감지하고, 감지된 광으로부터 투영영상(PI)을 획득할 수 있다. 피사체 촬영 장 치는 획득된 투영영상(PI)들을 영상 생성 장치로 제공할 수 있다. 영상 생성 장치는 투영영상(PI)들로부터 피사체에 대한 3차원의 볼륨 영상(VI)을 생성할 수 있다. 볼륨 영 상(VI)은 광 조사기 및 광 감지기의 다양한 위치에서 촬영된 2차원 이미지들에 기초하여 생성된 피사 체에 대한 3차원 이미지일 수 있다. 영상 생성 장치는 생성한 볼륨 영상(VI)을 영상 표시 장치로 제 공할 수 있다. 영상 표시 장치는 볼륨 영상(VI)을 사용자가 시각적으로 인식할 수 있도록 표시할 수 있다.피사체 촬영 장치, 영상 생성 장치 및 영상 표시 장치는 물리적으로 연결된 하나의 기구 또는 하나의 패키지(package) 형태로 존재할 수 있다. 그러나, 본 발명은 이에 한정되지 않으며, 피사체 촬영 장치 , 영상 생성 장치 및 영상 표시 장치는 각각 물리적으로 분리된 별도의 장치로 존재할 수 있다. 도 1에 도시된 바와 같이, 본 발명의 이미징 시스템에 따르면, 광 조사기 및 광 감지기는 하나 의 프레임(frame)에 의해 연결되어 손가락 주위를 회전할 수 있다. 광 조사기 및 광 감지기는 엑스선 (X-ray)을 조사하여 다양한 각도에서 촬영된 손가락에 대한 투영영상(PI)들을 획득할 수 있다. 영상 생성 장치 는 투영영상(PI)들에 기초하여 손가락 뼈에 대한 볼륨 영상(VI)을 생성할 수 있다. 그러나, 본 발명은 이 에 한정되지 않으며, 이미징 시스템은 적외선, 자외선, 라디오 파, 마이크로 파 등 다양한 전자기파를 조 사하여 3차원 영상을 생성할 수 있다. 이하에서는, 설명의 편의를 위해 피사체 촬영 장치가 피사체 주위를 회전하는 것으로 가정하지만, 본 발명 은 이에 한정되지 않는다. 예를 들어, 본 발명의 하나의 실시 예는 피사체 촬영 장치가 고정되고, 피사체 가 회전하는 경우 또한 포함할 수 있다. 또한, 이미징 시스템은 콘빔 CT(Cone Beam Computed Tomography) 촬영 시스템일 수 있지만, 본 발명은 이에 한정되지 않는다. 도 2는 도 1의 이미징 시스템을 나타내는 블록도이다. 도 2를 참조하면, 이미징 시스템은 피사체 촬영 장 치 및 영상 생성 장치를 포함할 수 있다. 피사체 촬영 장치는 광 조사기, 광 감지기 및 제어기를 포함할 수 있다. 광 조사기는 광원을 포함할 수 있다. 광 조사기는 광원으로부터 피사체에 광을 조사할 수 있다. 광 조사기는 피사체 주위를 회전하면서 다양한 각도에서 피사체에 광을 조 사할 수 있다. 예를 들어, 광 조사기는 피사체에 엑스선을 조사할 수 있다. 광 감지기는 피사체에 대한 2차원의 투영영상(PI)을 획득할 수 있다. 광 감지기는 피사체를 투과하여 도달한 광을 감지하고, 감지된 광으로부터 투영영상(PI)을 획득할 수 있다. 광 감지기는 광 조사기와 함께 피사체를 회전하면서 다양한 각도에 대응하는 투영영상(PI)들을 획득할 수 있다. 광 감지기는 투영영 상(PI)을 영상 생성 장치로 전달할 수 있다. 제어기는 광 조사기 및 광 감지기의 동작을 제어할 수 있다. 또한, 제어기는 광 조사기 , 광 감지기 및 피사체 사이의 위치 관계를 나타내는 위치 정보(LI)를 획득할 수 있다. 예를 들어, 위치 정보(LI)는 광원과 광 감지기 사이의 거리, 광원과 피사체의 중심 사이의 거리, 피사체를 기준으로 한 광원의 회전각 및 방위각 등을 포함할 수 있다. 제어기는 광 조사기 및 광 감지기를 회전시키면서 변화되는 위치 정보(LI)를 획득할 수 있다. 예시적으로, 제어기는 미리 정해진 회전 궤적에 따라 광 조사기 및 광 감지기를 회전시킬 수 있 다. 이 경우, 제어기는 광 조사기 및 광 감지기의 회전에 따른 각각의 위치 정보(LI)를 획득할 수 있다. 제어기는 다양한 위치들에서 획득된 위치 정보(LI)를 영상 생성 장치로 전달할 수 있다. 즉, 광 조사기 및 광 감지기의 회전에 따라 복수의 투영영상(PI)들 및 복수의 위치 정보(LI)가 획득 될 수 있다. 복수의 투영영상(PI)들 및 복수의 위치 정보(LI)가 영상 생성 장치로 전달되는 경우, 각각의 투영영상(PI) 및 위치 정보(LI)가 매칭되어 전달될 수 있다. 영상 생성 장치는 피사체 촬영 장치로부터 전달된 복수의 투영영상(PI)들 및 복수의 위치 정보(LI)에 기초하여 피사체에 대한 볼륨 영상(VI)을 생성할 수 있다. 볼륨 영상(VI)은 영상 표시 장치로 제공될 수 있다. 영상 생성 장치는 프로젝션 매트릭스 생성 모듈, 볼륨 영상 생성 모듈, 가상 투영영상 생성 모 듈 및 프로젝션 매트릭스 업데이트 모듈을 포함할 수 있다. 프로젝션 매트릭스 생성 모듈은 투 영영상(PI)에 대응하는 프로젝션 매트릭스(PM)를 생성할 수 있다. 프로젝션 매트릭스(PM)는 피사체의 3차원 좌 표와 투영영상(PI)의 2차원 좌표 사이의 관계를 나타내는 값들의 집합일 수 있다. 즉, 광 조사기, 광 감지 기 및 피사체의 위치 관계에 따라 프로젝션 매트릭스(PM)가 달라질 수 있다. 따라서, 피사체의 위치가 고 정된 경우, 프로젝션 매트릭스(PM)는 광 조사기 및 광 감지기의 기하학적 위치와 대응될 수 있다. 프로젝션 매트릭스 생성 모듈은 투영영상(PI)에 대응하는 위치 정보(LI)를 이용하여 프로젝션 매트릭스 (PM)를 생성할 수 있다. 프로젝션 매트릭스 생성 모듈이 프로젝션 매트릭스(PM)를 생성하는 동작에 관한 자세한 설명은 도 4를 참조하여 후술될 것이다.볼륨 영상 생성 모듈은 프로젝션 매트릭스(PM) 및 투영영상(PI)에 기초하여 피사체에 대한 3차원의 볼륨 영상(VI)을 생성할 수 있다. 볼륨 영상 생성 모듈은 광 조사기 및 광 감지기의 다양한 위치들에 서 획득된 복수의 투영영상(PI)들 및 각각의 투영영상(PI)에 대응하는 프로젝션 매트릭스(PM)를 이용하여 볼륨 영상(VI)을 생성할 수 있다. 볼륨 영상 생성 모듈이 볼륨 영상(VI)을 생성하는 동작에 관한 자세한 설명은 도 5를 참조하여 후술될 것이다. 가상 투영영상 생성 모듈은 볼륨 영상(VI)으로부터 피사체에 대한 2차원의 가상 투영영상(DRR; digitally reconstructed radiograph)을 생성할 수 있다. 가상 투영영상(DRR)은 프로젝션 매트릭스(PM)를 이용하여 생성될 수 있다. 즉, 특정 프로젝션 매트릭스(PM)를 이용하여 생성된 가상 투영영상(DRR)은 특정 프로젝션 매트릭스 (PM)에 대응하는 투영영상(PI)과 관련될 수 있다. 따라서, 가상 투영영상(DRR)은 각각의 투영영상(PI)이 촬영될 때의 광 조사기 및 광 감지기의 위치를 기반으로 볼륨 영상(VI)을 가상의 피사체로 하여 생성된 가상 의 투영영상을 의미할 수 있다. 가상 투영영상 생성 모듈이 가상 투영영상(DRR)을 생성하는 동작에 관한 자세한 설명은 도 6을 참조하여 설명될 것이다. 프로젝션 매트릭스 업데이트 모듈은 투영영상(PI)과 가상 투영영상(DRR)을 매칭하고, 매칭 결과를 이용하 여 프로젝션 매트릭스(PM)를 업데이트할 수 있다. 프로젝션 매트릭스 업데이트 모듈은 업데이트된 프로젝 션 매트릭스(PM_U)를 생성하여 볼륨 영상 생성 모듈로 제공할 수 있다. 프로젝션 매트릭스 업데이트 모듈 이 프로젝션 매트릭스(PM)를 업데이트하는 동작에 관한 자세한 설명은 도 7 및 도 8을 참조하여 설명될 것 이다. 볼륨 영상 생성 모듈은 업데이트된 프로젝션 매트릭스(PM_U) 및 투영영상(PI)에 기초하여 피사체에 대한 볼륨 영상(VI)을 생성할 수 있다. 이 경우, 볼륨 영상(VI)은 프로젝션 매트릭스(PM)에 기초하여 생성된 볼륨 영 상(VI)보다 선명도가 향상될 수 있다. 예시적으로, 볼륨 영상 생성 모듈이 프로젝션 매트릭스(PM)에 기초하여 볼륨 영상(VI)을 생성하는 경우, 볼륨 영상(VI)의 선명도가 떨어질 수 있다. 볼륨 영상(VI)의 선명도가 높아지기 위해서는 프로젝션 매트릭스 (PM)가 나타내는 값(즉, 피사체의 3차원 좌표와 투영영상(PI)의 2차원 좌표 사이의 관계)이 정확해야 한다. 그 러나, 광 조사기 및 광 감지기의 회전 궤적은 갠트리(gantry)의 구조적 처짐 또는 갠트리의 회전 궤 적의 변형으로 인하여 제어기의 제어와 관계 없이 조금씩 달라질 수 있다. 이 경우, 제어기로부터 전 달되는 위치 정보(LI)는 부정확할 수 있으며, 부정확한 위치 정보(LI)에 따라 생성된 프로젝션 매트릭스(PM)는 부정확할 수 있다. 따라서, 복수의 프로젝션 매트릭스(PM)들 중 부정확한 프로젝션 매트릭스(PM)가 존재하는 경 우, 볼륨 영상(VI)의 선명도가 떨어질 수 있다. 이와 같이, 프로젝션 매트릭스 생성 모듈로부터 생성된 프로젝션 매트릭스(PM)가 부정확할 수 있기 때문에 프로젝션 매트릭스 업데이트 모듈은 프로젝션 매트릭스(PM)를 업데이트하여 프로젝션 매트릭스(PM)의 값을 보정할 수 있다. 업데이트된 프로젝션 매트릭스(PM_U)에 기초하여 볼륨 영상(VI)이 생성되는 경우, 볼륨 영상 (VI)의 선명도가 향상될 수 있다. 상술한 바와 같이, 이미징 시스템은 투영영상(PI)과 가상 투영영상(DRR)을 이용하여 프로젝션 매트릭스 (PM)를 업데이트할 수 있다. 특히, 이미징 시스템은 투영영상(PI)에 대응하는 하나의 가상 투영영상(DR R)을 생성하고, 투영영상(PI)과 가상 투영영상(DRR)을 매칭함으로써 프로젝션 매트릭스(PM)를 업데이트할 수 있 다. 따라서, 이미징 시스템은 각각의 투영영상(PI)에 대하여 하나의 가상 투영영상(DRR)을 생성하기 때문 에, 화질이 향상된 볼륨 영상(VI)을 빠르게 생성할 수 있다. 도 3은 도 2의 이미징 시스템의 동작을 나타내는 순서도이다. 도 2 및 도 3을 참조하면, S1100 단계에서, 이미 징 시스템은 광 조사기의 광원으로부터 피사체에 광을 조사할 수 있다. S1200 단계에서, 이미징 시 스템은 피사체에 대한 투영영상(PI)을 획득할 수 있다. 이미징 시스템은 광 감지기를 통해 다 양한 각도에서 촬영된 투영영상(PI)들을 획득할 수 있다. S1300 단계에서, 이미징 시스템은 피사체의 3차원 좌표와 투영영상(PI)의 2차원 좌표 사이의 관계를 나타 내는 프로젝션 매트릭스(PM)를 생성할 수 있다. 이미징 시스템은 프로젝션 매트릭스 생성 모듈을 통 해 프로젝션 매트릭스(PM)를 생성할 수 있다. 이미징 시스템은 투영영상(PI)들 각각에 대응하는 프로젝션 매트릭스(PM)를 생성할 수 있다. S1400 단계에서, 이미징 시스템은 프로젝션 매트릭스(PM) 및 투영영상(PI)에 기초하여 피사체에 대한 제1 볼륨 영상(VI)을 생성할 수 있다. 이미징 시스템은 볼륨 영상 생성 모듈을 통해 제1 볼륨 영상(VI)을 생성할 수 있다. 이미징 시스템은 다양한 각도에서 촬영된 투영영상(PI)들을 이용하여 제1 볼륨 영상 (VI)을 생성할 수 있다. S1500 단계에서, 이미징 시스템은 제1 볼륨 영상(VI)으로부터 피사체에 대한 가상 투영영상(DRR)을 생성 할 수 있다. 이미징 시스템은 가상 투영영상 생성 모듈을 통해 가상 투영영상(DRR)을 생성할 수 있 다. 이미징 시스템은 투영영상(PI)들 각각에 대응하는 프로젝션 매트릭스(PM)를 이용하여 투영영상(PI)들 각각에 대응하는 가상 투영영상(DRR)을 생성할 수 있다. 이미징 시스템은 하나의 투영영상(PI)에 대하여 대응하는 하나의 가상 투영영상(DRR)을 생성할 수 있다. S1600 단계에서, 이미징 시스템은 투영영상(PI)과 가상 투영영상(DRR)을 매칭하고, 매칭 결과를 기반으로 프로젝션 매트릭스(PM)를 업데이트할 수 있다. 이미징 시스템은 프로젝션 매트릭스 업데이트 모듈을 통해 프로젝션 매트릭스(PM)를 업데이트하고, 업데이트된 프로젝션 매트릭스(PM_U)를 생성할 수 있다. 이미징 시스템은 투영영상(PI)들 각각에 대응하는 업데이트된 프로젝션 매트릭스(PM_U)를 생성할 수 있다. S1700 단계에서, 이미징 시스템은 업데이트된 프로젝션 매트릭스(PM_U) 및 투영영상(PI)에 기초하여 피사 체에 대한 제2 볼륨 영상(VI)을 생성할 수 있다. 이미징 시스템은 볼륨 영상 생성 모듈을 통해 제2 볼륨 영상(VI)을 생성할 수 있다. 제2 볼륨 영상(VI)의 선명도는 제1 볼륨 영상(VI)의 선명도보다 더 높을 수 있다. 도 2에는 이미징 시스템이 S1100 내지 S1700 단계들의 동작을 수행하는 것으로 도시되었지만, 본 발명은 이에 한정되지 않는다. 예를 들어, 이미징 시스템은 S1500 내지 S1700 단계들의 동작을 반복하여 수행할 수 있다. S1500 단계에서, 이미징 시스템은 제2 볼륨 영상(VI)으로부터 가상 투영영상(DRR)을 생성할 수 있다. S1600 단계에서, 이미징 시스템은 투영영상(PI)과 가상 투영영상(DRR)을 매칭하고, 매칭 결과에 기 초하여 업데이트된 프로젝션 매트릭스(PM_U)를 다시 업데이트할 수 있다. S1700 단계에서, 이미징 시스템(100 0)은 다시 업데이트된 프로젝션 매트릭스(PM_U) 및 투영영상(PI)에 기초하여 제3 볼륨 영상(VI)을 생성할 수 있 다. 즉, 이미징 시스템이 S1500 단계 내지 S1700 단계의 동작을 반복하여 수행하는 경우, 선명도가 더 높 은 볼륨 영상(VI)이 생성될 수 있다. 따라서, 이미징 시스템은 선명도가 높은 볼륨 영상(VI)을 사용자에 게 제공할 수 있다. 도 4는 본 발명의 하나의 실시 예에 따른 프로젝션 매트릭스를 생성하는 방법을 설명하기 위한 도면이다. 도 2 및 도 4를 참조하면, 광원(S) 및 광 감지기 사이에 피사체가 위치할 수 있다. 광원(S)을 통해 피사체로 광 이 조사되는 경우, 광 감지기는 투영영상(PI)을 획득할 수 있다. 프로젝션 매트릭스 생성 모듈은 광 원(S), 피사체 및 광 감지기의 위치 관계를 나타내는 위치 정보(LI)를 이용하여 프로젝션 매트릭스(PM)를 생성할 수 있다. 위치 정보(LI)는 제어기로부터 미리 산출되거나 미리 획득되어 프로젝션 매트릭스 생성 모듈로 전달될 수 있다. 도 4에 도시된 바와 같이, 3차원의 (X, Y, Z) 좌표계를 기반으로 피사체의 위치가 표현되고, 2차원의 (U, V) 좌 표계를 기반으로 투영영상(PI)의 위치가 표현되는 경우, 프로젝션 매트릭스(PM)는 피사체의 3차원의 (X, Y, Z) 좌표 값과 투영영상(PI)의 2차원의 (U, V) 좌표 값 사이의 관계를 나타낼 수 있다. 위치 정보(LI)는 광원(S)과 광 감지기의 중심(P0)까지의 거리(SID), 광원(S)과 피사체의 중심까지의 거리 (SOD), 광원(S)의 회전각(θ), 광원(S)의 방위각(Ф) 및 광 감지기의 중심(P0)에 대한 정보를 포함할 수 있다. 광 감지기의 중심 좌표 값은 (u0, v0) 일 수 있다. 광 감지기의 중심 좌표 값 (u0, v0) 은 투영 영상(PI)의 중심 좌표 값 (u0, v0) 과 동일할 수 있다. 광원(S)을 포함하는 광 조사기 및 광 감지기는 Z 축을 기준으로 시계 방향으로 회전할 수 있다. 이 경우, 피사체의 중심은 광원(S)과 광 감지기의 중심(P0)까지를 연결한 선분과 Z 축이 만나는 지점일 수 있 다. 예를 들어, 피사체의 중심은 (X, Y, Z) 좌표계의 원점으로 설정될 수 있다. 광원(S)의 회전각(θ)은 광원(S)이 X-Y 평면으로 수직 투영되었을 때, Y 축을 기준으로 산정된 각도일 수 있다. 광원(S)의 방위각(Ф)은 광원(S)과 X-Y 평면이 이루는 각도일 수 있다. 광원(S)과 광 감지기의 회전 궤적이 미리 정해진 경우, 제어기는 회전 궤적에 따른 광원(S) 및 광 감 지기의 중심(P0) 좌표를 미리 저장할 수 있다. 이에 따라, 피사체의 위치가 고정된 경우, 제어기는 광원(S), 광 감지기 및 피사체의 위치 관계에 대한 위치 정보(LI)를 산출하고, 산출된 위치 정보(LI)를 프로젝션 매트릭스 생성 모듈로 제공할 수 있다. 프로젝션 매트릭스 생성 모듈은 위치 정보(LI)를 기반으로 아래의 수학식 1을 이용하여 프로젝션 매트릭스 (PM)를 생성할 수 있다. 수학식 1"}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "수학식 1과 같이, 광원(S)과 광 감지기의 특정 위치에서의 위치 정보(LI)를 이용하여 프로젝션 매트릭스 생성 모듈은 3 X 4 프로젝션 매트릭스(PM)를 생성할 수 있다. 여기서, 광원(S)과 광 감지기의 중심 (P0)까지의 거리(SID) 및 광원(S)과 피사체의 중심까지의 거리(SOD)는 광 감지기의 픽셀의 가로 또는 세로 길이인 픽셀 피치로 나누어진 값일 수 있다. 즉, 광원(S)과 광 감지기의 중심(P0)까지의 거리(SID) 및 광 원(S)과 피사체의 중심까지의 거리(SOD)는 픽셀 단위로 환산된 값일 수 있다. 도 5는 본 발명의 하나의 실시 예에 따른 볼륨 영상을 생성하는 방법을 나타내는 순서도이다. 이미징 시스템 은 도 3의 S1400 단계 및 S1700 단계에서, 프로젝션 매트릭스(PM) 및 투영영상(PI)에 기초하여 피사체에 대한 볼륨 영상(VI)을 생성할 수 있다. 도 2 및 도 5를 참조하면, S1401 단계에서, 볼륨 영상 생성 모듈은 프로젝션 매트릭스(PM)를 이용하여 피 사체의 3차원 좌표 값에 대응하는 투영영상(PI)의 2차원 좌표 값을 획득할 수 있다. 도 4에 도시된 바와 같이, 피사체의 좌표가 (X, Y, Z) 좌표계로 표현되고, 투영영상(PI)의 좌표가 (U, V) 좌표계로 표현되는 경우, 볼륨 영상 생성 모듈은 아래의 수학식 2를 이용하여 피사체의 3차원 좌표 값에 대응하는 투영영상(PI)의 2차원 좌표 값을 획득할 수 있다. 수학식 2"}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "수학식 2에서, C는 상수 값일 수 있다. 수학식 2와 같이, 볼륨 영상 생성 모듈은 피사체의 다양한 좌표 값 (x, y, z) 들을 대입하여 대응하는 투영영상(PI)의 좌표 값 (u, v) 들을 획득할 수 있다. 볼륨 영상 생성 모듈은 투영영상(PI)들 각각에 대응하는 프로젝션 매트릭스(PM)에 대하여 피사체의 다양한 좌표 값 (x, y, z) 에 대응하는 투영영상(PI)의 좌표 값 (u, v) 을 획득할 수 있다. 이에 따라, 피사체의 하나 의 좌표 값 (x, y, z) 에 대응하는 투영영상(PI)의 좌표 값 (u, v) 은 프로젝션 매트릭스(PM)에 따라 달라질 수 있다. S1402 단계에서, 볼륨 영상 생성 모듈은 투영영상(PI)의 2차원 좌표 값의 픽셀 값을 대응하는 피사체의 3 차원 좌표 값의 픽셀 값에 누적할 수 있다. 예를 들어, S1401 단계에서, 제1 프로젝션 매트릭스(PM)에 대하여 피사체의 제1 좌표 값 (x1, y1, z1) 과 대응하는 제1 투영영상(PI)의 제1 좌표 값 (u1, v1) 이 획득된 경우, 볼 륨 영상 생성 모듈은 제1 투영영상(PI)으로부터 제1 좌표 값 (u1, v1) 에 대응하는 제1 픽셀 값을 검출할수 있다. 볼륨 영상 생성 모듈은 검출된 제1 픽셀 값을 피사체의 제1 좌표 값 (x1, y1, z1) 의 픽셀 값에 누적할 수 있다. S1401 단계에서, 제2 프로젝션 매트릭스(PM)에 대하여 피사체의 제1 좌표 값 (x1, y1, z1) 과 대응하는 제2 투영영상(PI)의 제2 좌표 값 (u2, v2) 이 획득된 경우, 볼륨 영상 생성 모듈은 제2 투영영상 (PI)으로부터 제2 좌표 값 (u2, v2) 에 대응하는 제2 픽셀 값을 검출할 수 있다. 볼륨 영상 생성 모듈은 검출된 제2 픽셀 값을 피사체의 제1 좌표 값 (x1, y1, z1) 의 픽셀 값에 누적할 수 있다. 즉, 피사체의 제1 좌 표 값 (x1, y1, z1) 의 픽셀 값에는 투영영상(PI)의 제1 픽셀 값과 제2 픽셀 값이 누적될 수 있다. 상술한 바와 같이, 볼륨 영상 생성 모듈은 다양한 투영영상(PI)들의 픽셀 값들을 이용하여 볼륨 영상(VI) 을 생성할 수 있다. 도 6은 본 발명의 하나의 실시 예에 따른 가상 투영영상을 생성하는 방법을 나타내는 순서도이다. 도 2 및 도 6 을 참조하면, S1501 단계에서, 가상 투영영상 생성 모듈은 프로젝션 매트릭스(PM)를 이용하여 피사체의 3 차원 좌표 값에 대응하는 가상 투영영상(DRR)의 2차원 좌표 값을 획득할 수 있다. 가상 투영영상 생성 모듈 은 수학식 2를 이용하여 피사체의 다양한 좌표 값 (x, y, z) 들을 대입하여 대응하는 가상 투영영상(DRR) 의 좌표 값 (u, v) 들을 획득할 수 있다. 이 경우, 피사체의 서로 다른 좌표 값 (x, y, z) 들에 대응하는 가상 투영영상(DRR)의 좌표 값 (u, v) 들이 동일할 수 있다. S1502 단계에서, 가상 투영영상 생성 모듈은 볼륨 영상(VI)의 3차원 좌표 값의 픽셀 값을 대응하는 가상 투영영상(DRR)의 2차원 좌표 값의 픽셀 값에 누적할 수 있다. 예를 들어, 가상 투영영상 생성 모듈은 볼륨 영상(VI)의 제1 좌표 값 (x1, y1, z1) 의 제1 픽셀 값을 대응하는 가상 투영영상(DRR)의 제1 좌표 값 (u1, v1) 의 픽셀 값에 누적할 수 있다. 가상 투영영상 생성 모듈은 볼륨 영상(VI)의 제2 좌표 값 (x2, y2, z2) 의 제2 픽셀 값을 대응하는 가상 투영영상(DRR)의 제1 좌표 값 (u1, v1) 의 픽셀 값에 누적할 수 있다. 즉, 가상 투영영상(DRR)의 제1 좌표 값 (u1, v1) 의 픽셀 값에는 볼륨 영상(VI)의 제1 픽셀 값과 제2 픽셀 값이 누적될 수 있다. 가상 투영영상 생성 모듈은 S1501 단계 및 S1502 단계의 동작을 수행하면서 복수의 프로젝션 매트릭스(P M)들 각각에 대한 가상 투영영상(DRR)을 생성할 수 있다. 이 경우, 하나의 프로젝션 매트릭스(PM)에 대하여 하 나의 가상 투영영상(DRR)이 생성될 수 있다. 하나의 투영영상(PI) 획득 시, 도 4의 광원(S), 광 감지기 및 피사체의 위치 관계에 따라 하나의 프로젝션 매트릭스(PM)가 생성될 수 있으므로, 생성된 하나의 가상 투영영상 (DRR)은 하나의 투영영상(PI)과 대응할 수 있다. 도 7은 본 발명의 하나의 실시 예에 따른 프로젝션 매트릭스를 업데이트하는 방법을 나타내는 순서도이다. 도 2 및 도 7을 참조하면, 프로젝션 매트릭스 업데이트 모듈은 투영영상(PI) 및 이에 대응하는 가상 투영영상 (DRR)을 매칭할 수 있다. S1601 단계에서, 프로젝션 매트릭스 업데이트 모듈은 투영영상(PI) 및 가상 투영 영상(DRR) 중 하나를 평행이동 및 회전시켜 투영영상(PI) 및 가상 투영영상(DRR) 사이의 유사도를 산출할 수 있 다. 유사도는 투영영상(PI)과 가상 투영영상(DRR)의 픽셀 값들이 일치하는 정도를 나타내는 값일 수 있다. 예를 들어, 프로젝션 매트릭스 업데이트 모듈은 상호정보량(mutual information) 기법, 구조적 유사성 인덱스 (SSIM; structural similarity index) 기법 및 인공지능 기법 등을 이용하여 유사도를 산출할 수 있다. S1602 단계에서, 프로젝션 매트릭스 업데이트 모듈은 유사도가 가장 높은 경우의 평행이동 값 및 회전 값 을 이용하여 프로젝션 매트릭스(PM)를 업데이트할 수 있다. 예를 들어, 프로젝션 매트릭스 업데이트 모듈은 가상 투영영상(DRR)을 픽셀을 기준으로 제1 평행이동 값만 큼 평행이동 시키고, 제1 회전 값(즉, 제1 각도)만큼 회전시킬 수 있다. 프로젝션 매트릭스 업데이트 모듈(24 0)은 제1 평행이동 값 및 제1 회전 값에 따라 이동된 가상 투영영상(DRR)을 투영영상(PI)과 매칭하여 제1 유사 도를 산출할 수 있다. 프로젝션 매트릭스 업데이트 모듈은 가상 투영영상(DRR)을 픽셀을 기준으로 제2 평 행이동 값만큼 평행이동 시키고, 제2 회전 값(즉, 제2 각도)만큼 회전시킬 수 있다. 프로젝션 매트릭스 업데이 트 모듈은 제2 평행이동 값 및 제2 회전 값에 따라 이동된 가상 투영영상(DRR)을 투영영상(PI)과 매칭하여 제2 유사도를 산출할 수 있다. 산출된 유사도들 중 제2 유사도가 가장 높은 경우, 프로젝션 매트릭스 업데이트 모듈은 제2 평행이동 값 및 제2 회전 값을 이용하여 프로젝션 매트릭스(PM)를 업데이트할 수 있다. 프로젝션 매트릭스 업데이트 모듈은 아래의 수학식 3을 이용하여 프로젝션 매트릭스(PM)를 업데이트 수 있 다.수학식 3"}
{"patent_id": "10-2018-0102286", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "수학식 3과 같이, 프로젝션 매트릭스 업데이트 모듈은 제1 변환 매트릭스(TR)를 산출하고, 제1 변환 매트 릭스(TR)에 기초하여 제2 변환 매트릭스(VAR)를 산출할 수 있다. 프로젝션 매트릭스 업데이트 모듈은 제2 변환 매트릭스(VAR)와 프로젝션 매트릭스(PM)를 곱하여 업데이트된 프로젝션 매트릭스(PM_U)를 생성할 수 있다. 여기서, u0 및 v0 는 투영영상(PI)의 중심 좌표 값(즉, 광 감지기의 중심 좌표 값)이고, r 은 유사도가 가 장 높은 경우의 회전 값이고, Tu 및 Tv 는 유사도가 가장 높은 경우의 평행이동 값이고, TRu 는 제1 변환 매트 릭스(TR)의 첫 번째 행 값이고, TRv 는 제1 변환 매트릭스(TR)의 두 번째 행 값일 수 있다. 상술한 바와 같이, 프로젝션 매트릭스 업데이트 모듈은 하나의 투영영상(PI)과 이에 대응하는 하나의 가상 투영영상(DRR)을 매칭하고, 매칭 결과에 기초하여 대응하는 프로젝션 매트릭스(PM)를 업데이트할 수 있다. 프로 젝션 매트릭스 업데이트 모듈은 투영영상(PI)들 각각에 대응하는 가상 투영영상(DRR)에 기초하여 투영영상 (PI)들 각각에 대응하는 프로젝션 매트릭스(PM)를 업데이트할 수 있다. 도 8은 본 발명의 하나의 실시 예에 따른 가상 투영영상과 투영영상을 매칭하는 예시를 나타내는 도면이다. 도 8을 참조하면, 프로젝션 매트릭스 업데이트 모듈은 가상 투영영상(DRR) 및 투영영상(PI)을 2D-2D 매칭할 수 있다. 즉, 프로젝션 매트릭스 업데이트 모듈은 동일한 2차원 좌표계(예를 들어, (U, V) 좌표계)를 기준 으로 가상 투영영상(DRR)과 이에 대응하는 투영영상(PI)을 매칭할 수 있다. 도 8에 도시된 바와 같이, 프로젝션 매트릭스 업데이트 모듈은 가상 투영영상(DRR)을 평행이동(T)하고 회전(r)시켜 투영영상(PI)과 매칭할 수 있다. 도 7에서 설명한 바와 같이, 프로젝션 매트릭스 업데이트 모듈은 가상 투영영상(DRR)과 투영영상(PI)의 유 사도를 산출하여 매칭 여부를 판별할 수 있다. 프로젝션 매트릭스 업데이트 모듈은 유사도가 가장 높은 경 우의 평행이동 값 및 회전 값을 판별함으로써 2D-2D 매칭을 수행할 수 있다. 도 9는 본 발명의 다른 실시 예에 따른 이미징 시스템을 나타내는 블록도이다. 도 9를 참조하면, 이미징 시스템은 피사체 촬영 장치 및 영상 생성 장치를 포함할 수 있다. 피사체 촬영 장치 및 영상 생성 장치의 동작은 도 2의 피사체 촬영 장치 및 영상 생성 장치의 동작과 유사하므로 중 복되는 설명은 생략될 수 있다. 피사체 촬영 장치는 광원으로부터 피사체에 광을 조사하여 광 감지기를 통해 획득된 2차원의 투영영상(P I)을 영상 생성 장치로 제공할 수 있다. 피사체 촬영 장치는 광원, 피사체 및 광 감지기의 위치 관계 를 나타내는 위치 정보(LI)를 영상 생성 장치로 제공할 수 있다. 영상 생성 장치는 메모리 및 프로세서를 포함할 수 있다. 메모리는 명령어(CMD)들을 저장 할 수 있다. 프로세서는 메모리에 저장된 명령어(CMD)들을 실행할 수 있다. 프로세서는 명령어 (CMD)에 기초하여 도 1 내지 도 8에서 설명한 피사체에 대한 3차원의 볼륨 영상(VI) 생성 동작을 수행할 수 있 다. 프로세서는 피사체 촬영 장치로부터 제공된 투영영상(PI) 및 위치 정보(LI)에 기초하여 볼륨 영 상(VI)을 생성할 수 있다. 즉, 프로세서는 도 2의 프로젝션 매트릭스 생성 모듈, 볼륨 영상 생성 모 듈, 가상 투영영상 생성 모듈 및 프로젝션 매트릭스 업데이트 모듈의 동작을 수행할 수 있다. 도 10a 및 도 10b는 본 발명의 하나의 실시 예에 따라 생성된 볼륨 영상들의 예시를 나타내는 도면이다. 도 10a 를 참조하면, 업데이트되지 않은 프로젝션 매트릭스(PM)에 기초하여 생성된 초기 볼륨 영상(VI)의 단면이 도 시된다. 도 10a의 초기 볼륨 영상(VI)에서 볼 수 있듯이, 퍼짐 현상이 관찰될 수 있다. 도 10b를 참조하면, 세 번 업데이트된 프로젝션 매트릭스(PM)에 기초하여 생성된 볼륨 영상(VI)의 단면이 도시된다. 도 10b의 볼 륨 영상(VI)에서 볼 수 있듯이, 도 10a의 퍼짐 현상이 해소된 것이 관찰될 수 있다. 즉, 본 발명의 실시 예 들에 따라 업데이트된 프로젝션 매트릭스(PM)에 기초하여 볼륨 영상(VI)이 생성되는 경우, 볼륨 영상(VI)의 선 명도가 더 높아질 수 있다. 상술한 바와 같이, 이미징 시스템은 별도의 기하학 보정 팬텀(calibration phantom)을 사용하지 않고, 하 나의 투영영상(PI)과 이에 대응하는 하나의 가상 투영영상(DRR)을 이용하여 프로젝션 매트릭스(PM)의 값을 빠르 게 업데이트할 수 있다. 이미징 시스템은 갠트리의 회전 궤적이 변형되더라도 업데이트된 프로젝션 매트 릭스(PM_U)에 기초하여 화질이 향상된 볼륨 영상(VI)을 빠르게 생성할 수 있다. 상술된 내용은 본 발명을 실시하기 위한 구체적인 실시 예들이다. 본 발명은 상술된 실시 예들뿐만 아니라, 단 순하게 설계 변경되거나 용이하게 변경할 수 있는 실시 예들 또한 포함할 것이다. 또한, 본 발명은 실시 예들을 이용하여 용이하게 변형하여 실시할 수 있는 기술들도 포함될 것이다. 따라서, 본 발명의 범위는 상술된 실시 예들에 국한되어 정해져서는 안되며 후술하는 특허청구범위뿐만 아니라 이 발명의 특허청구범위와 균등한 것들 에 의해 정해져야 할 것이다."}
{"patent_id": "10-2018-0102286", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 하나의 실시 예에 따른 이미징 시스템의 개략도를 나타내는 도면이다. 도 2는 도 1의 이미징 시스템을 나타내는 블록도이다. 도 3은 도 2의 이미징 시스템의 동작을 나타내는 순서도이다. 도 4는 본 발명의 하나의 실시 예에 따른 프로젝션 매트릭스를 생성하는 방법을 설명하기 위한 도면이다. 도 5는 본 발명의 하나의 실시 예에 따른 볼륨 영상을 생성하는 방법을 나타내는 순서도이다. 도 6은 본 발명의 하나의 실시 예에 따른 가상 투영영상을 생성하는 방법을 나타내는 순서도이다. 도 7은 본 발명의 하나의 실시 예에 따른 프로젝션 매트릭스를 업데이트하는 방법을 나타내는 순서도이다. 도 8은 본 발명의 하나의 실시 예에 따른 가상 투영영상과 투영영상을 매칭하는 예시를 나타내는 도면이다. 도 9는 본 발명의 다른 실시 예에 따른 이미징 시스템을 나타내는 블록도이다. 도 10a 및 도 10b는 본 발명의 하나의 실시 예에 따라 생성된 볼륨 영상들의 예시를 나타내는 도면이다."}
