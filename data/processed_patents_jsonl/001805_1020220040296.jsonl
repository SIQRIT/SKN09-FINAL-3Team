{"patent_id": "10-2022-0040296", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0141141", "출원번호": "10-2022-0040296", "발명의 명칭": "인공지능 기반의 피부 분석 방법", "출원인": "주식회사 메디벨바이오", "발명자": "권보선"}}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "다중분광이미지를 포함하는 분석용 이미지 데이터, 개인정보 데이터, 생체 데이터 및 기상 데이터를 포함하는분석용 정보를 입력하는 정보 입력 단계;개인정보와 생체 데이터를 가공한 제1메타데이터와 기상 데이터를 가공한 제2메타데이터를 생성하는 데이터 가공 단계; 및분석용 이미지 데이터와 제1메타데이터 및 제2메타데이터를 이용하여 딥 러닝 기반의 인공지능 알고리즘을 통해피부에 대한 분석을 수행하는 피부 분석 단계;를 포함하는 것을 특징으로 하는 인공지능 기반의 피부 분석방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서,개인정보 데이터는 나이와 성별을 포함하고, 생체 데이터는 체온과 피부 수분도를 포함하며, 기상 데이터는 날씨와 습도를 포함하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 1에 있어서,상기 피부 분석 단계에서, 분석용 이미지 데이터와 제1메타데이터 및 제2메타데이터에 각각 가중치를 부여하여피부 분석을 수행하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "청구항 1에 있어서,상기 피부 분석 단계에서 분석된 결과를 이용하여 딥 러닝 기반의 인공지능 알고리즘을 통해 병원과 화장품 및의약품 중에서 하나 이상의 추천 목록을 선정하는 추천 목록 선정 단계를 더 포함하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "청구항 1에 있어서,상기 분석용 이미지 데이터는 화이트타겟이 포함된 화이트LED이미지와 다중분광이미지이고,상기 데이터 가공 단계에서, 분석용 이미지 데이터에 대한 영상 처리가 수행되며,상기 영상 처리는,화이트LED이미지와 다중분광이미지를 그레이스케일로 변환하는 단계;그레이스케일로 변환된 화이트LED이미지와 다중분광이미지에서 병변부위와 정상부위 및 화이트타겟을 ROI로 추출하는 단계;화이트타겟에 대한 ROI를 이용하여 이미지 보정을 위한 가중치를 도출하는 단계;공개특허 10-2023-0141141-3-가중치를 이용하여 그레이스케일로 변환된 다중분광이미지에 대한 보정을 수행하는 단계를 포함하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "청구항 5에 있어서,가중치는 2개의 가중치로 구성되며,첫 번째 가중치(W1)는 그레이스케일로 변환된 이미지들 각각에서 화이트타겟에 포함된 픽셀의 최대 강도를 그픽셀의 강도로 나눈 값이고,두 번째 가중치(W2)는 각각의 이미지에 포함된 픽셀들이 나타내는 강도의 평균값을 파장대 별로 산출하여, 그중 최대값을 각 이미지의 평균값으로 나눈 값이며,이미지 보정을 위한 보정강도는 각 픽셀이 가지는 원래 강도에 W1과 W2를 곱한 값인 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "청구항 5에 있어서,이미지 보정을 수행하기 전에, 그레이스케일로 변환된 화이트LED이미지와 다중분광이미지에서 피부가 아닌 부분및 화이트타겟이 포함되지 않는 분석영역을 분리하는 단계를 더 수행하는 것을 특징으로 하는 인공지능 기반의피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "청구항 5에 있어서,보정된 다중분광이미지에 대하여 정규화를 수행하는 단계를 더 포함하는 것을 특징으로 하는 인공지능 기반의피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "청구항 8에 있어서,보정된 다중분광이미지에서 병변부위의 보정강도에 대한 정규화와 정상부위의 보정강도에 대한 정규화를 수행하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "청구항 9에 있어서,병변부위와 정상부위의 각각에 대하여, 픽셀들 중에서도 최저강도와 최고강도를 추출하고 다음의 수식을 통해서정규화 강도를 도출하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법. [수식]정규화 강도 = (보정강도-최저강도) / (최고강도-최저강도)"}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "공개특허 10-2023-0141141-4-청구항 9에 있어서,보정된 다중분광이미지에 대하여 수행된 정규화를 이용하여 질환의 심각 정도를 색으로 반영한 질환 심각 정도이미지를 생성하는 단계를 더 포함하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "청구항 11에 있어서,보정된 다중분광이미지의 각 픽셀에 대하여 정규화도를 도출하고, 이를 유클리드 거리 계산을 통해서 각 픽셀에대하여 피부 질환 심각 정도를 부여하며, 피부 질환 심각 정도에 대응되는 색상을 부여한 뒤에 각 픽셀에 반영하여 질환 심각 정도 이미지를 생성하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "청구항 12에 있어서,분석 결과를 시각적으로 표시하는 결과 표시 단계를 더 포함하며, 결과 표시 단계에서 질환 심각 정도 이미지를표시하는 것을 특징으로 하는 인공지능 기반의 피부 분석 방법."}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 높은 정확도로 다중분광이미지를 이용하여 피부 분석을 수행할 수 있는 방법에 관한 것으로, 다중분광 이미지를 포함하는 분석용 이미지 데이터, 개인정보 데이터, 생체 데이터 및 기상 데이터를 포함하는 분석용 정 보를 입력하는 정보 입력 단계; 개인정보와 생체 데이터를 가공한 제1메타데이터와 기상 데이터를 가공한 제2메 타데이터를 생성하는 데이터 가공 단계; 및 분석용 이미지 데이터와 제1메타데이터 및 제2메타데이터를 이용하여 딥 러닝 기반의 인공지능 알고리즘을 통해 피부에 대한 분석을 수행하는 피부 분석 단계;를 포함한다. 본 발명은, 이미지에 포함된 화이트타겟으로부터 도출된 가중치를 이용하여 다중분광이미지를 보정함으로써, 인 공지능에 의해서 피부 분석을 수행하는 과정에서 분석용 이미지 데이터와 함께 메타데이터를 이용함으로써, 다중 분광이미지를 이용한 피부 분석의 정확도가 향상되는 효과가 있다."}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 디지털 이미지를 이용하여 피부를 분석하는 방법에 관한 것으로, 더욱 자세하게는 인공지능을 이용하 여 피부를 분석하는 방법에 관한 것이다."}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "일반적으로 다중분광이미지(multi-spectral image)는 파장의 범위가 다른 다수의 분광대(spectral bands)에 대 한 이미지를 의미하며, 다양한 파장대에서 촬영된 이미지를 이용하여 필요한 데이터를 추출할 수 있다. 이러한 다중분광이미지를 분석하면 비침습적으로 조직 등의 표적에 대한 정보를 얻을 수 있기 때문에, 표적에 대한 다 양한 특성을 진단하고 분석하는데 유용하게 사용되고 있으며, 피부 질환에 대한 진단을 위한 용도로서 사용될 수도 있다. 한편, 피부에 대한 빠른 분석을 위한 방법으로서, 인공지능을 이용한 영상 분석 방법을 적용하려는 시도가 이어 지고 있다. 정보의 디지털화 및 데이터 저장 기술의 발달에 따라, 대량의 데이터가 축적되어, 다양한 분야에서 인공지능 기술이 도입되어 활용되고 있다. 인공지능 기술의 한 종류인 머신러닝은 많은 수의 입력 데이터를 분 석하여, 확률적으로 대상을 분류하거나 특정 범위 내의 값을 예측하는 기술이다. 명확한 규칙에 의해 정해진 결 과값을 도출하는 전통적인 프로그래밍 방법과는 달리, 머신러닝은 많은 수의 입력 데이터를 경험적으로 분석하 여 확률적으로 결과값을 도출하는 방식으로 동작한다. 하지만 인공지능의 학습 및 분석 능력은 사용되는 데이터와 이미지 등에 따라서 에서 큰 차이가 발생하고 있으 며, 다중분광이미지를 이용하는 분석 과정에서의 분석 정확도를 높일 수 있는 방법이 요구되고 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 대한민국 등록특허 10-2265525"}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 전술한 종래 기술의 문제점을 해결하기 위한 것으로서 높은 정확도로 다중분광이미지를 이용하여 피 부 분석을 수행할 수 있는 방법을 제공하는데 그 목적이 있다."}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 목적을 달성하기 위한 본 발명에 의한 인공지능 기반의 피부 분석 방법은, 다중분광이미지를 포함하는 분 석용 이미지 데이터, 개인정보 데이터, 생체 데이터 및 기상 데이터를 포함하는 분석용 정보를 입력하는 정보 입력 단계; 개인정보와 생체 데이터를 가공한 제1메타데이터와 기상 데이터를 가공한 제2메타데이터를 생성하는 데이터 가공 단계; 및 분석용 이미지 데이터와 제1메타데이터 및 제2메타데이터를 이용하여 딥 러닝 기반의 인 공지능 알고리즘을 통해 피부에 대한 분석을 수행하는 피부 분석 단계;를 포함한다. 개인정보 데이터는 나이와 성별을 포함하고, 생체 데이터는 체온과 피부 수분도를 포함하며, 기상 데이터는 날 씨와 습도를 포함하는 것일 수 있다. 상기 피부 분석 단계에서, 분석용 이미지 데이터와 제1메타데이터 및 제2메타데이터에 각각 가중치를 부여하여 피부 분석을 수행하는 것일 수 있다. 상기 피부 분석 단계에서 분석된 결과를 이용하여 딥 러닝 기반의 인공지능 알고리즘을 통해 병원과 화장품 및 의약품 중에서 하나 이상의 추천 목록을 선정하는 추천 목록 선정 단계를 더 포함할 수 있다. 상기 분석용 이미지 데이터는 화이트타겟이 포함된 화이트LED이미지와 다중분광이미지이고, 상기 데이터 가공 단계에서, 분석용 이미지 데이터에 대한 영상 처리가 수행되며, 상기 영상 처리는, 화이트타겟이 포함된 화이트 LED이미지와 다중분광이미지를 획득하는 단계; 화이트LED이미지와 다중분광이미지를 그레이스케일로 변환하는 단계; 그레이스케일로 변환된 화이트LED이미지와 다중분광이미지에서 병변부위와 정상부위 및 화이트타겟을 ROI 로 추출하는 단계; 화이트타겟에 대한 ROI를 이용하여 이미지 보정을 위한 가중치를 도출하는 단계; 가중치를 이용하여 그레이스케일로 변환된 다중분광이미지에 대한 보정을 수행하는 단계를 포함할 수 있다. 이때, 가중치는 2개의 가중치로 구성되며, 첫 번째 가중치(W1)는 그레이스케일로 변환된 이미지들 각각에서 화 이트타겟에 포함된 픽셀의 최대 강도를 그 픽셀의 강도로 나눈 값이고, 두 번째 가중치(W2)는 각각의 이미지에 포함된 픽셀들이 나타내는 강도의 평균값을 파장대 별로 산출하여, 그 중 최대값을 각 이미지의 평균값으로 나 눈 값이며, 이미지 보정을 위한 보정강도는 각 픽셀이 가지는 원래 강도에 W1과 W2를 곱한 값인 것이 바람직하 다. 이미지 보정을 수행하기 전에, 그레이스케일로 변환된 화이트LED이미지와 다중분광이미지에서 피부가 아닌 부분 및 화이트타겟이 포함되지 않는 분석영역을 분리하는 단계를 더 수행하는 것이 좋다. 보정된 다중분광이미지에 대하여 정규화를 수행하는 단계를 더 포함할 수 있다. 이때, 보정된 다중분광이미지에서 병변부위의 보정강도에 대한 정규화와 정상부위의 보정강도에 대한 정규화를 수행하는 것일 수 있으며, 병변부위와 정상부위의 각각에 대하여 픽셀들 중에서도 최저강도와 최고강도를 추출 하고 다음의 수식을 통해서 정규화 강도를 도출하는 것일 수 있다. 정규화 강도 = (보정강도-최저강도) / (최고강도-최저강도) 보정된 다중분광이미지에 대하여 수행된 정규화를 이용하여 질환의 심각 정도를 색으로 반영한 질환 심각 정도 이미지를 생성하는 단계를 더 포함할 수 있다. 이때, 보정된 다중분광이미지의 각 픽셀에 대하여 정규화도를 도출하고, 이를 유클리드 거리 계산을 통해서 각 픽셀에 대하여 피부 질환 심각 정도를 부여하며, 피부 질환 심각 정도에 대응되는 색상을 부여한 뒤에 각 픽셀 에 반영하여 질환 심각 정도 이미지를 생성하는 것일 수 있다. 분석 결과를 시각적으로 표시하는 결과 표시 단계를 더 포함하며, 결과 표시 단계에서 질환 심각 정도 이미지를 표시할 수 있다."}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "상술한 바와 같이 구성된 본 발명은, 인공지능에 의해서 피부 분석을 수행하는 과정에서 분석용 이미지 데이터 와 함께 메타데이터를 이용함으로써, 다중분광이미지를 이용한 피부 분석의 정확도가 향상되는 효과가 있다."}
{"patent_id": "10-2022-0040296", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "첨부된 도면을 참조하여 본 발명에 따른 실시예를 상세히 설명한다. 그러나 본 발명의 실시형태는 여러 가지의 다른 형태로 변형될 수 있으며, 본 발명의 범위가 이하 설명하는 실 시형태로만 한정되는 것은 아니다. 도면에서의 요소들의 형상 및 크기 등은 보다 명확한 설명을 위해 과장될 수 있으며, 도면상의 동일한 부호로 표시되는 요소는 동일한 요소이다. 그리고 명세서 전체에서, 어떤 부분이 다른 부분과 \"연결\"되어 있다고 할 때 이는 \"직접적으로 연결\"되어 있는 경우뿐만 아니라 그 중간에 다른 소자를 사이에 두고 \"전기적으로 연결\"되어 있는 경우도 포함한다. 또한, 어 떤 부분이 어떤 구성요소를 \"포함\" 또는 \"구비\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성 요소를 제외하는 것이 아니라 다른 구성요소를 더 포함하거나 구비할 수 있는 것을 의미 한다. 또한, \"제1\", \"제2\" 등의 용어는 하나의 구성요소를 다른 구성요소로부터 구별하기 위한 것으로 이들 용어들에 의해 권리범위가 한정되어서는 아니 된다. 예를 들어, 제1 구성요소는 제2 구성요소로 명명될 수 있고, 유사하 게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 도 1은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 설명하기 위한 도면이다. 본 실시예의 인공지능 기반의 피부 분석 방법은, 가장 먼저 피부 분석을 위한 분석용 정보를 입력받는 정보 입 력 단계가 수행된다. 본 실시예에서 사용되는 분석용 정보는, 분석용 이미지 데이터, 개인정보 데이터, 생체 데이터 및 기상 데이터 를 포함한다.분석용 이미지 데이터는 피부를 촬영한 디지털 이미지 데이터이며, 본 실시예에서는 다중분광이미지를 필수적으 로 포함한다. 일반적으로 다중분광이미지는 3개에서 15개 사이의 분광대를 가지며, 본 실시예에서는 400nm, 435nm, 470nm, 505nm, 540nm, 590nm, 625nm, 660nm, 700nm 파장의 LED를 사용하여 촬영된 다중분광이미지를 사용하고 있다. 다중분광이미지의 구성은 400~700nm의 파장대에서 3개 이상의 분광대를 사용하는 범위에서 다양하게 조절할 수 있지만, 바람직하게는 본 실시예에서 제시한 9개 파장대에 대한 이미지를 이용하는 것이 좋다. 이러한 다중분광이미지만을 이용할 수도 있겠으나, 본 실시예에서는 분석 효율을 높이기 위하여 영상 처리를 수 행하고 있으며, 영상 처리 과정에서 필요한 백색LED(white led)를 광원으로 사용하여 촬영된 화이트LED이미지를 더 포함한다. 또한, 영상 처리를 위하여 다중분광이미지와 화이트LED이미지는 화이트타겟(white target)이 함께 촬영된다. 개인정보 데이터는 분석 대상자에 대한 정보로서 나이와 성별 등의 정보를 포함하고, 생체 데이터는 분석 대상 자의 생체 정보로서 체온과 피부 수분도 등을 포함한다. 이와 같은, 분석 대상자에 대한 정보를 함께 사용하면 이미지만을 이용하여 분석하는 경우보다 분석의 정확도가 높아진다. 기상 데이터는 분석용 이미지 데이터와 생체 데이터가 생성된 순간 또는 생성된 날짜의 기상에 대한 정보이며, 날씨와 습도 등을 포함한다. 분석용 이미지와 생체 데이터가 생성될 때에 환경적인 요인에 의해서 데이터에 차 이가 발생할 수 있기 때문에, 기상 데이터를 함께 사용하면 이미지 데이터와 생체 데이터만을 이용하여 분석하 는 경우보다 분석의 정확도가 향상된다. 입력된 분석용 이미지 데이터, 개인정보 데이터, 생체 데이터 및 기상 데이터를 분석에 이용하기 위하여 가공하 는 데이터 가공 단계를 수행한다. 분석용 이미지 데이터는 이미지 형태이므로. 디지털 영상에 대한 영상처리를 수행하여, 인공지능 알고리즘의 일 형태인 CNN 모델에 적합하게 가공함으로써, 피부 분석의 정확도 및 인공지능 알고리즘의 학습 효율을 높일 수 있다. 개인정보 데이터, 생체 데이터 및 기상 데이터는 텍스트 형태이므로, 라벨링과 스케일링을 통한 인코딩 과정을 통해서 인공지능 알고리즘의 일 형태인 LSTM 모델에 적합하게 가공한다. 이때, 데이터의 특징 면에서 상관관계가 있는 개인정보 데이터와 생체 데이터를 함께 가공하여 제1메타데이터를 생성하고, 데이터의 특징 면에서 차이가 있는 기상 데이터는 별도로 가공하여 제2메타데이터를 생성한다. 개인정보 데이터와 생체 데이터를 함께 가공하여 제1메타데이터를 생성하고, 기상 데이터를 가공하여 제2메타데 이터를 생성하는 구체적인 과정은 특별히 한정되지 않으며, 본 발명의 특징을 해지치 않는 범위에서 인공지능 알고리즘에 메타데이터로 사용할 수 있도록 가공하는 다양한 형태가 적용될 수 있다. 본 실시예에서 수행된 분석용 이미지 데이터의 영상 처리를 구체적으로 설명하면 다음과 같다. 도 2는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정을 설명하기 위한 도면이다. 먼저, 본 발명의 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정은 화이트타겟(white target) 을 포함하는 다중분광이미지와 화이트LED이미지를 획득한다. 다중분광이미지와 화이트LED이미지는 앞서 설명한 9개 파장대에 대한 이미지와 백색LED를 광원으로 사용하여 촬 영된 이미지이다. 화이트타겟은 이미지 보정 과정에서 사용되는 흰색의 기준을 정하기 위한 부분이며, 촬영 대상 피부와 함께 촬 영되어 이미지에 일부로 포함된다. 이러한 이미지는 현장에서 직접 촬영된 이미지일 수도 있고, 다른 곳에서 촬영되어 전송받은 이미지일 수도 있 다. 도 3은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 획득된 이미지들을 나타낸다. 가장 왼쪽에는 백색 LED를 광원으로 하여 촬영된 화이트LED이미지이고, 오른쪽에는 400nm, 435nm, 470nm, 505nm, 540nm, 590nm, 625nm, 660nm, 700nm 파장의 LED를 사용하여 촬영된 다중분광이미지이다. 각 이미지의 오른쪽에는 화이트타겟이 함께 촬영되어 있는 것을 확인할 수 있다. 다음으로 획득된 이미지들을 그레이스케일로 변환한다. 획득된 이미지들을 그레이스케일로 변환하는 과정은 각 이미지별로 강도(Intensity) 값을 도출하기 위하여 수행 된다. 도 4는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 획득된 이미지들을 그레이스케일로 변환한 결과를 나타낸다. 도시된 것과 같이, 화이트LED이미지와 모든 다중분광이미지에 대하여 그레이스케일로 변환을 수행한다. 그리고 그레이스케일로 변환된 이미지들에서 병변부위와 정상부위 및 화이트타겟에 해당하는 ROI(관심영역, Region of Interest)를 추출한다. 본 발명은 그레이스케일로 변환된 화이트LED이미지와 모든 다중분광이미지에서 ROI를 추출함에 있어서, 피부질 환이 발생한 병변부위와 피부질환이 발생하지 않은 정상부위 및 화이트타겟의 3개 영역을 ROI로 추출한다. 도 5는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스 케일로 변환된 이미지에서 ROI 지점을 설명하기 위한 도면이고, 도 6은 본 발명의 실시예에 따른 인공지능 기반 의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스케일로 변환된 각 이미지에서 추출된 ROI를 표 시한 도면이다. 도 5는 ROI 추출을 설명하기 위하여 그레이스케일로 변환된 화이트LED이미지에서 ROI 지점을 표시한 결과를 나 타낸다. 오른쪽 중간에 표시된 네모부분이 피부질환이 발생한 병변부위이고, 왼쪽 아래쪽에 표시된 네모부분이 피부질환이 발생하지 않은 정상부위이며, 오른쪽 끝부분이 화이트타겟이다. 도 6은 그레이스케일로 변환된 모든 이미지에서 병변부위(ACNE)와 화이트타겟(White Target) 및 정상부위 (Normal)를 추출한 결과를 나타낸다. 그리고 추출된 ROI 중에서 화이트타겟에서 추출된 강도(intensity)값을 이용하여 이미지 보정을 위한 가중치 (weight factor)를 도출한다. 본 실시예에서는 이미지 보정을 위한 각 픽셀에 대한 가중치로서 다음의 2개를 도출한다. 첫 번째 가중치 W1은 각 픽셀의 강도(pixel intensity)로 해당 파장의 이미지에 포함된 픽셀들 중에서 가강 강 도가 높은 최대 강도(max intensity)를 나눈 값이다. 이때, 각 픽셀의 강도는 해당 파장의 이미지에 포함된 화 이트타겟의 강도보다 클 수는 없으므로, 화이트타겟에 해당하는 픽셀들 중에서 가장 높은 값을 최대 강도로 선 택할 수 있다. W1 = max intensity / pixel intensity 상기한 수식을 통해서 각 픽셀에 대한 첫 번째 가중치인 W1을 도출한다. 두 번째 가중치 W2는 각 파장의 이미지에 포함된 픽셀들이 나타내는 강도의 평균값을 산출하고, 파장별(이미지 별)로 도출된 평균값 중에 최대값을 각 파장별 평균값으로 나누어 줌으로써, 강도 값을 평탄화(flat)되게 하는 수치수치인 W2를 파장별로 도출한다. 예를 들면, 다음의 표 1은 각 파장별로 전체 픽셀의 강도에 대한 평균값을 산출한 결과 및 이를 이용하여 도출 된 W2를 나타낸다. 표 1 분광대 전체 픽셀 강도의 평균 W2 400nm 22.87 5.95 435nm 46.61 2.92 470nm 42.46 3.21 505nm 33.26 4.09 540nm 30.86 4.41 590nm 50.40 2.70 625nm 104.84 1.30660nm 132.16 1.03 700nm 136.15 1.00 표 1에 파장발 강도의 평균값 중에 가장 큰 것은, 700nm 파장대의 이미지에서 얻어진 136.15이다. 따라서, 135.15를 각 파장별 평균값으로 나누어서 W2를 도출한다. 도출된 2개의 가중치인 W1과 W2를 이용하여 이미지에 대한 보정을 수행하며, 이때, 본 발명에서 획득된 이미지 는 화이트타겟이 포함되고, 피부 이외의 부분이 포함될 수도 있기 때문에, 이미지에서 분석영역을 분리할 필요 가 있다. 도 7은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스 케일로 변환된 각 이미지에서 분석영역을 분리하는 것을 설명하기 위한 도면이고, 도 8은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스케일로 변환된 각 이미지에 서 분석영역을 분리한 도면이다. 도 7에 도시된 그레이스케일로 변환된 화이트LED이미지에서 왼쪽부분은 사람의 피부가 아닌 배경이 촬영되었고, 오른쪽에는 화이트타겟이 촬영되었다. 따라서 분석대상인 피부 부분만으로 분석영역을 분리하면 안쪽에 표시된 네모 부분이 된다. 도 8은 그레이스케일로 변환된 모든 이미지에서 분석영역을 분리한 이미지를 나타낸다. 분리된 분석영역에 대하여, 앞서 도출된 2개의 가중치인 W1과 W2를 이용하여 보정을 수행한다. 그레이스케일로 변환된 각 이미지의 모든 픽셀에 대하여 보정을 수행하면, 각 픽셀에 대하여 보정된 보정강도 (calibration intensity)는 각 픽셀이 가지는 원래 강도(original intensity)에 W1과 W2를 곱한 값이다. calibration intensity = original intensity × W1 × W2 도 9는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 분리된 분석영역에 보정을 수행한 결과를 도시한다. 앞서 도출된 2개의 가중치인 W1과 W2를 이용하여 그레이스케일로 변환된 다중분광이미지의 분석영역에 대하여 보정을 수행하면, 그레이스케일로 변환되었던 도 4의 다중분광이미지와는 차이가 있는 보정 이미지를 얻을 수 있다. 이와 같은 방법으로 보정된 다중분광이미지를 사용하여 인공지능의 학습과 분석을 수행하면, 피부질환에 대한 학습 및 분석 효율이 향상된다. 이상의 영상처리를 통해서 다중분광이미지를 이용한 인공지능의 학습과 분석 효율이 향상되지만, 정상부위와 병 변부위의 차이를 더욱 부각시키는 방법으로서 정규화(Normalization)를 진행할 수 있다. 파장대별로 정규화 강도(normalized intensity)를 도출하기 위하여, 보정된 다중분광이미지들 각각에 대하여 추 출된 정상부위를 구성하는 픽셀들 중에서 최저강도(min-intensity)외 최고강도(max-intensity)를 추출하고, 병 변부위를 구성하는 픽셀들 중에서도 최저강도와 최고강도를 추출한다. 그리고 정상부위와 병변부위 각각에 대하 여 다음의 수식을 통해서 정규화 강도를 도출한다. 정규화 강도 = (보정강도-최저강도) / (최고강도-최저강도) 도 10은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 정상부 와 병변부위에 대한 정규화를 진행한 결과를 나타내는 그래프이다. 정규화 과정을 통해서 정상부위(normal)와 병변부위(acne)의 강도 값이 0~1 사이의 값으로 조정되었고, 다중분 광이미지의 파장대별로 정상부위와 병변부위의 상대적인 차이를 도출하기에 쉬운 형태가 된 것을 알 수 있다. 나아가 정상부위와 병변부위에 대한 정규화된 강도를 통해서, 중간값에 대한 등급을 부여함으로써 분석영역의 모든 부분에 대한 등급부여를 수행할 수 있고, 이를 이용하여 질환 심각 정도 이미지(ratiomatric spectral image)를 생성할 수 있다. 도 11은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 정상부 와 병변부위에 대한 정규화를 바탕으로 등급을 부여한 결과를 나타낸다. 본 실시예에서는 피부 질환 심각 정도를 5단계로 구분하였고, 1단계인 정상부위(Normal)의 강도값에서 5단계인 병변부위(Acne)의 강도값의 사이를 균분하여 2단계(Level2)와 3단계(Level3) 및 4단계(Level4)로 세분화하였다. 이와 같은, 단계의 구분은 그리고 분석영역의 각 픽셀에 대하여 정규화강도를 도출하고, 이를 유클리드 거리 계산을 통해서 각 픽셀에 대 하여 피부 질환 심각 정도를 부여할 수 있으며, 피부 질환 심각 정도에 대응되는 색상을 부여한 뒤에 각 픽셀에 반영하면 분석영역에 대한 질환 심각 정도 이미지(ratiomatric spectral image)를 생성할 수 있다. 도 12는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 분석영 역에 대한 질환 심각 정도 이미지를 생성한 결과이다. ROI 추출하는 과정에서 분석영역의 일부 픽셀만을 사용한 것과 달리, 정규화 강도를 이용하여 생성된 질환 심각 정도 이미지는 분석영역 전체에 대하여 피부 질환의 심각 정도를 표시하고 있다. 특히, 정상부위는 녹색이고 병 변부위는 빨간색으로 나타내며, 이외 부분도 색상을 통해서 구분이 되기 때문에, 피부 질환이 발생한 병변부위 의 위치와 면적뿐만이 아니라, 피부질환의 영향을 받는 부위들까지 쉽게 확인이 가능한 효과가 있다. 이러한 질환 심각 정도 이미지는 분석 결과로서 제시하여 분석 대상자의 이해를 돕는 용도로 활용될 수도 있다. 개인정보 데이터와 생체 데이터를 가공하여 생성된 제1메타데이터와 기상 데이터는 가공하여 생성된 제2메타데 이터 및 영상 처리된 이미지 데이터를 이용하여 피부에 대한 분석을 수행한다. 본 실시예에서 피부에 대한 분석은 딥 러닝 기반의 인공지능 알고리즘을 통해 수행되며, 딥 러닝 기반의 인공지 능 알고리즘은 개인정보 데이터와 생체 데이터를 가공하여 생성된 제1메타데이터와 기상 데이터는 가공하여 생 성된 제2메타데이터 및 영상 처리된 이미지 데이터로 구성된 학습용 데이터를 이용하여 미리 학습된다. 인공지능 알고리즘이 분석을 위하여 이미지 데이터와 제1메타데이터 및 제2메타데이터를 사용함에 있어서 각 데 이터들에 대하여 가중치를 부여할 수 있다. 일반적으로 이미지 데이터에 대하여 높은 가중치가 부여되고, 메타 데이터인 제1메타데이터와 제2메타데이터는 상대적으로 낮은 가중치가 부여된다. 다만, 각 데이터에 부여된 가 중치는 고정되지 않고 변경될 수 있으며, 제1메타데이터와 제2메타데이터에 분석 과정에 큰 영향을 미치는 사정 이 있는 경우에는 가중치가 높아질 수 있다. 인공지능 알고리즘은 특별히 한정되지 않지만, 이미지 데이터의 경우에는 이미지 처리에 뛰어난 CNN 모델을 사 용하는 것이 바람직하고, 텍스트 형태인 제1메타데이터와 제2메타데이터는 LSTM 모델을 적용하는 것이 바람직하 다. 본 실시예의 인공지능 기반의 피부 분석 방법은, 피부에 대한 분석 결과를 이용하여 분석 대상자에게 유용한 정 보를 제공하기 위하여 추천 목록 선정 단계를 수행한다. 구체적으로 병원과 화장품 및 의약품 중에서 하나 이상의 추천 목록을 선정하며, 이러한 추천 목록의 선정은 딥 러닝 기반의 인공지능 알고리즘으로 수행된다. 추천을 위한 인공지능 알고리즘은 다양한 병원에 대한 정보를 가지고 있으며, 피부에 대한 분석 결과에서, 피부 질환 등의 문제점이 확인되면 해당 피부 질환이나 문제점에 대한 치료와 관리에 적합한 병원을 선정하여 추천할 수 있다. 또한, 추천을 위한 인공지능 알고리즘은 다양한 화장품에 대한 정보를 가지고 있으며, 피부 질환이나 피부 타입 등의 정보를 기초로 하여 적합한 화장품을 선정하여 추천할 수 있다. 나아가 추천을 위한 인공지능 알고리즘은 다양한 의약품에 대한 정보를 가지고 있으며, 피부 질환이나 피부 타 입 등의 정보를 기초로 하여 적합한 의약품을 선정하여 추천할 수 있다. 이상에서 살펴본 피부 분석이 끝나면, 분석 결과를 모니터나 종이 등에 출력하여 시각적으로 표시하는 결과 표 시 단계를 수행한다. 분석 대상자가 분석 결과를 직접 확인하거나, 검사자가 분석 결과를 설명하는 과정에서 참고용으로 사용될 수 있다. 분석 결과에는 피부 분석에 대한 결과가 표시되며, 질환 심각 정도 이미지를 포함하여 표시할 수 있다. 또한, 추천 목록 선정 단계에서 선정된 병원과 화장품 및 의약품에 대한 정보를 포함하여 표시할 수 있다. 이상 본 발명을 바람직한 실시예를 통하여 설명하였는데, 상술한 실시예는 본 발명의 기술적 사상을 예시적으로 설명한 것에 불과하며, 본 발명의 기술적 사상을 벗어나지 않는 범위 내에서 다양한 변화가 가능함은 이 분야에 서 통상의 지식을 가진 자라면 이해할 수 있을 것이다. 따라서 본 발명의 보호범위는 특정 실시예가 아니라 특 허청구범위에 기재된 사항에 의해 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술적 사상도 본 발명의 권리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2022-0040296", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 설명하기 위한 도면이다. 도 2는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정을 설명하기 위한 도면이다. 도 3은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 획득된 이미지들을 나타낸다. 도 4는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 획득된 이미지들을 그레이스케일로 변환한 결과를 나타낸다. 도 5는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스 케일로 변환된 이미지에서 ROI 지점을 설명하기 위한 도면이다. 도 6은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스 케일로 변환된 각 이미지에서 추출된 ROI를 표시한 도면이다. 도 7은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스 케일로 변환된 각 이미지에서 분석영역을 분리하는 것을 설명하기 위한 도면이다. 도 8은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 그레이스 케일로 변환된 각 이미지에서 분석영역을 분리한 도면이다. 도 9는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 분리된 분석영역에 보정을 수행한 결과를 도시한다. 도 10은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 정상부 와 병변부위에 대한 정규화를 진행한 결과를 나타내는 그래프이다. 도 11은 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 정상부 와 병변부위에 대한 정규화를 바탕으로 등급을 부여한 결과를 나타내는 그래프이다. 도 12는 본 발명의 실시예에 따른 인공지능 기반의 피부 분석 방법을 위한 이미지를 처리하는 과정에서 분석영 역에 대한 질환 심각 정도 이미지를 생성한 결과를 도시한 도면이다."}
