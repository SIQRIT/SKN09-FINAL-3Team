{"patent_id": "10-2024-0028044", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0177699", "출원번호": "10-2024-0028044", "발명의 명칭": "근접문자 탐지 기반 한문고서 서순정렬 방법 및 장치", "출원인": "한국전자통신연구원", "발명자": "이아람"}}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "한문고서 서순정렬 장치가, 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정하는 단계;상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지방법을 이용하여, 현재 분석 대상 주열의 본문과 우세주에 해당하는 박스로 구성된 제1 이동경로와, 상기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이동경로를 생성하는 다중 스캔 단계; 및상기 한문고서 서순정렬 장치가, 상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스의 합집합을 구하여 현재 분석 대상 주열의 박스 리스트를 생성하는 단계;를 포함하는 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 다중 스캔 단계는,상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지방법을 이용하여, 상기 분석 대상 박스 중에서 최우상단 박스를 최초의 기준박스인 시작점으로 하고, 상기 분석대상 박스 중에서 최우하단 박스를 종점으로 하는 제1 하향 스캔을 통해 상기 제1 이동경로를 생성하는 단계;상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 상기 최우상단 박스를 최초의 기준박스로 설정하고, 근접 박스 연속 탐지 방법을 이용한 제2 하향 스캔을 통해 현재 분석 대상 주열의 최좌하단 박스를 판단하는 단계; 및상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지방법을 이용하여, 상기 최좌하단 박스를 최초의 기준박스인 시작점으로 하고, 현재 분석 대상 주열의 최좌상단박스를 종점으로 하는 제2 상향 스캔을 통해 제2 이동경로를 생성하는 단계를 포함하는 것인 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서, 상기 다중 스캔 단계는,상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 상기 분석 대상 박스중에서 최우측 박스를 기준으로, 근접 박스 연속 탐지 방법을 이용한 제1 상향 스캔을 통해 상기 최우상단 박스를 판단하는 단계를 더 포함하는 것인 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 분석 대상 박스를 선정하는 단계는,상기 한문고서 서순정렬 장치가, 상기 OCR 검출박스 중에서, 과거 분석 대상 주열의 박스 리스트에 포함된 박스를 제외하여 상기 분석 대상 박스를 선정하는 것인 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서,상기 한문고서 서순정렬 장치가, 상기 현재 분석 대상 주열의 박스 리스트를 기초로 상기 원문 이미지에서 현재공개특허 10-2024-0177699-3-분석 대상 주열과 다음 분석 대상 주열 간의 경계를 형성하는 주열 라인 분할 단계를 더 포함하는 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 한문고서 서순정렬 장치가, 상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스를 기초로, 상기 현재 분석 대상 주열의 박스 리스트에 포함된 박스를 본문, 좌세주 및 우세주로 분류하는 단계; 상기 한문고서 서순정렬 장치가, 상기 분류 결과를 기초로 상기 원문 이미지에서 현재 분석 대상 주열의 본문부와 세주부의 경계를 형성하는 세부열 라인분할 단계; 및상기 한문고서 서순정렬 장치가, 상기 본문부와 세주부의 경계를 기초로 상기 현재 분석 대상 주열의 박스 리스트에 포함된 박스에 대응하는 자형의 서순을 결정하는 단계를 더 포함하는 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 한문고서 서순정렬 장치가, 상기 서순에 따라 상기 자형을 정렬하여 현재 분석 대상 주열의 디지털 텍스트를 생성하는 단계를 더 포함하는 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서, 상기 근접 박스 연속 탐지 방법은,상기 분석 대상 박스 중에서 최초의 기준박스를 설정하고,기준박스의 종방향에 대해서는 선탐지 기법으로 근접 박스를 탐지하고, 기준박스의 횡방향에 대해서는 점탐지기법으로 근접 박스를 탐지하며, 탐지 결과를 바탕으로 소정의 기준에 따라 새로운 기준박스를 결정하는 것을반복하며,소정의 조건에 도달하면 탐지를 종료하는 것이며,상기 선탐지 기법은,상기 분석 대상 박스 중에서 기준박스의 x범위에 해당하는 영역을 가지고 있는 박스를 탐지하는 기법이며,상기 점탐지 기법은,상기 분석 대상 박스 중에서, 박스 중심의 y좌표가 기준박스의 y범위에 포함되는 박스를 탐지하는 기법인 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제2항에 있어서, 상기 제1 이동경로를 생성하는 단계는,상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스 중에서, 기준박스의 하부에 존재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의 박스를 선정하고, 선정된 3개의 박스의 y범위와 중심의 y좌표를 기초로 새로운기준박스를 결정하는 것을 포함하는 것인 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제2항에 있어서, 상기 제2 이동경로를 생성하는 단계는,상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스 중에서, 기준박스의 상부에 존재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의 박스를 선정하고, 선정된 3개의 박스의, y범위, 중심의 y좌표 및 상기 제1 이동경로에 포함되는지 여부를 기초로 새로운 기준박스를 결정하는 것을 포함하는 것공개특허 10-2024-0177699-4-인 한문고서 서순정렬 방법."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "한문고서 원문 이미지의 OCR 결과물과, 컴퓨터에서 판독 가능한 명령들을 저장하는 메모리; 및상기 OCR 결과물을 읽어들이고, 상기 명령들을 실행하도록 구현되는 적어도 하나의 프로세서를 포함하고,상기 적어도 하나의 프로세서는, 상기 명령들을 실행함으로써,상기 OCR 결과물에 포함된 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정하고, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 현재 분석 대상 주열의 본문과 우세주에 해당하는 박스로 구성된 제1 이동경로와, 상기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이동경로를 생성하며,상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스의 합집합을 구하여 현재 분석 대상 주열의 박스 리스트를 생성하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제11항에 있어서, 상기 적어도 하나의 프로세서는, 상기 제1 이동경로와 상기 제2 이동경로를 생성하는 과정에서, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 상기 분석 대상 박스 중에서 최우상단 박스를 최초의 기준박스인 시작점으로 하고, 상기 분석 대상 박스 중에서 최우하단 박스를 종점으로 하는 제1 하향 스캔을 통해 상기 제1 이동경로를 생성하고,상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 상기 최우상단 박스를 최초의 기준박스로 설정하고,근접 박스 연속 탐지 방법을 이용한 제2 하향 스캔을 통해 현재 분석 대상 주열의 최좌하단 박스를 판단하며,상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 상기 최좌하단박스를 최초의 기준박스인 시작점으로 하고, 현재 분석 대상 주열의 최좌상단 박스를 종점으로 하는 제2 상향스캔을 통해 제2 이동경로를 생성하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서, 상기 적어도 하나의 프로세서는, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 상기 분석 대상 박스 중에서 최우측 박스를 기준으로,근접 박스 연속 탐지 방법을 이용한 제1 상향 스캔을 통해 상기 최우상단 박스를 판단하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제11항에 있어서, 상기 적어도 하나의 프로세서는, 상기 OCR 검출박스 중에서, 과거 분석 대상 주열의 박스 리스트에 포함된 박스를 제외하여 상기 분석 대상 박스를 선정하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제11항에 있어서, 상기 적어도 하나의 프로세서는, 상기 현재 분석 대상 주열의 박스 리스트를 기초로 상기 원문 이미지에서 현재 분석 대상 주열과 다음 분석 대공개특허 10-2024-0177699-5-상 주열 간의 경계를 형성하는 작업을 추가적으로 수행하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제11항에 있어서, 상기 적어도 하나의 프로세서는,상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스를 기초로, 상기 현재 분석 대상 주열의박스 리스트에 포함된 박스를 본문, 좌세주 및 우세주로 분류하고,상기 분류 결과를 기초로 상기 원문 이미지에서 현재 분석 대상 주열의 본문부와 세주부의 경계를 형성하며,상기 본문부와 세주부의 경계를 기초로 상기 현재 분석 대상 주열의 박스 리스트에 포함된 박스에 대응하는 자형의 서순을 결정하는 작업을 추가적으로 수행하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제16항에 있어서, 상기 적어도 하나의 프로세서는,상기 서순에 따라 상기 자형을 정렬하여 현재 분석 대상 주열의 디지털 텍스트를 생성하는 작업을 추가적으로수행하도록 구성되는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제11항에 있어서, 상기 근접 박스 연속 탐지 방법은,상기 분석 대상 박스 중에서 최초의 기준박스를 설정하고,기준박스의 종방향에 대해서는 선탐지 기법으로 근접 박스를 탐지하고, 기준박스의 횡방향에 대해서는 점탐지기법으로 근접 박스를 탐지하며, 탐지 결과를 바탕으로 소정의 기준에 따라 새로운 기준박스를 결정하는 것을반복하며,소정의 조건에 도달하면 탐지를 종료하는 것이며,상기 선탐지 기법은,상기 분석 대상 박스 중에서 기준박스의 x범위에 해당하는 영역을 가지고 있는 박스를 탐지하는 기법이며,상기 점탐지 기법은,상기 분석 대상 박스 중에서, 박스 중심의 y좌표가 기준박스의 y범위에 포함되는 박스를 탐지하는 기법인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제12항에 있어서, 상기 적어도 하나의 프로세서는, 상기 제1 이동경로를 생성하는 과정에서,상기 분석 대상 박스 중에서, 기준박스의 하부에 존재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의박스를 선정하고, 선정된 3개의 박스의 y범위와 중심의 y좌표를 기초로 새로운 기준박스를 결정하는 작업을 수행하는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제12항에 있어서, 상기 적어도 하나의 프로세서는, 공개특허 10-2024-0177699-6-상기 제2 이동경로를 생성하는 과정에서,상기 분석 대상 박스 중에서, 기준박스의 상부에 존재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의박스를 선정하고, 선정된 3개의 박스의, y범위, 중심의 y좌표 및 상기 제1 이동경로에 포함되는지 여부를 기초로 새로운 기준박스를 결정하는 작업을 수행하는 것인 한문고서 서순정렬 장치."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 근접문자 탐지 기반 한문고서 서순정렬 방법 및 장치에 관한 것이다. 본 발명에 따른 한문고서 서순정 렬 방법은, 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정하는 단계와, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 현재 분석 대상 주열의 본문과 우세주에 해당하는 박스로 구성된 제1 이동경로와, 상기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이 동경로를 생성하는 단계와, 및 상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스의 합집합을 구하여 현재 분석 대상 주열의 박스 리스트를 생성하는 단계를 포함한다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 문헌 이미지로부터 디지털 텍스트를 자동으로 생성하는 기술에 관한 것이다. 더욱 상세하게는, 본 발 명은 문헌 이미지에 포함된 문자의 서순을 자동으로 정렬하는 방법과 장치에 관한 것이다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "2023년을 기준으로 국내 한문고서 보유량은 300만 권 이상으로 집계된다. 1999년부터 한국학 자료의 디지털화는 국책사업의 일환으로 추진되었으나, 소수 한자 전문가에 의한 개별 자형 판별과 수동 전산화 과정의 비효율성으 로 인해 전체 보유 고문헌량 대비 디지털 텍스트 구축 규모가 미미한 실정이다. 이러한 상황을 극복하기 위해, 이미지 내부에 포함된 텍스트를 자동으로 검출하고 인식하는 인공지능 기반 광학 문자인식(OCR, Optical Character Recognition) 기술이 대안으로 부상하고 있으며, 수백자에 달하는 개별 한자 들의 정보를 일괄적으로 추출하는 것이 가능하게 되었다. 도 1은 OCR 기반의 고문헌 디지털 텍스트화 프로세스를 나타낸 도면이다. 우선, 고서 원본을 스캔하거나 촬 영하여 고서의 디지털 이미지를 획득한다. OCR 알고리즘은 고서의 디지털 이미지 내의 각 문자에 대한 위치(x, y)와 크기(w, h) 정보를 포함하는 바운딩 박스(bounding box, 13)를 형성하고 자형의 종류를 추론(인식)할 수 있다. 추론 결과는 자형과 그 위치(x, y) 및 크기(w, h)를 포함한다. 그러나 해당 추론 결 과는 개별 한자들에 대한 독립적인 정보만을 제공할 뿐 그들의 연속적 집합인 문장을 재구성하지 못하며, 후속 단계인 번역의 과정에 직접적으로 사용되는 디지털 텍스트를 생성하기 위해서는 인력 기반 수동 서순 정렬이 요구되는 실정이다. 이와 같은 수동적인 후처리 과정은 전체 고문헌 디지털화 과정의 병목으로 작용하여 작업시간과 비용을 증가시키며 이로 인해 OCR 기술의 잠재력이 충분히 활용되지 못하고 있는 문제가 있다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "배경기술", "item": 2, "content": "도 2a 및 도 2b는 고문헌의 서순을 설명하기 위한 도면이다. 도 2a는 본문만을 포함한 원문 이미지이며, 도 2b 는 본문과 세주가 혼용된 원문 이미지를 나타낸다. 한자문화권에 속한 국가의 고문헌들은 대부분의 기록이 한자 로 남겨졌을 뿐 아니라, 도 2a와 같이 우측열부터 위에서 아래로 쓰여진 후 좌측으로 열을 옮겨가는 우종서의 형식을 따른다. 도 2b는 본문(22, 24)과 세주(23-1, 23-2)가 포함된 원문 이미지이다. 도 2b에서 참조부호 25는 주열(main column)을 나타낸다. 고문헌의 구조 중 세주는, 도 2b와 같이 본문의 단일 열에서 비교적 작은 크기의 글자들이 두 개의 열로 분화되는 부분을 지칭한다. 세주는 앞선 본문에 대한 보충 설명인 주석의 역할을 한다. 기존의 인력 기반 고문헌 디지털화 과정에서는 예산과 시간의 제한으로 인해 세주를 제외하고 본문만을 번역하 는 경우가 많았다. 그러나 역사학 연구에 있어서는 세주가 중요한 정보를 전달하는 경우도 있으므로, 세주를 포 함한 효율적인 완역에 대한 기술 개발이 필요하다. 대표적인 예로 1454년 편찬된 신증동국여지승람의 우산도(독 도)와 울릉도에 대한 기록 중 \"두 섬은 서로 거리가 멀지 않아서 날씨가 맑으면 바라볼 수 있다(二島相去不遠, 風日淸明, 則可望見)\" 라는 구절이 세주에서 발견되어 대한민국의 독도 영유권 주장에 강력한 근거로 제시되고 있다. 한편, 본문만이 포함된 원문 이미지(도 2a)와 달리, 세주가 혼합된 원문 이미지(도 2b)는 화살표와 같이 서순 의 방향이 다소 모호하다. 일반적으로 우종서 서순진행 중 세주가 출현할 경우 해당 세주 군집 내에서 우측 의 세주열(우세주, 23-1)을 우선적으로 읽은 뒤 좌측 세주열(좌세주, 23-2)로 이동해야 하며, 도 2b의 예시의경우 서순이 '己亥先生三十九歲十月'로 되어야 한다(22, 23-1, 23-2, 24의 순서임). 그러나 단순히 우종서 원칙을 기반으로, 오른쪽에서 왼쪽 방향(x축) 또는 위에서 아래 방향(y축)에 따라 정렬될 경우, 결과는 각각 '先生三己亥十月十九歲', '己亥十先九生歲三十月'으로 나타나 오독이 발생한다. 심지어, 이 미지 내 문자들의 행과 열의 정렬이 완벽하지 않을 경우 그 인식 결과의 예측이 더욱 어려우며 세주가 없는 도 2a의 경우도 동일한 문제가 발생할 수 있다. 이러한 이유로 원문 이미지 내의 행(횡서의 경우) 또는 열(종서의 경우)을 분할하는 라인분할과 각 분할요소 내의 문자 서순을 배정하는 알고리즘에 관하여 다음과 같은 연구가 수행되었다. 원문 이미지의 라인분할은 크게 탑다운(top-down)과 바텀업(bottom-up)의 방식으로 나눌 수 있다. 전자의 경우 이미지 전체를 대상으로 구획을 설정하는 방식이고, 후자의 경우 사전에 검출된 개별 문자들의 위치정보를 기반 으로 군집화를 실행하는 방식이다. 초기의 탑다운 라인분할 방식인 픽셀 투영 프로파일(pixel projection profile) 기법(비특허문헌 1)은 바이너리 이미지 내 픽셀들이 한 축으로 투영된 히스토그램을 분석하여 픽셀 밀도가 문턱값보다 낮은 부분에 경계선을 형 성한다. 상기 기법은 행 사이나 열 사이의 거리가 가까울수록 경계면 문턱값을 높게 설정하여야 하는데, 이에 따라 오차율이 증가한다. 또한, 본문-세주 복합구조에 대해서 픽셀 투영(pixel projection)을 적용할 경우 본문 부와 세주부의 정보가 겹쳐서 구성요소를 분리하기 어렵다는 문제가 있다(도 3의 C2, C4 참조). 픽셀 투영(pixel projection) 기법이 가진 본문-세주 간 투영 겹침의 문제를 극복하기 위해, 문자를 구성하는 모든 픽셀의 투영이 아닌, OCR에 의해 검출된 문자들의 중심 좌표만을 투영하는 기법(중심좌표 투영 프로파일, point projection profile)이 제안되었다(비특허문헌 2). 상기 기법은 행과 열의 정렬도가 높은 한문 고서에 대 해 본문과 세주를 성공적으로 분리하였다. 도 3은 픽셀 투영 기법과 중심좌표 투영 기법의 라인분할 성능을 비교한 결과를 설명하기 위한 도면이다. 도 3에서 P1은 픽셀 투영 방향을 나타내고, P2는 중심좌표 투영 방향을 나타낸다. G1은 픽셀 투영 프로파일을 나타내며, G2는 중심좌표 투영 프로파일을 나타낸다. 도 3의 이미지에 픽셀 투영 기법을 적용하는 경우, 4개의 주열(C1 내지 C4) 사이 3개의 구간과, 세주만으로 구 성된 3열(C3)의 중앙에 대해 확연하게 픽셀 저밀도 구간이 나타난다. 그러나, 2열(C2), 4열(C4)과 같이 본문과 세주가 혼합된 경우, 각 세주열(우세주, 좌세주) 요소의 투영이 본문 요소의 투영과 중첩되어 분리하기 어렵다. 이에 비해 중심좌표 투영 기법은 문자 박스좌표 투영체의 해상도 증가를 통해 명확한 군집화가 확인되며, 군집 간의 거리가 특정 문턱값 이상으로 벌어지는 곳에 라인분할을 실행할 수 있다. 다만, 중심좌표 투영 프로파일 기법은, 탑다운 기반 라인분할 방식의 특성상, 열의 최상부부터 최하부까지 모든 문자들에 대한 일괄적 정렬을 시도하므로, 고서 제작 과정이나 디지털이미지 획득 과정에서 발생된 기울어짐 (skew)이나 뒤틀림(warping)에 취약하다는 단점이 있다. 이후 딥러닝 기반의 라인분할 모델 개발에 대한 연구(비특허문헌 3)가 활발히 진행되었으나, 사전학습 데이터베 이스 구축 과정에서 요구되는 인력 기반 라벨링의 비효율성이 지적되었으며, 이를 우회하기 위해 개발된 비지도 학습 기반 모델(비특허문헌 4)의 경우 원문의 정형도가 조금만 떨어져도 라인분할의 정확도가 크게 하락하는 단 점이 있었다. 바텀업 서순정렬의 대표적인 사례로, 국내에서는 OCR로 검출된 각 문자들의 중심 좌표를 대상으로 문서 좌하단 으로부터의 기하학적 거리를 비교하여 서순을 정하는 시도(비특허문헌 5)가 있었지만 세주 등의 비정형 구조에 는 대응할 수 없었다. 바텀업 서순정렬 방식은 문자의 좌표정보 2종(x, y)에 대한 수학적 분석을 시도하므로 2 자유도(degree of freedom)에 대한 불확정성을 극복해야 하는 문제가 있다. 즉, 각 문자에 대하여 x축, y축의 두 위치정보에 대해 종합적 우선순위를 판별하기 어려운 문제가 있다. 예를 들어, 최우상단 박스 탐지가 목표라고 가정하면, 바텀업 서순정렬에서는 일반적으로 '최우측 중 최상단' 또는 '최상단 중 최우측'을 찾으면 된다고 가정하기 쉬우나, 검 출박스의 좌표는 x, y 두 가지의 값으로 표현되며, 첫번째 극단조건(최우측 또는 최상단)을 취하는 순간 이미 정답은 하나의 최우측 또는 최상단 박스로 정해져 버리며 두번째 극단조건(최상단 또는 최우측)을 적용 할 수 없게 되는 문제가 있다. 선행기술문헌비특허문헌 (비특허문헌 0001) R. Ptak, et al., \"Projection-based text line segmentation with a variable threshold\", Int. J. Appl. Math. Comput. Sci., vol. 27, pp. 195, 2017. (비특허문헌 0002) 이아람, et al., \"한국 고문헌 디지털화를 위한 라인분할 및 서순정렬 알고리즘\", JDCS, vol. 23, no. 11, pp. 2239, 2022. (비특허문헌 0003) O. Mechi, et al., \"Text line segmentation in historical document images using an adaptive U-Net architecture\", 2019 ICDAR, pp. 369, 2019. (비특허문헌 0004) B. K. Barakat, et al., \"Unsupervised deep learning for text line segmentation\", 25th ICPR, 2021. (비특허문헌 0005) 류준환, et al., \"고문서 초서 영역 검출 및 번역을 위한 검출 결과 넘버링\", ICROS 2019, pp. 140, 2019."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은, 고문헌 자동 디지털 텍스트화를 위해, 고서 원문 이미지 내의 각 자형들의 서순을 판단하는, 근접문 자 탐지 기반 한문고서 서순정렬 방법 및 장치를 제공하는 것을 그 목적으로 한다. 또한, 본 발명은 고서의 최초 제작과정이나 디지털이미지 획득 과정에서 발생한 기울어짐(skew) 및 뒤틀림 (warping)에 강인한, 근접문자 탐지 기반 한문고서 서순정렬 방법 및 장치를 제공하는 데 그 목적이 있다. 구체적으로, 본 발명에 따른 근접문자 탐지 기반 한문고서 서순정렬 방법 및 장치는, 바텀업 서순정렬 방식이 가진 문제를 해결하기 위하여, OCR로 검출된 각 문자들의 좌표와 크기를 기반으로, 사람의 인지와 유사하게, 특 정 시작점에서 출발하여 근접한 문자로의 연속적인 이동(스캔)을 통해 열 탐지를 수행한다. 즉 상기 방법 및 장 치는 근접문자 탐지 기반 라인분할을 통해 고서(古書) 원문 이미지 내의 각 자형들의 서순을 판단하고자 한다. 본 발명은, 딥러닝 기반 모델에 의존하지 않으면서도, 기존의 픽셀 투영 프로파일과 기하학적 분석 기반 라인분 할에서 이루어지지 못한, 본문과 세주의 구분 및 라인분할을 통해, 한문고서 원문 이미지의 자동 텍스트화를 구 현하고자 한다. 본 발명의 목적은 이상에서 언급한 목적으로 제한되지 않으며, 언급되지 않은 또 다른 목적들은 아래의 기재로 부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 일 실시예에 따른 한문고서 서순정렬 방법은, 한문고서 서순정렬 장치가, 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정하는 단계; 상기 한문고서 서순정렬 장치가, 상기 분석 대상 박스 의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 현재 분석 대상 주열의 본문과 우 세주에 해당하는 박스로 구성된 제1 이동경로와, 상기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이 동경로를 생성하는 다중 스캔 단계; 및 상기 한문고서 서순정렬 장치가, 상기 제1 이동경로에 포함된 박스와 상 기 제2 이동경로에 포함된 박스의 합집합을 구하여 현재 분석 대상 주열의 박스 리스트를 생성하는 단계를 포함 한다. 본 발명의 일 실시예에 따른 한문고서 서순정렬 장치는, 한문고서 원문 이미지의 OCR 결과물과, 컴퓨터에서 판 독 가능한 명령들을 저장하는 메모리 및 상기 OCR 결과물을 읽어들이고, 상기 명령들을 실행하도록 구현되는 적 어도 하나의 프로세서를 포함한다. 상기 적어도 하나의 프로세서는, 상기 명령들을 실행함으로써, 상기 OCR 결 과물에 포함된 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정하고, 상기 분석 대상 박스 의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 현재 분석 대상 주열의 본문과 우 세주에 해당하는 박스로 구성된 제1 이동경로와, 상기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이 동경로를 생성하며, 상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스의 합집합을 구하여현재 분석 대상 주열의 박스 리스트를 생성하도록 구성된다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은, 고문헌 디지털 이미지 내 개별한자들의 서순정렬을 위해, 원문 이미지 전체에 OCR을 먼저 적용한 뒤, 바운딩 박스들의 좌표와 크기를 기반으로 4중 근접문자탐지 스캔을 통해 라인분할 및 본문/세주 클래스 판 별을 수행한다. 이러한 바텀업(bottom-up) 기반의 라인분할은 기존 OCR에서 제공되는 문자 검출 및 인식 정보의 잠재력을 한층 더 활용하면서 고문헌 원문텍스트 제작의 효율성을 증가시킬 수 있다. 본 발명에 따르면, 본문-세주 복합구조와 더불어 기울어짐(skew), 뒤틀림(warping) 등의 노이즈를 포함한 고서 이미지 내에서도 성공적으로 라인을 분할하고 개별 자형의 본문/세주 구분 및 서순의 배정이 가능하다. 본 발명에서 제안된 디지털 텍스트화 기술은 기존의 OCR 한자 검출/인식과 코퍼스 데이터베이스 기반 번역모델 을 연결하는 접점으로 작용하여 고문헌 전자동 번역을 가능하게 한다. 본 발명에서 얻을 수 있는 효과는 이상에서 언급한 효과들로 제한되지 않으며, 언급하지 않은 또 다른 효과들은"}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "아래의 기재로부터 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명은 고문헌 활용 및 보존 과정에서 디지털 텍스트 생성의 자동화를 위해 개발된 근접문자 탐지 기반 서순 정렬 방법 및 장치에 관한 것이다. 본 발명에 따른 방법 및 장치는 인공지능 기반 광학문자인식(OCR)을 통해 검 출/인식된 텍스트 내 개별 한자들의 중심좌표와 크기를 기반으로 근접한 문자간의 서순 상관관계를 탐지한다. 본 발명에 따른 방법 및 장치는, 4중(up-down-down-up) 스캔을 통해 각 문자를 본문 클래스 또는 세주 클래스로 구분한 후 우종서 기반 본문-세주 복합구조의 서순정렬을 수행한다. 본 발명에 따른 원문 이미지 디지털 텍스트 화 기술은 고서 원본의 형태 추론 및 복원 과정인 교감(校勘, 같은 종류의 여러 책을 비교하여 차이 나는 것들 을 바로잡음)과 대조(對照, 둘 이상인 대상의 내용을 맞대어 같고 다름을 검토함)를 지원할 수 있으며, 궁극적 으로 고서 원문 이미지의 전자동 번역을 가능케 한다. 본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술되어 있는 실시 예들을 참조하면 명확해질 것이다. 그러나 본 발명은 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서로 다른 다양한 형태로 구현될 것이며, 단지 본 실시예들은 본 발명의 개시가 완전하도록 하며, 본 발명이 속하는"}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "기술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명은 청구항의 범주에 의해 정의될 뿐이다. 한편, 본 명세서에서 사용된 용어는 실시예들을 설명하기 위한 것이며 본 발명을 제한하고자 하는 것은 아니다. 본 명세서에서, 단수형은 문구에서 특별히 언급하지 않는 한 복수형도 포 함한다. 명세서에서 사용되는 \"포함한다(comprises)\" 및/또는 \"포함하는(comprising)\"은 언급된 구성소자, 단계, 동작 및/또는 소자는 하나 이상의 다른 구성소자, 단계, 동작 및/또는 소자의 존재 또는 추가를 배제하지 않는다. 어떤 구성요소가 다른 구성요소에 \"연결되어\" 있다거나 \"접속되어\" 있다고 언급된 때에는, 그 다른 구성요소에 직접적으로 연결되어 있거나 또는 접속되어 있을 수도 있지만, 중간에 다른 구성요소가 존재할 수도 있다고 이 해되어야 할 것이다. 반면에, 어떤 구성요소가 다른 구성요소에 \"직접 연결되어\" 있다거나 \"직접 접속되어\" 있 다고 언급된 때에는, 중간에 다른 구성요소가 존재하지 않는 것으로 이해되어야 할 것이다. 구성요소들 간의 관 계를 설명하는 다른 표현들, 즉 \"~사이에\"와 \"바로 ~사이에\" 또는 \"~에 이웃하는\"과 \"~에 직접 이웃하는\" 등도 마찬가지로 해석되어야 한다. 제1, 제2 등의 용어는 다양한 구성요소들을 설명하는데 사용될 수 있지만, 상기 구성요소들은 상기 용어들에 의 해 한정되어서는 안 된다. 상기 용어들은 하나의 구성요소를 다른 구성요소로부터 구별하는 목적으로 사용될 수 있다. 예를 들어, 본 발명의 권리 범위로부터 이탈되지 않은 채 제1 구성요소는 제2 구성요소로 명명될 수 있고, 유사하게 제2 구성요소도 제1 구성요소로 명명될 수 있다. 본 발명을 설명함에 있어서, 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우 그 상세한 설명을 생략한다. 다르게 정의되지 않는 한, 기술적이거나 과학적인 용어를 포함해서 여기서 사용되는 모든 용어들은 해당 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 것과 동일한 의미를 가진다. 일반적으로 사용되는 사전에 정의되어 있는 것과 같은 용어들은 관련 기술의 문맥상 가지는 의미와 일치하는 의미를 갖는 것으로 해 석되어야 하며, 본 명세서에서 명백하게 정의하지 않는 한, 이상적이거나 과도하게 형식적인 의미로 해석되지 않는다. 이하, 본 발명의 실시예를 첨부한 도면들을 참조하여 상세히 설명한다. 본 발명을 설명함에 있어 전체적인 이해 를 용이하게 하기 위하여 도면 번호에 상관없이 동일한 수단에 대해서는 동일한 참조 번호를 사용하기로 한다. 도 4는 본 발명의 일 실시예에 따른 근접문자 탐지 기반 한문고서 서순정렬 방법을 설명하기 위한 흐름도이다. 본 발명의 일 실시예에 따른 근접문자 탐지 기반 한문고서 서순정렬 방법(이하, '한문고서 서순정렬 방법')은 한문고서 서순정렬 장치에 의해 수행되는 것으로 전제한다. 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법은 고문헌 원문 이미지의 디지털 텍스트화를 위해 개발된 것으로서, OCR 결과물을 기반으로 라인분할 및 서순정렬을 실행한다. 상기 OCR 결과물은 고서 디지털 이미지('원문 이미지'로 지칭될 수 있음) 내의 각 문자에 대한 검출 결과 생성 된 OCR 검출박스의 중심 좌표 정보(x, y)와 크기 정보(w, h) 및 인식 결과 생성된 자형(character)을 포함한다. OCR 검출박스는 원문 이미지 내의 문자의 위치와 크기를 나타내는 바운딩 박스(bounding box)이다. 참고로, OCR 검출박스는 원문 이미지의 기울어짐(skew)이나 뒤틀림(warping)과는 무관하게 수직으로 곧게 선 직사각형의 형 태를 가진다. 본 명세서에서 OCR 검출박스는 '박스'로 약칭될 수 있다. OCR 검출박스의 중심 좌표 정보(이하 '좌표 정보')에 포함된 x는 x좌표, y는 y좌표를 나타내며, OCR 검출박스의 크기 정보에 포함된 w는 폭(width), h는 높이(height)를 나타낸다. OCR 결과물은 표 1과 같이 정리할 수 있다. 표 1 OCR 결과물 기호 OCR 검출박스의 좌표 정보 OCR 검출박스(문자)의 중심의 x좌표 x OCR 검출박스(문자)의 중심의 y좌표 y OCR 검출박스의 크기 정보 OCR 검출박스(문자)의 폭 w OCR 검출박스(문자)의 높이 h 자형(character) 문자 인식 결과 한문고서 서순정렬 장치는 외부에서 한문 고서 디지털 이미지의 OCR 결과물을 입력받는다. 다른 예로, 한문고서 서순정렬 장치는 외부에서 한문 고서 디지털 이미지를 입력받고, 광학 문자 인식(OCR, Optical Character Recognition)을 통하여 OCR 결과물을 생성할 수 있다(S100). 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 적용된 근접문자 탐지 기반 서순정렬 알고리즘(M1)은 알 고리즘 1(Algorithm 1) 내지 알고리즘 5(Algorithm 5)를 포함한다. 도 4에 도시된, 한문고서 서순정렬 방법은 S200, S300, S420 및 S440 단계를 포함한다. S100 단계를 통해 원문 이미지의 OCR 결과물을 획득한 후, 한문고서 서순정렬 장치는 추후 서순정렬의 편의 성을 위해 OCR 결과물을 OCR 검출박스의 y좌표의 오름차순에 따라 정렬한다. 한문고서 서순정렬 장치는 y좌 표의 오름차순에 따라 각 OCR 검출박스에 순차적으로 인덱스를 배정한다. 따라서 이웃하는 인덱스의 박스들은 y 좌표 거리가 근접하다는 관계가 있다. 다만 x좌표와의 연관성은 없으므로 두 박스의 실제 거리가 근접함을 의미 하지는 않는다. S200 단계는 주열 라인 분할 단계이며, S220 단계 내지 S280 단계를 포함한다. S200 단계에서 한문고서 서순정 렬 장치는, OCR 결과물 중에서 이미 주열 라인분할, 서순정렬 및 디지털 텍스트 분석 작업이 완료된 OCR 검 출 박스가 제외된 분석 대상 OCR 검출 박스를 기초로 총 4회의 스캔(UP1, DOWN1, DOWN2, UP2)을 통해, 현재 분 석 대상 주열(이하 '현 주열')에 해당하는 OCR 검출박스를 결정하고, 원문 이미지에서 현 주열과 다음 분석 대 상 주열(이하 '다음 주열')의 경계를 형성한다(주열 라인분할). 달리 말하면, 상기 경계는 현 주열의 좌측 경계 라고 할 수 있다. 본 명세서에서 사용하는 상기 4회의 스캔('4중 스캔'이라고 지칭될 수 있음)의 명칭과, 각 스캔의 목적, 산출물 을 표 2와 같이 정리하였다. 표 2 스캔의 명칭 적용되는 알고리즘 번호/단계목적 산출물 제1 상향 스캔 (Upscan #1, UP1)1 (S220) 제1 하향 스캔과 제2 하향 스캔의 시작점 탐지현 주열의 최우상단 박스 제1 하향 스캔 (Downscan #1, DOWN1)2 (S240) 현 주열의 본문, 우세주 탐 지현 주열의 최우상단 박스를 시작점으로 하고, 최우하단 박스를 종점으로 하는 제1 이동경로 제2 하향 스캔 (Downscan #2, DOWN2)3 (S260) 제2 상향 스캔의 시작점 탐 지현 주열의 최좌하단 박스제2 상향 스캔 (Upscan #2, UP2)4 (S280) 현 주열의 본문, 좌세주 탐 지현 주열의 최좌하단 박스를 시작점으로 하고, 최좌상단 박스를 종점으로 하는 제2 이동경로 S300 단계는 현 주열 서순정렬 및 디지털 텍스트 생성 단계이며, S320 단계 내지 S360 단계를 포함한다. 이 단 계에서 한문고서 서순정렬 장치는 현 주열에 해당하는 각 OCR 검출박스가 본문, 좌세주, 우세주 중 어느 클 래스에 해당하는지 판별하고(S320), 본문/세주 클래스 판별 결과를 기초로 원문 이미지에서 현 주열의 본문부와 세주부의 경계를 형성하며(S340), 상기 경계를 이용하여 현 주열에 해당하는 모든 OCR 검출박스에 대응하는 자 형의 서순을 결정하고, 결정된 서순에 따라 자형을 정렬하여 현 주열에 대한 디지털 텍스트를 생성하여 출력한 다(S360). 이후, 한문고서 서순정렬 장치는 다음 주열이 존재하는지 여부를 판단한다. 즉, 한문고서 서순정렬 장치 는 OCR 결과물에서 현 주열에 해당하는 정보를 제외하고, 남은 OCR 결과물이 있는지 확인한다(S420). 한문 고서 서순정렬 장치는 OCR 결과물 중에서 아직 주열 라인분할과 서순정렬이 이루어지지 않은 OCR 검출박스 가 있다면 다음 주열로 이동하여(S440), S200 단계 및 S300 단계를 수행하고, OCR 결과물에 포함된 모든 OCR 검 출박스에 대하여 주열 라인분할과 서순정렬을 완료하였다면 프로세스를 종료한다. S440 단계는 다음 주열로 이동하는 단계로서, 달리 말하면 다음 주열을 분석 대상으로 설정하는 단계이다. 한문 고서 서순정렬 장치는 OCR 결과물에 포함된 OCR 검출박스 중에서, 디지털 텍스트 생성이 완료된 주열의 박 스 리스트에 포함된 박스를 제외하여 다음 주열의 분석 대상 박스(박스 리스트)를 선정한다. 도 5는 근접문자 탐지 기반 4중 스캔에 대한 개요도이다. 주열(main column)은 도 2b에서 참조부호 25로 표기된 바와 같이 고서 내 각각의 열을 의미한다. 도 5에서 하나 의 주열은 주열 경계 내부의 영역에 해당한다. 주열은 세부열(sub-column)을 포함한다. 도 5에서 세부열은 세부 열 경계에 의해 구분된다. 주열에 포함된 세부열들은 본문부와 세주부로 구분된다. 주열 간의 서순은 독립적이 며 단순히 오른쪽에서 왼쪽 주열로의 순서를 따른다. 따라서 각 주열 내부의 서순만 정의되면 원문 이미지 전체 에 대한 서순이 명확해진다. 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법 및 장치는 각각의 주열에 속 한 문자(검출박스)들의 군집화(라인분할, line segmentation)를 위한 4중 스캔을 수행한다. 4중 스캔에 포함된 각 스캔의 명칭, 목적, 산출물은 표 2에 정리한 바 있다. 한문고서 서순정렬 장치는 제1 상향 스캔(Upscan #1, 이하 UP1), 제1 하향 스캔(Downscan #1, 이하 DOWN1), 제2 하향 스캔(Downscan #2, 이하 DOWN2), 제2 상향 스캔(Upscan #2, 이하 UP2)의 순서대로 4중 스캔을 수행한다. UP1과 DOWN2는 현 주열의 구성 요소 탐지에 직접적으로 관여하지 않지만 DOWN1과 UP2의 시작점을 설정한다. 한문고서 서순정렬 장치는, 설정된 시작점에서 출발하여 근접 박스로 연속적인 이동을 반복하면서 소정의 기준에 따라 종점에 도달하는 방식으로 각 스캔을 수행하고, 각 스캔에 따른 이동경로를 생성한다. 여기서 시작 점과 종점은 각각 하나의 OCR 검출박스이고, 이동경로는 OCR 검출박스의 리스트의 형태를 가진다. 도 5에 도시한 바와 같이, 제1 상향 스캔(UP1)은 현 주열의 최우측 박스(B1)에서 우측이나 상부에 위치한 근접 박스로 연속적으로 이동하여 최우상단 박스(B2)에 도달하면 종료된다. 최우상단 박스(B2)는 제1 하향 스캔 (DOWN1)과 제2 하향 스캔(DOWN2)의 시작점으로 설정된다. 즉, 제1 상향 스캔(UP1)은 제1 하향 스캔(DOWN1)과 제 2 하향 스캔(DOWN2)의 시작점을 탐지하기 위한 스캔이다. 한문고서 서순정렬 장치는 제1 상향 스캔(UP1)을 수행한 후, 제1 하향 스캔(DOWN1)과 제2 하향 스캔(DOWN 2)을 수행한다. 제1 하향 스캔(DOWN1)은 현 주열의 본문과 우세주에 해당하는 박스 리스트(제1 이동 경로)를 생성하기 위한 스 캔이다. 제1 하향 스캔(DOWN1)은 현 주열의 최우상단 박스(B2)에서 우측이나 하부에 위치한 근접박스로 연속적 으로 이동하여 최우하단 박스에 도달하면 종료된다. 제2 하향 스캔(DOWN2)은 현 주열의 최우상단 박스(B2)에서 좌측이나 하부에 위치한 근접박스로 연속적으로 이동 하여 최좌하단 박스(B3)에 도달하면 종료된다. 최좌하단 박스(B3)는 제2 상향 스캔(UP2)의 시작점으로 설정된다. 즉, 제2 하향 스캔(DOWN2)은 제2 상향 스캔(UP2)의 시작점을 탐지하기 위한 스캔이다. 한문고서 서순정렬 장치는 제2 하향 스캔(DOWN2)을 수행한 후, 제2 상향 스캔(UP2)을 수행한다. 제2 상향 스캔(UP2)은 현 주열의 본문과 좌세주에 해당하는 박스 리스트(제2 이동 경로)를 생성하기 위한 스캔 이다. 제2 상향 스캔(UP2)은 현 주열의 최좌하단 박스(B3)에서 좌측이나 상부에 위치한 근접박스로 연속적으로 이동하여 최좌상단 박스에 도달하면 종료된다. 4중 스캔에 대한 구체적인 내용은 도 7a 내지 도 11b를 참조하여 후술한다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "item": 3, "content": "도 6은 근접문자 탐지 기반 4중 스캔의 적용 예시에 관한 도면이다. 도 6에서 주열은 점선으로 구분되었다. 한 문고서 서순정렬 장치는 도 6에 도시된 원문 이미지를 기초로 생성된 OCR 검출박스를 대상으로 4중 스캔을 수행하고 각 OCR 검출박스를 본문 박스, 좌세주 박스, 우세주 박스로 구분하였다. 예를 들어, 한문고서 서순정 렬 장치는 본문 박스를 분홍색 네모로 표시하고, 좌세주 박스를 빨간색 세모로 표시하며, 우세주 박스를 청 색 세모로 표시한 결과를 화면에 출력할 수 있다(도 13b의 Algorithm 5 참조). 도 6의 원문 이미지의 첫 번째 주열에서, 한문고서 서순정렬 장치는 최우측 박스(B11)를 시작점으로 하여 제1 상향 스캔을 수행하여 최우 상단 박스(B12)를 탐지하며, 최우상단 박스(B12)를 시작점으로 하여 제2 하향 스캔을 수행하여 최좌하단 박스 (B13)를 탐지하였다. 도 7a 및 도 7b는 4중 스캔에 사용되는 근접박스 연속탐지 방법을 설명하기 위한 도면이다. 본 발명은 근접박스 탐지를 위한 선탐지 기법(도 7a)과 점탐지 기법(도 7b)을 정의한다. 선탐지 기법은 기준박스(최근에 이동한 박스, 도 7a에서 SB1)의 상부(상향 스캔을 수행할 경우) 또는 하부(하향 스캔을 수행할 경우)에 이웃한 박스(근접 박스)를 탐지하는 데 사용된다. 참고로, 본 명세서에서 이웃한 박스 (근접 박스)는 기준박스 근방의 박스로서, 최근접 박스만을 의미하지는 않는다. 선탐지 기법은 기준박스에 근접 한 다른 박스 중에서 기준박스의 x범위(x-w/2 : x+w/2)에 해당하는 영역을 일부라도 가지고 있는 박스를 탐지하 는 데 사용된다. 본 명세서는 기준박스에서 선탐지 기법을 적용하여 탐지되는 박스(탐지 대상 박스)를 선접촉 박스로 지칭한다. 본 명세서는 기준박스에서 선탐지 기법을 적용하여 탐지되는 박스(탐지 대상 박스)를 일반적으로 선접촉 박스로 지칭하지만, 기준박스가 아닌 박스 간에도 선접촉 박스 관계가 있을 수 있다. 예를 들어, 기준박스의 최근접박 스를 3개 선택하고, 선택된 박스 간에 선접촉 여부를 판단할 때, 선택된 박스 중 어느 두 박스의 영역을 기준으 로 공유하는 x범위가 존재하는 경우, 이 두 박스는 선접촉 박스 관계(선접촉 관계로 지칭될 수 있음)에 있다. 점탐지 기법은 기준박스(도 7b에서 SB2)의 좌측 또는 우측에 이웃한 박스를 탐지하는 데 사용된다. 도 7b에서 점탐지 기법은 기준박스의 y범위(y-h/2 : y+h/2) 우측에 나란히 위치한 문자를 탐지한다. 구체적으로 점탐지 기 법은, 기준박스의 좌측이나 우측에 근접한 다른 박스의 중심의 y좌표가 기준박스의 y범위(y-h/2 : y+h/2)에 포 함되는 경우를 탐지하는 데 사용된다. 즉, 기준박스에 이웃한 박스 중에서 기준박스의 y범위(y-h/2 : y+h/2)에 포함되는 y좌표를 가진 박스가 점접촉 박스가 된다. 본 명세서는 일반적으로 기준박스에서 점탐지 기법을 적용하여 탐지되는 박스(탐지 대상 박스)를 점접촉 박스로 지칭하지만, 기준박스가 아닌 박스 간에도 점접촉 박스 관계가 있을 수 있다. 예를 들어, 기준박스의 최근접박 스를 3개 선택했을 때, 선택된 박스 간에 점접촉 여부를 판단할 때, 선택된 박스 중 어느 하나의 박스의 y 범위 에 다른 박스의 중심의 y좌표가 포함되는 경우, 이 두 박스는 점접촉 박스 관계(점접촉 관계로 지칭될 수 있 음)에 있다. 참고로, 스캔 과정의 최초에는 기준박스가 스캔의 시작점으로 설정되며, 근접 박스로 이동하게 되면 해당 근접 박스가 새로운 기준박스로 지정된다. 도 8a은 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제1 상향 스캔 과정(S220)을 설명하기 위한 흐름도이고, 도 8b는 제1 상향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. S220 단계는 S221 단계 내지 S227 단계를 포함한다. 제1 상향 스캔은 원문 이미지 내 최우상단 박스 탐지를 목표로 한다. 우선, 한문고서 서순정렬 장치가 제1 상향 스캔을 수행하기 위해서는 원문 이미지의 OCR 결과물 중에서 분석 대상이 되는 OCR 검출박스의 좌표 정보 (x, y)와 크기 정보(w, h)가 필요하다(S221). 분석 대상 OCR 검출박스의 좌표들은 2차원 좌표계에 배치되어 있다. 따라서, 최우상단 박스의 탐지의 자유도 (degree of freedom)는 2이며, 단순한 최소-최대 연산(min-max operation)의 2중 사용인 '최우측 중 최상부'또는 '최상부 중 최우측'의 논리로 최우상단 박스가 탐지될 수 없다. 이를 극복하기 위해 본 발명의 일 실시예 에 따른 한문고서 서순정렬 장치는 최우측 박스(도 5에서 B1)를 시작점(최초의 기준박스)으로 설정하고, 기 준박스에서 우상단의 최근접박스를 연속적으로 선탐지한다. 한문고서 서순정렬 장치는 제1 상향 스캔 중 본 문에서 세주로 진행되는 분기점에서, 우세주로의 이동(우상방 이동)에 우선권을 제공하기 위해, 매 선탐지와 이 동 후에 우측 점탐지와 이동을 추가적으로 실행하여 최우상단 박스(도 5에서 B2)에 도달한다. 한문고서 서순정 렬 장치는 기준박스의 상부에 선접촉박스가 존재하지 않는 경우, 그 기준박스의 인덱스를 최우상단 박스의 인덱스로 설정한다. 본 명세서에서 한문고서 서순정렬 장치는 '최근접박스'를 y축을 기준으로 1차원 거리를 고려하여 판단한다. 다만, 판단 기준은 박스 중심 y좌표일 수도 있고, 박스의 상부 또는 하부 경계선이 될 수도 있다. 각 스캔에 대 하여 정해진 스캔 방향의 역방향에 있는 박스는 최근접박스 탐지에서 배제된다. 예를 들어, 한문고서 서순정렬 장치는 상향 스캔(UP1, UP2) 중에는 기준박스의 상부에 있는 박스만을 최근접박스 탐지 대상으로 하며, 하 향 스캔(DOWN1, DOWN2) 중에는 기준박스의 하부에 있는 박스만을 최근접박스 탐지 대상으로 삼는다. 이하, 도 8a를 참조하여 S222 단계 내지 S227 단계에 대하여 설명한다. 한문고서 서순정렬 장치는 분석 대상 OCR 검출박스 중에서 최우측 박스를 선정하고, 상기 최우측 박스를 제 1 상향 스캔의 시작점(기준박스)으로 설정한다(S222). 예를 들어, 한문고서 서순정렬 장치는 분석 대상 박 스의 경계선의 x좌표(x+w/2)의 최대값을 기준으로 상기 최우측 박스를 선정할 수도 있고, 분석 대상 박스의 x좌 표의 최대값을 기준으로 상기 최우측 박스를 선정할 수도 있다. 한문고서 서순정렬 장치는 기준박스의 상부에 선접촉박스가 존재하는지 여부를 판단하고(S223), 존재하는 경우 상부의 최근접 선접촉 박스를 새로운 기준박스로 설정하고(S224), 그렇지 않은 경우 S227 단계를 수행한다. S224 단계 이후, 한문고서 서순정렬 장치는 기준박스의 우측에 점접촉 박스가 존재하는지 여부를 판단하고 (S225), 존재하는 경우 기준박스의 가장 우측에 있는 점접촉 박스를 새로운 기준박스로 설정한다(S226). 한문고 서 서순정렬 장치는 S226 단계 종료 후 S223 단계로 돌아간다. S223 단계에서 기준박스의 상부에 선접촉박스가 존재하지 않는 것으로 판단한 경우, 한문고서 서순정렬 장치 는 현재의 기준박스를 현 주열의 최우상단 박스로 판단하고, 현재 기준박스의 인덱스를 최우상단 박스의 인 덱스로 설정한다(S227). 도 9a은 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제1 하향 스캔 과정(S240)을 설명하기 위한 흐름도이고, 도 9b는 제1 하향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. S240 단계는 S241 단계 내지 S256 단계를 포함한다. 제1 하향 스캔은 제1 상향 스캔에서 탐지된 현 주열의 최우상단 박스를 시작점으로 설정하고 우하단 근접박스로 의 연속 탐지를 통해 현 주열의 모든 본문 박스와 우세주 박스를 탐지하는 스캔이다. 한문고서 서순정렬 장치 는 제1 하향 스캔을 수행하여 탐지된 박스로 구성된 제1 이동 경로(DOWN1 리스트)를 생성한다. 즉, 제1 이 동 경로는 현 주열의 본문 박스와 우세주 박스의 인덱스 리스트이다. 우선, 제1 하향 스캔을 수행하기 위해서는, 분석 대상이 되는 OCR 검출박스의 좌표 정보(x, y)와 크기 정보(w, h)와 함께 S220 단계에서 도출된 현 주열의 최우상단 박스의 인덱스가 필요하다(S241). 제1 하향 스캔은 제1 상향 스캔과 달리 최종 목적지뿐만 아니라 경로상의 모든 박스 탐지를 목표로 한다. 따라 서, 도 9a의 흐름도에는 높은 정확도를 가지는 연속 탐지를 위하여 본문에서 세주로 진행되는 분기점에 대한 예 외조항들이 추가되었다. 특히 도 9b의 의사 코드의 케이스 3(Case 3)에서, 불완전한(탐지 누락) OCR 검출에 대 비하기 위한 조건으로 단순히 최근접 박스 하나가 아닌 최근접 3개의 박스의 패턴을 분석하는 것으로 구성되었 다(도 9a의 S249 내지 S255, DOWN2와 UP2도 동일 조건을 포함함). 일반적으로 세주는 본문에서 2분열하는 원칙 을 따르므로, 우세주 또는 좌세주의 OCR 검출이 누락된 경우, 누락된 박스의 왼쪽이나 오른쪽에 위치한 세주 박 스는 Case 3의 예외조건이 없으면 단일열로 인식되어 본문으로 판별되는 문제가 발생한다. 한문고서 서순정렬 장치는 제1 하향 스캔의 연속 탐지를 통해 현 주열의 최우하단 박스에 도달하면, 이동 경로상의 모든 박스 들의 인덱스를 현 주열 박스 리스트와 제1 이동 경로(제1 하향 스캔 박스 리스트 또는 DOWN1 리스트로 지칭될 수 있음)에 추가한다. 이하, 도 9a를 참조하여 S242 단계 내지 S256 단계에 대하여 설명한다. 한문고서 서순정렬 장치는 S220 단계에서 판단된 최우상단 박스를 제1 하향 스캔의 시작점(기준박스)으로 설정한다(S242). 한문고서 서순정렬 장치는 기준박스의 하부에 선접촉박스가 존재하는지 여부를 판단하고 (S243), 존재하는 경우 S244 단계를 수행하고, 그렇지 않은 경우 S256 단계를 수행한다. S244 단계에서, 한문고서 서순정렬 장치는 기준박스의 하부 선접촉 박스 수를 판단하고, 하부 선접촉 박스 수에 따라 S245, S246 또는 S249 중 어느 하나로 분기한다. 만약, 기준박스의 하부 선접촉 박스 수가 1인 경우, 한문고서 서순정렬 장치는 기준박스를 해당 선접촉박스 로 이동시킨다. 즉, 한문고서 서순정렬 장치는 해당 선접촉 박스를 새로운 기준박스로 설정한다(S245). 또한, 기준박스의 하부 선접촉 박스 수가 2인 경우, 한문고서 서순정렬 장치는 현재 기준박스의 최근접박스 를 새로운 기준박스로 설정한다(S246). 그리고, 한문고서 서순정렬 장치는 기준박스 우측에 점접촉 박스가 존재하는 경우(S247), 현재 기준박스의 최우측 점접촉 박스를 새로운 기준박스로 설정한다(S248). 또한, 기준박스의 하부 선접촉 박스 수가 3 이상인 경우, 한문고서 서순정렬 장치는 현재 기준박스에 가장 근접한 3개의 박스를 선택하고(S249), 선택한 박스 간 점접촉이 있는지 여부를 판단한다(S250). 한문고서 서순 정렬 장치는, 판단 결과 점접촉이 없는 경우, 3개의 박스 중에서 최근접 박스를 새로운 기준박스로 설정한 다(S251). 판단 결과 기준박스에 가장 근접한 2개의 박스가 서로 점접촉을 하는 경우, 한문고서 서순정렬 장치 는 2개의 최근접 박스 중에서 우측에 있는 박스를 새로운 기준박스로 설정한다(S252). 판단 결과 3개의 박 스 중에서 현재 기준박스의 최근접박스를 제외한 나머지 2개의 박스(도면에서 '원접'으로 표기함)가 서로 점접 촉을 하는 경우, 한문고서 서순정렬 장치는 상기 최근접박스가 원접 2개의 박스 중 우측 박스와 선접촉을 하는지 여부를 판단한다(S253). 한문고서 서순정렬 장치는 상기 최근접박스가 원접 2개의 박스 중 우측 박 스와 선접촉을 하는 경우, 현재 기준박스의 최근접박스를 새로운 기준박스로 설정하고(S254), 그렇지 않은 경우 원접 2개의 박스 중 우측 박스를 새로운 기준박스로 설정한다(S255). 한문고서 서순정렬 장치는 새로운 기준박스가 결정된 후(S245, S247의 No 분기, S248, S251, S252, S254, S255 이후), S243 단계를 수행하여 하부에 선접촉박스가 존재하는지 여부를 다시 판단하게 된다. S243 단계에서, 기준박스의 하부에 선접촉박스가 존재하지 않는 것으로 판단한 경우, 한문고서 서순정렬 장치 는 현재의 기준박스를 현 주열의 최우하단 박스로 판단하고, 현 주열 박스 리스트와 제1 이동경로(DOWN1 리 스트)에 현 주열의 최우상단 박스에서 최우하단 박스까지의 이동경로상의 모든 박스의 인덱스를 추가한다. 즉, 한문고서 서순정렬 장치는 제1 하향 스캔 결과를 기초로 제1 이동 경로(DOWN1 리스트)와 현 주열 박스 리스 트를 생성한다. 도 10a은 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제2 하향 스캔 과정(S260)을 설명하기 위한 흐름도이고, 도 10b는 제2 하향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. S260 단계는 S261 단계 내지 S277 단계를 포함한다. 제2 하향 스캔은 제1 상향 스캔에서 탐지된 현 주열의 최우상단 박스를 시작점으로 설정하고 좌하단 근접박스로 의 연속 탐지를 통해 현 주열 내 최좌하단 박스를 탐지하는 스캔이다. 제1 상향 스캔의 탐지 대상인 현 주열의 최우상단 박스는 분석 대상 OCR 검출박스 중에서 최우상단에 위치하여 다른 주열에 있는 박스와 혼동할 여지가 없다. 따라서, 제1 상향 스캔은 근접 박스 연속 탐지의 높은 정확도가 요구되지 않는다. 그러나 제2 하향 스캔 의 탐지 대상인 현 주열의 최좌하단 박스는 현 주열의 좌측에 직접 이웃한 주열의 경계에 위치한다. 따라서, 제 2 하향 스캔은 근접 박스 연속 탐지에 있어서 높은 정확도를 확보해야 하므로, 도 확보하기 위해 도 10a와 같은 다수의 예외처리를 필요로 한다. 이하, 도 10a를 참조하여 S261 단계 내지 S277 단계에 대하여 설명한다. 우선, 한문고서 서순정렬 장치가 제2 하향 스캔을 수행하기 위해서는, 분석 대상이 되는 OCR 검출박스의 좌 표 정보(x, y)와 크기 정보(w, h)와 함께 S240 단계에서 도출된 현 주열 박스 리스트 및 현 주열의 최우상단 박 스의 인덱스가 필요하다(S261). 한문고서 서순정렬 장치는 S220 단계에서 판단된 최우상단 박스를 제2 하향 스캔의 시작점(기준박스)으로 설정한다(S262). 한문고서 서순정렬 장치는 기준박스의 하부에 선접촉박스가 존재하는지 여부를 판단하고 (S263), 존재하는 경우 S264 단계를 수행하고, 그렇지 않은 경우 S277 단계를 수행한다. S264 단계에서, 한문고서 서순정렬 장치는 기준박스의 하부 선접촉 박스 수를 판단하고, 하부 선접촉 박스 수에 따라 S265, S266 또는 S269 중 어느 하나로 분기한다. 만약, 기준박스의 하부 선접촉 박스 수가 1인 경우, 한문고서 서순정렬 장치는 기준박스를 해당 선접촉박스 로 이동시킨다. 즉, 한문고서 서순정렬 장치는 해당 선접촉 박스를 새로운 기준박스로 설정한다(S265). 또한, 기준박스의 하부 선접촉 박스 수가 2인 경우, 한문고서 서순정렬 장치는 하부 선접촉 박스 중에서 현 주열 박스 리스트에 아직 포함되지 않은 박스(미탐지 박스)의 수를 판단한다(S266). 한문고서 서순정렬 장치 는, 하부 선접촉 박스 중에서 미탐지 박스가 1개인 경우, 해당 미탐지 박스를 새로운 기준박스로 설정하고 (S267), 그렇지 않은 경우 현재 기준박스의 최근접박스를 새로운 기준박스로 설정한다(S268). 또한, 기준박스의 하부 선접촉 박스 수가 3 이상인 경우, 한문고서 서순정렬 장치는 현재 기준박스에 가장 근접한 3개의 박스를 선택하고(S269), 선택한 박스 중에서 현 주열 박스 리스트에 아직 포함되지 않은 박스(미 탐지 박스)의 수를 판단한다(S270). 한문고서 서순정렬 장치는 현재 기준박스에 가장 근접한 3개의 박스 중 에서 1개 또는 2개의 미탐지 박스가 있는 경우 S271 단계를 수행하고, 그렇지 않으면 3개의 박스 중에서 최근접 박스를 새로운 기준박스로 설정한다(S272). S271 단계에서 한문고서 서순정렬 장치는, 선택한 3개의 박스 간 점접촉이 있는지 여부를 판단한다. 판단 결과 점접촉이 없는 경우, 한문고서 서순정렬 장치는, 3개의 박스 중에서 최근접 박스를 새로운 기준박스로 설정한다(S272). 판단 결과 기준박스에 가장 근접한 2개의 박스가 서로 점접촉을 하는 경우, 한문고서 서순정렬 장치는 2개의 최근접 박스 중에서 미탐지 박스를 새로운 기준박스로 설정한다(S273). 판단 결과 3개의 박스 중에서 현재 기준박스의 최근접박스를 제외한 나머지 2개의 박스(도면에서 '원접'으로 표기함)가 서로 점접촉을 하는 경우, 한문고서 서순정렬 장치는 상기 최근접박스가 원접 2개의 박스 중 미탐지 박스와 선접촉을 하는 지 여부를 판단한다(S274). 한문고서 서순정렬 장치는 상기 최근접박스가 원접 2개의 박스 중 미탐지 박스 와 선접촉을 하는 경우, 현재 기준박스의 최근접박스를 새로운 기준박스로 설정하고(S275), 그렇지 않은 경우 원접 2개의 박스 중 미탐지 박스를 새로운 기준박스로 설정한다(S276). 상술한 바와 같이, 한문고서 서순정렬 장치는 제2 하향 스캔 과정에서 현 주열 박스 리스트를 활용하여, 세주부 탐지 시 기준박스를 미탐지 박스 로 이동시키는 방식으로 좌하단 근접박스를 연속 탐지하게 된다. 한문고서 서순정렬 장치는 새로운 기준박스가 결정된 후(S265, S267, S268, S272, S273, S275, S276 이 후), S263 단계를 수행하여 하부에 선접촉박스가 존재하는지 여부를 다시 판단하게 된다. S263 단계에서, 기준박스의 하부에 선접촉박스가 존재하지 않는 것으로 판단한 경우, 한문고서 서순정렬 장치 는 현재의 기준박스를 현 주열의 최좌하단 박스로 판단하고, 현재 기준박스의 인덱스를 최좌하단 박스의 인 덱스로 설정한다(S277). 제2 하향 스캔은 제2 상향 스캔의 시작점(최좌하단 박스)을 탐지하는 것이 목적이므로, S277 단계가 완료되더라도 한문고서 서순정렬 장치는 현 주열 박스 리스트에 인덱스를 추가하지 않는다. 따 라서 S280 단계 시작 전의 현 주열 박스 리스트는 S240 단계 후의 현 주열 박스 리스트와 동일하다."}
{"patent_id": "10-2024-0028044", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "item": 4, "content": "도 11a은 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제2 상향 스캔 과정(S280)을 설명하기 위한 흐름도이고, 도 11b는 제2 상향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. S280 단계는 S281 단계 내지 S297 단계를 포함한다. 마지막 스캔인 제2 상향 스캔은 제2 하향 스캔에서 탐지된 현 주열의 최좌하단 박스를 시작점으로 설정하고 좌 상단 근접박스로의 연속 탐지를 통해 현 주열의 모든 본문 박스와 좌세주 박스를 탐지하는 스캔이다. 한문고서 서순정렬 장치는 제2 상향 스캔을 수행하여 현 주열의 최좌상단 박스에 도달하면, 탐지된 박스로 구성된 제 2 이동 경로(UP2 리스트)를 생성한다. 즉, 제2 이동 경로는 현 주열의 본문 박스와 좌세주 박스의 인덱스 리스 트이다. 또한, 한문고서 서순정렬 장치는 제2 이동 경로상의 모든 박스의 인덱스를 현 주열 박스 리스트에 추가한다. 한문고서 서순정렬 장치는 제2 상향 스캔의 종료를 기점으로 현 주열에 포함된 박스의 군집화와 라인분할 (도 5의 주열 경계 또는 도 6의 점선)을 수행한다. 그리고, 한문고서 서순정렬 장치는 다음(좌측) 주열의 분석에 동일한 4중 스캔 알고리즘을 적용하기 위해 x, y, w, h 리스트에서 현 주열에 포함된 박스 정보를 삭제 하며 분석 대상에서 제외한다.즉, 한문고서 서순정렬 장치는 OCR 검출박스 중에서 현 주열의 박스 리스트에 포함된 박스를 제외하여 다음 주열의 분석 대상 박스를 선정한다. 이하, 도 11a를 참조하여 S281 단계 내지 S297 단계에 대하여 설명한다. 우선, 한문고서 서순정렬 장치가 제2 상향 스캔을 수행하기 위해서는, 분석 대상이 되는 OCR 검출박스의 좌 표 정보(x, y)와 크기 정보(w, h)와 함께 현 주열 박스 리스트 및 현 주열의 최좌하단 박스의 인덱스가 필요하 다(S281). 한문고서 서순정렬 장치는 S260 단계에서 판단된 최좌하단 박스를 제2 상향 스캔의 시작점(기준박스)으로 설정한다(S282). 한문고서 서순정렬 장치는 기준박스의 상부에 선접촉박스가 존재하는지 여부를 판단하고 (S283), 존재하는 경우 S284 단계를 수행하고, 그렇지 않은 경우 S297 단계를 수행한다. S284 단계에서, 한문고서 서순정렬 장치는 기준박스의 상부 선접촉 박스 수를 판단하고, 상부 선접촉 박스 수에 따라 S285, S286 또는 S289 중 어느 하나로 분기한다. 만약, 기준박스의 상부 선접촉 박스 수가 1인 경우, 한문고서 서순정렬 장치는 기준박스를 해당 선접촉박스 로 이동시킨다. 즉, 한문고서 서순정렬 장치는 해당 선접촉 박스를 새로운 기준박스로 설정한다(S285). 또한, 기준박스의 상부 선접촉 박스 수가 2인 경우, 한문고서 서순정렬 장치는 상부 선접촉 박스 중에서 현 주열 박스 리스트에 아직 포함되지 않은 박스(미탐지 박스)의 수를 판단한다(S286). 한문고서 서순정렬 장치 는, 상부 선접촉 박스 중에서 미탐지 박스가 1개인 경우, 해당 미탐지 박스를 새로운 기준박스로 설정하고 (S287), 그렇지 않은 경우 현재 기준박스의 최근접박스를 새로운 기준박스로 설정한다(S288). 또한, 기준박스의 상부 선접촉 박스 수가 3 이상인 경우, 한문고서 서순정렬 장치는 현재 기준박스에 가장 근접한 3개의 박스를 선택하고(S289), 선택한 박스 중에서 현 주열 박스 리스트에 아직 포함되지 않은 박스(미 탐지 박스)의 수를 판단한다(S290). 한문고서 서순정렬 장치는 현재 기준박스에 가장 근접한 3개의 박스 중 에서 1개 또는 2개의 미탐지 박스가 있는 경우 S291 단계를 수행하고, 그렇지 않으면 3개의 박스 중에서 최근접 박스를 새로운 기준박스로 설정한다(S292). S291 단계에서 한문고서 서순정렬 장치는, 선택한 3개의 박스 간 점접촉이 있는지 여부를 판단한다. 판단 결과 점접촉이 없는 경우, 한문고서 서순정렬 장치는, 3개의 박스 중에서 최근접 박스를 새로운 기준박스로 설정한다(S292). 판단 결과 기준박스에 가장 근접한 2개의 박스가 서로 점접촉을 하는 경우, 한문고서 서순정렬 장치는 2개의 최근접 박스 중에서 미탐지 박스를 새로운 기준박스로 설정한다(S293). 판단 결과 3개의 박스 중에서 현재 기준박스의 최근접박스를 제외한 나머지 2개의 박스(도면에서 '원접'으로 표기함)가 서로 점접촉을 하는 경우, 한문고서 서순정렬 장치는 상기 최근접박스가 원접 2개의 박스 중 미탐지 박스와 선접촉을 하는 지 여부를 판단한다(S294). 한문고서 서순정렬 장치는 상기 최근접박스가 원접 2개의 박스 중 미탐지 박스 와 선접촉을 하는 경우, 현재 기준박스의 최근접박스를 새로운 기준박스로 설정하고(S295), 그렇지 않은 경우 원접 2개의 박스 중 미탐지 박스를 새로운 기준박스로 설정한다(S296). 상술한 바와 같이, 한문고서 서순정렬 장치는 제2 상향 스캔 과정에서 현 주열 박스 리스트를 활용하여, 세주부 탐지 시 기준박스를 미탐지 박스 로 이동시키는 방식으로 좌상단 근접박스를 연속 탐지하게 된다. 한문고서 서순정렬 장치는 새로운 기준박스가 결정된 후(S285, S287, S288, S292, S293, S295, S296 이 후), S283 단계를 수행하여 상부에 선접촉박스가 존재하는지 여부를 다시 판단하게 된다. S283 단계에서, 기준박스의 상부에 선접촉박스가 존재하지 않는 것으로 판단한 경우, 한문고서 서순정렬 장치 는 현재의 기준박스를 현 주열의 최좌상단 박스로 판단하고, 현 주열 박스 리스트와 제2 이동경로(UP2 리스 트)에 현 주열의 최좌하단 박스에서 최좌상단 박스까지의 이동경로상의 모든 박스의 인덱스를 추가한다. 즉, 한 문고서 서순정렬 장치는 제2 상향 스캔 결과를 기초로 제2 이동 경로(UP2 리스트)를 생성하고, 현 주열 박 스 리스트를 갱신한다. 도 12는 본문, 좌세주 및 우세주의 클래스 판별 조건에 관한 도면이다. 도 12는 도 4의 S320 단계와 관련되는 도면이다. 한문고서 서순정렬 장치는 제1 이동 경로(DOWN1 리스트)에 포함된 박스와 제2 이동 경로(UP2 리 스트)에 포함된 박스를 기초로, 현 주열 박스 리스트에 포함된 OCR 검출박스를 본문, 좌세주 및 우세주로 분류 한다(S320). 구체적으로, 4중 스캔 과정을 통해 획득된 DOWN1 리스트와 UP2 리스트는 각각 현 주열의 본문/우세주와 본문/좌 세주의 박스 인덱스를 포함하므로, 도 12에 도시한 바와 같이 두 리스트의 교집합과 차집합을 통해 각 박스를 본문 박스, 우세주 박스, 좌세주 박스 중의 어느 하나의 클래스로 판별하는 것이 가능하다. 본문 박스는 DOWN1 리스트와 UP2 리스트의 교집합, 우세주 박스는 DOWN1 리스트와 UP2 리스트의 차집합, 좌세주 박스는 UP2 리스트 와 DOWN1 리스트의 차집합을 구하여 판별할 수 있다(도 13b의 클래스 변수 정의 참조). 예를 들어, 한문고서 서순정렬 장치는 해당 클래스 판별 결과(분류 결과)를 기초로 원문 이미지에 분홍 네모(본문), 파란 세모(우 세주), 빨간 세모(좌세주)로 표시할 수 있다(도 5, 도 6, 도 13b 참조). 도 13a는 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 서순 정렬 및 디지털 텍스트 생성 과 정을 설명하기 위한 흐름도이고, 도 13b는 서순 정렬 및 디지털 텍스트 생성 과정의 알고리즘에 대한 의사코드 를 나타낸 도면이다. 도 13a는 한문고서 서순정렬 장치가 도 4의 S300 단계를 수행하는 과정을 구체적으로 나타낸 것이다. 도 13a에 도시한 바와 같이, S300 단계는 S310 단계 내지 S360 단계를 포함하며, S360 단계는 S361 단계 내지 S367 단계를 포함한다. 현 주열 서순정렬 및 디지털 텍스트 생성을 수행하기 위해서 한문고서 서순정렬 장치는 제1 이동 경로 (DOWN1 리스트), 제2 이동 경로(UP2 리스트) 및 두 리스트에 포함된 박스에 대응하는 자형(character) 정보가 필요하다(S310). 한문고서 서순정렬 장치는 제1 이동 경로(DOWN1 리스트)에 포함된 박스와 제2 이동 경로(UP2 리스트)에 포 함된 박스를 기초로, 현 주열 박스 리스트에 포함된 OCR 검출박스를 본문, 좌세주 및 우세주로 분류한다. 즉, 한문고서 서순정렬 장치는 제1 이동 경로 및 제2 이동 경로를 기초로 현 주열 박스 리스트에 포함된 각 박 스에 대하여 본문/좌세주/우세주 클래스를 판별한다(S320). 상술한 판별 결과(분류 결과)를 기초로 한문고서 서순정렬 장치는 원문 이미지에서 현 주열의 본문부와 세 주부의 경계를 형성한다(S340). 구체적으로, 한문고서 서순정렬 장치는 본문/세주 클래스 판별 결과를 바탕 으로 현 주열의 수직방향을 따라 본문부와 세주부의 경계(또는 도 5의 세부열 경계)를 형성할 수 있다. S360 단계는 서순정렬 및 디지털 텍스트 출력 단계이다. 한문고서 서순정렬 장치는 본문부와 세주부의 경계 를 이용하여 현 주열의 박스 리스트에 포함된 박스에 대응하는 자형의 서순을 결정하고, 상기 서순에 따라 상기 자형의 서순을 정렬하여 현 주열의 디지털 텍스트를 생성하고 출력한다. 전술한 대로, S360 단계는 S361 단계 내지 S367 단계를 포함한다. S361 내지 S366 단계는 본문부와 세주부의 경계(또는 세부열 경계)를 기준으로 서로 분리된 각 세부열 군집의 서순을 정렬하고 각 세부열 군집에 대한 디지털 텍스트를 생성하고 출력하는 단계이다. 본 명세서에서는 본문 박스가 하나의 세부열 군집을 형성하는 경우는 본문 세부열이라고 지칭하고, 좌세주 및/또는 우세주가 하나의 세부열 군집을 형성하는 경우는 세주 세부열이라고 지칭한다. 한문고서 서순정렬 장치는 현 주열의 최상부의 세부열 군집부터 아래 방향으로 진행하면서 각 세부열 군집 의 디지털 텍스트를 생성, 출력한다. 우선, 한문고서 서순정렬 장치는 현재 분석 대상인 세부열 군집 내 본문부/우세주부/좌세주부의 스트링을 생성한다(S361). 그리고, 한문고서 서순정렬 장치는 현 세부열(현재 분석 대상인 세부열 군집)이 본문 세부 열인지 세주 세부열인지 판단하고(S362), 본문 세부열인 경우 본문에 해당하는 디지털 텍스트를 생성하여 출력 하고(S363), 세주 세부열인 경우 우세주와 좌세주에 해당하는 디지털 텍스트를 생성하여 출력한다(S364). 본문부와 세주부 경계의 상하로 라인분할된 각각의 세부열 군집들은 상하 서순(위에서 아래 방향, 도 13b의 sub_col_num 변수 정의 참조)을 따른다. 본문 세부열 내부에 단일열로 나열된 박스들은 단순히 상하 서순을 따 르며, 세주 세부열의 경우 우세주(상하)에서 좌세주(상하)로 향하는 서순을 따른다. 본 발명에 따른 근접문자 탐지 기반 한문고서 서순정렬 방법 및 장치는 본문/세주의 클래스 판별이 가능하다. 따라서 상기 방법 및 장치 는 최종적인 서순정렬 후 디지털 텍스트 생성 시 세주의 앞뒤로 괄호를 사용하거나 폰트를 차등 적용하는 방법 을 통하여 본문과 세주의 구분을 제공할 수 있다. 한문고서 서순정렬 장치는 현 세부열에 대한 디지털 텍스트 생성 작업이 완료되면, 다음 세부열이 존재하는 지 확인하고(S365), 존재하는 경우 다음(하부) 세부열로 이동하여(S366), 서순정렬 및 디지털 텍스트 생성, 출 력 작업(S361 내지 S364)을 반복한다. 다음 세부열이 존재하지 않는 경우, 현 주열에 대한 디지털 텍스트 생성 및 출력이 완료된다(S367). 다른 예로, 한문고서 서순정렬 장치는 S361 내지 S366 단계를 반복하면서 각 세부열 군집에 대한 디지털 텍스트를 생성 한 후, S367 단계에서 현 주열에 속한 각 세부열 군집에 대하여 생성된 모든 디지털 텍스트를 결합하여 현 주열 의 디지털 텍스트를 생성하고, 이를 출력할 수도 있다. 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법은 도면에 제시된 흐름도를 참조로 하여 설명되었다. 간단 히 설명하기 위하여 상기 방법은 일련의 블록들로 도시되고 설명되었으나, 본 발명은 상기 블록들의 순서에 한 정되지 않고, 몇몇 블록들은 다른 블록들과 본 명세서에서 도시되고 기술된 것과 상이한 순서로 또는 동시에 일 어날 수도 있으며, 동일한 또는 유사한 결과를 달성하는 다양한 다른 분기, 흐름 경로, 및 블록의 순서들이 구 현될 수 있다. 또한, 본 명세서에서 기술되는 방법의 구현을 위하여 도시된 모든 블록들이 요구되지 않을 수도 있다. 도 14는 한문고서에 대한 디지털 텍스트 생성 예시를 나타낸 도면이다. 도 14는 본 발명에 따른 근접문자 탐지 기반 한문고서 서순정렬 방법 및 장치의 실제 적용 예시로서, 한문 고서 의 원문 이미지에 대한 디지털 텍스트를 생성한 모습을 표현하였다. 도 14에 도시한 바와 같이, 본 발명에 따르면 기울기나 왜곡이 없는 원문 이미지(img1)는 물론, 근접문자 탐지 기법을 활용하여 기울기가 있는 원문 이미지(img2)나 왜곡이 있는 원문 이미지(img3)에 대해서도 동일한 디지털 텍스트(dt1)의 추출이 가능하다. 본 발명에 따를 때, 2도의 기울기를 가진 원문 이미지에서 추출한 디지털 텍스 트에서 95%의 신뢰도를 보였다. AIHub 한문고서 DB에서 50,000장 가량의 고서 이미지를 분석한 결과, 99%의 고 서가 2도 이내의 기울기를 가지고 있는 것으로 확인되었다. 그러므로, 본 발명에 따른 한문고서 서순정렬 방법 은 대부분의 고서 이미지에서 높은 신뢰도를 가진 산출물을 얻을 수 있는 방법이라고 하겠다. 따라서, 본 발명 은 고문헌 원문텍스트 제작의 효율성을 높이는 효과가 있다. 도 15는 본 발명의 실시예에 따른 한문고서 서순정렬 방법을 설명하기 위한 흐름도이다. 도 15를 참조하면, 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법은 S510 단계 내지 S600 단계를 포함하여 구성된다. 도 15에 도시된 한문고서 서순정렬 방법은 일 실시예에 따른 것이고, 본 발명에 따른 한문고서 서순정렬 방법의 단계들 이 도 15에 도시된 실시예에 한정되는 것은 아니며, 필요에 따라 부가, 변경 또는 삭제될 수 있다. S510 단계는 한문고서 서순정렬 장치가 원문이미지의 OCR 결과물을 읽어들이는 단계이다. 즉, 상기 OCR 결 과물이 한문고서 서순정렬 장치에 입력된다. 상기 OCR 결과물에 포함되는 정보는 표 1과 같다. S520 단계는 분석 대상 박스를 선정하는 단계이다. 한문고서 서순정렬 장치는 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정한다. 한문 고서 서순정렬 장치는, 상기 OCR 검출박스 중에서, 과거 분석 대상 주열의 박스 리스트에 포함된 박스를 제 외하여 분석 대상 박스를 선정한다. S530 단계는 다중 스캔 단계이다. 한문고서 서순정렬 장치는 분석 대상 박스에 대한 다중 스캔을 통해 제1 이동 경로 및 제2 이동 경로를 생 성한다. 본 실시예에서는 한문고서 서순정렬 장치가 4중 스캔을 통해 제1 이동 경로 및 제2 이동 경로를 생 성한다. 4중 스캔을 통해 생성된 정보는 주열 라인분할, 본문/세주 분류 및 세부열 라인분할의 기초 정보로 활용된다. 4 중 스캔에 포함된 각 스캔의 명칭과, 각 스캔의 목적, 산출물은 표 2에 나타낸 바 있다. 본 단계에서 한문고서 서순정렬 장치는, 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연 속 탐지 방법을 이용하여, 현재 분석 대상 주열의 본문과 우세주에 해당하는 박스로 구성된 제1 이동경로와, 상 기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이동경로를 생성한다. 상기 근접 박스 연속 탐지 방법은, 상기 분석 대상 박스 중에서 최초의 기준박스를 설정하고, 기준박스의 종방 향에 대해서는 선탐지 기법으로 근접 박스를 탐지하고, 기준박스의 횡방향에 대해서는 점탐지 기법으로 근접 박 스를 탐지하며, 탐지 결과를 바탕으로 소정의 기준에 따라 새로운 기준박스를 결정하는 것을 반복하며, 소정의 조건에 도달하면 탐지를 종료하는 것이다. 상기 선탐지 기법은, 상기 분석 대상 박스 중에서 기준박스의 x범위에 해당하는 영역을 가지고 있는 박스를 탐 지하는 기법이다. 다만, 한문고서 서순정렬 장치는 기준박스가 아닌 박스 간에도 선탐지 기법을 통해 선접촉 관계에 있는지 여부를 판단할 수 있다.상기 점탐지 기법은, 상기 분석 대상 박스 중에서, 박스 중심의 y좌표가 기준박스의 y범위에 포함되는 박스를 탐지하는 기법이다. 다만, 한문고서 서순정렬 장치는 기준박스가 아닌 박스 간에도 점탐지 기법을 통해 점접촉 관계에 있는지 여부를 판단할 수 있다. 도면에는 도시하지 않았으나, S530 단계는 S531 내지 S534 단계를 포함한다. 한문고서 서순정렬 장치는 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 분석 대상 박스 중에서 최우 측 박스를 기준으로, 근접 박스 연속 탐지 방법을 이용한 제1 상향 스캔을 통해 현재 분석 대상 주열의 최우상 단 박스를 판단한다(S531). 그리고 한문고서 서순정렬 장치는, 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐 지 방법을 이용하여, 분석 대상 박스 중에서 상기 최우상단 박스를 최초의 기준박스인 시작점으로 하고, 분석 대상 박스 중에서 최우하단 박스를 종점으로 하는 제1 하향 스캔을 통해 제1 이동경로를 생성한다(S532). 한문 고서 서순정렬 장치는, 제1 이동 경로를 생성하는 과정에서, 분석 대상 박스 중에서, 기준박스의 하부에 존 재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상 기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의 박스를 선정하고, 선정된 3개의 박스의 y범위와 중심 의 y좌표를 기초로 새로운 기준박스를 결정하는 작업을 수행할 수 있다. 그리고 한문고서 서순정렬 장치는, 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 상기 최우상단 박스 를 최초의 기준박스로 설정하고, 근접 박스 연속 탐지 방법을 이용한 제2 하향 스캔을 통해 현재 분석 대상 주 열의 최좌하단 박스를 판단한다(S533). 마지막으로, 한문고서 서순정렬 장치는, 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연 속 탐지 방법을 이용하여, 상기 최좌하단 박스를 최초의 기준박스인 시작점으로 하고, 현재 분석 대상 주열의 최좌상단 박스를 종점으로 하는 제2 상향 스캔을 통해 제2 이동경로를 생성한다(S534). 한문고서 서순정렬 장치 는, 제2 이동 경로를 생성하는 과정에서, 분석 대상 박스 중에서, 기준박스의 상부에 존재하면서 기준박스 의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중 에서 기준박스에 근접한 순서대로 3개의 박스를 선정하고, 선정된 3개의 박스의, y범위, 중심의 y좌표 및 상기 제1 이동경로에 포함되는지 여부를 기초로 새로운 기준박스를 결정하는 작업을 수행할 수 있다. S540 단계는 현 주열의 박스 리스트를 생성하는 단계이다. 한문고서 서순정렬 장치는, 제1 이동경로에 포함된 박스와 제2 이동경로에 포함된 박스의 합집합을 구하여 현재 분석 대상 주열의 박스 리스트를 생성한다. S550 단계는 주열 라인 분할 단계이다. 본 단계에서 한문고서 서순정렬 장치는, 현재 분석 대상 주열의 박스 리스트를 기초로 상기 원문 이미지에 서 현재 분석 대상 주열과 다음 분석 대상 주열 간의 경계를 형성한다. S560 단계는 본문/세주 분류 단계이다. 한문고서 서순정렬 장치는, 제1 이동경로에 포함된 박스와 제2 이동경로에 포함된 박스를 기초로, 현재 분 석 대상 주열의 박스 리스트에 포함된 박스를 본문, 좌세주 및 우세주로 분류한다. 본문 박스는 제1 이동경로 박스 리스트와 제2 이동경로 박스 리스트의 교집합, 우세주 박스는 제1 이동경로 박스 리스트와 제2 이동경로 박스 리스트의 차집합, 좌세주 박스는 제2 이동경로 박스 리스트와 제1 이동경로 박스 리스트의 차집합을 구하 여 판별할 수 있다(도 12 참조). S570 단계는 세부열 라인분할 단계이다. 본 단계에서 한문고서 서순정렬 장치는, S560 단계의 분류 결과(판별 결과)를 기초로 상기 원문 이미지에서 현재 분석 대상 주열의 본문부와 세주부의 경계를 형성한다. S580 단계는 서순 결정 단계이다. 한문고서 서순정렬 장치는, 현 주열의 본문부와 세주부의 경계를 기초로 현 주열의 박스 리스트에 포함된 박스에 대응하는 자형의 서순을 결정한다. 한문고서 서순정렬 장치는, S560 단계의 분류 결과를 기초로, 본 문부와 세주부의 경계 상하로 라인분할된 세부열 군집을, 본문 세부열과 세주 세부열 중 어느 하나로 판별할 수있다. 한문고서 서순정렬 장치는 본문 세부열에 내부에 단일열로 나열된 박스들에는 상하 서순을 적용하여 자형의 서순을 결정하며, 세주 세부열의 경우 우세주에 우선 상하 서순을 적용한 다음 좌세주에 상하 서순을 적 용하는 방식으로 자형의 서순을 결정한다. S590 단계는 현 주열의 디지털 텍스트를 생성하는 단계이다. 한문고서 서순정렬 장치는, S580 단계에서 결정된 서순에 따라 상기 자형을 정렬하여 현재 분석 대상 주열 의 디지털 텍스트를 생성한다. 즉, 한문고서 서순정렬 장치는 각 세부열 군집에 대해 결정된 서순을 적용하 여 자형을 배치함으로써 현 주열의 디지털 텍스트를 생성할 수 있다. S600 단계는 다음 주열이 존재하는지 판단하는 단계이다. 한문고서 서순정렬 장치는 현 주열의 다음 주열이 존재하는 경우 S520 단계 내지 S590 단계를 다시 수행하 고, 그렇지 않은 경우 프로세스를 종료한다. 한편 도 15를 참조한 설명에서, 각 단계는 본 발명의 구현예에 따라서, 추가적인 단계들로 더 분할되거나, 더 적은 단계들로 조합될 수 있다. 또한, 일부 단계는 필요에 따라 생략될 수도 있고, 단계 간의 순서가 변경될 수 도 있다. 아울러, 기타 생략된 내용이라 하더라도 도 4 내지 도 14의 내용은 도 15의 내용에 적용될 수 있다. 또한, 도 15의 내용은 도 4 내지 도 14의 내용에 적용될 수 있다. 도 16는 본 발명의 실시예에 따른 한문고서 서순정렬 방법을 구현하기 위한 컴퓨터 시스템을 나타낸 블록도이다. 본 발명의 일 실시예에 따른 한문고서 서순정렬 장치는 도 16에 도시한 컴퓨터 시스템의 형태 로 구현될 수 있다. 도 16을 참조하면, 컴퓨터 시스템은, 버스를 통해 통신하는 적어도 하나의 프로세서, 메모리 , 입력 인터페이스 장치, 출력 인터페이스 장치 및 저장 장치 중 적어도 하나를 포함 할 수 있다. 컴퓨터 시스템은 또한 네트워크에 결합된 통신 장치를 더 포함할 수 있다. 프로세서 는 중앙 처리 장치(central processing unit, CPU)이거나, 또는 메모리 또는 저장 장치에 저장된, 컴퓨터에서 판독할 수 있는 명령을 실행하는 반도체 장치일 수 있다. 메모리 및 저장 장치(104 0)는 다양한 형태의 휘발성 또는 비휘발성 저장 매체를 포함할 수 있다. 예를 들어, 메모리는 ROM(read only memory) 및 RAM(random access memory)를 포함할 수 있다. 본 기재의 실시예에서 메모리는 프로세서의 내부 또 는 외부에 위치할 수 있고, 메모리는 이미 알려진 다양한 수단을 통해 프로세서와 연결될 수 있다. 메모리는 다 양한 형태의 휘발성 또는 비휘발성 저장 매체이며, 예를 들어, 메모리는 읽기 전용 메모리(read-only memory, ROM) 또는 랜덤 액세스 메모리(random access memory, RAM)를 포함할 수 있다. 따라서, 본 발명의 실시예는 컴퓨터에 구현된 방법으로서 구현되거나, 컴퓨터 실행 가능 명령이 저장된 비일시 적 컴퓨터 판독 가능 매체로서 구현될 수 있다. 한 실시예에서, 프로세서에 의해 실행될 때, 컴퓨터 판독 가능 명령은 본 기재의 적어도 하나의 양상에 따른 방법을 수행할 수 있다. 통신 장치는 유선 신호 또는 무선 신호를 송신 또는 수신할 수 있다. 또한, 본 발명의 실시예에 따른 방법은 다양한 컴퓨터 수단을 통해 수행될 수 있는 프로그램 명령 형태로 구현 되어, 컴퓨터 판독 가능 매체에 기록될 수 있다. 상기 컴퓨터 판독 가능 매체는 프로그램 명령, 데이터 파일, 데이터 구조 등을 단독으로 또는 조합하여 포함할 수 있다. 상기 컴퓨터 판독 가능 매체에 기록되는 프로그램 명령은, 본 발명의 실시예를 위해 특별히 설계되어 구성된 것이거나, 컴퓨터 소프트웨어 분야의 통상의 기술자에게 공지되어 사용 가능한 것일 수도 있다. 컴퓨터 판독 가능 기록 매체는 프로그램 명령을 저장하고 수행하도록 구성된 하드웨어 장치를 포함할 수 있다. 예를 들 어, 컴퓨터 판독 가능 기록 매체는 하드 디스크, 플로피 디스크 및 자기 테이프와 같은 자기 매체(magnetic media), CD-ROM, DVD와 같은 광 기록 매체(optical media), 플롭티컬 디스크(floptical disk)와 같은 자기-광 매체(magneto-optical media), 롬(ROM), 램(RAM), 플래시 메모리 등일 수 있다. 프로그램 명령은 컴파일러에 의해 만들어지는 것과 같은 기계어 코드뿐만 아니라, 인터프리터 등을 통해 컴퓨터에 의해 실행될 수 있는 고급 언어 코드를 포함할 수 있다. 전술한 대로, 메모리 및 저장 장치는 컴퓨터에서 판독 가능한 명령들을 저장한다. 프로세서 는 상기 명령들을 실행하도록 구현된다. 또한, 메모리 및 저장 장치는 한문고서 원문 이미지의 OCR 결과물을 저장할 수 있으며, 프로세서는 상기 OCR 결과물을 읽어들이고 상기 명령들을 실행하여 상기 OCR결과물에 포함된 정보를 처리할 수 있다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 명령들을 실행함으로써, 상기 OCR 결과물에 포함된 한문고서 원문 이미지의 OCR 검출박스 중에서, 분석 대상 박스를 선정하고, 상기 분석 대 상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 현재 분석 대상 주열의 본 문과 우세주에 해당하는 박스로 구성된 제1 이동경로와, 상기 주열의 본문과 좌세주에 해당하는 박스로 구성된 제2 이동경로를 생성하며, 상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스의 합집합 을 구하여 현재 분석 대상 주열의 박스 리스트를 생성하도록 구성된다. 상기 근접 박스 연속 탐지 방법은, 상기 분석 대상 박스 중에서 최초의 기준박스를 설정하고, 기준박스 의 종방향에 대해서는 선탐지 기법으로 근접 박스를 탐지하고, 기준박스의 횡방향에 대해서는 점탐지 기법으로 근접 박스를 탐지하며, 탐지 결과를 바탕으로 소정의 기준에 따라 새로운 기준박스를 결정하는 것을 반복하며, 소정의 조건에 도달하면 탐지를 종료하는 것이다. 상기 선탐지 기법은, 상기 분석 대상 박스 중에서 기준박스의 x범위에 해당하는 영역을 가지고 있는 박스를 탐 지하는 기법이다. 상기 점탐지 기법은, 상기 분석 대상 박스 중에서, 박스 중심의 y좌표가 기준박스의 y범위에 포함되는 박스를 탐지하는 기법이다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 제1 이동경로와 상기 제2 이동경로를 생 성하는 과정에서, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이 용하여, 상기 분석 대상 박스 중에서 최우상단 박스를 최초의 기준박스인 시작점으로 하고, 상기 분석 대상 박 스 중에서 최우하단 박스를 종점으로 하는 제1 하향 스캔을 통해 상기 제1 이동경로를 생성하고, 상기 분석 대상 박스의 좌표 정보와 크기 정보를 기초로, 상기 최우상단 박스를 최초의 기준박스로 설정하고, 근접 박스 연속 탐지 방법을 이용한 제2 하향 스캔을 통해 현재 분석 대상 주열의 최좌하단 박스를 판단하며, 상기 분 석 대상 박스의 좌표 정보와 크기 정보를 기초로, 근접 박스 연속 탐지 방법을 이용하여, 상기 최좌하단 박스를 최초의 기준박스인 시작점으로 하고, 현재 분석 대상 주열의 최좌상단 박스를 종점으로 하는 제2 상향 스캔을 통해 제2 이동경로를 생성하도록 구성된다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 분석 대상 박스의 좌표 정보와 크기 정 보를 기초로, 상기 분석 대상 박스 중에서 최우측 박스를 기준으로, 근접 박스 연속 탐지 방법을 이용한 제1 상 향 스캔을 통해 상기 최우상단 박스를 판단하도록 구성된다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 OCR 검출박스 중에서, 과거 분석 대상 주열의 박스 리스트에 포함된 박스를 제외하여 상기 분석 대상 박스를 선정하도록 구성된다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 현재 분석 대상 주열의 박스 리스트를 기초로 상기 원문 이미지에서 현재 분석 대상 주열과 다음 분석 대상 주열 간의 경계를 형성하는 작업을 추가적 으로 수행하도록 구성된다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 제1 이동경로에 포함된 박스와 상기 제2 이동경로에 포함된 박스를 기초로, 상기 현재 분석 대상 주열의 박스 리스트에 포함된 박스를 본문, 좌세주 및 우세주로 분류하고, 상기 분류 결과를 기초로 상기 원문 이미지에서 현재 분석 대상 주열의 본문부와 세 주부의 경계를 형성하며, 상기 본문부와 세주부의 경계를 기초로 상기 현재 분석 대상 주열의 박스 리스트 에 포함된 박스에 대응하는 자형의 서순을 결정하는 작업을 추가적으로 수행하도록 구성된다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 서순에 따라 상기 자형을 정렬하여 현재 분석 대상 주열의 디지털 텍스트를 생성하는 작업을 추가적으로 수행하도록 구성된다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 제1 이동경로를 생성하는 과정에서, 상 기 분석 대상 박스 중에서, 기준박스의 하부에 존재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를 탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의 박스 를 선정하고, 선정된 3개의 박스의 y범위와 중심의 y좌표를 기초로 새로운 기준박스를 결정하는 작업을 수행한 다. 본 발명의 일 실시예에서, 상기 적어도 하나의 프로세서는, 상기 제2 이동경로를 생성하는 과정에서, 상 기 분석 대상 박스 중에서, 기준박스의 상부에 존재하면서 기준박스의 x범위에 해당하는 영역을 가지는 박스를탐지하고, 3개 이상의 박스가 탐지되는 경우, 상기 탐지된 박스 중에서 기준박스에 근접한 순서대로 3개의 박스 를 선정하고, 선정된 3개의 박스의, y범위, 중심의 y좌표 및 상기 제1 이동경로에 포함되는지 여부를 기초로 새 로운 기준박스를 결정하는 작업을 수행한다. 이상, 도 16을 참조하여 본 발명의 실시예에 따른 한문고서 서순정렬 방법을 구현하기 위한 컴퓨터 시스템, 즉 한문고서 서순정렬 장치의 구성을 설명하였다. 도 16을 참조한 설명에서 생략된 내용이라 하더라도 도 4 내 지 도 15의 내용은 도 16의 내용에 적용될 수 있다. 또한, 도 16의 내용은 도 4 내지 도 15의 내용에 적용될 수 있다. 참고로, 본 발명의 실시예에 따른 구성 요소들은 소프트웨어 또는 DSP(digital signal processor), FPGA(Field Programmable Gate Array) 또는 ASIC(Application Specific Integrated Circuit)와 같은 하드웨어 형태로 구현 될 수 있으며, 소정의 역할들을 수행할 수 있다. 그렇지만 '구성 요소들'은 소프트웨어 또는 하드웨어에 한정되는 의미는 아니며, 각 구성 요소는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구성될 수도 있다. 따라서, 일 예로서 구성 요소는 소프트웨어 구성 요소들, 객체지향 소프트웨어 구성 요소들, 클래스 구성 요소 들 및 태스크 구성 요소들과 같은 구성 요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프로 그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로 코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테 이블들, 어레이들 및 변수들을 포함한다. 구성 요소들과 해당 구성 요소들 안에서 제공되는 기능은 더 작은 수의 구성 요소들로 결합되거나 추가적인 구 성 요소들로 더 분리될 수 있다. 한편, 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수행될 수 있음을 이해할 수 있을 것이다. 이들 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있으므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서를 통해 수행되는 그 인스트럭션들이 흐름도 블록(들)에서 설명된 기능들을 수 행하는 수단을 생성하게 된다. 컴퓨터 프로그램 인스트럭션들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로 세싱 장비 상에 탑재되는 것도 가능하므로, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비 상에서 일 련의 동작 단계들이 수행되어 컴퓨터로 실행되는 프로세스를 생성해서 컴퓨터 또는 기타 프로그램 가능한 데이 터 프로세싱 장비를 수행하는 인스트럭션들은 흐름도 블록(들)에서 설명된 기능들을 실행하기 위한 단계들을 제 공하는 것도 가능하다. 또한, 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 또, 몇 가지 대체 실행 예들에서는 블록들에서 언급된 기 능들이 순서를 벗어나서 발생하는 것도 가능함을 주목해야 한다. 예컨대, 잇달아 도시되어 있는 두 개의 블록들 은 사실 실질적으로 동시에 수행되는 것도 가능하고 또는 그 블록들이 때때로 해당하는 기능에 따라 역순으로 수행되는 것도 가능하다. 상기에서는 본 발명의 바람직한 실시예를 참조하여 설명하였지만, 해당 기술 분야의 숙련된 당업자는 하기의 특 허 청구의 범위에 기재된 본 발명의 사상 및 영역으로부터 벗어나지 않는 범위 내에서 본 발명을 다양하게 수정 및 변경시킬 수 있음을 이해할 수 있을 것이다."}
{"patent_id": "10-2024-0028044", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 OCR 기반의 고문헌 디지털 텍스트화 프로세스를 나타낸 도면이다. 도 2a 및 도 2b는 고문헌의 서순을 설명하기 위한 도면이다. 도 3은 픽셀 투영 기법과 중심좌표 투영 기법의 라인분할 성능을 비교한 결과를 설명하기 위한 도면이다. 도 4는 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법을 설명하기 위한 흐름도이다. 도 5는 근접문자 탐지 기반 4중 스캔에 대한 개요도이다. 도 6은 근접문자 탐지 기반 4중 스캔의 적용 예시에 관한 도면이다. 도 7a 및 도 7b는 근접박스 연속탐지 방법을 설명하기 위한 도면이다. 도 8a은 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제1 상향 스캔 과정을 설명하기 위한 흐 름도이다. 도 8b는 제1 상향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. 도 9a는 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제1 하향 스캔 과정을 설명하기 위한 흐 름도이다. 도 9b는 제1 하향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. 도 10a는 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제2 하향 스캔 과정을 설명하기 위한 흐름도이다. 도 10b는 제2 하향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. 도 11a는 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 제2 상향 스캔 과정을 설명하기 위한 흐름도이다. 도 11b는 제2 상향 스캔 과정의 알고리즘에 대한 의사코드(pseudo code)를 나타낸 도면이다. 도 12는 본문, 좌세주 및 우세주의 클래스 판별 조건에 관한 도면이다. 도 13a는 본 발명의 일 실시예에 따른 한문고서 서순정렬 방법에 포함된 서순 정렬 및 디지털 텍스트 생성 과정 을 설명하기 위한 흐름도이다. 도 13b는 서순 정렬 및 디지털 텍스트 생성 과정의 알고리즘에 대한 의사코드를 나타낸 도면이다. 도 14는 한문고서에 대한 디지털 텍스트 생성 예시를 나타낸 도면이다. 도 15는 본 발명의 실시예에 따른 한문고서 서순정렬 방법을 설명하기 위한 흐름도이다.도 16는 본 발명의 실시예에 따른 한문고서 서순정렬 방법을 구현하기 위한 컴퓨터 시스템을 나타낸 블록도이다."}
