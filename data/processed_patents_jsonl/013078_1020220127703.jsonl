{"patent_id": "10-2022-0127703", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0001557", "출원번호": "10-2022-0127703", "발명의 명칭": "반려 동물의 식별을 위한 객체를 촬영하기 위한 방법 및 장치", "출원인": "주식회사 펫나우", "발명자": "박대현"}}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "반려 동물의 식별을 위한 객체를 촬영하기 위한 방법에 있어서, 상기 반려 동물이 포함된 영상을 획득하는 단계; 상기 영상에서 상기 반려 동물의 식별을 위한 객체를 검출하는 단계; 및 상기 검출된 객체의 이미지가 식별 또는 학습에 적합한지 여부를 나타내는 적합성 정보를 사용자 인터페이스 화면을 통해 출력하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서, 상기 검출된 객체의 위치로 초점을 설정한 상태에서 다음 영상을 촬영하는 단계를 더 포함하고, 상기 반려 동물이 포함된 영상을 획득하는 단계는 이전의 프레임에 촬영된 이미지에서 검출된 상기 객체의 위치로 초점이 설정된 상태로 상기 반려 동물을 촬영하여 상기 영상을 생성하는 단계를 포함하고, 매 N+1 번째 프레임의 영상을 촬영할 때 초점의 위치는 N 번째 프레임에서 검출된 상기 반려 동물의 식별을 위한 객체의 위치에 맞게 변경되는 방법."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서, 상기 적합성 정보를 출력하는 단계는, 촬영중인 상기 영상에서 반려 동물의 종을 식별하는 단계; 및 상기 반려 동물의 종이 특정 종에 해당하는지 여부를 나타내는 식별 결과를 상기 사용자 인터페이스 화면을 통해 출력하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서, 상기 적합성 정보를 사용자 인터페이스 화면을 통해 출력하는 단계는 상기 적합성 정보를 나타내는 문자를 출력하거나 아이콘을 상기 영상에서 상기 검출된 객체의 위치에 표시하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서, 상기 적합성 정보를 나타내는 문자 또는 아이콘의 형상은 상기 검출된 객체의 이미지가 식별 또는 학습에 적합한지에 따라 변경되어 표시되는 방법."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "공개특허 10-2023-0001557-3-반려 동물의 식별을 위한 객체를 촬영하기 위한 장치에 있어서, 상기 반려 동물이 포함된 영상을 생성하는 카메라; 및 상기 영상에서 상기 반려 동물의 식별을 위한 객체를 검출하고, 상기 검출된 객체의 이미지가 식별 또는 학습에적합한지 여부를 나타내는 적합성 정보를 사용자 인터페이스 화면을 통해 출력하는, 프로세서를 포함하는 장치."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서, 상기 프로세서는, 상기 검출된 객체의 위치로 초점을 설정한 상태에서 다음 영상을 촬영하도록 상기 카메라를 제어하며, 이전의 프레임에 촬영된 이미지에서 검출된 상기 객체의 위치로 초점이 설정된 상태로 상기 반려 동물을 촬영하여 상기 영상을 생성하고, 매 N+1 번째 프레임의 영상을 촬영할 때 초점의 위치는 N 번째 프레임에서 검출된 상기 반려 동물의 식별을 위한 객체의 위치에 맞게 변경되는 장치."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제6항에 있어서, 상기 프로세서는, 촬영중인 상기 영상에서 반려 동물의 종을 식별하고, 상기 반려 동물의 종이 특정 종에 해당하는지 여부를 나타내는 식별 결과를 상기 사용자 인터페이스 화면을 통해 출력하는 장치."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서, 상기 프로세서는 상기 디스플레이 상에 상기 적합성 정보를 나타내는 문자를 출력하거나 아이콘을 상기 영상에서 상기 검출된 객체의 위치에 표시하는 장치."}
{"patent_id": "10-2022-0127703", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서, 상기 적합성 정보를 나타내는 문자 또는 아이콘의 형상은 상기 검출된 객체의 이미지가 식별 또는 학습에 적합한지에 따라 변경되어 표시되는 장치."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 반려 동물의 식별을 위한 객체의 영상 품질을 향상시킬 수 있는 방법 및 장치를 제공한다. 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하기 위한 방법은, 상기 반려 동물이 포함된 영상을 획득하는 단계와, 상기 영상에서 상기 반려 동물의 식별을 위한 객체를 검출하는 단계와, 상기 검출된 객체의 위치로 초점을 설정 한 상태에서 다음 영상을 촬영하는 단계를 포함한다. 본 발명에 따르면, 촬영된 영상에서 반려 동물의 식별을 위 한 객체를 검출하고 해당 객체의 위치에 지속적으로 초점이 위치하도록 함으로써 보다 선명한 품질의 객체 식별 용 이미지가 획득되고, 그리하여 인공 지능 기반의 학습 또는 식별에 사용 가능한 반려 동물의 객체 식별용 이미 지를 축적할 수 있다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 반려 동물의 식별을 위한 객체를 촬영하기 위한 방법 및 장치에 관한 것으로, 보다 구체적으로 인공 지능 기반의 학습 또는 식별에 적합한 반려 동물의 식별용 객체의 이미지를 획득하기 위한 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "현대 사회에서 사람과 함께 생활하면서 정서적으로 의지할 수 있는 반려 동물에 대한 수요가 높아지고 있다. 이 에 따라, 반려 동물에 대한 건강 관리 등을 위하여 다양한 반려 동물에 대한 정보를 데이터베이스화 하여 관리 할 필요성이 증가하고 있다. 반려 동물을 관리하기 위하여 사람의 지문과 같이 반려 동물의 식별 정보가 필요하 며, 반려 동물에 따라 사용될 수 있는 객체가 각각 정의될 수 있다. 예를 들어, 강아지의 경우 비문(코 주름의 형상)이 각자 상이하므로 각 강아지마다 비문을 식별 정보로 사용할 수 있다. 도 1의 (a)에 도시된 것과 같이, 비문을 등록하는 방법은 사람의 지문 또는 안면을 등록하는 것과 같이 반려 동 물의 코를 포함한 안면을 촬영하고(S110) 비문을 포함한 이미지를 데이터베이스에 저장 및 등록하는 과정(S12 0)에 의해 수행된다. 또한, 비문을 조회하는 방법은 도 1의 (b)에 도시된 것과 같이 반려 동물의 비문을 촬영하 고(S130), 촬영된 비문과 일치하는 비문 및 이와 관련된 정보를 탐색하고(S140), 촬영된 비문과 일치하는 정보 를 출력하는 과정(S150)에 의해 수행될 수 있다. 도 1과 같이 반려 동물의 비문을 등록하고 조회하는 과정을 통 해 각 반려 동물을 식별하고 해당 반려 동물의 정보를 관리할 수 있다. 반려 동물의 비문 정보는 데이터베이스 에 저장되고 AI 기반의 학습 또는 식별을 위한 데이터로서 사용될 수 있다. 그러나, 반려 동물의 비문을 취득하고 저장함에 있어 몇 가지 문제점이 존재한다. 먼저, 사진은 촬영 각도, 초점, 거리, 크기, 환경 등에 따라 인식이 어려울 수 있다. 사람의 안면 인식 기술을 비문 인식에 적용하고자 하는 시도가 있었으나, 사람의 안면 정보는 충분한 데이터가 축적된 반면 반려 동물의 비문 정보는 충분한 데이터가 확보되지 않아 인식률이 낮다는 문제점이 있다. 구체적으로, AI 기반의 인식이 수 행되기 위하여는 기계가 학습할 수 있는 형태로 가공된 학습 데이터가 필요하나, 반려 동물의 비문은 충분한 데 이터가 축적되지 않아 비문 인식에 어려움이 있다. 또한, 반려 동물의 비문 인식을 위하여는 선명한 코 주름을 갖는 이미지가 요구되나, 사람과 달리 반려 동물은 잠시 동작을 멈추는 것과 같은 행위를 할 줄 모르기 때문에 선명한 코 주름 이미지를 취득하기가 쉽지 않다. 예 를 들어, 강아지는 계속 안면을 움직이고 혀를 낼름거리기 때문에 원하는 품질의 비문 이미지를 취득하기가 매 우 어렵다. 예를 들어, 도 2를 참조하면, 하단의 이미지들과 같이 코의 주름이 선명하게 촬영된 영상이 요구되 지만 실제로 촬영된 이미지는 대부분 상단의 이미지들과 같이 흔들림 등으로 인하여 코 주름이 선명하게 촬영되 지 못한 경우가 많다. 이러한 문제를 해결하기 위하여 강아지의 코를 강제로 고정시킨 상태로 촬영하는 방법들 이 고려되고 있으나, 반려 동물에게 강제적인 행위를 하도록 하기 때문에 부적절한 것으로 평가받고 있다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 반려 동물의 식별을 위한 객체의 영상 품질을 향상시킬 수 있는 방법 및 장치를 제공한다. 본 발명의 해결과제는 이상에서 언급된 것들에 한정되지 않으며, 언급되지 아니한 다른 해결과제들은 아래의 기 재로부터 당업자에게 명확히 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하기 위한 방법은, 상기 반려 동물이 포함된 영상을 획득 하는 단계와, 상기 영상에서 상기 반려 동물의 식별을 위한 객체를 검출하는 단계와, 상기 검출된 객체의 위치 로 초점을 설정한 상태에서 다음 영상을 촬영하는 단계를 포함한다. 본 발명에 따르면, 반려 동물이 포함된 영상을 획득하는 단계는 이전의 프레임에 촬영된 이미지에서 검출된 상 기 객체의 위치에 초점이 설정된 상태로 상기 반려 동물을 촬영하여 상기 영상을 생성하는 단계를 포함할 수 있 다. 본 발명에 따르면, 상기 영상에서 상기 반려 동물의 식별을 위한 객체를 검출하는 단계는, 상기 영상에서 상기 반려 동물의 종(種)을 결정하기 위한 제1 특징 영역을 설정하는 단계와, 상기 제1 특징 영역 내에서 상기 반려 동물의 종에 따라 상기 반려 동물의 식별을 위한 객체를 포함하는 제2 특징 영역을 설정하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 제2 특징 영역을 설정하는 단계는 상기 반려 동물의 식별을 위한 객체의 이미지가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하는 단계를 포함할 수 있다. 본 발명에 따르면, 상기 객체의 이미지가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하는 단계는, 상기 객체의 이미지의 품질이 기준 조건을 만족하는지 여부를 판단하는 단계와, 상기 품질이 기준 조건 을 만족하는 경우 상기 객체의 이미지를 서버로 전송하는 단계와, 상기 품질이 기준 조건을 만족하지 않는 경우 상기 객체의 이미지를 버리고 다음 영상에 대한 촬영을 수행하는 단계를 포함할 수 있다. 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하기 위한 장치는, 상기 반려 동물이 포함된 원본 영상을 생성하는 카메라와, 상기 영상에서 상기 반려 동물의 식별을 위한 객체를 검출하고, 상기 검출된 객체의 위치로 초점을 설정한 상태에서 다음 영상을 촬영하도록 상기 카메라를 제어하는 프로세서를 포함한다. 본 발명에 따르면, 상기 프로세서는 반려 동물이 포함된 영상을 획득하는 단계는 이전의 프레임에 촬영된 이미 지에서 검출된 상기 객체의 위치에 초점이 설정된 상태로 상기 반려 동물을 촬영하여 상기 영상을 생성하도록 상기 카메라를 제어할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 영상에서 상기 반려 동물의 종(種)을 결정하기 위한 제1 특징 영역을 설정하고, 상기 제1 특징 영역 내에서 상기 반려 동물의 식별을 위한 객체를 포함하는 제2 특징 영역을 설정할 수 있다. 본 발명에 따르면, 상기 프로세서는 상기 반려 동물의 식별을 위한 객체의 이미지가 인공 지능 기반의 학습 또 는 식별에 적합한지 여부를 판단할 수 있다. 본 발명에 따르면, 상기 프로세서는, 상기 객체의 이미지의 품질이 기준 조건을 만족하는지 여부를 판단하고, 상기 품질이 기준 조건을 만족하는 경우 상기 객체의 이미지를 서버로 전송하고, 상기 품질이 기준 조건을 만족 하지 않는 경우 상기 객체의 이미지를 버리고 다음 영상에 대한 촬영을 수행하도록 상기 카메라를 제어할 수 있 다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 따르면, 촬영된 영상에서 반려 동물의 식별을 위한 객체를 검출하고 해당 객체의 위치에 지속적으로 초점이 위치하도록 함으로써 보다 선명한 품질의 객체 식별용 이미지가 획득되고, 그리하여 인공 지능 기반의 학습 또는 식별에 사용 가능한 반려 동물의 객체 식별용 이미지(비문 이미지)를 축적할 수 있다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과는 이상에서 언급된 것들에 한정되지 않으며, 언급되지 아니한 다른 효과들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부한 도면을 참고로 하여 본 발명의 실시예들에 대하여 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 본 발명은 여러 가지 상이한 형태로 구현될 수 있으며 여기에서 설명하는 실시예들에 한정되지 않는다. 본 발명을 명확하게 설명하기 위해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 동일 또는 유사한 구성요소에 대해서는 동일한 참조 부호를 붙이도록 한다. 또한, 여러 실시예들에 있어서, 동일한 구성을 가지는 구성요소에 대해서는 동일한 부호를 사용하여 대표적인 실시예에서만 설명하고, 그 외의 다른 실시예에서는 대표적인 실시예와 다른 구성에 대해서만 설명하기로 한다. 명세서 전체에서, 어떤 부분이 다른 부분과 \"연결(또는 결합)\"되어 있다고 할 때, 이는 \"직접적으로 연결(또는 결합)\"되어 있는 경우뿐만 아니라, 다른 부재를 사이에 두고 \"간접적으로 연결(또는 결합)\"된 것도 포함한다. 또한, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다른 구성요소 를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 다르게 정의되지 않는 한, 기술적이거나 과학적인 용어를 포함해서 여기서 사용되는 모든 용어들은 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 것과 동일한 의미를 가지고 있다. 일 반적으로 사용되는 사전에 정의되어 있는 것과 같은 용어들은 관련 기술의 문맥 상 가지는 의미와 일치하는 의 미를 가지는 것으로 해석되어야 하며, 본 출원에서 명백하게 정의하지 않는 한, 이상적이거나 과도하게 형식적 인 의미로 해석되지 않는다. 본 문서에서는 강아지의 코 주름 형상(비문)을 활용하여 식별 정보를 추출하는 내용을 중심으로 설명하나, 본 발명에서 반려 동물의 범위는 강아지에 한정되지 않으며, 또한 식별 정보로 사용되는 특징으로서 비문에 한정되 지 않고 다양한 반려 동물의 신체적 특징이 사용될 수 있다. 앞서 설명한 바와 같이, AI 기반의 학습 또는 식별에 적합한 반려 동물의 비문 이미지가 충분하지 않고 반려 동 물의 비문 이미지는 그 품질이 낮을 가능성이 크기 때문에 AI 기반의 학습 또는 식별을 위하여 비문 이미지를 선별적으로 데이터베이스에 저장할 필요가 있다. 도 3은 본 발명에 따른 학습 또는 식별용 비문 이미지의 적합도 판단이 적용된 AI 기반의 반려 동물의 비문 관 리를 위한 절차를 도시한다. 본 발명은 반려 동물의 비문을 촬영한 후 촬영된 비문 이미지가 AI 기반의 학습 또 는 식별을 위한 데이터로서 적합한지 여부를 먼저 판단하고, 적합하다고 판단된 경우 AI 기반의 학습 또는 식별 을 위한 서버로 전송 및 저장하여 이후 학습 또는 식별을 위한 데이터로 사용한다. 도 3에 도시된 것과 같이, 본 발명에 따른 AI 기반의 학습 또는 식별을 위한 비문 관리 절차는 크게 비문 취득 절차와 비문 인식 절차를 포함한다. 본 발명에 따르면, 신규로 반려 동물의 비문을 등록할 때 반려 동물이 포함 된 영상을 촬영한 후 반려 동물의 얼굴 영역에서 비문 이미지를 추출하며, 특히 해당 비문 이미지가 해당 반려 동물의 식별 또는 학습을 위하여 적합한 지 여부를 먼저 판단한다. 촬영된 이미지가 식별 또는 학습에 적합하다 고 판단된 경우 해당 이미지가 서버(인공지능 신경망)로 전송되어 데이터베이스에 저장된다. 비문을 통해 반려 동물의 식별 정보를 조회하는 경우, 마찬가지로 반려 동물이 포함된 영상을 촬영한 후 반려 동물의 얼굴 영역에서 비문 이미지를 추출하며, 특히 해당 비문 이미지가 해당 반려 동물의 식별 또는 학습을 위하여 적합한지 여부를 먼저 판단한다. 촬영된 이미지가 식별 또는 학습에 적합하다고 판단된 경우 해당 이미 지가 서버로 전송되고 기존에 저장된 비문 이미지들과의 매칭을 통해 해당 반려 동물의 식별 정보를 추출한다. 비문 등록 절차의 경우, 도 3의 (a)와 같이 반려 동물을 촬영하고(S305), 촬영된 반려 동물의 이미지에서 먼저 얼굴 영역(이후 제1 특징 영역으로 설명됨)을 검출하고(S310), 얼굴 영역 내에서 코가 차지하는 영역(이후 제2 특징 영역으로 설명됨)을 검출하고 촬영된 이미지가 학습 또는 식별용으로 적합한지에 대한 품질 검사를 통해 비문 이미지를 출력하고(S315), 출력된 이미지가 인공 신경망을 구성하는 서버로 전송되어 저장 및 등록된다 (S320). 비문 조회 절차의 경우, 도 3의 (b)와 같이 반려 동물을 촬영하고(S330), 반려 동물의 이미지에서 얼굴 영역을 검출하고(S335), 얼굴 영역 내에서 코가 차지하는 영역을 검출하고 촬영된 이미지가 학습 또는 식별용으로 적합 한지에 대한 품질 검사를 통해 비문 이미지를 출력하는데(S315), 이는 비문 등록 절차와 유사하다. 이후 절차는 출력된 비문 이미지를 기존에 저장 및 학습된 비문 이미지들과 비교하여 일치하는 정보를 탐색하는 과정(S345) 과 탐색 결과에 대한 출력 과정(S350)이 수행된다. 도 4는 본 발명에 따른 반려 동물의 비문 관리 시스템에서 반려 동물의 코에 대응하는 객체를 검출하기 위한 절 차를 도시한다. 도 4를 참조하면, 먼저 반려 동물을 촬영하여 초기 이미지가 생성되며(S405), 초기 이미지에서 얼굴 영역을 먼 저 검출한다(S410). 이후 얼굴 영역 내에서 반려 동물의 종을 고려하여 코 영역을 검출한다(S415). 1차적으로 얼굴 영역을 먼저 검출하고 2차적으로 코 영역을 검출하는 것은 계단식(cascaded) 검출을 통해 모든 종을 고려 하여 코 영역을 검출하는 것 보다 연산 복잡도를 낮출 수 있고 검출 정확도도 향상시킬 수 있기 때문이다. 이후 검출된 코 영역의 이미지가 향후 비문의 식별 또는 학습에 있어 적합한지 여부를 검사하기 위한 품질 검사가 수 행되고(S420), 품질 검사 결과 적합한 이미지로 판단된 경우 해당 이미지를 서버로 전송하여 비문의 식별에 사 용되거나 향후 학습 또는 식별을 위해 저장될 수 있다(S425). 또한, 본 발명에 따르면 강아지의 코 주름(비문)과 같이 반려 동물의 식별을 위한 객체의 이미지가 흐릿하게 촬 영되지 않도록 검출된 코 영역에 초점이 맞춰지도록 카메라를 제어할 수 있다(S430). 이는 카메라의 초점이 코 영역에 맞춰지도록 함으로써 코의 초점이 어긋남으로 인해 이미지의 품질이 저하되는 것을 방지하기 위함이다. 도 5는 본 발명이 적용된 반려 동물의 비문 이미지를 획득하기 위한 UI(User Interface) 화면의 예를 도시한다. 도 5는 여러 반려 동물들 중에서 강아지의 비문을 취득하기 위한 경우를 도시한다. 도 5를 참고하면, 촬영중인 영상에서 반려 동물의 종을 식별하여 현재 촬영중인 반려 동물이 강아지인지 여부를 판단한다. 촬영중인 반려 동물이 강아지가 아닌 경우 도 5와 같이 '강아지를 찾을 수 없어요'와 같은 문구를 출 력하고, 촬영중인 반려 동물이 강아지인 경우 강아지의 비문을 획득하기 위한 절차를 수행한다. 촬영중인 반려 동물이 강아지인지 여부를 판단하기 위하여 영상에 포함된 반려 동물의 얼굴 영역을 먼저 추출하고, 얼굴 영역 에 포함된 이미지를 기존의 학습된 데이터와 비교하여 해당 반려 동물의 종(Species)을 결정할 수 있다. 이후, 강아지의 얼굴에서 강아지의 코에 해당하는 영역을 설정한 후 코에 해당하는 영역에 초점을 맞추어 촬영 을 지속한다. 도 5와 같이 강아지가 지속적으로 움직이는 경우에도 강아지의 코를 추적하면서 코에 초점을 맞춰 촬영이 수행될 수 있다. 이때 각 촬영된 영상에서 강아지의 비문 이미지가 반려 동물의 식별 또는 학습을 위하 여 적합한지 여부를 판단하고, 적합성에 대한 정도를 도 5와 같이 출력할 수 있다. 비문 이미지가 반려 동물의 식별 또는 학습을 위하여 적합한지에 대한 정도가 수치로서 계산될 수 있으며, 적합도에 대한 수치에 따라 적합 도가 낮을수록 'BAD' 방향으로, 적합도가 높을 수록 'GOOD' 방향으로 그래픽이 출력될 수 있다. 강아지의 비문 이미지가 충분히 획득된 경우, 촬영을 종료하고 해당 강아지의 비문 이미지와 함께 식별 정보를 데이터베이스에 저장하거나 해당 강아지의 식별 정보를 출력할 수 있다. 본 발명에서, 반려 동물의 얼굴 영역을 먼저 검출한 이후 얼굴 영역 내에서 코 영역을 검출한다. 이는 연산 복 잡도를 저감시키면서 객체 검출 난이도를 낮추기 위함이다. 영상을 촬영하는 과정에서 검출하고자 하는 객체 이 외의 물체 또는 불필요하거나 잘못된 정보가 영상에 포함될 수 있다. 따라서, 본 발명은 촬영중인 영상에서 원 하는 객체(반려 동물의 코)가 존재하는지 여부를 먼저 판단한다. 또한, 반려 동물의 비문을 식별하기 위하여는 일정 수준 이상의 해상도를 갖는 영상이 요구되지만 영상의 해상 도가 높아질수록 영상의 처리를 위한 연산량이 증가하게 되는 문제가 있다. 또한, 반려 동물의 종류가 증가함에 따라 각 반려 동물의 종류 별로 학습 방법이 상이하기 때문에 인공지능의 연산 난이도가 더욱 증가하게 되는 문 제가 있다. 특히, 유사한 종류의 동물은 비슷한 형상을 가지기 때문에(예: 강아지의 코와 늑대의 코는 유사함) 유사한 동물에 대하여 동물의 종류와 함께 코를 분류하는 것은 매우 높은 연산 난이도를 가질 수 있다. 따라서, 본 발명은 이러한 연산 복잡도를 저감시키기 위하여 계단식(cascaded) 객체 검출 방법을 사용한다. 예 를 들어, 반려 동물을 촬영하면서 반려 동물의 얼굴 영역을 먼저 검출한 후 반려 동물의 종류를 먼저 식별하고, 검출된 반려 동물의 얼굴 영역과 식별된 반려 동물의 종류에 기초하여 해당 반려 동물의 코 영역을 검출한다. 이는 상대적으로 연산 복잡도가 낮은 저해상도에서 반려 동물의 종류를 식별하는 과정을 먼저 수행하고 반려 동 물의 종류에 따라 결정된 객체 검출 방법을 적용하여 반려동물의 얼굴 영역에서 고해상도를 유지하며 코 영역 검출을 수행하는 것이다. 그리하여, 본 발명은 상대적으로 연산 복잡도를 저감시키면서도 효과적으로 반려 동물 의 코 영역을 검출할 수 있다. 도 6은 본 발명에 따른 반려 동물의 식별을 위한 전반적인 영상 처리 과정을 도시한다. 도 6에 도시된 것과 같 이, 본 발명에 의한 입력 영상을 처리하는 방법은 카메라에서 입력 영상을 받아오는 단계(S605), 입력 영상의 크기를 조정하여 1차 처리 영상을 생성하는 제1 전처리 단계(S610), 제1 전처리 단계에서 생성된 처리 영상으로 부터 동물의 위치와 동물의 종을 검출하는 제1 특징 영역 검출 단계(S615), 제1 특징 영역 검출 단계의 결과물 로부터 동물 영상의 제1 특징 값을 추출하는 제1 후처리 단계(S620), 제1 후처리 단계를 통해 처리된 영상에서반려 동물의 종에 따라 반려 동물의 식별을 위한 객체(예: 코)를 검출하기 위한 검출기를 결정하는 단계(S625), 반려 동물의 식별을 위한 영상 처리를 위하여 영상의 크기를 조절하는 제2 전처리 단계(S630), 제1 특징 검출 단계에서 검출할 수 있는 동물의 종에 각각 대응하는 적어도 하나의 제2 특징 영역 검출 단계(S635), 각각의 제 2 특징 영역 검출 단계에 대응하여 동물 영상의 제2 특징 값을 추출하는 제2 후처리 단계(S640)를 포함한다. 제1 전처리 단계 원본 영상에 대한 제1 전처리를 적용하는 단계(S610)는 원본 영상의 크기, 비율, 방향 등을 조절하여 객체 검출 에 적합한 형태로 영상을 변환하는 단계이다. 카메라 기술의 발달에 따라, 입력 영상은 대부분 수백만에서 수천만 화소로 구성되며, 이렇게 큰 영상을 직접 처리하는 것은 바람직하지 않다. 객체 검출이 효율적으로 작동하려면 입력 영상을 처리하기 적당하도록 전처리 과정을 수행해야 한다. 이러한 과정은 수학적으로는 좌표계 변환으로 이루어진다. 입력 영상 내의 임의의 4점을 처리 영상의 네 꼭지점에 대응시키고, 임의의 좌표계 변환 과정을 거침으로써 임 의의 처리 영상을 생성할 수 있음은 명백하다. 그러나 좌표계 변환 과정에 있어 임의의 비선형 변환 함수를 사 용하는 경우, 특징 영역 검출기의 결과로 획득한 경계 상자로부터 입력 영상의 특징 영역을 얻는 역변환이 가능 하여야 한다. 예를 들면, 입력 영상의 임의의 4점을 처리 영상의 네 꼭지점에 대응시켜 선형 변환하는 아핀 변 환(Affine Transformation)을 사용하면 손쉽게 그 역변환 과정을 얻을 수 있으므로 이를 사용함이 바람직하다. 입력 영상 내의 임의의 4점을 결정하는 방법의 일 예로, 입력 영상의 네 꼭지점을 그대로 사용하는 방법을 생각 할 수 있다. 또는, 가로 길이와 세로 길이가 같은 비율로 변환될 수 있도록, 입력 영상에 여백을 덧붙이거나, 또는 입력 영상의 일부를 잘라내는 방법을 사용할 수 있다. 또는 입력 영상의 크기를 축소시키기 위하여 다양한 보간 방법을 적용할 수 있다. 제1 특징 영역 검출 단계 본 단계는 전처리된 영상 내에서 반려 동물이 존재하는 영역과 그 동물의 종(種)을 먼저 검출함으로써, 후술할 제2 특징 영역 검출 단계에서 사용할 수 있는 제1 특징 영역을 설정하고, 더불어 각 반려 동물의 종에 최적화된 제2 특징 영역 검출기를 선택함으로써 최종적인 특징점 검출 성능을 올리는 데에 그 목적을 둔다. 본 과정에 있어 객체 검출 및 분류 방법은 관련 분야에 통상적인 지식을 가진 자라면 어느 것이던 용이하게 결 합할 수 있을 것이다. 그러나, 종래의 방법과 대비하여 인공 신경망에 기반한 방법이 성능이 우수한 것으로 알 려져 있으므로, 가급적 인공 신경망에 기반한 특징 검출 기법을 사용하는 것이 바람직하다. 예를 들어, 도 7에 도시된 것과 같이 인공 신경망에 한 장의 이미지에 대하여 여러 가지 크기의 물체를 검출하는 알고리즘인 SSD(Single-Shot Multibox Detection) 방식의 특징 검출기가 사용될 수 있다. 앞서 설명한 전처리기에 따라 정규화된 입력 영상은, 인공 신경망에 의하여 계층적으로 제1 특징 영상부터 제n 특징 영상을 구성하게 된다. 이 때 각 계층마다 특징 영상을 추출하는 방법은 인공 신경망의 학습 단계에서 기 계적으로 학습될 수 있다. 이렇게 추출된 계층적 특징 영상은, 각 계층마다 대응되는 사전 정의된 상자(Priori Box) 목록과 결합되어 경계 상자와 개체 종류, 그리고 신뢰도 값 목록을 생성하게 된다. 이러한 연산 과정 또한 인공 신경망의 학습 단계에 서 기계적으로 학습될 수 있다. 예를 들어 그 결과값은 아래의 표 1과 같은 형식으로 반환된다. 이 때 신경망이 판단할 수 있는 종의 개수는 신경망 설계 단계에서 결정되며, 암묵적으로 객체가 존재하지 않는 경우, 즉 \"배경\"이 정의된다.표 1"}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "이러한 결과 상자는 Non-Maximum Suppression 단계를 통하여 중첩되는 결과 상자들을 병합하여 최종적으로 영상 내에 존재하는 객체 검출 결과로 반환된다. 이 과정을 상세히 설명하면 다음과 같다. 1. 배경을 제외한 각각의 종에 대하여 각각 다음 과정을 수행한다. A. 경계 상자 목록에서, 해당 종일 확률이 특정 문턱 값 보다 낮은 상자를 제외한다. 남은 상자가 없다면 결과 없음으로 종료한다. B. 상기 경계 상자 목록에서, 해당 종일 확률이 가장 높은 상자를 제1 상자로 지정하고 경계 상자 목록에서 제 외한다. C. 나머지 경계 상자 목록에 대하여, 확률이 높은 순서에 따라 각각 다음 과정을 수행한다. i. 제1 상자와의 교집합 대 합집합 면적 비(Intersection over Union)를 연산한다. ii. IoU가 특정 문턱 값보다 높다면, 이 상자는 제1 상자와 중첩되는 상자이다. 제1 상자와 병합한다. D. 제 1 상자를 결과 상자 목록에 추가한다. E. 경계 상자 목록에 상자가 남아 있다면, 남은 상자를 대상으로 다시 C 단계부터 반복한다. 두 상자 A와 B에 대하여, 교집합 대 합집합 면적비는 아래의 수학식 1과 같이 효과적으로 연산할 수 있다. 수학식 1"}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "상기 과정에서 제1 상자와 중첩되는 상자를 병합하는 방법에 대해 설명하면 다음과 같다. 예를 들어, 제1 상자 는 그대로 유지하고 제2 상자는 경계 상자 목록에서 삭제하는 방법으로 병합할 수 있다 (Hard NMS). 또는, 제1 상자는 그대로 유지하고 제2 상자가 특정 종일 확률을 (0, 1) 사이의 값만큼 가중치를 주어 감소시키고, 감쇄된 결과값이 특정 문턱 값보다 작다면 비로소 경계 상자 목록에서 삭제하는 방법으로 병합할 수 있다 (Soft NMS). 마지막으로, 이렇게 결정된 하나 또는 복수 개의 경계 상자에 대하여, 전처리 단계에서 사용한 임의의 변환 과 정에 대한 역변환 과정을 거침으로써 원본 영상에서의 특징 영역을 얻을 수 있음은 당연하다. 구성에 따라서는 원본 영상에서의 특징 영역에 일정량의 여백을 덧붙임으로써 후술할 제2 검출 단계를 잘 수행할 수 있도록 조정 할 수 있다. 제1 후처리 단계 앞서 기술한 제1 특징 영역 설정 단계(S720)에서 획득된 입력 영상의 각 특징 영역에 대하여, 추가적인 후처리 단계를 수행함으로써 제1 특징 값을 생성할 수 있다. 예를 들어, 입력 영상의 제1 특징 영역에 대한 밝기 정보 (제1 특징 값)를 획득하기 위해 아래의 수학식 2와 같은 연산을 수행할 수 있다.수학식 2"}
{"patent_id": "10-2022-0127703", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "이 때 L은 BT.601 표준에 따른 Luma 값이며, V는 HSV 색공간에서 정의하는 명도 값이다. M, N은 대상 특징 영역 의 가로 너비와 세로 높이이다. 이렇게 추가적으로 생성한 제1 특징 값을 이용하여, 제1 특징 영역 검출 단계(S615)에서 획득한 제1 특징 영역 이 본 특허와 결합되는 응용 분야에서 사용하는데 적합한지 예측할 수 있다. 추가적으로 생성되는 제1 특징 값 은 응용 분야에 따라 적절하게 설계되어야 함은 자명하다. 응용 분야에서 정의하는 제1 특징 값의 조건을 충족 하지 않는 경우, 선택적으로 후술하는 제2 특징 영역 설정 및 객체 검출 단계를 생략하도록 시스템을 구성할 수 있다. 제2 특징 영역 검출 단계 본 단계는 동물이 존재하는 영역에서 구체적으로 응용 분야에서 필요로 하는 특징 영역을 추출하는 것을 목적으 로 한다. 예를 들어, 동물의 얼굴 영역에서 눈, 코, 입, 귀의 위치를 검출해 내는 응용 분야를 예를 들면, 제1 특징 영역 검출 단계에서는 동물의 얼굴 영역과 동물의 종 정보를 우선 구분하고, 제2 특징 영역 검출 단계에서 는 동물의 종에 따라 눈, 코, 입, 귀 위치를 검출해 내는 것을 목적으로 한다. 이 과정에 있어, 제2 특징 영역 검출 단계는 각각의 동물의 종에 특화된 서로 독립된 복수 개의 특징 영역 검출 기로 구성될 수 있다. 예를 들어, 제1 특징 영역 검출 단계에서 개, 고양이, 햄스터를 구분할 수 있다면, 3개의 제2 특징 영역 검출기를 두고 각각을 개, 고양이, 햄스터에 대해 특화되도록 설계하는 것이 바람직하다. 이렇게 함으로써, 개별 특징 영역 검출기에서 학습하여야 하는 특징 종류를 감소시켜 학습 복잡도를 감소시킬 수 있으 며, 또한 학습 데이터 수집 측면에서도 더 적은 숫자의 데이터 만으로도 신경망 학습이 가능하게 됨은 자명하다. 각각의 제2 특징 영역 검출기는 서로 독립적으로 구성되므로, 통상적인 지식 소유자라면 독립된 개별 검출기를 손쉽게 구성이 가능하다. 각각의 특징 영역 검출기는 각각의 종에서 검출하려는 특징 정보에 맞게끔 개별적으로 구성하는 것이 바람직하다. 또는, 시스템 구성의 복잡도를 감소시키기 위하여, 일부 또는 모든 제2 특징 영역 검출기가 같은 구조의 특징 영역 검출기를 공유하되, 학습 파라미터 값을 교체함으로써 각각의 종에 적합하게 시스템을 구성하는 방법을 사용할 수 있다. 더욱 나아가, 제2 특징 영역 검출기로 제1 특징 영역 검출 단계와 동일한 구조의 특징 영역 검출기를 사용하되, 학습 파라미터 값과 NMS 방법만을 교체함으로써 시스템 복잡도를 더욱 감소시키는 방법을 고려할 수도 있다. 제1 특징 영역 검출 단계 및 제1 후처리 단계를 통하여 설정된 하나 또는 복수 개의 특징 영역에 대하여, 제1 특징 영역 검출 단계에서 검출한 종 정보를 이용하여 어떤 제2 특징 영역 검출기를 사용할 지 결정하고, 결정된 제2 특징 영역 검출기를 이용하여 제2 특징 영역 검출 단계를 수행한다. 먼저 전처리 과정을 수행한다. 이 때 좌표를 변환하는 과정에서, 역변환이 가능한 변환 과정을 사용해야 함은 자명하다. 제2 전처리 과정에서는 입력 영상 내에서 검출된 제1 특징 영역을 제2 특징 영역 검출기의 입력 영상 으로 변환하여야 하므로 변환 함수를 설계하는데 필요한 4개 점은 제1 특징 영역의 네 꼭지점으로 정의함이 바 람직하다. 제2 특징 영역 검출기를 통하여 획득한 제2 특징 영역은 제1 특징 영역을 이용하여 검출된 값이므로, 전체 입력 영상 내에서 제2 특징 영역을 연산할 때에는 제1 특징 영역을 고려하여야 한다. 제2 특징 영역 검출기를 통하여 획득한 제2 특징 영역에 대하여, 제1 후처리 단계와 유사하게 추가적인 후처리 단계를 수행함으로써 제2 특징 값을 생성할 수 있다. 예를 들어, 영상의 선명도를 구하기 위하여 Sobel filter를 적용하거나, 또는 특징 영역 사이에 검출 여부 및 상대적인 위치 관계를 이용하여, 검출하려는 동물의 자세 등의 정보를 구할 수 있다. 이렇게 추가적으로 생성한 제2 특징 값을 이용하여, 제2 객체 검출 단계에서 획득한 특징 영역이 본 특허와 결 합되는 응용 분야에서 사용하는데 적합한지 예측할 수 있다. 추가적으로 생성되는 제2 특징 값은 응용 분야에 따라 적절하게 설계되어야 함은 자명하다. 응용 분야에서 정의하는 제2 특징 값의 조건을 충족하지 않는 경우, 제2 검출 영역뿐만 아니라 제1 검출 영역을 검출 결과에서 제외하는 등 응용 분야에 적합하게 데이터를 취득할 수 있도록 설계함이 바람직하다. 시스템 확장 본 발명에서는 2단계의 검출 단계를 구성함으로써, 제1 특징 위치 검출 단계에서는 동물의 위치와 종을 검출하 고, 이 결과에 따라 제2 특징 위치 검출 단계에서 사용하는 검출기를 선택하는 시스템과 구성 방법의 예를 들었 다. 이러한 계단식 구성(cascade configuration)은 손쉽게 다층 계단식 구성으로 확장될 수 있다. 예를 들어, 제1 특징 위치 검출 단계에서는 동물의 몸 전체를 검출하고, 제2 특징 위치 검출 단계에서는 동물의 얼굴 위치와 팔 다리 위치를 검출하고, 제3 특징 위치 검출 단계에서는 얼굴에서 눈, 코, 입, 귀의 위치를 검출하는 등의 응용 구성이 가능하다. 이러한 다층 계단식 구성을 사용함으로써 동시에 여러 계층의 특징 위치 취득이 가능한 시스템을 손쉽게 설계할 수 있다. 다층 계단식 시스템을 설계함에 있어 층 수를 결정하는 데에는 취득하고자 하는 특징 위치의 계층 도 메인, 전체 시스템의 동작 시간과 복잡도, 그리고 각각의 개별 특징 영역 검출기를 구성하는데 필요한 자원 등 을 고려하여야 최적의 계층 구조를 설계할 수 있음은 자명하다. 이하, 높음 품질의 반려 동물의 식별용 객체 이미지(예: 비문 이미지)를 획득하기 위하여 초점 위치를 가변적으 로 조절하는 과정에 대해 설명한다. 일반적인 스마트폰에 객체의 위치에 맞춰 초점을 조절하는 기술이 많이 적 용되고 있으나, 이러한 기술은 주로 사람과 같이 촬영 시간동안 움직이지 않는 객체를 대상으로 하며, 반려 동 물을 촬영할 때는 식별용 객체(예: 코)가 지속적으로 움직임으로 초점이 맞춰지지 못하는 경우가 많다. 식별용 객체에 초점이 맞춰지지 않는 경우 도 2와 같이 인공 지능 기반의 학습 또는 식별에 적합하지 못한 데이터가 생 성되기 쉬우므로 반려 동물의 식별용 객체에 초점이 맞춰지도록 함이 바람직할 것이다. 따라서, 본 발명은 반려 동물을 객체를 검출한 이후 검출된 객체의 위치에 맞게 지속적으로 초점 위치를 객체의 위치로 설정하는 방법을 제공한다. 본 발명에 따르면, 반려 동물이 포함된 이미지를 획득하고, 반려 동물의 종을 결정하기 위한 영역(제1 특징 영 역, 예: 얼굴 영역)을 설정하여 제1 특징 영역에서의 이미지를 추출한다. 이후 제1 특징 영역에서 반려 동물의 종에 따라 반려 동물을 식별하기 위한 영역(제2 특징 영역, 예: 코 영역)을 설정하고, 제2 특징 영역에서의 이 미지(예: 비문 이미지)가 인공 지능 기반의 학습 또는 식별에 적합한 지 여부를 검사한다. 제2 특징 영역에서의 객체의 이미지가 학습 또는 식별에 적합한 품질을 가진 경우 학습 또는 식별을 위한 신경망(예: 서버)으로 전달 되어 저장되고, 부적합한 경우 해당 이미지는 버려진다. 이후, N+1 번째 프레임의 영상을 촬영할 때 N 번째 프레임에서 검출된 객체의 위치에 초점이 위치하도록 하도록 카메라를 조절하며, 그리하여 인공 지능 기반의 학습 또는 식별에 적합하도록 반려 동물의 식별용 객체 이미지 (비문 이미지)가 획득될 수 있다. 도 8은 본 발명에 따른 초점 위치 조절을 통해 반려 동물을 식별하기 위한 객체를 촬영하는 과정을 도시한다. 도 8을 참고하면 반려 동물을 촬영하면서 지속적으로 반려 동물의 식별을 위한 객체(예: 코)가 추적되며, 특정 프레임에서 반려 동물 촬영을 위한 초점의 위치는 이전 프레임에서 설정된 객체의 위치로 설정된다. 본 발명에 따르면 각 프레임 마다 계단식 객체의 검출이 수행되는데, 도 6을 참고하여 설명한 것과 같이 1차적으로 동물의 종을 결정하기 위하여 제1 특징 영역을 설정하고 2차적으로 동물의 종을 고려하여 제1 특징 영역 내에서 식별용 객체(예: 코)가 위치하는 제2 특징 영역을 도출한다. 객체 검출이 완료되면 해당 프레임의 이미지가 학습 또는 식별을 위하여 적합한지 여부를 판단하기 위한 후처리(제2 후처리)가 수행되며 적합한 이미지가 획득되면 이후 학습 또는 식별을 위해 해당 프레임의 이미지는 저장된다. 반려 동물의 식별을 위한 객체 이미지(예: 비문 이미지)를 획득하기 위하여 다음 프레임의 영상 촬영이 지속되 는데, 여기서 촬영시 초점의 위치는 이전 프레임에서 결정된 객체의 위치이다. 이전 프레임에서 검출된 객체의 위치에 맞게 초점의 위치를 변경함으로써 반려 동물이 가만히 있지 못하고 움직이는 경우에도 지속적으로 식별 용 객체를 따라 초점을 이동할 수 있다. 이러한 과정을 통하여 초점이 어긋날 가능성을 낮추고 높은 품질의 객 체 이미지를 획득할 수 있다. 이러한 과정이 반복되며 카메라 초점의 이동을 통해 보다 학습 또는 식별에 적합 한 객체 이미지를 획득할 가능성을 높일 수 있다. 도 9는 본 발명에 따른 반려 동물의 비문 관리 시스템에서 반려 동물의 코에 대응하는 객체를 촬영하기 위한 방 법의 흐름도이다. 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하기 위한 방법은, 반려 동물이 포함된 영상을 획득하는 단계(S910)와, 영상에서 반려 동물의 식별을 위한 객체를 검출하는 단계(S920)와, 검출된 객체의 위치로 초점을 설정한 상태에서 다음 영상을 촬영하는 단계(S930)를 포함한다. 이후 다음 영상(프레임)에 대한 객체 검출 및 초점 위치 변경이 반복적으로 수행될 수 있다. 본 발명에 따르면, 반려 동물이 포함된 영상을 획득하는 단계(S910)는 이전의 프레임에 촬영된 이미지에서 검출 된 상기 객체의 위치에 초점이 설정된 상태로 반려 동물을 촬영하여 영상을 생성하는 단계를 포함할 수 있다. 본 발명에 따르면, 다음 영상을 촬영하는 단계(S930)는 다음 영상에서 객체의 변경된 위치를 검출하는 단계와, 다음 영상에서 위치가 변경된 객체의 이미지가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하는 단계와, 변경된 위치로 초점을 설정한 상태에서 다음 촬영을 수행하는 단계를 포함할 수 있다. 도 8에 도시된 것과 같이, 현재 프레임의 이미지에 대해 식별용 객체(예: 반려 동물의 코)를 검출하고, 해당 객 체의 이미지(비문 이미지)가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하며, 현재 프레임의 이 미지에서 검출된 객체의 위치가 다음 프레임의 이미지의 촬영시 초점의 위치로 설정될 수 있다. 본 발명과 같이 이전 프레임의 객체 위치를 참고하여 현재 프레임의 초점을 조절함으로써 반려 동물의 식별을 위한 객체에 초점 이 맞춰지도록 유지할 수 있고, 학습 또는 식별 가능할 정도의 품질을 가진 식별용 객체의 이미지(비문 이미 지)를 획득할 수 있다. 본 발명에 따르면, 영상에서 반려 동물의 식별을 위한 객체를 검출하는 단계는 영상에서 반려 동물의 종(種)을 결정하기 위한 제1 특징 영역을 설정하는 단계와, 제1 특징 영역 내에서 상기 반려 동물의 종에 따라 상기 반려 동물의 식별을 위한 객체를 포함하는 제2 특징 영역을 설정하는 단계를 포함할 수 있다. 본 발명은, 이미지에서 반려 동물의 종과 반려 동물의 식별용 객체를 동시에 검출하는 대신, 우선적으로 낮은 해상도로 쉽게 처리할 수 있는 반려 동물의 종 검출을 먼저 수행하고, 나중에 반려 동물의 종을 고려하여 반려 동물의 식별용 객체를 검 출함으로써 연산 복잡도를 감소시키면서 효과적으로 객체 식별용 이미지(비문 이미지)를 획득할 수 있다. 본 발명에 따르면, 제2 특징 영역을 설정하는 단계는 반려 동물의 식별을 위한 객체의 이미지(예: 비문 이미 지)가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하는 단계를 포함한다. 반려 동물을 촬영한 이 후 모든 이미지를 저장하는 것이 아니라, 반려 동물의 식별용 객체의 이미지가 인공 지능 기반의 학습 또는 식 별에 적합한 지 여부를 먼저 판단하고 적합한 객체 이미지만을 서버 또는 학습 또는 식별용 신경망에 저장함으 로써 불필요한 데이터가 저장되는 것을 방지할 수 있다. 본 발명에 따르면, 상기 객체의 이미지가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하는 단계는, 객체의 이미지의 품질이 기준 조건을 만족하는지 여부를 판단하는 단계와, 품질이 기준 조건을 만족하 는 경우 객체의 이미지를 학습 또는 식별용 서버로 전송하는 단계와, 품질이 기준 조건을 만족하지 않는 경우 객체의 이미지를 버리고 다음 영상에 대한 촬영을 수행하는 단계를 포함할 수 있다. 객체의 이미지의 품질은 앞 서 설명한 제1 품질 값 및 제2 품질 값으로 표현될 수 있으며, 제1 품질 값 및 제2 품질 값이 기준치보다 크면 해당 객체 이미지가 학습 또는 식별에 적합한 품질을 가진 것으로 판단될 수 있다. 도 10은 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하기 위한 장치의 블록도이다. 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하기 위한 장치는, 반려 동물이 포함된 원본 영상을 생성하는 카메라와, 영상에서 반려 동물의 식별을 위한 객체를 검출하고, 검출된 객체의 위치로 초점을 설정한 상 태에서 다음 영상을 촬영하도록 카메라를 제어하는 프로세서를 포함한다. 카메라는 렌즈와 같은 광학 모듈과 입력된 광으로부터 영상 신호를 생성하는 CCD(charge-coupled device) 또는 CMOS(complementary metal-oxide semiconductor)를 포함할 수 있으며, 영상 촬영을 통해 영상 데이터를 생성하여 프로세서로 제공할 수 있다. 프로세서는 장치의 각 모듈을 제어하고 영상 처리를 위해 필요한 연산을 수행한다. 프로세서(102 0)는 그 기능에 따라 복수개의 마이크로프로세서(프로세싱 회로)로 구성될 수 있다. 프로세서는 앞서 설 명한 바와 같이 반려 동물(예: 강아지)의 식별을 위한 객체(예: 코)를 검출하고 해당 객체에 대한 이미지의 유 효성 판단을 수행할 수 있다. 통신 모듈은 유/무선 네트워크를 통해 외부의 개체(entity)와 데이터를 송신 또는 수신할 수 있다. 특히, 통신 모듈은 학습 또는 식별을 서버와의 통신을 통해 인공 지능 기반의 처리를 위한 데이터를 교환할 수 있다. 추가적으로, 장치는 영상 데이터 및 영상 처리를 위하여 필요한 정보를 저장하는 메모리와 사용자 에게 화면을 출력하는 디스플레이를 포함하여 용도에 따라 다양한 모듈들을 포함할 수 있다. 본 발명에 따르면, 프로세서는 이전의 프레임에 촬영된 이미지에서 검출된 상기 객체의 위치에 초점이 설 정된 상태로 상기 반려 동물을 촬영하여 상기 영상을 생성하도록 카메라를 제어할 수 있다. 본 발명에 따르면, 프로세서는, 다음 영상에서 객체의 변경된 위치를 검출하고, 다음 영상에서 위치가 변 경된 객체의 이미지가 인공 지능 기반의 학습 또는 식별에 적합한지 여부를 판단하고, 변경된 위치로 초점을 설 정한 상태에서 다음 촬영을 수행하도록 카메라를 제어할 수 있다. 본 발명에 따르면, 프로세서는 영상에서 반려 동물의 종(種)을 결정하기 위한 제1 특징 영역을 설정하고, 제1 특징 영역 내에서 반려 동물의 식별을 위한 객체를 포함하는 제2 특징 영역을 설정할 수 있다. 본 발명에 따르면, 프로세서는 반려 동물의 식별을 위한 객체의 이미지가 인공 지능 기반의 학습 또는 식 별에 적합한지 여부를 판단할 수 있다. 본 발명에 따르면, 프로세서는 객체의 이미지의 품질이 기준 조건을 만족하는지 여부를 판단하고, 품질이 기준 조건을 만족하는 경우 객체의 이미지를 학습 또는 식별용 서버로 전송하고, 품질이 기준 조건을 만족하지 않는 경우 객체의 이미지를 버리고 다음 영상에 대한 촬영을 수행하도록 카메라를 제어할 수 있다. 본 실시예 및 본 명세서에 첨부된 도면은 본 발명에 포함되는 기술적 사상의 일부를 명확하게 나타내고 있는 것 에 불과하며, 본 발명의 명세서 및 도면에 포함된 기술적 사상의 범위 내에서 당업자가 용이하게 유추할 수 있 는 변형예와 구체적인 실시예는 모두 본 발명의 권리범위에 포함되는 것이 자명하다고 할 것이다. 따라서, 본 발명의 사상은 설명된 실시예에 국한되어 정해져서는 아니 되며, 후술하는 특허청구범위뿐 아니라 이 특허청구범위와 균등하거나 등가적 변형이 있는 모든 것들은 본 발명 사상의 범주에 속한다고 할 것이다.도면 도면1 도면2 도면3 도면4 도면5 도면6 도면7 도면8 도면9 도면10"}
{"patent_id": "10-2022-0127703", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 AI 기반의 반려 동물의 관리를 위한 개략적인 절차를 도시한다. 도 2는 AI 기반의 반려 동물의 관리에 있어 학습 또는 식별에 적합하지 않은 이미지 및 학습 또는 식별에 적합 한 이미지의 예시들을 도시한다. 도 3은 본 발명에 따른 학습 또는 식별용 객체 이미지의 적합도 판단이 적용된 AI 기반의 반려 동물의 비문 관 리를 위한 절차를 도시한다. 도 4는 본 발명에 따른 반려 동물의 관리 시스템에서 반려 동물의 식별을 위한 객체를 검출하기 위한 절차를 도 시한다. 도 5는 본 발명이 적용된 반려 동물의 식별 객체를 검출하기 위한 UI(User Interface) 화면의 예를 도시한다. 도 6은 본 발명에 따른 반려 동물의 식별을 위한 객체를 검출하는 과정을 도시한다. 도 7은 본 발명에 따른 특징 영역을 설정하기 위한 과정을 도시한다. 도 8는 본 발명에 따른 초점 위치 조절을 통해 반려 동물을 식별하기 위한 객체를 촬영하는 과정을 도시한다. 도 9는 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하는 방법의 흐름도이다. 도 10은 본 발명에 따른 반려 동물의 식별을 위한 객체를 촬영하는 장치의 블록도이다."}
