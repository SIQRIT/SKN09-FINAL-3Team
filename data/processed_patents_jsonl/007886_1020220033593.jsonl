{"patent_id": "10-2022-0033593", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0135969", "출원번호": "10-2022-0033593", "발명의 명칭": "이미지 품질 기반 사람의 속성 추정 방법 및 장치", "출원인": "에스케이텔레콤 주식회사", "발명자": "강충헌"}}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "이미지 내 사람의 속성을 추정하기 위한 방법에 있어서,입력 이미지 내 적어도 한 사람의 머리 영역을 검출하는 단계;상기 머리 영역 내에서 상기 사람의 얼굴을 포함하는 얼굴 영역을 검출하는 단계;상기 얼굴 영역의 흐림 정도(amount of blur) 또는 상기 사람의 얼굴 포즈(face pose) 중 적어도 하나가 상기사람의 속성을 추정하는 데 적합한지 판단하는 단계; 및판단 결과 및 상기 얼굴 영역에 기초하여 상기 사람의 속성을 추정하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 얼굴 영역에 대응되는 얼굴 이미지를 다운샘플링하는 단계;다운샘플링된 얼굴 이미지를 업샘플링함으로써 업샘플링된 얼굴 이미지를 복원하는 단계; 및상기 얼굴 이미지와 상기 복원된 얼굴 이미지 간 차이에 기초하여 상기 얼굴 영역의 흐림 정도를 추정하는 단계를 더 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 판단하는 단계는,상기 얼굴 이미지와 상기 복원된 얼굴 이미지 간 차이가 기 설정된 기준값보다 큰 경우, 상기 얼굴 영역의 흐림정도가 상기 사람의 속성을 추정하는 데 적합한 것으로 판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서,상기 얼굴 포즈는 상기 얼굴의 요, 피치 및 롤에 기초하여 결정되고,상기 판단하는 단계는,상기 얼굴의 요, 피치 및 롤 각각이 기 설정된 요 기준값, 피치 기준값 및 롤 기준값 각각보다 작은 경우, 상기얼굴 포즈가 상기 사람의 속성을 추정하는 데 적합한 것으로 판단하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 머리 영역 내에서 양쪽 눈의 위치들, 코의 위치 및 입꼬리의 좌우 위치들을 포함하는 얼굴 특징점들(landmarks)을 검출하는 단계를 더 포함하고,상기 얼굴의 요, 피치 및 롤은 상기 얼굴 특징점들에 기초하여 결정되는 것인 방법.공개특허 10-2023-0135969-3-청구항 6 제1항에 있어서,상기 머리 영역에 대한 상기 얼굴 영역의 비율을 계산하는 단계; 및상기 머리 영역에 대한 상기 얼굴 영역의 비율이 기 설정된 비율보다 낮은 경우, 상기 얼굴 영역을 무시하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제5항에 있어서,이전 입력 이미지로부터 검출된 적어도 하나의 이전 머리 영역 중에서 상기 머리 영역에 대응되는 이전 머리 영역이 있는지 판단하는 단계;상기 이전 머리 영역이 없는 경우, 상기 머리 영역의 위치 정보 및 상기 추정된 속성에 기초하여 상기 사람의추적 정보를 생성하는 단계; 및상기 이전 머리 영역이 있는 경우, 상기 머리 영역의 위치 정보 및 상기 추정된 속성에 기초하여 상기 이전 머리 영역에 대응되는 사람의 추적 정보를 갱신하는 단계를 더 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에 있어서,상기 추정된 속성의 신뢰도를 획득하는 단계; 왼쪽 눈의 위치와 왼쪽 입꼬리의 위치를 잇는 제1 직선과 상기 코의 위치 간 제1 거리, 및 오른쪽 눈의 위치와오른쪽 입꼬리의 위치를 잇는 제2 직선과 상기 코의 위치 간 제2 거리 간 차이를 계산하는 단계; 상기 양쪽 눈의 위치들을 잇는 제3 직선과 상기 코의 위치 간 제3 거리, 및 상기 입꼬리의 좌우 위치들을 잇는제4 직선과 상기 코의 위치 간 제4 거리 간 차이를 계산하는 단계; 상기 제1 거리와 상기 제2 거리 간 차이, 및 상기 제3 거리와 상기 제4 거리 간 차이에 기초하여 상기 얼굴 포즈의 품질을 계산하는 단계; 및상기 얼굴 포즈의 품질에 기초하여 상기 추정된 속성의 신뢰도를 조정하는 단계를 더 포함하고,상기 대응되는 사람의 추적 정보를 갱신하는 단계는,상기 대응되는 사람의 추적 정보에 포함된 이전 속성의 조정된 신뢰도 및 상기 추정된 속성의 조정된 신뢰도 간비교에 기초하여, 상기 추정된 속성을 이용하여 상기 대응되는 사람의 추적 정보에 포함된 이전 속성을 갱신하는 단계를 포함하는 방법."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "이미지 내 사람의 속성을 추정하기 위한 장치에 있어서,입력 이미지 내 적어도 한 사람의 머리 영역을 검출하고, 상기 머리 영역 내에서 상기 사람의 얼굴을 포함하는얼굴 영역을 검출하는 검출부;상기 얼굴 영역의 흐림 정도(amount of blur) 또는 상기 사람의 얼굴 포즈(face pose) 중 적어도 하나가 상기사람의 속성을 추정하는 데 적합한지 판단하는 추정 적합성 판단부; 및판단 결과 및 상기 얼굴 영역에 기초하여 상기 사람의 속성을 추정하는 속성 추정부공개특허 10-2023-0135969-4-를 포함하는 장치."}
{"patent_id": "10-2022-0033593", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항 내지 제8항 중 어느 한 항의 방법을 실행하기 위한 컴퓨터 프로그램을 기록한 컴퓨터로 판독 가능한 기록매체."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "이미지 품질 기반 사람의 속성 추정 방법 및 장치를 개시한다. 본 발명의 일 측면에 의하면, 이미지 내 사람의 속성을 추정하기 위한 방법에 있어서, 입력 이미지 내 적어도 한 사람의 머리 영역을 검출하는 단계; 상기 머리 영역 내에서 상기 사람의 얼굴을 포함하는 얼굴 영역을 검출하는 단계; 상기 얼굴 영역의 흐림 정도(amount of blur) 또는 상기 사람의 얼굴 포즈(face pose) 중 적어도 하나가 상기 사람의 속성을 추정하는 데 적합한지 판단하는 단계; 및 판단 결과 및 상기 얼굴 영역에 기초하여 상기 사 람의 속성을 추정하는 단계를 포함하는 방법을 제공한다."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명의 실시예들은 이미지 품질 기반 사람의 속성 추정 방법 및 장치에 관한 것이다. 특히, 본 발명의 실시 예들은 사람의 연령 또는 성별을 추정하는 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "이하에 기술되는 내용은 단순히 본 실시예와 관련되는 배경 정보만을 제공할 뿐 종래기술을 구성하는 것이 아니 다. 최근 영상 인식 기술을 통하여 신원, 성별, 방문객 수, 체류시간 등을 측정하고, 이를 저장 및 분석하여 마케팅 데이터 및 얼굴 인식 포토앨범, 출입통제, 범죄자 추적, 비디오 해석으로 활용하기 위한 연구가 활발히 진행되 고 있다. 기존의 성별 인식 기술은 얼굴 영상을 캡처하고, 얼굴 영상에서 단일 얼굴 영역을 검출하고, 검출된 단일 얼굴 영역을 성별을 인식하는 데 사용한다. 하지만, Closed-circuit Television(CCTV)와 같이, 이미지가 넓은 영역의 장면을 캡처한 것이라면, 이미지 내 사람들 각각의 단일 얼굴 영역을 검출하는 데 어려움이 있다. 다른 성별 인식 기술은 사람의 얼굴 이미지로부터 사람의 성별을 인식한다. 구체적으로, 종래 기술은 이미지 내 여러 사람들 각각에 대한 얼굴 이미지를 추출하고, 얼굴 이미지로부터 사람의 성별을 추정한다. 종래 기술은 사 람의 얼굴이 정면을 바라보는 이미지를 이용할 때, 사람의 성별을 정확하게 추정할 수 있다. 하지만, 고정된 카 메라에 의해 캡처된 이미지 내에서는 얼굴의 방향이 성별을 추정하는 데 부적합한 방향일 수 있고, 사람의 움직 임으로 인해 얼굴 이미지에 번짐 또는 흐림(blur) 현상이 발생할 수 있다. 기존의 성별 인식 기술에 의하면 이러한 다양한 요소들을 고려하지 않아 성별 인식의 정확도가 좋지 못한 문제 점이 있다."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 실시예들은, 이미지에 포함된 사람들 중 사람의 속성을 추정하는 데 적합한 얼굴 포즈를 갖는 사람들 에 대해서만 속성을 추정함으로써, 사람의 속성을 정확하게 추정하기 위한 사람의 속성 추정 방법 및 장치를 제 공하는 데 주된 목적이 있다. 본 발명의 다른 실시예들은, 얼굴 이미지의 흐린 정도가 적은 사람들에 대해서만 속성을 추정함으로써, 사람의 속성을 정확하게 추정하기 위한 사람의 속성 추정 방법 및 장치를 제공하는 데 일 목적이 있다. 본 발명의 다른 실시예들은, 이미지들의 객체 추적을 이용하여 사람의 추적 정보를 관리하기 위한 사람의 속성 추정 방법 및 장치를 제공하는 데 일 목적이 있다."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 발명의 일 측면에 의하면, 이미지 내 사람의 속성을 추정하기 위한 방법에 있어서, 입력 이미지 내 적어도 한 사람의 머리 영역을 검출하는 단계; 상기 머리 영역 내에서 상기 사람의 얼굴을 포함하는 얼굴 영역을 검출 하는 단계; 상기 얼굴 영역의 흐림 정도(amount of blur) 또는 상기 사람의 얼굴 포즈(face pose) 중 적어도 하 나가 상기 사람의 속성을 추정하는 데 적합한지 판단하는 단계; 및 판단 결과 및 상기 얼굴 영역에 기초하여 상 기 사람의 속성을 추정하는 단계를 포함하는 방법을 제공한다. 본 실시예의 다른 측면에 의하면, 이미지 내 사람의 속성을 추정하기 위한 장치에 있어서, 입력 이미지 내 적어 도 한 사람의 머리 영역을 검출하고, 상기 머리 영역 내에서 상기 사람의 얼굴을 포함하는 얼굴 영역을 검출하 는 검출부; 상기 얼굴 영역의 흐림 정도(amount of blur) 또는 상기 사람의 얼굴 포즈(face pose) 중 적어도 하 나가 상기 사람의 속성을 추정하는 데 적합한지 판단하는 추정 적합성 판단부; 및 판단 결과 및 상기 얼굴 영역 에 기초하여 상기 사람의 속성을 추정하는 속성 추정부를 포함하는 장치를 제공한다."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이상에서 설명한 바와 같이 본 발명의 일 실시예에 의하면, 이미지에 포함된 사람들 중 사람의 속성을 추정하는 데 적합한 자세를 취하는 사람들에 대해서만 속성을 추정함으로써, 사람의 속성을 정확하게 추정할 수 있다. 본 발명의 다른 실시예에 의하면, 얼굴 이미지의 흐린 정도가 적은 사람들에 대해서만 속성을 추정함으로써, 사 람의 속성을 정확하게 추정할 수 있다. 본 발명의 다른 실시예에 의하면, 이미지들의 객체 추적을 이용하여 사람의 추적 정보를 관리할 수 있다."}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 본 개시의 일부 실시예들을 예시적인 도면을 이용해 상세하게 설명한다. 각 도면의 구성 요소들에 참조 부호를 부가함에 있어서, 동일한 구성 요소들에 대해서는 비록 다른 도면 상에 표시되더라도 가능한 한 동일한 부호를 가지도록 하고 있음에 유의해야 한다. 또한, 본 개시를 설명함에 있어, 관련된 공지 구성 또는 기능에 대한 구체적인 설명이 본 개시의 요지를 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명은 생략한다. 본 개시에 따른 실시예의 구성요소를 설명하는 데 있어서, 제1, 제2, i), ii), a), b) 등의 부호를 사용할 수 있다. 이러한 부호는 그 구성요소를 다른 구성 요소와 구별하기 위한 것일 뿐, 그 부호에 의해 해당 구성요소의 본질 또는 차례나 순서 등이 한정되지 않는다. 명세서에서 어떤 부분이 어떤 구성요소를 '포함' 또는 '구비'한 다고 할 때, 이는 명시적으로 반대되는 기재가 없는 한 다른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 본 발명에 따른 장치 또는 방법의 각 구성요소는 하드웨어 또는 소프트웨어로 구현되거나, 하드웨어 및 소프트 웨어의 결합으로 구현될 수 있다. 또한, 각 구성요소의 기능이 소프트웨어로 구현되고 마이크로프로세서가 각 구성요소에 대응하는 소프트웨어의 기능을 실행하도록 구현될 수도 있다. 도 1은 다양한 상황에서 촬영된 머리 이미지를 나타낸 도면이다. 도 1을 참조하면, 이미지 내에서 카메라를 향해 정면을 바라보는 사람의 머리에 관한 제1 객체, 측면을 바 라보는 사람의 머리에 관한 제2 객체, 흐릿한 이미지 내에서 정면을 바라보는 사람의 머리에 관한 제3 객 체가 도시되어 있다. 이미지 내 사람의 연령, 성별 등 속성을 추정하는 장치(이하, '속성 추정 장치')는 이미지 내에서 사람의 머리 에 대응되는 머리 객체 및 얼굴에 대응되는 얼굴 객체를 검출하고, 검출된 객체들에 기초하여 사람의 속성을 추 정한다. 이때, 객체가 카메라를 정면으로 바라보는 자세가 아니거나 객체 이미지가 흐릿한 경우, 속성 추정 장 치는 객체에 대응되는 사람의 속성을 정확하게 추정하기 어렵다. 선명하고 정면을 바라보는 사람의 얼굴 이미지 가 사람의 속성을 구별하기 위한 정보를 많이 포함하고 있기 때문이다. 도 1에서, 제2 객체는 카메라를 바라보지 않고 제3 객체는 화질이 선명하지 않으므로, 속성 추정 장 치는 제2 객체 및 제3 객체 각각의 속성을 잘못 판단할 확률이 높다. 이는, 객체 속성에 대한 인식 성능을 저하시킨다. 반면, 제1 객체는 카메라를 정면으로 바라보고 흐림 정도가 낮으므로. 속성 추정 장치는 제1 객체의 속성을 제2 객체 및 제3 객체의 속성에 비해 정확하게 추정할 수 있다. 이와 같이, 속성 추정 장치는 흐림 정도 및 얼굴 포즈(pose)에 기초하여 속성 추정의 대상이 되는 사람과 그렇 지 않은 사람을 구분한다면, 속성 추정의 대상이 되지 않는 사람에 관한 잘못된 정보를 제공하는 것을 방지할 수 있다. 즉, 전체적인 속성 인식 성능이 개선될 수 있다. 도 2는 본 발명의 일 실시예에 따른 속성 추정 장치의 블록 구성도이다. 도 2를 참조하면, 속성 추정 장치는 검출부, 추정부, 추정 적합성 판단부 및 속성 추정부 를 포함한다. 속성 추정 장치는 이미지 획득부, 추적 정보 관리부 또는 모델 훈련부 중 적어도 하나를 더 포함할 수 있다. 이미지 획득부는 카메라를 이용하여 사람이 포함된 장면을 캡처함으로써, 입력 이미지를 획득한다. 여기서, 카메라는 장면을 촬영하고, 촬영된 이미지를 처리하는 인공지능 카메라일 수 있다. 이하에서, 이미지 내 임의로 선택된 한 명의 특정인의 속성을 추정하는 동작을 설명하지만, 상기 동작은 이미지 내 여러 사람에 동일하게 그리고 동시에 적용될 수 있다. 검출부는 입력 이미지 내 특정인의 머리 영역을 검출하고, 머리 영역 내 특정인의 얼굴 영역 및 얼굴 특징 점들(landmarks)을 검출한다. 검출부는 머리 영역 검출부, 얼굴 영역 검출부 및 얼굴 특징점 검출부를 포함한다. 머리 영역 검출부는 입력 이미지 내 사람들 중 특정인의 머리 영역(region)을 검출한다. 얼굴 영역 검출부 는 머리 영역 내에서 특정인의 얼굴을 포함하는 얼굴 영역을 검출한다. 얼굴 특징점 검출부는 머리 영역 내에서 양쪽 눈의 위치들, 코의 위치 및 입꼬리의 좌우 위치들을 포함하는 얼굴 특징점들(landmarks)을 검 출한다. 각 위치 좌표는 2차원 좌표 또는 3차원 좌표로 검출될 수 있다. 본 발명의 일 실시예에 의하면, 검출부는 심층 신경망(deep neural network) 기반의 제1 검출 모델을 이용 하여 머리 영역을 검출하고, 제2 검출 모델을 이용하여 머리 영역으로부터 얼굴 영역 및 얼굴 특징점들을 검출 한다. 구체적으로, 제1 검출 모델은 사람의 머리를 포함하는 입력 이미지를 입력 받으면, 사람의 머리 영역에 관한 위 치 좌표들을 제공한다. 예를 들면, 머리 영역이 바운딩 박스의 형태를 가질 때, 제1 검출 모델은 머리 영역의 왼쪽 상단 좌표, 왼쪽 하단 좌표, 오른쪽 상단 좌표 및 오른쪽 하단 좌표를 제공한다. 나아가, 제1 검출 모델은 머리 영역에 대한 신뢰도를 제공할 수도 있다. 신뢰도는 0 내지 1 사이 값으로 수치화될 수 있다. 이때, 신뢰도 가 낮은 영역은 이용되기 어렵다. 제2 검출 모델은 머리 영역에 대응되는 머리 이미지를 입력 받으면, 사람의 얼굴 영역에 관한 위치 좌표들 및 얼굴 특징점들을 제공한다. 예를 들면, 얼굴 영역이 바운딩 박스의 형태를 가질 때, 제2 검출 모델은 얼굴 영역 의 왼쪽 상단 좌표, 왼쪽 하단 좌표, 오른쪽 상단 좌표 및 오른쪽 하단 좌표를 제공하고, 나아가 얼굴 특징점들 을 제공한다. 또한, 제2 검출 모델은 얼굴 영역 및 얼굴 특징점들에 대한 신뢰도를 제공할 수도 있다. 제2 검출 모델은 얼굴 영역을 검출하는 모델과 얼굴 특징점들을 검출하는 모델로 나뉠 수 있다. 각 검출 모델의 생성을 위해, 모델 훈련부는 제1 검출 모델이 입력 이미지를 입력 받으면 입력 이미지 내 적어도 하나의 머리 영역을 검출하도록 제1 검출 모델을 훈련시키고, 제2 검출 모델이 머리 영역 이미지를 입력 받으면 머리 영역 내 얼굴 영역 및 얼굴 특징점들을 검출하도록 제2 검출 모델을 훈련시킨다. 각 검출 모델은 지도 학습될 수 있다. 모델 훈련부는 사람들의 머리를 포함하는 이미지들을 준비하고, 사 람들의 머리를 포함하는 영역들을 레이블링(labeling)한다. 레이블링된 이미지들은 제1 검출 모델의 훈련 데이 터 셋으로서, 제1 검출 모델에 입력된다. 제1 검출 모델이 사람들의 머리를 포함하는 영역을 검출하도록 신경망 파라미터들이 업데이트된다. 한편, 모델 훈련부는 머리 영역 이미지들 각각에 포함된 얼굴 영역 및 얼굴 특징점들을 레이블링하고, 레이블링된 이미지들을 제2 검출 모델의 훈련 데이터 셋으로 입력한다. 제2 검출 모 델이 사람들의 얼굴을 포함하는 영역 및 얼굴 특징점들을 검출하도록 신경망 파라미터들이 업데이트된다. 대체적으로, 또는 보완적으로 모델 훈련부는 비지도 학습, 또는 강화학습 등 다른 훈련 방법을 이용하여 검출 모델을 훈련시킬 수 있다. 각 검출 모델은 심층 신경망으로 구성될 수 있으며, 다양한 신경망 구조를 가질 수 있다. 예를 들면, 검출 모델 은 순환 신경망(Recurrent Neural Network, RNN), 합성곱 신경망(Convolutional Neural Network, CNN) 또는 RNN과 CNN의 결합구조 등과 같이 영상 처리 기법을 구현하는 것이 가능한 다양한 신경망 구조를 가질 수 있다. 검출부는 검출 모델을 이용하기 위해 입력 이미지의 크기를 조정할 수 있다. 추정부는 검출부의 검출 정보에 기초하여 얼굴 영역의 흐림 정도(amount of blur)를 추정하고, 특정 인의 얼굴 포즈(face pose)를 추정한다. 추정부는 흐림 정도 추정부 및 얼굴 포즈 추정부를 포함한다. 흐림 정도 추정부는 얼굴 영역에 대응되는 얼굴 이미지를 축소한 후 다시 확대하고, 축소 전 얼굴 이미지 와 확대된 얼굴 이미지 간 차이에 기초하여 흐림 정도를 추정한다. 구체적으로, 흐림 정도 추정부는 검출된 얼굴 영역에 대응되는 얼굴 이미지를 다운샘플링(down- sampling)한다. 흐림 정도 추정부는 다운샘플링된 얼굴 이미지를 다시 업샘플링(up-sampling)함으로써, 얼 굴 이미지를 복원한다. 이때, 다운샘플링 과정과 업샘플링 과정에서 일부 정보가 소실되거나 변형되기 때문에, 검출된 얼굴 이미지와 복원된 얼굴 이미지 사이에 차이가 발생한다. 얼굴 이미지의 흐림 또는 번짐이 적을수록, 즉 얼굴 이미지가 선 명할수록 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 커진다. 이를 이용하여, 흐림 정도 추정부는 얼굴 이미지와 복원된 얼굴 이미지 간 차이에 기초하여 흐림 정도를 추정한다. 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 클 때, 흐림 정도 추정부는 얼굴 이미지의 흐림 정도가 낮은 것으로 추정한다. 반면, 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 작을 때, 흐림 정도 추정부 는 얼굴 이미지의 흐림 정도가 높은 것으로 추정한다. 흐림 정도 추정부는 수학식 1을 이용하여 얼굴 이미지 와 복원된 얼굴 이미지 간 평균제곱오차(Mean Square Error, MSE)를 계산하고, 평균제곱오차를 통해 흐림 정도를 정량화할 수 있다. 수학식 1"}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "수학식 1에서, SMSE는 흐림 정도, n은 얼굴 이미지 내 픽셀들의 개수, i는 픽셀 인덱스, xi는 얼굴 이미지 내 i 번째 픽셀의 세기값(intensity)을 가리킨다. 는 복원된 얼굴 이미지 내 i 번째 픽셀의 세기값을 가리킨다. 얼굴 포즈 추정부는 얼굴 특징점들을 이용하여 얼굴 포즈로서, 특정인의 얼굴의 요(yaw), 피치(pitch) 또 는 롤(roll) 중 적어도 하나를 추정한다. 구체적으로, 얼굴 포즈를 추정하기 위해, 얼굴 포즈 추정부는 4 개의 직선들을 이용한다. 4 개의 직선들 중 제1 직선은 왼쪽 눈의 위치와 왼쪽 입꼬리의 위치를 잇는 직선이다. 제2 직선은 오른쪽 눈의 위치와 오른쪽 입꼬리의 위치를 잇는 직선이다. 제3 직선은 양쪽 눈의 위치들을 잇는 직선이다. 제4 직선은 입꼬리(corner of mouth)의 좌우 위치들을 잇는 직선이다. 얼굴 포즈 추정부는 제1 직선과 코의 위치 간 제1 거리를 계산하고, 제2 직선과 코의 위치 간 제2 거리를 계산한다. 얼굴 포즈 추정부는 제1 거리 및 제2 거리 간 차이에 기초하여 얼굴의 요를 추정한다. 얼굴 포즈 추정부는 코의 위치로부터 제3 직선까지 제3 거리를 계산하고, 및 코의 위치로부터 제4 직선까 지 제4 거리를 계산한다. 얼굴 포즈 추정부는 제3 거리 및 제4 거리 간 차이에 기초하여 얼굴의 피치를 추 정한다. 얼굴 포즈 추정부는 제3 직선의 기울기에 기초하여 얼굴의 롤을 추정한다. 일 예로서, 얼굴 포즈 추정부 는 오른쪽 눈의 위치를 지나는 수평선으로부터 제3 직선이 시계 반대방향으로 회전한 각도를 얼굴의 롤로 추정할 수 있다. 한편, 얼굴 포즈 추정부는 얼굴 포즈를 추정하는 데 벡터를 이용할 수 있다. 코의 위치로부터 제1 직선, 제2 직선, 제3 직선 및 제4 직선 각각을 향하는 벡터들은 제1 벡터, 제2 벡터, 제3 벡터 및 제4 벡터로 지칭될 수 있다. 얼굴 포즈 추정부는 제1 벡터 및 제2 벡터의 합의 크기에 기초하여 얼굴의 요를 추정하고, 제3 벡터 및 제4 벡터의 합의 크기에 기초하여 얼굴의 피치를 추정할 수 있다. 이때, 얼굴 포즈 추정부는 얼굴 의 요 및 피치를 정규화할 수 있다. 추정 적합성 판단부는 얼굴 영역의 흐림 정도 또는 특정인의 얼굴 포즈 중 적어도 하나가 특정인의 속성을 추정하는 데 적합한지 판단한다. 본 발명의 일 실시예에 의하면, 추정 적합성 판단부는 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 기 설 정된 기준값보다 큰 경우, 얼굴 영역의 흐림 정도가 특정인의 속성을 추정하는 데 적합한 것으로 판단한다. 본 발명의 일 실시예에 의하면, 추정 적합성 판단부는 얼굴의 요, 피치 및 롤 각각이 기 설정된 요 기준값, 피치 기준값 및 롤 기준값 각각보다 작은 경우, 얼굴 포즈가 특정인의 속성을 추정하는 데 적합한 것으 로 판단한다. 본 발명의 일 실시예에 의하면, 추정 적합성 판단부는 얼굴의 요, 피치 또는 롤 중 적어도 하나가 기 설정 된 요 기준값, 피치 기준값 또는 롤 기준값 중 적어도 하나보다 작은 경우, 얼굴 포즈가 특정인의 속성을 추정 하는 데 적합한 것으로 판단할 수 있다. 일 예로서, 얼굴의 롤이 30 도보다 작을 때, 추정 적합성 판단부 는 얼굴의 롤이 특정인의 속성을 추정하는 데 적합한 것으로 판단한다. 한편, 본 발명의 일 실시예에 의하면, 추정 적합성 판단부는 얼굴 영역의 흐림 정도와 얼굴 포즈에 앞서, 머리 영역에 대한 얼굴 영역의 비율에 기초하여 검출된 얼굴 영역이 특정인의 속성을 추정하는 데 적합한지 판 단할 수 있다. 머리 영역의 면적에 비해 얼굴 영역의 면적이 적다는 것은 특정인의 얼굴이 정면을 바라보고 있 지 않다는 것을 의미한다. 추정 적합성 판단부는 머리 영역과 얼굴 영역이 겹쳐진 면적의 비율을 나타내는 IoU를 계산할 수 있다. 여기서, IoU는 두 영역이 겹쳐진 면적을 두 영역을 합한 전체 면적으로 나눈 값이다. A 영역과 B 영역 간 IoU는 수학식 2와 같이 표현될 수 있다. 수학식 2"}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "머리 영역에 대한 얼굴 영역의 비율이 기 설정된 비율보다 높은 경우, 추정 적합성 판단부는 얼굴 영역이 특정인의 속성을 추정하는 데 적합한 것으로 판단한다. 반면, 머리 영역에 대한 얼굴 영역의 비율이 기 설정된 비율보다 낮은 경우, 얼굴 영역이 특정인의 속성을 추정하는 데 적합하지 않은 것으로 판단하고, 해당 얼굴 영 역을 무시한다. 본 발명의 일 실시예에 의하면, 얼굴 포즈가 특정인의 속성을 추정하는 데 적합한 것으로 판단된 때, 추정 적합 성 판단부는 제1 거리, 제2 거리, 제3 거리 및 제4 거리에 기초하여 얼굴 포즈의 품질을 판단할 수 있다. 구체적으로, 제1 거리와 제2 거리 간 차이가 작을 때, 추정 적합성 판단부는 얼굴 포즈의 품질이 높은 것으로 판단한다. 또한, 제3 거리와 제4 거리 간 차이가 작을 때, 추정 적합성 판단부는 얼굴 포즈의 품질이 높은 것으로 판단한다. 얼굴 포즈의 품질은 수학식 3과 같이 표현될 수 있다. 수학식 3"}
{"patent_id": "10-2022-0033593", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "수학식 3에서 Q는 얼굴 포즈의 품질, distv는 제1 거리와 제2 거리 간 차이, disth는 제3 거리와 제4 거리 간 차이를 지칭한다. 속성 추정부는 얼굴 영역에 기초하여 특정인의 속성을 추정한다. 여기서, 속성은 성별 또는 연령 중 적어도 하나를 포함한다. 즉, 속성 추정부는 특정인의 성별 또는 연령 중 적어도 하나를 추정할 수 있다. 이 외에, 특정인의 속성은 인종, 민족 또는 감정 등 다양한 신체 정보를 포 함할 수 있다. 본 발명의 일 실시예에 의하면, 속성 추정부는 심층 신경망 기반의 추정 모델을 이용하여 특정인의 속성을 추정할 수 있다. 추정 모델은 사람의 얼굴 이미지를 입력 받으면, 성별 또는 연령 중 적어도 하나를 제공한다. 추정 모델은 성별 또는 연령 중 적어도 하나에 대한 신뢰도를 더 제공할 수 있다. 신뢰도는 0 내지 1 사이 값으 로 수치화될 수 있다. 추정 모델의 생성을 위해, 모델 훈련부는 추정 모델이 얼굴 이미지를 입력 받으면 성별 또는 연령 중 적어 도 하나를 출력하도록 추정 모델을 훈련시킨다. 추정 모델은 지도 학습, 비지도 학습 또는 강화학습 등 다양한 학습 방법에 의해 학습될 수 있다. 추정 모델은 RNN 또는 CNN 등 다양한 신경망 구조를 가질 수 있다. 추정 모델은 사람이 정면을 바라보고, 얼굴 이미지의 흐림 정도가 적을 때 사람의 속성을 더욱 정확하게 추정한 다. 전술한 구성들을 이용하여, 속성 추정 장치는 이미지 내 얼굴 영역의 흐림 정도 또는 얼굴 포즈에 기초하여 속성을 추정할 사람을 필터링함으로써, 이미지 내 사람들의 속성의 전체적인 추정 정확도를 향상시킬 수 있다. 한편, 본 발명의 일 실시예에 의하면, 속성 추정 장치는 복수의 이미지들 내에서 사람의 움직임을 추적하고, 추적 정보를 관리하기 위해 추적 정보 관리부를 포함할 수 있다. 현재 입력 이미지 내 특정인의 속성 추정 후, 추적 정보 관리부는 이미지 획득부에 의해 획득된 입력 이미지가 최초 이미지인지 확인한다. 입력 이미지가 최초 이미지이면, 추적 정보 관리부는 특정인의 머리 영역의 위치 정보 및 추정된 속성에 기초하여 추적 정보를 생성한다. 생성된 추적 정보는 특정인의 식별 정보, 머리 영역의 좌표들, 좌표들의 신뢰 도 추정된 연령, 추정된 연령의 신뢰도, 추정된 성별 또는 추정된 성별의 신뢰도 중 적어도 하나를 포함한다. 연령의 신뢰도 및 성별의 신뢰도는 후술하는 얼굴 포즈의 품질에 기초하여 조정될 수 있다. 입력 이미지가 최초 이미지가 아니면, 추적 정보 관리부는 이전 입력 이미지 내 사람들 중 특정인에 대응 되는 사람이 있는지 판단한다. 이를 위해, 추적 정보 관리부는 이전 입력 이미지로부터 검출된 적어도 하 나의 이전 머리 영역 중에서 특정인의 머리 영역에 대응되는 영역이 있는지 판단할 수 있다. 구체적으로, 추적 정보 관리부는 이전 입력 이미지로부터 검출된 적어도 하나의 이전 머리 영역 중 하나를 선택한다. 추적 정보 관리부는 선택된 이전 머리 영역과 현재 입력 이미지 내 특정인의 머리 영역 간 IoU 값을 계산한다. 계산된 IoU 값이 소정의 기준값보다 클 때, 추적 정보 관리부는 선택된 이전 머리 영역이 특정인의 머리 영역에 대응되는 것으로 판단한다. 즉, 추적 정보 관리부는 선택된 이전 머리 영역에 대응 되는 사람과 특정인이 동일 인물인 것으로 판단한다. 특정인의 머리 영역에 대응되는 이전 머리 영역이 있는 경우, 추적 정보 관리부는 특정인의 머리 영역의 위치 정보 및 추정된 속성에 기초하여 이전 머리 영역에 대응되는 사람의 추적 정보를 갱신한다. 추적 정보에 포함된 머리 영역의 좌표들, 연령 및 성별이 갱신된다. 본 발명의 일 실시예에 의하면, 추적 정보 관리부는 속성의 신뢰도에 기초하여 추적 정보를 갱신할 수 있 다. 구체적으로, 추적 정보 관리부는 이전 머리 영역에 대응되는 사람의 추적 정보에 포함된 이전 속성의신뢰도를 획득한다. 추적 정보 관리부는 이전 속성의 신뢰도를 특정인의 추정된 속성의 신뢰도와 비교한다. 추정된 속성의 신뢰도가 이전 속성의 신뢰도보다 높을 때, 추적 정보 관리부는 이전 머리 영역 의 위치 정보 및 이전 속성을 특정인의 머리 영역의 위치 정보 및 특정인의 추정된 속성으로 갱신한다. 일 예로 서, 특정인에 대해 추정된 연령의 신뢰도 및 추정된 성별의 신뢰도 중 적어도 하나가 이전 연령의 신뢰도 및 이 전 성별의 신뢰도 중 적어도 하나보다 높을 때, 추적 정보 관리부가 추적 정보를 갱신할 수 있다. 본 발명의 다른 실시예에 의하면, 추적 정보 관리부는 얼굴 포즈의 품질에 기초하여 속성의 신뢰도를 조정 하고, 조정된 신뢰도에 기초하여 추적 정보를 갱신할 수 있다. 구체적으로, 추적 정보 관리부는 이전 머리 영역에 대응되는 사람의 추적 정보에 포함된 이전 속성의 신뢰도를 획득한다. 여기서, 이전 속성의 신뢰도는 이 전 얼굴 포즈의 품질에 기초하여 조정된 것이다. 추적 정보 관리부는 추정된 속성의 신뢰도에 얼굴 포즈의 품질을 곱함으로써, 추정된 속성의 신뢰도를 조정한다. 추적 정보 관리부는 이전 속성의 신뢰도를 특정인 의 추정된 속성의 조정된 신뢰도와 비교한다. 추정된 속성의 조정된 신뢰도가 이전 속성의 신뢰도보다 높을 때, 추적 정보 관리부는 이전 머리 영역의 위치 정보 및 이전 속성을 특정인의 머리 영역의 위치 정보 및 특정 인의 추정된 속성으로 갱신한다. 일 예로서, 특정인에 대해 추정된 연령의 조정된 신뢰도 및 추정된 성별의 조 정된 신뢰도 중 적어도 하나가 이전 연령의 신뢰도 및 이전 성별의 신뢰도 중 적어도 하나보다 높을 때, 추적 정보 관리부가 추적 정보를 갱신할 수 있다. 한편, 현재 입력 이미지 내에서 이전 머리 영역에 대응되는 사람이 없는 경우, 추적 정보 관리부는 대응되 는 사람의 추적을 중단한다. 전술한 과정을 통해, 속성 추정 장치는 카메라에 의해 촬영되는 비디오 내에서 특정인의 움직임과 속성을 추적함으로써, 카메라가 설치된 장소를 드나드는 인구의 특징들을 분석할 수 있다. 도 3a, 도 3b 및 도 3c는 본 발명의 일 실시예에 따른 얼굴 영역의 추정 적합성 판단을 설명하기 위한 도면이다. 본 발명의 일 실시예에 따른 속성 추정 장치는 얼굴 영역이 사람의 속성을 추정하는 데 적합한지 판단하기 위해, 머리 영역에 대한 얼굴 영역의 비율을 나타내는 IoU를 이용한다. 사람의 머리가 정면을 바라볼 때 머리 영역과 얼굴 영역 간 IoU가 높다. 반면, 머리의 방향이 정면으로부터 멀어질 때 IoU가 낮다. 도 3a를 참조하면, 제1 머리 영역 및 제1 얼굴 영역이 도시되어 있다. 속성 추정 장치는 제1 머리 영역과 제1 얼굴 영역이 겹치는 면적의 비율인 제1 IoU를 계산한다. 사람 의 머리가 정면을 바라보고 있으므로, 제1 IoU는 측면 얼굴에 따른 IoU 값보다 높게 계산된다. 제1 IoU가 기 설 정된 IoU 값보다 큰 경우, 속성 추정 장치는 제1 얼굴 영역이 사람의 속성을 추정하는 데 적합한 크기인 것으로 판단하고, 속성의 추정에 이용한다. 도 3b 및 도 3c를 참조하면, 제2 머리 영역, 제2 얼굴 영역, 제3 머리 영역 및 제3 얼굴 영역 이 도시되어 있다. 도 3a와 달리, 도 3b에서는 사람의 머리가 측면을 바라보고 있다. 도 3c에서는 사람의 머리가 아래를 바라보고 있다. 제2 머리 영역과 제2 얼굴 영역 간 제2 IoU, 및 제3 머리 영역과 제3 얼굴 영역 간 제3 IoU는 제1 IoU보다 작다. 제2 IoU 및 제3 IoU가 기 설정된 IoU 값보다 작은 경우, 속성 추정 장치는 제2 얼 굴 영역 또는 제3 얼굴 영역이 사람의 속성을 추정하는 데 부적합한 것으로 판단한다. 도 4는 본 발명의 일 실시예에 따른 얼굴 영역의 흐림 정도의 판단을 설명하기 위한 도면이다. 도 4를 참조하면, 얼굴 영역의 흐림 정도를 판단하기 위해, 속성 추정 장치는 얼굴 영역에 대응되는 얼굴 이미 지를 다운샘플링한다. 여기서, 다운샘플링은 얼굴 이미지를 축소시키는 것을 의미한다. 일 예로서, 속성 추정 장치는 얼굴 이미지에 포함된 픽셀들을 선별함으로써, 얼굴 이미지를 다운샘플링할 수 있 다. 속성 추정 장치는 다운샘플링된 얼굴 이미지를 업샘플링한다. 여기서, 업샘플링은 다운샘플링된 얼굴 이미 지를 확대하는 것이다. 속성 추정 장치는 다운샘플링된 얼굴 이미지에 포함된 픽셀들로부터 소정의 픽셀들을 추가함으로써, 업샘플링할 수 있다. 일 예로서, 속성 추정 장치는 저화질 이미지를 고화질 이미지로 변환하는 딥러닝 기반 모델을 이용할 수 있다. 속성 추정 장치는 다운샘플링되 얼굴 이미지를 업샘플링함 으로써, 복원된 얼굴 이미지를 얻는다.한편, 얼굴 이미지의 다운샘플링 과정에서, 얼굴 이미지에 포함된 픽셀 정보가 소실된다. 또한, 다운 샘플링된 얼굴 이미지의 업샘플링 과정에서, 얼굴 이미지에 포함된 픽셀과 다른 픽셀들이 추가된다. 이로 인해, 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 발생한다. 특히, 얼굴 이미지의 흐림 정도가 낮을수록, 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 더 커진다. 속성 추정 장치는 얼굴 이미지와 복원된 얼굴 이미지 간 차이를 나타내는 평균제곱오차를 계산한다. 계산된 평균제곱오차가 기 설정된 오차값보다 큰 경우, 속성 추정 장치는 얼굴 이미지의 흐림 정도가 낮은 것으로 판단한다. 나아가, 속성 추정 장치는 얼굴 이미지의 흐림 정도가 사람의 속성을 추정하는 데 적합 한 것으로 판단한다. 반면, 계산된 평균제곱오차가 기 설정된 오차값보다 작은 경우, 속성 추정 장치는 얼굴 이미지의 흐림 정 도가 높은 것으로 판단한다. 속성 추정 장치는 얼굴 이미지의 흐림 정도가 사람의 속성을 추정하는 데 부 적합한 것으로 판단한다. 도 5는 본 발명의 일 실시예에 따른 얼굴 특징점들을 나타낸 도면이다. 도 5를 참조하면, 얼굴 특징점들로서, 오른쪽 눈의 위치, 왼쪽 눈의 위치, 코의 위치, 오른쪽 입꼬리 위치, 및 왼쪽 입꼬리 위치가 도시되어 있다. 도 5에 도시된 얼굴 특징점들의 위치는 하나의 실시예일뿐이며, 다른 실시예에서 얼굴 특징점들의 위치는 변경 될 수 있다. 도 6은 본 발명의 일 실시예에 따른 얼굴 포즈의 추정을 설명하기 위한 도면이다. 도 6을 참조하면, 오른쪽 눈 위치, 왼쪽 눈 위치, 코 위치, 오른쪽 입꼬리 위치, 왼쪽 입 꼬리 위치, 제1 직선(L1), 제2 직선(L2), 제3 직선(L3) 및 제4 직선(L4)이 도시되어 있다. 사람의 얼굴의 방향에 따라 얼굴의 요, 피치 및 롤이 달라진다. 즉, 얼굴 포즈는 얼굴의 요, 피치 및 롤에 기초 하여 결정될 수 있다. 여기서, 얼굴의 요는 얼굴의 수평 방향으로 회전된 정도를 지칭한다. 얼굴의 요는 사람이 고개를 젓는 방향에 관한 것이다. 얼굴의 피치는 얼굴의 수직 방향으로 회전된 정도를 지칭한다. 얼굴의 피치는 사람이 고개를 끄덕이는 방향에 관한 것이다. 얼굴의 롤은 얼굴의 기울기를 지칭한다. 사람이 고개를 갸우뚱하는 방향이 관한 것이다. 얼굴의 요, 피치 및 롤 각각이 기 설정된 요 기준값, 피치 기준값 및 롤 기준값 각각보다 작은 경우, 속성 추정 장치는 얼굴 포즈가 사람의 속성을 추정하는 데 적합한 것으로 판단할 수 있다. 반면, 얼굴의 요, 피치 및 롤 각각이 기 설정된 기준값들보다 큰 경우, 속성 추정 장치는 얼굴 포즈가 사람의 속성을 추정하는 데 부적합한 한 것으로 판단할 수 있다. 이하에서는, 얼굴의 요, 피치 및 롤을 추정하는 방법을 설명한다. 속성 추정 장치는 얼굴의 요, 피치 및 롤을 추정하기 위해, 코 위치로부터 각 직선까지 거리와 제3 직선 (L3)의 기울기를 이용한다. 먼저, 속성 추정 장치는 코 위치로부터 제1 직선(L1)까지 거리 및 코 위치로부터 제2 직선(L2)까지 거리 간 제1 거리차를 얼굴의 요 값으로 추정한다. 얼굴의 방향이 정면일 때, 제1 거리차가 가장 작다. 얼굴의 요의 크기가 증가할 때, 제1 거리차가 증가한다. 얼굴의 방향이 측면일 때, 제1 거리차는 정면일 때보다 크다. 속성 추정 장치는 코 위치로부터 제3 직선(L3)까지 거리 및 코 위치로부터 제4 직선(L4)까지 거리 간 제2 거리차를 얼굴의 피치 값으로 추정한다. 얼굴의 방향이 정면일 때, 제2 거리차가 가장 작다. 얼굴의 피치의 크기가 증가할 때, 제2 거리차가 증가한다. 얼굴의 방향이 아래쪽일 때, 제2 거리차는 정면일 때보다 크다. 속성 추정 장치는 제3 직선(L3)의 기울기를 얼굴의 롤 값으로 추정한다. 제3 직선(L3)의 기울기는 수평선으로부 터 시계 반대방향으로 회전한 정도이다. 얼굴이 옆으로 기울어지지 않은 때, 제3 직선(L3)의 기울기는 0 도이다. 얼굴의 롤의 크기가 증가할 때, 제3 직선(L3)의 기울기가 증가한다. 이처럼, 속성 추정 장치는 얼굴의 요, 피치 및 롤에 대응되는 제1 거리차, 제2 거리차 및 제3 직선(L3)의 기울 기에 기초하여 얼굴 포즈를 추정할 수 있다. 한편, 속성 추정 장치는 제1 거리차 및 제2 거리차에 기초하여 얼굴 포즈의 품질을 산정할 수 있다. 제1 거리차 및 제2 거리차가 적을 때, 속성 추정 장치는 얼굴 포즈의 품질이 고품질인 것으로 판단한다. 반대로, 제1 거리 차 및 제2 거리차가 클 때, 속성 추정 장치는 얼굴 포즈의 품질이 저품질인 것으로 판단한다. 얼굴 포즈의 품질 은 추정된 속성의 신뢰도와 함께 추적 정보의 갱신에 이용된다. 도 7은 본 발명의 일 실시예에 따른 속성 추정 방법의 순서도이다. 도 7을 참조하면, 속성 추정 장치는 입력 이미지 내 적어도 한 사람의 머리 영역을 검출한다(S700). 속성 추정 장치는 머리 영역 내에서 사람의 얼굴을 포함하는 얼굴 영역을 검출한다(S710). 본 발명의 일 실시예에 의하면, 머리 영역에 대한 얼굴 영역의 비율이 기 설정된 비율보다 낮은 경우, 속성 추 정 장치는 해당 얼굴 영역을 무시한다. 본 발명의 일 실시예에 의하면, 속성 추정 장치는 머리 영역 내에서 양쪽 눈의 위치들, 코의 위치 및 입꼬리의 좌우 위치들을 포함하는 얼굴 특징점들을 더 검출한다. 속성 추정 장치는 얼굴 영역에 대응되는 얼굴 이미지를 이용하여 얼굴 영역의 흐림 정도를 추정한다. 구체적으 로, 속성 추정 장치는 얼굴 영역에 대응되는 얼굴 이미지를 다운샘플링한다. 속성 추정 장치는 다운샘플링된 얼 굴 이미지를 업샘플링함으로써 업샘플링된 얼굴 이미지를 복원한다. 속성 추정 장치는 얼굴 이미지와 복원된 얼 굴 이미지 간 차이에 기초하여 얼굴 영역의 흐림 정도를 계산한다. 얼굴 이미지와 복원된 얼굴 이미지 간 차이 가 클수록, 얼굴 영역의 흐림 정도가 더 작다. 속성 추정 장치는 얼굴 특징점들을 이용하여 사람의 얼굴 포즈를 추정한다. 구체적으로, 속성 추정 장치는 얼굴 특징점들을 이용하여 얼굴 포즈를 구성하는 얼굴의 요, 피치 및 롤을 추정한다. 속성 추정 장치는 왼쪽 눈의 위 치와 왼쪽 입꼬리의 위치를 잇는 제1 직선과 코의 위치 간 제1 거리, 및 오른쪽 눈의 위치와 오른쪽 입꼬리의 위치를 잇는 제2 직선과 코의 위치 간 제2 거리 간 차이에 기초하여 얼굴의 요를 추정한다. 속성 추정 장치는 양쪽 눈의 위치들을 잇는 제3 직선과 코의 위치 간 제3 거리, 및 입꼬리의 좌우 위치들을 잇는 제4 직선과 코의 위치 간 제4 거리 간 차이에 기초하여 얼굴의 피치를 추정한다. 속성 추정 장치는 제3 직선의 기울기에 기초하 여 얼굴의 롤을 추정한다. 속성 추정 장치는 얼굴 영역의 흐림 정도 또는 사람의 얼굴 포즈 중 적어도 하나가 사람의 속성을 추정하는 데 적합한지 판단한다(S720). 속성 추정 장치는 얼굴 이미지와 복원된 얼굴 이미지 간 차이가 기 설정된 기준값보다 큰 경우, 얼굴 영역의 흐 림 정도가 사람의 속성을 추정하는 데 적합한 것으로 판단한다. 속성 추정 장치는 얼굴의 요, 피치 및 롤 각각이 기 설정된 요 기준값, 피치 기준값 및 롤 기준값 각각보다 작 은 경우, 얼굴 포즈가 사람의 속성을 추정하는 데 적합한 것으로 판단한다. 얼굴 영역의 흐림 정도 또는 사람의 얼굴 포즈 중 적어도 하나가 사람의 속성을 추정하는 데 적합한 것으로 판 단된 경우, 속성 추정 장치는 얼굴 영역에 기초하여 사람의 속성을 추정한다(S730). 여기서, 사람의 속성은 사람의 성별 또는 연령 중 적어도 하나를 포함한다. 한편, 본 발명의 일 실시예에 따른 속성 추정 장치는 복수의 이미지들 내에서 사람의 움직임 및 속성을 추적할 수 있다. 속성 추정 장치는 이전 입력 이미지로부터 검출된 적어도 하나의 이전 머리 영역 중에서 현재 머리 영역에 대응 되는 이전 머리 영역이 있는지 판단한다. 대응되는 이전 머리 영역이 없는 경우, 속성 추정 장치는 전신 영역의 위치 정보 및 추정된 속성에 기초하여 사 람의 추적 정보를 생성한다. 대응되는 이전 머리 영역이 있는 경우, 속성 추정 장치는 머리 영역의 위치 정보 및 추정된 속성에 기초하여 이 전 머리 영역에 대응되는 사람의 추적 정보를 갱신한다. 이때, 갱신 과정에서, 속성 추정 장치는 신뢰도 및 얼굴 포즈의 품질을 고려하여 추적 정보를 갱신할 수 있다. 구체적으로, 속성 추정 장치는 제1 거리와 제2 거리 간 차이, 및 제3 거리와 제4 거리 간 차이에 기초하여 얼굴포즈의 품질을 계산한다. 속성 추정 장치는 얼굴 포즈의 품질에 기초하여 추정된 속성의 신뢰도를 조정한다. 이전 머리 영역에 대응되는 사람의 추적 정보에 포함된 이전 속성의 조정된 신뢰도 및 추정된 속성의 조정된 신 뢰도를 비교한다. 추정된 속성의 조정된 신뢰도가 이전 속성의 조정된 신뢰도보다 높은 경우, 속성 추정 장치는 사람의 추적 정보에 포함된 이전 속성을 추정된 속성으로 대체한다. 본 명세서에 설명되는 시스템들 및 기법들의 다양한 구현예들은, 디지털 전자 회로, 집적회로, FPGA(field programmable gate array), ASIC(application specific integrated circuit), 컴퓨터 하드웨어, 펌웨어, 소프 트웨어, 및/또는 이들의 조합으로 실현될 수 있다. 이러한 다양한 구현예들은 프로그래밍가능 시스템 상에서 실 행 가능한 하나 이상의 컴퓨터 프로그램들로 구현되는 것을 포함할 수 있다. 프로그래밍가능 시스템은, 저장 시 스템, 적어도 하나의 입력 디바이스, 그리고 적어도 하나의 출력 디바이스로부터 데이터 및 명령들을 수신하고 이들에게 데이터 및 명령들을 전송하도록 결합되는 적어도 하나의 프로그래밍가능 프로세서(이것은 특수 목적 프로세서일 수 있거나 혹은 범용 프로세서일 수 있음)를 포함한다. 컴퓨터 프로그램들(이것은 또한 프로그램들, 소프트웨어, 소프트웨어 애플리케이션들 혹은 코드로서 알려져 있음)은 프로그래밍가능 프로세서에 대한 명령어 들을 포함하며 \"컴퓨터가 읽을 수 있는 기록매체\"에 저장된다. 컴퓨터가 읽을 수 있는 기록매체는, 컴퓨터 시스템에 의하여 읽혀질 수 있는 데이터가 저장되는 모든 종류의 기 록장치를 포함한다. 이러한 컴퓨터가 읽을 수 있는 기록매체는 ROM, CD-ROM, 자기 테이프, 플로피디스크, 메모 리 카드, 하드 디스크, 광자기 디스크, 스토리지 디바이스 등의 비휘발성(non-volatile) 또는 비일시적인(non- transitory) 매체일 수 있으며, 또한 데이터 전송 매체(data transmission medium)와 같은 일시적인 (transitory) 매체를 더 포함할 수도 있다. 또한, 컴퓨터가 읽을 수 있는 기록매체는 네트워크로 연결된 컴퓨터 시스템에 분산되어, 분산방식으로 컴퓨터가 읽을 수 있는 코드가 저장되고 실행될 수도 있다. 본 명세서의 흐름도/타이밍도에서는 각 과정들을 순차적으로 실행하는 것으로 기재하고 있으나, 이는 본 개시의 일 실시예의 기술 사상을 예시적으로 설명한 것에 불과한 것이다. 다시 말해, 본 개시의 일 실시예가 속하는 기 술 분야에서 통상의 지식을 가진 자라면 본 개시의 일 실시예의 본질적인 특성에서 벗어나지 않는 범위에서 흐 름도/타이밍도에 기재된 순서를 변경하여 실행하거나 각 과정들 중 하나 이상의 과정을 병렬적으로 실행하는 것으로 다양하게 수정 및 변형하여 적용 가능할 것이므로, 흐름도/타이밍도는 시계열적인 순서로 한정되는 것은 아니다. 이상의 설명은 본 실시예의 기술 사상을 예시적으로 설명한 것에 불과한 것으로서, 본 실시예가 속하는 기술 분 야에서 통상의 지식을 가진 자라면 본 실시예의 본질적인 특성에서 벗어나지 않는 범위에서 다양한 수정 및 변 형이 가능할 것이다. 따라서, 본 실시예들은 본 실시예의 기술 사상을 한정하기 위한 것이 아니라 설명하기 위 한 것이고, 이러한 실시예에 의하여 본 실시예의 기술 사상의 범위가 한정되는 것은 아니다. 본 실시예의 보호 범위는 아래의 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술 사상은 본 실시예의 권리범위에 포함되는 것으로 해석되어야 할 것이다."}
{"patent_id": "10-2022-0033593", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 다양한 상황에서 촬영된 머리 이미지를 나타낸 도면이다. 도 2는 본 발명의 일 실시예에 따른 속성 추정 장치의 블록 구성도이다. 도 3a, 도 3b 및 도 3c는 본 발명의 일 실시예에 따른 얼굴 영역의 추정 적합성 판단을 설명하기 위한 도면이다. 도 4는 본 발명의 일 실시예에 따른 얼굴 영역의 흐림 정도의 판단을 설명하기 위한 도면이다. 도 5는 본 발명의 일 실시예에 따른 얼굴 특징점들을 나타낸 도면이다. 도 6은 본 발명의 일 실시예에 따른 얼굴 포즈의 추정을 설명하기 위한 도면이다. 도 7는 본 발명의 일 실시예에 따른 속성 추정 방법의 순서도이다."}
