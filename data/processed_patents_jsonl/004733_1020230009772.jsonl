{"patent_id": "10-2023-0009772", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0117423", "출원번호": "10-2023-0009772", "발명의 명칭": "인공지능을 이용한 공구 상태 모니터링 방법, 장치 및 프로그램", "출원인": "(주)플레이오니", "발명자": "우제학"}}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 학습용 전류 데이터 수집단계와; 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구축하는 공구 가공 전류 데이터셋 구축단계와; 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델의 신경망을학습시키는 학습단계와; 학습된 상기 공구 비정상 상태 예측 딥러닝 모델의 신경망을 공구 상태 모니터링 시스템에 설치하는설치단계와; 상기 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에공급되는 시계열의 전류 데이터를 수집하는 모니터링용 전류 데이터 수집단계와; 상기 전류 데이터를 입력받은 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 전류 데이터의 특징에 따라 비정상 점수를 추론하는 비정상 점수 추론단계와; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이 아니면 '공구 정상 상태'로 판정하는 정상 판정단계와; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이면 상기 비정상 점수에 기반한 마모 단계 및 파손 상태를 판정하는 비정상 판정단계;가 포함되어 이루어짐을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서, 상기 학습단계에 있어서, 상기 공구 비정상 상태 예측 딥러닝 모델은, 공구 정상 상태 데이터셋만을 사용해서학습되는 단일 클래스 비정상 탐지 방식의 모델 구조로 이루어짐을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 1에 있어서, 상기 공구 가공 전류 데이터셋은, 세그먼트 단위로 상기 공구 비정상 상태 예측 딥러닝 모델에 입력되도록 분할됨을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "청구항 1에 있어서, 상기 학습단계에서는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 식별하고자 하는 단계 수만큼 정의된 공구 마모 단계 클래스별 데이터를 수집하여 레이블링하고, 공구 마모 단계 분류 딥러닝 모델의 신경망을 더 학습시키고, 상기 설치단계에서는, 학습된 상기 공구 마모 단계 분류 딥러닝 모델의 신경망을 상기 공구 상태 모니터링 시스템에 더 설치하며, 상기 비정상 판정단계에서는, 상기 비정상 점수에 기반한 마모 단계 및 파손 상태의 판정 대신에, 상기 전류 데공개특허 10-2024-0117423-3-이터를 입력받은 상기 공구 마모 단계 분류 딥러닝 모델이 상기 공구 마모 단계 클래스에 따라 마모 단계를 추론하고, 상기 공구 마모 단계 클래스에 해당되지 않는 경우에는 '불특정 공구 파손 상태'로 판정하도록 이루어짐을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "청구항 4에 있어서, 상기 학습단계에서는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 파손 형태에 따라정의된 공구 파손 상태 클래스별 데이터를 수집하여 레이블링하고, 공구 파손 상태 분류 딥러닝 모델의 신경망을 더 학습시키고, 상기 설치단계에서는, 학습된 상기 공구 파손 상태 분류 딥러닝 모델의 신경망을 상기 공구 상태 모니터링 시스템에 더 설치하며, 상기 비정상 판정단계에서는, 상기 공구 마모 단계 클래스에 해당되지 않는 경우에 '불특정 공구 파손 상태'로판정하는 대신에, 상기 전류 데이터를 입력받은 상기 공구 파손 상태 분류 딥러닝 모델이 상기 공구 파손 상태클래스에 따라 파손 형태를 추론하고, 상기 공구 파손 상태 분류 딥러닝 모델에 파손 상태 클래스가 분류되지않은 경우에는, 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정하도록 이루어짐을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "청구항 1에 있어서, 2 이상의 공구를 사용하는 상기 공작기계에 대해서는, 각 공구별로 별도의 딥러닝 모델을 구축함을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "청구항 1에 있어서, 동일 종류의 공구가 다른 공작기계에서 사용되거나, 다른 공작물에 대해 사용되거나, 다른 가공 조건 하에서 사용되는 경우, 상기 공구에 대한 딥러닝 모델들은 전용시 추론 가능하도록 학습되어 일반화됨을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "청구항 1에 있어서, 상기 전류 데이터는, CNC 컨트롤러 내부에 저장된 전류값, 또는, 전류 센서로부터 획득된 전류값으로 이루어짐을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 방법."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 학습용 전류 데이터 수집모듈과; 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구축하는 공구 가공 전류 데이터셋 구축모듈과; 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델의 신경망을학습시키는 학습모듈과; 학습된 상기 공구 비정상 상태 예측 딥러닝 모델의 신경망을 공구 상태 모니터링 시스템에 설치하는설치모듈과; 상기 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에공급되는 시계열의 전류 데이터를 수집하는 모니터링용 전류 데이터 수집모듈과; 공개특허 10-2024-0117423-4-상기 전류 데이터를 입력받은 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 전류 데이터의 특징에 따라 비정상 점수를 추론하는 비정상 점수 추론모듈과; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이 아니면 '공구 정상 상태'로 판정하는 정상 판정모듈과; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이면 상기 비정상 점수에 기반한 마모 단계 및 파손 상태를 판정하는 비정상 판정모듈;이 포함되어 이루어짐을 특징으로 하는, 인공지능을 이용한 공구 상태 모니터링 장치."}
{"patent_id": "10-2023-0009772", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "정보기기에 청구항 1에 기재된 방법의 각 단계를 실행시키기 위한 정보기기용 프로그램을 기록한, 정보기기로읽을 수 있는 저장매체에 기록된 정보기기용 프로그램."}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수 집하는 학습용 전류 데이터 수집단계와; 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구축하는 공구 가공 전류 데이터셋 구축단계와; 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정 (뒷면에 계속)"}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은, 인공지능을 이용한 공구 상태 모니터링 방법, 장치 및 프로그램에 관한 것으로서, 보다 상세히는, 공구 구동 모터의 전류값의 특징을 단일 클래스 비정상 탐지 방식으로 학습한 후 입력된 모터 전류값에 따라 공 구의 비정상, 마모, 파손 등의 상태를 예측 내지 추정하는 방식으로 모니터링하는 방법, 장치 및 프로그램에 관 한 것이다."}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "공작기계는, 공구를 사용하여 공작물을 가공하는 기계이다. 현대의 초고속 CNC (Computer Numerical Control) 공작기계 기반 생산 체계에 있어서의 생산성은, 공구의 마모 특성에 많은 영향을 받는다. 여기서, 공구에 대한 '예방 정비'만으로는, 공구의 마모 문제에 대한 효율적인 해결이 어려울 수 있다. 그리고, 심각한 공구 마모는, 공작물 손상을 발생시킬 뿐만 아니라, 공작기계 자체의 고장을 야기할 수 있다. 여러 개의 공구가 미리 정해진 CNC 프로그램 순서에 따라 교환되면서 연속적인 가공이 진행되는 MCT (머시닝 센 터)의 경우는, 하나의 공구의 고장이 공작물 전체를 손상시킬 수도 있기 때문에, 공구 마모에 대한 특별한 모니 터링이 더 필요하다. 공작물 손상이나 공작기계 고장 방지를 위해서는, 가공 도중에 기계 작동을 중단하고, 직접 공구 마모 내지 파 손 상태를 인력 또는 기계에 의해 측정하고 모니터링하는 것이 제일 원시적이고 확실한 대처 방법이다. 그러나, 이 방법(직접 모니터링)을 채택할 경우, 빈번한 설비 가동 중단에 의한 생산성 저하 문제가 따르게 된다. 따라서, 공구의 현재 상태를 실시간으로 간접 모니터링하고, 문제 발생시 즉각 대응할 수 있는 체계가 필요하다. 이를 위해, 여러 센서들을 이용하여 수집된 데이터를 분석하고, 간접적으로 공구 마모 상태를 추정 (간접 모니터링)하는 것이 현실적인 대안이 될 수 있다. 하기 특허문헌에는, 메인 구동 절삭 토크와 공구 마모 계수에 따라 공구 상태를 모니터링하는 기술이 개시되어 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 특허등록 10-0413987 공보"}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "발명의 내용"}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "다음과 같은 여러 센서 신호 데이터를 이용하여, 공구 작동 중에 간접적으로 공구 마모 내지 파손 상태를 예측 하는 것이 가능하다. - 절삭 부하 (cutting force) 신호 - 진동 (vibration) 신호 - 음향 방출 (acoustic emission) 신호 - 가공 표면 (machined surface) 이미지 - 모터 전류 (motor current) 신호 센서 종류에 따라 장단점이 존재한다. 예컨대 절삭 부하 신호, 진동 신호, 및 음향 방출 신호는 모두, 정밀한 측정이 쉽지 않고, 공구의 작동량이나 마모 상태와 직접적 관계를 나타내는 것이 아니라서 견련성이 부족하며, 단순히 파생적 관계만을 나타낼 뿐이다. 그리고 가공 표면 이미지는, 다양한 공고 마모 패턴에 비해 이미지의 분류 및 계량화가 쉽지 않아서, 학습 데이터 생성에 많은 자원을 요하고, 정량적 판단에 이용되기 쉽지 않다. 한편, 스핀들 모터나 서보 모터의 전류 신호 데이터만을 가지고, 공구 마모 상태를 예측하는 것이 가능하다. 스 핀들 모터는, 주로 회전 가공 등 가공기계의 가공 동작을 실현하는 모터이다. 서보 모터는, 주로 공구와 공작물 사이의 상대 이송이나 자세변환 등의 동작을 실현하는 모터이다. 이 모터 전류는, 예컨대 드릴의 경우에 목표 절삭 깊이 등 목표치를 달성하도록 하기 위해 필요한 부하 전류일 수 있다. 이는, 인버터로부터 모터에 입력되는 입력 전류, 공작기계가 모터에 공급하는 공급 전류, 또는 의미상 으로 공구 가공 전류라고 할 수 있고, 이하, 단순히 전류 데이터라 약칭하는 경우가 있으며, 공구의 작동부하나 마모 상태를 보다 직접적으로 나타내는 데이터이다. 본 발명은, 스핀들 모터만 또는 스핀들 모터와 서보 모터 모두의 입력 전류 신호 데이터에 딥러닝 기술을 적용 하여, 현재의 공구 마모 내지 파손 상태를 추정하기 위한, 인공지능을 이용한 공구 상태 모니터링 방법, 장치 및 프로그램 내지 시스템을 제공하고자 하는 것이다. 이하에서는, 공구 마모 내지 파손에 대해 시간을 소모하여 감시한다는 의미에서 모니터링이라 하고, 인공지능을 이용하여 전류 데이터로부터 공구 마모 내지 파손 상태에 대해 간접적으로 판단하는 과정이나 동작을 예측, 추 정, 추론, 감지, 또는 판정 등의 용어로 혼용하여 사용하는 경우가 있으나, 이들은 결국 인공지능 분야의 통상 의 지식을 가진 자가 동일한 효용을 일으키도록 하는 프로세스의 상이한 표현이 불과하고, 실질은 동일한 것임 은 당연하다."}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상기 과제를 달성하기 위한 본 발명의 방법은, 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 학습용 전류 데이터 수집단 계와; 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구축하는 공구 가공 전류 데이터셋 구축단계 와; 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델의 신경 망을 학습시키는 학습단계와; 학습된 상기 공구 비정상 상태 예측 딥러닝 모델의 신경망을 공구 상태 모니터링 시스템에 설치하는 설치단계와; 상기 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공 작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 모니터링용 전류 데이터 수집단계와; 상기 전류 데이터를 입력받은 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 전류 데이터의 특징에 따라 비정 상 점수를 추론하는 비정상 점수 추론단계와; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이 아니면 '공구 정상 상태'로 판정하는 정상 판정단계와; 상기 공구 비 정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이면 상기 비정상 점 수에 기반한 마모 단계 및 파손 상태를 판정하는 비정상 판정단계;가 포함되어 이루어짐을 특징으로 하는, 인공 지능을 이용한 공구 상태 모니터링 방법이다. 여기서, 상기 학습단계에 있어서, 상기 공구 비정상 상태 예측 딥러닝 모델은, 공구 정상 상태 데이터셋만을 사 용해서 학습되는 단일 클래스 비정상 탐지 방식의 모델 구조로 이루어질 수 있다. 또한, 상기 공구 가공 전류 데이터셋은, 세그먼트 단위로 상기 공구 비정상 상태 예측 딥러닝 모델에 입력되도 록 분할될 수 있다. 또한, 상기 학습단계에서는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 식별하고자 하는 단계 수만큼 정의된 공구 마모 단계 클래스별 데이터를 수집하여 레이블링하고, 공구 마모 단계 분류 딥러닝 모 델의 신경망을 더 학습시키고, 상기 설치단계에서는, 학습된 상기 공구 마모 단계 분류 딥러닝 모델의 신경망을 상기 공구 상태 모니터링 시스템에 더 설치하며, 상기 비정상 판정단계에서는, 상기 비정상 점수에 기반한 마모 단계 및 파손 상태의 판정 대신에, 상기 전류 데이터를 입력받은 상기 공구 마모 단계 분류 딥러닝 모델이 상기 공구 마모 단계 클래스에 따라 마모 단계를 추론하고, 상기 공구 마모 단계 클래스에 해당되지 않는 경우에는 '불특정 공구 파손 상태'로 판정하도록 이루어질 수 있다. 여기서, 상기 학습단계에서는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 파손 형태 에 따라 정의된 공구 파손 상태 클래스별 데이터를 수집하여 레이블링하고, 공구 파손 상태 분류 딥러닝 모델의 신경망을 더 학습시키고, 상기 설치단계에서는, 학습된 상기 공구 파손 상태 분류 딥러닝 모델의 신경망을 상기 공구 상태 모니터링 시스템에 더 설치하며, 상기 비정상 판정단계에서는, 상기 공구 마모 단계 클래스에 해당되 지 않는 경우에 '불특정 공구 파손 상태'로 판정하는 대신에, 상기 전류 데이터를 입력받은 상기 공구 파손 상 태 분류 딥러닝 모델이 상기 공구 파손 상태 클래스에 따라 파손 형태를 추론하고, 상기 공구 파손 상태 분류 딥러닝 모델에 파손 상태 클래스가 분류되지 않은 경우에는, 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정하도록 이루어질 수 있다. 한편, 2 이상의 공구를 사용하는 상기 공작기계에 대해서는, 각 공구별로 별도의 딥러닝 모델을 구축할 수 있다. 그리고 동일 종류의 공구가 다른 공작기계에서 사용되거나, 다른 공작물에 대해 사용되거나, 다른 가공 조건 하 에서 사용되는 경우, 상기 공구에 대한 딥러닝 모델들은 전용시 추론 가능하도록 학습되어 일반화될 수 있다. 그리고 상기 전류 데이터는, CNC 컨트롤러 내부에 저장된 전류값, 또는, 전류 센서로부터 획득된 전류값으로 이 루어질 수 있다. 한편, 상기 과제를 달성하기 위한 본 발명의 장치는, 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 학습용 전류 데이터 수집모듈과; 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구축하는 공구 가공 전류 데이터셋 구 축모듈과; 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델 의 신경망을 학습시키는 학습모듈과; 학습된 상기 공구 비정상 상태 예측 딥러닝 모델의 신경망을 공구 상태 모 니터링 시스템에 설치하는 설치모듈과; 상기 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공 구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 모니터링용 전류 데이터 수집 모듈과; 상기 전류 데이터를 입력받은 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 전류 데이터의 특징에 따라 비정상 점수를 추론하는 비정상 점수 추론모듈과; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이 아니면 '공구 정상 상태'로 판정하는 정상 판정모듈과; 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이면 상기 비 정상 점수에 기반한 마모 단계 및 파손 상태를 판정하는 비정상 판정모듈;이 포함되어 이루어짐을 특징으로 하 는, 인공지능을 이용한 공구 상태 모니터링 장치이다. 한편, 상기 과제를 달성하기 위한 본 발명의 프로그램은, 정보기기에 상기에 기재된 방법의 각 단계를 실행시키 기 위한 정보기기용 프로그램을 기록한, 정보기기로 읽을 수 있는 저장매체에 기록된 정보기기용 프로그램이다."}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 의하면, 정확한 공구 마모 및 파손 상태 예측을 통해, 적시의 예측 정비가 가능해진다. 그리고 마모 상태 예측 결과를 이용한 효율적인 사전 정비가 가능해짐으로써, 공구 유지보수 비용을 절감할 수 있다. 그리고 공구 파손을 실시간 감지함으로써, 작업자로 하여금 즉각적인 대응 조치를 취하게 하여, 가공품 손상 및 공작기계 고장을 방지할 수 있다. 그리고 공작기계의 가동 중단 시간을 최소화함으로써, 생산성 제고에 기여할 수 있다."}
{"patent_id": "10-2023-0009772", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부도면을 참조하면서 본 발명에 대해 상세히 설명한다. 다만, 동일구성에 의해 동일기능을 가지는 부재 에 대해서는, 도면이 달라지더라도 동일부호를 유지함으로써, 그 상세한 설명을 생략하는 경우가 있다. 또한, 어떤 부재의 전후, 좌우, 상하에 다른 부재가 배치되거나 연결되는 관계는, 그 중간에 별도 부재가 삽입 되는 경우를 포함한다. 반대로, 어떤 부재가 다른 부재의 '바로' 전후, 좌우, 상하에 있다고 할 때에는, 중간에 별도 부재가 없는 것을 뜻한다. 그리고 어떤 부분이 다른 구성요소를 '포함'한다고 할 때, 이는 특별히 반대되 는 기재가 없는 한, 다른 구성요소를 제외하는 것이 아니라, 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 그리고 구성의 명칭을 제1, 제2 등으로 구분한 것은, 그 구성이 동일한 관계로 이를 구분하기 위한 것으로, 반 드시 그 순서에 한정되는 것은 아니다. 또한, 명세서에 기재된 '유닛', '수단', '부', '부재', '모듈' 등의 용 어는, 적어도 하나의 기능이나 동작을 하는 포괄적인 구성의 단위를 의미한다. 그리고 명세서에 기재된 단말, 서버 등의 정보처리기기는, 특정한 기능이나 동작이 구현된 하드웨어를 의미하는 하드 와이어링을 기본적으로 의미하지만, 특정한 하드웨어에 한정되도록 해석되어서는 안되고, 일반 범용 하드웨어 상에 그 특정한 기능이나 동작이 구현되도록 하기 위해 구동되는 소프트웨어로 이루어지는 소프트 와이어링을 배제하는 것이 아니다. 즉, 단말 또는 서버는, 어떤 장치가 될 수도 있고, 앱과 같이, 어떤 기기에 설치되는 소프트웨어가 될 수도 있다. 그리고 도면에 나타난 각 구성의 크기 및 두께는, 설명의 편의를 위해 임의로 나타내었으므로, 본 발명이 반드 시 도면에 도시된 바에 한정되지 않으며, 층 및 영역 등의 여러 부분 및 영역을 명확하게 표현하기 위해 두께 등은 과장하여 확대 또는 축소하여 나타낸 경우가 있다. <기본구성> 본 발명의 방법은, 인공지능을 이용한 공구 상태 모니터링 방법이다. 상기 방법은, 학습용 전류 데이터 수집단 계와; 공구 가공 전류 데이터셋 구축단계와; 학습단계와; 설치단계와; 모니터링용 전류 데이터 수집단계 (S10)와; 비정상 점수 추론단계(S20)와; 정상 판정단계(S22)와; 비정상 판정단계(S24);가 포함되어 이루어짐을 특징으로 한다. 상기 학습용 전류 데이터 수집단계는, 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구 와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 단계이다. CNC 공작기계를 이용해 가공이 이루어지는 동안 모터에 공급되는 전류 시계열 데이터를 수집하여, 공구 가 공 전류 데이터셋을 구축한다. 이 모터 전류 데이터는, 학습된 공구 상태 예측 및 분류 모델을 이용하 여 공구 상태를 추론할 때 입력 데이터로 또한 사용될 수 있다. 여기서, 모터는 공구를 구동하는 하나 이상의 스핀들(spindle) 모터만으로 구성되는 것이 가능하다. 선삭 (turning) 작업과 같이 공구가 아닌 공작물을 회전시켜주는 스핀들 모터도 포함된다. 또한, 거기에 더하여 하나 이상의 서보(servo) 모터가 포함되어, 스핀들과 서보 모터가 모두 포함되는 경우도 가능하다. 서보 모터는 가공이 진행되는 동안 공작물이나 공구를 이송(feed)시켜 주는 역할을 수행하는 모터이다. 2개 이상의 모터에서 데이터 수집이 이루어지는 경우에는, 다변량 (multivariate) 시계열 데이터로 구성될 수 있다. 상기 공구 가공 전류 데이터셋 구축단계는, 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구 축하는 단계이다. 이 공구 가공 전류 데이터셋은, 공구 정상 상태 데이터셋, 공구 마모 단계 데이터셋, 및 공구 파손 상태 데이터셋의 세가지 부분 집합으로 구성될 수 있다. 상기 학습단계는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델의 신경망을 학습시키는 단계이다. 이 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델, 공구 마모 단계 분류 딥러닝 모델 , 및 공구 파손 상태 분류 딥러닝 모델을 학습시키는데 사용한다. 도 1의 학습 단계가 이 과정을 도시 한다. 상기 설치단계는, 학습된 상기 공구 비정상 상태 예측 딥러닝 모델의 신경망을 공구 상태 모니터링 시 스템에 설치하는 단계이다. 상기 모니터링용 전류 데이터 수집단계(S10)는, 상기 공작기계에서 공구를 이용한 공작물의 가공이 이루어 지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 단계이다. 상기 비정상 점수 추론단계(S20)는, 상기 전류 데이터를 입력받은 상기 공구 비정상 상태 예측 딥러닝 모델(5 1)이 상기 전류 데이터의 특징에 따라 비정상 점수를 추론하는 단계이다. 상기 정상 판정단계(S22)는, 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이 아니면 '공구 정상 상태'로 판정하는 단계이다. 상기 비정상 판정단계(S24)는, 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이면 상기 비정상 점수에 기반한 마모 단계 및 파손 상태를 판정하는 단계이다. 여기서, 상기 학습단계에 있어서, 상기 공구 비정상 상태 예측 딥러닝 모델은, 공구 정상 상태 데이터셋 만을 사용해서 학습되는 단일 클래스 비정상 탐지 (one-class anomaly detection) 방식의 모델 구조로 이루 어질 수 있다. 즉, 정상 상태 데이터셋에 포함되지 않은 모든 비정상 입력 데이터를 탐지할 수 있도록 학습 된다. 이 모델을 사용하여 실제 가공시에 현재의 공구 가공 전류 데이터를 입력으로 받아서, 공구의 정상 및 비정상 상태 여부를 판정한다. 도 1의 사용 단계가 이 과정을 도시하고 있다. 공구 마모 단계 데이터셋과 공구 파손 상태 데이터셋은, 이 모델의 학습 여부를 검증하기 위해 사용될 수 있다. 여기서, 상기 공구 가공 전류 데이터셋은, 시계열 데이터이기 때문에, 세그먼트 단위로 상기 공구 비정상 상태 예측 딥러닝 모델에 입력되도록 분할될 수 있다. 한 공구에 의해 연속적으로 이루어지는 단위 가공은 몇 초에서 몇 분 정도의 시간이 소요되는데, 이 전체 데이 터를 하나의 세그먼트로 구성하는 것도 가능하고, 여러 개의 세그먼트로 분할하는 것도 가능하다. 그리고 연속 한 세그먼트가 서로 겹쳐지도록 세그먼트 윈도우를 슬라이딩(sliding)시키면서 분할하는 것도 가능하다. 그리고 각 세그먼트를 모델링하여 나온 특징(feature)들을 취합하여, 세그먼트간 패턴을 모델링하는 것도 또한 가능하 다. 그리고, 상기 학습단계에서는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 식별하고자 하는 단계 수만큼 정의된 공구 마모 단계 클래스별 데이터를 수집하여 레이블링하고, 공구 마모 단계 분류 딥러 닝 모델의 신경망을 더 학습시키고, 상기 설치단계에서는, 학습된 상기 공구 마모 단계 분류 딥러닝 모델 의 신경망을 상기 공구 상태 모니터링 시스템에 더 설치하며, 상기 비정상 판정단계(S24)에서 상기 비 정상 점수에 기반한 마모 단계 및 파손 상태의 판정 대신에, 상기 전류 데이터를 입력받은 상기 공구 마모 단계 분류 딥러닝 모델이 상기 공구 마모 단계 클래스(S31: Yes)에 따라 마모 단계를 추론(S32)하고, 상기 공구 마모 단계 클래스에 해당되지 않는 경우(S33: No)에는 '불특정 공구 파손 상태'로 판정(S34)하도록 이루어질 수있다. 공구 정상 상태 데이터셋과 공구 마모 단계 데이터셋을 이용하여 공구 마모 단계 분류 딥러닝 모델(4 2)을 학습시킬 수 있다. 이때, 식별하고자 하는 단계 수만큼 공구 마모 단계 클래스를 정의하고, 각 단계 클래 스별 데이터를 수집하여 레이블링(labeling)할 수 있다. 일반적으로 공구 마모 단계 데이터의 양이 정상 상 태 데이터의 양 대비 크지 않기 때문에, 불균형 데이터 학습이 가능한 방법을 사용할 수 있다. 실제 가공시 현재의 공구 가공 전류 데이터를 입력으로 받아서, 공구의 정상 여부 및 공구 마모 단계를 판정하 는데 이 모델을 사용할 수 있다. 이 모델은 전류 데이터를 입력으로 받아서 현재의 공구 상태가 정상인지, 마모 단계에 들어선 경우에는 몇 단계인지를 추론할 수 있다. 도 1의 사용 단계가 이 과정을 도시하고 있다. 여기서, 상기 학습단계에서는, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 파손 형태에 따라 정의된 공구 파손 상태 클래스별 데이터를 수집하여 레이블링하고, 공구 파손 상태 분류 딥러닝 모 델의 신경망을 더 학습시키고, 상기 설치단계에서는, 학습된 상기 공구 파손 상태 분류 딥러닝 모델의 신경망을 상기 공구 상태 모니터링 시스템에 더 설치하며, 상기 비정상 판정단계(S24)에서 상기 공구 마모 단계 클래스에 해당되지 않는 경우(S33: No)에 '불특정 공구 파손 상태'로 판정(S34)하는 대신에, 상기 전류 데 이터를 입력받은 상기 공구 파손 상태 분류 딥러닝 모델이 상기 공구 파손 상태 클래스(S41: Yes)에 따라 파손 형태를 추론(S42)하고, 상기 공구 파손 상태 분류 딥러닝 모델에 파손 상태 클래스가 분류되지 않은 경우 (S41: No)에는, 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정(S50)하도록 이루어질 수 있다. 공구 정상 상태 데이터셋과 공구 파손 상태 데이터셋을 이용하여 공구 파손 상태 분류 딥러닝 모델(4 3)을 학습시킬 수 있다. 여기서, 일반적으로 공구 파손 상태는 자주 발생하는 상황이 아니기 때문에 데이터의 양이 정상 상태 데이터 대비 특히 작아서, 공구 마모 단계 분류와 마찬가지로 불균형 데이터 학습이 가능한 방법을 사용할 수 있다. 공구 파손 형태에 따른 공구 파손 상태 클래스를 정의하고, 수집된 공구 파손 상태 데이터를 레이블링 (labeling)할 수 있다. 다만, 특별한 파손 형태인 경우는 데이터 수집이 안 될 가능성이 항상 존재한다. 실제 가공시 현재의 공구 가공 전류 데이터를 입력으로 받아서 공구의 정상 여부 및 공구 파손 상태를 판정, 분류하는데 이 모델을 사용할 수 있다. 이 모델은 전류 데이터를 입력으로 받아서 현재의 공구 상태가 정 상인지, 파손이 된 경우에는 어떤 파손 클래스인지를 추론할 수 있다. 상기 공구 파손 상태 분류 딥러닝 모델에 파손 상태 클래스가 분류되지 않은 경우에는, 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정하도록 이루 어질 수 있다. 도 1의 사용 단계가 이 과정을 도시하고 있다. 이 학습된 모델들을 선택적으로 이용하여, 머신 가공 시 공구의 전류 시계열 데이터를 수집하여, 그 공구의 마 모 여부, 마모 단계, 파손 여부 및 종류를 실시간으로 파악할 수 있다. 전체적인 공구 상태 판정 로직은 도 2의 플로차트를 따를 수 있다. 공작기계의 동작 특성에 따라 공구 마모 단계 데이터셋이나 공구 파손 상태 데이터셋 확보가 어려 운 경우에는, 공구 마모 단계 분류 딥러닝 모델이나 공구 파손 상태 분류 딥러닝 모델이 준비되지 않을 수도 있다. 도 2에서 공구 마모 단계 분류 딥러닝 모델이 포함되지 않은 경우에는 마모 단계 판정이 이루어 지지 않은 것으로 보고, 그 다음 모델의 존재 여부를 검사하는 스텝으로 넘어갈 수 있다. 데이터셋이 확보되어 각 분류 딥러닝 모델이 학습된 후에는, 도 2의 로직에 그 모델들을 추가로 포함시켜 수행하는 것이 가능하다. 한편, 2 이상의 공구를 사용하는 상기 공작기계에 대해서는, 각 공구별로 별도의 딥러닝 모델을 구축할 수 있다. CNC 공작기계 중에 머시닝 센터나 터닝(turning) 센터와 같이, 2 이상의 공구를 사용하는 공작기계에 대해 서는, 각 공구별로 별도의 딥러닝 모델을 구축할 수 있다. 이 경우에 수집되는 전류 데이터는, 공구 구분 없이 연속적으로 발생되고 기록되기 때문에, 공구별로 데이터를 분리하고 취합하는 과정이 필요할 수 있다. 현재 가공 중인 공구를 식별하기 위한 방법 중 하나는, CNC 콘트롤 러로부터 정보를 획득하는 것이다. 다른 하나의 방법은, 공구 교환이 이루어지는 동안에는 스핀들 모터에 부하 가 가해지지 않아서 전류값이 0이 되는 특성을 이용하는 것이다. 즉, 전류값이 0인 구간이 일정 시간 지속되면 공구 교환이 발생한 것으로 인지하고, CNC 프로그램에 의해 정해진 공구 가공 순서를 기반으로 현재의 공구를 식별할 수 있다. 도 3은 13개의 공구가 프로그램 순서에 따라 가공 작업을 수행하는 머시닝 센터로부터 하나의 가공 사이클 동안 1KHz 샘플링으로 수집된 데이터의 예시이다. 전류값이 0인 구간이 공구 교환 시점인 것을 잘 보여주고 있다. 그리고 동일 종류의 공구가 다른 공작기계에서 사용되거나, 다른 공작물에 대해 사용되거나, 다른 가공 조 건 하에서 사용되는 경우, 상기 공구에 대한 딥러닝 모델들은 전용시 추론 가능하도록 학습되어 일반화될 필요 가 있다. 여기서 일반화란, 각 공구별로 다른 여러 가공 상황에서 발생되는 데이터에 대해서도 잘 추론하도록 학습되는 것을 의미한다. 본 발명의 공구 상태 모니터링 시스템은, 가공 작업 동안 스핀들 모터에 의해 구동되고, 사용 횟수가 증가함에 따라 마모가 점진적으로 진행되는 모든 종류의 공구에 적용될 수 있다. <실시예> CNC 절삭 가공의 대표적인 경우인 드릴링(drilling) 가공의 드릴 공구에 대한 마모 및 파손 사례를 기반으로, 공구 상태 및 모터 전류와의 상관관계를 유추해 볼 수 있다. 도 4는 드릴의 정상 상태, 중간 마모 상태, 심한 마모 상태를 순서대로 보여준다. 도 4 (c)와 같이 마모가 심하게 진행된 경우에는, 드릴 날이 무디어져 있기 때문에 칩을 깨끗하게 파내지 못하 고 마찰이 심하게 발생하면서, 절삭 저항이 커지는 현상이 발생할 수 있다. 이 경우 스핀들 모터에는 큰 부하가 발생하게 되고, 인입 전류 값이 커지는 현상이 발생될 수 있다. 또한, 드릴의 진동 패턴이 변하면서 전류 값의 변화에 독특한 마모 패턴이 발생하게 될 수 있다. 딥러닝 모델은 이러한 특이한 시계열 데이터 변화 패턴을 학 습하고 탐지해 낼 수 있다. 도 5는, (a) 정상 드릴, (b) 심한 마모 드릴, (c) 부러진 드릴의 예를 보여준다. 도 5 (b)의 심한 마모 드릴은, 마모가 너무 심하게 진행돼서 더이상 드릴 성능을 내지 못하는 경우이고, 도 5 (c)의 부러진 드릴은 기본 기능이 망가진 경우이다. 두 가지 경우 모두 드릴 공구의 파손 상태로 볼 수 있으나, 속성 및 형태에 차이가 있다. 도 5 (b)의 경우는 절 삭면이 늘어나고 마찰이 심해지면서, 그에 따른 전류 변화 패턴이 발생할 수 있고, 도 5 (c)의 경우는 마찰이 심하지는 않을 수 있지만, 소음 및 진동이 심해지면서 다른 전류 변화 패턴이 발생할 수 있다. 이렇게 속성이 다른 변화 패턴은, 단순한 전류 값의 크기만으로는 판별이 불가능하고, 딥러닝 모델을 이용하는 것이 효율적인 방법이다. <데이터 수집> 상기 전류 데이터는, CNC 컨트롤러 내부에 저장된 전류값, 또는, 전류 센서로부터 획득된 전류값으로 이루어질 수 있다. CNC 공작기계 내에 존재하는 하나 이상의 모터로부터 데이터를 수집할 수 있다. 하나 이상의 스핀들 모터 인입 전류 신호를 주기적으로 샘플링한 시계열 데이터를 필수적으로 수집한다. 그리고 하나 이상의 서보 모터 인입 전류 신호를 주기적으로 샘플링한 시계열 데이터를 수집할 수 있다. 다만, 부하가 크게 걸리지 않는 서보 모터의 전류 데이터는 수집이 필요 없을 수도 있다. 그리고 부하의 크기에 상관 없이 서 보 모터 전류 데이터 수집을 생략하는 것이 가능하다. 모터의 회전수, 공구와 공작물의 접촉면 크기 등에 따라 샘플링율을 조절할 수 있다. 보통 500Hz에서 5KHz 정도 의 범위 내에서 샘플링율을 결정할 수 있다. 다만, 이 범위를 벗어나는 샘플링율도 가능하다. 가공 시점별로 공작기계 식별 정보, 작업 상태, 공구 정보, 가공 조건 등의 메타데이터를 같이 수집할 수 있다. 각 모터의 전류 데이터 수집은, 두 가지 방법 중 하나를 이용하여 가능하다. Fanuc, Misubishi, Siemens, Heidenhain 같은 유명 회사의 CNC 콘트롤러들은, 내부적으로 각 모터의 전류 값을 직접 측정하여 저장해 놓는다. 이 데이터를 각 회사가 제공하는 데이터 조회 라이브러리를 이용하여 전송 받는 것이 가능하다. 다른 한 가지 방법은, 별도의 전류 센서를 이용하여 모터로 인입되는 인버터 출력 전류 값을 직접 측정하는 것이다. 전류 센서는, 침투형과 자기장을 이용하는 비침투형 모두 가능하다. 실제 값을 수치화하기 위한 ADC(analog-to-digital converter) 장치가 필요하다.도 6에 보인 바와 같이, 데이터 수집 장치는 이렇게 수집한 데이터를 데이터셋 구축을 위한 데이터베이스 (dB)에 저장하거나 실시간 추론을 위하여 딥러닝 모델들이 구동되는 GPU 서버로 전송할 수 있다. 데이터 수집 장치는, 수집된 데이터에 대한 무결성을 검사하고, 결손 데이터가 있거나 샘플링율이 다른 데 이터가 있는 경우, 보간법 등을 이용하여 동일한 샘플링율을 가진 무결성 데이터로 변환 작업을 수행할 수 있다. <딥러닝 모델의 구현> 시계열 데이터의 특징(feature)을 추출하기 위하여, 세그먼트 단위로 데이터를 분할할 수 있다. 한 세그먼트의 크기는 공구 전류 신호의 특성에 따라 예컨대 0.1초에서 2초 정도의 구간 데이터로 정해질 수 있다. 다만, 결과 성능 개선을 위하여 이 범위를 벗어나는 크기에 대해서도 테스트를 수행해 볼 수 있다. 한 단위 가공 작업 전체의 데이터를 하나의 세그먼트로 구성하는 것도 가능하다. 또한, 부정확한 데이터가 포함 되는 것을 막기 위하여, 단위 가공 작업의 초기 및 말기 데이터 부분을 학습이나 추론용 데이터에서 제외할 수 있다. 세그먼트의 특징을 추출하기 위해서, 다양한 구조의 신경망이 사용될 수 있다. 시간에 따른 변화 특성을 학습하 기 위한 LSTM(long short term memory)이나 GRU(gated recurrent unit) 같은 RNN(recurrent neural network) 계열 신경망이 사용될 수 있다. 또한, 근접 변화 특성 및 전체 변화 특성을 모두 잘 학습할 수 있는 TCN (temporal convolutional network) 같은 단방향 CNN(convolutional neural network) 계열 신경망이 사용될 수 도 있다. 이외에도 데이터의 변화 특성을 추출할 수 있는 어떤 신경망이든 사용이 가능하다. <단일 클래스 비정상 탐지> 공구 비정상 상태 예측 딥러닝 모델을 구축하기 위하여, 다양한 단일 클래스 비정상 탐지 방식을 사용할 수 있다. 단일 클래스 비정상 탐지 방식은, 정상 데이터만을 이용하여 모델을 학습시키고, 그 정상 데이터가 내포하고 있는 특성을 갖지 않는 모든 데이터를 비정상으로 추론하도록 학습하는 방식이다. 이 방식은, 비정상 상태 공구의 전류 데이터가 전혀 없이도 학습이 가능하다. 그리고 이 모델의 추론 결과는, 입력 데이터에 대한 비정상 점수 (anomaly score)일 수 있다. 이 점수가 높을수록 비정상일 확률이 높아지며, 특정 임계치(threshold) 이상인 경우 공구 마모 단계에 진입했거나 공구 파손이 발생했음을 의미할 수 있다. 공 구의 마모 특성에 따라 비정상 점수를 기반으로 마모 단계를 구분하는 것도 가능하다. 입력 데이터의 특성을 잠재(latent) 특징 공간으로 매핑시키는 AE (autoencoder) 같은 모델을 사용하고, 재구성 에러 (reconstruction error) 값을 비정상 점수로 사용할 수도 있다. 또한, 이 AE의 확장 모델인 VAE(variational autoencoder)를 이용하여 추출된 특징이 잠재 공간 내에서 확률 분포를 갖도록 모델링함으로써, 그 분포와의 차이도를 비정상 점수로 사용할 수도 있다. 유사하게, GAN(generative adversarial network)을 이용하여 확률 분포에 기반한 잠재 벡터가 생성되도록 모델링하고, 그 분포와의 차이도 를 비정상 점수로 사용하는 것도 가능하다. 데이터의 기본 특성 및 추출하고자 하는 특징에 따라 이상의 여러 모델을 조합하여 사용하는 것 또한 가능하다. 이외에도 다양한 지도 학습, 비지도 학습, 준지도 학습 등의 방법이 가능하다. 도 7은, 약 280번째 세그먼트 위치에서 공구 교환이 이루어진 시점 전후에 공구 비정상 상태 예측 딥러닝 모델 이 추론한 비정상 점수의 값 분포가 차이가 큰 것을 잘 보여주고 있다. <데이터 불균형 해소> 공구 마모 단계 분류 딥러닝 모델을 구축하는 경우의 데이터셋의 불균형 문제를 해결하기 위해 여러 방법을 사용할 수 있다. 우선 정상 데이터가 공구 마모 데이터 대비 많기 때문에, 정상 데이터의 언더 샘플링 (under sampling)을 통해 서 둘 사이의 균형을 맞출 수 있다. 또는, 공구 마모 데이터의 오버 샘플링 (over sampling)을 이용하여 학습 데이터셋의 불균형 문제를 해결할 수 있다. 데이터셋의 구성을 조정하는 대신, 비용 의존 학습 (cost-sensitive learning)을 이용하여, 소수 클래스에 대한 비용 함수 값에 가중치를 더 많이 주는 방식으로 균형 잡힌 학습을 수행할 수도 있다. 유사하게, 입력 데이터 사이의 거리 척도를 기반으로 하는 심층 메트릭 학습 (deep metric learning)을 위한 샴 신경망 (siamesenetwork)이나 트리플릿 신경망 (triplet network) 등을 이용하는 방식으로 불균형 문제를 해결할 수도 있다. 공구 마모 단계의 클래스 수는, 공구의 특성에 따라 결정된다. 기본적인 마모 상태 파악만 필요한 경우는 2개 정도가 적당하고, 상세한 진행 단계를 파악하기 위해서는 5 이상 정도의 클래스가 필요할 수 있다. 공구 파손 상태 분류 딥러닝 모델도 데이터셋 불균형 문제 해결이 필요하다. 공구 마모 단계 분류 딥러닝 모델과 동일한 방식의 접근을 사용할 수 있다. 다만, 공구 파손 상태는 공구 마모보다도 더 발생 빈도가 낮은 사건이고, 그 형상이 공구 마모처럼 일정한 패턴을 갖는 것이 아니다. 따라서, 학습 단계에서 전혀 보지 못했던 파손 종류가 나중에 발생할 가능성이 있다. 이런 특이한 상황에 대해서는, 공구 비정상 상태 예측 딥러닝 모델이 비정상 상태로 판정을 하더라도, 다른 분류 모델(42, 43)로는 클래스 판정이 되지 않을 수 있다. 이런 경우를 불특정 공구 파손 상태로 식별하는 것이 가능하다. <도 2의 판정 로직> 현재 가공 중인 공구 종류를 식별하고, 그에 대한 추론에 필요한 딥러닝 모델들을 준비한다. 현재 실시간으로 수집되는 전류 데이터(S10)를 미리 정해진 세그먼트 단위로 분할한다. 공구 비정상 상태 예측 딥러닝 모델은 세그먼트의 특징을 기반으로 비정상 점수를 추론(S20)한다. 현재 세그먼트의 비정상 점수가 미리 정의된 임계치보다 낮은 경우(S21: No)에는, 공구가 정상 상태에 있는 것으로 판정(S22)하고 종료된다. 높은 경우(S21: Yes)에는, 비정상 가능성이 있는 것으로 보고, 다음 단계의 딥러 닝 모델이 존재하는지를 검사(S23)한다. 더 이상의 모델이 없는 경우(S23: No)에는, 비정상 점수를 이용하여 공 구 마모 단계와 파손 가능성을 판정하고 종료(S24)된다. 공구 마모 단계 분류 딥러닝 모델이 있는 경우(S23: Yes), 마모 단계를 추론(S31: Yes)하고 그 결과 클래스 에 따라 공구 마모 단계를 판정(S32)하고 종료된다. 공구 마모 단계 분류 딥러닝 모델에 마모 단계 클래스가 분류되지 않은 경우(S31: No)에는, 다음 단계의 딥 러닝 모델이 존재하는지를 검사(S33)한다. 더이상의 모델이 없는 경우(S33: No)에는, 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정(S34)하고 종료된다. 공구 파손 상태 분류 딥러닝 모델이 있는 경우(S33: Yes), 파손 상태를 추론(S41: Yes)하고 분류 결과에 따 라 클래스를 판정(S42)하고 종료된다. 파손 클래스에 해당되지 않으면(S41: No), 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정(S42)하고 종료 된다. 공구 파손 상태 분류 딥러닝 모델에 파손 상태 클래스가 분류되지 않은 경우(S41: No)에는, 특정할 수 없는 공구 파손 상태가 발생한 것으로 판정(S50)하고 종료된다. 이러한 방식을 사용하면, 학습 되지 않은 공구 파손 상태 종류에 대한 탐지가 가능해진다. <일반화 방법론> 각 공구에 대해 각 가공 상황별로 별도의 데이터셋을 구축하여, 각 공구와 가공 조건에 특화된 별도의 모델을 학습하는 방법이 가능하다. 이 경우에는 공구 개수 곱하기 가공 조건 개수만큼의 모델 수가 필요하기 때문에, 모델 생성 및 저장을 위한 자원 소모가 큰 단점이 있다. 또는, 모든 공구 및 가공 조건 조합별 데이터셋을 구축하고, 하나의 큰 단일 모델을 학습시키는 방법이 가능하 다. 이 학습을 위해서는 특히 많은 양의 데이터를 수집해야 하고, 딥러닝 모델의 크기가 커져야 하며, 이러한 조건 하에서도 학습이 잘 안될 가능성이 항상 존재한다. 또는, 처음 학습된 하나의 딥러닝 모델을 각 공구 및 가공 조건 조합별 데이터셋으로 전이 학습(transfer learning)을 수행하고, 모델을 도메인 적응(domain adaptation)시키는 것이 가능하다. 또는, 모든 공구 및 가공 조건 조합별 데이터를 수집하지 않고, 여러 가지 정규화(normalization) 방법을 사용 하여, 도메인 일반화(domain generalization)를 시키는 것도 가능하다. 배치(batch) 정규화, 인스턴스 (instance) 정규화와 이를 결합한 정규화 방식 등을 이용하여, 학습하지 않은 데이터에 대해서도 일반화된 추론이 가능하도록 할 수 있다. <대상 공구> 절삭 가공 중에 공작물이 회전하는 방식의 선삭 가공에 대표적으로 사용되는 바이트(bit tool)에 적용 가능하다. 절삭 가공에 사용되는 드릴(drill), 리머(reamer), 탭(tap), 밀링 커터(milling cutter), 호브 (hob), 브로치(broach) 등의 공구에 적용 가능하다. 연삭 가공에 사용되는 숫돌 바퀴(grinding wheel) 공구에 적용 가능하다. 이외에도 스핀들 모터에 의해 동력이 전달되는 모든 종류의 공구에 본 발명의 방식을 적용할 수 있다. <장치> 본 발명의 장치는, 인공지능을 이용한 공구 상태 모니터링 장치이다. 상기 장치는, 학습용 전류 데이터 수집모 듈과; 공구 가공 전류 데이터셋 구축모듈과; 학습모듈과; 설치모듈과; 모니터링용 전류 데이터 수집모듈과; 비정상 점수 추론모듈(S20)과; 정상 판정모듈(S22)과; 비정상 판정모듈(S24);이 포함되어 이루어짐을 특징으로 한다. 상기 학습용 전류 데이터 수집모듈은, 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 모듈이다. 상기 공구 가공 전류 데이터셋 구축모듈은, 상기 전류 데이터의 특징에 따라 공구 가공 전류 데이터셋을 구 축하는 모듈이다. 상기 학습모듈은, 상기 공구 가공 전류 데이터셋의 각 부분 데이터셋을 조합하여, 공구 비정상 상태 예측 딥러닝 모델의 신경망을 학습시키는 모듈이다. 상기 설치모듈은, 학습된 상기 공구 비정상 상태 예측 딥러닝 모델의 신경망을 공구 상태 모니터링 시스템 에 설치하는 모듈이다. 상기 모니터링용 전류 데이터 수집모듈은, 상기 공작기계에서 공구를 이용한 공작물의 가공이 이루어지는 동안, 공구와 공작물을 상대운동시키는 모터에 공급되는 시계열의 전류 데이터를 수집하는 모듈이다. 상기 비정상 점수 추론모듈(S20)은, 상기 전류 데이터를 입력받은 상기 공구 비정상 상태 예측 딥러닝 모델(5 1)이 상기 전류 데이터의 특징에 따라 비정상 점수를 추론하는 모듈이다. 상기 정상 판정모듈(S22)은, 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이 아니면 '공구 정상 상태'로 판정하는 모듈이다. 상기 비정상 판정모듈(S24)은, 상기 공구 비정상 상태 예측 딥러닝 모델이 상기 비정상 점수를 미리 정해진 임계치와 비교하여, 비정상이면 상기 비정상 점수에 기반한 마모 단계 및 파손 상태를 판정하는 모듈이다. <프로그램> 한편, 본 발명의 프로그램은, 정보기기에 상기에 기재된 방법의 각 단계를 실행시키기 위한 정보기기용 프로그 램이다. 상기 프로그램은, 정보기기로 읽을 수 있는 저장매체에 기록되어 있을 수 있다. 여기서, 상기 정보기기는, 컴퓨터, 스마트폰, 태블릿 컴퓨터 등 휴대용 정보처리기기를 통칭한다. 이상 본 발명의 바람직한 실시예에 대해 설명했지만, 본 발명은, 상기 개시되는 실시예들에 한정되는 것이 아니 라, 특허청구범위와 발명의 상세한 설명 및 첨부 도면의 범위 안에서 서로 다른 다양한 형태로 변형하여 구현 실시될 수 있고, 균등한 타 실시예가 가능하며, 이 또한 본 발명의 범위에 속하는 것은 당해 분야에서 통상적 지식을 가진 자에게 당연하며, 단지 실시예들은, 본 발명의 개시가 완전하도록 하고, 본 발명이 속하는 기술분 야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이며, 본 발명은, 청구항 의 범주에 의해 정의될 뿐이다. 산업상 이용가능성 본 발명은, 인공지능을 이용한 공구 상태 모니터링 방법, 장치 및 프로그램의 산업에 이용될 수 있다. 부호의 설명10: 공작기계 11: CNC 컨트롤러 12: 전류센서 13: ADC 20: 데이터 수집장치 30: 공구 가공 전류 데이터셋 31: 공구 정상 상태 데이터셋 32: 공구 마모 단계 데이터셋 33: 공구 파손 상태 데이터셋 40: GPU 서버 41: 공구 비정상 상태 예측 딥러닝 모델 신경망 42: 공구 마모 단계 분류 딥러닝 모델 신경망 43: 공구 파손 상태 분류 딥러닝 모델 신경망 50: 공구 상태 모니터링 시스템 51: 공구 비정상 상태 예측 딥러닝 모델 52: 공구 마모 단계 부뉴 딥러닝 모델 53: 공구 파손 상태 분류 딥러닝 모델"}
{"patent_id": "10-2023-0009772", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은, 본 발명의 방법이 적용되는 장치의 인공지능 학습계통과 사용계통을 개략 나타낸 블럭도이다. 도 2는, 동 방법의 플로차트이다. 도 3은, 머시닝 센터에서 공구의 교체 및 가공상태와 전류의 변화의 관계를 나타내는 예시 시계열 데이터이다. 도 4는, 공구의 일례로서 드릴 선단의 (a) 정상 상태, (b) 중간 마모 상태, 및 (c) 심한 마모 상태의 실물 예시 사진이다. 도 5는, 공구의 일례로서 드릴의 측방에서 본 상태별 예시 사진으로서, (a) 정상 드릴, (b) 심한 마모 드릴, 및 (c) 부러진 드릴을 나타낸다. 도 6은, 데이터 수집장치의 전후 연결관계를 나타내는 개략 블럭도이다. 도 7은, 공구 교환 전후에 있어서의 비정상 점수의 값 분포 차를 나타내는 예시 그래프이다."}
