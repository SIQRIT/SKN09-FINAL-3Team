{"patent_id": "10-2024-0065855", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0027204", "출원번호": "10-2024-0065855", "발명의 명칭": "양자화 시프트를 위한 영상 복호화 방법, 영상 복호화 장치, 영상 부호화 방법, 및 영상 부호", "출원인": "삼성전자주식회사", "발명자": "딘쿠오칸"}}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "영상 복호화 방법에 있어서, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득하는 단계(S2410); 상기 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 상기 현재 블록의 변환 계수를 획득하는단계(S2420);상기 현재 블록의 예측 모드 또는 상기 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 상기 현재 블록에 포함된 상기 변환 계수의 주파수 대역, 상기 현재 블록의 상기 양자화 파라미터 중 적어도 하나에 기초하여,복수의 양자화 오프셋 (Quantization Offset) 중에 하나의 양자화 오프셋을 결정하는 단계(S2430); 및 상기 결정된 양자화 오프셋를 이용하여 상기 변환 계수를 변경하는 단계(S2440);를 포함하는, 영상 복호화방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 복수의 양자화 오프셋은, 상기 현재 블록의 상기 예측 모드 또는 상기 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 상기 현재블록에 포함된 상기 변환 계수의 상기 주파수 대역, 상기 현재 블록의 상기 양자화 파라미터 중 적어도 하나를이용하여 미리 결정된 오프셋 테이블 또는 오프셋 파라미터 테이블에 따라 결정되는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항 내지 제2항 중 어느 한 항에 있어서,상기 변환 계수를 변경하는 단계는, 상기 양자화 오프셋을 이용하여 상기 변환 계수의 값 및 상기 변환 계수와 연속된 값에 대한 보간을 수행함으로써, 상기 양자화 시프트(Quantization Shift)를 수행하는 단계;를 포함하는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항 내지 제3항 중 어느 한 항에 있어서,상기 하나의 양자화 오프셋을 결정하는 단계는,상기 현재 블록의 상기 예측 모드가 인터 모드인 경우에 따른 양자화 오프셋보다 작은 값을 갖는 상기 현재 블록의 상기 예측 모드가 인트라 모드인 경우에 따른 양자화 오프셋의 값을, 현재 블록에 대한 양자화 오프셋으로결정하는 단계를 포함하는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항 내지 제4항 중 어느 한 항에 있어서,상기 하나의 양자화 오프셋을 결정하는 단계는,상기 현재 블록에 대해 단방향 예측이 수행되는 경우에 따른 양자화 오프셋보다 큰 값을 갖는, 현재 블록에 대해 양방향 예측이 수행되는 경우에 따른 양자화 오프셋을 현재 블록에 대한 양자화 오프셋으로 결정하는 단계;를 포함하는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "공개특허 10-2025-0027204-3-제1항 내지 제5항 중 어느 한 항에 있어서,상기 결정된 하나의 양자화 오프셋은, 상기 현재 블록의 주파수 대역이 저주파 대역인 경우보다, 상기 주파수 대역이 고주파 대역인 경우에 더 큰 값을 갖는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제3항 내지 제6항 중 어느 한 항에 있어서,상기 하나의 양자화 오프셋을 결정하는 단계는, 상기 양자화 파라미터 값이 제1 양자화 파라미터보다 큰 제2 양자화 파라미터인 경우, 제1 양자화 파라미터에기초하여 결정된 제1 양자화 오프셋보다 큰 제2 양자화 오프셋을 상기 현재 블록을 위한 상기 양자화 오프셋으로 결정하는 단계;를 포함하는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항 내지 제7항 중 어느 한 항에 있어서,상기 하나의 양자화 오프셋을 결정하는 단계는,상기 현재 블록에 대한 양자화된 변환 계수의 값이 제1 양자화된 변환 계수보다 작은 제2 양자화된 변환 계수인경우, 상기 제1 양자화된 변환 계수에 기초하여 결정된 제1 양자화 오프셋보다 큰 제2 양자화 오프셋을 상기 현재 블록을 위한 상기 양자화 오프셋으로 결정하는 단계;를 포함하는 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항 내지 제8항 중 어느 한 항에 있어서,상기 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 단계는, 상기 현재 블록에 포함된 복수의 샘플들의 위치에 기초하여, 상기 현재 블록에 포함된 상기 복수의 샘플들을 복수의 주파수 대역들로 분류하는 단계; 상기 복수의 주파수 대역들 중에서 현재 블록을 위한 주파수 대역을 결정하는 단계; 및 상기 결정된 주파수 대역에 따라 양자화 오프셋을 결정하는 단계;를 포함하는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항 내지 제8항 중 어느 한 항에 있어서,상기 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 단계는, 상기 현재 블록에 포함된 복수의 샘플들의 스캔 오더(Scan Order)에 기초하여, 상기 현재 블록에 포함된 상기복수의 샘플들을 복수의 주파수 대역들로 분류하는 단계; 및상기 복수의 주파수 대역들 중에서 현재 블록을 위한 주파수 대역을 결정하는 단계; 및상기 결정된 주파수 대역에 따라 양자화 오프셋을 결정하는 단계;를 포함하는, 영상 복호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "영상 복호화 장치(2300)에 있어서,적어도 하나의 인스트럭션을 저장하는 적어도 하나의 메모리; 및상기 적어도 하나의 인스트럭션에 따라 동작하는 적어도 하나의 프로세서를 포함하고,상기 적어도 하나의 프로세서는,현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득하고,상기 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 상기 현재 블록의 변환 계수를공개특허 10-2025-0027204-4-획득하고,상기 현재 블록의 예측 모드 또는 상기 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 상기 현재 블록에 포함된 상기 변환 계수의 주파수 대역, 상기 현재 블록의 상기 양자화 파라미터 중 적어도 하나에 기초하여,복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고,상기 결정된 양자화 오프셋을 이용하여 상기 변환 계수를 변경하는, 영상 복호화 장치(2300)."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "영상 부호화 방법에 있어서, 상기 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 파라미터를 결정하는 단계(S3110); 상기 양자화 파라미터에 기초한 역 양자화를 수행하여 상기 현재 블록의 변환 계수를 획득하는 단계(S3120);상기 현재 블록의 예측 모드 또는 상기 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 상기 현재 블록에 포함된 변환 계수의 주파수 대역, 및 상기 현재 블록의 상기 양자화 파라미터 중 적어도 하나에 기초하여,복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 상기 양자화 오프셋은 역 양자화를 수행하여 획득된 변환 계수를 변경하기 위해 이용되는 단계 (S3130); 및 상기 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함하는 비트스트림을 생성하는 단계(S3140)를 포함하는, 영상 부호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "영상 부호화 장치(3000)에 있어서,적어도 하나의 인스트럭션을 저장하는 적어도 하나의 메모리; 및상기 적어도 하나의 인스트럭션에 따라 동작하는 적어도 하나의 프로세서를 포함하고,상기 적어도 하나의 프로세서는,상기 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 파라미터를 결정하고,상기 양자화 파라미터에 기초한 역 양자화를 수행하여 상기 현재 블록의 변환 계수를 획득하고,상기 현재 블록의 예측 모드 또는 상기 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 상기 현재 블록에 포함된 변환 계수의 주파수 대역, 및 상기 현재 블록의 상기 양자화 파라미터 중 적어도 하나에 기초하여,복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 상기 양자화 오프셋은 역 양자화를 수행하여 획득된 변환 계수를 변경하기 위해 이용되며, 상기 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함하는 비트스트림을 생성하는, 영상 부호화 장치(3000)."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "영상의 부호화 방법에 의해 생성된 비트스트림을 저장하는 컴퓨터로 판독 가능한 기록 매체에 있어서,상기 비트스트림은, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함하고, 상기 현재 블록에 대한 양자화 파라미터는, 상기 현재 블록에 대한 양자화를 수행하기 위해 이용되거나, 역 양자화를 수행하여 상기 현재 블록의 변환 계수를 획득하기 위해 이용되고, 상기 현재 블록의 변환 계수는, 상기 현재 블록의 예측 모드 또는 상기 현재 블록을 포함하는 현재 슬라이스의슬라이스 타입, 상기 현재 블록에 포함된 상기 변환 계수의 주파수 대역, 및 상기 현재 블록의 상기 양자화 파라미터 중 적어도 하나에 기초하여 결정된 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 이용하여 변경되는, 기록 매체."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "공개특허 10-2025-0027204-5-영상 복호화 방법에 있어서, 현재 블록에 대한 양자화 스텝을 나타내는 정보를 비트스트림으로부터 획득하는 단계(S2510); 상기 양자화 스텝을 나타내는 정보에 기초한 역 양자화를 수행하여 상기 현재 블록의 잠재 텐서(Latent Tensor)를 획득하는 단계(S2520);상기 현재 블록의 타입, 상기 현재 블록의 채널 인덱스, 상기 현재 블록의 상기 양자화 스텝 중 적어도 하나에기초하여, 복수의 양자화 오프셋 (Quantization Shift) 중에 하나의 양자화 오프셋을 결정하는 단계(S2530); 및 상기 결정된 양자화 오프셋을 이용하여 상기 잠재 텐서를 변경하는 단계(S2540);를 포함하는, 영상 복호화방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "영상 부호화 방법에 있어서, 상기 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 스텝을 결정하는 단계(S3210); 상기 양자화 스텝에 기초한 역 양자화를 수행하여 상기 현재 블록의 잠재 텐서를 획득하는 단계(S3220);상기 현재 블록의 타입, 상기 현재 블록의 채널 인덱스, 및 상기 현재 블록의 상기 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 상기 양자화 오프셋은 역 양자화를수행하여 획득된 잠재 텐서를 변경하기 위해 이용되는 단계(S3230); 및 상기 현재 블록에 대한 양자화 스텝을 나타내는 정보를 포함하는 비트스트림을 생성하는 단계(S3230)를 포함하는, 영상 부호화 방법."}
{"patent_id": "10-2024-0065855", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "영상의 부호화 방법에 의해 생성된 비트스트림을 저장하는 컴퓨터로 판독 가능한 기록 매체에 있어서,상기 비트스트림은, 현재 블록에 대한 양자화 스텝을 나타내는 정보를 포함하고, 상기 현재 블록에 대한 양자화 스텝은, 상기 현재 블록에 대한 양자화를 수행하기 위해 이용되거나, 역 양자화를 수행하여 상기 현재 블록의 잠재 텐서를 획득하기 위해 이용되고, 상기 현재 블록의 잠재 텐서는, 상기 현재 블록의 타입, 상기 현재 블록의 채널 인덱스, 및 상기 현재 블록의상기 양자화 스텝 중 적어도 하나에 기초하여 결정된 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 이용하여 변경되는, 기록 매체."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "일 실시예에서, 양자화 시프트를 위한 영상 복호화 방법이 제공된다. 영상 복호화 방법은, 현재 블록에 대한 양 자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득하는 단계를 포함할 수 있다. 영상 복호화 방법은, 양 자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득하는 단계를 포함 할 수 있다. 영상 복호화 방법은, 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 현재 블록의 양자화 파라미 터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 단계를 포함할 수 있다. 영상 복호화 방법은, 결정된 양자화 오프셋를 이용하여 변환 계수를 변경하는 단계를 포함할 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 영상의 부호화 및 복호화 분야에 관한 것으로서, 역 양자화를 통해 발생하는 오차를 줄이기 위해 양 자화 시프트를 수행함으로써, 영상을 부호화 및 복호화하는 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "H.264 AVC(Advanced Video Coding) 및 HEVC(High Efficiency Video Coding)와 같은 코덱에서는, 영상을 블록으 로 분할하고, 인터 예측(inter prediction) 또는 인트라 예측(intraprediction)을 통해 각각의 블록을 예측 부 호화 및 예측 복호화할 수 있다. 또한, 변환 및 양자화를 통해 잔차에 대한 부호화를 수행할 수 있다. 양자화는 변환 계수에 대해 양자화 파라미터를 이용하여 스케일링을 수행하는 동작일 수 있다. 중요한 정보일수 록 더욱 세밀하게 양자화되고, 비교적 덜 중요한 정보는 비교적 큰 양자화 파라미터를 사용하여 양자화될 수 있 다. 양자화를 통해 데이터의 크기를 줄일 수 있으나, 동시에 정보의 손실이 발생할 수 있으며, 양자화에 따른 손실은 영상 내에서 아티팩트로서 나타날 수 있다. 역 양자화는 양자화된 변환 계수에 대해 양자화 파라미터를 이용하여 스케일링을 수행하는 동작일 수 있다. 양 자화된 변환 계수에 대해 역 양자화를 수행하여 획득한 변환 계수는 양자화를 수행하기 이전의 변환 계수와는 상이할 수 있다. 이에 따라, 역 양자화를 수행하여 획득한 변환 계수와 양자화를 수행하기 이전의 변환 계수의 오차를 줄이기 위한 방안이 요구된다. 역 양자화를 수행하여 획득한 변환 계수와 양자화를 수행하기 이전의 변 환 계수의 오차를 줄임으로써, 복원 영상 내 아티팩트를 감소시킬 수 있다. 최근, AI(Artificial Intelligent)를 이용하여 영상을 부호화/복호화하는 기술들이 제안되고 있는데, AI, 예를 들어, 신경망을 이용하여 영상을 효과적으로 부호화/복호화할 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "일 실시예에서, 양자화 시프트를 위한 영상 복호화 방법이 제공된다. 영상 복호화 방법은, 현재 블록에 대한 양 자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득하는 단계를 포함할 수 있다. 영상 복호화 방법은, 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득하는 단계를 포 함할 수 있다. 영상 복호화 방법은, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이 스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하 여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 단계를 포함할 수 있다. 영상 복호화 방법은, 결정된 양자화 오프셋를 이용하여 변환 계수를 변경하는 단계를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 복호화 장치가 제공된다. 영상 복호화 장치는 적어도 하나의 인스트 럭션을 저장하는 적어도 하나의 메모리 및 적어도 하나의 인스트럭션에 따라 동작하는 적어도 하나의 프로세서 를 포함할 수 있다. 적어도 하나의 프로세서는, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트 림으로부터 획득할 수 있다. 적어도 하나의 프로세서는, 양자화 파라미터를 나타내는 정보에 기초한 역 양자화 를 수행하여 현재 블록의 변환 계수를 획득할 수 있다. 적어도 하나의 프로세서는, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 현재 블 록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 적어도 하나의 프로세서는, 결정된 양자화 오프셋을 이용하여 변환 계수를 변경할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 부호화 방법이 제공된다. 영상 부호화 방법은, 현재 블록에 대한 양 자화를 수행하기 위해 이용하는 양자화 파라미터를 결정하는 단계를 포함할 수 있다. 영상 부호화 방법은, 양자 화 파라미터에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득하는 단계를 포함할 수 있다. 영상 부호화 방법은, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록 에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자 화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 양자화 오프셋은 역 양자화를 수행하여 획득된 변환 계수를 변경하기 위해 이용되는 단계를 포함할 수 있다. 영상 부호화 방법은, 현재 블록에 대한 양자화 파라미터를 나 타내는 정보를 포함하는 비트스트림을 생성하는 단계를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 부호화 장치가 제공된다. 영상 부호화 장치는 적어도 하나의 인스트 럭션을 저장하는 적어도 하나의 메모리 및 적어도 하나의 인스트럭션에 따라 동작하는 적어도 하나의 프로세서 를 포함할 수 있다. 적어도 하나의 프로세서는, 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 파 라미터를 결정할 수 있다. 적어도 하나의 프로세서는, 양자화 파라미터에 기초한 역 양자화를 수행하여 현재 블 록의 변환 계수를 획득할 수 있다. 적어도 하나의 프로세서는 현재 블록의 예측 모드 또는 현재 블록을 포함하 는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라 미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 양자화 오프셋 은 역 양자화를 수행하여 획득된 변환 계수를 변경하기 위해 이용될 수 있다. 적어도 하나의 프로세서는, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상의 부호화 방법에 의해 생성된 비트스트림을 저장하는 컴퓨터로 판독 가능한 기록 매체가 제공된다 비트스트림은, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함할 수 있다. 현재 블록에 대한 양자화 파라미터는, 현재 블록에 대한 양자화를 수행하기 위해 이용되거나, 역 양자화 를 수행하여 현재 블록의 변환 계수를 획득하기 위해 이용될 수 있다. 현재 블록의 변환 계수는, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여 결정된 복수의 양자화 오프셋 중에 하나의양자화 오프셋을 이용하여 변경될 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 복호화 방법이 제공된다. 영상 복호화 방법은, 현재 블록에 대한 양 자화 스텝을 나타내는 정보를 비트스트림으로부터 획득하는 단계를 포함할 수 있다. 영상 복호화 방법은, 양자 화 스텝을 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서를 획득하는 단계를 포함할 수 있다. 영상 복호화 방법은, 현재 블록의 타입, 현재 블록의 채널 인덱스, 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 단계를 포함할 수 있다. 영상 복호화 방법은, 결정된 양자화 오프셋을 이용하여 잠재 텐서를 변경하는 단계를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 부호화 방법이 제공된다. 영상 부호화 방법은, 현재 블록에 대한 양 자화를 수행하기 위해 이용하는 양자화 스텝을 결정하는 단계를 포함할 수 있다. 영상 부호화 방법은, 양자화 스텝에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서를 획득하는 단계를 포함할 수 있다. 영상 부호화 방법은, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 양자화 오프셋은 역 양자화를 수행하여 획득된 잠재 텐서를 변경하기 위해 이용되는 단계를 포함할 수 있다. 영상 부호화 방법은, 현재 블록에 대한 양자화 스 텝을 나타내는 정보를 포함하는 비트스트림을 생성하는 단계를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상의 부호화 방법에 의해 생성된 비트스트림을 저장하는 컴퓨터로 판독 가능한 기록 매체가 제공된다. 비트스트림은, 현재 블록에 대한 양자화 스텝을 나타내는 정보를 포함할 수 있다. 현재 블록에 대한 양자화 스텝은, 현재 블록에 대한 양자화를 수행하기 위해 이용되거나, 역 양자화를 수 행하여 현재 블록의 잠재 텐서를 획득하기 위해 이용될 수 있다. 현재 블록의 잠재 텐서는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여 결정된 복수의 양자화 오프 셋 중에 하나의 양자화 오프셋을 이용하여 변경될 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시의 일 실시예에 따라, 원본 영상과 복원 영상의 오차를 감소시킬 수 있다. 양자화 또는 역 양자화를 수 행하는 과정에서 발생하는 오차를 감소시킬 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 개시에서, \"a, b 또는 c 중 적어도 하나\" 표현은 \" a\", \" b\", \" c\", \"a 및 b\", \"a 및 c\", \"b 및 c\", \"a, b 및 c 모두\", 혹은 그 변형들을 지칭할 수 있다. 본 개시에서 문맥상 명백하게 다르게 지시하지 않는 한, 단수의 형태 \"a,\" \"an,\" 및 \"the\"는 복수의 대상을 포 함한다고 이해될 수 있다. 따라서, 예를 들어, \"구성 표면\"이라는 기재는 그러한 표면들 중 하나 이상을 가리키 는 경우도 포함할 수 있다. 본 개시를 설명함에 있어서 본 개시가 속하는 기술 분야에 익히 알려져 있고 본 개시와 직접적으로 관련이 없는 기술 내용에 대해서는 설명을 생략한다. 이는 불필요한 설명을 생략함으로써 본 개시의 요지를 흐리지 않고 더욱 명확히 전달하기 위함이다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이 는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있다. 그러므로 그 정의는 본 명세서 전반에 걸친 내 용을 토대로 내려져야 할 것이다. 마찬가지 이유로 첨부된 도면에 있어서 일부 구성요소는 과장되거나 생략되거나 개략적으로 도시 되었다. 또한, 각 구성요소의 크기는 실제 크기를 전적으로 반영하는 것이 아니다. 각 도면에서 동일한 또는 대응하는 구성 요 소에는 동일한 참조 번호를 부여하였다. 본 개시의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 후술 되어 있는 실 시예들을 참조하면 명확해질 것이다. 그러나 본 개시는 이하에서 개시되는 실시예들에 한정되는 것이 아니라 서 로 다른 다양한 형태로 구현될 수 있다. 개시된 실시예들은 본 개시의 개시가 완전하도록 하고, 본 개시가 속하"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "는 기술분야에서 통상의 지식을 가진 자에게 개시의 범주를 완전하게 알려주기 위해 제공되는 것이다. 본 개시 의 일 실시예는 청구범위에 따라 정의될 수 있다. 명세서 전체에 걸쳐 동일한 참조 부호는 동일한 구성 요소를 나타낸다. 또한, 본 개시의 일 실시예를 설명함에 있어서 관련된 기능 또는 구성에 대한 구체적인 설명이 본 개 시의 요지를 불필요하게 흐릴 수 있다고 판단된 경우 그 상세한 설명은 생략한다. 그리고 후술되는 용어들은 본 개시에서의 기능을 고려하여 정의된 용어들로서 이는 사용자, 운용자의 의도 또는 관례 등에 따라 달라질 수 있 다. 그러므로 그 정의는 본 명세서 전반에 걸친 내용을 토대로 내려져야 할 것이다. 본 개시에서 각각의 순서도에서의 블록들 및 순서도들의 조합들은 컴퓨터 실행 가능 명령어들을 포함하는 하나 이상의 컴퓨터 프로그램들에 의해 수행될 수 있다고 이해되어야 한다. 하나 이상의 컴퓨터 프로그램들은 단일 메모리에 모두 저장되거나, 또는 서로 다른 다수의 메모리들에 분할되어 저장될 수 있다. 일 실시예에서, 흐름도 도면들의 각 블록과 흐름도 도면들의 조합들은 컴퓨터 프로그램 인스트럭션들에 의해 수 행될 수 있다. 컴퓨터 프로그램 인스트럭션들은 범용 컴퓨터, 특수용 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로세서에 탑재될 수 있고, 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비의 프로 세서를 통해 수행되는 그 인스트럭션들이 흐름도 블록(들)에서 설명된 기능들을 수행하는 수단을 생성할 수 있 다. 컴퓨터 프로그램 인스트럭션들은 특정 방식으로 기능을 구현하기 위해 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비를 지향할 수 있는 컴퓨터 이용 가능 또는 컴퓨터 판독 가능 메모리에 저장되는 것도 가능 하고, 컴퓨터 이용가능 또는 컴퓨터 판독 가능 메모리에 저장된 인스트럭션들은 흐름도 블록(들)에서 설명된 기 능을 수행하는 인스트럭션 수단을 내포하는 제조 품목을 생산하는 것도 가능하다. 컴퓨터 프로그램 인스트럭션 들은 컴퓨터 또는 기타 프로그램 가능한 데이터 프로세싱 장비상에 탑재되는 것도 가능하다. 또한, 흐름도 도면의 각 블록은 특정된 논리적 기능(들)을 실행하기 위한 하나 이상의 실행 가능한 인스트럭션 들을 포함하는 모듈, 세그먼트 또는 코드의 일부를 나타낼 수 있다. 일 실시예에서, 블록들에 언급된 기능들이 순서를 벗어나서 발생하는 것도 가능하다. 예를 들면, 잇달아 도시되어 있는 두 개의 블록들은 실질적으로 동시 에 수행되는 것도 가능하고 또는 기능에 따라 역순으로 수행되는 것도 가능하다. 본 개시에서 설명되는 모든 기능이나 동작은 하나의 프로세서 또는 프로세서들의 조합에 의해 처리될 수 있다. 하나의 프로세서 또는 프로세서들의 조합은 처리를 수행하는 회로 장치(circuitry)로서, AP (Application Processor), CP (Communication Processor), GPU (Graphical Processing Unit), NPU (Neural Processing unit), MPU (Microprocessor Unit), SoC (System on Chip), IC (Integrated Chip) 등과 같은 회로 장치를 포함 할 수 있다. 본 개시의 일 실시예에서 사용되는 '~부'라는 용어는 소프트웨어 또는 FPGA(Field Programmable Gate Array) 또는 ASIC(Application Specific Integrated Circuit)과 같은 하드웨어 구성요소를 나타낼 수 있고, '~부'는 특정한 역할을 수행할 수 있다. 한편, '~부'는 소프트웨어 또는 하드웨어에 한정되는 의미는 아니다. '~부'는 어드레싱할 수 있는 저장 매체에 있도록 구성될 수도 있고 하나 또는 그 이상의 프로세서들을 재생시키도록 구 성될 수도 있다. 일 실시예에서 '~부'는 소프트웨어 구성요소들, 객체지향 소프트웨어 구성요소들, 클래스 구성 요소들 및 태스크 구성요소들과 같은 구성요소들과, 프로세스들, 함수들, 속성들, 프로시저들, 서브루틴들, 프 로그램 코드의 세그먼트들, 드라이버들, 펌웨어, 마이크로코드, 회로, 데이터, 데이터베이스, 데이터 구조들, 테이블들, 어레이들, 및 변수들을 포함할 수 있다. 특정한 구성요소나 특정한 '~부'를 통해 제공되는 기능은 그 개수를 줄이도록 결합되거나 추가적인 구성요소들로 분리될 수 있다. 또한, 일 실시예에서 ‘~부’는 하나 이상 의 프로세서를 포함할 수 있다. 본 개시에서, '영상(image)'은 정지 영상, 픽처, 프레임, 복수의 연속된 정지 영상으로 구성된 동영상, 또는 비 디오를 나타낼 수 있다. 본 개시에서 '현재 영상'은 현재의 처리 대상인 영상을 의미하고, '이전 영상'은 현재 영상 이전의 처리 대상인 영상을 의미한다. '현재 영상' 또는 '이전 영상'은 현재 영상 또는 이전 영상으로부터 분할된 블록일 수도 있다. 본 개시에서, '샘플'은 영상, 특징 데이터, 확률 데이터 또는 양자화 데이터 등의 1차원 또는 2차원 데이터 내 샘플링 위치에 할당된 데이터로서 처리 대상이 되는 데이터를 의미한다. 예를 들어, 공간 영역의 프레임 내 픽 셀이 샘플에 해당할 수 있다. 복수의 샘플들을 포함하는 단위를 블록이라고 정의할 수 있다. 또는, 샘플은 2차 원의 영상 내 픽셀을 포함할 수 있으며, 2차원의 데이터는 '맵'으로 참조될 수도 있다. 본 개시에서 '신경망(neural network)'은 뇌 신경을 모사한 인공 신경망 모델의 대표적인 예시로서, 특정 알고 리즘을 사용한 인공 신경망 모델로 한정되지 않는다. 신경망은 심층 신경망(deep neural network)으로 참조될 수도 있다. 본 개시에서 '파라미터(parameter)'는 신경망을 이루는 각 레이어의 연산 과정에서 이용되는 값으로서, 예를 들 어, 입력 값을 소정 연산식에 적용할 때 이용될 수 있다. 파라미터는 훈련의 결과로 설정되는 값으로서, 필요에 따라 별도의 훈련 데이터(training data)를 통해 갱신될 수 있다. 본 개시에서 '잠재 텐서(Latent Tensor)'는 신경망 또는 신경망 기반의 인코더가 입력 데이터를 처리함으로써 획득되는 데이터를 의미할 수 있다. 잠재 텐서는 여러 샘플들을 포함하는 1차원 또는 2차원의 데이터일 수 있다. 잠재 텐서는 잠재 표현(latent representation) 또는 특징 데이터로 지칭될 수도 있다. 잠재 텐서는 신경 망 기반의 디코더가 출력하는 데이터에 잠재된 특징을 나타낼 수 있다. AI 기반의 엔드-투-엔드 부호화/복호화 시스템이란, 영상의 부호화 과정 및 복호화 과정에서 신경망이 이용되는 시스템으로 이해될 수 있다. HEVC, VVC 등의 코덱과 같이, AI 기반의 엔드-투-엔드 부호화/복호화 시스템에서는 영상의 부호화 및 복호화를 위해 인트라 예측 또는 인터 예측이 이용될 수 있다. 전술한 바와 같이, 인트라 예측은 영상 내의 공간적인 중복성을 제거하여 영상을 압축하는 방법이고, 인터 예측 은 영상들 사이의 시간적인 중복성을 제거하여 영상을 압축하는 방법이다. 본 개시의 일 실시예에서, 여러 프레임들 중 첫 번째 프레임, 랜덤 엑세스 포인트(random access point)가 되는 프레임 및 씬 체인지(scene change)가 발생하는 프레임에 대해 인트라 예측이 적용될 수 있다. 본 개시의 일 실시예에서, 여러 프레임들 중 인트라 예측이 적용되는 프레임에 후속하는 프레임들에 대해 인터 예측이 적용될 수 있다. 이하에서는, 도 1 내지 도 19를 참조하여, 일 실시예에 따른 트리 구조의 부호화 단위 및 변환 단위에 기초한 영상 부호화 방법 및 그 장치, 영상 복호화 방법 및 그 장치가 개시된다. 도 1은 일 실시예에 따른 영상 복호화 장치의 블록도를 도시한다. 영상 복호화 장치는 비트스트림 획득부 및 복호화부를 포함할 수 있다. 비트스트림 획득부 및 복호화부는 적어도 하나의 프로세서를 포함할 수 있다. 또한 비트스트림 획득부 및 복호화부(12 0)는 적어도 하나의 프로세서가 수행할 명령어들을 저장하는 메모리를 포함할 수 있다. 비트스트림 획득부는 비트스트림을 수신할 수 있다. 비트스트림은 후술되는 영상 부호화 장치가 영상 을 부호화한 정보를 포함한다. 또한 비트스트림은 영상 부호화 장치로부터 송신될 수 있다. 영상 부호화 장치 및 영상 복호화 장치는 유선 또는 무선으로 연결될 수 있으며, 비트스트림 획득부는 유선 또는 무선을 통하여 비트스트림을 수신할 수 있다. 비트스트림 획득부는 광학미디어, 하드디스크 등과 같 은 저장매체로부터 비트스트림을 수신할 수 있다. 복호화부는 수신된 비트스트림으로부터 획득된 정보에 기초하여 영상을 복원할 수 있다. 복호화부는 영상을 복원하기 위한 신택스 엘리먼트를 비트스트림으로부 터 획득할 수 있다. 복호화부는 신택스 엘리먼트에 기초하여 영상을 복원할 수 있다. 영상 복호화 장치의 동작에 대해 상세히 설명하면, 비트스트림 획득부는 비트스트림을 수신할 수 있 다. 영상 복호화 장치는 비트스트림으로부터 부호화 단위의 분할 형태 모드에 대응하는 빈스트링을 획득하는 동작을 수행할 수 있다. 그리고, 영상 복호화 장치는 부호화 단위의 분할 규칙을 결정하는 동작을 수행할수 있다. 또한 영상 복호화 장치는 분할 형태 모드에 대응하는 빈스트링 및 상기 분할 규칙 중 적어도 하 나에 기초하여, 부호화 단위를 복수의 부호화 단위들로 분할하는 동작을 수행할 수 있다. 영상 복호화 장치 는 분할 규칙을 결정하기 위하여, 부호화 단위의 너비 및 높이의 비율에 따른, 상기 부호화 단위의 크기의 허용 가능한 제1 범위를 결정할 수 있다. 영상 복호화 장치는 분할 규칙을 결정하기 위하여, 부호화 단위 의 분할 형태 모드에 따른, 부호화 단위의 크기의 허용 가능한 제2 범위를 결정할 수 있다. 이하에서는 본 개시의 일 실시예에 따라 부호화 단위의 분할에 대하여 자세히 설명한다. 먼저 하나의 픽처 (Picture)는 하나 이상의 슬라이스 혹은 하나 이상의 타일로 분할될 수 있다. 하나의 슬라이 스 혹은 하나의 타일은 하나 이상의 최대 부호화 단위(Coding Tree Unit; CTU)의 시퀀스일 수 있다. 구현예에 따라, 하나의 슬라이스는 하나 이상의 타일을 포함하고, 하나의 슬라이스는 하나 이상의 최대 부호화 단위를 포 함할 수도 있다. 하나 또는 복수의 타일을 포함하는 슬라이스가 픽처 내에서 결정될 수 있다. 최대 부호화 단위 (CTU)와 대비되는 개념으로 최대 부호화 블록 (Coding Tree Block; CTB)이 있다. 최대 부호화 블록(CTB)은 NxN개의 샘플들을 포함하는 NxN 블록을 의미한다(N은 정수). 각 컬러 성분은 하나 이상의 최대 부 호화 블록으로 분할될 수 있다. 픽처가 3개의 샘플 어레이(Y, Cr, Cb 성분별 샘플 어레이)를 가지는 경우에 최대 부호화 단위(CTU)란, 루마 샘 플의 최대 부호화 블록 및 그에 대응되는 크로마 샘플들의 2개의 최대 부호화 블록과, 루마 샘플, 크로마 샘플 들을 부호화하는데 이용되는 신택스 구조들을 포함하는 단위이다. 픽처가 모노크롬 픽처인 경우에 최대 부호화 단위란, 모노크롬 샘플의 최대 부호화 블록과 모노크롬 샘플들을 부호화하는데 이용되는 신택스 구조들을 포함 하는 단위이다. 픽처가 컬러 성분별로 분리되는 컬러 플레인으로 부호화되는 픽처인 경우에 최대 부호화 단위란, 해당 픽처와 픽처의 샘플들을 부호화하는데 이용되는 신택스 구조들을 포함하는 단위이다. 하나의 최대 부호화 블록(CTB)은 MxN개의 샘플들을 포함하는 MxN 부호화 블록(coding block)으로 분할될 수 있 다 (M, N은 정수). 픽처가 Y, Cr, Cb 성분별 샘플 어레이를 가지는 경우에 부호화 단위(Coding Unit; CU)란, 루마 샘플의 부호화 블록 및 그에 대응되는 크로마 샘플들의 2개의 부호화 블록과, 루마 샘플, 크로마 샘플들을 부호화하는데 이용 되는 신택스 구조들을 포함하는 단위이다. 픽처가 모노크롬 픽처인 경우에 부호화 단위란, 모노크롬 샘플의 부 호화 블록과 모노크롬 샘플들을 부호화하는데 이용되는 신택스 구조들을 포함하는 단위이다. 픽처가 컬러 성분 별로 분리되는 컬러 플레인으로 부호화되는 픽처인 경우에 부호화 단위란, 해당 픽처와 픽처의 샘플들을 부호화 하는데 이용되는 신택스 구조들을 포함하는 단위이다. 위에서 설명한 바와 같이, 최대 부호화 블록과 최대 부호화 단위는 서로 구별되는 개념이며, 부호화 블록과 부 호화 단위는 서로 구별되는 개념이다. 즉, (최대) 부호화 단위는 해당 샘플을 포함하는 (최대) 부호화 블록과 그에 대응하는 신택스 구조를 포함하는 데이터 구조를 의미한다. 하지만 당업자가 (최대) 부호화 단위 또는 (최 대) 부호화 블록가 소정 개수의 샘플들을 포함하는 소정 크기의 블록을 지칭한다는 것을 이해할 수 있으므로, 이하 명세서에서는 최대 부호화 블록과 최대 부호화 단위, 또는 부호화 블록과 부호화 단위를 특별한 사정이 없 는 한 구별하지 않고 언급한다. 영상은 최대 부호화 단위(Coding Tree Unit; CTU)로 분할될 수 있다. 최대 부호화 단위의 크기는 비트스트림으 로부터 획득된 정보에 기초하여 결정될 수 있다. 최대 부호화 단위의 모양은 동일 크기의 정사각형을 가질 수 있다. 하지만 이에 한정되는 것은 아니다. 예를 들어, 비트스트림으로부터 루마 부호화 블록의 최대 크기에 대한 정보가 획득될 수 있다. 예를 들어, 루마 부호화 블록의 최대 크기에 대한 정보가 나타내는 루마 부호화 블록의 최대 크기는 4x4, 8x8, 16x16, 32x32, 64x64, 128x128, 256x256 중 하나일 수 있다. 예를 들어, 비트스트림으로부터 2분할이 가능한 루마 부호화 블록의 최대 크기와 루마 블록 크기 차이에 대한 정보가 획득될 수 있다. 루마 블록 크기 차이에 대한 정보는 루마 최대 부호화 단위와 2분할이 가능한 최대 루 마 부호화 블록 간의 크기 차이를 나타낼 수 있다. 따라서, 비트스트림으로부터 획득된 2분할이 가능한 루마 부 호화 블록의 최대 크기에 대한 정보와 루마 블록 크기 차이에 대한 정보를 결합하면, 루마 최대 부호화 단위의 크기가 결정될 수 있다. 루마 최대 부호화 단위의 크기를 이용하면 크로마 최대 부호화 단위의 크기도 결정될 수 있다. 예를 들어, 컬러 포맷에 따라 Y: Cb : Cr 비율이 4:2:0 이라면, 크로마 블록의 크기는 루마 블록의 크 기의 절반일 수 있고, 마찬가지로 크로마 최대 부호화 단위의 크기는 루마 최대 부호화 단위의 크기의 절반일수 있다. 일 실시예에 따르면, 바이너리 분할(binary split)이 가능한 루마 부호화 블록의 최대 크기에 대한 정보는 비트 스트림으로부터 획득하므로, 바이너리 분할이 가능한 루마 부호화 블록의 최대 크기는 가변적으로 결정될 수 있 다. 이와 달리, 터너리 분할(ternary split)이 가능한 루마 부호화 블록의 최대 크기는 고정될 수 있다. 예를 들어, I 픽처에서 터너리 분할이 가능한 루마 부호화 블록의 최대 크기는 32x32이고, P 픽처 또는 B 픽처에서 터너리 분할이 가능한 루마 부호화 블록의 최대 크기는 64x64일 수 있다. 또한 최대 부호화 단위는 비트스트림으로부터 획득된 분할 형태 모드 정보에 기초하여 부호화 단위로 계층적으 로 분할될 수 있다. 분할 형태 모드 정보로서, 쿼드분할(quad split) 여부를 나타내는 정보, 다분할 여부를 나 타내는 정보, 분할 방향 정보 및 분할 타입 정보 중 적어도 하나가 비트스트림으로부터 획득될 수 있다. 예를 들어, 쿼드분할(quad split) 여부를 나타내는 정보는 현재 부호화 단위가 쿼드분할(QUAD_SPLIT)될지 또는 쿼드분할되지 않을지를 나타낼 수 있다. 현재 부호화 단위가 쿼드분할지되 않으면, 다분할 여부를 나타내는 정보는 현재 부호화 단위가 더 이상 분할되 지 않을지(NO_SPLIT) 아니면 바이너리/터너리 분할될지 여부를 나타낼 수 있다. 현재 부호화 단위가 바이너리 분할되거나 터너리 분할되면, 분할 방향 정보는 현재 부호화 단위가 수평 방향 또 는 수직 방향 중 하나로 분할됨을 나타낸다. 현재 부호화 단위가 수평 또는 수직 방향으로 분할되면 분할 타입 정보는 현재 부호화 단위를 바이너리 분할 또 는 터너리 분할로 분할함을 나타낸다. 분할 방향 정보 및 분할 타입 정보에 따라, 현재 부호화 단위의 분할 모드가 결정될 수 있다. 현재 부호화 단위 가 수평 방향으로 바이너리 분할되는 경우의 분할 모드는 바이너리 수평 분할(SPLIT_BT_HOR), 수평 방향으로 터 너리 분할되는 경우의 터너리 수평 분할(SPLIT_TT_HOR), 수직 방향으로 바이너리 분할되는 경우의 분할 모드는 바이너리 수직 분할 (SPLIT_BT_VER) 및 수직 방향으로 터너리 분할되는 경우의 분할 모드는 터너리 수직 분할 (SPLIT_TT_VER)로 결정될 수 있다. 영상 복호화 장치는 비트스트림으로부터 분할 형태 모드 정보를 하나의 빈스트링으로부터 획득할 수 있다. 영상 복호화 장치가 수신한 비트스트림의 형태는 Fixed length binary code, Unary code, Truncated unary code, 미리 결정된 바이너리 코드 등을 포함할 수 있다. 빈스트링은 정보를 2진수의 나열로 나타낸 것이다. 빈스트링은 적어도 하나의 비트로 구성될 수 있다. 영상 복호화 장치는 분할 규칙에 기초하여 빈스트 링에 대응하는 분할 형태 모드 정보를 획득할 수 있다. 영상 복호화 장치는 하나의 빈스트링에 기초하여, 부호화 단위를 쿼드분할할지 여부, 분할하지 않을지 또는 분할 방향 및 분할 타입을 결정할 수 있다. 부호화 단위는 최대 부호화 단위보다 작거나 같을 수 있다. 예를 들어 최대 부호화 단위도 최대 크기를 가지는 부호화 단위이므로 부호화 단위의 하나이다. 최대 부호화 단위에 대한 분할 형태 모드 정보가 분할되지 않음을 나타내는 경우, 최대 부호화 단위에서 결정되는 부호화 단위는 최대 부호화 단위와 같은 크기를 가진다. 최대 부호화 단위에 대한 분할 형태 모드 정보가 분할됨을 나타내는 경우 최대 부호화 단위는 부호화 단위들로 분할 될 수 있다. 또한 부호화 단위에 대한 분할 형태 모드 정보가 분할을 나타내는 경우 부호화 단위들은 더 작은 크기의 부호화 단위들로 분할될 수 있다. 다만, 영상의 분할은 이에 한정되는 것은 아니며 최대 부호화 단위 및 부호화 단위는 구별되지 않을 수 있다. 부호화 단위의 분할에 대해서는 도 3 내지 도 16에서 보다 자세히 설명 한다. 또한 부호화 단위로부터 예측을 위한 하나 이상의 예측 블록이 결정될 수 있다. 예측 블록은 부호화 단위와 같 거나 작을 수 있다. 또한 부호화 단위로부터 변환을 위한 하나 이상의 변환 블록이 결정될 수 있다. 변환 블록 은 부호화 단위와 같거나 작을 수 있다. 변환 블록과 예측 블록의 모양 및 크기는 서로 관련 없을 수 있다. 다른 실시예로, 부호화 단위가 예측 블록으로서 부호화 단위를 이용하여 예측이 수행될 수 있다. 또한 부호화 단위가 변환 블록으로서 부호화 단위를 이용하여 변환이 수행될 수 있다. 부호화 단위의 분할에 대해서는 도 3 내지 도 16에서 보다 자세히 설명한다. 본 개시의 현재 블록 및 주변 블록 은 최대 부호화 단위, 부호화 단위, 예측 블록 및 변환 블록 중 하나를 나타낼 수 있다. 또한, 현재 블록 또는 현재 부호화 단위는 현재 복호화 또는 부호화가 진행되는 블록 또는 현재 분할이 진행되고 있는 블록이다. 주변블록은 현재 블록 이전에 복원된 블록일 수 있다. 주변 블록은 현재 블록으로부터 공간적 또는 시간적으로 인접 할 수 있다. 주변 블록은 현재 블록의 좌하측, 좌측, 좌상측, 상측, 우상측, 우측, 우하측 중 하나에 위치할 수 있다. 도 3은 일 실시예에 따라 영상 복호화 장치가 현재 부호화 단위를 분할하여 적어도 하나의 부호화 단위를 결정하는 과정을 도시한다. 블록 형태는 4Nx4N, 4Nx2N, 2Nx4N, 4NxN, Nx4N, 32NxN, Nx32N, 16NxN, Nx16N, 8NxN 또는 Nx8N을 포함할 수 있 다. 여기서 N은 양의 정수일 수 있다. 블록 형태 정보는 부호화 단위의 모양, 방향, 너비 및 높이의 비율 또는 크기 중 적어도 하나를 나타내는 정보이다. 부호화 단위의 모양은 정사각형(square) 및 비-정사각형(non-square)을 포함할 수 있다. 부호화 단위의 너비 및 높이의 길이가 같은 경우(즉, 부호화 단위의 블록 형태가 4Nx4N 인 경우), 영상 복호화 장치는 부호화 단 위의 블록 형태 정보를 정사각형으로 결정할 수 있다. 영상 복호화 장치는 부호화 단위의 모양을 비-정사 각형으로 결정할 수 있다. 부호화 단위의 너비 및 높이의 길이가 다른 경우(즉, 부호화 단위의 블록 형태가 4Nx2N, 2Nx4N, 4NxN, Nx4N, 32NxN, Nx32N, 16NxN, Nx16N, 8NxN 또는 Nx8N인 경우), 영상 복호화 장치는 부호화 단위의 블록 형태 정 보를 비-정사각형으로 결정할 수 있다. 부호화 단위의 모양이 비-정사각형인 경우, 영상 복호화 장치는 부 호화 단위의 블록 형태 정보 중 너비 및 높이의 비율을 1:2, 2:1, 1:4, 4:1, 1:8, 8:1, 1:16, 16:1, 1:32, 32:1 중 적어도 하나로 결정할 수 있다. 또한, 부호화 단위의 너비의 길이 및 높이의 길이에 기초하여, 영상 복 호화 장치는 부호화 단위가 수평 방향인지 수직 방향인지 결정할 수 있다. 또한, 부호화 단위의 너비의 길 이, 높이의 길이 또는 넓이 중 적어도 하나에 기초하여, 영상 복호화 장치는 부호화 단위의 크기를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 블록 형태 정보를 이용하여 부호화 단위의 형태를 결정할 수 있고, 분할 형태 모드 정보를 이용하여 부호화 단위가 어떤 형태로 분할되는지를 결정할 수 있다. 즉, 영상 복호화 장 치가 이용하는 블록 형태 정보가 어떤 블록 형태를 나타내는지에 따라 분할 형태 모드 정보가 나타내는 부 호화 단위의 분할 방법이 결정될 수 있다. 영상 복호화 장치는 비트스트림으로부터 분할 형태 모드 정보를 획득할 수 있다. 하지만 이에 한정되는 것 은 아니며, 영상 복호화 장치 및 영상 부호화 장치는 블록 형태 정보에 기초하여 미리 약속된 분할 형태 모드 정보를 결정할 수 있다. 영상 복호화 장치는 최대 부호화 단위 또는 최소 부호화 단위에 대하여 미리 약속된 분할 형태 모드 정보를 결정할 수 있다. 예를 들어 영상 복호화 장치는 최대 부호화 단위에 대하여 분할 형태 모드 정보를 쿼드 분할(quad split)로 결정할 수 있다. 또한, 영상 복호화 장치는 최소 부호화 단위에 대하여 분할 형태 모드 정보를 \"분할하지 않음\"으로 결정할 수 있다. 구체적으로 영상 복호화 장 치는 최대 부호화 단위의 크기를 256x256으로 결정할 수 있다. 영상 복호화 장치는 미리 약속된 분할 형태 모드 정보를 쿼드 분할로 결정할 수 있다. 쿼드 분할은 부호화 단위의 너비 및 높이를 모두 이등분하는 분 할 형태 모드이다. 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 256x256 크기의 최대 부호화 단위 로부터 128x128 크기의 부호화 단위를 획득할 수 있다. 또한 영상 복호화 장치는 최소 부호화 단위의 크기 를 4x4로 결정할 수 있다. 영상 복호화 장치는 최소 부호화 단위에 대하여 \"분할하지 않음\"을 나타내는 분 할 형태 모드 정보를 획득할 수 있다. 일 실시예에 따라, 영상 복호화 장치는 현재 부호화 단위가 정사각형 형태임을 나타내는 블록 형태 정보를 이용할 수 있다. 예를 들어 영상 복호화 장치는 분할 형태 모드 정보에 따라 정사각형의 부호화 단위를 분 할하지 않을지, 수직으로 분할할지, 수평으로 분할할지, 4개의 부호화 단위로 분할할지 등을 결정할 수 있다. 도 3을 참조하면, 현재 부호화 단위의 블록 형태 정보가 정사각형의 형태를 나타내는 경우, 복호화부(12 0)는 분할되지 않음을 나타내는 분할 형태 모드 정보에 따라 현재 부호화 단위와 동일한 크기를 가지는 부 호화 단위(310a)를 분할하지 않거나, 소정의 분할방법을 나타내는 분할 형태 모드 정보에 기초하여 분할된 부호 화 단위(310b, 310c, 310d, 310e, 310f 등)를 결정할 수 있다. 도 3을 참조하면 영상 복호화 장치는 일 실시예에 따라 수직방향으로 분할됨을 나타내는 분할 형태 모드 정보에 기초하여 현재 부호화 단위를 수직방향으로 분할한 두 개의 부호화 단위(310b)를 결정할 수 있다. 영상 복호화 장치는 수평방향으로 분할됨을 나타내는 분할 형태 모드 정보에 기초하여 현재 부호화 단위 를 수평방향으로 분할한 두 개의 부호화 단위(310c)를 결정할 수 있다. 영상 복호화 장치는 수직방향및 수평방향으로 분할됨을 나타내는 분할 형태 모드 정보에 기초하여 현재 부호화 단위를 수직방향 및 수 평방향으로 분할한 네 개의 부호화 단위(310d)를 결정할 수 있다. 영상 복호화 장치는 일 실시예에 따라 수직방향으로 터너리(ternary) 분할됨을 나타내는 분할 형태 모드 정보에 기초하여 현재 부호화 단위를 수 직방향으로 분할한 세 개의 부호화 단위(310e)를 결정할 수 있다. 영상 복호화 장치는 수평방향으로 터너 리 분할됨을 나타내는 분할 형태 모드 정보에 기초하여 현재 부호화 단위를 수평방향으로 분할한 세 개의 부호화 단위(310f)를 결정할 수 있다. 다만 정사각형의 부호화 단위가 분할될 수 있는 분할 형태는 상술한 형태 로 한정하여 해석되어서는 안되고, 분할 형태 모드 정보가 나타낼 수 있는 다양한 형태가 포함될 수 있다. 정사 각형의 부호화 단위가 분할되는 소정의 분할 형태들은 이하에서 다양한 실시예를 통해 구체적으로 설명하도록 한다. 도 4는 일 실시예에 따라 영상 복호화 장치가 비-정사각형의 형태인 부호화 단위를 분할하여 적어도 하나 의 부호화 단위를 결정하는 과정을 도시한다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위가 비-정사각형 형태임을 나타내는 블록 형태 정보 를 이용할 수 있다. 영상 복호화 장치는 분할 형태 모드 정보에 따라 비-정사각형의 현재 부호화 단위를 분할하지 않을지 소정의 방법으로 분할할지 여부를 결정할 수 있다. 도 4를 참조하면, 현재 부호화 단위(400 또 는 450)의 블록 형태 정보가 비-정사각형의 형태를 나타내는 경우, 영상 복호화 장치는 분할되지 않음을 나타내는 분할 형태 모드 정보에 따라 현재 부호화 단위(400 또는 450)와 동일한 크기를 가지는 부호화 단위 (410 또는 460)를 결정하거나, 소정의 분할방법을 나타내는 분할 형태 모드 정보에 따라 기초하여 분할된 부호 화 단위(420a, 420b, 430a, 430b, 430c, 470a, 470b, 480a, 480b, 480c)를 결정할 수 있다. 비-정사각형의 부 호화 단위가 분할되는 소정의 분할 방법은 이하에서 다양한 실시예를 통해 구체적으로 설명하도록 한다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보를 이용하여 부호화 단위가 분할되는 형태를 결 정할 수 있고, 이 경우 분할 형태 모드 정보는 부호화 단위가 분할되어 생성되는 적어도 하나의 부호화 단위의 개수를 나타낼 수 있다. 도 4를 참조하면 분할 형태 모드 정보가 두 개의 부호화 단위로 현재 부호화 단위(400 또는 450)가 분할되는 것을 나타내는 경우, 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 현재 부 호화 단위(400 또는 450)를 분할하여 현재 부호화 단위에 포함되는 두 개의 부호화 단위(420a, 420b, 또는 470a, 470b)를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치가 분할 형태 모드 정보에 기초하여 비-정사각형의 형태의 현재 부호화 단위(400 또는 450)를 분할하는 경우, 영상 복호화 장치는 비-정사각형의 현재 부호화 단위(400 또는 45 0)의 긴 변의 위치를 고려하여 현재 부호화 단위를 분할할 수 있다. 예를 들면, 영상 복호화 장치는 현재 부호화 단위(400 또는 450)의 형태를 고려하여 현재 부호화 단위(400 또는 450)의 긴 변을 분할하는 방향으로 현재 부호화 단위(400 또는 450)를 분할하여 복수개의 부호화 단위를 결정할 수 있다. 일 실시예에 따라, 분할 형태 모드 정보가 홀수개의 블록으로 부호화 단위를 분할(터너리 분할)하는 것을 나타 내는 경우, 영상 복호화 장치는 현재 부호화 단위(400 또는 450)에 포함되는 홀수개의 부호화 단위를 결정 할 수 있다. 예를 들면, 분할 형태 모드 정보가 3개의 부호화 단위로 현재 부호화 단위(400 또는 450)를 분할하 는 것을 나타내는 경우, 영상 복호화 장치는 현재 부호화 단위(400 또는 450)를 3개의 부호화 단위(430a, 430b, 430c, 480a, 480b, 480c)로 분할할 수 있다. 일 실시예에 따라, 현재 부호화 단위(400 또는 450)의 너비 및 높이의 비율이 4:1 또는 1:4 일 수 있다. 너비 및 높이의 비율이 4:1 인 경우, 너비의 길이가 높이의 길이보다 길므로 블록 형태 정보는 수평 방향일 수 있다. 너비 및 높이의 비율이 1:4 인 경우, 너비의 길이가 높이의 길이보다 짧으므로 블록 형태 정보는 수직 방향일 수 있다. 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 현재 부호화 단위를 홀수개의 블록으로 분 할할 것을 결정할 수 있다. 또한 영상 복호화 장치는 현재 부호화 단위(400 또는 450)의 블록 형태 정보에 기초하여 현재 부호화 단위(400 또는 450)의 분할 방향을 결정할 수 있다. 예를 들어 현재 부호화 단위가 수직 방향인 경우, 영상 복호화 장치는 현재 부호화 단위를 수평 방향으로 분할 하여 부호화 단위 (430a, 430b, 430c)를 결정할 수 있다. 또한 현재 부호화 단위가 수평 방향인 경우, 영상 복호화 장치 는 현재 부호화 단위를 수직 방향으로 분할 하여 부호화 단위(480a, 480b, 480c)를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위(400 또는 450)에 포함되는 홀수개의 부호화 단위 를 결정할 수 있으며, 결정된 부호화 단위들의 크기 모두가 동일하지는 않을 수 있다. 예를 들면, 결정된 홀수 개의 부호화 단위(430a, 430b, 430c, 480a, 480b, 480c) 중 소정의 부호화 단위(430b 또는 480b)의 크기는 다 른 부호화 단위(430a, 430c, 480a, 480c)들과는 다른 크기를 가질 수도 있다. 즉, 현재 부호화 단위(400 또는450)가 분할되어 결정될 수 있는 부호화 단위는 복수의 종류의 크기를 가질 수 있고, 경우에 따라서는 홀수개의 부호화 단위(430a, 430b, 430c, 480a, 480b, 480c)가 각각 서로 다른 크기를 가질 수도 있다. 일 실시예에 따라 분할 형태 모드 정보가 홀수개의 블록으로 부호화 단위가 분할되는 것을 나타내는 경우, 영상 복호화 장치는 현재 부호화 단위(400 또는 450)에 포함되는 홀수개의 부호화 단위를 결정할 수 있고, 나아 가 영상 복호화 장치는 분할하여 생성되는 홀수개의 부호화 단위들 중 적어도 하나의 부호화 단위에 대하 여 소정의 제한을 둘 수 있다. 도 4를 참조하면 영상 복호화 장치는 현재 부호화 단위(400 또는 450)가 분 할되어 생성된 3개의 부호화 단위(430a, 430b, 430c, 480a, 480b, 480c)들 중 중앙에 위치하는 부호화 단위 (430b, 480b)에 대한 복호화 과정을 다른 부호화 단위(430a, 430c, 480a, 480c)와 다르게 할 수 있다. 예를 들 면, 영상 복호화 장치는 중앙에 위치하는 부호화 단위(430b, 480b)에 대하여는 다른 부호화 단위(430a, 430c, 480a, 480c)와 달리 더 이상 분할되지 않도록 제한하거나, 소정의 횟수만큼만 분할되도록 제한할 수 있다. 도 5는 일 실시예에 따라 영상 복호화 장치가 블록 형태 정보 및 분할 형태 모드 정보 중 적어도 하나에 기초하여 부호화 단위를 분할하는 과정을 도시한다. 일 실시예에 따라 영상 복호화 장치는 블록 형태 정보 및 분할 형태 모드 정보 중 적어도 하나에 기초하여 정사각형 형태의 제1 부호화 단위를 부호화 단위들로 분할하거나 분할하지 않는 것으로 결정할 수 있다. 일 실시예에 따라 분할 형태 모드 정보가 수평 방향으로 제1 부호화 단위를 분할하는 것을 나타내는 경우, 영상 복호화 장치는 제1 부호화 단위를 수평 방향으로 분할하여 제2 부호화 단위를 결정할 수 있다. 일 실시예에 따라 이용되는 제1 부호화 단위, 제2 부호화 단위, 제3 부호화 단위는 부호화 단위 간의 분 할 전후 관계를 이해하기 위해 이용된 용어이다. 예를 들면, 제1 부호화 단위를 분할하면 제2 부호화 단위가 결 정될 수 있고, 제2 부호화 단위가 분할되면 제3 부호화 단위가 결정될 수 있다. 이하에서는 이용되는 제1 부호 화 단위, 제2 부호화 단위 및 제3 부호화 단위의 관계는 상술한 특징에 따르는 것으로 이해될 수 있다. 일 실시예에 따라 영상 복호화 장치는 결정된 제2 부호화 단위를 분할 형태 모드 정보에 기초하여 부 호화 단위들로 분할하거나 분할하지 않는 것으로 결정할 수 있다. 도 5를 참조하면 영상 복호화 장치는 분 할 형태 모드 정보에 기초하여 제1 부호화 단위를 분할하여 결정된 비-정사각형의 형태의 제2 부호화 단위 를 적어도 하나의 제3 부호화 단위(520a, 520b, 520c, 520d 등)로 분할하거나 제2 부호화 단위를 분 할하지 않을 수 있다. 영상 복호화 장치는 분할 형태 모드 정보를 획득할 수 있고 영상 복호화 장치 는 획득한 분할 형태 모드 정보에 기초하여 제1 부호화 단위를 분할하여 다양한 형태의 복수개의 제2 부호 화 단위(예를 들면, 510)를 분할할 수 있으며, 제2 부호화 단위는 분할 형태 모드 정보에 기초하여 제1 부 호화 단위가 분할된 방식에 따라 분할될 수 있다. 일 실시예에 따라, 제1 부호화 단위가 제1 부호화 단위에 대한 분할 형태 모드 정보에 기초하여 제2 부호화 단위로 분할된 경우, 제2 부호화 단위 역시 제2 부호화 단위에 대한 분할 형태 모드 정보에 기초하여 제3 부호화 단위(예를 들면, 520a, 520b, 520c, 520d 등)으로 분할될 수 있다. 즉, 부호화 단위는 부호화 단위 각각에 관련된 분할 형태 모드 정보에 기 초하여 재귀적으로 분할될 수 있다. 따라서 비-정사각형 형태의 부호화 단위에서 정사각형의 부호화 단위가 결 정될 수 있고, 이러한 정사각형 형태의 부호화 단위가 재귀적으로 분할되어 비-정사각형 형태의 부호화 단위가 결정될 수도 있다. 도 5를 참조하면, 비-정사각형 형태의 제2 부호화 단위가 분할되어 결정되는 홀수개의 제3 부호화 단위 (520b, 520c, 520d) 중 소정의 부호화 단위(예를 들면, 가운데에 위치하는 부호화 단위 또는 정사각형 형태의 부호화 단위)는 재귀적으로 분할될 수 있다. 일 실시예에 따라 홀수개의 제3 부호화 단위(520b, 520c, 520d) 중 하나인 비-정사각형 형태의 제3 부호화 단위(520b)는 수평 방향으로 분할되어 복수개의 제4 부호화 단위로 분할 될 수 있다. 복수개의 제4 부호화 단위(530a, 530b, 530c, 530d) 중 하나인 비-정사각형 형태의 제4 부호화 단 위(530b 또는 530d)는 다시 복수개의 부호화 단위들로 분할될 수 있다. 예를 들면, 비-정사각형 형태의 제4 부 호화 단위(530b 또는 530d)는 홀수개의 부호화 단위로 다시 분할될 수도 있다. 부호화 단위의 재귀적 분할에 이 용될 수 있는 방법에 대하여는 다양한 실시예를 통해 후술하도록 한다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 제3 부호화 단위(520a, 520b, 520c, 520d 등) 각각을 부호화 단위들로 분할할 수 있다. 또한 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 제2 부호화 단위를 분할하지 않는 것으로 결정할 수 있다. 영상 복호화 장치는 일 실시예에 따라 비-정사각형 형태의 제2 부호화 단위를 홀수개의 제3 부호화 단위(520b, 520c, 520d)로 분할할 수 있 다. 영상 복호화 장치는 홀수개의 제3 부호화 단위(520b, 520c, 520d) 중 소정의 제3 부호화 단위에 대하여 소정의 제한을 둘 수 있다. 예를 들면 영상 복호화 장치는 홀수개의 제3 부호화 단위(520b, 520c, 520d) 중 가운데에 위치하는 부호화 단위(520c)에 대하여는 더 이상 분할되지 않는 것으로 제한하거나 또는 설 정 가능한 횟수로 분할되어야 하는 것으로 제한할 수 있다. 도 5를 참조하면, 영상 복호화 장치는 비-정사각형 형태의 제2 부호화 단위에 포함되는 홀수개의 제3 부호화 단위(520b, 520c, 520d)들 중 가운데에 위치하는 부호화 단위(520c)는 더 이상 분할되지 않거나, 소정의 분할 형태로 분할(예를 들면 4개의 부호화 단위로만 분할하거나 제2 부호화 단위가 분할된 형태에 대응하 는 형태로 분할)되는 것으로 제한하거나, 소정의 횟수로만 분할(예를 들면 n회만 분할, n>0)하는 것으로 제한할 수 있다. 다만 가운데에 위치한 부호화 단위(520c)에 대한 상기 제한은 단순한 실시예들에 불과하므로 상술한 실시예들로 제한되어 해석되어서는 안되고, 가운데에 위치한 부호화 단위(520c)가 다른 부호화 단위(520b, 520d)와 다르게 복호화 될 수 있는 다양한 제한들을 포함하는 것으로 해석되어야 한다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위를 분할하기 위해 이용되는 분할 형태 모드 정보를 현재 부호화 단위 내의 소정의 위치에서 획득할 수 있다. 도 6은 일 실시예에 따라 영상 복호화 장치가 홀수개의 부호화 단위들 중 소정의 부호화 단위를 결정하기 위한 방법을 도시한다. 도 6을 참조하면, 현재 부호화 단위(600, 650)의 분할 형태 모드 정보는 현재 부호화 단위(600, 650)에 포함되 는 복수개의 샘플 중 소정 위치의 샘플(예를 들면, 가운데에 위치하는 샘플(640, 690))에서 획득될 수 있다. 다 만 이러한 분할 형태 모드 정보 중 적어도 하나가 획득될 수 있는 현재 부호화 단위 내의 소정 위치가 도 6에서 도시하는 가운데 위치로 한정하여 해석되어서는 안되고, 소정 위치에는 현재 부호화 단위내에 포함 될 수 있는 다양한 위치(예를 들면, 최상단, 최하단, 좌측, 우측, 좌측상단, 좌측하단, 우측상단 또는 우측하단 등)가 포함될 수 있는 것으로 해석되어야 한다. 영상 복호화 장치는 소정 위치로부터 획득되는 분할 형태 모드 정보를 획득하여 현재 부호화 단위를 다양한 형태 및 크기의 부호화 단위들로 분할하거나 분할하지 않는 것으로 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위가 소정의 개수의 부호화 단위들로 분할된 경우 그 중 하나의 부호화 단위를 선택할 수 있다. 복수개의 부호화 단위들 중 하나를 선택하기 위한 방법은 다양할 수 있으며, 이러한 방법들에 대한 설명은 이하의 다양한 실시예를 통해 후술하도록 한다. 일 실시예에 따라 영상 복호화 장치 는 현재 부호화 단위를 복수개의 부호화 단위들로 분할하고, 소정 위 치의 부호화 단위를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 홀수개의 부호화 단위들 중 가운데에 위치하는 부호화 단위를 결정 하기 위하여 홀수개의 부호화 단위들 각각의 위치를 나타내는 정보를 이용할 수 있다. 도 6을 참조하면, 영상 복호화 장치는 현재 부호화 단위 또는 현재 부호화 단위를 분할하여 홀수개의 부호화 단위들 (620a, 620b, 620c) 또는 홀수개의 부호화 단위들(660a, 660b, 660c)을 결정할 수 있다. 영상 복호화 장치 는 홀수개의 부호화 단위들(620a, 620b, 620c) 또는 홀수개의 부호화 단위들(660a, 660b, 660c)의 위치에 대한 정보를 이용하여 가운데 부호화 단위(620b)또는 가운데 부호화 단위(660b)를 결정할 수 있다. 예를 들면 영상 복호화 장치는 부호화 단위들(620a, 620b, 620c)에 포함되는 소정의 샘플의 위치를 나타내는 정보에 기초하여 부호화 단위들(620a, 620b, 620c)의 위치를 결정함으로써 가운데에 위치하는 부호화 단위(620b)를 결 정할 수 있다. 구체적으로, 영상 복호화 장치는 부호화 단위들(620a, 620b, 620c)의 좌측 상단의 샘플 (630a, 630b, 630c)의 위치를 나타내는 정보에 기초하여 부호화 단위들(620a, 620b, 620c)의 위치를 결정함으로 써 가운데에 위치하는 부호화 단위(620b)를 결정할 수 있다. 일 실시예에 따라 부호화 단위들(620a, 620b, 620c)에 각각 포함되는 좌측 상단의 샘플(630a, 630b, 630c)의 위치를 나타내는 정보는 부호화 단위들(620a, 620b, 620c)의 픽쳐 내에서의 위치 또는 좌표에 대한 정보를 포함 할 수 있다. 일 실시예에 따라 부호화 단위들(620a, 620b, 620c)에 각각 포함되는 좌측 상단의 샘플(630a, 630b, 630c)의 위치를 나타내는 정보는 현재 부호화 단위에 포함되는 부호화 단위들(620a, 620b, 620c)의 너비 또는 높이를 나타내는 정보를 포함할 수 있고, 이러한 너비 또는 높이는 부호화 단위들(620a, 620b, 620 c)의 픽쳐 내에서의 좌표 간의 차이를 나타내는 정보에 해당할 수 있다. 즉, 영상 복호화 장치는 부호화 단위들(620a, 620b, 620c)의 픽쳐 내에서의 위치 또는 좌표에 대한 정보를 직접 이용하거나 좌표간의 차이값에 대응하는 부호화 단위의 너비 또는 높이에 대한 정보를 이용함으로써 가운데에 위치하는 부호화 단위(620b)를 결정할 수 있다. 일 실시예에 따라, 상단 부호화 단위(620a)의 좌측 상단의 샘플(630a)의 위치를 나타내는 정보는 (xa, ya) 좌표 를 나타낼 수 있고, 가운데 부호화 단위(620b)의 좌측 상단의 샘플(530b)의 위치를 나타내는 정보는 (xb, yb) 좌표를 나타낼 수 있고, 하단 부호화 단위(620c)의 좌측 상단의 샘플(630c)의 위치를 나타내는 정보는 (xc, yc) 좌표를 나타낼 수 있다. 영상 복호화 장치는 부호화 단위들(620a, 620b, 620c)에 각각 포함되는 좌측 상단 의 샘플(630a, 630b, 630c)의 좌표를 이용하여 가운데 부호화 단위(620b)를 결정할 수 있다. 예를 들면, 좌측 상단의 샘플(630a, 630b, 630c)의 좌표를 오름차순 또는 내림차순으로 정렬하였을 때, 가운데에 위치하는 샘플 (630b)의 좌표인 (xb, yb)를 포함하는 부호화 단위(620b)를 현재 부호화 단위가 분할되어 결정된 부호화 단위들(620a, 620b, 620c) 중 가운데에 위치하는 부호화 단위로 결정할 수 있다. 다만 좌측 상단의 샘플(630a, 630b, 630c)의 위치를 나타내는 좌표는 픽쳐 내에서의 절대적인 위치를 나타내는 좌표를 나타낼 수 있고, 나아 가 상단 부호화 단위(620a)의 좌측 상단의 샘플(630a)의 위치를 기준으로, 가운데 부호화 단위(620b)의 좌측 상 단의 샘플(630b)의 상대적 위치를 나타내는 정보인 (dxb, dyb)좌표, 하단 부호화 단위(620c)의 좌측 상단의 샘 플(630c)의 상대적 위치를 나타내는 정보인 (dxc, dyc)좌표를 이용할 수도 있다. 또한 부호화 단위에 포함되는 샘플의 위치를 나타내는 정보로서 해당 샘플의 좌표를 이용함으로써 소정 위치의 부호화 단위를 결정하는 방법 이 상술한 방법으로 한정하여 해석되어서는 안되고, 샘플의 좌표를 이용할 수 있는 다양한 산술적 방법으로 해 석되어야 한다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위를 복수개의 부호화 단위들(620a, 620b, 620c)로 분할할 수 있고, 부호화 단위들(620a, 620b, 620c) 중 소정의 기준에 따라 부호화 단위를 선택할 수 있 다. 예를 들면, 영상 복호화 장치는 부호화 단위들(620a, 620b, 620c) 중 크기가 다른 부호화 단위(620b) 를 선택할 수 있다. 일 실시예에 따라 영상 복호화 장치는 상단 부호화 단위(620a)의 좌측 상단의 샘플(630a)의 위치를 나타내 는 정보인 (xa, ya) 좌표, 가운데 부호화 단위(620b)의 좌측 상단의 샘플(630b)의 위치를 나타내는 정보인 (xb, yb) 좌표, 하단 부호화 단위(620c)의 좌측 상단의 샘플(630c)의 위치를 나타내는 정보인 (xc, yc) 좌표를 이용 하여 부호화 단위들(620a, 620b, 620c) 각각의 너비 또는 높이를 결정할 수 있다. 영상 복호화 장치는 부 호화 단위들(620a, 620b, 620c)의 위치를 나타내는 좌표인 (xa, ya), (xb, yb), (xc, yc)를 이용하여 부호화 단위들(620a, 620b, 620c) 각각의 크기를 결정할 수 있다. 일 실시예에 따라, 영상 복호화 장치는 상단 부 호화 단위(620a)의 너비를 현재 부호화 단위의 너비로 결정할 수 있다. 영상 복호화 장치는 상단 부 호화 단위(620a)의 높이를 yb-ya로 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 가운데 부호화 단위(620b)의 너비를 현재 부호화 단위의 너비로 결정할 수 있다. 영상 복호화 장치는 가운데 부호화 단위(620b)의 높이를 yc-yb로 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 하단 부호화 단위의 너비 또는 높이는 현재 부호화 단위의 너비 또는 높이와 상단 부호화 단위(620a) 및 가운데 부호화 단위(620b) 의 너비 및 높이를 이용하여 결정할 수 있다. 영상 복호화 장치는 결정된 부호화 단위들(620a, 620b, 620c)의 너비 및 높이에 기초하여 다른 부호화 단위와 다른 크기를 갖는 부호화 단위를 결정할 수 있다. 도 6을 참조하면, 영상 복호화 장치는 상단 부호화 단위(620a) 및 하단 부호화 단위(620c)의 크기와 다른 크기를 가지는 가운데 부호화 단위(620b)를 소정 위치의 부호화 단위로 결정할 수 있다. 다만 상술한 영상 복호화 장치 가 다른 부호화 단위와 다른 크기를 갖는 부호화 단위를 결정하는 과정은 샘플 좌표에 기초하여 결정되는 부호화 단위의 크기를 이용하여 소정 위치의 부호화 단위를 결정하는 일 실시예에 불과하므로, 소정의 샘플 좌 표에 따라 결정되는 부호화 단위의 크기를 비교하여 소정 위치의 부호화 단위를 결정하는 다양한 과정이 이용될 수 있다. 영상 복호화 장치는 좌측 부호화 단위(660a)의 좌측 상단의 샘플(670a)의 위치를 나타내는 정보인 (xd, yd) 좌표, 가운데 부호화 단위(660b)의 좌측 상단의 샘플(670b)의 위치를 나타내는 정보인 (xe, ye) 좌표, 우측 부호화 단위(660c)의 좌측 상단의 샘플(670c)의 위치를 나타내는 정보인 (xf, yf) 좌표를 이용하여 부호화 단위 들(660a, 660b, 660c) 각각의 너비 또는 높이를 결정할 수 있다. 영상 복호화 장치는 부호화 단위들(660a, 660b, 660c)의 위치를 나타내는 좌표인 (xd, yd), (xe, ye), (xf, yf)를 이용하여 부호화 단위들(660a, 660b, 660c) 각각의 크기를 결정할 수 있다. 일 실시예에 따라, 영상 복호화 장치는 좌측 부호화 단위(660a)의 너비를 xe-xd로 결정할 수 있다. 영상 복호화 장치는 좌측 부호화 단위(660a)의 높이를 현재 부호화 단위의 높이로 결정할 수 있다. 일 실 시예에 따라 영상 복호화 장치는 가운데 부호화 단위(660b)의 너비를 xf-xe로 결정할 수 있다. 영상 복호 화 장치는 가운데 부호화 단위(660b)의 높이를 현재 부호화 단위의 높이로 결정할 수 있다. 일 실시 예에 따라 영상 복호화 장치는 우측 부호화 단위(660c)의 너비 또는 높이는 현재 부호화 단위의 너비또는 높이와 좌측 부호화 단위(660a) 및 가운데 부호화 단위(660b)의 너비 및 높이를 이용하여 결정할 수 있다. 영상 복호화 장치는 결정된 부호화 단위들(660a, 660b, 660c)의 너비 및 높이에 기초하여 다른 부호화 단 위와 다른 크기를 갖는 부호화 단위를 결정할 수 있다. 도 6을 참조하면, 영상 복호화 장치는 좌측 부호화 단위(660a) 및 우측 부호화 단위(660c)의 크기와 다른 크기를 가지는 가운데 부호화 단위(660b)를 소정 위치의 부호화 단위로 결정할 수 있다. 다만 상술한 영상 복호화 장치가 다른 부호화 단위와 다른 크기를 갖는 부 호화 단위를 결정하는 과정은 샘플 좌표에 기초하여 결정되는 부호화 단위의 크기를 이용하여 소정 위치의 부호 화 단위를 결정하는 일 실시예에 불과하므로, 소정의 샘플 좌표에 따라 결정되는 부호화 단위의 크기를 비교하 여 소정 위치의 부호화 단위를 결정하는 다양한 과정이 이용될 수 있다. 다만 부호화 단위의 위치를 결정하기 위하여 고려하는 샘플의 위치는 상술한 좌측 상단으로 한정하여 해석되어 서는 안되고 부호화 단위에 포함되는 임의의 샘플의 위치에 대한 정보가 이용될 수 있는 것으로 해석될 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위의 형태를 고려하여, 현재 부호화 단위가 분할되어 결정되는 홀수개의 부호화 단위들 중 소정 위치의 부호화 단위를 선택할 수 있다. 예를 들면, 현재 부호화 단위 가 너비가 높이보다 긴 비-정사각형 형태라면 영상 복호화 장치는 수평 방향에 따라 소정 위치의 부호화 단위를 결정할 수 있다. 즉, 영상 복호화 장치는 수평 방향으로 위치를 달리 하는 부호화 단위들 중 하나 를 결정하여 해당 부호화 단위에 대한 제한을 둘 수 있다. 현재 부호화 단위가 높이가 너비보다 긴 비-정사각형 형태라면 영상 복호화 장치는 수직 방향에 따라 소정 위치의 부호화 단위를 결정할 수 있다. 즉, 영상 복 호화 장치는 수직 방향으로 위치를 달리 하는 부호화 단위들 중 하나를 결정하여 해당 부호화 단위에 대한 제한을 둘 수 있다. 일 실시예에 따라 영상 복호화 장치는 짝수개의 부호화 단위들 중 소정 위치의 부호화 단위를 결정하기 위 하여 짝수개의 부호화 단위들 각각의 위치를 나타내는 정보를 이용할 수 있다. 영상 복호화 장치는 현재 부호화 단위를 분할(바이너리 분할)하여 짝수개의 부호화 단위들을 결정할 수 있고 짝수개의 부호화 단위들의 위치에 대한 정보를 이용하여 소정 위치의 부호화 단위를 결정할 수 있다. 이에 대한 구체적인 과정은 도 6에서 상술한 홀수개의 부호화 단위들 중 소정 위치(예를 들면, 가운데 위치)의 부호화 단위를 결정하는 과정에 대응 하는 과정일 수 있으므로 생략하도록 한다. 일 실시예에 따라, 비-정사각형 형태의 현재 부호화 단위를 복수개의 부호화 단위로 분할한 경우, 복수개의 부 호화 단위들 중 소정 위치의 부호화 단위를 결정하기 위하여 분할 과정에서 소정 위치의 부호화 단위에 대한 소 정의 정보를 이용할 수 있다. 예를 들면 영상 복호화 장치는 현재 부호화 단위가 복수개로 분할된 부호화 단위들 중 가운데에 위치하는 부호화 단위를 결정하기 위하여 분할 과정에서 가운데 부호화 단위에 포함된 샘플 에 저장된 블록 형태 정보 및 분할 형태 모드 정보 중 적어도 하나를 이용할 수 있다. 도 6을 참조하면 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 현재 부호화 단위를 복수개의 부호화 단위들(620a, 620b, 620c)로 분할할 수 있으며, 복수개의 부호화 단위들(620a, 620b, 620c) 중 가운데 에 위치하는 부호화 단위(620b)를 결정할 수 있다. 나아가 영상 복호화 장치는 분할 형태 모드 정보가 획 득되는 위치를 고려하여, 가운데에 위치하는 부호화 단위(620b)를 결정할 수 있다. 즉, 현재 부호화 단위 의 분할 형태 모드 정보는 현재 부호화 단위의 가운데에 위치하는 샘플에서 획득될 수 있으며, 상기 분할 형태 모드 정보에 기초하여 현재 부호화 단위가 복수개의 부호화 단위들(620a, 620b, 620c)로 분할된 경우 상기 샘플을 포함하는 부호화 단위(620b)를 가운데에 위치하는 부호화 단위로 결정할 수 있다. 다만 가운데에 위치하는 부호화 단위로 결정하기 위해 이용되는 정보가 분할 형태 모드 정보로 한정하여 해석되어서 는 안되고, 다양한 종류의 정보가 가운데에 위치하는 부호화 단위를 결정하는 과정에서 이용될 수 있다. 일 실시예에 따라 소정 위치의 부호화 단위를 식별하기 위한 소정의 정보는, 결정하려는 부호화 단위에 포함되 는 소정의 샘플에서 획득될 수 있다. 도 6을 참조하면, 영상 복호화 장치는 현재 부호화 단위가 분할 되어 결정된 복수개의 부호화 단위들(620a, 620b, 620c) 중 소정 위치의 부호화 단위(예를 들면, 복수개로 분할 된 부호화 단위 중 가운데에 위치하는 부호화 단위)를 결정하기 위하여 현재 부호화 단위 내의 소정 위치 의 샘플(예를 들면, 현재 부호화 단위의 가운데에 위치하는 샘플)에서 획득되는 분할 형태 모드 정보를 이 용할 수 있다. 즉, 영상 복호화 장치는 현재 부호화 단위의 블록 형태를 고려하여 상기 소정 위치의 샘플을 결정할 수 있고, 영상 복호화 장치는 현재 부호화 단위가 분할되어 결정되는 복수개의 부호화 단위들(620a, 620b, 620c) 중, 소정의 정보(예를 들면, 분할 형태 모드 정보)가 획득될 수 있는 샘플이 포함된 부호화 단위(620b)를 결정하여 소정의 제한을 둘 수 있다. 도 6을 참조하면 일 실시예에 따라 영상 복호화 장치는 소정의 정보가 획득될 수 있는 샘플로서 현재 부호화 단위의 가운데에 위치하는 샘플을 결정 할 수 있고, 영상 복호화 장치는 이러한 샘플이 포함되는 부호화 단위(620b)를 복호화 과정에서의 소 정의 제한을 둘 수 있다. 다만 소정의 정보가 획득될 수 있는 샘플의 위치는 상술한 위치로 한정하여 해석되어 서는 안되고, 제한을 두기 위해 결정하려는 부호화 단위(620b)에 포함되는 임의의 위치의 샘플들로 해석될 수 있다. 일 실시예에 따라 소정의 정보가 획득될 수 있는 샘플의 위치는 현재 부호화 단위의 형태에 따라 결정될 수 있다. 일 실시예에 따라 블록 형태 정보는 현재 부호화 단위의 형태가 정사각형인지 또는 비-정사각형인지 여부를 결정할 수 있고, 형태에 따라 소정의 정보가 획득될 수 있는 샘플의 위치를 결정할 수 있다. 예를 들면, 영상 복호화 장치는 현재 부호화 단위의 너비에 대한 정보 및 높이에 대한 정보 중 적어도 하나를 이용하 여 현재 부호화 단위의 너비 및 높이 중 적어도 하나를 반으로 분할하는 경계 상에 위치하는 샘플을 소정의 정 보가 획득될 수 있는 샘플로 결정할 수 있다. 또다른 예를 들면, 영상 복호화 장치는 현재 부호화 단위에 관련된 블록 형태 정보가 비-정사각형 형태임을 나타내는 경우, 현재 부호화 단위의 긴 변을 반으로 분할하는 경계에 인접하는 샘플 중 하나를 소정의 정보가 획득될 수 있는 샘플로 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위를 복수개의 부호화 단위로 분할한 경우, 복수개의 부호화 단위들 중 소정 위치의 부호화 단위를 결정하기 위하여, 분할 형태 모드 정보를 이용할 수 있다. 일 실 시예에 따라 영상 복호화 장치는 분할 형태 모드 정보를 부호화 단위에 포함된 소정 위치의 샘플에서 획득 할 수 있고, 영상 복호화 장치는 현재 부호화 단위가 분할되어 생성된 복수개의 부호화 단위들을 복수개의 부호화 단위 각각에 포함된 소정 위치의 샘플로부터 획득되는 분할 형태 모드 정보를 이용하여 분할할 수 있다. 즉, 부호화 단위는 부호화 단위 각각에 포함된 소정 위치의 샘플에서 획득되는 분할 형태 모드 정보를 이용하여 재귀적으로 분할될 수 있다. 부호화 단위의 재귀적 분할 과정에 대하여는 도 5를 통해 상술하였으므로 자세한 설명은 생략하도록 한다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위를 분할하여 적어도 하나의 부호화 단위를 결정할 수 있고, 이러한 적어도 하나의 부호화 단위가 복호화되는 순서를 소정의 블록(예를 들면, 현재 부호화 단위)에 따라 결정할 수 있다. 도 7은 일 실시예에 따라 영상 복호화 장치가 현재 부호화 단위를 분할하여 복수개의 부호화 단위들을 결 정하는 경우, 복수개의 부호화 단위들이 처리되는 순서를 도시한다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보에 따라 제1 부호화 단위를 수직 방향으로 분할하여 제2 부호화 단위(710a, 710b)를 결정하거나 제1 부호화 단위를 수평 방향으로 분할하여 제2 부호 화 단위(730a, 730b)를 결정하거나 제1 부호화 단위를 수직 방향 및 수평 방향으로 분할하여 제2 부호화 단위(750a, 750b, 750c, 750d)를 결정할 수 있다. 도 7을 참조하면, 영상 복호화 장치는 제1 부호화 단위를 수직 방향으로 분할하여 결정된 제2 부호화 단위(710a, 710b)를 수평 방향(710c)으로 처리되도록 순서를 결정할 수 있다. 영상 복호화 장치는 제1 부 호화 단위를 수평 방향으로 분할하여 결정된 제2 부호화 단위(730a, 730b)의 처리 순서를 수직 방향(730 c)으로 결정할 수 있다. 영상 복호화 장치는 제1 부호화 단위를 수직 방향 및 수평 방향으로 분할하 여 결정된 제2 부호화 단위(750a, 750b, 750c, 750d)를 하나의 행에 위치하는 부호화 단위들이 처리된 후 다음 행에 위치하는 부호화 단위들이 처리되는 소정의 순서(예를 들면, 래스터 스캔 순서((raster scan order) 또는 z 스캔 순서(z scan order)(750e) 등)에 따라 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 부호화 단위들을 재귀적으로 분할할 수 있다. 도 7을 참조하면, 영 상 복호화 장치는 제1 부호화 단위를 분할하여 복수개의 부호화 단위들(710a, 710b, 730a, 730b, 750a, 750b, 750c, 750d)을 결정할 수 있고, 결정된 복수개의 부호화 단위들(710a, 710b, 730a, 730b, 750a, 750b, 750c, 750d) 각각을 재귀적으로 분할할 수 있다. 복수개의 부호화 단위들(710a, 710b, 730a, 730b, 750a, 750b, 750c, 750d)을 분할하는 방법은 제1 부호화 단위를 분할하는 방법에 대응하는 방법이 될 수 있다. 이에 따라 복수개의 부호화 단위들(710a, 710b, 730a, 730b, 750a, 750b, 750c, 750d)은 각각 독립적으 로 복수개의 부호화 단위들로 분할될 수 있다. 도 7을 참조하면 영상 복호화 장치는 제1 부호화 단위(70 0)를 수직 방향으로 분할하여 제2 부호화 단위(710a, 710b)를 결정할 수 있고, 나아가 제2 부호화 단위(710a, 710b) 각각을 독립적으로 분할하거나 분할하지 않는 것으로 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 좌측의 제2 부호화 단위(710a)를 수평 방향으로 분할하여 제3 부호 화 단위(720a, 720b)로 분할할 수 있고, 우측의 제2 부호화 단위(710b)는 분할하지 않을 수 있다. 일 실시예에 따라 부호화 단위들의 처리 순서는 부호화 단위의 분할 과정에 기초하여 결정될 수 있다. 다시 말 해, 분할된 부호화 단위들의 처리 순서는 분할되기 직전의 부호화 단위들의 처리 순서에 기초하여 결정될 수 있 다. 영상 복호화 장치는 좌측의 제2 부호화 단위(710a)가 분할되어 결정된 제3 부호화 단위(720a, 720b)가 처리되는 순서를 우측의 제2 부호화 단위(710b)와 독립적으로 결정할 수 있다. 좌측의 제2 부호화 단위(710a)가 수평 방향으로 분할되어 제3 부호화 단위(720a, 720b)가 결정되었으므로 제3 부호화 단위(720a, 720b)는 수직 방향(720c)으로 처리될 수 있다. 또한 좌측의 제2 부호화 단위(710a) 및 우측의 제2 부호화 단위(710b)가 처리 되는 순서는 수평 방향(710c)에 해당하므로, 좌측의 제2 부호화 단위(710a)에 포함되는 제3 부호화 단위(720a, 720b)가 수직 방향(720c)으로 처리된 후에 우측 부호화 단위(710b)가 처리될 수 있다. 상술한 내용은 부호화 단 위들이 각각 분할 전의 부호화 단위에 따라 처리 순서가 결정되는 과정을 설명하기 위한 것이므로, 상술한 실시 예에 한정하여 해석되어서는 안되고, 다양한 형태로 분할되어 결정되는 부호화 단위들이 소정의 순서에 따라 독 립적으로 처리될 수 있는 다양한 방법으로 이용되는 것으로 해석되어야 한다. 도 8은 일 실시예에 따라 영상 복호화 장치가 소정의 순서로 부호화 단위가 처리될 수 없는 경우, 현재 부 호화 단위가 홀수개의 부호화 단위로 분할되는 것임을 결정하는 과정을 도시한다. 일 실시예에 따라 영상 복호화 장치는 획득된 분할 형태 모드 정보에 기초하여 현재 부호화 단위가 홀수개 의 부호화 단위들로 분할되는 것을 결정할 수 있다. 도 8을 참조하면 정사각형 형태의 제1 부호화 단위가 비-정사각형 형태의 제2 부호화 단위(810a, 810b)로 분할될 수 있고, 제2 부호화 단위(810a, 810b)는 각각 독립 적으로 제3 부호화 단위(820a, 820b, 820c, 820d, 820e)로 분할될 수 있다. 일 실시예에 따라 영상 복호화 장치 는 제2 부호화 단위 중 좌측 부호화 단위(810a)는 수평 방향으로 분할하여 복수개의 제3 부호화 단위 (820a, 820b)를 결정할 수 있고, 우측 부호화 단위(810b)는 홀수개의 제3 부호화 단위(820c, 820d, 820e)로 분 할할 수 있다. 일 실시예에 따라 영상 복호화 장치는 제3 부호화 단위들(820a, 820b, 820c, 820d, 820e)이 소정의 순서 로 처리될 수 있는지 여부를 판단하여 홀수개로 분할된 부호화 단위가 존재하는지를 결정할 수 있다. 도 8을 참 조하면, 영상 복호화 장치는 제1 부호화 단위를 재귀적으로 분할하여 제3 부호화 단위(820a, 820b, 820c, 820d, 820e)를 결정할 수 있다. 영상 복호화 장치는 블록 형태 정보 및 분할 형태 모드 정보 중 적 어도 하나에 기초하여, 제1 부호화 단위, 제2 부호화 단위(810a, 810b) 또는 제3 부호화 단위(820a, 820b, 820c, 820d, 820e)가 분할되는 형태 중 홀수개의 부호화 단위로 분할되는지 여부를 결정할 수 있다. 예를 들면, 제2 부호화 단위(810a, 810b) 중 우측에 위치하는 부호화 단위가 홀수개의 제3 부호화 단위(820c, 820d, 820e)로 분할될 수 있다. 제1 부호화 단위에 포함되는 복수개의 부호화 단위들이 처리되는 순서는 소정의 순서(예를 들면, z-스캔 순서(z-scan order))가 될 수 있고, 영상 복호화 장치는 우측 제2 부호화 단 위(810b)가 홀수개로 분할되어 결정된 제3 부호화 단위(820c, 820d, 820e)가 상기 소정의 순서에 따라 처리될 수 있는 조건을 만족하는지를 판단할 수 있다. 일 실시예에 따라 영상 복호화 장치는 제1 부호화 단위에 포함되는 제3 부호화 단위(820a, 820b, 820c, 820d, 820e)가 소정의 순서에 따라 처리될 수 있는 조건을 만족하는지를 결정할 수 있으며, 상기 조건은 제3 부호화 단위(820a, 820b, 820c, 820d, 820e)의 경계에 따라 제2 부호화 단위(810a, 810b)의 너비 및 높이 중 적어도 하나를 반으로 분할되는지 여부와 관련된다. 예를 들면 비-정사각형 형태의 좌측 제2 부호화 단위 (810a)의 높이를 반으로 분할하여 결정되는 제3 부호화 단위(820a, 820b)는 조건을 만족할 수 있다. 우측 제2 부호화 단위(810b)를 3개의 부호화 단위로 분할하여 결정되는 제3 부호화 단위(820c, 820d, 820e)들의 경계가 우측 제2 부호화 단위(810b)의 너비 또는 높이를 반으로 분할하지 못하므로 제3 부호화 단위(820c, 820d, 820 e)는 조건을 만족하지 못하는 것으로 결정될 수 있다. 영상 복호화 장치는 이러한 조건 불만족의 경우 스 캔 순서의 단절(disconnection)로 판단하고, 판단 결과에 기초하여 우측 제2 부호화 단위(810b)는 홀수개의 부 호화 단위로 분할되는 것으로 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 홀수개의 부호화 단 위로 분할되는 경우 분할된 부호화 단위들 중 소정 위치의 부호화 단위에 대하여 소정의 제한을 둘 수 있으며, 이러한 제한 내용 또는 소정 위치 등에 대하여는 다양한 실시예를 통해 상술하였으므로 자세한 설명은 생략하도 록 한다. 도 9는 일 실시예에 따라 영상 복호화 장치가 제1 부호화 단위를 분할하여 적어도 하나의 부호화 단 위를 결정하는 과정을 도시한다. 일 실시예에 따라 영상 복호화 장치는 비트스트림 획득부를 통해 획득한 분할 형태 모드 정보에 기초 하여 제1 부호화 단위를 분할할 수 있다. 정사각형 형태의 제1 부호화 단위는 4개의 정사각형 형태를 가지는 부호화 단위로 분할되거나 또는 비-정사각형 형태의 복수개의 부호화 단위로 분할할 수 있다. 예를 들면 도 9를 참조하면, 제1 부호화 단위는 정사각형이고 분할 형태 모드 정보가 비-정사각형의 부호화 단위로 분할됨을 나타내는 경우 영상 복호화 장치는 제1 부호화 단위를 복수개의 비-정사각형의 부호화 단위 들로 분할할 수 있다. 구체적으로, 분할 형태 모드 정보가 제1 부호화 단위를 수평 방향 또는 수직 방향으 로 분할하여 홀수개의 부호화 단위를 결정하는 것을 나타내는 경우, 영상 복호화 장치는 정사각형 형태의 제1 부호화 단위를 홀수개의 부호화 단위들로서 수직 방향으로 분할되어 결정된 제2 부호화 단위(910a, 910b, 910c) 또는 수평 방향으로 분할되어 결정된 제2 부호화 단위(920a, 920b, 920c)로 분할할 수 있다. 일 실시예에 따라 영상 복호화 장치는 제1 부호화 단위에 포함되는 제2 부호화 단위(910a, 910b, 910c, 920a, 920b, 920c)가 소정의 순서에 따라 처리될 수 있는 조건을 만족하는지를 결정할 수 있으며, 상기 조건은 제2 부호화 단위(910a, 910b, 910c, 920a, 920b, 920c)의 경계에 따라 제1 부호화 단위의 너비 및 높이 중 적어도 하나를 반으로 분할되는지 여부와 관련된다. 도 9를 참조하면 정사각형 형태의 제1 부호화 단위 를 수직 방향으로 분할하여 결정되는 제2 부호화 단위(910a, 910b, 910c)들의 경계가 제1 부호화 단위 의 너비를 반으로 분할하지 못하므로 제1 부호화 단위는 소정의 순서에 따라 처리될 수 있는 조건을 만족하지 못하는 것으로 결정될 수 있다. 또한 정사각형 형태의 제1 부호화 단위를 수평 방향으로 분할하 여 결정되는 제2 부호화 단위(920a, 920b, 920c)들의 경계가 제1 부호화 단위의 높이를 반으로 분할하지 못하므로 제1 부호화 단위는 소정의 순서에 따라 처리될 수 있는 조건을 만족하지 못하는 것으로 결정될 수 있다. 영상 복호화 장치는 이러한 조건 불만족의 경우 스캔 순서의 단절(disconnection)로 판단하고, 판단 결과에 기초하여 제1 부호화 단위는 홀수개의 부호화 단위로 분할되는 것으로 결정할 수 있다. 일 실 시예에 따라 영상 복호화 장치는 홀수개의 부호화 단위로 분할되는 경우 분할된 부호화 단위들 중 소정 위 치의 부호화 단위에 대하여 소정의 제한을 둘 수 있으며, 이러한 제한 내용 또는 소정 위치 등에 대하여는 다양 한 실시예를 통해 상술하였으므로 자세한 설명은 생략하도록 한다. 일 실시예에 따라, 영상 복호화 장치는 제1 부호화 단위를 분할하여 다양한 형태의 부호화 단위들을 결정 할 수 있다. 도 9를 참조하면, 영상 복호화 장치는 정사각형 형태의 제1 부호화 단위, 비-정사각형 형태의 제1 부 호화 단위(930 또는 950)를 다양한 형태의 부호화 단위들로 분할할 수 있다. 도 10은 일 실시예에 따라 영상 복호화 장치가 제1 부호화 단위가 분할되어 결정된 비-정사각형 형 태의 제2 부호화 단위가 소정의 조건을 만족하는 경우 제2 부호화 단위가 분할될 수 있는 형태가 제한되는 것을 도시한다. 일 실시예에 따라 영상 복호화 장치는 비트스트림 획득부를 통해 획득한 분할 형태 모드 정보에 기초 하여 정사각형 형태의 제1 부호화 단위를 비-정사각형 형태의 제2 부호화 단위(1010a, 1010b, 1020a, 1020b)로 분할하는 것으로 결정할 수 있다. 제2 부호화 단위(1010a, 1010b, 1020a, 1020b)는 독립적으로 분할 될 수 있다. 이에 따라 영상 복호화 장치는 제2 부호화 단위(1010a, 1010b, 1020a, 1020b) 각각에 관련된 분할 형태 모드 정보에 기초하여 복수개의 부호화 단위로 분할하거나 분할하지 않는 것을 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 수직 방향으로 제1 부호화 단위가 분할되어 결정된 비-정사각형 형태의 좌측 제2 부호화 단위(1010a)를 수평 방향으로 분할하여 제3 부호화 단위(1012a, 1012b)를 결정할 수 있 다. 다만 영상 복호화 장치는 좌측 제2 부호화 단위(1010a)를 수평 방향으로 분할한 경우, 우측 제2 부호 화 단위(1010b)는 좌측 제2 부호화 단위(1010a)가 분할된 방향과 동일하게 수평 방향으로 분할될 수 없도록 제 한할 수 있다. 만일 우측 제2 부호화 단위(1010b)가 동일한 방향으로 분할되어 제3 부호화 단위(1014a, 1014b) 가 결정된 경우, 좌측 제2 부호화 단위(1010a) 및 우측 제2 부호화 단위(1010b)가 수평 방향으로 각각 독립적으 로 분할됨으로써 제3 부호화 단위(1012a, 1012b, 1014a, 1014b)가 결정될 수 있다. 하지만 이는 영상 복호화 장 치가 분할 형태 모드 정보에 기초하여 제1 부호화 단위를 4개의 정사각형 형태의 제2 부호화 단위 (1030a, 1030b, 1030c, 1030d)로 분할한 것과 동일한 결과이며 이는 영상 복호화 측면에서 비효율적일 수 있다. 일 실시예에 따라 영상 복호화 장치는 수평 방향으로 제1 부호화 단위가 분할되어 결정된 비-정사각 형 형태의 제2 부호화 단위(1020a 또는 1020b)를 수직 방향으로 분할하여 제3 부호화 단위(1022a, 1022b, 1024a, 1024b)를 결정할 수 있다. 다만 영상 복호화 장치는 제2 부호화 단위 중 하나(예를 들면 상단 제2 부호화 단위(1020a))를 수직 방향으로 분할한 경우, 상술한 이유에 따라 다른 제2 부호화 단위(예를 들면 하단 부호화 단위(1020b))는 상단 제2 부호화 단위(1020a)가 분할된 방향과 동일하게 수직 방향으로 분할될 수 없도록 제한할 수 있다. 도 11은 일 실시예에 따라 분할 형태 모드 정보가 4개의 정사각형 형태의 부호화 단위로 분할하는 것을 나타낼 수 없는 경우, 영상 복호화 장치가 정사각형 형태의 부호화 단위를 분할하는 과정을 도시한다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 제1 부호화 단위를 분할하여 제2 부호화 단위(1110a, 1110b, 1120a, 1120b 등)를 결정할 수 있다. 분할 형태 모드 정보에는 부호화 단위가 분할될 수 있는 다양한 형태에 대한 정보가 포함될 수 있으나, 다양한 형태에 대한 정보에는 정사각형 형태의 4 개의 부호화 단위로 분할하기 위한 정보가 포함될 수 없는 경우가 있다. 이러한 분할 형태 모드 정보에 따르면, 영상 복호화 장치는 정사각형 형태의 제1 부호화 단위를 4개의 정사각형 형태의 제2 부호화 단위 (1130a, 1130b, 1130c, 1130d)로 분할하지 못한다. 분할 형태 모드 정보에 기초하여 영상 복호화 장치는 비-정사각형 형태의 제2 부호화 단위(1110a, 1110b, 1120a, 1120b 등)를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 비-정사각형 형태의 제2 부호화 단위(1110a, 1110b, 1120a, 1120b 등)를 각각 독립적으로 분할할 수 있다. 재귀적인 방법을 통해 제2 부호화 단위(1110a, 1110b, 1120a, 1120b 등) 각각이 소정의 순서대로 분할될 수 있으며, 이는 분할 형태 모드 정보에 기초하여 제1 부호화 단위가 분할되는 방법에 대응하는 분할 방법일 수 있다. 예를 들면 영상 복호화 장치는 좌측 제2 부호화 단위(1110a)가 수평 방향으로 분할되어 정사각형 형태의 제3 부호화 단위(1112a, 1112b)를 결정할 수 있고, 우측 제2 부호화 단위(1110b)가 수평 방향으로 분할되어 정 사각형 형태의 제3 부호화 단위(1114a, 1114b)를 결정할 수 있다. 나아가 영상 복호화 장치는 좌측 제2 부 호화 단위(1110a) 및 우측 제2 부호화 단위(1110b) 모두 수평 방향으로 분할되어 정사각형 형태의 제3 부호화 단위(1116a, 1116b, 1116c, 1116d)를 결정할 수도 있다. 이러한 경우 제1 부호화 단위가 4개의 정사각형 형태의 제2 부호화 단위(1130a, 1130b, 1130c, 1130d)로 분할된 것과 동일한 형태로 부호화 단위가 결정될 수 있다. 또 다른 예를 들면 영상 복호화 장치는 상단 제2 부호화 단위(1120a)가 수직 방향으로 분할되어 정사각형 형태의 제3 부호화 단위(1122a, 1122b)를 결정할 수 있고, 하단 제2 부호화 단위(1120b)가 수직 방향으로 분할 되어 정사각형 형태의 제3 부호화 단위(1124a, 1124b)를 결정할 수 있다. 나아가 영상 복호화 장치는 상단 제2 부호화 단위(1120a) 및 하단 제2 부호화 단위(1120b) 모두 수직 방향으로 분할되어 정사각형 형태의 제3 부 호화 단위(1126a, 1126b, 1126a, 1126b)를 결정할 수도 있다. 이러한 경우 제1 부호화 단위가 4개의 정 사각형 형태의 제2 부호화 단위(1130a, 1130b, 1130c, 1130d)로 분할된 것과 동일한 형태로 부호화 단위가 결정 될 수 있다. 도 12는 일 실시예에 따라 복수개의 부호화 단위들 간의 처리 순서가 부호화 단위의 분할 과정에 따라 달라질 수 있음을 도시한 것이다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 제1 부호화 단위를 분할할 수 있다. 블록 형태가 정사각형이고, 분할 형태 모드 정보가 제1 부호화 단위가 수평 방향 및 수직 방향 중 적어도 하나의 방향으로 분할됨을 나타내는 경우, 영상 복호화 장치는 제1 부호화 단위를 분할하 여 제2 부호화 단위(예를 들면, 1210a, 1210b, 1220a, 1220b 등)를 결정할 수 있다. 도 12를 참조하면 제1 부 호화 단위가 수평 방향 또는 수직 방향만으로 분할되어 결정된 비-정사각형 형태의 제2 부호화 단위 (1210a, 1210b, 1220a, 1220b)는 각각에 대한 분할 형태 모드 정보에 기초하여 독립적으로 분할될 수 있다. 예 를 들면 영상 복호화 장치는 제1 부호화 단위가 수직 방향으로 분할되어 생성된 제2 부호화 단위 (1210a, 1210b)를 수평 방향으로 각각 분할하여 제3 부호화 단위(1216a, 1216b, 1216c, 1216d)를 결정할 수 있 고, 제1 부호화 단위가 수평 방향으로 분할되어 생성된 제2 부호화 단위(1220a, 1220b)를 수직 방향으로 각각 분할하여 제3 부호화 단위(1226a, 1226b, 1226c, 1226d)를 결정할 수 있다. 이러한 제2 부호화 단위 (1210a, 1210b, 1220a, 1220b)의 분할 과정은 도 11과 관련하여 상술하였으므로 자세한 설명은 생략하도록 한다. 일 실시예에 따라 영상 복호화 장치는 소정의 순서에 따라 부호화 단위를 처리할 수 있다. 소정의 순서에 따른 부호화 단위의 처리에 대한 특징은 도 7과 관련하여 상술하였으므로 자세한 설명은 생략하도록 한다. 도 12를 참조하면 영상 복호화 장치는 정사각형 형태의 제1 부호화 단위를 분할하여 4개의 정사각형 형 태의 제3 부호화 단위(1216a, 1216b, 1216c, 1216d, 1226a, 1226b, 1226c, 1226d)를 결정할 수 있다. 일 실시 예에 따라 영상 복호화 장치는 제1 부호화 단위가 분할되는 형태에 따라 제3 부호화 단위(1216a,1216b, 1216c, 1216d, 1226a, 1226b, 1226c, 1226d)의 처리 순서를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 수직 방향으로 분할되어 생성된 제2 부호화 단위(1210a, 1210b)를 수평 방향으로 각각 분할하여 제3 부호화 단위(1216a, 1216b, 1216c, 1216d)를 결정할 수 있고, 영상 복호화 장 치는 좌측 제2 부호화 단위(1210a)에 포함되는 제3 부호화 단위(1216a, 1216c)를 수직 방향으로 먼저 처리 한 후, 우측 제2 부호화 단위(1210b)에 포함되는 제3 부호화 단위(1216b, 1216d)를 수직 방향으로 처리하는 순 서에 따라 제3 부호화 단위(1216a, 1216b, 1216c, 1216d)를 처리할 수 있다. 일 실시예에 따라 영상 복호화 장치는 수평 방향으로 분할되어 생성된 제2 부호화 단위(1220a, 1220b)를 수직 방향으로 각각 분할하여 제3 부호화 단위(1226a, 1226b, 1226c, 1226d)를 결정할 수 있고, 영상 복호화 장 치는 상단 제2 부호화 단위(1220a)에 포함되는 제3 부호화 단위(1226a, 1226b)를 수평 방향으로 먼저 처리 한 후, 하단 제2 부호화 단위(1220b)에 포함되는 제3 부호화 단위(1226c, 1226d)를 수평 방향으로 처리하는 순 서에 따라 제3 부호화 단위(1226a, 1226b, 1226c, 1226d)를 처리할 수 있다. 도 12를 참조하면, 제2 부호화 단위(1210a, 1210b, 1220a, 1220b)가 각각 분할되어 정사각형 형태의 제3 부호화 단위(1216a, 1216b, 1216c, 1216d, 1226a, 1226b, 1226c, 1226d)가 결정될 수 있다. 수직 방향으로 분할되어 결정된 제2 부호화 단위(1210a, 1210b) 및 수평 방향으로 분할되어 결정된 제2 부호화 단위(1220a, 1220b)는 서 로 다른 형태로 분할된 것이지만, 이후에 결정되는 제3 부호화 단위(1216a, 1216b, 1216c, 1216d, 1226a, 1226b, 1226c, 1226d)에 따르면 결국 동일한 형태의 부호화 단위들로 제1 부호화 단위가 분할된 결과가 된다. 이에 따라 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 상이한 과정을 통해 재귀적으로 부 호화 단위를 분할함으로써 결과적으로 동일한 형태의 부호화 단위들을 결정하더라도, 동일한 형태로 결정된 복 수개의 부호화 단위들을 서로 다른 순서로 처리할 수 있다. 도 13은 일 실시예에 따라 부호화 단위가 재귀적으로 분할되어 복수개의 부호화 단위가 결정되는 경우, 부호화 단위의 형태 및 크기가 변함에 따라 부호화 단위의 심도가 결정되는 과정을 도시한다. 일 실시예에 따라 영상 복호화 장치는 부호화 단위의 심도를 소정의 기준에 따라 결정할 수 있다. 예를 들 면 소정의 기준은 부호화 단위의 긴 변의 길이가 될 수 있다. 영상 복호화 장치는 현재 부호화 단위의 긴 변의 길이가 분할되기 전의 부호화 단위의 긴 변의 길이보다 2n (n>0) 배로 분할된 경우, 현재 부호화 단위의 심도는 분할되기 전의 부호화 단위의 심도보다 n만큼 심도가 증가된 것으로 결정할 수 있다. 이하에서는 심도가 증가된 부호화 단위를 하위 심도의 부호화 단위로 표현하도록 한다. 도 13을 참조하면, 일 실시예에 따라 정사각형 형태임을 나타내는 블록 형태 정보(예를 들면 블록 형태 정보는 '0: SQUARE'를 나타낼 수 있음)에 기초하여 영상 복호화 장치는 정사각형 형태인 제1 부호화 단위를 분할하여 하위 심도의 제2 부호화 단위, 제3 부호화 단위 등을 결정할 수 있다. 정사각형 형태의 제1 부호화 단위의 크기를 2Nx2N이라고 한다면, 제1 부호화 단위의 너비 및 높이를 1/2배로 분할하 여 결정된 제2 부호화 단위는 NxN의 크기를 가질 수 있다. 나아가 제2 부호화 단위의 너비 및 높이 를 1/2크기로 분할하여 결정된 제3 부호화 단위는 N/2xN/2의 크기를 가질 수 있다. 이 경우 제3 부호화 단위의 너비 및 높이는 제1 부호화 단위의 1/4배에 해당한다. 제1 부호화 단위의 심도가 D인 경우 제1 부호화 단위의 너비 및 높이의 1/2배인 제2 부호화 단위의 심도는 D+1일 수 있고, 제1 부 호화 단위의 너비 및 높이의 1/4배인 제3 부호화 단위의 심도는 D+2일 수 있다. 일 실시예에 따라 비-정사각형 형태를 나타내는 블록 형태 정보(예를 들면 블록 형태 정보는, 높이가 너비보다 긴 비-정사각형임을 나타내는 '1: NS_VER' 또는 너비가 높이보다 긴 비-정사각형임을 나타내는 '2: NS_HOR'를 나타낼 수 있음)에 기초하여, 영상 복호화 장치는 비-정사각형 형태인 제1 부호화 단위(1310 또는 1320)를 분할하여 하위 심도의 제2 부호화 단위(1312 또는 1322), 제3 부호화 단위(1314 또는 1324) 등을 결정할 수 있 다. 영상 복호화 장치는 Nx2N 크기의 제1 부호화 단위의 너비 및 높이 중 적어도 하나를 분할하여 제2 부호화 단위(예를 들면, 1302, 1312, 1322 등)를 결정할 수 있다. 즉, 영상 복호화 장치는 제1 부호화 단 위를 수평 방향으로 분할하여 NxN 크기의 제2 부호화 단위 또는 NxN/2 크기의 제2 부호화 단위 를 결정할 수 있고, 수평 방향 및 수직 방향으로 분할하여 N/2xN 크기의 제2 부호화 단위를 결정할 수도 있다. 일 실시예에 따라 영상 복호화 장치는 2NxN 크기의 제1 부호화 단위 의 너비 및 높이 중 적어도 하 나를 분할하여 제2 부호화 단위(예를 들면, 1302, 1312, 1322 등)를 결정할 수도 있다. 즉, 영상 복호화 장치는 제1 부호화 단위를 수직 방향으로 분할하여 NxN 크기의 제2 부호화 단위 또는 N/2xN 크기 의 제2 부호화 단위를 결정할 수 있고, 수평 방향 및 수직 방향으로 분할하여 NxN/2 크기의 제2 부호화 단위를 결정할 수도 있다. 일 실시예에 따라 영상 복호화 장치는 NxN 크기의 제2 부호화 단위 의 너비 및 높이 중 적어도 하나 를 분할하여 제3 부호화 단위(예를 들면, 1304, 1314, 1324 등)를 결정할 수도 있다. 즉, 영상 복호화 장치 는 제2 부호화 단위를 수직 방향 및 수평 방향으로 분할하여 N/2xN/2 크기의 제3 부호화 단위(130 4)를 결정하거나 N/4xN/2 크기의 제3 부호화 단위를 결정하거나 N/2xN/4 크기의 제3 부호화 단위를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 N/2xN 크기의 제2 부호화 단위의 너비 및 높이 중 적어도 하 나를 분할하여 제3 부호화 단위(예를 들면, 1304, 1314, 1324 등)를 결정할 수도 있다. 즉, 영상 복호화 장치 는 제2 부호화 단위를 수평 방향으로 분할하여 N/2xN/2 크기의 제3 부호화 단위 또는 N/2xN/4 크기의 제3 부호화 단위를 결정하거나 수직 방향 및 수평 방향으로 분할하여 N/4xN/2 크기의 제3 부호화 단위를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 NxN/2 크기의 제2 부호화 단위의 너비 및 높이 중 적어도 하 나를 분할하여 제3 부호화 단위(예를 들면, 1304, 1314, 1324 등)를 결정할 수도 있다. 즉, 영상 복호화 장치 는 제2 부호화 단위를 수직 방향으로 분할하여 N/2xN/2 크기의 제3 부호화 단위 또는 N/4xN/2 크기의 제3 부호화 단위를 결정하거나 수직 방향 및 수평 방향으로 분할하여 N/2xN/4크기의 제3 부호화 단위를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 정사각형 형태의 부호화 단위(예를 들면, 1300, 1302, 1304)를 수평 방향 또는 수직 방향으로 분할할 수 있다. 예를 들면, 2Nx2N 크기의 제1 부호화 단위를 수직 방향으로 분 할하여 Nx2N 크기의 제1 부호화 단위를 결정하거나 수평 방향으로 분할하여 2NxN 크기의 제1 부호화 단위 를 결정할 수 있다. 일 실시예에 따라 심도가 부호화 단위의 가장 긴 변의 길이에 기초하여 결정되는 경 우, 2Nx2N 크기의 제1 부호화 단위가 수평 방향 또는 수직 방향으로 분할되어 결정되는 부호화 단위의 심 도는 제1 부호화 단위의 심도와 동일할 수 있다. 일 실시예에 따라 제3 부호화 단위(1314 또는 1324)의 너비 및 높이는 제1 부호화 단위(1310 또는 1320)의 1/4 배에 해당할 수 있다. 제1 부호화 단위(1310 또는 1320)의 심도가 D인 경우 제1 부호화 단위(1310 또는 1320)의 너비 및 높이의 1/2배인 제2 부호화 단위(1312 또는 1322)의 심도는 D+1일 수 있고, 제1 부호화 단위(1310 또는 1320)의 너비 및 높이의 1/4배인 제3 부호화 단위(1314 또는 1324)의 심도는 D+2일 수 있다. 도 14는 일 실시예에 따라 부호화 단위들의 형태 및 크기에 따라 결정될 수 있는 심도 및 부호화 단위 구분을 위한 인덱스(part index, 이하 PID)를 도시한다. 일 실시예에 따라 영상 복호화 장치는 정사각형 형태의 제1 부호화 단위를 분할하여 다양한 형태의 제2 부호화 단위를 결정할 수 있다. 도 14를 참조하면, 영상 복호화 장치는 분할 형태 모드 정보에 따라 제1 부호화 단위를 수직 방향 및 수평 방향 중 적어도 하나의 방향으로 분할하여 제2 부호화 단위(1402a, 1402b, 1404a, 1404b, 1406a, 1406b, 1406c, 1406d)를 결정할 수 있다. 즉, 영상 복호화 장치는 제1 부호 화 단위에 대한 분할 형태 모드 정보에 기초하여 제2 부호화 단위(1402a, 1402b, 1404a, 1404b, 1406a, 1406b, 1406c, 1406d)를 결정할 수 있다. 일 실시예에 따라 정사각형 형태의 제1 부호화 단위에 대한 분할 형태 모드 정보에 따라 결정되는 제2 부 호화 단위(1402a, 1402b, 1404a, 1404b, 1406a, 1406b, 1406c, 1406d)는 긴 변의 길이에 기초하여 심도가 결정 될 수 있다. 예를 들면, 정사각형 형태의 제1 부호화 단위의 한 변의 길이와 비-정사각형 형태의 제2 부 호화 단위(1402a, 1402b, 1404a, 1404b)의 긴 변의 길이가 동일하므로, 제1 부호화 단위와 비-정사각형 형태의 제2 부호화 단위(1402a, 1402b, 1404a, 1404b)의 심도는 D로 동일하다고 볼 수 있다. 이에 반해 영상 복 호화 장치가 분할 형태 모드 정보에 기초하여 제1 부호화 단위를 4개의 정사각형 형태의 제2 부호화 단위(1406a, 1406b, 1406c, 1406d)로 분할한 경우, 정사각형 형태의 제2 부호화 단위(1406a, 1406b, 1406c, 1406d)의 한 변의 길이는 제1 부호화 단위의 한 변의 길이의 1/2배 이므로, 제2 부호화 단위(1406a, 1406b, 1406c, 1406d)의 심도는 제1 부호화 단위의 심도인 D보다 한 심도 하위인 D+1의 심도일 수 있다. 일 실시예에 따라 영상 복호화 장치는 높이가 너비보다 긴 형태의 제1 부호화 단위를 분할 형태 모 드 정보에 따라 수평 방향으로 분할하여 복수개의 제2 부호화 단위(1412a, 1412b, 1414a, 1414b, 1414c)로 분할할 수 있다. 일 실시예에 따라 영상 복호화 장치는 너비가 높이보다 긴 형태의 제1 부호화 단위를 분할 형태 모드 정보에 따라 수직 방향으로 분할하여 복수개의 제2 부호화 단위(1422a, 1422b, 1424a, 1424b, 1424c)로 분할할 수 있다. 일 실시예에 따라 비-정사각형 형태의 제1 부호화 단위(1410 또는 1420)에 대한 분할 형태 모드 정보에 따라 결 정되는 제2 부호화 단위(1412a, 1412b, 1414a, 1414b, 1414c. 1422a, 1422b, 1424a, 1424b, 1424c)는 긴 변의 길이에 기초하여 심도가 결정될 수 있다. 예를 들면, 정사각형 형태의 제2 부호화 단위(1412a, 1412b)의 한 변 의 길이는 높이가 너비보다 긴 비-정사각형 형태의 제1 부호화 단위의 한 변의 길이의 1/2배이므로, 정사 각형 형태의 제2 부호화 단위(1412a, 1412b)의 심도는 비-정사각형 형태의 제1 부호화 단위의 심도 D보다 한 심도 하위의 심도인 D+1이다. 나아가 영상 복호화 장치가 분할 형태 모드 정보에 기초하여 비-정사각형 형태의 제1 부호화 단위를 홀수개의 제2 부호화 단위(1414a, 1414b, 1414c)로 분할할 수 있다. 홀수개의 제2 부호화 단위(1414a, 1414b, 1414c)는 비-정사각형 형태의 제2 부호화 단위(1414a, 1414c) 및 정사각형 형태의 제2 부호화 단위(1414b)를 포 함할 수 있다. 이 경우 비-정사각형 형태의 제2 부호화 단위(1414a, 1414c)의 긴 변의 길이 및 정사각형 형태의 제2 부호화 단위(1414b)의 한 변의 길이는 제1 부호화 단위의 한 변의 길이의 1/2배 이므로, 제2 부호화 단위(1414a, 1414b, 1414c)의 심도는 제1 부호화 단위의 심도인 D보다 한 심도 하위인 D+1의 심도일 수 있다. 영상 복호화 장치는 제1 부호화 단위와 관련된 부호화 단위들의 심도를 결정하는 상기 방식에 대응하는 방식으로, 너비가 높이보다 긴 비-정사각형 형태의 제1 부호화 단위와 관련된 부호화 단위들의 심도를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 분할된 부호화 단위들의 구분을 위한 인덱스(PID)를 결정함에 있어 서, 홀수개로 분할된 부호화 단위들이 서로 동일한 크기가 아닌 경우, 부호화 단위들 간의 크기 비율에 기초하 여 인덱스를 결정할 수 있다. 도 14를 참조하면, 홀수개로 분할된 부호화 단위들(1414a, 1414b, 1414c) 중 가운 데에 위치하는 부호화 단위(1414b)는 다른 부호화 단위들(1414a, 1414c)와 너비는 동일하지만 높이가 다른 부호 화 단위들(1414a, 1414c)의 높이의 두 배일 수 있다. 즉, 이 경우 가운데에 위치하는 부호화 단위(1414b)는 다 른 부호화 단위들(1414a, 1414c)의 두 개를 포함할 수 있다. 따라서, 스캔 순서에 따라 가운데에 위치하는 부호 화 단위(1414b)의 인덱스(PID)가 1이라면 그 다음 순서에 위치하는 부호화 단위(1414c)는 인덱스가 2가 증가한 3일수 있다. 즉 인덱스의 값의 불연속성이 존재할 수 있다. 일 실시예에 따라 영상 복호화 장치는 이러한 분할된 부호화 단위들 간의 구분을 위한 인덱스의 불연속성의 존재 여부에 기초하여 홀수개로 분할된 부호화 단 위들이 서로 동일한 크기가 아닌지 여부를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위로부터 분할되어 결정된 복수개의 부호화 단위들을 구분하기 위한 인덱스의 값에 기초하여 특정 분할 형태로 분할된 것인지를 결정할 수 있다. 도 14를 참조하면 영상 복호화 장치는 높이가 너비보다 긴 직사각형 형태의 제1 부호화 단위를 분할하여 짝수개의 부 호화 단위(1412a, 1412b)를 결정하거나 홀수개의 부호화 단위(1414a, 1414b, 1414c)를 결정할 수 있다. 영상 복호화 장치는 복수개의 부호화 단위 각각을 구분하기 위하여 각 부호화 단위를 나타내는 인덱스(PID)를 이용할 수 있다. 일 실시예에 따라 PID는 각각의 부호화 단위의 소정 위치의 샘플(예를 들면, 좌측 상단 샘플) 에서 획득될 수 있다. 일 실시예에 따라 영상 복호화 장치는 부호화 단위의 구분을 위한 인덱스를 이용하여 분할되어 결정된 부 호화 단위들 중 소정 위치의 부호화 단위를 결정할 수 있다. 일 실시예에 따라 높이가 너비보다 긴 직사각형 형 태의 제1 부호화 단위에 대한 분할 형태 모드 정보가 3개의 부호화 단위로 분할됨을 나타내는 경우 영상 복호화 장치는 제1 부호화 단위를 3개의 부호화 단위(1414a, 1414b, 1414c)로 분할할 수 있다. 영 상 복호화 장치는 3개의 부호화 단위(1414a, 1414b, 1414c) 각각에 대한 인덱스를 할당할 수 있다. 영상 복호화 장치는 홀수개로 분할된 부호화 단위 중 가운데 부호화 단위를 결정하기 위하여 각 부호화 단위에 대한 인덱스를 비교할 수 있다. 영상 복호화 장치는 부호화 단위들의 인덱스에 기초하여 인덱스들 중 가운 데 값에 해당하는 인덱스를 갖는 부호화 단위(1414b)를, 제1 부호화 단위가 분할되어 결정된 부호화 단위 중 가운데 위치의 부호화 단위로서 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 분할된 부호화 단위들의 구분을 위한 인덱스를 결정함에 있어서, 부호화 단위들이 서로 동일한 크기가 아닌 경우, 부호화 단위 들 간의 크기 비율에 기초하여 인덱스를 결정할 수 있다. 도 14를 참조하면, 제1 부호화 단위가 분할되어 생성된 부호화 단위(1414b)는 다른 부호화 단위들(1414a, 1414c)와 너비는 동일하지만 높이가 다른 부호화 단위 들(1414a, 1414c)의 높이의 두 배일 수 있다. 이 경우 가운데에 위치하는 부호화 단위(1414b)의 인덱스(PID)가 1이라면 그 다음 순서에 위치하는 부호화 단위(1414c)는 인덱스가 2가 증가한 3일수 있다. 이러한 경우처럼 균일하게 인덱스가 증가하다가 증가폭이 달라지는 경우, 영상 복호화 장치는 다른 부호화 단위들과 다른 크 기를 가지는 부호화 단위를 포함하는 복수개의 부호화 단위로 분할된 것으로 결정할 수 있다, 일 실시예에 따라 분할 형태 모드 정보가 홀수개의 부호화 단위로 분할됨을 나타내는 경우, 영상 복호화 장치는 홀수개의 부 호화 단위 중 소정 위치의 부호화 단위(예를 들면 가운데 부호화 단위)가 다른 부호화 단위와 크기가 다른 형태 로 현재 부호화 단위를 분할할 수 있다. 이 경우 영상 복호화 장치는 부호화 단위에 대한 인덱스(PID)를 이용하여 다른 크기를 가지는 가운데 부호화 단위를 결정할 수 있다. 다만 상술한 인덱스, 결정하고자 하는 소 정 위치의 부호화 단위의 크기 또는 위치는 일 실시예를 설명하기 위해 특정한 것이므로 이에 한정하여 해석되 어서는 안되며, 다양한 인덱스, 부호화 단위의 위치 및 크기가 이용될 수 있는 것으로 해석되어야 한다. 일 실시예에 따라 영상 복호화 장치는 부호화 단위의 재귀적인 분할이 시작되는 소정의 데이터 단위를 이 용할 수 있다. 도 15는 일 실시예에 따라 픽쳐에 포함되는 복수개의 소정의 데이터 단위에 따라 복수개의 부호화 단위들이 결 정된 것을 도시한다. 일 실시예에 따라 소정의 데이터 단위는 부호화 단위가 분할 형태 모드 정보를 이용하여 재귀적으로 분할되기 시작하는 데이터 단위로 정의될 수 있다. 즉, 현재 픽쳐를 분할하는 복수개의 부호화 단위들이 결정되는 과정에 서 이용되는 최상위 심도의 부호화 단위에 해당할 수 있다. 이하에서는 설명 상 편의를 위해 이러한 소정의 데 이터 단위를 기준 데이터 단위라고 지칭하도록 한다. 일 실시예에 따라 기준 데이터 단위는 소정의 크기 및 형태를 나타낼 수 있다. 일 실시예에 따라, 기준 데이터 단위는 MxN의 샘플들을 포함할 수 있다. 여기서 M 및 N은 서로 동일할 수도 있으며, 2의 승수로 표현되는 정수 일 수 있다. 즉, 기준 데이터 단위는 정사각형 또는 비-정사각형의 형태를 나타낼 수 있으며, 이후에 정수개의 부호화 단위로 분할될 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 픽쳐를 복수개의 기준 데이터 단위로 분할할 수 있다. 일 실시 예에 따라 영상 복호화 장치는 현재 픽쳐를 분할하는 복수개의 기준 데이터 단위를 각각의 기준 데이터 단 위에 대한 분할 형태 모드 정보를 이용하여 분할할 수 있다. 이러한 기준 데이터 단위의 분할 과정은 쿼드 트리 (quad-tree)구조를 이용한 분할 과정에 대응될 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 픽쳐에 포함되는 기준 데이터 단위가 가질 수 있는 최소 크기 를 미리 결정할 수 있다. 이에 따라, 영상 복호화 장치는 최소 크기 이상의 크기를 갖는 다양한 크기의 기 준 데이터 단위를 결정할 수 있고, 결정된 기준 데이터 단위를 기준으로 분할 형태 모드 정보를 이용하여 적어 도 하나의 부호화 단위를 결정할 수 있다. 도 15를 참조하면, 영상 복호화 장치는 정사각형 형태의 기준 부호화 단위를 이용할 수 있고, 또는 비-정사각형 형태의 기준 부호화 단위를 이용할 수도 있다. 일 실시예에 따라 기준 부호화 단위의 형태 및 크기는 적어도 하나의 기준 부호화 단위를 포함할 수 있는 다양한 데이터 단위(예를 들면, 시퀀스 (sequence), 픽쳐(picture), 슬라이스(slice), 슬라이스 세그먼트(slice segment), 타일(tile), 타일 그룹 (tile group), 최대부호화단위 등)에 따라 결정될 수 있다. 일 실시예에 따라 영상 복호화 장치의 비트스트림 획득부는 기준 부호화 단위의 형태에 대한 정보 및 기준 부호화 단위의 크기에 대한 정보 중 적어도 하나를 상기 다양한 데이터 단위마다 비트스트림으로부터 획득 할 수 있다. 정사각형 형태의 기준 부호화 단위에 포함되는 적어도 하나의 부호화 단위가 결정되는 과정 은 도 3의 현재 부호화 단위가 분할되는 과정을 통해 상술하였고, 비-정사각형 형태의 기준 부호화 단위 에 포함되는 적어도 하나의 부호화 단위가 결정되는 과정은 도 4의 현재 부호화 단위(400 또는 450)가 분 할되는 과정을 통해 상술하였으므로 자세한 설명은 생략하도록 한다. 일 실시예에 따라 영상 복호화 장치는 소정의 조건에 기초하여 미리 결정되는 일부 데이터 단위에 따라 기 준 부호화 단위의 크기 및 형태를 결정하기 위하여, 기준 부호화 단위의 크기 및 형태를 식별하기 위한 인덱스 를 이용할 수 있다. 즉, 비트스트림 획득부는 비트스트림으로부터 상기 다양한 데이터 단위(예를 들면, 시 퀀스, 픽쳐, 슬라이스, 슬라이스 세그먼트, 타일, 타일 그룹, 최대부호화단위 등) 중 소정의 조건(예를 들면 슬 라이스 이하의 크기를 갖는 데이터 단위)을 만족하는 데이터 단위로서 슬라이스, 슬라이스 세그먼트, 타일, 타 일 그룹, 최대부호화 단위 등 마다, 기준 부호화 단위의 크기 및 형태의 식별을 위한 인덱스만을 획득할 수 있 다. 영상 복호화 장치는 인덱스를 이용함으로써 상기 소정의 조건을 만족하는 데이터 단위마다 기준 데이 터 단위의 크기 및 형태를 결정할 수 있다. 기준 부호화 단위의 형태에 대한 정보 및 기준 부호화 단위의 크기에 대한 정보를 상대적으로 작은 크기의 데이터 단위마다 비트스트림으로부터 획득하여 이용하는 경우, 비트스 트림의 이용 효율이 좋지 않을 수 있으므로, 기준 부호화 단위의 형태에 대한 정보 및 기준 부호화 단위의 크기 에 대한 정보를 직접 획득하는 대신 상기 인덱스만을 획득하여 이용할 수 있다. 이 경우 기준 부호화 단위의 크 기 및 형태를 나타내는 인덱스에 대응하는 기준 부호화 단위의 크기 및 형태 중 적어도 하나는 미리 결정되어 있을 수 있다. 즉, 영상 복호화 장치는 미리 결정된 기준 부호화 단위의 크기 및 형태 중 적어도 하나를 인덱스에 따라 선택함으로써, 인덱스 획득의 기준이 되는 데이터 단위에 포함되는 기준 부호화 단위의 크기 및 형태 중 적어도 하나를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 하나의 최대 부호화 단위에 포함하는 적어도 하나의 기준 부 호화 단위를 이용할 수 있다. 즉, 영상을 분할하는 최대 부호화 단위에는 적어도 하나의 기준 부호화 단위가 포 함될 수 있고, 각각의 기준 부호화 단위의 재귀적인 분할 과정을 통해 부호화 단위가 결정될 수 있다. 일 실시 예에 따라 최대 부호화 단위의 너비 및 높이 중 적어도 하나는 기준 부호화 단위의 너비 및 높이 중 적어도 하 나의 정수 배에 해당할 수 있다. 일 실시예에 따라 기준 부호화 단위의 크기는 최대 부호화 단위를 쿼드 트리 구조에 따라 n번 분할한 크기일 수 있다. 즉, 영상 복호화 장치는 최대 부호화 단위를 쿼드 트리 구조에 따라 n 번 분할하여 기준 부호화 단위를 결정할 수 있고, 다양한 실시예들에 따라 기준 부호화 단위를 블록 형 태 정보 및 분할 형태 모드 정보 중 적어도 하나에 기초하여 분할할 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위의 형태를 나타내는 블록 형태 정보 또는 현재 부 호화 단위를 분할하는 방법을 나타내는 분할 형태 모드 정보를 비트스트림으로부터 획득하여 이용할 수 있다. 분할 형태 모드 정보는 다양한 데이터 단위와 관련된 비트스트림에 포함될 수 있다. 예를 들면, 영상 복호화 장 치는 시퀀스 파라미터 세트(sequence parameter set), 픽쳐 파라미터 세트(picture parameter set), 비디 오 파라미터 세트(video parameter set), 슬라이스 헤더(slice header), 슬라이스 세그먼트 헤더(slice segment header), 타일 헤더(tile header), 타일 그룹 헤더(tile group header)에 포함된 분할 형태 모드 정보 를 이용할 수 있다. 나아가, 영상 복호화 장치는 최대 부호화 단위, 기준 부호화 단위마다 비트스트림으로 부터 블록 형태 정보 또는 분할 형태 모드 정보에 대응하는 신택스 엘리먼트를 비트스트림으로부터 획득하여 이 용할 수 있다. 이하 본 개시의 일 실시예에 따른 분할 규칙을 결정하는 방법에 대하여 자세히 설명한다. 영상 복호화 장치는 영상의 분할 규칙을 결정할 수 있다. 분할 규칙은 영상 복호화 장치 및 영상 부 호화 장치 사이에 미리 결정되어 있을 수 있다. 영상 복호화 장치는 비트스트림으로부터 획득된 정보 에 기초하여 영상의 분할 규칙을 결정할 수 있다. 영상 복호화 장치는 시퀀스 파라미터 세트(sequence parameter set), 픽쳐 파라미터 세트(picture parameter set), 비디오 파라미터 세트(video parameter set), 슬라이스 헤더(slice header), 슬라이스 세그먼트 헤더(slice segment header), 타일 헤더(tile header), 타일 그룹 헤더(tile group header) 중 적어도 하나로부터 획득된 정보에 기초하여 분할 규칙을 결정할 수 있다. 영 상 복호화 장치는 분할 규칙을 프레임, 슬라이스, 타일, 템포럴 레이어(Temporal layer), 최대 부호화 단 위 또는 부호화 단위에 따라 다르게 결정할 수 있다. 영상 복호화 장치는 부호화 단위의 블록 형태에 기초하여 분할 규칙을 결정할 수 있다. 블록 형태는 부호 화 단위의 크기, 모양, 너비 및 높이의 비율, 방향을 포함할 수 있다. 영상 부호화 장치 및 영상 복호화 장치는 부호화 단위의 블록 형태에 기초하여 분할 규칙을 결정할 것을 미리 결정할 수 있다. 하지만 이에 한정되는 것은 아니다. 영상 복호화 장치는 영상 부호화 장치로부터 수신된 비트스트림으로부터 획득 된 정보에 기초하여, 분할 규칙을 결정할 수 있다. 부호화 단위의 모양은 정사각형(square) 및 비-정사각형(non-square)을 포함할 수 있다. 부호화 단위의 너비 및 높이의 길이가 같은 경우, 영상 복호화 장치는 부호화 단위의 모양을 정사각형으로 결정할 수 있다. 또한, 부호화 단위의 너비 및 높이의 길이가 같지 않은 경우, 영상 복호화 장치는 부호화 단위의 모양을 비-정사 각형으로 결정할 수 있다. 부호화 단위의 크기는 4x4, 8x4, 4x8, 8x8, 16x4, 16x8, ... , 256x256의 다양한 크기를 포함할 수 있다. 부호 화 단위의 크기는 부호화 단위의 긴변의 길이, 짧은 변의 길이 또는 넓이에 따라 분류될 수 있다. 영상 복호화 장치는 동일한 그룹으로 분류된 부호화 단위에 동일한 분할 규칙을 적용할 수 있다. 예를 들어 영상 복호 화 장치는 동일한 긴변의 길이를 가지는 부호화 단위를 동일한 크기로 분류할 수 있다. 또한 영상 복호화 장치는 동일한 긴변의 길이를 가지는 부호화 단위에 대하여 동일한 분할 규칙을 적용할 수 있다.부호화 단위의 너비 및 높이의 비율은 1:2, 2:1, 1:4, 4:1, 1:8, 8:1, 1:16, 16:1, 32:1 또는 1:32 등을 포함 할 수 있다. 또한, 부호화 단위의 방향은 수평 방향 및 수직 방향을 포함할 수 있다. 수평 방향은 부호화 단위 의 너비의 길이가 높이의 길이보다 긴 경우를 나타낼 수 있다. 수직 방향은 부호화 단위의 너비의 길이가 높이 의 길이보다 짧은 경우를 나타낼 수 있다. 영상 복호화 장치는 부호화 단위의 크기에 기초하여 분할 규칙을 적응적으로 결정할 수 있다. 영상 복호화 장치는 부호화 단위의 크기에 기초하여 허용가능한 분할 형태 모드를 다르게 결정할 수 있다. 예를 들어, 영상 복호화 장치는 부호화 단위의 크기에 기초하여 분할이 허용되는지 여부를 결정할 수 있다. 영상 복호 화 장치는 부호화 단위의 크기에 따라 분할 방향을 결정할 수 있다. 영상 복호화 장치는 부호화 단위 의 크기에 따라 허용가능한 분할 타입을 결정할 수 있다. 부호화 단위의 크기에 기초하여 분할 규칙을 결정하는 것은 영상 부호화 장치 및 영상 복호화 장치 사이에 미리 결정된 분할 규칙일 수 있다. 또한, 영상 복호화 장치는 비트스트림으로부터 획득된 정보에 기초하여, 분할 규칙을 결정할 수 있다. 영상 복호화 장치는 부호화 단위의 위치에 기초하여 분할 규칙을 적응적으로 결정할 수 있다. 영상 복호화 장치는 부호화 단위가 영상에서 차지하는 위치에 기초하여 분할 규칙을 적응적으로 결정할 수 있다. 또한, 영상 복호화 장치는 서로 다른 분할 경로로 생성된 부호화 단위가 동일한 블록 형태를 가지지 않도 록 분할 규칙을 결정할 수 있다. 다만 이에 한정되는 것은 아니며 서로 다른 분할 경로로 생성된 부호화 단위는 동일한 블록 형태를 가질 수 있다. 서로 다른 분할 경로로 생성된 부호화 단위들은 서로 다른 복호화 처리 순서 를 가질 수 있다. 복호화 처리 순서에 대해서는 도 12와 함께 설명하였으므로 자세한 설명은 생략한다. 도 16은 일 실시예에 따라 부호화 단위가 분할될 수 있는 형태의 조합이 픽쳐마다 서로 다른 경우, 각각의 픽쳐 마다 결정될 수 있는 부호화 단위들을 도시한다. 도 16을 참조하면, 영상 복호화 장치는 픽쳐마다 부호화 단위가 분할될 수 있는 분할 형태들의 조합을 다 르게 결정할 수 있다. 예를 들면, 영상 복호화 장치는 영상에 포함되는 적어도 하나의 픽쳐들 중 4개의 부 호화 단위로 분할될 수 있는 픽쳐, 2개 또는 4개의 부호화 단위로 분할될 수 있는 픽쳐 및 2개, 3 개 또는 4개의 부호화 단위로 분할될 수 있는 픽쳐를 이용하여 영상을 복호화 할 수 있다. 영상 복호화 장치는 픽쳐를 복수개의 부호화 단위로 분할하기 위하여, 4개의 정사각형의 부호화 단위로 분할됨을 나타내는 분할 형태 정보만을 이용할 수 있다. 영상 복호화 장치는 픽쳐를 분할하기 위하여, 2개 또 는 4개의 부호화 단위로 분할됨을 나타내는 분할 형태 정보만을 이용할 수 있다. 영상 복호화 장치는 픽쳐 를 분할하기 위하여, 2개, 3개 또는 4개의 부호화 단위로 분할됨을 나타내는 분할 형태 정보만을 이용할 수 있다. 상술한 분할 형태의 조합은 영상 복호화 장치의 동작을 설명하기 위한 실시예에 불과하므로 상술 한 분할 형태의 조합은 상기 실시예에 한정하여 해석되어서는 안되며 소정의 데이터 단위마다 다양한 형태의 분 할 형태의 조합이 이용될 수 있는 것으로 해석되어야 한다. 일 실시예에 따라 영상 복호화 장치의 비트스트림 획득부는 분할 형태 정보의 조합을 나타내는 인덱 스를 포함하는 비트스트림을 소정의 데이터 단위 단위(예를 들면, 시퀀스, 픽쳐, 슬라이스, 슬라이스 세그먼트, 타일 또는 타일 그룹 등)마다 획득할 수 있다. 예를 들면, 비트스트림 획득부는 시퀀스 파라미터 세트 (Sequence Parameter Set), 픽쳐 파라미터 세트(Picture Parameter Set), 슬라이스 헤더(Slice Header), 타일 헤더(tile header) 또는 타일 그룹 헤더(tile group header)에서 분할 형태 정보의 조합을 나타내는 인덱스를 획득할 수 있다. 영상 복호화 장치는 획득한 인덱스를 이용하여 소정의 데이터 단위마다 부호화 단위가 분 할될 수 있는 분할 형태의 조합을 결정할 수 있으며, 이에 따라 소정의 데이터 단위마다 서로 다른 분할 형태의 조합을 이용할 수 있다. 도 17은 일 실시예에 따라 바이너리(binary)코드로 표현될 수 있는 분할 형태 모드 정보에 기초하여 결정될 수 있는 부호화 단위의 다양한 형태를 도시한다. 일 실시예에 따라 영상 복호화 장치는 비트스트림 획득부를 통해 획득한 블록 형태 정보 및 분할 형 태 모드 정보를 이용하여 부호화 단위를 다양한 형태로 분할할 수 있다. 분할될 수 있는 부호화 단위의 형태는 상술한 실시예들을 통해 설명한 형태들을 포함하는 다양한 형태에 해당할 수 있다. 도 17을 참조하면, 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 정사각형 형태의 부호화 단위를 수평 방향 및 수직 방향 중 적어도 하나의 방향으로 분할할 수 있고, 비-정사각형 형태의 부호화 단위를 수평방향 또는 수직 방향으로 분할할 수 있다. 일 실시예에 따라 영상 복호화 장치가 정사각형 형태의 부호화 단위를 수평 방향 및 수직 방향으로 분할하 여 4개의 정사각형의 부호화 단위로 분할할 수 있는 경우, 정사각형의 부호화 단위에 대한 분할 형태 모드 정보 가 나타낼 수 있는 분할 형태는 4가지일 수 있다. 일 실시예에 따라 분할 형태 모드 정보는 2자리의 바이너리 코드로써 표현될 수 있으며, 각각의 분할 형태마다 바이너리 코드가 할당될 수 있다. 예를 들면 부호화 단위가 분할되지 않는 경우 분할 형태 모드 정보는 b로 표현될 수 있고, 부호화 단위가 수평 방향 및 수직 방향으 로 분할되는 경우 분할 형태 모드 정보는 b로 표현될 수 있고, 부호화 단위가 수평 방향으로 분할되는 경우 분할 형태 모드 정보는 b로 표현될 수 있고 부호화 단위가 수직 방향으로 분할되는 경우 분할 형태 모드 정 보는 b로 표현될 수 있다. 일 실시예에 따라 영상 복호화 장치는 비-정사각형 형태의 부호화 단위를 수평 방향 또는 수직 방향으로 분할하는 경우 분할 형태 모드 정보가 나타낼 수 있는 분할 형태의 종류는 몇 개의 부호화 단위로 분할하는지에 따라 결정될 수 있다. 도 17을 참조하면, 영상 복호화 장치는 일 실시예에 따라 비-정사각형 형태의 부호 화 단위를 3개까지 분할할 수 있다. 영상 복호화 장치는 부호화 단위를 두 개의 부호화 단위로 분할할 수 있으며, 이 경우 분할 형태 모드 정보는 b로 표현될 수 있다. 영상 복호화 장치는 부호화 단위를 세 개의 부호화 단위로 분할할 수 있으며, 이 경우 분할 형태 모드 정보는 b로 표현될 수 있다. 영상 복호화 장치는 부호화 단위를 분할하지 않는 것으로 결정할 수 있으며, 이 경우 분할 형태 모드 정보는 b로 표 현될 수 있다. 즉, 영상 복호화 장치는 분할 형태 모드 정보를 나타내는 바이너리 코드를 이용하기 위하여 고정길이 코딩(FLC: Fixed Length Coding)이 아니라 가변길이 코딩(VLC: Varaible Length Coding)을 이용할 수 있다. 일 실시예에 따라 도 17을 참조하면, 부호화 단위가 분할되지 않는 것을 나타내는 분할 형태 모드 정보의 바이 너리 코드는 b로 표현될 수 있다. 만일 부호화 단위가 분할되지 않음을 나타내는 분할 형태 모드 정보의 바 이너리 코드가 b로 설정된 경우라면, b로 설정된 분할 형태 모드 정보가 없음에도 불구하고 2비트의 분 할 형태 모드 정보의 바이너리 코드를 모두 이용하여야 한다. 하지만 도 17에서 도시하는 바와 같이, 비-정사각 형 형태의 부호화 단위에 대한 3가지의 분할 형태를 이용하는 경우라면, 영상 복호화 장치는 분할 형태 모 드 정보로서 1비트의 바이너리 코드b를 이용하더라도 부호화 단위가 분할되지 않는 것을 결정할 수 있으므로, 비트스트림을 효율적으로 이용할 수 있다. 다만 분할 형태 모드 정보가 나타내는 비-정사각형 형태의 부호화 단위의 분할 형태는 단지 도 17에서 도시하는 3가지 형태만으로 국한되어 해석되어서는 안되고, 상술한 실시예들을 포함하는 다양한 형태로 해석되어야 한다. 도 18은 일 실시예에 따라 바이너리 코드로 표현될 수 있는 분할 형태 모드 정보에 기초하여 결정될 수 있는 부 호화 단위의 또 다른 형태를 도시한다. 도 18을 참조하면 영상 복호화 장치는 분할 형태 모드 정보에 기초하여 정사각형 형태의 부호화 단위를 수 평 방향 또는 수직 방향으로 분할할 수 있고, 비-정사각형 형태의 부호화 단위를 수평 방향 또는 수직 방향으로 분할할 수 있다. 즉, 분할 형태 모드 정보는 정사각형 형태의 부호화 단위를 한쪽 방향으로 분할되는 것을 나타 낼 수 있다. 이러한 경우 정사각형 형태의 부호화 단위가 분할되지 않는 것을 나타내는 분할 형태 모드 정보의 바이너리 코드는 b로 표현될 수 있다. 만일 부호화 단위가 분할되지 않음을 나타내는 분할 형태 모드 정보의 바이너리 코드가 b로 설정된 경우라면, b로 설정된 분할 형태 모드 정보가 없음에도 불구하고 2비트의 분할 형태 모드 정보의 바이너리 코드를 모두 이용하여야 한다. 하지만 도 18에서 도시하는 바와 같이, 정사각 형 형태의 부호화 단위에 대한 3가지의 분할 형태를 이용하는 경우라면, 영상 복호화 장치는 분할 형태 모 드 정보로서 1비트의 바이너리 코드b를 이용하더라도 부호화 단위가 분할되지 않는 것을 결정할 수 있으므로, 비트스트림을 효율적으로 이용할 수 있다. 다만 분할 형태 모드 정보가 나타내는 정사각형 형태의 부 호화 단위의 분할 형태는 단지 도 18에서 도시하는 3가지 형태만으로 국한되어 해석되어서는 안되고, 상술한 실 시예들을 포함하는 다양한 형태로 해석되어야 한다. 일 실시예에 따라 블록 형태 정보 또는 분할 형태 모드 정보는 바이너리 코드를 이용하여 표현될 수 있고, 이러 한 정보가 곧바로 비트스트림으로 생성될 수 있다. 또한 바이너리 코드로 표현될 수 있는 블록 형태 정보 또는 분할 형태 모드 정보는 바로 비트스트림으로 생성되지 않고 CABAC(context adaptive binary arithmetic coding)에서 입력되는 바이너리 코드로서 이용될 수도 있다. 일 실시예에 따라 영상 복호화 장치는 CABAC을 통해 블록 형태 정보 또는 분할 형태 모드 정보에 대한 신 택스를 획득하는 과정을 설명한다. 비트스트림 획득부를 통해 상기 신택스에 대한 바이너리 코드를 포함하는 비트스트림을 획득할 수 있다. 영상 복호화 장치는 획득한 비트스트림에 포함되는 빈 스트링(bin string)을 역 이진화하여 블록 형태 정보 또는 분할 형태 모드 정보를 나타내는 신택스 요소(syntax element)를 검출할 수 있다. 일 실시예에 따라 영상 복호화 장치는 복호화할 신택스 요소에 해당하는 바이너리 빈 스 트링의 집합을 구하고, 확률 정보를 이용하여 각각의 빈을 복호화할 수 있고, 영상 복호화 장치는 이러한 복호화된 빈으로 구성되는 빈 스트링이 이전에 구한 빈 스트링들 중 하나와 같아질 때까지 반복할수 있다. 영 상 복호화 장치는 빈 스트링의 역 이진화를 수행하여 신택스 요소를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 적응적 이진 산술 코딩(adaptive binary arithmetic coding)의 복 호화 과정을 수행하여 빈 스트링에 대한 신택스를 결정할 수 있고, 영상 복호화 장치는 비트스트림 획득부 를 통해 획득한 빈들에 대한 확률 모델을 갱신할 수 있다. 도 17을 참조하면, 영상 복호화 장치의 비 트스트림 획득부는 일 실시예에 따라 분할 형태 모드 정보를 나타내는 바이너리 코드를 나타내는 비트스트 림을 획득할 수 있다. 획득한 1비트 또는 2비트의 크기를 가지는 바이너리 코드를 이용하여 영상 복호화 장치 는 분할 형태 모드 정보에 대한 신택스를 결정할 수 있다. 영상 복호화 장치는 분할 형태 모드 정보 에 대한 신택스를 결정하기 위하여, 2비트의 바이너리 코드 중 각각의 비트에 대한 확률을 갱신할 수 있다. 즉, 영상 복호화 장치는 2비트의 바이너리 코드 중 첫번째 빈의 값이 0 또는 1 중 어떤 값이냐에 따라, 다 음 빈을 복호화 할 때 0 또는 1의 값을 가질 확률을 갱신할 수 있다. 일 실시예에 따라 영상 복호화 장치는 신택스를 결정하는 과정에서, 신택스에 대한 빈 스트링의 빈들을 복 호화 하는 과정에서 이용되는 빈들에 대한 확률을 갱신할 수 있으며, 영상 복호화 장치는 상기 빈 스트링 중 특정 비트에서는 확률을 갱신하지 않고 동일한 확률을 가지는 것으로 결정할 수 있다. 도 17을 참조하면, 비-정사각형 형태의 부호화 단위에 대한 분할 형태 모드 정보를 나타내는 빈 스트링을 이용 하여 신택스를 결정하는 과정에서, 영상 복호화 장치는 비-정사각형 형태의 부호화 단위를 분할하지 않는 경우에는 0의 값을 가지는 하나의 빈을 이용하여 분할 형태 모드 정보에 대한 신택스를 결정할 수 있다. 즉, 블 록 형태 정보가 현재 부호화 단위는 비-정사각형 형태임을 나타내는 경우, 분할 형태 모드 정보에 대한 빈 스트 링의 첫번째 빈은, 비-정사각형 형태의 부호화 단위가 분할되지 않는 경우 0이고, 2개 또는 3개의 부호화 단위 로 분할되는 경우 1일 수 있다. 이에 따라 비-정사각형의 부호화 단위에 대한 분할 형태 모드 정보의 빈 스트링 의 첫번째 빈이 0일 확률은 1/3, 1일 확률은 2/3일 수 있다. 상술하였듯이 영상 복호화 장치는 비-정사각 형 형태의 부호화 단위가 분할되지 않는 것을 나타내는 분할 형태 모드 정보는 0의 값을 가지는 1비트의 빈 스 트링만을 표현될 수 있으므로, 영상 복호화 장치는 분할 형태 모드 정보의 첫번째 빈이 1인 경우에만 두번 째 빈이 0인지 1인지 판단하여 분할 형태 모드 정보에 대한 신택스를 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보에 대한 첫번째 빈이 1인 경우, 두번째 빈이 0 또는 1일 확률은 서로 동일한 확률인 것으로 보고 빈을 복호화할 수 있다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보에 대한 빈 스트링의 빈을 결정하는 과정에서 각각의 빈에 대한 다양한 확률을 이용할 수 있다. 일 실시예에 따라 영상 복호화 장치는 비-정사각형 블록 의 방향에 따라 분할 형태 모드 정보에 대한 빈의 확률을 다르게 결정할 수 있다. 일 실시예에 따라 영상 복호 화 장치는 현재 부호화 단위의 넓이 또는 긴 변의 길이에 따라 분할 형태 모드 정보에 대한 빈의 확률을 다르게 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 현재 부호화 단위의 형태 및 긴 변의 길이 중 적어도 하나에 따라 분할 형태 모드 정보에 대한 빈의 확률을 다르게 결정할 수 있다. 일 실시예에 따라 영상 복호화 장치는 소정 크기 이상의 부호화 단위들에 대하여는 분할 형태 모드 정보에 대한 빈의 확률을 동일한 것으로 결정할 수 있다. 예를 들면, 부호화 단위의 긴 변의 길이를 기준으로 64샘플 이상의 크기의 부호화 단위들에 대하여는 분할 형태 모드 정보에 대한 빈의 확률이 동일한 것으로 결정할 수 있 다. 일 실시예에 따라 영상 복호화 장치는 분할 형태 모드 정보의 빈 스트링을 구성하는 빈들에 대한 초기 확 률은 슬라이스 타입(예를 들면, I 슬라이스, P 슬라이스 또는 B 슬라이스)에 기초하여 결정될 수 있다. 도 19는 루프 필터링을 수행하는 영상 부호화 및 복호화 시스템의 블록도를 나타낸 도면이다. 영상 부호화 및 복호화 시스템의 부호화단은 영상의 부호화된 비트스트림을 전송하고, 복호화단 은 비트스트림을 수신하여 복호화함으로써 복원 영상을 출력한다. 여기서 부호화단은 후술할 영상 부호화 장치에 유사한 구성일 수 있고, 복호화단은 영상 복호화 장치에 유사한 구성일 수 있다. 부호화단에서, 예측 부호화부는 인터 예측 및 인트라 예측을 통해 예측 데이터를 출력하고, 변환 및 양자화부는 예측 데이터와 현재 입력 영상 간의 레지듀얼 데이터의 양자화된 변환 계수를 출력한다. 엔트로피 부호화부는 양자화된 변환 계수를 부호화하여 변환하고 비트스트림으로 출력한다. 양자화된 변 환 계수는 역 양자화 및 역 변환부을 거쳐 공간 영역의 데이터로 복원되고, 복원된 공간 영역의 데이터는 디블로킹 필터링부 및 루프 필터링부를 거쳐 복원 영상으로 출력된다. 복원 영상은 예측 부호화부 를 거쳐 다음 입력 영상의 참조 영상으로 사용될 수 있다. 복호화단으로 수신된 비트스트림 중 부호화된 영상 데이터는, 엔트로피 복호화부 및 역 양자화 및 역 변환부를 거쳐 공간 영역의 레지듀얼 데이터로 복원된다. 예측 복호화부로부터 출력된 예측 데 이터 및 레지듀얼 데이터가 조합되어 공간 영역의 영상 데이터가 구성되고, 디블로킹 필터링부 및 루프 필터링부는 공간 영역의 영상 데이터에 대해 필터링을 수행하여 현재 원본 영상에 대한 복원 영상을 출력 할 수 있다. 복원 영상은 예측 복호화부에 의해 다음 원본 영상에 대한 참조 영상으로서 이용될 수 있다. 부호화단의 루프 필터링부는 사용자 입력 또는 시스템 설정에 따라 입력된 필터 정보를 이용하여 루프 필터링을 수행한다. 루프 필터링부에 의해 사용된 필터 정보는 엔트로피 부호화부로 출력되어, 부호화된 영상 데이터와 함께 복호화단으로 전송된다. 복호화단의 루프 필터링부 는 복호화단으로부터 입력된 필터 정보에 기초하여 루프 필터링을 수행할 수 있다. 상술한 다양한 실시예들은 영상 복호화 장치이 수행하는 영상 복호화 방법과 관련된 동작을 설명한 것이다. 이하에서는 이러한 영상 복호화 방법에 역순의 과정에 해당하는 영상 부호화 방법을 수행하는 영상 부 호화 장치의 동작을 다양한 실시예를 통해 설명하도록 한다. 도 2는 일 실시예에 따라 블록 형태 정보 및 분할 형태 모드 정보 중 적어도 하나에 기초하여 영상을 부호화 할 수 있는 영상 부호화 장치의 블록도를 도시한다. 영상 부호화 장치는 부호화부 및 비트스트림 생성부를 포함할 수 있다. 부호화부는 입력 영상을 수신하여 입력 영상을 부호화할 수 있다. 부호화부는 입력 영상을 부호화하여 적어도 하나의 신택 스 엘리먼트를 획득할 수 있다. 신택스 엘리먼트는 skip flag, prediction mode, motion vector difference, motion vector prediction method (or index), transform quantized coefficient, coded block pattern, coded block flag, intra prediction mode, direct flag, merge flag, delta QP, reference index, prediction direction, transform index 중 적어도 하나를 포함할 수 있다. 부호화부는 부호화 단위의 모 양, 방향, 너비 및 높이의 비율 또는 크기 중 적어도 하나를 포함하는 블록 형태 정보에 기초하여 컨텍스트 모 델을 결정할 수 있다. 비트스트림 생성부는 부호화된 입력 영상에 기초하여 비트스트림을 생성할 수 있다. 예를 들어 비트스트림 생성부는 컨텍스트 모델에 기초하여 신택스 엘리먼트를 엔트로피 부호화함으로써 비트스트림을 생성할 수 있다. 또한 영상 부호화 장치는 비트스트림을 영상 복호화 장치로 전송할 수 있다. 일 실시예에 따라 영상 부호화 장치의 부호화부는 부호화 단위의 형태를 결정할 수 있다. 예를 들면 부호화 단위가 정사각형인지 또는 비-정사각형의 형태를 가질 수 있고, 이러한 형태를 나타내는 정보는 블록 형 태 정보에 포함될 수 있다. 일 실시예에 따라 부호화부는 부호화 단위가 어떤 형태로 분할될지를 결정할 수 있다. 부호화부는 부 호화 단위에 포함되는 적어도 하나의 부호화 단위의 형태를 결정할 수 있고 비트스트림 생성부는 이러한 부호화 단위의 형태에 대한 정보를 포함하는 분할 형태 모드 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에 따라 부호화부는 부호화 단위가 분할되는지 분할되지 않는지 여부를 결정할 수 있다. 부호화 부가 부호화 단위에 하나의 부호화 단위만이 포함되거나 또는 부호화 단위가 분할되지 않는 것으로 결정하 는 경우 비트스트림 생성부는 부호화 단위가 분할되지 않음을 나타내는 분할 형태 모드 정보를 포함하는 비트스트림을 생성할 수 있다. 또한 부호화부는 부호화 단위에 포함되는 복수개의 부호화 단위로 분할할 수 있고, 비트스트림 생성부는 부호화 단위는 복수개의 부호화 단위로 분할됨을 나타내는 분할 형태 모드 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에 따라 부호화 단위를 몇 개의 부호화 단위로 분할할지를 나타내거나 어느 방향으로 분할할지를 나타 내는 정보가 분할 형태 모드 정보에 포함될 수 있다. 예를 들면 분할 형태 모드 정보는 수직 방향 및 수평 방향 중 적어도 하나의 방향으로 분할하는 것을 나타내거나 또는 분할하지 않는 것을 나타낼 수 있다.영상 부호화 장치는 부호화 단위의 분할 형태 모드에 기초하여 분할 형태 모드에 대한 정보를 결정한다. 영상 부호화 장치는 부호화 단위의 모양, 방향, 너비 및 높이의 비율 또는 크기 중 적어도 하나에 기초하 여 컨텍스트 모델을 결정한다. 그리고, 영상 부호화 장치는 컨텍스트 모델에 기초하여 부호화 단위를 분할 하기 위한 분할 형태 모드에 대한 정보를 비트스트림으로 생성한다. 영상 부호화 장치는 컨텍스트 모델을 결정하기 위하여, 부호화 단위의 모양, 방향, 너비 및 높이의 비율 또는 크기 중 적어도 하나와 컨텍스트 모델에 대한 인덱스를 대응시키기 위한 배열을 획득할 수 있다. 영상 부 호화 장치는 배열에서 부호화 단위의 모양, 방향, 너비 및 높이의 비율 또는 크기 중 적어도 하나에 기초 하여 컨텍스트 모델에 대한 인덱스를 획득할 수 있다. 영상 부호화 장치는 컨텍스트 모델에 대한 인덱스에 기초하여 컨텍스트 모델을 결정할 수 있다. 영상 부호화 장치는, 컨텍스트 모델을 결정하기 위하여, 부호화 단위에 인접한 주변 부호화 단위의 모양, 방향, 너비 및 높이의 비율 또는 크기 중 적어도 하나를 포함하는 블록 형태 정보에 더 기초하여 컨텍스트 모델 을 결정할 수 있다. 또한 주변 부호화 단위는 부호화 단위의 좌하측, 좌측, 좌상측, 상측, 우상측, 우측 또는 우하측에 위치한 부호화 단위 중 적어도 하나를 포함할 수 있다. 또한, 영상 부호화 장치는, 컨텍스트 모델을 결정하기 위하여, 상측 주변 부호화 단위의 너비의 길이와 부 호화 단위의 너비의 길이를 비교할 수 있다. 또한, 영상 부호화 장치는 좌측 및 우측의 주변 부호화 단위 의 높이의 길이와 부호화 단위의 높이의 길이를 비교할 수 있다. 또한, 영상 부호화 장치는 비교 결과들에 기초하여 컨텍스트 모델을 결정할 수 있다. 영상 부호화 장치의 동작은 도 3 내지 도 19에서 설명한 비디오 복호화 장치의 동작과 유사한 내용을 포함하고 있으므로, 상세한 설명은 생략한다. 도 20 및 도 21을 참조하여, 본 개시의 일 실시예에 따른 AI 기반의 엔드-투-엔드 부호화/복호화 시스템에 의해 수행되는 인트라 예측 및 인터 예측에 대해 설명한다. 도 20은 본 개시의 일 실시예에 따른 인트라 예측에 기반한 현재 영상의 부호화 및 복호화 과정을 설명하기 위 한 도면이다. 일 실시예에서, 인트라 예측을 위해 영상 인코더 및 영상 디코더가 이용될 수 있다. 영상 인코더 및 영상 디코더는 신경망으로 구현될 수 있다. 한편, 본 개시의 영상 인코더를 포함하는 장 치를 영상 부호화 장치, 영상 디코더를 포함하는 장치를 영상 부호화 장치라고 지칭할 수 있다. 일 실시예에서, 영상 인코더는 훈련을 통해 설정된 파라미터에 따라 현재 영상을 처리하여 현재 영 상에 대한 잠재 텐서(k)를 출력할 수 있다. 또한, 잠재 텐서는, 현재 영상으로부터 포함된 영상 내 패턴 이나 중복성 등 인트라 예측을 위해 이용할 수 있는 데이터를 추출한 것일 수 있다. 영상 인코더는 영상 의 품질과 압축의 균형을 유지하기 위해 최적으로 훈련된 신경망에 일 수 있으며, 영상 인코더는 현재 영 상을 복호화 하기 위해 필수적인 정보만을 잠재 텐서로서 출력할 수 있다. 일 실시예에서, 현재 영상의 잠재 텐서(k)에 대해 양자화 및 엔트로피 부호화가 적용됨으로 써 비트스트림이 생성되고, 비트스트림은 영상 부호화 장치로부터 영상 복호화 장치로 전달될 수 있다. 일 실시예에서, 양자화는 잠재 텐서의 정밀도를 줄여 데이터에 대한 압축 가능성을 높이는 과정으로서, 잠재 텐서를 결정된 양자화 스텝 사이즈에 따라 매핑함으로써 수행될 수 있다. 잠재 텐서에 대한 양자화 를 통해, 잠재 텐서를 표현하기 위해 필요한 비트의 깊이를 감소시킬 수 있고, 중요한 정보는 최대한 보존할 수 있다. 일 실시예에서, 엔트로피 부호화는 양자화된 잠재 텐서의 통계적 특성을 이용하여 데이터를 더욱 압축하 는 과정으로서, 높은 빈도의 양자화된 잠재 텐서에 짧은 코드를 할당하고, 낮은 빈도의 양자화된 잠재 텐서에 비교적 긴 코드를 할당하여 전체 비트 전송률을 최소화하는 방식으로 수행될 수 있다. 일 실시예에서, 비트스트림에 대해 엔트로피 복호화 및 역 양자화가 적용되어 복원된 잠재 텐서 (k')가 획득될 수 있다. 일 실시예에서, 엔트로피 복호화는, 엔트로피 부호화를 통해 부호화된 데이터를 양자화된 잠재 텐서로 복 원하는 과정으로서, 엔트로피 부호화에서 사용된 통계적 특성과 부호화 방식을 역으로 적용하여 수행될 수 있다. 예를 들어, 엔트로피 복호화는, 엔트로피 부호화를 통해 할당된 코드를 이용하여, 엔트로피 부호화를 통해 부호화된 데이터를 양자화된 잠재 텐서로 변환할 수 있다. 일 실시예에서, 역 양자화는 부호화 과정에서 감소된 데이터의 정밀도를 복원하기 위한 과정으로, 결정된 양자화 스텝 사이즈에 따라 매핑된 잠재 텐서를 영상 인코더로부터 획득된 잠재 텐서(k)의 값의 범위로 되돌리 는 동작일 수 있다. 예를 들어, 역 양자화는 양자화 스텝 사이즈를 이용하여 매핑된 잠재 텐서를 대응되 는 원본 잠재 텐서(k)에 가까운 값을 갖는 복원된 잠재 텐서(k')를 획득할 수 있다. 일 실시예에서, 비트스트림에 대해 엔트로피 복호화 및 역 양자화가 적용되어 복원된 잠재 텐서 (k')가 영상 디코더로 입력될 수 있다. 영상 디코더는 훈련을 통해 설정된 파라미터에 따라 잠재 텐서(k')를 처리하여 현재 복원 영상을 출력할 수 있다. 인트라 예측에서는 현재 영상 내의 공간적 특징이 고려되므로, 도 2에 도시된 인터 예측과 달리 현재 영 상만이 영상 인코더로 입력될 수 있다. 도 21은 본 개시의 일 실시예에 따른 인터 예측에 기반한 현재 영상의 부호화 및 복호화 과정을 설명하기 위한 도면이다. 일 실시예에서, 인터 예측에서는 옵티컬 플로우 인코더, 옵티컬 플로우 인코더, 잔차 인코더 및 잔차 디코더가 이용될 수 있다. 한편, 옵티컬 플로우 인코더 및 잔차 인코더를 포함하는 장치를 영상 부호화 장치라고 지칭하고, 옵티컬 플로우 디코더 및 잔차 디코더를 포함하는 장치를 영상 복호화 장치라고 지칭할 수 있다. 일 실시예에서, 옵티컬 플로우 인코더, 옵티컬 플로우 인코더, 잔차 인코더 및 잔차 디코더 는 신경망으로 구현될 수 있다. 일 실시예에서, 옵티컬 플로우 인코더와 옵티컬 플로우 인코더는 현재 영상과 이전 복원 영 상으로부터 옵티컬 플로우(g)를 추출하기 위한 신경망으로 이해될 수 있다. 일 실시예에서, 잔차 인코더와 잔차 디코더는 잔차 영상(r)의 부호화 및 복호화를 위한 신경망으로 이해될 수 있다. 일 실시예에서, 인터 예측은 현재 영상과 이전 복원 영상 사이의 시간적 중복성을 이용하여 현재 영상을 부호화 및 복호화하는 과정이다. 이전 복원 영상은 현재 영상의 처리 전에 처리 대상 이었던 이전 영상에 대한 복호화를 통해 획득된 영상일 수 있다. 일 실시예에서, 현재 영상 내 블록들 또는 샘플들과 이전 복원 영상 내 참조 블록들 또는 참조 샘 플들 사이의 위치 차이(또는 움직임 벡터)가 현재 영상의 부호화 및 복호화에 이용될 수 있다. 이러한 위 치 차이는 옵티컬 플로우로 참조될 수 있다. 옵티컬 플로우는 영상 내 샘플들 또는 블록들에 대응하는 움직임 벡터들의 집합으로 정의될 수도 있다. 일 실시예에서, 옵티컬 플로우(g)는 이전 복원 영상 내 샘플들의 위치가 현재 영상 내에서 어떻게 변경되었는지, 또는 현재 영상의 샘플들과 동일/유사한 샘플들이 이전 복원 영상 내 어디에 위치하 는지를 나타낼 수 있다. 예를 들어, 현재 영상 내 (1, 1)에 위치한 샘플과 동일 또는 가장 유사한 샘플이 이전 복원 영상에 서 (2, 1)에 위치한다면, 해당 샘플에 대한 옵티컬 플로우(g) 또는 움직임 벡터는 (1(=2-1), 0(=1-1))으로 도출 될 수 있다. 일 실시예에서, 현재 영상의 부호화를 위해, 이전 복원 영상과 현재 영상이 옵티컬 플로우 인코더로 입력될 수 있다. 일 실시예에서, 옵티컬 플로우 인코더는 훈련의 결과로 설정된 파라미터에 따라 현재 영상과 이전 복원 영상을 처리하여 옵티컬 플로우(g)의 잠재 텐서(w)를 출력할 수 있다. 도 20에서 설명한 바와 같이, 옵티컬 플로우(g)의 잠재 텐서(w)에 대해 양자화 및 엔트로피 부호화(205 2)가 적용되어 비트스트림이 생성되고, 비트스트림에 대해 엔트로피 복호화 및 역 양자화가 적용되 어 옵티컬 플로우(g)의 잠재 텐서(w)가 복원될 수 있다. 일 실시예에서, 옵티컬 플로우(g)의 잠재 텐서(w)는 옵티컬 플로우 인코더로 입력될 수 있다. 옵티컬 플 로우 인코더는 입력된 잠재 텐서(w)를 훈련의 결과로 설정된 파라미터에 따라 처리하여 옵티컬 플로우 (g)를 출력할 수 있다. 일 실시예에서, 이전 복원 영상은 옵티컬 플로우(g)에 기반한 워핑을 통해 워핑되고(warped), 워핑 의 결과로 현재 예측 영상(x')이 획득될 수 있다. 워핑이란, 영상 내 샘플들의 위치를 이동시키는 기하학적 변형의 한 종류이다. 일 실시예에서, 이전 복원 영상 내 샘플들과 현재 영상 내 샘플들 사이의 상대적인 위치 관계를 나 타내는 옵티컬 플로우(g)에 따라 이전 복원 영상에 대해 워핑이 적용됨으로써 현재 영상과 유사한 현재 예측 영상(x')이 획득될 수 있다. 예를 들어, 이전 복원 영상 내 (1, 1)에 위치한 샘플이 현재 영상 내 (2, 1)에 위치하는 샘플과 가 장 유사하다면, 워핑을 통해 이전 복원 영상 내 (1, 1)에 위치한 샘플의 위치가 (2, 1)로 변경될 수 있다. 일 실시예에서, 이전 복원 영상으로부터 생성된 현재 예측 영상(x')은 현재 영상 자체가 아니므로, 현재 예측 영상(x')과 현재 영상 사이의 잔차 영상(r)이 획득될 수 있다. 예를 들어, 현재 영상 내 샘플 값들로부터 현재 예측 영상(x') 내 샘플 값들을 차감함으로써 잔차 영상 (r)이 획득될 수 있다. 일 실시예에서, 잔차 영상(r)은 잔차 인코더로 입력될 수 있다. 잔차 인코더는 훈련의 결과로 설정 된 파라미터에 따라 잔차 영상(r)을 처리하여 잔차 영상(r)의 잠재 텐서(v)를 출력할 수 있다. 도 20에서 설명한 바와 같이, 잔차 영상(r)의 잠재 텐서(v)에 대해 양자화 및 엔트로피 부호화가 적용되어 비트스트림이 생성되고, 비트스트림에 대해 엔트로피 복호화 및 역 양자화가 적용되어 잔 차 영상(r)의 잠재 텐서(v)가 복원될 수 있다. 일 실시예에서, 잔차 영상(r)의 잠재 텐서(v)는 잔차 디코더로 입력될 수 있다. 잔차 디코더는 입 력된 잠재 텐서(v)를 훈련의 결과로 설정된 파라미터에 따라 처리하여 복원된 잔차 영상(r')을 출력할 수 있다. 일 실시에에서, 현재 예측 영상(x')과 복원된 잔차 영상(r')이 결합됨으로써 현재 복원 영상이 획득될 수 있다. 이하에서는, 도 22를 참조하여, 연속하는 영상들 사이에서 획득되는 옵티컬 플로우들과 잔차 영상들 사이의 관 계에 대해 설명한다. 도 22는 연속하는 영상들, 연속하는 영상들 사이의 옵티컬 플로우, 및 연속하는 영상들 사이의 잔차 영상을 예 시하는 도면이다. 도 22를 참조하면, 현재 영상과 제1 이전 영상 사이에서 제1 옵티컬 플로우가 획득되고, 제1 이전 영상과 제2 이전 영상 사이에서 제2 옵티컬 플로우이 획득된다. 도 22에 도시된 제1 옵티컬 플로우 및 제2 옵티컬 플로우는 옵티컬 플로우에 포함된 샘플들의 크기 또는 움직임 벡터들의 크기(magnitude)에 따라 시각화한 것이다. 제1 옵티컬 플로우는 현재 옵티컬 플로 우로 참조되고, 제2 옵티컬 플로우는 이전 옵티컬 플로우로 참조될 수 있다. 일 실시예에서, 현재 영상과 제1 이전 영상에 기반하여 제1 잔차 영상가 획득되고, 제1 이전 영상과 제2 이전 영상에 기반하여 제2 잔차 영상가 획득된다. 일 예로, 제1 이전 영상을 제1 옵티컬 플로우에 따라 처리(예를 들어, 워핑 처리)한 영상과 현재 영상사이의 차이에 대응하는 제1 잔차 영상가 획득될 수 있다. 또한, 제2 이전 영상을 제2 옵티컬 플로우에 따라 처리(예를 들어, 워핑 처리)한 영상과 제1 이전 영상 사이의 차이에 대응하 는 제2 잔차 영상가 획득될 수 있다. 제1 잔차 영상는 현재 잔차 영상으로 참조되고, 제2 잔차 영상는 이전 잔차 영상으로 참조될 수 있 다. 도 23은 본 개시의 일 실시예에 따른 영상 복호화 장치의 구성을 도시하는 블록도이다. 일 실시예에서 영상 복호화 장치는, 블록 분할 기반의 영상 부복호화를 수행하는 경우와 신경망 기반의 영상 부복호화를 수행하는 경우로 구별될 수 있다. 먼저 블록 분할 기반의 영상 부복호화를 수행하는 경우의 동 작을 설명하고, 신경망 기반의 영상 부복호화를 수행하는 경우의 동작을 설명한다. 일 실시예에 따라 블록 분할 기반의 영상 부복호화를 수행하는 경우에서, 도 23을 참조하면, 영상 복호화 장치 는 획득부 및 예측 복호화부를 포함할 수 있다. 도 23에 도시된 획득부는 도 1에 도시 된 비트스트림 획득부에 대응하고, 예측 복호화부는 도 1에 도시된 복호화부에 대응할 수 있다. 또한, 획득부는 도 19에 도시된 엔트로피 복호화부에 대응할 수 있고, 예측 복호화부 는 도 19에 도시된 예측 복호화부에 대응할 수 있다. 일 실시예에서, 획득부 및 예측 복호화부는 적어도 하나의 프로세서로 구현될 수 있다. 일 실시예 에서, 획득부 및 예측 복호화부는 메모리에 저장된 인스트럭션에 따라 동작할 수 있다. 일 실시예에서, 영상 복호화 장치는 획득부 및 예측 복호화부의 입출력 데이터를 저장하는 메모리를 포함할 수 있다. 또한, 영상 복호화 장치는, 메모리의 데이터 입출력을 제어하는 메모리 제어부 를 포함할 수 있다. 일 실시예에서, 적어도 하나의 프로세서는 이하에서 설명되는 실시예들에 따라 영상 복호화 장치가 동작 하도록 일련의 과정을 제어하는 구성으로서, 하나 또는 복수의 프로세서로 구성될 수 있다. 프로세서에 포함되 는 하나 또는 복수의 프로세서는 SoC (System on Chip), IC (Integrated Circuit) 등과 같은 회로 장치 (circuitry)일 수 있다. 프로세서에 포함되는 하나 또는 복수의 프로세서는 CPU (Central Processing Unit), MPU (Micro Processor Unit), AP (Application Processor), DSP (Digital Signal Processor) 등과 같은 범용 프로세서, GPU (Graphic Processing Unit), VPU (Vision Processing Unit)와 같은 그래픽 전용 프로세서, NPU (Neural Processing Unit)와 같은 인공지능 전용 프로세서 또는 CP (Communication Processor)와 같은 통신 전 용 프로세서일 수 있다. 프로세서에 포함되는 하나 또는 복수의 프로세서가 인공지능 전용 프로세서인 경우, 해 당 인공지능 전용 프로세서는 특정 인공지능 모델의 처리에 특화된 하드웨어 구조로 설계될 수 있다. 일 실시예에서, 프로세서는 메모리에 데이터를 기록하거나, 메모리에 저장된 데이터를 읽을 수 있으며, 특히 메 모리에 저장된 프로그램 또는 적어도 하나의 인스트럭션을 실행함으로써 미리 정의된 동작 규칙 또는 인공지능 모델에 따라 데이터를 처리할 수 있다. 따라서, 프로세서는 본 개시의 실시예들에서 설명되는 동작들을 수행할 수 있으며, 본 개시의 실시예들에서 영상 복호화 장치 또는 영상 복호화 장치에 포함되는 세부 구 성들(도 23의 2310, 및 2330)이 수행한다고 설명되는 동작들은 특별한 설명이 없는 한 프로세서가 수행하는 것으로 볼 수 있다. 일 실시예에서, 메모리는 다양한 프로그램이나 데이터를 저장하기 위한 구성으로서, 롬(ROM), 램(RAM), 하드디 스크, CD-ROM 및 DVD 등과 같은 저장 매체 또는 저장 매체들의 조합으로 구성될 수 있다. 메모리는 별도로 존재 하지 않고 프로세서에 포함되도록 구성될 수도 있다. 메모리는 휘발성 메모리, 비휘발성 메모리 또는 휘발성 메 모리와 비휘발성 메모리의 조합으로 구성될 수도 있다. 메모리에는 이후에서 설명되는 실시예들에 따른 동작들 을 수행하기 위한 프로그램 또는 적어도 하나의 인스트럭션이 저장될 수 있다. 메모리는 프로세서의 요청에 따 라 저장된 데이터를 프로세서에 제공할 수도 있다. 일 실시예에서, 획득부는 영상의 부호화 결과로 생성된 비트스트림을 획득할 수 있다. 일 실시예에서, 비트스트림은 현재 블록에 대한 부호화 결과를 포함할 수 있다. 비트스트림은 현재 블록을 복원 하기 위해 이용되는 정보들을 포함할 수 있다. 현재 블록은 복호화하고자 하는 현재 영상으로부터 분할된 최대 부호화 단위, 부호화 단위, 변환 단위, 예측 단위, 또는 필터링 단위일 수 있다. 또한, 현재 블록은 현재 수행 하는 부호화 또는 복호화 동작에서 처리하는 소정 위치의 블록일 수 있다. 현재 샘플은 현재 블록에 포함된 임 의의 샘플일 수 있다. 일 실시예에서, 예측 복호화부는 현재 영상을 복원하기 위해 예측 영상을 생성할 수 있으며, 예측 영상을 생성하기 위해 시퀀스 파라미터 세트(sequence parameter set), 픽처 파라미터 세트(picture parameter set), 비디오 파라미터 세트(video parameter set), 슬라이스 헤더(slice header) 및 슬라이스 세그먼트 헤더(slice segment header) 중 적어도 하나의 레벨에 대응하는 비트스트림에 포함된 예측 정보에 기반하여 현재 블록에 대 한 예측 영상을 생성 또는 결정할 수 있다. 예측 정보는, 현재 영상을 예측하기 위해 이용하는 정보일 수 있다. 일 실시예에서, 획득부는 비트스트림을 영상 부호화 장치로부터 네트워크를 통해 수신할 수 있다. 일 실시예에서, 획득부는 하드 디스크, 플로피 디스크 및 자기 테이프와 같은 자기 매체, CD-ROM 및 DVD 와 같은 광기록 매체, 플롭티컬 디스크(floptical disk)와 같은 자기-광 매체(magneto-optical medium) 등을 포함하는 데이터 저장 매체로부터 비트스트림을 획득할 수 있다. 일 실시예에서, 획득부는 비트스트림으로부터 영상의 복호화를 위한 신택스 엘리먼트(syntax element)들 을 획득할 수 있다. 신택스 엘리먼트들에 해당하는 값들은 영상의 계층 구조에 따라 비트스트림에 포함될 수 있 다. 획득부는 비트스트림에 대해 엔트로피 디코딩을 수행하여 신택스 엘리먼트들에 대응하는 빈들을 획득 할 수 있다. 일 실시예에서, 비트스트림은 현재 영상을 포함하는 현재 슬라이스의 슬라이스 타입을 나타내는 정보를 포함할 수 있다. 예를 들어, 비트스트림은, 현재 슬라이스의 타입을 나타내는 정보를 인덱스로서 포함할 수 있다. 현재 슬라이스의 슬라이스 타입은 I 슬라이스, P 슬라이스, B 슬라이스에 각각 대응하는 인덱스로서 나타낼 수 있다. I 슬라이스는, 참조(reference)를 이용하지 않고 독립적으로 인코딩된 슬라이스를 나타내며, 현재 영상 내의 데 이터만을 이용하여 부, 복호화하는 슬라이스를 나타내며, P 슬라이스는, 이전 영상 또는 이전 슬라이스에서 예 측된 데이터를 이용하여 인코딩된 슬라이스를 나타내며, B 슬라이스는 이전 프레임 또는 이후 프레임 등에서 미 리 예측된 데이터 중 둘 이상의 참조를 이용하는 슬라이스를 나타낼 수 있다 일 실시예에서, 비트스트림은 현재 영상을 예측하기 위해 이용하는 예측 정보를 포함할 수 있다. 예를 들어 비 트스트림은, 현재 영상 내 현재 블록의 예측 모드에 대한 정보를 포함할 수 있다. 현재 블록의 예측 모드는 인 트라(intra) 모드, 또는 인터(inter) 모드일 수 있다. 한편, 인트라 모드는 현재 블록과 유사한 이웃 샘플들이 위치하는 방향 또는 예측 샘플을 이용하여 현재 블록을 예측 또는 복원하는 모드이며, 인터 모드는 영상들 사이 의 시간적 중복성을 감소시키기 위해 참조 영상에 기반하여 현재 블록을 예측 또는 복원하는 모드일 수 있다. 일 실시예에서, 현재 블록의 예측 모드가 인트라 모드인 경우, 예측 정보는 현재 블록의 예측 방향에 대한 정보 를 포함할 수 있다. 일 실시예에서, 현재 블록의 예측 모드가 인터 모드인 경우, 예측 정보는 참조 블록을 결정하기 위한 정보를 포 함할 수 있다. 예를 들어, 참조 블록을 결정하기 위한 정보는 참조 픽처 리스트 내의 참조 영상을 가리키는 인 덱스 및 움직임 정보를 포함할 수 있으나, 개시된 예에 한하지 않는다. 일 실시예에서, 예측 복호화부는 참조 영상에 기반하여 현재 블록을 복원할 때, 하나의 참조 영상을 이용 (예를 들어, 단방향 예측)할 수도 있고, 두 개의 참조 영상을 이용(예를 들어, 쌍 예측(bi-prediction))할 수도 있다. 현재 블록이 단방향 예측되는지, 쌍 예측되는지 여부는, 비트스트림에 포함된 명시적 정보에 따라 결정될 수도 있고, 현재 블록과 관련된 주변 블록들의 예측 모드로부터 암시적으로 결정될 수도 있다. 일 실시예에서, 예측 복호화부는 예측 블록의 예측 모드에 따라 현재 블록에 대해 인트라 예측 또는 인터 예측을 수행하여 현재 블록의 예측 블록을 생성할 수 있다. 또한, 영상 복호화부는, 예측 블록을 이용하 여 현재 블록을 복원할 수 있다. 예를 들어, 영상 복호화부는 예측 블록과 잔차 블록을 이용하여 현재 블 록을 복원할 수 있다. 영상 복호화부는 예측 샘플들과 잔차 샘플들을 조합하여 현재 블록의 복원 샘플들 을 결정할 수 있다. 일 실시예에서, 획득부는 비트스트림으로부터, 현재 블록의 양자화된 변환 계수들을 획득할 수 있다. 영 상 복호화 장치는, 양자화된 변환 계수들에 대해 소정 양자화 파라미터에 기초하여 스케일링을 수행함으 로써, 현재 블록에 대해 역 양자화를 수행할 수 있다. 영상 복호화 장치는 역 양자화를 통해 현재 블록의 변환 계수들을 획득할 수 있다. 일 실시예에서, 영상 복호화 장치는 역 양자화를 수행하기 위해 양자화 파라미터(Quantization Parameter; QP)를 이용할 수 있다. 양자화 파라미터는 부호화 단위별로 설정될 수 있으며, 부호화 단위에 포함 된 변환 계수들에 하나의 양자화 파라미터가 적용될 수 있다. 일 실시예에서, 영상은 하나의 이상의 슬라이스를 포함할 수 있고, 하나의 슬라이스는 하나 이상의 최대 부호화 단위(CTU)를 포함할 수 있으며, 하나의 최대 부호화 단위는, 하나 이상의 부호화 단위를 포함할 수 있다. 영상 복호화 장치는, 영상, 슬라이스, 최대 부호화 단위, 또는 부호화 단위별로 양자화 파라미터를 결정하기 위해 필요한 정보들을 비트스트림으로부터 획득할 수 있다. 이하의 현재 블록은 영상, 슬라이스, 최대 부호화 단위, 부호화 단위 중 하나를 의미하는 것일 수 있으며 해당 동작에서 처리되는 단위를 나타낸다. 일 실시예에서, 획득부는 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득 할 수 있다. 획득부는 비트스트림으로부터 차분 양자화 파라미터를 획득하고, 이전 블록에 대한 이전 양자화 파라미터와 차분 양자화 파라미터를 이용하여 현재 블록에 대한 양자화 파라미터를 결정 또는 획득할 수 있다. 일 실시예에서, 획득부는 비트스트림으로부터 미리 결정된 양자화 리스트에 포함된 복수의 양자화 파라미 터들 중 하나를 나타내는 양자화 인덱스를 획득할 수 있다. 또는, 획득부는 비트스트림으로부터 양자화 리스트에 포함된 복수의 양자화 파라미터들에 대한 정보를 획득하고, 복수의 양자화 파라미터들 중 하나를 나타 내는 양자화 인덱스를 획득할 수 있다. 또는, 획득부는 직접적으로 양자화 파라미터 값을 나타내는 정보 를 획득할 수 있다. 한편, 현재 블록에 대한 양자화 파라미터를 나타내는 정보는 개시된 예에 한하지 않는다. 일 실시예에서, 현재 블록 내에 포함된 변환 계수들의 가로축 위치 및 세로축 위치는 각각, 현재 블록에 대응하 는 공간 영역의 샘플들의 가로 방향의 주파수 대역 및 세로 방향의 주파수 대역에 대응한다. 변환을 통해 생성 된 현재 블록 내에 포함된 변환 계수들은, 현재 블록에 대응되는 공간 영역의 샘플값들이 주파수 대역에 따라 분류된 것이다. 현재 블록 내에 변환 계수들은, 역변환을 통해 현재 블록 내의 공간적인 위치 상의 샘플들이 복 원될 수 있다. 일 실시예에서, 예측 복호화부는 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득할 수 있다. 예측 복호화부는 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 양자화 오프셋을 결정할 수 있다. 또한, 예측 복호화 부는 양자화 오프셋을 이용하여 상기 획득한 변환 계수를 변경할 수 있다. 일 실시예에서, 획득부는 현재 블록에 대한 변환 정보를 비트스트림으로부터 획득할 수 있다. 현재 블록 에 대한 변환 정보는 현재 블록에 대한 역 변환을 수행하기 위해 필요한 모든 정보를 나타낼 수 있다. 현재 블 록에 대한 변환 정보는 변환 커널을 나타내는 정보, 서브 블록 변환(Sub-Block Transform), 저주파 비분리 변환 (Low Frequency Non-Seperable Transform) 등을 수행할지 여부를 나타내는 정보 중 적어도 하나를 포함할 수 있다. 한편, 현재 블록에 대한 변환 정보는 개시된 예에 한하지 않는다. 일 실시예에서, 예측 복호화부는, 현재 블록의 변환 계수에 대해 역 변환을 수행함으로써, 현재 블록의 잔차 블록을 획득할 수 있다. 예를 들어, 영상 복호화 장치는, 현재 블록에 대해 변환 커널을 적용하여, 현재 블록의 변환 계수를 역 변환할 수 있다. 잔차 블록은 역 변환을 수행함에 따라 복원될 수 있다. 일 실시예에서. 예측 복호화부는, 현재 블록이 변환 스킵 모드를 통해 복호화하는 경우, 비트스트림으로 부터 현재 블록의 변환 계수들을 획득할 필요가 없으며, 현재 블록의 예측 블록을 현재 블록의 복원 블록으로 결정할 수 있다. 일 실시예에서 영상 복호화 장치가 신경망 기반의 영상 부복호화를 수행하는 경우에, 획득부는 현 재 영상에 대한 신경망 기반의 부호화를 통해 생성된 비트스트림을 획득할 수 있다. 비트스트림은, 도 20에서 설명한 인트라 예측 또는 도 21에서 설명한 인터 예측을 통해 생성될 수 있다. 일 실시예에서, 획득부는, 비트스트림으로부터 양자화된 잠재 텐서를 획득할 수 있다. 양자화된 잠재 텐 서는 영상 인코더로부터 출력되는 현재 영상의 양자화된 잠재 텐서, 옵티컬 플로우 인코더로 부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w) 및 잔차 인코더로부터 출력되는 잔차 영상(r) 의 양자화된 잠재 텐서(v) 중 적어도 하나를 포함할 수 있다. 일 실시예에서, 획득부는 엔트로피 복호화부 및 역 양자화부 중 적어도 하나를 포함할 수 있다. 엔트로피 복호화부는 비트스트림에 포함된 빈들을 엔트로피 코딩하여 양자화된 잠재 텐서를 획득한다. 일 실시예에서, 획득부는 현재 블록에 대한 양자화 스텝을 나타내는 정보를 비트스트림으로부터 획득할 수 있다. 예를 들어, 획득부는 비트스트림으로부터 양자화 스텝 값을 직접적으로 획득할 수 있다. 또는, 획득부는 비트스트림으로부터 차분 양자화 스텝을 획득하고, 차분 양자화 스텝과 이전에 처리된 이전 블 록에 대한 이전 양자화 스텝을 이용하여 현재 블록에 대한 양자화 스텝을 획득할 수 있다. 일 실시예에서, 획득부는 비트스트림으로부터 미리 결정된 양자화 리스트에 포함된 복수의 양자화 스텝들 중 하나를 나타내는 양자화 인덱스를 획득할 수 있다. 영상 복호화 장치는 현재 영상을 복원하기 위해 이용하는 양자화 스텝을 결정 또는 획득할 수 있다. 한편, 신경망 기반의 영상 부복호화를 수행하는 경우의 양자화 스텝은, 잠재 텐서에 포함된 각각의 샘플 값을 양자화하는 간격을 나타내는 것으로, 잠재 텐서에 포함된 각각의 샘플을 양자화하기 위해 이용하는 값일 수 있 다. 예를 들어, 잠재 텐서에 포함된 소정의 샘플 값이 7이며, 양자화 스텝 값이 3인 경우, 잠재 텐서에 포함된 소정의 샘플 값에 대응하는 양자화된 잠재 탠서의 소정의 샘플 값을 2로 결정할 수 있다. 한편, 신경망 기반의 부복호화에서 이용하는 양자화 스텝은, 블록 분할 기반의 영상 부복호화와 연관된 양자화 스텝과 상이할 수 있 다. 예를 들어, 신경망 기반의 부복호화에서 이용하는 양자화 스텝은 양자화 간격을 의미하며, 블록 분할 기반 의 부복호화에서의 양자화 파라미터에 대응할 수 있다. 그러나, 블록 분할 기반의 부복호화에서의 양자화 스텝 은 하기 수학식 1에 따라 결정된 값일 수 있다. 한편, 블록 분할 기반의 부복호화에서 양자화 스텝을 계산하는 방식은 개시된 예에 한하지 않는다. [수학식 1] Quantization step = 2^((quantization parameter- 4)/6) * 2^(bitdepth- 8) 일 실시예에서, 역 양자화부는 양자화 스텝을 나타내는 정보를 이용하여 현재 영상의 양자화된 잠재 텐서, 옵티 컬 플로우의 양자화된 잠재 텐서 및 잔차 영상의 양자화된 잠재 텐서 중 적어도 하나를 역 양자화하여 현재 영 상의 잠재 텐서, 옵티컬 플로우의 잠재 텐서, 및 잔차 영상의 잠재 텐서 중 적어도 하나를 획득할 수 있다. 일 실시예에서, 현재 블록의 타입은, 처리 대상인 잠재 텐서가 현재 영상의 잠재 텐서인지, 옵티컬 플로우의 잠 재 텐서인지, 또는 잔차 영상의 잠재 텐서인지 여부를 나타내는 정보일 수 있다. 한편, 현재 블록은 현재의 처 리 대상인 블록을 나타낼 수 있으며, 현재 영상에 대응할 수 있다. 일 실시예에서, 잠재 텐서는 H*W*C 크기를 가질 수 있다. H 및 W는 각각 2차원 특징 데이터의 높이 및 2차원 특 징 데이터의 너비를 나타내는 값이며, C는 각기 다른 특징을 나타내는 채널의 수를 나타낼 수 있다. 잠재 텐서 는 C개의 H*W 크기의 특징 데이터를 나타내는 것일 수 있다. 일 실시예에서, 잠재 텐서의 H*W*C 개의 샘플들은 하나의 양자화 스텝을 이용하여 양자화가 수행될 수 있으며, 잠재 텐서의 각각의 채널에 포함된 H*W 개의 샘플들이 각각의 채널에 대응하는 양자화 스텝을 이용하여 양자화 될 수 있다. 일 실시예에서, 잠재 텐서의 C개의 채널 중에, C_low 채널 그룹은 낮은 주파수를 갖는 채널들의 집합일 수 있고, C_mid 채널 그룹은 중간 주파수를 갖는 채널의 집합일 수 있으며, C_high 채널 그룹은 높은 주파수를 갖 는 채널의 집합일 수 있다. 각각의 채널 그룹에 대한 인덱스 리스트는, 해당 주파수를 갖는 채널들의 인덱스에 대한 정보를 포함할 수 있다. 예를 들어, C_low 채널 그룹은 인덱스 리스트로서 나타날 수 있다. 한편, 각각의 채널 인덱스가 나타내는 특징은, 영상 복호화 장치와 영상 부호화 장치에서 공유되는 정보일 수 있다. 예 측 복호화부는 각각의 채널 그룹을 지시하는 인덱스에 따라, 채널 그룹 인덱스를 결정할 수 있다. 일 실시예에서, 획득부는 역 변환부를 더 포함할 수 있다. 역 변환부는 역 양자화부로부터 출력되는 잠재 텐서를 주파수 도메인으로부터 공간 도메인으로 역 변환할 수 있다. 후술하는 영상 부호화 장치가 잠재 텐서를 공간 도메인으로부터 주파수 도메인으로 변환하는 경우, 역 변환부는 역 양자화부로부터 출력되는 잠재 텐서를 주파수 도메인에서 공간 도메인으로 역 변환할 수 있다. 일 실시예에서, 잠재 텐서는 예측 복호화부로 전달되고, 예측 복호화부는 잠재 텐서를 이용하여 현 재 영상에 대응하는 현재 복원 영상을 획득할 수 있다. 이하, 일 실시예에서 영상 복호화 장치가 블록 분할 기반의 영상 부복호화를 수행하는 경우의 구체적인 동작은 이하 도 24에서 다시 설명한다. 일 실시예에서 영상 복호화 장치가 신경망 기반의 영상 부복호화 를 수행하는 경우의 구체적인 동작은 이하 도 25에서 다시 설명한다. 도 24는 본 개시의 일 실시예에 따른 영상 복호화 방법의 순서도이다. 일 실시예에서 영상 복호화 장치가 블록 분할 기반의 영상 부복호화를 수행하는 경우의 영상 복호화 방법 의 구체적인 동작이 후술된다. 단계 S2410에서, 영상 복호화 장치는 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트림으 로부터 획득할 수 있다. 예를 들어, 영상 복호화 장치는 비트스트림으로부터 양자화 파라미터 값을 직접적으로 획득할 수 있다. 영상 복호화 장치는 차분 양자화 파라미터 값을 획득하고, 차분 양자화 파라미터 를 이용하여 현재 블록에 대한 양자화 파라미터를 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 비트스트림으로부터 미리 결정된 양자화 리스트에 포함된 복수의 양 자화 파라미터들 중 하나를 나타내는 양자화 인덱스를 획득할 수 있다. 또는, 영상 복호화 장치는 비트스 트림으로부터 적어도 하나의 영상에 대한 양자화 리스트에 포함된 복수의 양자화 파라미터들에 대한 정보를 획 득하고, 복수의 양자화 파라미터들 중 하나를 나타내는 양자화 인덱스를 획득할 수 있다. 한편, 현재 블록에 대한 양자화 파라미터를 나타내는 정보는 개시된 예에 한하지 않는다. 단계 S2420에서, 영상 복호화 장치는 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블 록의 변환 계수를 획득할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 비트스트림으 로부터 획득한 것에 기초하여 양자화 파라미터를 결정할 수 있다. 예를 들어, 영상 복호화 장치는, 비트 스트림으로부터 양자화 파라미터를 직접적으로 획득한 것에 기초하여, 양자화 파라미터를 결정할 수 있다. 영상 복호화 장치는, 비트스트림으로부터 획득한 차분 양자화 파라미터와 이전에 처리된 이전 블록에 대한 이 전 양자화 파라미터를 이용하여 현재 블록에 대한 양자화 파라미터를 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 양자화 리스트에 포함된 복수의 양자화 파라미터들 중 하나를 나타내 는 양자화 인덱스를 획득하여, 양자화 인덱스에 대응하는 양자화 파라미터 값을 현재 블록에 대한 양자화 파라 미터로서 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 비트스트림으로부터 현재 블록의 양자화된 변환 계수를 획득할 수 있 다. 영상 복호화 장치는, 양자화된 변환 계수에 대해 결졍된 양자화 파라미터를 이용하여 스케일링을 수 행함으로써, 역 양자화를 수행할 수 있다. 영상 복호화 장치는, 역 양자화릍 통해 현재 블록의 변환 계수 를 획득할 수 있다. 현재 블록에 대응하는 변환 계수는 적어도 하나일 수 있다. 단계 S2430에서, 영상 복호화 장치는 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라 이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다.일 실시예에서, 영상 복호화 장 치는 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포 함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초한 룩업 테이블(Look-up Table)을 이용하여 현재 블록을 위한 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나 에 각각 대응하는 인덱스 값을 룩업 테이블에 적용한 것에 기초하여, 현재 블록을 위한 양자화 오프셋을 획득할 수 있다. 한편, 본 개시에서, 현재 블록에 포함된 변환 계수의 주파수 대역은, 현재 블록에 포함된 변환 계수에 대응하는 주파수를 포함하는 주파수 대역을 나타내는 것일 수 있으며, 현재 블록의 주파수 대역으로 지칭될 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록의 예측 모드, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 또는, 영상 복호화 장치는, 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 한편, 개시된 예에 한하지 않고, 영상 복호화 장치는, 슬라이스 단위로 복수의 양자화 오프셋 중에 하나 의 양자화 오프셋을 결정할 수도 있으며, 샘플 단위로 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정 할 수도 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록의 예측 모드에 기초하여, 복수의 양자화 오프셋 중에 하 나의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는, 현재 블록의 예측 모드가 인트라 모드인 경 우, 예측 모드 인덱스 값을 0으로 결정하고, 현재 블록의 예측 모드가 단방향 예측을 수행하는 인터 모드인 경 우, 예측 모드 인덱스 값을 1로 결정하고, 현재 블록의 예측 모드가 쌍 예측을 수행하는 인터 모드인 경우, 예 측 모드 인덱스 값을 2로 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록을 포함하는 현재 슬라이스의 타입에 기초하여, 복수의 양 자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는, 현재 슬라이스의 타입이 I 슬라이스인 경우, 슬라이스 타입 인덱스 값을 0으로 결정하고, 현재 슬라이스의 타입이 P 슬라이스인 경우 슬 라이스 타입 인덱스 값을 1로 결정하며, 현재 슬라이스의 타입이 B 슬라이스인 경우, 타입 인덱스 값을 2로 결 정할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 포함된 변환 계수의 주파수 대역에 기초 하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는 현재 블 록에 포함된 변환 계수에 대응하는 주파수가 포함되는 주파수 대역을 저주파, 중주파, 고주파 대역으로 분류할 수 있다. 또한, 영상 복호화 장치는, 결정된 소정의 주파수 대역에 따라 주파수 인덱스를 결정할 수 있다. 예를 들어, 현재 블록에 포함된 소정의 변환 계수에 대한 주파수가 저주파 주파수 대역에 포함되는 경우, 주파수 인덱스를 0으로 결정할 수 있다. 현재 블록에 포함된 소정의 변환 계수에 주파수가 중주파 주파수 대역 에 포함되는 경우, 주파수 인덱스를 1로 결정할 수 있다. 현재 블록에 포함된 소정의 변환 계수에 대한 주파수 가 고주파 주파수 대역에 포함되는 경우, 주파수 인덱스를 2로 결정할 수 있다. 한편, 일 실시예에 따른, 현재 블록에 대한 주파수 대역을 분류하는 동작은, 도 28 내지 도 29에서 자세히 설명 하고자 한다. 일 실시예에서, 영상 복호화 장치는, 결정된 양자화 파라미터 값에 따라, 룩업 테이블을 이용하여 양자화 오프셋을 결정하기 위한 QP 인덱스를 결정할 수 있다. 한편, 상기 룩업 테이블은, 기 결정되어 영상 복호화 장치 및 영상 부호화 장치에 저장된 정보일 수 있다. 또한, 상기 룩업 테이블은, 오프셋 테이블 또는 오프셋 파라미터 테이블을 포함할 수 있다. 한편, 오프셋 테이블은, 소정의 정보에 따라, 오프셋의 값을 출력하도록 미리 결정된 테이블일 수 있다. 오프셋 파라미터 테 이블은 소정의 정보에 따라, 오프셋 파라미터의 값을 출력하도록 미리 결정된 테이블일 수 있다. 일 실시예에서, 복수의 양자화 오프셋은, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 슬라이스의 슬라이 스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어도 하나를 이용하 여 미리 결정된 오프셋 테이블 또는 오프셋 파라미터 테이블에 따라 결정될 수 있다. 일 실시예에서, 오프셋 테이블에 따라, 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 및 현재 블록의 양자 화 파라미터를 이용하여 양자화 오프셋을 결정하는 일 실시예를 식으로 나타내면 하기와 같다. 한편, 설명의 편 의상, 현재 블록을 포함하는 현재 슬라이스 타입에 기초하여 양자화 오프셋을 결정하는 식은 생략되었으나, 본 개시에서 현재 블록의 예측 모드(PredictionMode)는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입 (SliceType)으로 대체 또는 대응될 수 있다. offset = offsetTable[PredictionMode][FrequencyBand][QP][quantizedMagnitude] 상기 식에서, offset은 양자화 오프셋, offsetTable은 오프셋 테이블, PredictionMode는 현재 블록의 예측 모 드, FrequencyBand 는 주파수 대역, QP는 양자화 파라미터, quantizedMagnitude는 양자화된 변환 계수를 나타 낼 수 있다. 한편, 일부의 인자들만을 이용하여, 오프셋 값을 결정할 수 있다. 예를 들어, 변환 스킵 모드인 경우, 하기의 식에 따라 오프셋 값을 결정할 수 있다. offset = offsetTable[PredictionMode][QP][quantizedMagnitude] 한편, 상기의 개시에 한하지 않고, 영상 복호화 장치는, 현재 블록의 예측 모드, 현재 블록의 주파수 대 역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여 오프셋 파라미터 테이블을 이용하여 오프셋 파 라미터를 결정할 수 있다. 영상 복호화 장치는 오프셋 테이블을 이용하여 결정된 오프셋 파라미터에 따라 양자화 오프셋을 결정할 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "상기 식에서, 는 오프셋 파라미터를 나타낼 수 있다. 오프셋 테이블은, 오프셋 파라미터의 값에 반비례하는 테이블로서, 오프셋 파라미터 값은 미리 결정되어 있을 수 있다. 영상 복호화 장치는 양자화된 변환 계수 를 인덱스 값으로 획득하여 오프셋 테이블에 따라 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 오프셋 테이블을 이용하여 현재 블록의 예측 모드에 따라 양자화 오 프셋을 상이한 값으로 결정할 수 있다. 예를 들어, 영상 복호화 장치는 오프셋 테이블을 이용하여, 현재 블록의 예측 모드가 인터 모드인 경우 제1 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로 결정할 수 있 고, 현재 블록의 예측 모드가 인트라 모드인 경우 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로 결 정할 수 있다. 한편, 제1 양자화 오프셋의 값이 제2 양자화 오프셋의 값보다 클 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록의 예측 모드가 인터 모드인 경우에 따른 양자화 오프셋보 다 작은 값을 갖는 현재 블록의 예측 모드가 인트라 모드인 경우에 따른 양자화 오프셋의 값을, 현재 블록에 대 한 양자화 오프셋으로 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록에 대해 단방향 예측이 수행되는 경우에 따른 양자화 오프 셋보다 큰 값을 갖는, 현재 블록에 대해 양방향 예측이 수행되는 경우에 따른 양자화 오프셋을 현재 블록에 대 한 양자화 오프셋으로 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 오프셋 테이블을 이용하여 현재 블록의 주파수 대역에 따라 양자화 오프셋을 상이한 값으로 결정할 수 있다. 영상 복호화 장치는, 주파수 대역이 높을수록 더 큰 값의 양자 화 오프셋을 결정할 수 있다. 예를 들어, 영상 복호화 장치는 현재 블록의 주파수 대역이 저주파 대역인 경우보다, 주파수 대역이 고주파 대역인 경우 더 큰 양자화 오프셋 값을 현재 블록을 위한 양자화 오프셋으로서 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 오프셋 테이블을 이용하여 현재 블록의 양자화 파라미터에 따라 양 자화 오프셋을 상이한 값으로 결정할 수 있다. 영상 복호화 장치는, 양자화 파라미터 값이 클수록 더 큰 값의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는, 양자화 파라미터의 값이 제1 양자화 파라미 터보다 큰 제2 양자화 파라미터인 경우, 제1 양자화 파라미터에 기초하여 결정된 제1 양자화 오프셋보다 큰 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로서 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 오프셋 테이블을 이용하여 현재 블록의 양자화된 변환 계수에 따라 양자화 오프셋을 상이한 값으로 결정할 수 있다. 영상 복호화 장치는, 현재 블록의 양자화된 변환 계수가 작을수록 큰 양자화 오프셋 값을 결정할 수 있다. 예를 들어, 영상 복호화 장치는 현재 블록에 대한 양자 화된 변환 계수 값이 제1 양자화된 변환 계수 값보다 작은 제2 양자화된 변환 계수인 경우, 제1 양자화된 변환 계수에 기초하여 결정된 제1 양자화 오프셋보다 큰 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로서 결정할 수 있다. 이하, 일 실시예에서, 영상 복호화 장치가 오프셋 테이블을 이용하여 현재 블록의 양자화 파라미터에 따 라 양자화 오프셋을 결정하는 동작에 대해 구체적으로 설명한다. 예를 들어, 영상 복호화 장치는, 하기의 식에 따라, 양자화 파라미터에 따른 QP 인덱스를 결정하고, QP 인덱스에 대응하는 오프셋 파라미터를 결정할 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "상기 식에서, 영상 복호화 장치는, 양자화 파라미터(QP) 값에 따라, qpIdx로 나타나는 양자화 파라미터에 따른 제1 인덱스를 결정할 수 있다. 또한, 영상 복호화 장치는, 미리 결정된 오프셋 파라미터 테이블인 offsetparameterTable[]에 대하여 제1 인덱스를 인덱스 값으로 입력하여, 오프셋 파라미터를 결정 또는 획득할 수 있다. 예를 들어, QP가 25인 경우, 제1 인덱스는 1이며, 오프셋 파라미터는 98일 수 있다.하기 식에서, 영상 복호화 장치는, 하기의 식에 따라, 양자화된 변환 계수에 따른 제2 인덱스를 결정하고, 오프셋 테이블에 대해 양자화된 변환 계수에 따른 제2 인덱스에 대응하는 양자화 오프셋을 결정할 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "상기 식에서, 영상 복호화 장치는, 오프셋 파라미터와 양자화된 변환 계수의 절대값 중 작은 값에 따라, yIdx로 나타나는 제2 인덱스를 결정할 수 있다. 또한, 영상 복호화 장치는, 오프셋 파라미터에 의해 미리 결정된 오프셋 테이블인 offsetTable[]에 대하여 제2 인덱스를 인덱스 값으로 입력하여, 양자화 오프셋을 결정 또는 획득할 수 있다. 예를 들어, 오프셋 파라미터가 16, 양자화된 변환 계수가 8인 경우, 제2 인덱스는 8이며, 양자화 오프셋은 2일 수 있다. 단계 S2440에서, 영상 복호화 장치는 결정된 양자화 오프셋을 이용하여 변환 계수를 변경할 수 있다. 일 실시예에서, 영상 복호화 장치는, 획득된 현재 블록의 변환 계수를 결정된 양자화 오프셋을 이용하여 변경할 수 있다. 예를 들어, 영상 복호화 장치는, 역 양자화를 통해 획득한 현재 블록에 대한 적어도 하 나의 변환 계수를 각각의 변환 계수에 대응하는 양자화 오프셋을 이용하여 수정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 결정된 양자화 오프셋을 이용하여 변환 계수에 대한 보간을 수행함 으로써, 양자화 시프트(Quantization Shift)를 수행할 수 있다. 한편, 변환 계수를 변경하는 동작이 양자화 시 프트를 수행하는 단계일 수 있다. 예를 들어, 영상 복호화 장치는, 양자화 오프셋을 이용하여 변환 계수의 값 및 변환 계수와 연속된 값에 대한 보간을 수행함으로써, 양자화 시프트를 수행할 수 있다. 일 실시예에서, 양자화 시프트는, 획득한 변환 계수 및 변환 계수와 연속하는 값 및 양자화 오프셋 값을 이용하 여 수행될 수 있다. 예를 들어, 양자화 오프셋에 따른 양자화 시프트는 하기 수학식 2에 따라 수행될 수 있다. [수학식 2]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 6, "content": "상기 식에서, 은, 변경된 변환 계수의 값을 나타낼 수 있다. 는 상수로서, 양자화 오프셋의 정밀도를 제 어하는 파라미터일 수 있다. 는 양자화된 변환 계수이며, 는 양자화된 변환 계수에 따라 결정되는 값일 수 있다. 예를 들어, 는 수학식 3에 따라 결정될 수 있다. [수학식 3]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 7, "content": "일 실시예에서, 수학식 2를 달리 표현하면, 수학식 4와 같이 나타낼 수 있다. [수학식 4]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 8, "content": "한편, 양자화 오프셋을 이용하여 변환 계수를 변경하는 방식은 개시된 예에 한하지 않는다. 일 실시예에서, 영상 복호화 장치는 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 현재 블록의 양자 화 파라미터 중 적어도 하나에 기초하여 결정된 양자화 오프셋을 이용하여 역 양자화를 수행하여 획득한 변환 계수를 변경할 수 있다. 도 25는 본 개시의 일 실시예에 따른 영상 복호화 방법의 순서도이다. 일 실시예에서 영상 복호화 장치가 신경망 기반의 영상 부복호화를 수행하는 경우에, 영상 복호화 방법의 구체적인 동작이 후술된다. 단계 S2510에서, 영상 복호화 장치는 현재 블록에 대한 양자화 스텝을 나타내는 정보를 비트스트림으로부터 획 득할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 대한 양자화 스텝을 나타내는 정보를 비트스트림으로부 터 획득할 수 있다. 예를 들어, 영상 복호화 장치는 비트스트림으로부터 양자화 스텝 값을 직접적으로 획 득할 수 있다. 또는, 영상 복호화 장치는 비트스트림으로부터 차분 양자화 스텝을 획득하고, 차분 양자화 스텝을 이용하여 현재 블록에 대한 양자화 스텝을 획득할 수 있다. 일 실시예에서, 영상 복호화 장치는 비트스트림으로부터 미리 결정된 양자화 리스트에 포함된 복수의 양 자화 스텝들 중 하나를 나타내는 양자화 인덱스를 획득할 수 있다. 또는, 영상 복호화 장치는 비트스트림 으로부터 적어도 하나의 영상에 대한 양자화 리스트에 포함된 복수의 양자화 스텝들에 대한 정보를 획득하고, 복수의 양자화 스텝들 중 하나를 나타내는 양자화 인덱스를 획득할 수 있다. 한편, 현재 블록에 대한 양자화 스텝을 나타내는 정보는 개시된 예에 한하지 않는다. 단계 S2520에서, 영상 복호화 장치는 양자화 스텝을 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서를 획득할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 대한 양자화 스텝을 나타내는 정보를 비트스트림으로부 터 획득한 것에 기초하여 양자화 스텝을 결정할 수 있다. 예를 들어, 영상 복호화 장치는, 비트스트림으 로부터 양자화 스텝 값을 직접적으로 획득한 것에 기초하여, 양자화 스텝을 결정할 수 있다. 영상 복호화 장치 는 이전 양자화 스텝과 차분 양자화 스텝을 이용하여 양자화 스텝을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 양자화 리스트에 포함된 복수의 양자화 스텝들 중 하나를 나타내는 양자화 인덱스를 획득하여, 양자화 인덱스에 대응하는 양자화 스텝 값을 현재 블록에 대한 양자화 스텝으로서 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 비트스트림으로부터 현재 블록의 양자화된 잠재 텐서를 획득할 수 있 다. 영상 복호화 장치는, 양자화된 잠재 텐서에 대해 결졍된 양자화 스텝을 이용하여 스케일링을 수행함 으로써, 역 양자화를 수행할 수 있다. 영상 복호화 장치는, 역 양자화릍 통해 현재 블록의 잠재 텐서를 획득할 수 있다. 한편, 현재 블록은 현재 영상 또는, 현재 영상이 복수로 분할되어 획득된 블록으로서, 영상 복 호화 장치에서의 처리 대상일 수 있다. 단계 S2530에서, 영상 복호화 장치는 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초한 룩업 테이블(Look-up Table)을 이용하여 현재 블록에 대응하는 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자 화 스텝 중 적어도 하나에 각각 대응하는 인덱스 값을 룩업 테이블에 적용한 것에 기초하여, 현재 블록에 대응 하는 양자화 오프셋을 획득할 수 있다. 일 실시예에서, 현재 블록의 타입은, 비트스트림으로부터 획득한 양자화된 잠재 텐서가, 영상 인코더로부 터 출력되는 현재 영상의 양자화된 잠재 텐서, 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로 우(g)의 양자화된 잠재 텐서(w), 및 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐서(v) 중 어느 것인지에 대한 정보를 나타낼 수 있다. 예를 들어, 현재 블록의 타입이 영상 인코더로부터 출력 되는 현재 영상의 양자화된 잠재 텐서인 경우, 현재 블록의 타입 인덱스는 0일 수 있다. 또한, 현재 블록 의 타입이, 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우, 현 재 블록의 타입 인덱스는 1일 수 있다. 현재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의양자화된 잠재 텐서(v)인 경우, 현재 블록의 타입 인덱스는 2일 수 있다. 일 실시예에서, 현재 블록의 채널 인덱스는, 잠재 텐서에 대응하는 채널의 인덱스를 나타내거나, 주파수에 따른 채널 그룹(예를 들어, C_low, C_mid, C_high)을 지시하는 인덱스일 수 있다. 한편, 개시된 예에 한하지 않는다. 일 실시예에서, 영상 복호화 장치는, 결정된 양자화 스텝 값에 따라, 룩업 테이블을 이용하여 양자화 오 프셋을 결정하기 위한 QP 인덱스를 결정할 수 있다. 한편, 상기 룩업 테이블은, 기 결정되어 영상 복호화 장치 및 영상 부호화 장치에 저장된 정보일 수 있다. 또한, 상기 룩업 테이블은, 오프셋 테이블 또는 오프셋 파라미터 테이블을 포함할 수 있다. 오프셋 테이 블에 따라, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝을 이용하여 양자화 오프 셋을 결정하는 일 실시예를 식으로 나타내면 하기와 같다. offset = offsetTable[Type][ChannelIndex][QuantizationStep][quantizedMagnitude] 상기 식에서, offset은 양자화 오프셋, offsetTable은 오프셋 테이블, PredictionMode는 현재 블록의 타입, FrequencyBand 는 채널 인덱스, QP는 양자화 스텝, quantizedMagnitude는 양자화된 잠재 텐서를 나타낼 수 있 다. 한편, 일부의 인자들만을 이용하여, 오프셋 값을 결정할 수 있다. 예를 들어, 룩업 테이블이 현재 블록의 타입 을 고려하지 않고 결정되어 있을 수 있다. 이러한 경우, 하기의 식에 따라 오프셋 값을 결정할 수 있다. offset = offsetTable[ChannelIndex][QuantizationStep][quantizedMagnitude] 한편, 상기의 개시에 한하지 않고, 영상 복호화 장치는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여 오프셋 파라미터 테이블을 이용하여 오프셋 파라미터를 결 정하고, 오프셋 테이블을 이용하여 오프셋 파라미터에 따라 양자화 오프셋을 결정할 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 9, "content": "상기 식에서, 는 오프셋 파라미터를 나타낼 수 있다. 오프셋 테이블은, 오프셋 파라미터의 값에 반비례하는 테이블로서, 오프셋 파라미터 값은 미리 결정되어 있을 수 있다. 영상 복호화 장치는 양자화된 잠재 텐서 의 샘플 값에 대응하는 인덱스 값을 획득하여 오프셋 테이블에 따라 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 오프셋 테이블을 이용하여 현재 블록의 타입에 따라 양자화 오프셋을 상이한 값으로 결정할 수 있다. 예를 들어, 영상 복호화 장치는 오프셋 테이블을 이용하여, 현재 블록의 타입이 현재 영상의 양자화된 잠재 텐서인 경우 제1 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으 로 결정할 수 있고, 현재 블록의 타입이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자 화된 잠재 텐서(w)인 경우 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로 결정할 수 있으며, 현재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐서(v)인 경우, 제3 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로 결정할 수 있다. 한편, 제1 양자화 오프셋의 값보다 제2 양자화 오프셋의 값 또는 제3 양자화 오프셋의 값이 더 클 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록이 인터 예측에 기반하여 복호화 되는 경우에 따른 양자화 오프셋보다 작은 값을 갖는 현재 블록이 인트라 예측에 기반하여 복호화되는 경우에 따른 양자화 오프셋의 값을, 현재 블록에 대한 양자화 오프셋으로서 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록이 인터 예측에 기반하여 복호화 되는 경우, 현재 블록의 타입이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우에 따른 양자화 오프셋보다 큰 값을 갖는, 현재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자 화된 잠재 텐서(v)인 경우에 따른 양자화 오프셋을 현재 블록의 양자화 오프셋으로 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 현재 블록이 인터 예측에 기반하여 복호화 되는 경우, 현재 블록의 타입이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우에 따른 양자화 오프셋보다 작은 값을 갖는, 현재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐서(v)인 경우에 따른 양자화 오프셋을 현재 블록의 양자화 오프셋으로 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 오프셋 테이블을 이용하여 현재 블록의 채널 인덱스가 포함되는 채널 그룹의 주파수 대역에 따라, 양자화 오프셋을 상이한 값으로 결정할 수 있다. 영상 복호화 장치는, 채널 인덱스가 저주파 대역을 나타낼수록 양자화 오프셋을 더욱 큰 값으로 결정할 수도 있고, 채널 인덱스가 고주파 대역을 나타낼수록 양자화 오프셋을 더욱 큰 값으로 결정할 수도 있다. 일 실시예에서, 영상 복호화 장치는, 오프셋 테이블을 이용하여 현재 블록의 양자화 스텝에 따라 양자화 오프셋을 상이한 값으로 결정할 수 있다. 영상 복호화 장치는, 양자화 스텝 값이 클수록 더 큰 값의 양자 화 오프셋을 결정할 수 있다. 영상 복호화 장치는, 양자화 스텝이 제1 양자화 스텝 값보다 큰 제2 양자화 스텝 값을 갖는 경우, 제1 양자화 스텝에 기초하여 결정된 제1 양자화 오프셋보다 큰 값인 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로서 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 오프셋 테이블을 이용하여 현재 블록의 양자화된 잠재 텐서에 포함 된 샘플 값에 따라 양자화 오프셋을 상이한 값으로 결정할 수 있다. 영상 복호화 장치는, 현재 블록의 양 자화된 잠재 텐서에 포함된 샘플 값이 작을수록 큰 양자화 오프셋 값을 결정할 수 있다. 예를 들어, 영상 복호 화 장치는 현재 블록에 대한 양자화된 잠재 텐서에 포함된 소정의 샘플 값이 제1 샘플 값보다 작은 제2 샘플 값을 갖는 경우, 제1 샘플 값에 기초하여 결정된 제1 양자화 오프셋보다 큰 제2 샘플 값에 기초하여 결정 된 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로서 결정할 수 있다. 이하, 일 실시예에서, 영상 복호화 장치가 오프셋 테이블을 이용하여 현재 블록의 양자화 스텝에 따라 양 자화 오프셋을 결정하는 동작에 대해 구체적으로 설명한다. 한편, 단계 S2530은 단계 S2430에 대응할 수 있으며, S2430의 현재 블록의 예측 모드는 현재 블록의 타입에, 현 재 블록의 주파수 대역은 현재 블록의 채널 인덱스에, 현재 블록의 양자화 파라미터는 현재 블록의 양자화 스텝 에, 변환 계수는 잠재 텐서에 각각 대응할 수 있으므로, 동일한 내용은 생략한다. 단계 S2540에서, 영상 복호화 장치는 결정된 양자화 오프셋을 이용하여 잠재 텐서를 변경할 수 있다. 일 실시예에서, 영상 복호화 장치는, 획득된 현재 블록의 잠재 텐서를 결정된 양자화 오프셋을 이용하여 변경할 수 있다. 예를 들어, 영상 복호화 장치는, 역 양자화를 통해 획득한 현재 블록에 대한 적어도 하 나의 잠재 텐서의 샘플 값을 각각의 잠재 텐서에 대응하는 양자화 오프셋을 이용하여 수정할 수 있다. 일 실시예에서, 영상 복호화 장치는, 결정된 양자화 오프셋을 이용하여 변환 계수에 대한 보간을 수행함 으로써, 양자화 시프트(Quantization Shift)를 수행할 수 있다. 한편, 잠재 텐서를 변경하는 동작이 양자화 시 프트를 수행하는 단계로 지칭될 수 있다. 또한, 양자화 시프트는, 단계 S2520에서 획득한 잠재 텐서의 샘플 값 및 잠재 텐서의 샘플 값과 연속하는 값 및 양자화 오프셋 값을 이용하여 수행될 수 있다. 예를 들어, 양자화 오 프셋에 따른 양자화 시프트는 하기 수학식 2에 따라 수행될 수 있다. [수학식 5]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 10, "content": "상기 식에서, 은, 변경된 잠재 텐서의 샘플 값을 나타낼 수 있다. 는 상수로서, 양자화 오프셋의 정밀도 를 제어하는 파라미터일 수 있다. 는 양자화된 잠재 텐서의 샘플 값이며, 는 양자화된 잠재 텐서의 샘플 값에 따라 결정되는 값일 수 있다. 예를 들어, 는 수학식 6에 따라 결정될 수 있다. [수학식 6]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 11, "content": "일 실시예에서, 수학식 5를 달리 표현하면, 수학식 7와 같이 나타낼 수 있다. [수학식 7]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 12, "content": "한편, 양자화 오프셋을 이용하여 잠재 텐서의 샘플 값을 변경 또는 수정하는 방식은 개시된 예에 한하지 않는다. 일 실시예에서, 영상 복호화 장치는 현재 블록의 타입, 현재 블록의 채널 인덱스, 현재 블록의 양자화 스 텝 중 적어도 하나에 기초하여 결정된 양자화 오프셋을 이용하여 역 양자화를 수행하여 획득한 잠재 텐서를 변 경 또는 수정할 수 있다. 도 26는 본 개시의 일 실시예에 따른 양자화 오프셋을 설명하는 도면이다. 일 실시예에서, 역 양자화된 변환 계수 또는 역 양자화된 잠재 텐서에 대한 양자화 오프셋은, 수학식 8 내지 수 학식 9에 따라 결정되는 값이었을 수 있다. [수학식 8]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 13, "content": "상기 는, 양자화된 변환 계수 또는 양자화된 잠재 텐서를 나타낸다. R은, 레이트 모델링(rate modeling)을 계 산하기 위한 함수일 수 있다. 상기 식에 따르면, 레이트 모델링은 양자화된 변환 계수 또는 양자화된 잠재 텐서 에만 의존하는 결정되는 함수일 수 있다. [수학식 9]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 14, "content": "일 실시예에서, 양자화 오프셋이 수학식 9와 같에 따라 계산되고, 계산된 양자화 오프셋에 따라 오프셋 파라미 터 를 결정하고, 오프셋 파라미터를 이용하여 오프셋 테이블을 구성할 수 있다. 오프셋 테이블에 양자화된 변 환 계수 또는 양자화된 잠재 텐서를 인덱스 값으로 입력하여, 하기의 수학식 10에 따라 변경된 변환 계수 또는 변경된 잠재 텐서가 획득될 수 있다. [수학식 10]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 15, "content": "일 실시예에서, 수학식 8 내지 수학식 10에 따라 양자화 시프트를 수행하여 변환 계수 또는 잠재 텐서를 변경한 다면, 변환 계수 또는 잠재 텐서를 변경하기 위해 이용된 양자화 오프셋이 각각 양자화된 변환 계수 또는 양자 화된 잠재 텐서에만 의존하는 함수일 수 있다. 일 실시예에서, 도 26을 참조하여 제1 그래프 및 제2 그래프을 살펴보면, 를 역 양자화한 가 와 연속하는 +1 를 역 양자화한 사이의 값으로 보간 또는 양자화 시 프트를 통해 조정될 수 있다. 양자화 시프트를 수행하기 위해 이용하는 양자화 오프셋이 양자화된 변환 계수 또 는 양자화된 잠재 텐서에만 의존하는 함수이기 때문에, 양자화된 변환 계수 또는 양자화된 잠재 텐서가 클수록 양자화 시프트에 따른 변환 계수 또는 잠재 텐서의 변화량이 적을 수 있다. 예를 들어, 변환 계수 또는 잠재 텐서의 크기가 작은 제1 그래프에서의 양자화 시프트에 따른 변환 계수 또는 잠재 텐서의 제1 변화량은, 변환 계수 또는 잠재 텐서의 크기가 큰 제2 그래프에서의 양자화 시프트에 따른 변환 계수 또는 잠재 텐서의 제2 변화량보다 클 수 있다. 일 실시예에서, 실질적으로 변환 계수 또는 잠재 텐서에 양자화를 수행함에 따라 발생했던 손실을 최소화하기 위해, 양자화 오프셋이 여러 인자에 따라 조정 또는 변경되어야 한다. 따라서, 본 개시는, 양자화 오프셋을 양 자화된 변환 계수 또는 양자화된 잠재 텐서에 따라 변경 또는 조정하는 것을 넘어, 양자화 오프셋을 예측 모드,주파수 대역, 및 양자화 파라미터 중 적어도 하나 또는 타입, 채널 인덱스 및 양자화 스텝 중 적어도 하나에 따 라 조정 또는 변경하고자 한다. 도 27는 본 개시의 일 실시예에 따른 양자화 오프셋을 설명하는 도면이다. 일 실시예에서, 영상 복호화 장치는, 도 26에서의 레이트 모델링과 상이한 방식으로, 레이트 모델링을 구 성할 수 있다. 예를 들어, 레이트 모델링은, 양자화 파라미터(또는 양자화 스텝) 또는 변환 계수의 분포에 의존 하도록 모델링 되거나, 양자화 스텝 또는 잠재 텐서의 분포에 의존하도록 모델링될 수 있다. [수학식 11] ;"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 16, "content": "상기 식에서, y는 Y를 양자화한 값이라 할 때, p(y) 는 소정 범위의 P(Y)를 적분한 값에 근사할 수 있다. 이에 따라, p(y)는 수학식 11에 따라 표현될 수 있다. 또한, q는 양자화 스텝을 나타내는 것일 수 있다. 일 실시예에서, 평균 0, 표준 편차가 인 라플라시안 분포를 사용하면, 변환 계수에 대한 또는 잠재 텐서에 대 한 라플라시안 모델링은 수학식 12 내지 수학식 13에 따라 표현될 수 있다. [수학식 12]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 17, "content": "[수학식 13]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 18, "content": "일 실시예에서, 수학식 11 내지 13을 이용하여, 엔트로피에 대한 함수로서 레이트 모델링이 수학식 14에 따라 표현될 수 있다. [수학식 14]"}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 19, "content": "일 실시예에서, 도 27을 참조하면, 변환 계수의 분포 또는 잠재 텐서의 분포를 확인할 수 있다. 제1 분포 집합 을 살펴보면, 변환 계수의 분포 또는 잠재 텐서의 분포에 대한 표준 편차 가 비교적 큰 것을 확인할 수 있다. 제2 분포 집합을 살펴보면, 변환 계수의 분포 또는 잠재 텐서의 분포에 대한 표준 편차 가 비교 적 작은 것을 확인할 수 있다. 일 실시예에서, 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 변환 계 수의 분포와 연관이 있는 파라미터들이므로, 영상 복호화 장치는, 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나를 이용하여 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 엔트로피에 대한 레이트 모델링 식인 수학식 14를 고려할 때, 양자화 오프셋은 표준 편차 또는 분산에 반비례할 수 있다. 일 실시예에서, 현재 블록의 예측 모드가 인트라 모드인 경우, 현재 블록의 예측 모드가 인터 모드인 경우보다 변환 계수에 대한 표준 편차가 클 수 있다. 따라서, 영상 복호화 장치는, 현재 블록의 예측 모드가 인터 모드인 경우, 현재 블록의 예측 모드가 인트라 모드인 경우보다 큰 양자화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 현재 블록의 예측 모드가 인터 모드인 경우, 현재 블록이 쌍예측에 의해 예측되는 경우보다 현 재 블록이 단방향 예측에 의해 예측되는 경우에 변환 계수에 대한 표준 편차가 클 수 있다. 따라서, 영상 복호 화 장치는, 현재 블록이 단방향 예측에 의해 예측되는 경우 현재 블록이 쌍 예측에 의해 예측되는 것 보 다 작은 양자화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 현재 블록의 주파수 대역이 저주파 대역인 것 보다, 현재 블록의 주파수 대역이 고주파 대역인 경우 변환 계수에 대한 표준 편차가 작을 수 있다. 따라서, 영상 복호화 장치는, 현재 블록의 주파수 대 역이 고주파 대역인 경우 현재 블록의 주파수 대역이 저주파 대역인 것보다 큰 양자화 오프셋을 획득 또는 결정 할 수 있다. 일 실시예에서, 현재 블록의 양자화 파라미터는 높은 레이트에서 양자화 파라미터가 클 수 있다. 따라서, 영상 복호화 장치는, 현재 블록의 양자화 파라미터가 작은 경우보다 현재 블록의 양자화 파라미터가 큰 경우에 큰 양자화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나는 잠 재 텐서의 분포와 연관이 있는 파라미터들이므로, 영상 복호화 장치는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나를 이용하여 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 현재 블록의 타입이 영상 인코더로부터 출력되는 현재 영상의 양자화된 잠재 텐서 인 경우, 현재 블록의 타입이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우보다 잠재 텐서에 대한 표준 편차가 클 수 있다. 따라서, 영상 복호화 장치는, 현재 블록 의 타입이 영상 인코더로부터 출력되는 현재 영상의 양자화된 잠재 텐서인 경우, 현재 블록의 타입 이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우보다 작은 양 자화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 현재 블록의 타입이 영상 인코더로부터 출력되는 현재 영상의 양자화된 잠재 텐서 인 경우, 현재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐서(v)인 경우 보다 잠재 텐서에 대한 표준 편차가 클 수 있다. 따라서, 영상 복호화 장치는, 현재 블록의 타입이 영상 인코더로부터 출력되는 현재 영상의 양자화된 잠재 텐서인 경우, 현재 블록의 타입이 잔차 인코더 로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐서(v)인 경우보다 작은 양자화 오프셋을 획득 또는 결 정할 수 있다. 일 실시예에서, 현재 블록의 타입이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우, 현재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐 서(v)인 경우 보다 잠재 텐서에 대한 표준 편차가 작을 수 있다. 따라서, 영상 복호화 장치는, 현재 블록 의 타입이 옵티컬 플로우 인코더로부터 출력되는 옵티컬 플로우(g)의 양자화된 잠재 텐서(w)인 경우, 현 재 블록의 타입이 잔차 인코더로부터 출력되는 잔차 영상(r)의 양자화된 잠재 텐서(v)인 경우보다 큰 양 자화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 현재 블록의 채널 인덱스가 고주파 채널 그룹에 포함되는 경우 채널 인덱스가 저주파 채널 그룹 에 포함되는 경우보다 변환 계수에 대한 표준 편차가 작을 수 있다. 따라서, 영상 복호화 장치는, 현재 블록의 채널 인덱스가 고주파 채널 그룹에 포함되는 경우 채널 인덱스가 저주파 채널 그룹에 포함되는 경우보다 큰 양자화 오프셋을 획득 또는 결정할 수 있다. 영상 복호화 장치는 현재 블록의 채널 인덱스가 높은 주파수 채 널 그룹에 포함 될수록, 큰 양자화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 현재 블록의 양자화 스텝은 높은 레이트에서 더 높은 값을 가질 수 있다. 따라서, 영상 복호화 장치는, 현재 블록의 양자화 스텝이 작은 경우보다 현재 블록의 양자화 스텝이 큰 경우에 비교적 큰 양자 화 오프셋을 획득 또는 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 도 26에 따른 레이트 모델링과 도 27에 따른 레이트 모델링를 조합하 여 양자화 오프셋을 결정할 수 있다. 예를 들어, 영상 복호화 장치는, 현재 블록의 주파수 대역이 저주파대역인 경우에는 도 27에 따른 레이트 모델링에 따라 양자화 오프셋을 결정하고, 현재 블록의 주파수 대역이 고 주파 대역인 경우에는, 도 26에 따른 레이트 모델링에 따라 양자화 오프셋을 결정할 수 있다. 또한, 예를 들어, 영상 복호화 장치는, 현재 블록의 양자화 파라미터가 소정의 값 이상인 경우, 도 27에 따른 레이트 모델링에 따라 양자화 오프셋을 결정하고, 현재 블록의 양자화 파라미터가 소정의 값 미만인 경우 도 26에 따른 레이트 모델링에 따라 양자화 오프셋을 결정할 수 있다. 한편, 도 26에 따른 레이트 모델링은, 양자화 오프셋이 양자화된 변환 계수 또는 양자화된 잠재 텐서에만 의존 하는 것을 나타내고, 도 27에 따른 레이트 모델링은, 양자화 오프셋이 현재 블록의 예측 모드, 현재 블록의 주 파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나 또는 양자화 오프셋이 현재 블록의 타입, 현재 블 록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 따라 결정될 수 있다는 것을 나타낼 수 있다. 도 28은 본 개시의 일 실시예에 따라 주파수 대역을 분류하는 동작에 대한 도면이다. 일 실시예에서, 영상 복호화 장치는, 현재 블록에 포함된 변환 계수의 주파수 대역에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는 현재 블록 내에 포함된 변환 계수들에 대응하는 주파수 대역에 따라, 현재 블록 내의 샘플들을 분류할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 포함된 복수의 샘플들을 복수의 주파수 대역들로 분류할 수 있다. 영상 복호화 장치는 복수의 대역들 중에서 현재 블록을 위한 주파수 대역을 결정할 수 있다. 영 상 복호화 장치는 결정된 주파수 대역에 따라 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 분류된 복수의 대역들 중 소정 위치의 샘플에 대응하는 변환 계수에 따른 주파수 대역을 현재 블록을 위한 주파수 대역으로 결정할 수 있다. 영상 복호화 장치는 복수의 대역 들 중 변환 계수에 대응하는 주파수를 최빈값으로 포함하는 주파수 대역을 현재 블록을 위한 주파수 대역으로 결정할 수 있다. 또는, 영상 복호화 장치는, 현재 블록에 포함된 소정 위치의 샘플에 대응하는 변환 계수에 따 라, 상이한 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는, 현재 블록에 포함된 복수의 변환 계수에 각 각 대응하는 복수의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는 복수의 양자화 오프셋을 결정하는 경 우, 결정된 복수의 양자화 오프셋을 이용하여, 복수의 변환 계수를 변경할 수 있다. 한편, 현재 블록을 위한 주파수 대역을 결정하는 방식은 개시된 예에 한하지 않는다. 일 실시예에서, 영상 복호화 장치는, 현재 블록 내 제1 샘플(m0, n0)보다 좌상측에 있는 모든 샘플들인 제1 샘플 집합의 주파수 대역을 제1 주파수 대역으로 분류할 수 있다. 영상 복호화 장치는, 현재 블록 내 제1 샘플(m0, n0)보다 우하측에 위치하는 제2 샘플(m1, n1)보다 좌상측에 위치하고, 제1 주파수 대역으 로 분류되지 않은 모든 샘플들인 제2 샘플 집합의 주파수 대역을 제2 주파수 대역으로 분류할 수 있다. 영상 복호화 장치는 현재 블록 내 제1 주파수 대역 및 제2 주파수 대역으로 분류되지 않은 모든 샘플들인 제3 샘플 집합의 주파수 대역을 제3 주파수 대역으로 분류할 수 있다. 일 실시예에서, 영상 복호화 장치는, 제1 주파수 대역에 따른 주파수 인덱스를 0으로 결정하고, 제2 주파 수 대역에 따른 주파수 인덱스를 1로 결정하고, 제3 주파수 대역에 따른 주파수 인덱스를 2로 결정할 수 있다. 영상 복호화 장치는, 현재 블록의 주파수 대역에 기초한 오프셋 테이블 또는 오프셋 파라미터 테이블에 대해, 결정된 주파수 인덱스를 입력하여 양자화 오프셋 또는 오프셋 파라미터를 결정할 수 있다. 도 29는 본 개시의 일 실시예에 따라 주파수 대역을 분류하는 동작에 대한 도면이다. 일 실시예에서, 영상 복호화 장치는, 현재 블록의 주파수 대역에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는 현재 블록 내에 포함된 변환 계수들에 대응 하는 주파수 대역에 따라, 현재 블록 내의 샘플들을 분류할 수 있다. 일 실시예에서, 영상 복호화 장치는 현재 블록에 포함된 복수의 샘플들의 스캔 오더에 기초하여, 현재 블 록에 포함된 복수의 샘플들을 복수의 주파수 대역들로 분류할 수 있다. 영상 복호화 장치는 복수의 주파 수 대역들 중에서 현재 블록을 위한 주파수 대역을 결정할 수 있다. 영상 복호화 장치는 결정된 주파수 대역에 따라 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 복호화 장치는 분류된 복수의 대역들 중 소정 위치의 샘플에 대응하는 변환 계수에 따른 주파수 대역을 현재 블록을 위한 주파수 대역으로 결정할 수 있다. 영상 복호화 장치는 복수의 대역 들 중 변환 계수에 대응하는 주파수를 최빈값으로 포함하는 주파수 대역을 현재 블록을 위한 주파수 대역으로결정할 수 있다. 또는, 영상 복호화 장치는, 현재 블록에 포함된 소정 위치의 샘플에 대응하는 변환 계수에 따 라, 상이한 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는, 현재 블록에 포함된 복수의 변환 계수에 각 각 대응하는 복수의 양자화 오프셋을 결정할 수 있다. 영상 복호화 장치는 복수의 양자화 오프셋을 결정하는 경 우, 결정된 복수의 양자화 오프셋을 이용하여, 복수의 변환 계수를 변경할 수 있다. 한편, 현재 블록을 위한 주파수 대역을 결정하는 방식은 개시된 예에 한하지 않는다. 일 실시예에서, 영상 복호화 장치는, 현재 블록에 포함된 복수의 샘플들을 스캔 순서에 따라 일렬로 나열 할 수 있다. 일 실시예에서, 영상 복호화 장치는, 스캔 순서에 따라 나열된 복수의 샘플들에 대해 스캔 순서가 제1 샘플(x0)보다 앞서는 샘플들인 제1 샘플 집합의 주파수 대역을 제1 주파수 대역으로 분류할 수 있다. 영상 복호화 장치는, 스캔 순서에 따라 나열된 복수의 샘플들에 대해 스캔 순서가 제2 샘플(x 1)보다 앞서고, 제1 샘플 집합에 포함되지 않는 샘플들인 제2 샘플 집합의 주파수 대역을 제2 주파 수 대역으로 분류할 수 있다. 영상 복호화 장치는 스캔 순서에 따라 나열된 복수의 샘플들에 대해 제1 샘 플 집합 및 제2 샘플 집합에 포함되지 않는 샘플들인 제3 샘플 집합의 주파수 대역을 제3 주 파수 대역으로 분류할 수 있다. 일 실시예에서, 영상 복호화 장치는, 제1 주파수 대역에 따른 주파수 인덱스를 0으로 결정하고, 제2 주파 수 대역에 따른 주파수 인덱스를 1로 결정하고, 제3 주파수 대역에 따른 주파수 인덱스를 2로 결정할 수 있다. 영상 복호화 장치는, 현재 블록의 주파수 대역에 기초한 오프셋 테이블 또는 오프셋 파라미터 테이블에 대해, 결정된 주파수 인덱스를 입력하여 양자화 오프셋 또는 오프셋 파라미터를 결정할 수 있다. 도 30은 본 개시의 일 실시예에 따른 영상 부호화 장치의 구성을 도시하는 블록도이다. 일 실시예에서 영상 부호화 장치는, 블록 분할 기반의 영상 부복호화를 수행하는 경우와 신경망 기반의 영상 부복호화를 수행하는 경우로 구별될 수 있다. 먼저 블록 분할 기반의 영상 부복호화를 수행하는 경우의 동 작을 설명하고, 신경망 기반의 영상 부복호화를 수행하는 경우의 동작을 설명한다. 도 30을 참조하면, 영상 부호화 장치는 예측 부호화부 및 생성부를 포함할 수 있다. 도 30에 도시된 예측 부호화부는 도 2에 도시된 부호화부에 대응하고, 생성부는 도 2에 도시된 비트스트림 생성부에 대응할 수 있다. 또한, 예측 부호화부는 도 19에 도시된 예측 부호화부에 대응하고, 생성부은 도 19에 도시된 엔트로피 부호화부에 대응할 수 있다. 일 실시예에 따른 예측 부호화부 및 생성부는 적어도 하나의 프로세서로 구현될 수 있다. 일 실시 예에서, 예측 부호화부 및 생성부는 적어도 하나의 메모리에 저장된 적어도 하나의 인스트럭션에 따라 동작할 수 있다. 한편, 영상 부호화 장치의 적어도 하나의 프로세서 및 적어도 하나의 메모리는 영상 복호화 장치의 적어도 하나의 프로세서 및 적어도 하나의 메모리에 각각 대응할 수 있으므로 동일한 내용은 생략한다. 이후의 실시예들에서 영상 부호화 장치 또는 영상 복호화 장치에 포함되는 세부 구성들(도 30의 3010, 및 3030)이 수행한다고 설명되는 동작들은 특별한 설명이 없는 한 프로세서가 수행하는 것으로 볼 수 있다. 일 실시예에서, 영상 부호화 장치는, 영상 복호화 장치 또는 영상 복호화 장치에 포함된 부/ 유닛에서 수행되는 동작들을 수행할 수 있다. 동일한 설명은 중복되므로 생략한다. 일 실시예에서, 영상 부호화 장치는 예측 부호화부 및 생성부의 입출력 데이터를 저장하는 적어도 하나의 메모리를 포함할 수 있다. 또한, 영상 부호화 장치는, 메모리의 데이터 입출력을 제어하는 메모리 제어부를 포함할 수 있다. 일 실시예에서, 영상 부호화 장치는 픽쳐를 복수 개의 최대 부호화 단위들로 분할하고, 각각의 최대 부호화 단 위들을 다양한 크기 및 다양한 형태의 블록들로 분할하여 부호화할 수 있다. 예를 들어, 영상 부호화 장치는 현재 블록의 예측 모드가 인트라 모드인 경우에 현재 블록의 현재 블록의 인트라 예측 방향에 위치한 공간적 이웃 블록의 샘플들 중 참조 샘플을 결정하고, 참조 샘플을 이용하여 현재 블록의 예측 샘플들을 결정할 수 있다. 예측 샘플들과 현재 블록의 샘플들 간의 차이인 레지듀얼 샘플들을 결정 하고, 레지듀얼 샘플들에 대해 변환 블록을 기초로 변환하여 변환 계수들을 생성하고, 변환 계수들에 대해 양자 화를 수행하여 양자화된 변환 계수들을 생성할 수 있다. 일 실시예에서, 예측 부호화부는, 영상 복호화 장치에서 현재 블록을 예측하기 위해 이용하는 예측 정보를 결정할 수 있다. 예를 들어, 예측 정보는 현재 블록의 예측 모드에 대한 정보를 포함할 수 있다. 현재 블록의 예측 모드에 대한 정보는 현재 블록이 인트라 모드에 따라 예측되는지, 또는 인터 모드에 따라 예측되는 지에 대한 정보를 포함할 수 있고, 현재 블록이 단방향 예측되는지 또는 쌍예측되는지에 대한 정보를 포함할 수 있다. 일 실시예에서, 예측 부호화부가 현재 블록의 예측 모드를 인트라 모드로 결정한 경우, 예측 부호화부 는 현재 블록의 예측 방향에 대한 정보를 결정할 수 있으며, 예측 정보는 현재 블록의 예측 방향에 대한 정보를 포함할 수 있다. 일 실시예에서, 예측 부호화부가 현재 블록의 예측 모드를 인터 모드로 결정한 경우, 예측 부호화부 는 현재 블록이 단방향 예측되는지, 쌍예측 되는지, 참조 영상을 가리키는 정보, 및 움직임 정보 중 적어 도 하나에 대한 정보를 결정할 수 있고, 결정된 정보는 예측 정보에 포함될 수 있다. 일 실시예에서, 예측 부호화부는 예측 블록의 예측 모드에 따라 현재 블록에 대해 인트라 예측 또는 인터 예측을 수행하여 예측 블록을 생성할 수 있다. 예측 부호화부는, 결정된 예측 정보에 따른 예측 블록을 생성 또는 결정하고, 원본 블록과 예측 블록의 차분인 잔차 블록을 결정할 수 있다. 일 실시예에서, 예측 부호화부는, 잔차 블록을 부호화할 수 있다. 예를 들어, 예측 부호화부는 잔 차 블록에 대해 변환 및 양자화를 수행할 수 있다. 일 실시예에서, 예측 부호화부는, 영상 복호화 장치 에서 현재 블록에 대한 잔차 블록을 부호화하기 위해 이용하는 변환 정보 및 양자화 정보를 결정할 수 있 다. 현재 블록에 대한 변환 정보는 현재 블록에 대한 역 변환을 수행하기 위해 필요한 모든 정보를 포함할 수 있다. 현재 블록에 대한 변환 정보는 변환 커널을 나타내는 정보, 서브 블록 변환, 저주파 비분리 변환 등과 연 관된 정보를 포함할 수 있다. 한편, 현재 블록에 대한 변환 정보는 개시된 예에 한하지 않는다. 일 실시예에서, 영상 부호화 장치는, 현재 블록이 변환 스킵 모드를 통해 복호화된다고 결정한 경우, 변 환 정보를 포함하는 비트스트림을 생성할 필요는 없으며, 현재 블록의 예측 블록을 복원 블록으로 결정할 수 있 다. 일 실시예에서, 예측 부호화부는 양자화 정보를 결정 또는 획득할 수 있다. 양자화 정보는 영상 복호화 장치에서 현재 블록에 대한 역 양자화를 수행하기 위해 이용하는 모든 정보를 포함할 수 있다. 예를 들어, 양자화 정보는 적어도 하나의 양자화된 변환 계수, 및 양자화 파라미터를 나타내는 정보 중 적어도 하나 를 포함할 수 있다. 일 실시예에서, 예측 부호화부는 결정된 양자화 정보에 기초하여 역 양자화를 수행함으로써, 변환 계수를 획득할 수 있다. 예를 들어, 예측 부호화부는 현재 블록에 대한 양자화 파라미터를 나타내는 정보에 기초 하여 양자화된 변환 계수에 대해 역 변환을 수행하여, 변환 계수를 획득할 수 있다. 양자화 파라미터를 나타내 는 정보는 차분 양자화 파라미터, 미리 결정된 양자화 리스트, 및 미리 결정된 양자화 리스트에 포함된 복수의 양자화 파라미터 중 하나를 가리키는 양자화 인덱스 중 적어도 하나를 포함할 수 있다. 그러나, 양자화 파라미 터를 나타내는 정보는, 양자화 파라미터를 결정하기 위해 이용되는 모든 정보로서, 개시된 예에 한하지 않는다. 일 실시예에서, 생성부는 비트스트림을 영상 복호화 장치에 네트워크를 통해 송신 또는 전송할 수 있다. 생성부는 영상의 복호화를 위한 신택스 엘리먼트를 포함하는 비트스트림을 생성할 수 있다. 신택스 엘리먼트에 해당하는 값들은 영상의 계층 구조에 따라 비트스트림에 포함될 수 있다. 생성부는, 신택스 엘리먼트에 대응하는 빈들에 대해 엔트로피 인코딩을 수행하여 비트스트림을 생성할 수 있다. 비트스트림은 현 재 블록을 복원하기 위해 이용되는 정보들을 포함할 수 있다. 예를 들어, 현재 블록을 복원하기 위해 이용되는 정보는, 양자화 정보, 변환 정보, 및 예측 정보 중 적어도 하나를 포함할 수 있다. 생성부는 양자화 파라 미터를 나타내는 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 예측 부호화부는 양자화 파라미터를 나타내는 정보를 결정할 수 있다. 예측 부호화부 는 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득할 수 있다. 예측 부호화부는 현재 블록의 예측 모드, 현재 블록의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여 양자화 오프셋을 결정할 수 있다. 예측 부호화부는 양자화 오프셋을 이용하여 역 양자화를 수행하여 획득한 현재 블록의 변환 계수를 변경할 수 있다. 한편, 도 23 내지 도 24, 및 도 26 내지 도 29에서 현재 블록의 변환 계수를 위한 양자화 오프셋에 관하여 자세 히 설명하였으므로, 동일한 내용은 생략한다. 일 실시예에서, 영상 부호화 장치는, 현재 블록의 변환 계수 대해 역 변환을 수행함으로써, 현재 블록의 잔차 블록을 획득할 수 있다. 예를 들어, 영상 부호화 장치는, 현재 블록에 대해 결정된 변환 커널을 적 용하여, 현재 블록의 변환 계수들을 역 변환할 수 있으며, 역 변환에 따라 잔차 블록이 복원될 수 있다. 일 실시예에서, 예측 부호화부는 역 양자화 및 역 변환을 수행하여 획득한 잔차 블록과 예측 정보를 이용 하여 획득한 예측 블록을 이용하여 현재 블록을 복원할 수 있다. 예측 부호화부는 복원한 현재 블록을 다 른 블록의 부호화에 이용할 수 있다. 일 실시예에서, 생성부는 현재 영상에 대한 신경망 기반의 부호화에 따라 생성된 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 예측 부호화부는, 영상 복호화 장치에서 현재 블록을 복호화하기 위해 이용하는 정 보를 결정할 수 있다. 예측 부호화부는 처리 대상인 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현 재 블록의 양자화 스텝 중 적어도 하나에 대한 정보를 결정할 수 있다. 일 실시예에서, 예측 부호화부는 현재 블록의 타입을 결정할 수 있다. 예측 부호화부는 현재 블록 의 타입을 나타내는 타입 인덱스를 결정할 수 있다. 일 실시예에서, 예측 부호화부는 현재 블록의 채널 인덱스를 결정할 수 있다. 예측 부호화부는 현 재 블록의 채널 인덱스가 포함되는 채널 그룹에 대한 정보를 결정할 수 있다. 일 실시예에서, 예측 부호화부는 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 스텝을 결정 할 수 있다. 예측 부호화부는 결정된 양자화 스텝을 이용하여 현재 블록에 대한 양자화 스텝을 나타내는 정보를 결정할 수 있다. 일 실시예에서, 생성부는, 현재 블록의 타입, 현재 블록의 채널 인덱스 및 현재 블록의 양자화 스텝 중 적어도 하나를 포함하는 비트스트림을 생성할 수 있다. 생성부는, 현재 블록에 대한 양자화 스텝을 나타 내는 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 예측 부호화부는 양자화 스텝에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서를 획득할 수 있다. 예측 부호화부는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 양자화 오프셋은 역 양자화를 수행하여 획득된 잠재 텐서를 변경하기 위해 이용될 수 있다. 한편, 도 23, 및 도 25 내지 도 29에서 현재 블록의 잠재 텐서를 위한 양자화 오프셋에 관하여 자세히 설명하였 으므로, 동일한 내용은 생략한다. 일 실시예에서 영상 부호화 장치가 블록 분할 기반의 영상 부복호화를 수행하는 경우의 구체적인 동작은 이하 도 31에서 다시 설명한다. 일 실시예에서 영상 부호화 장치가 신경망 기반의 영상 부복호화를 수행 하는 경우의 구체적인 동작은 이하 도 32에서 다시 설명한다. 도 31은 본 개시의 일 실시예에 따른 영상 부호화 방법의 순서도이다. 일 실시예에서 영상 부호화 장치가 블록 분할 기반의 영상 부복호화를 수행하는 경우의 영상 부호화 방법 의 구체적인 동작이 후술된다. 단계 S3110에서, 영상 부호화 장치는 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 파라미터를 결 정할 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화에 가장 적절한 양자화 파라미터를 결정할 수 있다. 예를 들어, 영상 부호화 장치는, 현재 블록에 포함된 복수의 샘플들에 대해 양자화 파라미터로 각 샘플들의 값 을 나누어 양자화를 수행할 수 있다. 영상 부호화 장치는, 영상의 복원을 위해 손실을 줄이면서도 비트레 이트도 줄일 수 있는 가장 적절한 값을 양자화 파라미터로 결정할 수 있다. 단계 S3120에서, 영상 부호화 장치는, 양자화 파라미터에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수 를 획득할 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화된 변환 계수 및 결정된 양자화 파라미터를 이용하여, 양자화 된 변환 계수에 대해 역 양자화를 수행할 수 있다. 영상 부호화 장치는 양자화된 변환 계수에 대해 역 양 자화를 수행하여 현재 블록의 변환 계수를 획득할 수 있다. 한편. 역 양자화를 수행하여 획득한 현재 블록의 변환 계수는, 현재 영상에 대한 부호화 과정에서 양자화를 수 행하기 이전에 획득한 변환 계수와 상이할 수도 있고, 동일할 수도 있다. 단계 S3130에서, 영상 부호화 장치는 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라 이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 부호화 장치는, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역 및 현재 블록의 양자화 파라미터 중 적어도 하나 에 기초한 룩업 테이블을 결정 또는 생성할 수 있다. 한편, 룩업 테이블은 도 23 내지 도 29에 따른 오프셋 테 이블 또는 오프셋 파라미터 테이블을 포함할 수 있다. 영상 부호화 장치는 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역 및 현재 블록의 양자화 파라미터에 따라 최적의 양자화 오프셋을 결정하기 위한 오프셋 테이블 또는 오프셋 파라미터 테 이블을 결정할 수 있다. 한편, 룩업 테이블은 미리 사전에 결정되어 영상 부호화 장치와 영상 복호화 장치에서 공유되는 정 보일 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화된 변환 계수를 현재 영상에 대한 부호화 과정에서 양자화를 수행하기 이전에 획득한 변환 계수 값에 가깝게 보정하여, 원본 영상과의 오차를 줄이기 위해 양자화 오프셋을 이용한 양자화 시프트를 수행할 수 있다. 일 실시예에서, 영상 부호화 장치는, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나 를 이용하여 획득한 적어도 하나의 인덱스를 오프셋 테이블 또는 오프셋 파라미터 테이블에 입력하여 현재 블록 에 대응하는 양자화 오프셋을 획득할 수 있다. 한편, 영상 부호화 장치가 양자화 오프셋을 획득하는 동작은, 영상 복호화 장치가 현재 블록의 예 측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 동작에 대응할 수 있으므로, 동일한 내용은 생략한다. 단계 S3140에서, 영상 부호화 장치는 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함하는 비트스트 림을 생성할 수 있다. 일 실시예에서, 영상 부호화 장치는 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 결정할 수 있 다. 영상 부호화 장치는 결정된 양자화 파라미터를 나타내는 정보를 포함하는 비트스트림을 생성할 수 있 다. 일 실시예에서, 영상 부호화 장치는 양자화 파라미터를 나타내는 정보는, 이전 처리 대상으로, 부호화된 이전 블록에 대한 양자화 파라미터와의 현재 블록에 대한 양자화 파라미터의 차분을 나타내는 차분 양자화 파라 미터를 포함할 수 있다. 양자화 파라미터를 나타내는 정보는, 미리 결정된 양자화 리스트에 포함된 복수의 양자 화 파라미터들 중 결정된 양자화 파라미터를 지시하는 양자화 인덱스를 포함할 수 있다. 양자화 파라미터를 나 타내는 정보는 양자화 리스트에 대한 정보 및 양자화 인덱스를 포함할 수 있다. 한편, 양자화 파라미터를 나타내는 정보는 개시된 예에 한하지 않는다. 도 32은 본 개시의 일 실시예에 따른 영상 부호화 방법의 순서도이다. 일 실시예에서 영상 부호화 장치가 신경망 기반의 영상 부복호화를 수행하는 경우에, 영상 부호화 방법의 구체적인 동작이 후술된다. 단계 S3210에서, 영상 부호화 장치는 현재 블록에 대한 양자화를 수행하기 위해 이용하는 양자화 스텝을 결정할 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화에 가장 적절한 양자화 스텝을 결정할 수 있다. 예를 들어, 영 상 부호화 장치는, 현재 블록에 포함된 복수의 샘플들에 대해 양자화 스텝으로 각 샘플들의 값을 나누어 양자화를 수행할 수 있다. 영상 부호화 장치는, 영상의 복원을 위해 손실을 줄이면서도 비트레이트도 줄일 수 있는 최적의 값을 양자화 스텝으로 결정할 수 있다. 단계 S3220에서, 영상 부호화 장치는, 양자화 스텝에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서를 획 득할 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화된 잠재 텐서 및 결정된 양자화 스텝을 이용하여, 양자화된 잠 재 텐서에 대해 역 양자화를 수행할 수 있다. 영상 부호화 장치는 양자화된 잠재 텐서에 대해 역 양자화 를 수행하여 현재 블록의 잠재 텐서를 획득할 수 있다. 한편. 역 양자화를 수행하여 획득한 현재 블록의 잠재 텐서는, 현재 영상에 대한 부호화 과정에서 양자화를 수 행하기 이전에 획득한 잠재 텐서와 상이할 수도 있고, 동일할 수도 있다. 단계 S3230에서, 영상 부호화 장치는 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정할 수 있다. 일 실시예에서, 영상 부호화 장치는, 현재 블록의 타입, 현재 블록의 채널 인덱스 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초한 룩업 테이블을 결정 또는 생성할 수 있다. 한편, 룩업 테이블은 도 23 내지 도 29에 따른 오프셋 테이블 또는 양자화 스텝 테이블을 포함할 수 있다. 영상 부호화 장치는 현재 블록의 타입, 현재 블록의 채널 인덱스 및 현재 블록의 양자화 스텝에 따라 최적의 양자화 오프셋을 결정하기 위한 오 프셋 테이블 또는 양자화 스텝 테이블을 결정할 수 있다. 한편, 룩업 테이블은 미리 사전에 결정되어 영상 부호화 장치와 영상 복호화 장치에서 공유되는 정 보일 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화된 잠재 텐서를 현재 영상에 대한 부호화 과정에서 양자화를 수행하기 이전에 획득한 잠재 텐서 값에 가깝게 보정하여, 원본 영상과의 오차를 줄이기 위해 양자화 오프셋을 이용한 양자화 시프트를 수행할 수 있다. 일 실시예에서, 영상 부호화 장치는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자 화 스텝 중 적어도 하나를 이용하여 획득한 적어도 하나의 인덱스를 오프셋 테이블 또는 양자화 스텝 테이블에 입력하여 현재 블록에 대응하는 양자화 오프셋을 획득할 수 있다. 한편, 영상 부호화 장치가 양자화 오프셋을 획득하는 동작은, 영상 복호화 장치가 현재 블록의 타 입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하는 동작에 대응할 수 있으므로, 동일한 내용은 생략한다. 단계 S3240에서, 영상 부호화 장치는 현재 블록에 대한 양자화 스텝을 나타내는 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 영상 부호화 장치는 현재 블록에 대한 양자화 스텝을 나타내는 정보를 결정할 수 있다. 영상 부호화 장치는 결정된 양자화 스텝을 나타내는 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 영상 부호화 장치는 양자화 스텝을 나타내는 정보는, 이전 처리 대상으로, 부호화된 이전 블록에 대한 양자화 스텝과의 현재 블록에 대한 양자화 스텝의 차분을 나타내는 차분 양자화 스텝을 포함할 수 있다. 양자화 스텝을 나타내는 정보는, 미리 결정된 양자화 리스트에 포함된 복수의 양자화 스텝들 중 결정된 양자화 스텝을 지시하는 양자화 인덱스를 포함할 수 있다. 양자화 스텝을 나타내는 정보는 양자화 리스트에 대 한 정보 및 양자화 인덱스를 포함할 수 있다. 한편, 양자화 스텝을 나타내는 정보는 개시된 예에 한하지 않는다. 일 실시예에서, 양자화 시프트를 위한 영상 복호화 방법이 제공된다. 영상 복호화 방법은, 현재 블록에 대한 양 자화 파라미터를 나타내는 정보를 비트스트림으로부터 획득하는 단계(S2410)를 포함할 수 있다. 영상 복호화 방 법은, 양자화 파라미터를 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득하는 단 계(S2420)를 포함할 수 있다. 영상 복호화 방법은, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬 라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어 도 하나에 기초하여, 복수의 양자화 오프셋 (Quantization Offset) 중에 하나의 양자화 오프셋을 결정하는 단계 (S2430)를 포함할 수 있다. 영상 복호화 방법은, 결정된 양자화 오프셋를 이용하여 변환 계수를 변경하는 단계 (S2440)를 포함할 수 있다. 일 실시예에서, 복수의 양자화 오프셋은, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어도 하나를 이용하여 미리 결정된 오프셋 테이블 또는 오프셋 파라미터 테이블에 따라 결정될 수 있다. 일 실시예에서, 영상 복호화 방법은, 양자화 오프셋을 이용하여 변환 계수의 값 및 변환 계수와 연속된 값에 대 한 보간을 수행함으로써, 양자화 시프트(Quantization Shift)를 수행하는 단계를 포함할 수 있다. 일 실시예에서, 영상 복호화 방법은, 현재 블록의 예측 모드가 인터 모드인 경우에 따른 양자화 오프셋보다 작 은 값을 갖는 현재 블록의 예측 모드가 인트라 모드인 경우에 따른 양자화 오프셋의 값을, 현재 블록에 대한 양 자화 오프셋으로 결정하는 단계를 포함할 수 있다. 일 실시예에서, 영상 복호화 방법은, 예측 모드가 인터 모드일 때, 현재 블록에 대해 단방향 예측이 수행되는 경우에 따른 양자화 오프셋보다 큰 값을 갖는, 현재 블록에 대해 양방향 예측이 수행되는 경우에 따른 양자화 오프셋을 현재 블록에 대한 양자화 오프셋으로 결정하는 단계를 포함할 수 있다. 일 실시예에서, 결정된 하나의 양자화 오프셋은, 현재 블록의 주파수 대역이 저주파 대역인 경우보다, 주파수 대역이 고주파 대역인 경우에 더 큰 값을 가질 수 있다. 일 실시예에서, 영상 복호화 방법은, 양자화 파라미터가 제1 양자화 파라미터 값보다 큰 제2 양자화 파라미터 값을 갖는 경우, 제1 양자화 파라미터에 기초하여 결정된 제1 양자화 오프셋보다 큰 제2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로 결정할 수 있다. 일 실시예에서, 영상 복호화 방법은, 현재 블록에 대한 양자화된 변환 계수의 값이 제1 양자화된 변환 계수보다 작은 제2 양자화된 변환 계수인 경우, 제1 양자화된 변환 계수에 기초하여 결정된 제1 양자화 오프셋보다 큰 제 2 양자화 오프셋을 현재 블록을 위한 양자화 오프셋으로 결정하는 단계를 포함할 수 있다. 일 실시예에서, 영상 복호화 방법은, 현재 블록에 포함된 복수의 샘플들의 위치에 기초하여, 현재 블록에 포함 된 복수의 샘플들을 복수의 주파수 대역으로 분류하는 단계를 포함할 수 있다. 영상 복호화 방법은 복수의 주파 수 대역 중 하나의 주파수 대역을 결정하는 단계를 포함할 수 있다. 영상 복호화 방법은, 결정된 하나의 주파수 대역에 대응하는 양자화 오프셋을 결정하는 단계를 포함할 수 있다. 일 실시예에서, 영상 복호화 방법은, 현재 블록에 포함된 복수의 샘플들의 스캔 오더(Scan Order)에 기초하여, 현재 블록에 포함된 복수의 샘플들을 복수의 주파수 대역으로 분류하는 단계를 포함할 수 있다. 영상 복호화 방 법은 복수의 주파수 대역 중 하나의 주파수 대역을 결정하는 단계를 포함할 수 있다. 영상 복호화 방법은 결정 된 하나의 주파수 대역에 대응하는 양자화 오프셋을 결정하는 단계를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 복호화 장치가 제공된다. 영상 복호화 장치는 적어도 하나의 인스트럭션을 저장하는 적어도 하나의 메모리 및 적어도 하나의 인스트럭션에 따라 동작하는 적어도 하 나의 프로세서를 포함할 수 있다. 적어도 하나의 프로세서는, 현재 블록에 대한 양자화 파라미터를 나타내는 정 보를 비트스트림으로부터 획득할 수 있다. 적어도 하나의 프로세서는, 양자화 파라미터를 나타내는 정보에 기초 한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득할 수 있다. 적어도 하나의 프로세서는, 현재 블록의 예 측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오 프셋을 결정할 수 있다. 적어도 하나의 프로세서는, 결정된 양자화 오프셋을 이용하여 변환 계수를 변경할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 부호화 방법이 제공된다. 영상 부호화 방법은, 현재 블록에 대한 양 자화를 수행하기 위해 이용하는 양자화 파라미터를 결정하는 단계(S3110)를 포함할 수 있다. 영상 부호화 방법 은, 양자화 파라미터에 기초한 역 양자화를 수행하여 현재 블록의 변환 계수를 획득하는 단계(S3120)를 포함할 수 있다. 영상 부호화 방법은, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬라이스의 슬라이스 타 입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 양자화 오프셋은 역 양자화를 수행하 여 획득된 변환 계수를 변경하기 위해 이용되는 단계 (S3130)를 포함할 수 있다. 영상 부호화 방법은, 현재 블 록에 대한 양자화 파라미터를 나타내는 정보를 포함하는 비트스트림을 생성하는 단계(S3140)를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 부호화 장치가 제공된다. 영상 부호화 장치는 적어도 하나의 인스트럭션을 저장하는 적어도 하나의 메모리 및 적어도 하나의 인스트럭션에 따라 동작하는 적어도 하나의 프로세서를 포함할 수 있다. 적어도 하나의 프로세서는, 현재 블록에 대한 양자화를 수행하기 위해 이용하 는 양자화 파라미터를 결정할 수 있다. 적어도 하나의 프로세서는, 양자화 파라미터에 기초한 역 양자화를 수행 하여 현재 블록의 변환 계수를 획득할 수 있다. 적어도 하나의 프로세서는 현재 블록의 예측 모드 또는 현재 블 록을 포함하는 현재 슬라이스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 양 자화 오프셋은 역 양자화를 수행하여 획득된 변환 계수를 변경하기 위해 이용될 수 있다. 적어도 하나의 프로세 서는, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함하는 비트스트림을 생성할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상의 부호화 방법에 의해 생성된 비트스트림을 저장하는 컴퓨터로 판독 가능한 기록 매체가 제공된다 비트스트림은, 현재 블록에 대한 양자화 파라미터를 나타내는 정보를 포함할 수 있다. 현재 블록에 대한 양자화 파라미터는, 현재 블록에 대한 양자화를 수행하기 위해 이용되거나, 역 양자화 를 수행하여 현재 블록의 변환 계수를 획득하기 위해 이용될 수 있다. 현재 블록의 변환 계수는, 현재 블록의 예측 모드 또는 현재 블록을 포함하는 현재 슬랑리스의 슬라이스 타입, 현재 블록에 포함된 변환 계수의 주파수 대역, 및 현재 블록의 양자화 파라미터 중 적어도 하나에 기초하여 결정된 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 이용하여 변경될 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 복호화 방법이 제공된다. 영상 복호화 방법은, 현재 블록에 대한 양 자화 스텝을 나타내는 정보를 비트스트림으로부터 획득하는 단계(S2510)를 포함할 수 있다. 영상 복호화 방법은, 양자화 스텝을 나타내는 정보에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서(Latent Tensor)를 획득하는 단계(S2520)를 포함할 수 있다. 영상 복호화 방법은, 현재 블록의 타입, 현재 블록의 채널 인덱스, 현 재 블록의 양자화 스텝 중 적어도 하나에 기초하여, 복수의 양자화 오프셋 (Quantization Shift) 중에 하나의 양자화 오프셋을 결정하는 단계(S2530)를 포함할 수 있다. 영상 복호화 방법은, 결정된 양자화 오프셋을 이용하 여 잠재 텐서를 변경하는 단계(S2540)를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상 부호화 방법이 제공된다. 영상 부호화 방법은, 현재 블록에 대한 양 자화를 수행하기 위해 이용하는 양자화 스텝을 결정하는 단계(S3210)를 포함할 수 있다. 영상 부호화 방법은, 양자화 스텝에 기초한 역 양자화를 수행하여 현재 블록의 잠재 텐서를 획득하는 단계(S3220)를 포함할 수 있다. 영상 부호화 방법은, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나 에 기초하여, 복수의 양자화 오프셋 중에 하나의 양자화 오프셋을 결정하고, 양자화 오프셋은 역 양자화를 수행 하여 획득된 잠재 텐서를 변경하기 위해 이용되는 단계(S3230)를 포함할 수 있다. 영상 부호화 방법은, 현재 블 록에 대한 양자화 스텝을 나타내는 정보를 포함하는 비트스트림을 생성하는 단계(S3230)를 포함할 수 있다. 일 실시예에서, 양자화 시프트를 위한 영상의 부호화 방법에 의해 생성된 비트스트림을 저장하는 컴퓨터로 판독 가능한 기록 매체가 제공된다. 비트스트림은, 현재 블록에 대한 양자화 스텝을 나타내는 정보를 포함할 수 있다. 현재 블록에 대한 양자화 스텝은, 현재 블록에 대한 양자화를 수행하기 위해 이용되거나, 역 양자화를 수 행하여 현재 블록의 잠재 텐서를 획득하기 위해 이용될 수 있다. 현재 블록의 잠재 텐서는, 현재 블록의 타입, 현재 블록의 채널 인덱스, 및 현재 블록의 양자화 스텝 중 적어도 하나에 기초하여 결정된 복수의 양자화 오프 셋 중에 하나의 양자화 오프셋을 이용하여 변경될 수 있다. 본 개시의 다양한 실시예들은 하나 이상의 컴퓨터 프로그램들에 의해 구현 또는 지원될 수 있고, 컴퓨터 프로그 램들은 컴퓨터 판독 가능한 프로그램 코드(code)로부터 형성되고, 컴퓨터로 판독 가능한 매체에 수록될 수 있다. 본 개시에서, \"애플리케이션(application)\" 및 \"프로그램(program)\"은 컴퓨터 판독 가능한 프로그램 코드 에서의 구현에 적합한 하나 이상의 컴퓨터 프로그램, 소프트웨어 컴포넌트, 명령어 세트, 프로시저(procedure), 함수, 개체(object), 클래스, 인스턴스, 관련 데이터, 또는 그것의 일부를 나타낼 수 있다. \"컴퓨터 판독 가능 한 프로그램 코드\"는, 소스 코드, 목적 코드, 및 실행 가능한 코드를 포함하는 다양한 유형의 컴퓨터 코드를 포 함할 수 있다. \"컴퓨터 판독 가능한 매체\"는, ROM(read only memory), RAM(random access memory), 하드 디스 크 드라이브(HDD), CD(compact disc), DVD(digital video disc), 또는 다양한 유형의 메모리와 같이, 컴퓨터에 의해 액세스(access)될 수 있는 다양한 유형의 매체를 포함할 수 있다. 또한, 기기로 읽을 수 있는 저장 매체는, 비일시적(non-transitory) 저장 매체의 형태로 제공될 수 있다. 여기 서, ‘비일시적 저장 매체'는 실재(tangible)하는 장치이고, 일시적인 전기적 또는 다른 신호들을 전송하는 유 선, 무선, 광학적, 또는 다른 통신 링크들을 배제할 수 있다. 한편, 이 '비일시적 저장 매체'는 데이터가 저장 매체에 반영구적으로 저장되는 경우와 임시적으로 저장되는 경우를 구분하지 않는다. 예를 들어, '비일시적 저 장 매체'는 데이터가 임시적으로 저장되는 버퍼를 포함할 수 있다. 컴퓨터 판독 가능한 매체는 컴퓨터에 의해액세스될 수 있는 임의의 가용 매체일 수 있고, 휘발성 및 비휘발성 매체, 분리형 및 비분리형 매체를 모두 포 함할 수 있다. 컴퓨터 판독 가능한 매체는, 데이터가 영구적으로 저장될 수 있는 매체와 데이터가 저장되고 나 중에 덮어쓰기 될 수 있는 매체, 이를테면 재기입 가능한 광 디스크 또는 소거 가능한 메모리 디바이스를 포함 한다. 일 실시예에 따르면, 본 문서에 개시된 다양한 실시예들에 따른 방법은 컴퓨터 프로그램 제품(computer program product)에 포함되어 제공될 수 있다. 컴퓨터 프로그램 제품은 상품으로서 판매자 및 구매자 간에 거래될 수 있 다. 컴퓨터 프로그램 제품은 기기로 읽을 수 있는 저장 매체(예를 들어, compact disc read only memory (CD- ROM))의 형태로 배포되거나, 또는 어플리케이션 스토어를 통해 또는 두 개의 사용자 장치들(예를 들어, 스마트 폰) 간에 직접, 온라인으로 배포(예를 들어, 다운로드 또는 업로드)될 수 있다. 온라인 배포의 경우에, 컴퓨터 프로그램 제품(예를 들어, 다운로더블 앱(downloadable app))의 적어도 일부는 제조사의 서버, 어플리케이션 스 토어의 서버, 또는 중계 서버의 메모리와 같은 기기로 읽을 수 있는 저장 매체에 적어도 일시 저장되거나, 임시 적으로 생성될 수 있다."}
{"patent_id": "10-2024-0065855", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 20, "content": "전술한 본 개시의 설명은 예시를 위한 것이며, 본 개시가 속하는 기술분야의 통상의 지식을 가진 자는 본 개시 의 기술적 사상이나 필수적인 특징을 변경하지 않고서 다른 구체적인 형태로 쉽게 변형이 가능하다는 것을 이해 할 수 있을 것이다. 예를 들어, 설명된 기술들이 설명된 방법과 다른 순서로 수행되거나, 및/또는 으로 설명된 시스템, 구조, 장치, 회로 등의 구성요소들이 설명된 방법과 다른 형태로 결합 또는 조합되거나, 다른 구성요소 또는 균등물에 의하여 대치되거나 치환되더라도 적절한 결과가 달성될 수 있다. 그러므로 이상에서 기술한 실시 예들은 모든 면에서 예시적인 것이며 한정적이 아닌 것으로 이해해야만 한다. 예를 들어, 단일형으로 설명되어 있는 각 구성 요소는 분산되어 실시될 수도 있으며, 마찬가지로 분산된 것으로 설명되어 있는 구성 요소들도 결 합된 형태로 실시될 수 있다. 본 개시의 범위는 상기 상세한 설명보다는 후술하는 특허청구범위에 의하여 나타내어지며, 특허청구범위의 의미 및 범위 그리고 그 균등 개념으로부터 도출되는 모든 변경 또는 변형된 형태가 본 개시의 범위에 포함되는 것으 로 해석되어야 한다."}
{"patent_id": "10-2024-0065855", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 일 실시예에 따른 영상 복호화 장치의 블록도이다. 도 2는 일 실시예에 따른 영상 부호화 장치의 블록도이다. 도 3은 일 실시예에 따라 현재 부호화 단위를 분할하여 적어도 하나의 부호화 단위를 결정하는 과정을 도시한다. 도 4는 일 실시예에 따라 비-정사각형의 형태인 부호화 단위를 분할하여 적어도 하나의 부호화 단위를 결정하는 과정을 도시한다. 도 5는 일 실시예에 따라 블록 형태 정보 및 분할 형태 모드 정보 중 적어도 하나에 기초하여 부호화 단위를 분 할하는 과정을 도시한다. 도 6은 일 실시예에 따라 홀수 개의 부호화 단위들 중 소정의 부호화 단위를 결정하기 위한 방법을 도시한다. 도 7은 일 실시예에 따라 현재 부호화 단위를 분할하여 복수 개의 부호화 단위들을 결정하는 경우, 복수 개의 부호화 단위들이 처리되는 순서를 도시한다. 도 8은 일 실시예에 따라 소정의 순서로 부호화 단위가 처리될 수 없는 경우, 현재 부호화 단위가 홀수 개의 부 호화 단위로 분할되는 것임을 결정하는 과정을 도시한다. 도 9는 일 실시예에 따라 제 1 부호화 단위를 분할하여 적어도 하나의 부호화 단위를 결정하는 과정을 도시한다. 도 10은 일 실시예에 따라 제 1 부호화 단위가 분할되어 결정된 비-정사각형 형태의 제 2 부호화 단위가 소정의 조건을 만족하는 경우 분할될 수 있는 형태가 제한됨을 도시한다. 도 11은 일 실시예에 따라 분할 형태 모드 정보가 4개의 정사각형 형태의 부호화 단위로의 분할을 나타낼 수 없 는 경우, 정사각형 형태의 부호화 단위를 분할하는 과정을 도시한다.도 12는 일 실시예에 따라 복수 개의 부호화 단위들 간의 처리 순서가 부호화 단위의 분할 과정에 따라 달라질 수 있음을 도시한 것이다. 도 13은 일 실시예에 따라 부호화 단위가 재귀적으로 분할되어 복수 개의 부호화 단위가 결정되는 경우, 부호화 단위의 형태 및 크기가 변함에 따라 부호화 단위의 심도가 결정되는 과정을 도시한다. 도 14는 일 실시예에 따라 부호화 단위들의 형태 및 크기에 따라 결정될 수 있는 심도 및 부호화 단위 구분을 위한 인덱스(part index, 이하 PID)를 도시한다. 도 15는 일 실시예에 따라 픽쳐에 포함되는 복수 개의 소정의 데이터 단위에 따라 복수 개의 부호화 단위들이 결정된 것을 도시한다. 도 16은 일 실시예에 따라 부호화 단위가 분할될 수 있는 형태의 조합이 픽쳐마다 서로 다른 경우, 각각의 픽쳐 마다 결정될 수 있는 부호화 단위들을 도시한다. 도 17은 일 실시예에 따라 바이너리(binary)코드로 표현되는 분할 형태 모드 정보에 기초하여 결정될 수 있는 부호화 단위의 다양한 형태를 도시한다. 도 18은 일 실시예에 따라 바이너리 코드로 표현되는 분할 형태 모드 정보에 기초하여 결정될 수 있는 부호화 단위의 또 다른 형태를 도시한다. 도 19는 일 실시예에 따른 인루프 필터링을 수행하는 영상 부호화 및 복호화 시스템의 블록도를 나타낸 도면이 다. 도 20은 본 개시의 일 실시예에 따른 인트라 예측에 기반한 현재 영상의 부호화 및 복호화 과정을 설명하기 위 한 도면이다. 도 21은 본 개시의 일 실시예에 따른 인터 예측에 기반한 현재 영상의 부호화 및 복호화 과정을 설명하기 위한 도면이다. 도 22는 연속하는 영상들, 연속하는 영상들 사이의 옵티컬 플로우, 및 연속하는 영상들 사이의 잔차 영상을 예 시하는 도면이다. 도 23은 본 개시의 일 실시예에 따른 영상 복호화 장치의 구성을 도시하는 블록도이다. 도 24는 본 개시의 일 실시예에 따른 영상 복호화 방법의 순서도이다. 도 25는 본 개시의 일 실시예에 따른 영상 복호화 방법의 순서도이다. 도 26는 본 개시의 일 실시예에 따른 양자화 오프셋을 설명하는 도면이다. 도 27는 본 개시의 일 실시예에 따른 양자화 오프셋을 설명하는 도면이다. 도 28은 본 개시의 일 실시예에 따라 주파수 대역을 분류하는 동작에 대한 도면이다. 도 29는 본 개시의 일 실시예에 따라 주파수 대역을 분류하는 동작에 대한 도면이다. 도 30은 본 개시의 일 실시예에 따른 영상 부호화 장치의 구성을 도시하는 블록도이다. 도 31은 본 개시의 일 실시예에 따른 영상 부호화 방법의 순서도이다. 도 32은 본 개시의 일 실시예에 따른 영상 부호화 방법의 순서도이다."}
