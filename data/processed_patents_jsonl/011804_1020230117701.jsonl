{"patent_id": "10-2023-0117701", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0142265", "출원번호": "10-2023-0117701", "발명의 명칭": "딥러닝 알고리즘을 이용한 종양 침윤 림프구 검출 시스템 및 그 방법", "출원인": "울산대학교 산학협력단", "발명자": "노병주"}}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "딥러닝 알고리즘을 이용한 종양 침윤 림프구 검출 시스템에 있어서, 측정 대상이 되는 패치 이미지를 입력받는 입력부, 그리고입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하여 패치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 종양 침윤 림프구 해당 여부를 분류하며, 패치 분류 모델과 세포 분류 모델의 결과를 종합하여 측정 대상이 되는 패치 이미지에 존재하는 종양침윤 림프구를 검출하는 검출부를 포함하는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,종양 침윤 림프구가 존재하는 패치 이미지와 종양 침윤 림프구가 존재하지 않는 패치 이미지를 수집하는 이미지수집부, 패치 이미지에 존재하는 종양 침윤 림프구에 점 레이블을 생성하고, 패치 이미지로부터 종양 침윤 림프구에 대한 영역화된 이미지를 획득하는 전처리부, 그리고구축된 패치 분류 모델과 세포 분류 모델에 점 레이블이 생성된 패치 이미지 및 영역화된 이미지를 입력하여 학습시키는 학습부를 더 포함하는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 2 항에 있어서,상기 전처리부는, 패치 이미지에 포함된 종양 침윤 림프구의 중심에 점을 생성하여 점 레이블을 생성하는 종양 침윤 림프구 검출시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 2 항에 있어서,상기 전처리부는, 세포핵 영역화 모델에 패치 이미지를 입력하여 종양 침윤 림프구에 대한 복수의 제1 영역화된 이미지를 획득하고, 복수의 제1 영역화된 이미지에 원형 필터 알고리즘을 적용하여 종양 침윤 림프구에 대한 복수의 제2 영역화된 이미지를 획득하는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 4 항에 있어서,상기 전처리부는, 원형 필터 알고리즘을 이용하여 세포의 크기, 구형도(Circularity), 볼록성(Convexity) 및 관성비(InertiaRatio)에 따라 복수의 제1 영역화된 이미지 중에서 세포 분류 모델을 학습시키기 위한 복수의 제2 영역화된 이미지를 추출하는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 2 항에 있어서,공개특허 10-2024-0142265-3-상기 학습부는, 패치 이미지와 점 레이블을 이용하여 패치 분류 모델로 하여금 패치 이미지에 존재하는 종양 침윤 림프구의 양에 따라 패치 이미지를 0 또는 1의 값으로 분류하도록 학습시키는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 6 항에 있어서,상기 학습부는, 복수의 제2 영역화된 이미지를 세포 분류 모델에 입력하여 세포 분류 모델로 하여금 각각의 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구인지 여부를 확률값으로 출력하도록 학습시키는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 7 항에 있어서, 상기 검출부는, 패치 분류 모델로부터 획득한 결과값이 1이고, 세포 분류 모델로부터 획득한 확률값이 제1 임계값보다 크면, 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하는 것으로 판단하고,패치 분류 모델로부터 획득한 결과값이 1이고, 세포 분류 모델로부터 획득한 확률값이 제1 임계값보다 작으면,제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하지 않는 것으로 판단하는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제 7 항에 있어서,상기 검출부는, 패치 분류 모델로부터 획득한 결과값이 0이고, 세포 분류 모델로부터 획득한 확률값이 제2 임계값보다 크면, 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하는 것으로 판단하고,패치 분류 모델로부터 획득한 결과값이 0이고, 세포 분류 모델로부터 획득한 확률값이 제2 임계값보다 작으면,제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하지 않는 것으로 판단하는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 8 항 또는 제9항에 있어서,상기 제1 임계값과 제2 임계값은 0~1 사이에서 설정된 값으로, 제2 임계값이 제1 임계값 보다 큰 값으로 설정되는 종양 침윤 림프구 검출 시스템."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "정량적 측정 시스템을 이용한 종양 침윤 림프구 검출 방법에 있어서, 측정 대상이 되는 패치 이미지를 입력받는 단계, 그리고입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하여 패치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 종양 침윤 림프구 해당 여부를 분류한 다음, 패치 분류 모델과 세포 분류 모델의 결과를 종합하여 측정 대상이 되는 패치 이미지에 존재하는 종양 침윤 림프구를 검출하는 단계를 포함하는 종양 침윤 림프구 검출 방법."}
{"patent_id": "10-2023-0117701", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제 11 항에 있어서,공개특허 10-2024-0142265-4-종양 침윤 림프구가 존재하는 패치 이미지와 종양 침윤 림프구가 존재하지 않는 패치 이미지를 수집하는 단계,패치 이미지에 존재하는 종양 침윤 림프구에 점 레이블을 생성하고, 패치 이미지로부터 종양 침윤 림프구에 대한 영역화된 이미지를 획득하는 단계, 그리고구축된 패치 분류 모델과 세포 분류 모델에 점 레이블이 생성된 패치 이미지 및 영역화된 이미지를 입력하여 학습시키는 단계를 더 포함하는 종양 침윤 림프구 검출 방법."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 딥러닝 알고리즘을 이용한 종양 침윤 림프구 검출 시스템 및 그 방법에 관한 것이다. 본 발명에 따르면, 딥러닝 알고리즘을 이용한 종양 침윤 림프구 검출 시스템은 측정 대상이 되는 패치 이미지를 입력받는 입력부, 그리고 입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하여 패 치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 종양 침윤 림프구 해당 여부를 분류하며, 패치 분류 모델과 세포 분류 모델의 결과를 종합하여 측정 대상이 되는 패치 이미 지에 존재하는 종양 침윤 림프구를 검출하는 검출부를 포함한다."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 딥러닝 알고리즘을 이용한 종양 침윤 림프구 검출 시스템 및 그 방법에 관한 것으로서, 더욱 상세하 게 설명하면 조직 병리 영상으로부터 추출된 복수의 패치를 입력받아 패치 분류 모델과 세포 분류 모델을 통해 패치에 존재하는 종양 침윤 림프구를 검출하는 종양 침윤 림프구 검출 시스템 및 그 방법에 관한 것이다."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "종양 침윤 림프구(Tumor Infiltrating Lymphocyte, TIL)는 종양 주위 또는 종양 내부에 보이는 면역 세포를 의미하는 것으로, 암세포를 죽이고 질병이 신체의 다른 부분으로 퍼지는 것을 방지하는 역할을 한다. 종양 치료 방법을 결정하고 치료 반응을 예측하기 위해서 병리 슬라이드 이미지를 분석하여 종양 침윤 림프구를 검출하기 위한 연구가 이루어지고 있으며, 특히 인공지능 모델을 통해 종양 침윤 림프구를 검출하는 기술이 개 발되고 있다. 그러나 종래의 인공지능 모델은 간혹 세포핵이 아닌 조직을 세포핵으로 영역화 하는 경우가 발생하여 종양 침윤 림프구 검출의 정확도가 떨어지는 문제점이 있었다. 본 발명의 배경이 되는 기술은 대한민국 공개특허 제 10-2023-0026950 호 (2023.02. 27. 공개)에 개시되어 있다."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "이와 같이 본 발명에 따르면, 조직 병리 영상으로부터 추출된 복수의 패치를 입력받아 패치 분류 모델과 세포 분류 모델을 통해 패치에 존재하는 종양 침윤 림프구를 검출하는 종양 침윤 림프구 검출 시스템 및 그 방법을 제공하기 위한 것이다."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "이러한 기술적 과제를 이루기 위한 본 발명의 실시예에 따르면 딥러닝 알고리즘을 이용한 종양 침윤 림프구 검 출 시스템은 측정 대상이 되는 패치 이미지를 입력받는 입력부, 그리고 입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하여 패치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 종양 침윤 림프구 해당 여부를 분류하며, 패치 분류 모델과 세포 분류 모델 의 결과를 종합하여 측정 대상이 되는 패치 이미지에 존재하는 종양 침윤 림프구를 검출하는 검출부를 포함한다. 종양 침윤 림프구가 존재하는 패치 이미지와 종양 침윤 림프구가 존재하지 않는 패치 이미지를 수집하는 이미지 수집부, 패치 이미지에 존재하는 종양 침윤 림프구에 점 레이블을 생성하고, 패치 이미지로부터 종양 침윤 림프 구에 대한 영역화된 이미지를 획득하는 전처리부, 그리고 구축된 패치 분류 모델과 세포 분류 모델에 점 레이블 이 생성된 패치 이미지 및 영역화된 이미지를 입력하여 학습시키는 학습부를 더 포함할 수 있다. 상기 전처리부는, 패치 이미지에 포함된 종양 침윤 림프구의 중심에 점을 생성하여 점 레이블을 생성할 수 있다. 상기 전처리부는, 세포핵 영역화 모델에 패치 이미지를 입력하여 종양 침윤 림프구에 대한 복수의 제1 영역화된 이미지를 획득하고, 복수의 제1 영역화된 이미지에 원형 필터 알고리즘을 적용하여 종양 침윤 림프구에 대한 복 수의 제2 영역화된 이미지를 획득할 수 있다. 상기 전처리부는, 원형 필터 알고리즘을 이용하여 세포의 크기, 구형도(Circularity), 볼록성(Convexity) 및 관 성비(Inertia Ratio)에 따라 복수의 제1 영역화된 이미지 중에서 세포 분류 모델을 학습시키기 위한 복수의 제2 영역화된 이미지를 추출할 수 있다. 상기 학습부는, 패치 이미지와 점 레이블을 이용하여 패치 분류 모델로 하여금 패치 이미지에 존재하는 종양 침 윤 림프구의 양에 따라 패치 이미지를 0 또는 1의 값으로 분류하도록 학습시킬 수 있다. 상기 학습부는, 복수의 제2 영역화된 이미지를 세포 분류 모델에 입력하여 세포 분류 모델로 하여금 각각의 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구인지 여부를 확률값으로 출력하도록 학습시킬 수 있다. 상기 검출부는, 패치 분류 모델로부터 획득한 결과값이 1이고, 세포 분류 모델로부터 획득한 확률값이 제1 임계 값보다 크면, 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하는 것으로 판단하고, 패치 분류 모델로부터 획득한 결과값이 1이고, 세포 분류 모델로부터 획득한 확률값이 제1 임계값보다 작으면, 제2 영역화 된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하지 않는 것으로 판단할 수 있다. 상기 검출부는, 패치 분류 모델로부터 획득한 결과값이 0이고, 세포 분류 모델로부터 획득한 확률값이 제2 임계 값보다 크면, 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하는 것으로 판단하고, 패치 분류 모델로부터 획득한 결과값이 0이고, 세포 분류 모델로부터 획득한 확률값이 제2 임계값보다 작으면, 제2 영역화 된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하지 않는 것으로 판단할 수 있다. 상기 제1 임계값과 제2 임계값은 0~1 사이에서 설정된 값으로, 제2 임계값이 제1 임계값 보다 큰 값으로 설정될 수 있다. 본 발명의 실시예에 따르면 딥러닝 알고리즘을 이용한 종양 침윤 림프구 검출 방법은 측정 대상이 되는 패치 이 미지를 입력받는 단계, 그리고 입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하 여 패치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 종 양 침윤 림프구 해당 여부를 분류한 다음, 패치 분류 모델과 세포 분류 모델의 결과를 종합하여 측정 대상이 되 는 패치 이미지에 존재하는 종양 침윤 림프구를 검출하는 단계를 포함한다. 종양 침윤 림프구가 존재하는 패치 이미지와 종양 침윤 림프구가 존재하지 않는 패치 이미지를 수집하는 단계, 패치 이미지에 존재하는 종양 침윤 림프구에 점 레이블을 생성하고, 패치 이미지로부터 종양 침윤 림프구에 대 한 영역화된 이미지를 획득하는 단계, 그리고 구축된 패치 분류 모델과 세포 분류 모델에 점 레이블이 생성된 패치 이미지 및 영역화된 이미지를 입력하여 학습시키는 단계를 더 포함할 수 있다."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "이와 같이 본 발명에 따르면, 패치 이미지 속 종양 침윤 림프구의 양을 판단하고, 동일한 패치 이미지 속 세포 를 영역화하여 종양 침윤 림프구 여부를 분류하는 것으로 해당 객체 단위의 예측이 가능하며, 겹쳐져 있는 영역 에 대한 영역화가 가능하므로 종양 침윤 림프구 분류에 대한 정확한 예측이 가능하다."}
{"patent_id": "10-2023-0117701", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하 첨부된 도면을 참조하여 본 발명에 따른 바람직한 실시예를 상세히 설명하기로 한다. 이 과정에서 도면에 도시된 선들의 두께나 구성요소의 크기 등은 설명의 명료성과 편의상 과장되게 도시되어 있을 수 있다. 또한 후술되는 용어들은 본 발명에서의 기능을 고려하여 정의된 용어들로서, 이는 사용자, 운용자의 의도 또는 관례에 따라 달라질 수 있다. 그러므로 이러한 용어들에 대한 정의는 본 명세서 전반에 걸친 내용을 토대로 내 려져야 할 것이다. 이하에서는 도 1을 이용하여 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템에 대해 더욱 상세하게 설 명한다. 도1은 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템을 설명하기 위한 구성도이다. 도 1에 도시된 바와 같이, 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템은 이미지 수집부, 전처리부, 학습부, 입력부 및 검출부를 포함한다. 먼저, 이미지 수집부는 종양 침윤 림프구가 존재하는 패치 이미지와 종양 침윤 림프구가 존재하지 않는 패 치 이미지를 수집한다. 전처리부는 패치 이미지에 존재하는 종양 침윤 림프구에 점 레이블을 생성하고, 패치 이미지로부터 종양 침윤 림프구에 대한 영역화된 이미지를 획득한다. 학습부는 패치 분류 모델과 세포 분류 모델을 각각 구축한 다음, 구축된 패치 분류 모델과 세포 분류 모델 에 점 레이블이 생성된 패치 이미지 및 영역화된 이미지를 입력하여 학습시킨다. 입력부는 측정 대상이 되는 패치 이미지를 입력받는다. 마지막으로 검출부는 입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하여 패치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 종양 침윤 림프구 해당 여부를 분류하며, 패치 분류 모델과 세포 분류 모델의 결과를 종합하여 측정 대상이 되는 패 치 이미지에 존재하는 종양 침윤 림프구를 검출한다. 이하에서는 도 2 내지 도 5를 이용하여 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템을 이용한 종양 침윤 림프구 검출 방법에 대해 더욱 상세하게 설명한다. 도 2는 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템을 이용한 종양 침윤 림프구 검출 방법을 설명하 기 위한 순서도이다. 도 2에 도시된 바와 같이, 본 발명의 실시예에 따른 종양 침윤 림프구 검출 방법은 패치 분류 모델 및 세포 분 류 모델을 학습시키는 단계와, 학습이 완료된 패치 분류 모델 및 세포 분류 모델을 이용하여 종양 침윤 림프구 를 검출하는 단계를 포함한다. 먼저 패치 분류 모델 및 세포 분류 모델을 학습시키는 단계를 살펴보면, 종양 침윤 림프구 검출 시스템은 패치 이미지를 수집한다(S210). 부연하자면, 이미지 수집부는 병원 서버로부터 전체 슬라이드 이미지(Whole slide image)를 수집하고, 수 집된 전체 슬라이드 이미지(Whole slide image)로부터 종양 침윤 림프구가 존재하는 패치 이미지와 종양 침윤 림프구가 존재하지 않는 패치 이미지를 획득한다. 그 다음, 전처리부는 패치 이미지에 존재하는 종양 침윤 림프구 영역에 점 레이블을 생성하고, 동일한 패 치 이미지로부터 제1 영역화된 이미지를 획득한다(S220). 부연하자면, 전처리부는 패치 이미지에 포함된 종양 침윤 림프구의 중심에 점을 생성하여 점 레이블을 생 성한다. 또한, 전처리부는 세포핵 영역화 모델에 패치 이미지를 입력하여 종양 침윤 림프구에 대한 복수의 제1 영 역화된 이미지를 획득한다. 이때, 세포핵 영역화 모델은 H&E 염색된 조직 병리 영상을 이용하여 학습된 것으로 서, 기존에 제안되었던 다양한 세포핵 영역화 모델을 이용하여도 무방하며, 본 발명에서의 핵심 구성이 아니므 로 세포핵 영역화 모델에 대한 구체적인 설명은 생략하기로 한다. 그 다음, 전처리부는 복수의 제1 영역화된 이미지에 원형 필터 알고리즘을 적용하여 그라운드 트루스 (ground-truth)에 해당하는 종양 침윤 림프구에 대한 복수의 제2 영역화된 이미지를 획득한다(S230). 종양 세포 및 배경의 의도치 않은 영역화는 크기가 크거나 모양이 제각각인 반면, 종양 침윤 림프구는 크기가 일정하고, 찌그러지거나 구겨지지 않은 원 모양의 형태를 유지한다.따라서, 전처리부는 원형 필터 알고리즘을 이용하여 세포의 크기, 구형도(Circularity), 볼록성 (Convexity) 및 관성비(Inertia Ratio)에 따라 복수의 제1 영역화된 이미지 중에서 세포 분류 모델을 학습시키 기 위한 복수의 제2 영역화된 이미지를 추출한다. 즉, 전처리부는 복수의 제1 영역화된 이미지에서 세포의 크기가 기준값보다 큰 영역화된 이미지를 제외한 다. 반면에, 전처리부는 구형도(Circularity)가 0.2보다 크거나, 볼록성(Convexity)이 0.2보다 크거나, 관성비(Inertia Ratio)가 0.1보다 큰 세포가 포함되어 있는 영역화된 이미지를 제2 영역화된 이미지로 추출한다. S230단계가 완료되면, 학습부는 점 레이블이 생성된 패치 이미지와 최종 영역화된 이미지, 즉, 제2 영역화 된 이미지를 이용하여 패치 분류 모델 및 세포 분류 모델을 학습시킨다(S240). 먼저, 학습부는 패치 분류 모델 및 세포 분류 모델을 구축한다. 도 3은 도 2에 도시된 S230단계에서 구축된 패치 분류 모델 및 세포 분류 모델을 설명하기 위한 도면이다. 도 3에 도시된 바와 같이, 패치 분류 모델은 정확한 예측을 위해서 세포 단위의 지역정보를 활용하는 것이 필요 하기 때문에 패치 분류 모델 및 세포 분류 모델에 컨볼루션 네트워크 알고리즘을 적용한다. 입력 영상의 전역 정보를 추출하기 위하여 초기 네트워크는 7x7 크기의 큰 커널을 적용한다. 이후 3x3 크기의 커널과 배치 정규화, ReLU 함수가 포함된 콘볼루션 블록이 반복되는 형태로 구성되며, 채널 수가 일정한 각 레 이어에는 콘볼루션 블록이 각각 3, 4, 6, 3개, 채널의 수가 64, 128, 256, 512개로 구성된다. 각 레이어의 시작 점에서는 채널수가 늘어나는 만큼 콘볼루션의 보폭을 증가하여 공간해상도가 줄어들도록 설계된다. 이는 세세한 지역정보의 추출이 가능하도록 하기 위함이다. 그리고 네트워크의 말단에서는 파라미터의 개수를 줄이기 위해서 완전히 연결된 레이어(Fully connected layer)가 아닌 전역평균풀링(Global average pooling)을 적용한다. 그 다음, 학습부는 패치 이미지와 점 레이블을 이용하여 패치 분류 모델로 하여금 패치 이미지에 존재하는 종양 침윤 림프구의 양에 따라 패치 이미지를 0 또는 1의 값으로 분류하도록 학습시킨다. 이를 다시 설명하면 패치 이미지에 포함된 점이 5개를 초과하면, 패치 분류 모델은 해당되는 패치 이미지에 종 양 침윤 림프구가 존재하는 것으로 판단하여 1의 값을 출력한다. 반면에 패치 이미지에 포함된 점이 5개 이하이 면, 패치 분류 모델은 해당되는 패치 이미지에 종양 침윤 림프구가 존재하지 않는 것으로 판단하여 0의 값을 출 력한다. 본 발명에서는 종양 침윤 림프구에 대한 존재 여부를 결정하기 위한 점의 개수를 5개로 설정하였으나 이에 한정 하지 않고, 필요에 따라서는 5개보다 많거나 적은 값을 이용하여 종양 침윤 림프구의 존재 여부를 결정할 수도 있다. 또한, 학습부는 복수의 제2 영역화된 이미지를 세포 분류 모델에 입력하여 세포 분류 모델로 하여금 각각 의 제2 영역화된 이미지에 포함된 세포가 종양 침윤 림프구인지 여부를 확률값으로 출력하도록 학습시킨다. S210 단계 내지 S240단계를 이용하여 패치 분류 모델 및 세포 분류 모델에 대한 학습이 완료되면, 종양 침윤 림 프구 검출 시스템은 학습이 완료된 패치 분류 모델 및 세포 분류 모델을 이용하여 해당되는 패치 이미지에 존재하는 종양 침윤 림프구를 검출한다. 입력부는 측정 대상이 되는 패치 이미지를 입력받는다(S250). 입력되는 패치 이미지는 하나 이상의 개수를 가진다. 그 다음, 검출부는 입력된 측정 대상이 되는 패치 이미지를 학습이 완료된 패치 분류 모델에 입력하여 패 치 이미지를 분류하고, 패치 이미지에서 영역화된 이미지를 학습이 완료된 세포 분류 모델에 입력하여 영역화된 이미지에 포함된 세포의 종양 침윤 림프구 해당 여부를 분류하며, 패치 분류 모델과 세포 분류 모델의 결과를 종합하여 측정 대상이 되는 패치 이미지에 존재하는 종양 침윤 림프구를 검출한다(S260). 도 4는 도 2에 도시된 S260단계를 설명하기 위한 예시도이다. 도 4에 도시된 바와 같이, 검출부는 측정 대상이 되는 패치 이미지를 패치 분류 모델에 입력한다. 그러면, 패치 분류 모델은 종양 침윤 림프구의 존재 여부에 따라 0 또는 1의 값을 출력한다. 또한, 검출부는 측정 대상이 되는 패치 이미지에서 영역화된 이미지를 세포 분류 모델에 입력한다. 그러면, 세포 분류 모델은 종양 침윤 림프구의 해당 여부를 확률값으로 출력한다. 검출부는 기 설정된 임계값(thresholding value)과 패치 분류 모델로부터 획득한 결과값 및 세포 분류 모 델로부터 획득한 확률값을 이용하여 측정 대상이 되는 패치 이미지에 존재하는 종양 침윤 림프구를 검출한다. 이를 다시 설명하면, 패치 분류 모델로부터 획득한 결과값에 따라 세포 분류 모델로부터 획득한 확률값에 대한 임계값을 선택한다. 패치 분류 모델로부터 획득한 결과값이 1이면, 검출부는 확률값에 대한 임계값을 제 1 임계값으로 설정한 다. 반면에 패치 분류 모델로부터 획득한 결과값이 0이면, 검출부는 확률값에 대한 임계값을 제2 임계값으로 설정한다. 여기서, 제1 임계값과 제2 임계값은 0~1 사이에서 설정된 값으로, 제2 임계값이 제1 임계값 보다 큰 값으로 설 정된다. 일 실시예에서는 제1 임계값은 0.5이고, 제2 임계값은 0.8이다. 상기와 같이 임계값 설정이 완료된 상태에서 패치 분류 모델로부터 획득한 결과값이 1이고, 세포 분류 모델로부 터 획득한 확률값이 0.5보다 크면, 검출부는 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하 는 것으로 판단한다. 반면에 패치 분류 모델로부터 획득한 결과값이 1이고, 세포 분류 모델로부터 획득한 확률값이 0.5보다 작으면, 검출부는 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하지 않는 것으로 판단한다. 또한, 패치 분류 모델로부터 획득한 결과값이 0이고, 세포 분류 모델로부터 획득한 확률값이 0.8보다 크면, 검 출부는 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하는 것으로 판단한다. 반면에 패치 분류 모델로부터 획득한 결과값이 0이고, 세포 분류 모델로부터 획득한 확률값이 0.8보다 작으면, 검출부는 영역화된 이미지에 포함된 세포가 종양 침윤 림프구에 해당하지 않는 것으로 판단한다. 도 5는 본 발명의 실시예에 따른 예측 결과를 나타내는 예시도이다. 도 5에 도시된 바와 같이, 가로축은 본 발명의 실시예에 따른 예측 결과를 나타내고, 세로축은 그라운드 트루스 (ground-truth)에 해당하는 값을 나타낸다. 도 5를 참조하면, 본 발명의 실시예에 따르면 0.92 이상의 정확도로 패치 이미지에 존재하는 종양 침윤 림프구 를 검출할 수 있음을 알 수 있다. 이와 같이 본 발명에 따른 정량적 측정 시스템은 패치 이미지 속 종양 침윤 림프구의 양을 판단하고, 동일한 패 치 이미지 속 세포를 영역화하여 종양 침윤 림프구 여부를 분류하는 것으로 해당 객체 단위의 예측이 가능하며, 겹쳐져 있는 영역에 대한 영역화가 가능하므로 종양 침윤 림프구 분류에 대한 정확한 예측이 가능하다. 본 발명은 도면에 도시된 실시예를 참고로 하여 설명되었으나 이는 예시적인 것에 불과하며, 당해 기술이 속하 는 분야에서 통상의 지식을 가진 자라면 이로부터 다양한 변형 및 균등한 타 실시예가 가능하다는 점을 이해할 것이다. 따라서 본 발명의 진정한 기술적 보호범위는 아래의 특허청구범위의 기술적 사상에 의하여 정해져야 할 것이다."}
{"patent_id": "10-2023-0117701", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도1은 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템을 설명하기 위한 구성도이다. 도 2는 본 발명의 실시예에 따른 종양 침윤 림프구 검출 시스템을 이용한 종양 침윤 림프구 검출 방법을 설명하 기 위한 순서도이다. 도 3은 도 2에 도시된 S230단계에서 구축된 패치 분류 모델 및 세포 분류 모델을 설명하기 위한 도면이다. 도 4는 도 2에 도시된 S260단계를 설명하기 위한 예시도이다. 도 5는 본 발명의 실시예에 따른 예측 결과를 나타내는 예시도이다."}
