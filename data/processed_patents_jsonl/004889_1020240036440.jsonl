{"patent_id": "10-2024-0036440", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2025-0043219", "출원번호": "10-2024-0036440", "발명의 명칭": "VCM에서 적응적 시공간 리샘플링 기반 부호화 및 복호화 방법", "출원인": "한화비전 주식회사", "발명자": "임정은"}}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "기계를 위한 영상 부호화를 수행하는 인코딩 장치에 있어서,입력 영상에 대한 프레임율을 변경하는 시간적 리샘플러;상기 입력 영상에 대한 해상도를 변경하는 공간적 리샘플러; 및상기 입력 영상에 대한 부호화를 수행하는 내부 부호화기를 포함하고,상기 부호화된 영상과 함께 상기 시간적 리샘플러에 의하여 변경된 입력 영상의 프레임율을 포함하는 시간적 복원 정보(temporal restoration data) 및 상기 공간적 리샘플러에 의하여 변경된 입력 영상의 해상도를 포함하는공간적 복원 정보(spatial restoration data) 중 적어도 하나를 디코딩 장치에 전송하도록 하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 시간적 리샘플러는, 상기 입력 영상에 포함된 전체 프레임에 대하여 프레임 단위로 업샘플링 또는 다운샘플링하고,상기 샘플링 주기는 입력 영상의 응용 목적에 따라 결정되는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에 있어서,상기 시간적 리샘플러는 주기적으로 상기 입력 영상을 리샘플링하는 경우 상기 샘플링 주기를 상기 디코딩 장치에 전송하도록 하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에 있어서,상기 시간적 리샘플러는 비주기적으로 리샘플링하는 경우 리샘플링된 프레임의 인덱스 번호를 전송하는, 인코딩장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에 있어서,상기 시간적 리샘플러는 리샘플링에 따른 프레임율에 대한 정보로써 이전 프레임 인덱스와 현재 프레임 인덱스간의 차분 값을 상기 디코딩 장치로 전송하고,상기 차분 값은 두 프레임 간의 대응 위치 픽셀 간의 차분 또는 두 프레임 간의 움직임 예측을 통한 MSE(meansquare error)로 산출되는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 시간적 복원 정보는 전체 또는 일부로써 시퀀스 단위, GOP 단위, 프레임 단위, 슬라이스 단위 및 서브 시퀀스 단위 중 적어도 하나의 단위로 전송되도록 하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에 있어서,공개특허 10-2025-0043219-3-상기 공간적 리샘플러는 상기 입력 영상의 프레임 단위로 해상도를 업샘플링 또는 다운샘플링하도록 하고,리샘플링되는 목표 해상도는 응용 목적에 따라 전체 프레임에 대해 동일하거나, 프레임 단위로 상이하게 결정되는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 공간적 리샘플러는 상기 입력 영상의 각 프레임 중 전체 또는 일부 영역에 대한 해상도를 리샘플링하도록하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,상기 입력 영상의 각 프레임 중 일부 영역은 원본 프레임의 일부를 잘라내는 크롭 방식으로 획득하도록 하는,인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 공간적 리샘플러는 크롭 방식으로 잘라낸 원본 프레임의 일부에 대하여 해상도를 업샘플링 또는 다운샘플링하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제1항에 있어서,상기 공간적 리샘플러는 상기 입력 영상에서 일부 영역을 잘라내는 크롭 방식으로 응용 목적에 따른 목표 해상도로 변경하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제1항에 있어서,상기 공간적 리샘플러는 상기 입력 영상에 대한 각 프레임의 해상도를 각기 다르게 리샘플링한 경우, 상기 리샘플링된 입력 영상을 해상도별로 재정렬하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제1항에 있어서,상기 시간적 리샘플러 및 상기 공간적 리샘플러는 각각 상기 입력 영상의 응용 목적에 기반하여 프레임율 및 해상도를 리샘플링하고,상기 입력 영상의 응용 목적은, 추적(tracking), 인식(recognition), 분류(classification), 및 분할(segmentation) 중 어느 하나에 대응되는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제1항에 있어서,상기 입력 영상에서 하나 이상의 관심 영역을 추출하는 관심 영역 추출기를 더 포함하고,상기 관심 영역 추출기는 상기 입력 영상에서 객체와 배경을 구분하여, 하나 이상의 객체에 대응하여 하나 이상의 관심 영역을 추출하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에 있어서,상기 시간적 리샘플러 및 상기 공간적 리샘플러는 상기 입력 영상에 대한 하나 이상의 관심 영역에 대한 정보를공개특허 10-2025-0043219-4-기반으로, 시간적 리샘플링 및 공간적 리샘플링을 수행하도록 하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제14항에 있어서,상기 관심 영역 추출기는 상기 입력 영상에 대한 시간적 리샘플링 및 공간적 리샘플링 중 적어도 하나를 수행한입력 영상에 대하여, 상기 관심 영역을 추출하는, 인코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "기계를 위한 영상 복호화를 수행하는 디코딩 장치에 있어서,인코딩 장치로부터 부호화된 입력 영상을 입력 받아 복호화를 수행하는 내부 복호화기;상기 인코딩 장치로부터 수신한 상기 입력 영상에 대한 공간적 복원 정보(spatial restoration data)를 기반으로 상기 복호화된 영상에 대한 해상도를 변경하여 상기 입력 영상의 원본 영상의 해상도로 복원하는 공간적 복원기; 및상기 인코딩 장치로부터 수신한 상기 입력 영상에 대한 시간적 복원 정보(temporal restoration data)를 기반으로 상기 복호화된 영상에 대한 프레임율을 변경하여 상기 입력 영상의 원본 영상의 프레임율로 복원하는 시간적복원기를 포함하는, 디코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제17항에 있어서,상기 공간적 복원기는 상기 공간적 복원 정보에 기반하여 상기 입력 영상의 프레임 단위로 해상도를 업샘플링또는 다운샘플링하고,상기 공간적 복원 정보는, 공간적 리샘플링 적용 여부, 해상도별 리샘플링 방법에 대한 리스트의 인덱스, 리샘플링 방법에 대한 정보, 업샘플링 및 다운샘플링의 경우 해당 리샘플러에서 사용한 필터에 대한 정보, 크롭된영역의 위치 정보, 및 인코딩 장치에서 공간적 리샘플링에 따라 제거된 영역을 복원하기 위해 참조하는 영상 정보를 적어도 하나 포함하는, 디코딩 장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제17항에 있어서,상기 시간적 복원기는 상기 시간적 복원 정보에 기반하여 상기 입력 영상을 상기 입력 영상의 원본 영상에 대한프레임율로 복원하고,상기 시간적 복원 정보는, 시간적 리샘플링 적용 여부, 주기적 리샘플링 또는 비주기적 리샘플링인지 여부, 및비주기적 리샘플링의 경우 프레임 주기 또는 리샘플링된 프레임의 인덱스 정보를 적어도 하나 포함하는, 디코딩장치."}
{"patent_id": "10-2024-0036440", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "명령어들을 기록하고 있는 비휘발성(non-volatile) 컴퓨터 판독가능 저장 매체로서,상기 명령어들은, 하나 이상의 프로세서들에 의해 실행될 때, 상기 하나 이상의 프로세서들로 하여금:입력 영상에 대한 프레임율을 변경하는 시간적 리샘플링 단계;상기 입력 영상에 대한 해상도를 변경하는 공간적 리샘플링 단계;상기 입력 영상에 대한 부호화를 수행하는 단계; 및상기 부호화된 영상과 함께 상기 시간적 리샘플링에 따라 변경된 입력 영상의 프레임율을 포함하는 시간적 복원정보(temporal restoration data) 및 상기 공간적 리샘플링에 따라 변경된 입력 영상의 해상도를 포함하는 공간적 복원 정보(spatial restoration data)를 디코딩 장치에 전송하는 단계를 수행하도록 하는, 공개특허 10-2025-0043219-5-비일시적 컴퓨터 판독가능 저장 매체."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시의 일 예시는 기계를 위한 영상 부호화(VCM)를 수행하는 인코딩 장치를 제시한다. 상기 인코딩 장치는, 입력 영상에 대한 프레임율을 변경하는 시간적 리샘플러; 상기 입력 영상에 대한 해상도를 변경하는 공간적 리샘 플러; 및 상기 입력 영상에 대한 부호화를 수행하는 내부 부호화기를 포함하고, 상기 부호화된 영상과 함께 상기 시간적 리샘플러에 의하여 변경된 입력 영상의 프레임율을 포함하는 시간적 복원 정보(temporal restoration data) 및 상기 공간적 리샘플러에 의하여 변경된 입력 영상의 해상도를 포함하는 공간적 복원 정보(spatial restoration data)를 디코딩 장치에 전송할 수 있다."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 VCM에서 적응적 시공간 리샘플링 기반 부호화 및 복호화 방법에 관한 것이다."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "정보 통신 산업의 지속적인 발달을 통해 HD(High Definition) 해상도를 가지는 방송 서비스가 세계적으로 확산 되었다. 이러한 확산을 통해, 많은 사용자들이 고해상도이며 고화질인 영상(image) 및/또는 비디오(video)에 익숙해지게 되었고, 보다 높은 화질, 즉 4K 또는 8K 이상의 UHD(Ultra High Definition) 영상/비디오와 같은 고해상도, 고 품질의 영상/비디오에 대한 수요가 다양한 분야에서 증가되었다. 이러한 UHD 영상 데이터를 코딩하는 기술은 2013년 표준 기술인 HEVC(High Efficiency Video Coding)를 통해 완성되었다. HEVC는 이전의 H.264/AVC 기술보다 더 높은 압축률과 더 낮은 복잡도를 갖는 차세대 영상 압축 기술이며, HD급, UHD급 영상의 방대한 데이터를 효과적으로 압축하기 위한 핵심 기술이다. HEVC는 이전의 압축 표준들과 같이 블록 단위의 부호화를 수행한다. 다만 H.264/AVC와 달리 하나의 프로파일만 존재하는 차이점이 있다. HEVC의 유일한 프로파일에 포함된 핵심 부호화 기술은 총 8개 분야로 계층적 부호화 구조 기술, 변환 기술, 양자화 기술, 화면 내 예측 부호화 기술, 화면 간 움직임 예측 기술, 엔트로피 부호화 기술, 루프 필터 기술 및 기타 기술이 있다. 2013년 HEVC 비디오 코덱 제정 이후, 4K, 8K를 비디오 영상을 이용한 실감 영상 및 가상 현실 서비스 등이 확대 됨에 따라 HEVC 대비 2배 이상 성능 개선을 목표로 하는 차세대 비디오 코덱인, 다용도 비디오 부호화(VVC: Versatile Video Coding) 표준이 개발되었다. VVC는 H.266으로 불린다. H.266(VVC)은 이전 세대 코덱인 H.265(HEVC)보다 2배 이상의 효율을 목표로 개발되었다. VVC는 처음에는 4K 이 상의 해상도를 감안하고 개발되었으나 점점 VR 시장의 확장으로 인한 360도 영상을 대응할 목적으로 무려 16K 수준의 초고해상도 영상처리용으로도 개발되었다. 또한 점차 디스플레이 기술의 발달로 HDR 시장이 확대됨에 따 라 이에 대응하기 위해 10비트 색심도는 물론이고 16비트 색심도를 지원하며 1000니트, 4000니트, 10000니트의 밝기 표현을 지원한다. 또한 VR시장과 360도 영상시장을 염두하여 개발되고 있기에 0~120 FPS 범위의 부분 프레 임 속도를 지원한다. <인공 지능의 발전> 인공지능(artificial intelligence: AI)도 점차 발전하고 있다. AI는 인간의 지능, 즉 인식(Recognition), 분 류(Classification), 추론(Inference), 예측(Predict), 조작/의사결정(Control/Decision making) 등을 할 수 있는 지능을 인공적으로 모방하는 것을 의미한다. 인공 지능 기술의 발전 및 사물인터넷(Internet Of Things; IOT) 기기의 증가로 인해 기계 간 트래픽이 폭증할 것으로 예측되고, 기계(machine)에 의존하는 영상 분석이 널리 사용될 것으로 예측되고 있다. 그러나, 기계에 의해 분석되어야 할 영상이 기하급수적으로 증가될 것으로 예상됨에 따라, 서버의 부하 및 전력 소모 문제가 제기될 것으로 예측된다."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "따라서, 본 개시는 기계에 의한 영상 분석을 효과적으로 수행할 수 있도록 하기 위하여, VCM에서 적응적 시공간 리샘플링 기반 부호화 및 복호화 방법을 제공하는 것을 목적으로 한다.본 개시의 일 실시 예는, 프레임율과 해상도를 응용목적에 따라 적응적으로 변화하는 부호화 및 복호화 방법을 제공할 수 있다."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "전술한 목적을 달성하기 위하여, 본 명세서의 일 개시에 따르면, 기계를 위한 영상 부호화를 수행하는 인코딩 장치가 제공된다. 기계를 위한 영상 부호화를 수행하는 인코딩 장치는, 입력 영상에 대한 프레임율을 변경하는 시간적 리샘플러; 상기 입력 영상에 대한 해상도를 변경하는 공간적 리샘플러; 및 상기 입력 영상에 대한 부호화를 수행하는 내부 부호화기를 포함하고, 상기 부호화된 영상과 함께 상기 시간적 리샘플러에 의하여 변경된 입력 영상의 프레임율 을 포함하는 시간적 복원 정보(temporal restoration data) 및 상기 공간적 리샘플러에 의하여 변경된 입력 영 상의 해상도를 포함하는 공간적 복원 정보(spatial restoration data)를 디코딩 장치에 전송할 수 있다. 본 명세서의 일 개시에 따르면, 기계를 위한 영상 복호화를 수행하는 디코딩 장치는, 인코딩 장치로부터 부호화 된 입력 영상을 입력 받아 복호화를 수행하는 내부 복호화기; 상기 인코딩 장치로부터 수신한 상기 입력 영상에 대한 공간적 복원 정보(spatial restoration data)를 기반으로 상기 복호화된 영상에 대한 해상도를 변경하여 상기 입력 영상의 원본 영상의 해상도로 복원하는 공간적 복원기; 및 상기 인코딩 장치로부터 수신한 상기 입력 영상에 대한 시간적 복원 정보(temporal restoration data)를 기반으로 상기 복호화된 영상에 대한 프레임율을 변경하여 상기 입력영상의 원본 영상의 프레임율로 복원하는 시간적 복원기를 포함할 수 있다. 본 명세서의 일 개시에 따르면, 명령어들을 기록하고 있는 비휘발성(non-volatile) 컴퓨터 판독가능 저장 매체 로서, 상기 명령어들은, 하나 이상의 프로세서들에 의해 실행될 때, 상기 하나 이상의 프로세서들로 하여금: 입 력 영상에 대한 프레임율을 변경하는 단계; 상기 입력 영상에 대한 해상도를 변경하는 단계; 상기 입력 영상에 대한 부호화를 수행하는 단계; 및 상기 부호화된 영상과 함께 상기 시간적 리샘플링에 따라 변경된 입력 영상의 프레임율을 포함하는 시간적 복원 정보(temporal restoration data) 및 상기 공간적 리샘플링에 따라 변경된 입 력 영상의 해상도를 포함하는 공간적 복원 정보(spatial restoration data)를 디코딩 장치에 전송하는 단계를 수행하도록 할 수 있다."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 개시에 의하면, 기계에 의한 영상 분석을 효과적으로 수행할 수 있다. 본 개시의 일 실시 예에 따르면, 원본 영상의 프레임율과 해상도를 응용목적에 따라 적응적으로 변화하여 부복 호화 효율뿐 만 아니라 머신비전 응용의 효과를 증가시킬 수 있다."}
{"patent_id": "10-2024-0036440", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 명세서 또는 출원에 개시되어 있는 본 개시의 개념에 따른 실시 예들에 대해서 특정한 구조적 내지 단계적 설명들은 단지 본 개시의 개념에 따른 실시 예를 설명하기 위한 목적으로 예시된 것으로, 본 개시의 개념에 따 른 실시 예들은 다양한 형태로 실시될 수 있으며 본 개시의 개념에 따른 실시 예들은 다양한 형태로 실시될 수 있으며 본 명세서 또는 출원에 설명된 실시 예들에 한정되는 것으로 해석되어서는 아니 된다. 본 개시의 개념에 따른 실시 예는 다양한 변경을 가할 수 있고 여러 가지 형태를 가질 수 있으므로 특정 실시 예들을 도면에 예시하고 본 명세서 또는 출원에 상세하게 설명하고자 한다. 그러나, 이는 본 개시의 개념에 따 른 실시 예를 특정한 개시 형태에 대해 한정하려는 것이 아니며, 본 개시의 사상 및 기술 범위에 포함되는 모든 변경, 균등물 내지 대체물을 포함하는 것으로 이해되어야 한다. 제1 및/또는 제2 등의 용어는 다양한 구성 요소들을 설명하는데 사용될 수 있지만, 상기 구성 요소들은 상기 용 어들에 의해 한정되어서는 안 된다. 상기 용어들은 하나의 구성 요소를 다른 구성 요소로부터 구별하는 목적으 로만, 예컨대 본 개시의 개념에 따른 권리 범위로부터 이탈되지 않은 채, 제1 구성요소는 제2 구성요소로 명명 될 수 있고, 유사하게 제2 구성요소는 제1 구성요소로도 명명될 수 있다. 어떤 구성요소가 다른 구성요소에 \"연결되어\" 있다거나 \"접속되어\" 있다고 언급된 때에는, 그 다른 구성요소에 직접적으로 연결되어 있거나 또는 접속되어 있을 수도 있지만, 중간에 다른 구성요소가 존재할 수도 있다고 이 해되어야 할 것이다. 반면에, 어떤 구성요소가 다른 구성요소에 \"직접 연결되어\" 있다거나 \"직접 접속되어\" 있 다고 언급된 때에는, 중간에 다른 구성요소가 존재하지 않는 것으로 이해되어야 할 것이다. 구성요소들 간의 관 계를 설명하는 다른 표현들, 즉 \"~사이에\"와 \"바로 ~사이에\" 또는 \"~에 이웃하는\"과 \"~에 직접 이웃하는\" 등도 마찬가지로 해석되어야 한다. 본 명세서에서 사용한 용어는 단지 특정한 실시 예를 설명하기 위해 사용된 것으로, 본 개시를 한정하려는 의도 가 아니다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 명세서에서, \"포함하다\" 또는 \"가지다\" 등의 용어는 서술된 특징, 숫자, 단계, 동작, 구성요소, 부분품 또는 이들을 조합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구성요소, 부분품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 다르게 정의되지 않는 한, 기술적이거나 과학적인 용어를 포함해서 여기서 사용되는 모든 용어들은 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 것과 동일한 의미를 가지고 있다. 일 반적으로 사용되는 사전에 정의되어 있는 것과 같은 용어들은 관련 기술의 문맥상 가지는 의미와 일치하는 의미 를 가지는 것으로 해석되어야 하며, 본 명세서에서 명백하게 정의하지 않는 한, 이상적이거나 과도하게 형식적 인 의미로 해석되지 않는다. 실시 예를 설명함에 있어서 본 개시가 속하는 기술 분야에 익히 알려져 있고 본 개시와 직접적으로 관련이 없는 기술 내용에 대해서는 설명을 생략한다. 이는 불필요한 설명을 생략함으로써 본 개시의 요지를 흐리지 않고 더 욱 명확히 전달하기 위함이다. 이 문서는 비디오/영상 코딩에 관한 것이다. 예를 들어 이 문서에서 개시된 방법/실시예는 VVC (Versatile Video Coding) 표준 (ITU-T Rec. H.266), VVC 이후의 차세대 비디오/이미지 코딩 표준, 또는 그 이외의 비디오 코딩 관련 표준들(예를 들어, HEVC (High Efficiency Video Coding) 표준 (ITU-T Rec. H.265), EVC(essential video coding) 표준, AVS2 표준 등)과 관련될 수 있다. 이 문서에서는 비디오/영상 코딩에 관한 다양한 실시예들을 제시하며, 다른 언급이 없는 한 상기 실시예들은 서 로 조합되어 수행될 수도 있다. 이 문서에서 비디오(video)는 시간의 흐름에 따른 일련의 영상(image)들의 집합을 의미할 수 있다. 픽처 (picture)는 일반적으로 특정 시간대의 하나의 영상을 나타내는 단위를 의미하며, 슬라이스(slice)/타일(tile) 는 코딩에 있어서 픽처의 일부를 구성하는 단위이다. 슬라이스/타일은 하나 이상의 CTU(coding tree unit)을 포 함할 수 있다. 하나의 픽처는 하나 이상의 슬라이스/타일로 구성될 수 있다. 하나의 픽처는 하나 이상의 타일 그룹으로 구성될 수 있다. 하나의 타일 그룹은 하나 이상의 타일들을 포함할 수 있다. 픽셀(pixel) 또는 펠(pel)은 하나의 픽처(또는 영상)을 구성하는 최소의 단위를 의미할 수 있다. 또한, 픽셀에 대응하는 용어로서 '샘플(sample)'이 사용될 수 있다. 샘플은 일반적으로 픽셀 또는 픽셀의 값을 나타낼 수 있 으며, 루마(luma) 성분의 픽셀/픽셀값만을 나타낼 수도 있고, 크로마(chroma) 성분의 픽셀/픽셀 값만을 나타낼 수도 있다. 또는 샘플은 공간 도메인에서의 픽셀값을 의미할 수도 있고, 이러한 픽셀값이 주파수 도메인으로 변 환되면 주파수 도메인에서의 변환 계수를 의미할 수도 있다. 유닛(unit)은 영상 처리의 기본 단위를 나타낼 수 있다. 유닛은 픽처의 특정 영역 및 해당 영역에 관련된 정보 중 적어도 하나를 포함할 수 있다. 하나의 유닛은 하나의 루마 블록 및 두개의 크로마(ex. cb, cr) 블록을 포함 할 수 있다. 유닛은 경우에 따라서 블록(block) 또는 영역(area) 등의 용어와 혼용하여 사용될 수 있다. 일반적 인 경우, MxN 블록은 M개의 열과 N개의 행으로 이루어진 샘플들(또는 샘플 어레이) 또는 변환 계수(transform coefficient)들의 집합(또는 어레이)을 포함할 수 있다. 도 1은 비디오/영상 코딩 시스템의 예를 개략적으로 나타낸다. 도 1을 참조하면, 비디오/영상 코딩 시스템은 소스 디바이스(source device) 및 수신 디바이스(receive devic e)를 포함할 수 있다. 소스 디바이스는 인코딩된 비디오(video)/영상(image) 정보 또는 데이터를 파일 또는 스 트리밍 형태로 디지털 저장매체 또는 네트워크를 통하여 수신 디바이스로 전달할 수 있다. 상기 소스 디바이스는 비디오 소스(video source), 인코딩 장치(encoding apparatus), 전송부(transmitter)를 포함할 수 있다. 상기 수신 디바이스는 수신부(receiver), 디코딩 장치(decoding apparatus) 및 렌더러 (renderer)를 포함할 수 있다. 상기 인코딩 장치는 비디오/영상 인코딩 장치라고 불릴 수 있고, 상기 디코딩 장 치는 비디오/영상 디코딩 장치라고 불릴 수 있다. 송신기는 인코딩 장치에 포함될 수 있다. 수신기는 디코딩 장 치에 포함될 수 있다. 렌더러는 디스플레이부를 포함할 수도 있고, 디스플레이부는 별개의 디바이스 또는 외부 컴포넌트로 구성될 수도 있다. 비디오 소스는 비디오/영상의 캡쳐, 합성 또는 생성 과정 등을 통하여 비디오/영상을 획득할 수 있다. 비디오 소스는 비디오/영상 캡쳐 디바이스 및/또는 비디오/영상 생성 디바이스를 포함할 수 있다. 비디오/영상 캡쳐 디 바이스는 예를 들어, 하나 이상의 카메라, 이전에 캡쳐된 비디오/영상을 포함하는 비디오/영상 아카이브 등을 포함할 수 있다. 비디오/영상 생성 디바이스는 예를 들어 컴퓨터, 타블렛 및 스마트폰 등을 포함할 수 있으며 (전자적으로) 비디오/영상을 생성할 수 있다. 예를 들어, 컴퓨터 등을 통하여 가상의 비디오/영상이 생성될 수 있으며, 이 경우 관련 데이터가 생성되는 과정으로 비디오/영상 캡쳐 과정이 갈음될 수 있다. 인코딩 장치는 입력 비디오/영상을 인코딩할 수 있다. 인코딩 장치는 압축 및 코딩 효율을 위하여 예측, 변환, 양자화 등 일련의 절차를 수행할 수 있다. 인코딩된 데이터(인코딩된 비디오/영상 정보)는 비트스트림 (bitstream) 형태로 출력될 수 있다. 전송부는 비트스트림 형태로 출력된 인코딩된 비디오/영상 정보 또는 데이터를 파일 또는 스트리밍 형태로 디지 털 저장매체 또는 네트워크를 통하여 수신 디바이스의 수신부로 전달할 수 있다. 디지털 저장 매체는 USB, SD, CD, DVD, 블루레이, HDD, SSD 등 다양한 저장 매체를 포함할 수 있다. 전송부는 미리 정해진 파일 포맷을 통하 여 미디어 파일을 생성하기 위한 엘리먼트를 포함할 수 있고, 방송/통신 네트워크를 통한 전송을 위한 엘리먼트 를 포함할 수 있다. 수신부는 상기 비트스트림을 수신/추출하여 디코딩 장치로 전달할 수 있다. 디코딩 장치는 인코딩 장치의 동작에 대응하는 역양자화, 역변환, 예측 등 일련의 절차를 수행하여 비디오/영상 을 디코딩할 수 있다. 렌더러는 디코딩된 비디오/영상을 렌더링할 수 있다. 렌더링된 비디오/영상은 디스플레이부를 통하여 디스플레 이될 수 있다. 도 2는 비디오/영상 인코딩 장치의 구성을 개략적으로 설명하는 도면이다. 이하 비디오 인코딩 장치라 함은 영상 인코딩 장치를 포함할 수 있다. 도 2를 참조하면, 인코딩 장치(10a)는 영상 분할부(image partitioner, 10a-10), 예측부(predictor, 10a-20), 레지듀얼 처리부(residual processor, 10a-30), 엔트로피 인코딩부(entropy encoder, 10a-40), 가산부(adder, 10a-50), 필터링부(filter, 10a-60) 및 메모리(memory, 10a-70)를 포함하여 구성될 수 있다. 예측부(10a-20)는 인터 예측부(10a-21) 및 인트라 예측부(10a-22)를 포함할 수 있다. 레지듀얼 처리부(10a-30)는 변환부 (transformer, 10a-32), 양자화부(quantizer 10a-33), 역양자화부(dequantizer 10a-34), 역변환부(inverse transformer, 10a-35)를 포함할 수 있다. 레지듀얼 처리부(10a-30)는 감산부(subtractor, 10a-31)를 더 포함할 수 있다. 가산부(10a-50)는 복원부(reconstructor) 또는 복원 블록 생성부(reconstructed block generator)로 불릴 수 있다. 상술한 영상 분할부(10a-10), 예측부(10a-20), 레지듀얼 처리부(10a-30), 엔트로피 인코딩부 (10a-40), 가산부(10a-50) 및 필터링부(10a-60)는 실시예에 따라 하나 이상의 하드웨어 컴포넌트(예를 들어 인 코더 칩셋 또는 프로세서)에 의하여 구성될 수 있다. 또한 메모리(10a-70)는 DPB(decoded picture buffer)를 포함할 수 있고, 디지털 저장 매체에 의하여 구성될 수도 있다. 상기 하드웨어 컴포넌트는 메모리(10a-70)를 내 /외부 컴포넌트로 더 포함할 수도 있다. 영상 분할부(10a-10)는 인코딩 장치(10a)에 입력된 입력 영상(또는, 픽처, 프레임)를 하나 이상의 처리 유닛 (processing unit)으로 분할할 수 있다. 일 예로, 상기 처리 유닛은 코딩 유닛(coding unit, CU)이라고 불릴 수 있다. 이 경우 코딩 유닛은 코딩 트리 유닛(coding tree unit, CTU) 또는 최대 코딩 유닛(largest coding unit, LCU)으로부터 QTBTTT (Quad-tree binary-tree ternary-tree) 구조에 따라 재귀적으로(recursively) 분할 될 수 있다. 예를 들어, 하나의 코딩 유닛은 쿼드 트리 구조, 바이너리 트리 구조, 및/또는 터너리 구조를 기반 으로 하위(deeper) 뎁스의 복수의 코딩 유닛들로 분할될 수 있다. 이 경우 예를 들어 쿼드 트리 구조가 먼저 적 용되고 바이너리 트리 구조 및/또는 터너리 구조가 나중에 적용될 수 있다. 또는 바이너리 트리 구조가 먼저 적 용될 수도 있다. 더 이상 분할되지 않는 최종 코딩 유닛을 기반으로 본 문서에 따른 코딩 절차가 수행될 수 있 다. 이 경우 영상 특성에 따른 코딩 효율 등을 기반으로, 최대 코딩 유닛이 바로 최종 코딩 유닛으로 사용될 수 있고, 또는 필요에 따라 코딩 유닛은 재귀적으로(recursively) 보다 하위 뎁스의 코딩 유닛들로 분할되어 최적 의 사이즈의 코딩 유닛이 최종 코딩 유닛으로 사용될 수 있다. 여기서 코딩 절차라 함은 후술하는 예측, 변환, 및 복원 등의 절차를 포함할 수 있다. 다른 예로, 상기 처리 유닛은 예측 유닛(PU: Prediction Unit) 또는 변환 유닛(TU: Transform Unit)을 더 포함할 수 있다. 이 경우 상기 예측 유닛 및 상기 변환 유닛은 각각 상술한 최 종 코딩 유닛으로부터 분할 또는 파티셔닝될 수 있다. 상기 예측 유닛은 샘플 예측의 단위일 수 있고, 상기 변 환 유닛은 변환 계수를 유도하는 단위 및/또는 변환 계수로부터 레지듀얼 신호(residual signal)를 유도하는 단 위일 수 있다. 유닛은 경우에 따라서 블록(block) 또는 영역(area) 등의 용어와 혼용하여 사용될 수 있다. 일반적인 경우, MxN 블록은 M개의 열과 N개의 행으로 이루어진 샘플들 또는 변환 계수(transform coefficient)들의 집합을 나타낼 수 있다. 샘플은 일반적으로 픽셀 또는 픽셀의 값을 나타낼 수 있으며, 휘도(luma) 성분의 픽셀/픽셀값만을 나 타낼 수도 있고, 채도(chroma) 성분의 픽셀/픽셀 값만을 나타낼 수도 있다. 샘플은 하나의 픽처(또는 영상)을 픽셀(pixel) 또는 펠(pel)에 대응하는 용어로서 사용될 수 있다. 감산부(10a-31)는 입력 영상 신호(원본 블록, 원본 샘플들 또는 원본 샘플 어레이)에서 예측부(10a-20)로부터 출력된 예측 신호(예측된 블록, 예측 샘플들 또는 예측 샘플 어레이)를 감산하여 레지듀얼 신호(레지듀얼 블록, 레지듀얼 샘플들 또는 레지듀얼 샘플 어레이)를 생성할 수 있고, 생성된 레지듀얼 신호는 변환부(10a-32)로 전 송된다. 예측부(10a-20)는 처리 대상 블록(이하, 현재 블록이라 함)에 대한 예측을 수행하고, 상기 현재 블록에 대한 예측 샘플들을 포함하는 예측된 블록(predicted block)을 생성할 수 있다. 예측부(10a-20)는 현재 블록 또 는 CU 단위로 인트라 예측이 적용되는지 또는 인터 예측이 적용되는지 결정할 수 있다. 예측부는 각 예측모드에 대한 설명에서 후술하는 바와 같이 예측 모드 정보 등 예측에 관한 다양한 정보를 생성하여 엔트로피 인코딩부 (10a-40)로 전달할 수 있다. 예측에 관한 정보는 엔트로피 인코딩부(10a-40)에서 인코딩되어 비트스트림 형태로 출력될 수 있다. 인트라 예측부(10a-22)는 현재 픽처 내의 샘플들을 참조하여 현재 블록을 예측할 수 있다. 상기 참조되는 샘플 들은 예측 모드에 따라 상기 현재 블록의 주변(neighbor)에 위치할 수 있고, 또는 떨어져서 위치할 수도 있다. 인트라 예측에서 예측 모드들은 복수의 비방향성 모드와 복수의 방향성 모드를 포함할 수 있다. 비방향성 모드 는 예를 들어 DC 모드 및 플래너 모드(Planar 모드)를 포함할 수 있다. 방향성 모드는 예측 방향의 세밀한 정도 에 따라 예를 들어 33개의 방향성 예측 모드 또는 65개의 방향성 예측 모드를 포함할 수 있다. 다만, 이는 예시 로서 설정에 따라 그 이상 또는 그 이하의 개수의 방향성 예측 모드들이 사용될 수 있다. 인트라 예측부(10a- 22)는 주변 블록에 적용된 예측 모드를 이용하여, 현재 블록에 적용되는 예측 모드를 결정할 수도 있다. 인터 예측부(10a-21)는 참조 픽처 상에서 움직임 벡터에 의해 특정되는 참조 블록(참조 샘플 어레이)을 기반으 로, 현재 블록에 대한 예측된 블록을 유도할 수 있다. 이때, 인터 예측 모드에서 전송되는 움직임 정보의 양을 줄이기 위해 주변 블록과 현재 블록 간의 움직임 정보의 상관성에 기초하여 움직임 정보를 블록, 서브블록 또는 샘플 단위로 예측할 수 있다. 상기 움직임 정보는 움직임 벡터 및 참조 픽처 인덱스를 포함할 수 있다. 상기 움 직임 정보는 인터 예측 방향(L0 예측, L1 예측, Bi 예측 등) 정보를 더 포함할 수 있다. 인터 예측의 경우에, 주변 블록은 현재 픽처 내에 존재하는 공간적 주변 블록(spatial neighboring block)과 참조 픽처에 존재하는 시간적 주변 블록(temporal neighboring block)을 포함할 수 있다. 상기 참조 블록을 포함하는 참조 픽처와 상 기 시간적 주변 블록을 포함하는 참조 픽처는 동일할 수도 있고, 다를 수도 있다. 상기 시간적 주변 블록은 동 일 위치 참조 블록(collocated reference block), 동일 위치 CU(colCU) 등의 이름으로 불릴 수 있으며, 상기 시간적 주변 블록을 포함하는 참조 픽처는 동일 위치 픽처(collocated picture, colPic)라고 불릴 수도 있다. 예를 들어, 인터 예측부(10a-21)는 주변 블록들을 기반으로 움직임 정보 후보 리스트를 구성하고, 상기 현재 블 록의 움직임 벡터 및/또는 참조 픽처 인덱스를 도출하기 위하여 어떤 후보가 사용되는지를 지시하는 정보를 생 성할 수 있다. 다양한 예측 모드를 기반으로 인터 예측이 수행될 수 있으며, 예를 들어 스킵 모드와 머지 모드 의 경우에, 인터 예측부(10a-21)는 주변 블록의 움직임 정보를 현재 블록의 움직임 정보로 이용할 수 있다. 스 킵 모드의 경우, 머지 모드와 달리 레지듀얼 신호가 전송되지 않을 수 있다. 움직임 정보 예측(motion vector prediction, MVP) 모드의 경우, 주변 블록의 움직임 벡터를 움직임 벡터 예측자(motion vector predictor)로 이용하고, 움직임 벡터 차분(motion vector difference)을 시그널링함으로써 현재 블록의 움직임 벡터를 지시할 수 있다. 예측부(10a-20)는 후술하는 다양한 예측 방법을 기반으로 예측 신호를 생성할 수 있다. 예를 들어, 예측부는 하 나의 블록에 대한 예측을 위하여 인트라 예측 또는 인터 예측을 적용할 수 있을 뿐 아니라, 인트라 예측과 인터 예측을 동시에 적용할 수 있다. 이는 combined inter and intra prediction (CIIP)라고 불릴 수 있다. 또한, 예측부는 블록에 대한 예측을 위하여 인트라 블록 카피(intra block copy, IBC)를 수행할 수도 있다. 상기 인트 라 블록 카피는 예를 들어 SCC(screen content coding) 등과 같이 게임 등의 컨텐츠 영상/동영상 코딩을 위하여 사용될 수 있다. IBC는 기본적으로 현재 픽처 내에서 예측을 수행하나 현재 픽처 내에서 참조 블록을 도출하는 점에서 인터 예측과 유사하게 수행될 수 있다. 즉, IBC는 본 문서에서 설명되는 인터 예측 기법들 중 적어도 하 나를 이용할 수 있다. 인터 예측부(10a-21) 및/또는 인트라 예측부(10a-22)를 통해 생성된 예측 신호는 복원 신호를 생성하기 위해 이 용되거나 레지듀얼 신호를 생성하기 위해 이용될 수 있다. 변환부(10a-32)는 레지듀얼 신호에 변환 기법을 적용 하여 변환 계수들(transform coefficients)를 생성할 수 있다. 예를 들어, 변환 기법은 DCT(Discrete Cosine Transform), DST(Discrete Sine Transform), GBT(Graph-Based Transform), 또는 CNT(Conditionally Non- linear Transform) 등을 포함할 수 있다. 여기서, GBT는 픽셀 간의 관계 정보를 그래프로 표현한다고 할 때 이 그래프로부터 얻어진 변환을 의미한다. CNT는 이전에 복원된 모든 픽셀(all previously reconstructed pixel) 를 이용하여 예측 신호를 생성하고 그에 기초하여 획득되는 변환을 의미한다. 또한, 변환 과정은 정사각형의 동 일한 크기를 갖는 픽셀 블록에 적용될 수도 있고, 정사각형이 아닌 가변 크기의 블록에도 적용될 수 있다. 양자화부(10a-33)는 변환 계수들을 양자화하여 엔트로피 인코딩부(10a-40)로 전송되고, 엔트로피 인코딩부(10a- 40)는 양자화된 신호(양자화된 변환 계수들에 관한 정보)를 인코딩하여 비트스트림으로 출력할 수 있다. 상기 양자화된 변환 계수들에 관한 정보는 레지듀얼 정보라고 불릴 수 있다. 양자화부(10a-33)는 계수 스캔 순서 (scan order)를 기반으로 블록 형태의 양자화된 변환 계수들을 1차원 벡터 형태로 재정렬할 수 있고, 상기 1차 원 벡터 형태의 양자화된 변환 계수들을 기반으로 상기 양자화된 변환 계수들에 관한 정보를 생성할 수도 있다. 엔트로피 인코딩부(10a-40)는 예를 들어 지수 골롬(exponential Golomb), CAVLC(context-adaptive variable length coding), CABAC(context-adaptive binary arithmetic coding) 등과 같은 다양한 인코딩 방법을 수행할 수 있다. 엔트로피 인코딩부(10a-40)는 양자화된 변환 계수들 외 비디오/이미지 복원에 필요한 정보들(예컨대 신택스 요 소들(syntax elements)의 값 등)을 함께 또는 별도로 인코딩할 수도 있다. 인코딩된 정보(ex. 인코딩된 비디오/ 영상 정보)는 비트스트림 형태로 NAL(network abstraction layer) 유닛 단위로 전송 또는 저장될 수 있다. 상기 비디오/영상 정보는 어댑테이션 파라미터 세트(APS), 픽처 파라미터 세트(PPS), 시퀀스 파라미터 세트(SPS) 또 는 비디오 파라미터 세트(VPS) 등 다양한 파라미터 세트에 관한 정보를 더 포함할 수 있다. 또한 상기 비디오/ 영상 정보는 일반 제한 정보(general constraint information)을 더 포함할 수 있다. 본 문서에서 후술되는 시 그널링/전송되는 정보 및/또는 신택스 요소들은 상술한 인코딩 절차를 통하여 인코딩되어 상기 비트스트림에 포 함될 수 있다. 상기 비트스트림은 네트워크를 통하여 전송될 수 있고, 또는 디지털 저장매체에 저장될 수 있다.여기서 네트워크는 방송망 및/또는 통신망 등을 포함할 수 있고, 디지털 저장매체는 USB, SD, CD, DVD, 블루레 이, HDD, SSD 등 다양한 저장매체를 포함할 수 있다. 엔트로피 인코딩부(10a-40)로부터 출력된 신호는 전송하는 전송부(미도시) 및/또는 저장하는 저장부(미도시)가 인코딩 장치(10a)의 내/외부 엘리먼트로서 구성될 수 있고, 또는 전송부는 엔트로피 인코딩부(10a-40)에 포함될 수도 있다. 양자화부(10a-33)로부터 출력된 양자화된 변환 계수들은 예측 신호를 생성하기 위해 이용될 수 있다. 예를 들어, 양자화된 변환 계수들에 역양자화부(10a-34) 및 역변환부(10a-35)를 통해 역양자화 및 역변환을 적용함으 로써 레지듀얼 신호(레지듀얼 블록 or 레지듀얼 샘플들)를 복원할 수 있다. 가산부(10a-50)는 복원된 레지듀얼 신호를 예측부(10a-20)로부터 출력된 예측 신호에 더함으로써 복원(reconstructed) 신호(복원 픽처, 복원 블록, 복원 샘플들 또는 복원 샘플 어레이)가 생성될 수 있다. 스킵 모드가 적용된 경우와 같이 처리 대상 블록에 대 한 레지듀얼이 없는 경우, 예측된 블록이 복원 블록으로 사용될 수 있다. 생성된 복원 신호는 현재 픽처 내 다 음 처리 대상 블록의 인트라 예측을 위하여 사용될 수 있고, 후술하는 바와 같이 필터링을 거쳐서 다음 픽처의 인터 예측을 위하여 사용될 수도 있다. 한편 픽처 인코딩 및/또는 복원 과정에서 LMCS (luma mapping with chroma scaling)가 적용될 수도 있다. 필터링부(10a-60)는 복원 신호에 필터링을 적용하여 주관적/객관적 화질을 향상시킬 수 있다. 예를 들어 필터링 부(10a-60)는 복원 픽처에 다양한 필터링 방법을 적용하여 수정된(modified) 복원 픽처를 생성할 수 있고, 상기 수정된 복원 픽처를 메모리(10a-70), 구체적으로 메모리(10a-70)의 DPB에 저장할 수 있다. 상기 다양한 필터링 방법은 예를 들어, 디블록킹 필터링, 샘플 적응적 오프셋(sample adaptive offset, SAO), 적응적 루프 필터 (adaptive loop filter), 양방향 필터(bilateral filter) 등을 포함할 수 있다. 필터링부(10a-60)는 각 필터링 방법에 대한 설명에서 후술하는 바와 같이 필터링에 관한 다양한 정보를 생성하여 엔트로피 인코딩부(10a-90)로 전달할 수 있다. 필터링 관한 정보는 엔트로피 인코딩부(10a-90)에서 인코딩되어 비트스트림 형태로 출력될 수 있다. 메모리(10a-70)에 전송된 수정된 복원 픽처는 인터 예측부(10a-80)에서 참조 픽처로 사용될 수 있다. 인코딩 장 치는 이를 통하여 인터 예측이 적용되는 경우, 인코딩 장치(10a)와 디코딩 장치에서의 예측 미스매치를 피할 수 있고, 부호화 효율도 향상시킬 수 있다. 메모리(10a-70)의 DPB는 수정된 복원 픽처를 인터 예측부(10a-21)에서의 참조 픽처로 사용하기 위해 저장할 수 있다. 메모리(10a-70)는 현재 픽처 내 움직임 정보가 도출된(또는 인코딩된) 블록의 움직임 정보 및/또는 이미 복원된 픽처 내 블록들의 움직임 정보를 저장할 수 있다. 상기 저장된 움직임 정보는 공간적 주변 블록의 움직 임 정보 또는 시간적 주변 블록의 움직임 정보로 활용하기 위하여 인터 예측부(10a-21)에 전달할 수 있다. 메모 리(10a-70)는 현재 픽처 내 복원된 블록들의 복원 샘플들을 저장할 수 있고, 인트라 예측부(10a-22)에 전달할 수 있다. 도 3은 비디오/영상 디코딩 장치의 구성을 개략적으로 설명하는 도면이다. 도 3을 참조하면, 디코딩 장치(10b)는 엔트로피 디코딩부(entropy decoder, 10b-10), 레지듀얼 처리부 (residual processor, 10b-20), 예측부(predictor, 10b-30), 가산부(adder, 10b-40), 필터링부(filter, 10b- 50) 및 메모리(memory, 10b-60)를 포함하여 구성될 수 있다. 예측부(10b-30)는 인터 예측부(10b-31) 및 인트라 예측부(10b-32)를 포함할 수 있다. 레지듀얼 처리부(10b-20)는 역양자화부(dequantizer, 10b-21) 및 역변환부 (inverse transformer, 10b-21)를 포함할 수 있다. 상술한 엔트로피 디코딩부(10b-10), 레지듀얼 처리부(10b- 20), 예측부(10b-30), 가산부(10b-40) 및 필터링부(10b-50)는 실시예에 따라 하나의 하드웨어 컴포넌트(예를 들 어 디코더 칩셋 또는 프로세서)에 의하여 구성될 수 있다. 또한 메모리(10b-60)는 DPB(decoded picture buffer)를 포함할 수 있고, 디지털 저장 매체에 의하여 구성될 수도 있다. 상기 하드웨어 컴포넌트는 메모리 (10b-60)을 내/외부 컴포넌트로 더 포함할 수도 있다. 비디오/영상 정보를 포함하는 비트스트림이 입력되면, 디코딩 장치(10b)는 도 2의 인코딩 장치에서 비디오/영상 정보가 처리된 프로세스에 대응하여 영상을 복원할 수 있다. 예를 들어, 디코딩 장치(10b)는 상기 비트스트림으 로부터 획득한 블록 분할 관련 정보를 기반으로 유닛들/블록들을 도출할 수 있다. 디코딩 장치(10b)는 인코딩 장치에서 적용된 처리 유닛을 이용하여 디코딩을 수행할 수 있다. 따라서 디코딩의 처리 유닛은 예를 들어 코딩 유닛일 수 있고, 코딩 유닛은 코딩 트리 유닛 또는 최대 코딩 유닛으로부터 쿼드 트리 구조, 바이너리 트리 구 조 및/또는 터너리 트리 구조를 따라서 분할될 수 있다. 코딩 유닛으로부터 하나 이상의 변환 유닛이 도출될 수 있다. 그리고, 디코딩 장치(10b)를 통해 디코딩 및 출력된 복원 영상 신호는 재생 장치를 통해 재생될 수 있다.디코딩 장치(10b)는 도 2의 인코딩 장치로부터 출력된 신호를 비트스트림 형태로 수신할 수 있고, 수신된 신호 는 엔트로피 디코딩부(10b-10)를 통해 디코딩될 수 있다. 예를 들어, 엔트로피 디코딩부(10b-10)는 상기 비트스 트림을 파싱하여 영상 복원(또는 픽처 복원)에 필요한 정보(ex. 비디오/영상 정보)를 도출할 수 있다. 상기 비 디오/영상 정보는 어댑테이션 파라미터 세트(APS), 픽처 파라미터 세트(PPS), 시퀀스 파라미터 세트(SPS) 또는 비디오 파라미터 세트(VPS) 등 다양한 파라미터 세트에 관한 정보를 더 포함할 수 있다. 또한 상기 비디오/영상 정보는 일반 제한 정보(general constraint information)을 더 포함할 수 있다. 디코딩 장치는 상기 파라미터 세트에 관한 정보 및/또는 상기 일반 제한 정보를 더 기반으로 픽처를 디코딩할 수 있다. 본 문서에서 후술되는 시그널링/수신되는 정보 및/또는 신택스 요소들은 상기 디코딩 절차를 통하여 디코딩되어 상기 비트스트림으로부터 획득될 수 있다. 예컨대, 엔트로피 디코딩부(10b-10)는 지수 골롬 부호화, CAVLC 또는 CABAC 등의 코딩 방법을 기초로 비트스트림 내 정보를 디코딩하고, 영상 복원에 필요한 신택스 엘리 먼트의 값, 레지듀얼에 관한 변환 계수의 양자화된 값 들을 출력할 수 있다. 보다 상세하게, CABAC 엔트로피 디 코딩 방법은, 비트스트림에서 각 구문 요소에 해당하는 빈을 수신하고, 디코딩 대상 구문 요소 정보와 주변 및 디코딩 대상 블록의 디코딩 정보 혹은 이전 단계에서 디코딩된 심볼/빈의 정보를 이용하여 문맥(context) 모델 을 결정하고, 결정된 문맥 모델에 따라 빈(bin)의 발생 확률을 예측하여 빈의 산술 디코딩(arithmetic decoding)를 수행하여 각 구문 요소의 값에 해당하는 심볼을 생성할 수 있다. 이때, CABAC 엔트로피 디코딩 방 법은 문맥 모델 결정 후 다음 심볼/빈의 문맥 모델을 위해 디코딩된 심볼/빈의 정보를 이용하여 문맥 모델을 업 데이트할 수 있다. 엔트로피 디코딩부(10b-10)에서 디코딩된 정보 중 예측에 관한 정보는 예측부(10b-30)로 제 공되고, 엔트로피 디코딩부(10b-10)에서 엔트로피 디코딩이 수행된 레지듀얼에 대한 정보, 즉 양자화된 변환 계 수들 및 관련 파라미터 정보는 역양자화부(10b-21)로 입력될 수 있다. 또한, 엔트로피 디코딩부(10b-10)에서 디코딩된 정보 중 필터링에 관한 정보는 필터링부(10b-50)으로 제공될 수 있다. 한편, 인코딩 장치로부터 출력된 신호를 수신하는 수신부(미도시)가 디코딩 장치(10b)의 내/외부 엘리먼 트로서 더 구성될 수 있고, 또는 수신부는 엔트로피 디코딩부(10b-10)의 구성요소일 수도 있다. 한편, 본 문서 에 따른 디코딩 장치는 비디오/영상/픽처 디코딩 장치라고 불릴 수 있고, 상기 디코딩 장치는 정보 디코더(비디 오/영상/픽처 정보 디코더) 및 샘플 디코더(비디오/영상/픽처 샘플 디코더)로 구분할 수도 있다. 상기 정보 디 코더는 상기 엔트로피 디코딩부(10b-10)를 포함할 수 있고, 상기 샘플 디코더는 상기 역양자화부(10b-21), 역변 환부(10b-22), 예측부(10b-30), 가산부(10b-40), 필터링부(10b-50) 및 메모리(10b-60) 중 적어도 하나를 포함 할 수 있다. 역양자화부(10b-21)에서는 양자화된 변환 계수들을 역양자화하여 변환 계수들을 출력할 수 있다. 역양자화부 (10b-21)는 양자화된 변환 계수들을 2차원의 블록 형태로 재정렬할 수 있다. 이 경우 상기 재정렬은 인코딩 장 치에서 수행된 계수 스캔 순서를 기반하여 재정렬을 수행할 수 있다. 역양자화부(10b-21)는 양자화 파라미터(예 를 들어 양자화 스텝 사이즈 정보)를 이용하여 양자화된 변환 계수들에 대한 역양자화를 수행하고, 변환 계수들 (transform coefficient)를 획득할 수 있다. 역변환부(10b-22)에서는 변환 계수들를 역변환하여 레지듀얼 신호(레지듀얼 블록, 레지듀얼 샘플 어레이)를 획 득하게 된다. 예측부는 현재 블록에 대한 예측을 수행하고, 상기 현재 블록에 대한 예측 샘플들을 포함하는 예측된 블록 (predicted block)을 생성할 수 있다. 예측부는 엔트로피 디코딩부(10b-10)로부터 출력된 상기 예측에 관한 정 보를 기반으로 상기 현재 블록에 인트라 예측이 적용되는지 또는 인터 예측이 적용되는지 결정할 수 있고, 구체 적인 인트라/인터 예측 모드를 결정할 수 있다. 예측부는 후술하는 다양한 예측 방법을 기반으로 예측 신호를 생성할 수 있다. 예를 들어, 예측부는 하나의 블 록에 대한 예측을 위하여 인트라 예측 또는 인터 예측을 적용할 수 있을 뿐 아니라, 인트라 예측과 인터 예측을 동시에 적용할 수 있다. 이는 combined inter and intra prediction (CIIP)라고 불릴 수 있다. 또한, 예측부는 블록에 대한 예측을 위하여 인트라 블록 카피(intra block copy, IBC)를 수행할 수도 있다. 상기 인트라 블록 카피는 예를 들어 SCC(screen content coding) 등과 같이 게임 등의 컨텐츠 영상/동영상 코딩을 위하여 사용될 수 있다. IBC는 기본적으로 현재 픽처 내에서 예측을 수행하나 현재 픽처 내에서 참조 블록을 도출하는 점에서 인터 예측과 유사하게 수행될 수 있다. 즉, IBC는 본 문서에서 설명되는 인터 예측 기법들 중 적어도 하나를 이 용할 수 있다. 인트라 예측부(10b-32)는 현재 픽처 내의 샘플들을 참조하여 현재 블록을 예측할 수 있다. 상기 참조되는 샘플 들은 예측 모드에 따라 상기 현재 블록의 주변(neighbor)에 위치할 수 있고, 또는 떨어져서 위치할 수도 있다.인트라 예측에서 예측 모드들은 복수의 비방향성 모드와 복수의 방향성 모드를 포함할 수 있다. 인트라 예측부 (10b-32)는 주변 블록에 적용된 예측 모드를 이용하여, 현재 블록에 적용되는 예측 모드를 결정할 수도 있다. 인터 예측부(10b-31)는 참조 픽처 상에서 움직임 벡터에 의해 특정되는 참조 블록(참조 샘플 어레이)을 기반으 로, 현재 블록에 대한 예측된 블록을 유도할 수 있다. 이때, 인터 예측 모드에서 전송되는 움직임 정보의 양을 줄이기 위해 주변 블록과 현재 블록 간의 움직임 정보의 상관성에 기초하여 움직임 정보를 블록, 서브블록 또는 샘플 단위로 예측할 수 있다. 상기 움직임 정보는 움직임 벡터 및 참조 픽처 인덱스를 포함할 수 있다. 상기 움 직임 정보는 인터 예측 방향(L0 예측, L1 예측, Bi 예측 등) 정보를 더 포함할 수 있다. 인터 예측의 경우에, 주변 블록은 현재 픽처 내에 존재하는 공간적 주변 블록(spatial neighboring block)과 참 조 픽처에 존재하는 시간적 주변 블록(temporal neighboring block)을 포함할 수 있다. 예를 들어, 인터 예측부 (10b-31)는 주변 블록들을 기반으로 움직임 정보 후보 리스트를 구성하고, 수신한 후보 선택 정보를 기반으로 상기 현재 블록의 움직임 벡터 및/또는 참조 픽처 인덱스를 도출할 수 있다. 다양한 예측 모드를 기반으로 인터 예측이 수행될 수 있으며, 상기 예측에 관한 정보는 상기 현재 블록에 대한 인터 예측의 모드를 지시하는 정보 를 포함할 수 있다. 가산부(10b-40)는 획득된 레지듀얼 신호를 예측부(10b-30)로부터 출력된 예측 신호(예측된 블록, 예측 샘플 어 레이)에 더함으로써 복원 신호(복원 픽처, 복원 블록, 복원 샘플 어레이)를 생성할 수 있다. 스킵 모드가 적용 된 경우와 같이 처리 대상 블록에 대한 레지듀얼이 없는 경우, 예측된 블록이 복원 블록으로 사용될 수 있다. 가산부(10b-40)는 복원부 또는 복원 블록 생성부라고 불릴 수 있다. 생성된 복원 신호는 현재 픽처 내 다음 처 리 대상 블록의 인트라 예측을 위하여 사용될 수 있고, 후술하는 바와 같이 필터링을 거쳐서 출력될 수도 있고 또는 다음 픽처의 인터 예측을 위하여 사용될 수도 있다. 한편, 픽처 디코딩 과정에서 LMCS (luma mapping with chroma scaling)가 적용될 수도 있다. 필터링부(10b-50)는 복원 신호에 필터링을 적용하여 주관적/객관적 화질을 향상시킬 수 있다. 예를 들어 필터링 부(10b-50)는 복원 픽처에 다양한 필터링 방법을 적용하여 수정된(modified) 복원 픽처를 생성할 수 있고, 상기 수정된 복원 픽처를 메모리, 구체적으로 메모리(10b-60)의 DPB에 전송할 수 있다. 상기 다양한 필터링 방법 은 예를 들어, 디블록킹 필터링, 샘플 적응적 오프셋(sample adaptive offset), 적응적 루프 필터(adaptive loop filter), 양방향 필터(bilateral filter) 등을 포함할 수 있다. 메모리(10b-60)의 DPB에 저장된 (수정된) 복원 픽처는 인터 예측부(10b-31)에서 참조 픽쳐로 사용될 수 있다. 메모리(10b-60)는 현재 픽처 내 움직임 정보가 도출된(또는 디코딩된) 블록의 움직임 정보 및/또는 이미 복원된 픽처 내 블록들의 움직임 정보를 저장할 수 있다. 상기 저장된 움직임 정보는 공간적 주변 블록의 움직임 정보 또는 시간적 주변 블록의 움직임 정보로 활용하기 위하여 인터 예측부(10b-31)에 전달할 수 있다. 메모리(10b- 60)는 현재 픽처 내 복원된 블록들의 복원 샘플들을 저장할 수 있고, 인트라 예측부(10b-32)에 전달할 수 있다. 본 명세서에서, 디코딩 장치(10b)의 예측부(10b-30), 역양자화부(10b-21), 역변환부(10b-22) 및 필터링부(10b- 50) 등에서 설명된 실시예들은 각각 인코딩 장치(10a)의 예측부(10a-20), 역양자화부(10a-34), 역변환부(10a- 35) 및 필터링부(10a-60) 등에도 동일 또는 대응되도록 적용될 수 있다. 상술한 바와 같이 비디오 코딩을 수행함에 있어 압축 효율을 높이기 위하여 예측을 수행한다. 이를 통하여 코딩 대상 블록인 현재 블록에 대한 예측 샘플들을 포함하는 예측된 블록을 생성할 수 있다. 여기서 상기 예측된 블 록은 공간 도메인(또는 픽셀 도메인)에서의 예측 샘플들을 포함한다. 상기 예측된 블록은 인코딩 장치 및 디코 딩 장치에서 동일하게 도출되며, 상기 인코딩 장치는 원본 블록의 원본 샘플 값 자체가 아닌 상기 원본 블록과 상기 예측된 블록 간의 레지듀얼에 대한 정보(레지듀얼 정보)를 디코딩 장치로 시그널링함으로써 영상 코딩 효 율을 높일 수 있다. 디코딩 장치는 상기 레지듀얼 정보를 기반으로 레지듀얼 샘플들을 포함하는 레지듀얼 블록 을 도출하고, 상기 레지듀얼 블록과 상기 예측된 블록을 합하여 복원 샘플들을 포함하는 복원 블록을 생성할 수 있고, 복원 블록들을 포함하는 복원 픽처를 생성할 수 있다. 상기 레지듀얼 정보는 변환 및 양자화 절차를 통하여 생성될 수 있다. 예를 들어, 인코딩 장치는 상기 원본 블 록과 상기 예측된 블록 간의 레지듀얼 블록을 도출하고, 상기 레지듀얼 블록에 포함된 레지듀얼 샘플들(레지듀 얼 샘플 어레이)에 변환 절차를 수행하여 변환 계수들을 도출하고, 상기 변환 계수들에 양자화 절차를 수행하여 양자화된 변환 계수들을 도출하여 관련된 레지듀얼 정보를 (비트스트림을 통하여) 디코딩 장치로 시그널링할 수 있다. 여기서 상기 레지듀얼 정보는 상기 양자화된 변환 계수들의 값 정보, 위치 정보, 변환 기법, 변환 커널, 양자화 파라미터 등의 정보를 포함할 수 있다. 디코딩 장치는 상기 레지듀얼 정보를 기반으로 역양자화/역변환절차를 수행하고 레지듀얼 샘플들(또는 레지듀얼 블록)을 도출할 수 있다. 디코딩 장치는 예측된 블록과 상기 레지듀얼 블록을 기반으로 복원 픽처를 생성할 수 있다. 인코딩 장치는 또한 이후 픽처의 인터 예측을 위한 참 조를 위하여 양자화된 변환 계수들을 역양자화/역변환하여 레지듀얼 블록을 도출하고, 이를 기반으로 복원 픽처 를 생성할 수 있다. <VCM(Video coding for Machines)> 최근에 Surveillance, Intelligent Transportation, Smart City, Intelligent Industry, Intelligent Content 와 같은 다양한 산업 분야가 발전함에 따라 기계에 의해 소비되는 영상 또는 특징맵 데이터양이 증가하고 있다. 이에 반해, 현재 사용 중인 전통적인 영상 압축방식은 시청자가 인지하는 시각(Human Vision)의 특성을 고려해 개발된 기술이기에 불필요한 정보들을 포함하고 있어 기계 임무 수행에 비효율적이다. 따라서, 기계 임무 수행 에 대해 효율적으로 특징맵을 압축하기 위한 비디오 코덱 기술에 관한 연구가 요구되고 있다. 멀티미디어 부호화 국제표준화 그룹인 MPEG(Moving Picture Experts Group)에서 VCM(Video Coding for Machine) 기술이 논의되고 있다. VCM은 사람이 보는 시청자 시각 기준이 아닌 기계의 데이터 소비시각(Machine Vision)에 대한 기준의 영상 또는 특징맵 부호화 기술이다. 도 4a 내지 도 4d는 VCM 인코더와 VCM 디코더를 나타낸 예시도들이다. 도 4a을 참조하면, VCM 인코더(100a)와 VCM 디코더(100b)가 나타나 있다. VCM 인코더(100a)가 비디오 및/또는 특징맵을 인코딩하여 비트스트림으로 전송하면, VCM 디코더(100b)는 상기 비트스트림을 디코딩하여 출력할 수 있다. 이때, VCM 디코더(100b)는 하나 이상의 비디오 및/또는 특징맵을 출 력할 수 있다. 예를 들어, VCM 디코더(100b)는 머신을 이용한 분석을 위한 제1 특징맵을 출력할 수 있고, 사용 자에 의한 시청을 위한 제1 영상을 출력할 수 있다. 상기 제1 영상은 상기 제1 특징맵에 비하여 보다 고해상도 일 수 있다. 도 4b를 참조하면, VCM 인코더(100a)의 전단에는 특징맵을 추출하는 피처 추출기(Feature Extractor)가 연결될 수 있다. VCM 인코더(100a)는 피처 인코더(Feature Encoder)를 포함할 수 있다. VCM 디코더(100b)는 피처 디코더(Feature Decoder)와 비디오 재생성기(Video reconstructor)를 포함할 수 있다. 상기 피처 디코더는 비트스트림으로부터 특징맵(Feature Map)을 디코딩하여, 머신을 이용한 분석을 위한 제1 특징맵을 출력할 수 있다. 상기 비디오 재생성기는 비트스트림으로부터 사용자에 의한 시청을 위한 제1 영 상을 재생성하여 출력할 수 있다. 도 4c 참조하면, VCM 인코더의 전단에는 특징맵을 추출하는 피처 추출기(Feature Extractor)가 연결되어 있다. VCM 인코더(100a)는 피처 인코더를 포함할 수 있다. VCM 디코더(100b)는 피처 디코더를 포함할 수 있다. 상기 피처 디코더는 비트스트림으로부터 특징맵을 디코딩하 여, 머신을 이용한 분석을 위한 제1 특징맵을 출력할 수 있다. 즉, 비트스트림은 영상이 아닌 특징맵으로만 인 코딩 될 수 있다. 부연 설명하면, 특징맵은 영상을 기초로 머신의 특정 타스크를 처리하기 위한 특징에 대한 정 보를 포함한 데이터 일 수 있다. 도 4d를 참조하면, VCM 인코더(100a)의 전단에는 피처 추출기(Feature Extractor)가 연결되어 있을 수 있다. VCM 인코더(100a)는 피처 컨버터와 비디오 인코더를 포함할 수 있다. 상기 비디오 인코더는 도 2에 도시된 인코 딩 장치(10a)일 수 있다. 도 4d를 도시된 VCM 디코더(100b)는 비디오 디코더와 인버스 컨버터를 포함할 수 있다. 상기 비디오 디코더는 도 3에 도시된 디코딩 장치(10b)일 수 있다. 도 5는 본 개시의 일 실시 예에 따른 머신 비전을 위한 인코딩 장치의 구성요소를 포함하는 블록도이다. 인코딩 장치(10a)는 시간적 리샘플러, 공간적 리샘플러, 관심영역 추출기 및 내부 부호화기 를 포함할 수 있다. 도 5의 인코딩 장치의 구조는 다양한 실시 예에서 구성요소 중 일부가 생략될 수 있고, 구성요소 간의 순서가 변경될 수 있다. 본 개시에서 설명의 편의를 위해 인코딩 장치는 부호화기 또는 인 코더라 지칭할 수 있고, 디코딩 장치는 복호화기 또는 디코더라 지칭할 수 있다. VCM 에서는 머신 비전의 실제 응용목적에서 휴먼 비전이 요구하는 해상도와 프레임율이 불필요하다. 입력 영상 의 응용 목적은, 추적(tracking), 인식(recognition), 분류(classification), 또는 분할(segmentation)가 될수 있고, 이에 제한되지 않으며, 머신 비전에서 활용될 수 있는 목적은 다양하게 정의될 수 있다. 머신 비전의 응용 목적에 따라 입력 영상에 대한 요구되는 프레임율 및 해상도가 결정될 수 있다. 부호화기 및 복호화기는 응용 목적에 따라 결정된 프레임율 및 해상도에 기반하여, 입력 영상에 대한 리샘플링을 할 수 있고, 필요한 경 우 리샘플링된 영상을 원본 상태로 복원(restoration)할 수 있다. 부호화기 및 복호화기는 서로 정의된 포맷에 따라 작성된 리샘플링 정보(예, temporal_restoration_data 및 spatial_restoration_data)를 전송 및 수신할 수 있다. 도 5를 참조하면, 인코딩 장치(10a)는 머신 비전을 위해 부호화 효율을 위해 내부 부호화 이전 단계에서 입력신 호에 대해 시간적 리샘플링, 공간적 리샘플링 과정을 통해 프레임율과 해상도를 변경하고 해당 변경된 신호에 대해 내부 부호화기에서 부호화를 수행할 수 있다. 프레임율과 해상도를 응용목적에 따라 적응적으로 변경하면 부복호와 효율뿐 아니라 머신 비전 응용의 효과를 증가시킬 수 있다. 인코딩 장치(10a)는 응용목적과 실시예에 따라 프레임율과 해상도 변경과 관련된 정보를 디 코딩 장치(10b)에 전송할 수 있다. 머신 비전을 위한 인코딩 장치(10a)의 입력 신호는 일반적인 광학카메라 영상, 열상 카메라, 라이다 센서 영상 등 동영상의 특징을 가진 다양한 센서로 취득된 영상이 될 수 있다. 해당 영상의 구성은 센서의 특징에 따라 단 일 구성요소 또는 다수의 구성요소로 구성될 수 있다. 예를 들어 광학 카메라로 취득된 영상은 RGB, YUV의 도메 인으로 다수개의 색차성분으로 구성될 수 있다. 시간적 리샘플러는 입력 영상(또는 입력 신호라 함)의 프레임율을 변화시키는 단계로 프레임 단위로 업샘 플링 또는 다운샘플링할 수 있다. 프레임율은 머신 비전의 응용목적에 따라 고정된 형태가 될 수 있으며, 적응 적으로 사용될 경우 해당 프레임율을 복호화기로 전송할 수 있다. 실시 예에 따라, 프레임율은 가변적이 될 수 있으며, 예를 들어, 입력 신호가 초당 30프레임인 영상에 대해 일부 신호는 초당 5 프레임으로 샘플링하고, 일 부 신호는 초당 1 프레임으로 샘플링하는 것이 가능하다. 도 6은 본 개시의 일 실시 예의 시간적 리샘플링에 따라 해상도를 변경하는 일 예시이다. 시간적 리샘플러는 샘플링 단위를 고정적으로 결정하거나, 가변적으로 결정할 수 있다. 시간적 리샘플러 는 입력 신호 전체에 대해 고정적인 주기로 샘플링을 할 수 있고, 입력 신호 일부에 대해 고정적인 주기로 샘플링을 할 수 있다. 또는, 시간적 리샘플러는 입력 신호에 대해 가변적으로 샘플링 주기를 결정하여 샘 플링을 할 수 있다. 예를 들어, 도 6의 (a)와 같이 일정 주기 단위로 샘플링할 수 있고, 또는 (b)와 같이 비주 기적으로 머신 비전에서 요구되는 프레임으로 적응적으로 샘플링하는 것이 가능하다. 인코딩 장치(10a)는 시간 적 리샘플링 정보(예를 들어 도 7a 및 7b의 temporal_resoration_data)를 복호화기로 전송할 수 있다. 실시 예 에서 필요한 경우 샘플링된 프레임의 주기 또는 프레임 번호(인덱스)를 복호화기로 전송할 수 있다. 프레임 인 덱스는 입력 영상에 포함된 전체 프레임에 대하여 순서대로 부여된 인덱스일 수 있다. 시간적 리샘플러는 프레임 주기가 미리 복호화기와 정한 고정 값인 경우 주기 정보를 별도로 복호화기에 전송하지 않을 수 있다. 시간적 리샘플러는 프레임 주기가 가변적인 경우 주기 정보를 별도로 전송할 수 있다. 또는 시간적 리샘플 러는 프레임 주기가 가변적인 경우 프레임의 인덱스 번호를 전송할 수 있다. 실시 예에 따라 복호화기에서 복호화된 영상의 응용목적과 응용목적에 따른 프레임율이 고정된 경우 프레임율에 대한 정보는 생략될 수 있다. 부호화기에서 복호화기로 전송하는 신텍스에 대한 정보는 도 7a 및 7b와 같으며, 이는 복호화기에서 시간적 리 샘플링에 대응하는 시간적 복원을 위해 사용될 수 있으며, 실시 예에 따라 복호화기에서 시간적 복원 과정이 필 요하지 않는 경우 부호화기는 시간적 복원과 관련된 정보의 전송을 생략할 수 있다. 도 7a, 7b 및 7c 본 개시의 일 실시 예에 따른 시간적 리샘플링에 대한 신텍스(syntax) 및 시멘틱(semantics)의 일 예시이다. 도 7a는 시간적 리샘플링에 관련된 정보(temporal_restoraion_data)를 나타낸다. Target_application_idx는 복호화기에서 사용할 머신비전 타겟 응용에 대한 정보 인덱스(idx)를 나타낸다. 특정 되지 않은 경우, 추적(tracking), 인식(recognition), 분류(classification), 또는 분할(segmentation) 등 타 겟 응용 리스트의 해당 인덱스에 대한 정보를 전송할 수 있다. 실시 예에서, idx 값이 0인 경우 특정되지 않음, 1인 경우 tracking, 2인 경우 recognition, 3인 경우 classification, 4인 경우 segmentation을 나타낼 수 있 다. Temporal_restoration_flag는 시간적 리샘플링에 대한 적용 여부에 대한 플래그이다. Same_period_flag는 시간적 리샘플링에 대한 적용시 주기적 리샘플링 또는 비주기적 리샘플링을 사용하는지에 대한 플래그이다. 실시 예에 따라 시간적 리샘플링의 주기성이 고정되는 경우 해당 정보 및 관련 정보는 생략될수 있다. Same_period_flag가 1인 경우 동일한 주기로 리샘플링된 것을 의미한다. Temporal_resampling_rete_idx는 리샘플링율에 대한 리스트의 인덱스이며, 시간적 리샘플링 적용에 대해 tempotal_restoration_flag로 표기하므로 입력신호와 출력신호가 동일한 경우는 포함하지 않는다. 예를 들어 샘 플링율은 1/2, 1/4, 1/8 등 비율의 형태가 될 수 있고, 초당 프레임의 숫자가 될 수 있다. 부호화기와 복호화기 는 해당 리스트에 대해 사전에 약속하고, 부호화기는 리스트의 인덱스를 전송할 수 있다. 실시 예에 따라 상기 전송된 응용에 대해 리샘플링율이 고정되거나 필요한 프레임의 개수가 고정된 경우 해당 정보는 생략될 수 있다. 비주기적 리샘플링을 하는 경우 리샘플링된 프레임의 인덱스 정보를 전송할 수 있다(Same_period_flag). 비주기 적 리샘플링을 적용한 경우 temporal_resampling_rate_idx를 통해 frame의 숫자를 계산할 수 있다. 예를 들어 프레임 숫자가 30이고 리샘플링율이 1/2인 경우 frame_num은 15가 된다. 실시 예에 따라 응용에 대해 프레임 숫 자가 고정된 경우 고정된 숫자에 의해 frame_num이 결정될 수 있다. 프레임 숫자에 따라 이전 프레임 인덱스와 의 차분 값(delta_frame_idx[i])을 전송한다. 이전 인덱스와의 차분값이므로 프레임율로 계산된 frame_num 보다 1개 작은 개수를 전송하면 된다. 실시 예에 따라 시간적 리샘플링 주기의 비주기성과 주기성에 대한 플래그 전송없이 이전 기준 프레임 인덱스와 현재 기준 프레임 인덱스의 차분 값을 통해 시간적 리샘플링 주기 정보를 전송할 수 있다. 예를 들어, 시간적 리샘플링이 주기적으로 이루어진 경우 delta_frame_idx[i]는 동일한 값을 갖게 된다. 도 7b의 경우 프레임 인덱 스 간의 차분값을 전송하는 신텍스의 예시이다. 시간적 복원(temporal_restoration)에 관련 정보는 실시 예에 따라 다양한 레벨에서 전송될 수 있다. 예를 들어, 시간적 리샘플러는 GOP 레벨, 프레임 레벨, 슬라이스 레벨, 시퀀스, 서브 시퀀스 레벨 등에서 시간 적 복원 정보를 전송할 수 있다. 도 7a를 통해 게시한 실시예는 시퀀스 단위에서 전송하는 것을 기준으로 하였 으나, target_application_idx를 제외한 temporal_restoration의 실제 세부 정보는 GOP, 프레임, 슬라이스, 서 브 시퀀스 등 다양한 레벨에서 전송이 가능하다. 도 7a 및 7b는 temporal_restoration을 위해 부호화기에서 복 호화기로 전송이 필요한 정보에 대한 일 실시예이며 해당 정보가 꼭 동일한 레벨에서 한꺼번에 전송되는 것을 의미하는 것은 아니다. 실시예에 따라 temporal_restoration 관련 정보가 시퀀스, 서브시퀀스, GOP, 프레임, 및 슬라이스 중 복수 개의 단계에서 분산된 형태로 전송될 수 있다. 예를 들어 target_application_idx는 시퀀스 레벨에서 전송되고 temporal_restoration_flag이후의 정보는 모두 GOP 레벨에서 전송될 수 있다. 또는 target_application_idx는 시퀀스 레벨에서 전송되고 temporal_restoration_flag, same_period_flag, temporal_resampling_rate_idx는 GOP 레벨에서 전송되며 delta_frame_idx[i]는 프레임 또는 슬라이스 레벨에서 전송될 수 있다. 도 7c를 참조하면, 시간적 리샘플러는 슬라이스 단위로 리샘플링 플래그를 전송하고, 해당 플래그를 통해 리샘플링된 경우 슬라이스 내부 부호화 정보를 전송하지 않는 방법으로 시간적 리샘플링 관련 정보를 전송할 수 있다. HRD 관점에서 언더플로우(underflow)의 문제를 방지하기 위해 trailing bits를 전송하므로 실제 1+a bits의 정보가 전송된다. 도 5를 참조하면, 공간적 리샘플러는 입력 영상의 해상도를 변화시키는 단계로 프레임 단위로 해상도를 업 샘플링 또는 다운샘플링할 수 있다. 예를 들어, 공간적 리샘플러는 입력 영상의 해상도를 1/2으로 다운샘 플링할 수 있다. 또는 실시 예에 따라 공간적 리샘플러는 입력된 프레임에 대해 프레임 단위로 서로 상이 한 해상도로 업샘플링 또는 다운샘플링 하는 것이 가능하다. 도 8은 본 개시의 일 실시 예의 공간적 리샘플링에 따라 해상도를 변경하는 일 예시이다. 도 8의 (a)는 입력 신 호에 대한 각 프레임의 해상도를 동일하게 리샘플링한 예시이다. 예를 들어 4K 해상도를 가지는 입력 신호를 모 든 프레임에 대하여 동일하게 1/2로 다운샘플링하여 2K 해상도를 갖도록 변경할 수 있다. 다른 예시로, 도 8의 (b)는 입력 신호에 대한 각 프레임의 해상도를 각기 다르게 리샘플링한 것이다. 일정 주기(첫번째, 네번째, 일 곱번째, ... 등)에 해당하는 프레임은 입력 신호의 해상도를 1/2로 다운샘플링하고, 나머지 프레임들(두번째, 세번째, 다섯번째, 여섯번째, 여덟번째, 아홉번째, ... 등)에 대해서는 입력 신호의 해상도를 1/4로 다운샘플링 할 수 있다. 인코딩장치(10a)는 공간적인 리샘플링 정보(spatial_restoration_data)를 복호화기로 전송할 수 있 다. 도 9는 본 개시의 일 실시 예에 따라 공간적 리샘플링 이후 해상도별로 프레임을 재정렬하는 예시이다. 실시 예 에 따라 공간적 리샘플링 이후 단계의 효율 및 내부 부호화를 위해 해상도가 다르게 리샘플링된 신호는 도 9와같이 해상도별로 재정렬하여 다음 단계를 진행할 수 있다. 도 8과 같이, 공간적 리샘플러는 입력신호 전체에 대하여 업샘플링 또는 다운샘플링할 수 있다. 또는 다른 일 실시 예로써, 공간적 리샘플러는 입력영상의 일부에 대하여 업샘플링 또는 다운샘플링할 수 있다. 도 10은 본 개시의 일 실시 예에 따른 공간적 리샘플링에 따라 해상도를 변경하는 다른 일 예시이다. 도 10의 (a)를 참조하면, 공간적 리샘플러는 입력 신호 전체에 대하여 해상도를 다운샘플링할 수 있다. 이는 도 8 과 동일하다. 도 10의 (b)를 참조하면, 공간적 리샘플러는 입력 영상의 일부 영역만 요구되는 해상도에 맞 추어 잘라내는 크롭(crop)의 방식으로 영상의 해상도 또는 크기를 변경할 수 있다. 도 10의 (c)를 참조하면, 공 간적 리샘플러는 입력 영상의 일부 영역을 크롭한 후, 크롭된 영상에 대하여 다운샘플링할 수 있다. 도 10 의 (d)를 참조하면, 공간적 리샘플러는 입력 영상의 일부 영역을 크롭한 후, 크롭된 영상에 대하여 업샘플 링할 수 있다. 부호화기에서 복호화기로 전송하는 신텍스에 대한 정보는 도 11a와 같으며, 이는 복호화기에서 공간적 리샘플링에 대응하는 공간적 복원을 위해 사용될 수 있다. 실시예에 따라 복호화기에서 공간적 복원 과 정이 필요하지 않은 경우 부호화기는 공간적 복원과 관련된 정보의 전송을 생략할 수 있다. 도 11a, 11b 및 11c는 본 개시의 일 실시 예에 따른 공간적 리샘플링에 대한 신텍스 및 시멘틱의 일 예시이다. 도 11a는 입력신호 전체에 대한 공간적 리샘플링과 관련된 신텍스를 포함한다. Target_application_idx는 복호화기에서 사용할 머신비전 타겟 응용에 대한 정보 인덱스(idx)를 나타낸다. 특정 되지 않은 경우, 추적(tracking), 인식(recognition), 분류(classification), 또는 분할(segmentation) 등 타 겟 응용 리스트의 해당 인덱스에 대한 정보를 전송할 수 있다. 실시 예에서, idx 값이 0인 경우 특정되지 않음, 1인 경우 tracking, 2인 경우 recognition, 3인 경우 classification, 4인 경우 segmentation을 나타낼 수 있 다. spatial_restoration_flag는 공간적 리샘플링에 대한 적용 여부에 대한 플래그이다. Same_ratio_flag는 시권스 내 각 프레임이 동일 해상도로 리샘플링 되었는지에 대한 정보를 표기한다. Same_ration_flag가 1인 경우 동일하지 않은 해상도로 리샘플링 된 것을 의미한다. num_spatial_ratio_minus2는 리샘플링된 이종 해상도의 개수로 0과 1의 경우는 포함되지 않으므로 전송되는 숫 자가 0인 경우 2개의 이종 해상도를 의미할 수 있다. num_spatial_ration는 전송된 num_spatial_ratio_minus2에 2를 더하여 계산될 수 있다. Same_ratio_flag가 0이 라서 num_spatial_ratio_minus2가 전송되지 않은 경우 num_spatial_ratio는 1이 된다. Spatial_resampling_rate_idx[i]는 이종 해상도의 종류에 따른 각 해상도별 리샘플링율에 대한 리스트의 인덱스 를 나타낸다. 예를 들어, 2, 4, 1/2, 1/4 등 비율이 될 수 있고, 가로, 세로 해상도에 대한 직접적인 크기 정 보가 될 수 있다. Spatial_restoraion_flag에 의해 리샘플링 적용여부가 전송되므로 num_spatial_ratio가 1인 경우 입력 신호와 출력 신호가 동일한 해상도인 경우는 포함하지 않는다. 실시 예에 따라 num_spatial_ratio가 2이상인 경우 리샘플링 이후 이종해상도를 가질 수 있으므로 입력신호와 출력 신호가 동일한 해상도인 경우를 포함할 수 있다. resampling_method_idx[i]는 해상도별 리샘플링 방법에 대한 리스트의 인덱스를 나타낸다. 다운샘플링, 업샘플 링, 크롭 등 방법에 대한 정보 및 업샘플링, 다운샘플링의 경우 해당 리샘플리에서 사용한 필터에 대한 정보를 포함할 수 있다. 이종 해상도를 가지는 경우 상위 레벨에서 동일 해상도를 가지는 프레임들의 인덱스를 전송할 수 있고, 이때 각 해상도에 해당하는 프레임 인덱스의 차분값을 delta_frame_idx[i]로 전송할 수 있다. 또는, 실시예에 따라 프레 임 레벨에서 프레임별로 해상도 정보를 복호화기로 전송할 수 있다. 이는 부호화기에서 복호화기로 각 프레임 별로 프레임의 해상도에 대한 정보를 직접적으로 전송할 수 있고, 또는 해상도를 결정할 수 있는 간접적인 정보 를 포함하여 전송하는 것을 의미할 수 있다. 예를 들어 각 프레임의 헤더에서 각 프레임의 가로 해상도와 세로 해상도의 직접적인 숫자를 전송하거나, 해상도 정보에 대한 리스트의 인덱스를 전송하는 방법이 있을 수 있다. 또는 이전에 전송된 프레임의 해상도와의 비율에 대한 직접적인 값 또는 비율정보에 대한 리스트의 인덱스, 이 전에 전송된 원본의 해상도 정보에 대한 비율에 대한 직접적인 값 또는 비율 정보에 대한 리스트의 인덱스 등이 있을 수 있다. 공간적 리샘플러는 리샘플링 방법으로 크롭을 사용하는 경우, 크롭되는 사각형의 위치에 대한 정보를 복호 화기로 전송할 수 있다. 도 11b는 크롭이 적용된 경우 공간적 리샘플링과 관련된 신텍스(crop_location)를 포함한다. Location[x]는 크롭되는 사각형의 왼쪽 모서리의 x 좌표를 나타낸다. 부호화기는 전송의 효율을 위해 로그를 취 하여 전송할 수 있으며, 복호화기는 약속된 방법으로 부호화기에서 전송된 값을 바탕으로 실제 영상 내 좌표를 추출할 수 있다. Location[y]는 크롭되는 사각형의 왼쪽 모서리의 y 좌표를 나타낸다. 부호화기는 전송의 효율을 위해 로그를 취 하여 전송할 수 있으며, 복호화기는 약속된 방법으로 부호화기에서 전송된 값을 바탕으로 실제 영상내 좌표를 추출할 수 있다. Restorlation_ref_idx는 부호화기에서 제거된 영역을 복원하기 위해 참조하는 영상의 참조 인덱스를 나타낸다. 실시 예에 따라 1개 이상의 다수 개가 될 수 있다. 복호화기는 해당 참조영상을 복사하여 크롭되어 제거된 주변 영역을 복원하는데 사용할 수 있다. 복호화기는 복원과정에서 크롭된 영상을 복호화하고 크롭되어 제거된 영역을 복원할 때 위치 정보를 사용할 수 있다. 실시 예에 따라 크롭 형태로 리샘플링되었지만, 크롭되어 제거된 영역에 대해서는 별도의 복원을 하지 않 을 경우 위치 정보는 전송되지 않을 수 있다. 도 11c는 크롭된 사각형의 위치가 관심 영역의 위치에 기반하여 변경되는 경우에 대한 공간적 리샘플링과 관련된 신텍스(crop_location)를 포함한다. Location[x]는 크롭되는 사각형의 왼쪽 모서리의 x 좌표를 나타낸다. 부호화기는 전송의 효율을 위해 로그를 취 하여 전송할 수 있으며, 복호화기는 약속된 방법으로 부호화기에서 전송된 값을 바탕으로 실제 영상 내 좌표를 추출할 수 있다. Location[y]는 크롭되는 사각형의 왼쪽 모서리의 y 좌표를 나타낸다. 부호화기는 전송의 효율을 위해 로그를 취 하여 전송할 수 있으며, 복호화기는 약속된 방법으로 부호화기에서 전송된 값을 바탕으로 실제 영상내 좌표를 추출할 수 있다. Restorlation_ref_idx는 부호화기에서 제거된 영역을 복원하기 위해 참조하는 영상의 참조 인덱스를 나타낸다. 실시 예에 따라 1개 이상의 다수 개가 될 수 있다. 복호화기는 해당 참조영상을 복사하여 크롭되어 제거된 주변 영역을 복원하는데 사용할 수 있다. loc_delta_flag는 프레임 별로 크롭되는 사각형의 위치가 변경되어 변경되는 위치에 대한 추가적인 정보의 전송 이 필요한 경우에 대한 플래그이다. 추가적인 정보는 도 11a를 통해 전송된 resampling_mehod_idx[i] 및 delta_frame_idx[i]를 통해 계산될 수 있다. delta_location[x]는 크롭되는 사각형의 왼쪽 모서리의 위치에 대한 정보를 나타낸다. 영상의 시간 순서상 동일 크기로 크롭을 통해 리샘플링된 가장 최근의 프레임의 크롭된 위치와의 x 축 차분값이다. delta_location[y]는 크롭되는 사각형의 왼쪽 모서리의 위치에 대한 정보를 나타낸다. 영상의 시간 순서상 동일 크기로 크롭을 통해 리샘플링된 가장 최근의 프레임의 크롭된 위치와의 y 축 차분값이다. 공간적 리샘플러는 리샘플링 과정에서 크롭이 사용될 경우 크롭되는 사각형의 위치가 관심 영역의 위치에 기반하여 변경될 수 있고, 이때 크롭되는 사각형의 위치에 대한 정보를 크롭되는 프레임별로 복호화기에 도 11c 를 통해 전송할 수 있다. 프레임별로 전송된다는 의미는 크롭된 프레임의 헤더에 해당하는 신텍스를 포함하여 직접적으로 전송하는 방법(도 11c)뿐만 아니라 상위레벨에서 전송하지만 크롭된 프레임과 매칭하여 해당하는 프 레임에서 크롭된 위치를 알 수 있게 하는 간접적인 방법을 포함한다. 예를 들어, 크롭으로 리샘플링된 프레임의 인덱스와 해당 인덱스에 대핑되는 도 11c의 신텍스 정보를 하나의 시퀀스 또는 GOP 단위로 전송할 수 있다. 다시 도 5를 참조하면, 관심영역 추출기는 입력된 신호에서 머신 비전의 응용에서 요구되는 특수 목적 또 는 일반적인 목적을 위해 객체로 예상되는 영역을 배경과 구분할 수 있다. 관심영역 추출기는 영상 내부에 서 학습 또는 영상처리기법을 통해 객체로 예상되는 영역의 위치와 크기 정보를 추출할 수 있다. 실시 예에 따 라 입력된 신호에서 복수개의 관심 영역이 추출될 수 있다. 관심영역 추출기는 복수개의 관심 영역 각각에 대한 크기 및 위치 정보를 내부 부호화기로 전달할 수 있다. 내부 부호화기는 객체와 배경에 대해 양 자화를 다르게 하는 방법으로 화질을 변화시켜 부호화를 수행할 수 있다. 내부 부호화기는 입력된 신호에 대해 부호화를 수행할 수 있다. 내부 부호화기는 기수행된 단계의 시 간적 리샘플링 정보를 이용하여 참조구조에 활용하거나, 관심영역에 대한 정보를 바탕으로 객체와 배경의 참조 방법, 양자화 파라미터를 변화시켜 효과적인 부호화를 할 수 있다. 내부 부호화기는 도 9와 같이 여러 종류의 해상도를 갖는 프레임들을 포함하는 입력 영상이 입력된 경우 서브 시퀀스의 형태로 하나의 시퀀스 내에서 다수의 서브 시퀀스를 지원하여 부호화를 할 수 있다. 도 12는 본 개시의 일 실시 예에 따른 머신 비전을 위한 인코딩 장치의 구성요소를 포함하는 블록도이다. 도 12 는 도 5의 구성요소를 모두 포함하며, 구성요소의 순서가 상이하다. 도 12는 각 구성요소는 도 5의 구성요소에 대응되어, 각 구성요소에 대한 설명은 중복되어 기재를 생략한다. 도 12를 참조하면, 인코딩 장치(10a)는 입력 신호에 대한 관심 영역을 먼저 추출한 후, 시간적 리샘플링, 공간 적 리샘플링 및 내부 부호화를 순서대로 수행할 수 있다. 도 12의 인코딩 구조에 따른 인코딩 장치(10a)는 입력 신호에서 추출된 관심 영역 정보를 바탕으로 시간적 리샘플링 및/또는 공간적 리샘플링을 적응적으로 수행할 수 있다. 예를 들어, 인코딩 장치(10a)는 응용목적에 적합한 관심 영역이 추출된 프레임을 중심으로 비주기적 시간 적 리샘플링을 수행하거나, 크롭을 통한 해상도 변경이 가능하다. 인코딩 장치(10a)의 각 단계에서 수행되는 절 차는 도 5와 동일하나, 관심영역을 먼저 추출하기 때문에 관심영역에 대한 정보를 시간적 리샘플러와 공간 적 리샘플러가 사용할 수 있는 효과를 가진다. 본 개시의 일 실시 예에 따른 기계를 위한 영상 부호화를 수행하는 인코딩 장치(10a)는, 입력 영상에 대한 프레 임율을 변경하는 시간적 리샘플러, 상기 입력 영상에 대한 해상도를 변경하는 공간적 리샘플러, 및 상기 입력 영상에 대한 부호화를 수행하는 내부 부호화기를 포함하고, 상기 부호화된 영상과 함께 상기 시 간적 리샘플러에 의하여 변경된 입력 영상의 프레임율을 포함하는 시간적 복원 정보(temporal restoration data) 및 상기 공간적 리샘플러에 의하여 변경된 입력 영상의 해상도를 포함하는 공간적 복원 정보(spatial restoration data) 중 적어도 하나를 디코딩 장치(10b)에 전송할 수 있다. 상기 시간적 리샘플러는, 상기 입력 영상에 포함된 전체 프레임에 대하여 프레임 단위로 업샘플링 또는 다 운샘플링하고, 상기 샘플링 주기는 입력 영상의 응용 목적에 따라 결정될 수 있다. 상기 시간적 리샘플러는 주기적으로 상기 입력 영상을 리샘플링하는 경우 상기 샘플링 주기를 상기 디코딩 장치(10b)에 전송할 수 있다. 상기 시간적 리샘플러는 비주기적으로 리샘플링하는 경우 리샘플링된 프레임의 인덱스 번호를 전송할 수 있다. 상기 시간적 리샘플러는 리샘플링에 따른 프레임율에 대한 정보로써 이전 프레임 인덱스와 현재 프레임 인 덱스 간의 차분 값을 상기 디코딩 장치(10b)로 전송하고, 상기 차분 값은 두 프레임 간의 대응 위치 픽셀 간의 차분 또는 두 프레임 간의 움직임 예측을 통한 MSE(mean square error)로 산출될 수 있다. 상기 시간적 복원 정보는 전체 또는 일부로써 시퀀스 단위, GOP 단위, 프레임 단위, 슬라이스 단위 및 서브 시 퀀스 단위 중 적어도 하나의 단위로 전송될 수 있다. 상기 공간적 리샘플러는 상기 입력 영상의 프레임 단위로 해상도를 업샘플링 또는 다운샘플링하도록 하고, 상기 리샘플링되는 목표 해상도는 응용 목적에 따라 전체 프레임에 대해 동일하거나, 프레임 단위로 상이하게 결정될 수 있다. 상기 공간적 리샘플러는 상기 입력 영상의 각 프레임 중 전체 또는 일부 영역에 대한 해상도를 리샘플링하 도록 할 수 있다. 상기 입력 영상의 프레임 일부 영역은 원본 프레임의 일부를 잘라내는 크롭 방식으로 획득하 도록 할 수 있다. 상기 공간적 리샘플러는 크롭 방식으로 잘라낸 입력 영상의 일부에 대하여 해상도를 업 샘플링 또는 다운샘플링할 수 있다. 상기 공간적 리샘플러는 상기 입력 영상에서 일부 영역을 잘라내는 크롭 방식으로 응용 목적에 따른 목표 해상도로 변경할 수 있다. 상기 공간적 리샘플러는 상기 입력 영상에 대한 각 프레임의 해상도를 각기 다르게 리샘플링한 경우, 상기 리샘플링된 입력 영상을 해상도별로 재정렬할 수 있다. 상기 시간적 리샘플러 및 상기 공간적 리샘플러는 각각 상기 입력 영상의 응용 목적에 기반하여 프레 임율 및 해상도를 리샘플링하고, 상기 입력 영상의 응용 목적은, 추적(tracking), 인식(recognition), 분류 (classification), 및 분할(segmentation) 중 어느 하나에 대응될 수 있다. 상기 인코딩 장치(10a)는 상기 입력 영상에서 하나 이상의 관심 영역을 추출하는 관심 영역 추출기를 더 포함하고, 상기 관심 영역 추출기는 상기 입력 영상에서 객체와 배경을 구분하여, 하나 이상의 객체에 대응하여 하나 이상의 관심 영역을 추출할 수 있다. 상기 시간적 리샘플러 및 상기 공간적 리샘플러는 상기 입력 영상에 대한 하나 이상의 관심 영역에 대한 정보를 기반으로, 시간적 리샘플링 및 공간적 리샘플링을 수행하도록 할 수 있다. 상기 관심 영역 추출기는 상기 입력 영상에 대한 시간적 리샘플링 및 공간적 리샘플링 중 적어도 하나를 수행한 입력 영상에 대하여, 상기 관심 영역을 추출할 수 있다. 도 13은 본 개시의 일 실시 예에 따른 머신 비전을 위한 디코딩 장치의 구성요소를 포함하는 블록도이다. 디코딩 장치(10b)는 내부 복호화기, 공간적 복원기, 및 시간적 복원기을 포함할 수 있다. 다 양한 실시 예에서, 디코딩 장치(10b)의 일부 구성은 생략되거나, 구성요소 간의 실행 순서가 변경될 수 있다. 내부 복호화기는 비트스트림을 입력 받아 복호화를 수행할 수 있다. 실시 예에 따라 다양한 복호화기가 사용될 수 있으며, 이때 내부 복호화기는 부호화기에서 사용된 내부 부호화기에 대응되어 결정된다. 공간적 복원기는 부호화기로부터 전송된 공간적 복원 정보(예를 들어, spatial_restoration_data)를 이용 하여 필요시 공간적 복원을 수행할 수 있다. 필요시가 아닌 경우는, 머신 비전의 응용목적상 공간적 복원을 수 행할 필요가 없는 경우일 수 있다. 예를 들어, 부호화기의 공간적 리샘플러에서 다운샘플링하고, 이를 부 호화하여 복호화기에 전송하였으나, 복호화기의 응용목적상 다운샘플링된 해상도에서 업샘플링을 할 필요가 없 다고 복호화기에서 판단하는 경우, 부호화기에서 전송된 공간적 복원 정보를 통해 복원과정을 수행하지 않고, 다음 단계로 진행할 수 있다. 또는, 공간적 복원이 필요하지 않은 응용으로 부호화기에서 판단된 경우, 즉 spatial_restoration_flag가 0인 경우, 공간적 복원에 대한 정보를 부호화기에서 전송하지 않으므로 복호화기에 서 공간적 복원을 하지 않는다. 복호화기에서 공간적 복원이 필요하다고 판단하거나, spartial_restoration_flag가 1인 경우, 복호화기는 내부 복호화기를 통해 복호화된 영상의 공간적 복원을 위한 정보를 추출할 수 있다. 공간적 복원기는 먼저 모든 프레임이 동일한 해상도로 리샘플링 되었는지를 확인하고, 이종 해상도의 개 수만큼 해상도 및 리샘플링 방법과 관련된 정보를 추출할 수 있다. 공간적 복원기는 단일 해상도로 리샘 플링된 경우 해당 해상도의 복원을 위한 정보를 추출할 수 있다. 공간적 복원기는 리샘플링된 방법을 통 해 복원 방법을 결정할 수 있다. 예를 들어, 특정 비율로 업샘플링 또는 다운샘플링된 경우 해당 특정 비율로 복호화된 영상에 대해 업샘플링 또는 다운샘플링할 수 있다. 이때 샘플링 필터 정보가 전송된 경우, 공간적 복 원기는 해당 정보를 바탕으로 복원 필터링에 적용할 수 있다. 공간적 복원기는 다른 실시 예에 따라 크롭을 통해 리샘플링된 경우, 복호화기는 크롭된 사각형의 위치 정보(도 11b)를 통해 내부 복호화기로 복호화된 영상을 위치시키고, 부호화기에서 제거되어 복호화기의 내부 복 호화기로 복호화되지 않은 주변 영역을 복원할 수 있다. 이때 공간적 복원기는 restoration_ref_idx를 통 해 복원에 참조할 프레임을 결정하고, 해당 영상을 통해 복원을 수행할 수 있다. 예를 들어, 크롭 영역 이외의 영역은 해당 인덱스에 해당하는 프레임의 신호를 동일하게 복사하여 사용할 수 있다. 또는 딥러닝을 통한 영상 을 생성하여 복원을 수행할 수 있다. 실시 예에 따라 크롭된 프레임에서 위치가 변경될 경우 도 11c의 정보를 통해 복원을 수행할 수 있다. 시간적 복원기는 부호화기로부터 전송된 시간적 복원 정보를 이용하여 필요시 시간적 복원을 수행할 수 있다. 필요시가 아닌 경우는, 도 7a 및 7b에 따라 전송된 응용목적상 해당 목적을 위해 시간적 복원의 수행이 필요 없는 경우일 수 있다. 또는 공간적 복원이 필요하지 않은 응용으로 부호화기에서 판단된 경우 즉 temporal_restoration_flag가 0인 경우 시간적 복원에 대한 정보를 부호화기에서 전송하지 않으므로 복호화기에 서 시간적 복원을 수행하지 않을 수 있다. 복호화기에서 시간적 복원이 필요하다고 판단될 경우, 또한 temporal_restoration_flag가 1인 경우 시간적 복원기는 시간적 복원을 위해 부호화기로부터 전송된 정보 (temporal_restoration_data)에서 필요한 정보를 추출할 수 있다. 먼저 시간적 복원기는 same_period_flag를 통해 동일 주기로 샘플링 되었는지 판단할 수 있다. 동일 주기로 샘플링된 경우, 내부 복호 화기를 통해 복호화되고 공간적 복원기를 통해 출력된 신호가 동일주기로 샘플링되었기 때문에, 시 간적 복원기는 샘플링되기 이전의 프레임율로 복원하기 위해 시간적으로 중간 프레임에 해당하는 영상을 복원할 수 있다. 예를 들어, 시간적 복원기는 입력된 신호들의 보간을 통해 복원을 하거나, 복사하는 방 법을 통해 복원하는 방법을 통해 복원할 수 있다. 또는 딥러닝 학습을 통해 복원하는 것도 가능하다. 동일하지 않은 주기(비동일 주기)로 샘플링된 경우 샘플링 간격에 차이가 있으므로 시간적 복원기는 시간적 샘플링 주기에 대한 정보를 delta_frame_idx[i]를 통해 추출하고, 인덱스 간의 간격(샘플링 주기)에 따라 복원을 수행할 수 있다. 동일 주기의 경우와 마찬가지로 시간적 복원기는 보간, 복사, 딥러닝 학습 등의 방법으로 복 원이 가능하다. 복호화기(10b)는 시간적 복원 단계까지 수행한 영상신호로서, 공간적, 시간적 복원 과정에서 복원된 신호들 중 화질 저하 등의 이유로 필터링이 수행될 수 있다. 출력 신호는 머신비전의 응용 목적에 따라 응용의 입력이 될 수 있다. 예를 들어, 출력 신호는 신경망모델(neural network)의 입력 값이 될 수 있다. 본 개시의 다른 일 실시 예에 따른 기계를 위한 영상 복호화를 수행하는 디코딩 장치(10b)는, 인코딩 장치(10 a)로부터 부호화된 입력 영상을 입력 받아 복호화를 수행하는 내부 복호화기, 상기 인코딩 장치로부터 수신한 상기 입력 영상에 대한 공간적 복원 정보(spatial restoration data)를 기반으로 상기 복호화된 영상에 대한 해 상도를 변경하여 상기 입력 영상의 원본 영상의 해상도로 복원하는 공간적 복원기, 및 상기 인코딩 장치로부터 수신한 상기 입력 영상에 대한 시간적 복원 정보(temporal restoration data)를 기반으로 상기 복호화된 영상에 대한 프레임율을 변경하여 상기 입력영상의 원본 영상의 프레임율로 복원하는 시간적 복원기를 포함할 수 있다. 상기 공간적 복원기는 상기 공간적 복원 정보에 기반하여 상기 입력 영상의 프레임 단위로 해상도를 업샘플링 또는 다운샘플링할 수 있다. 상기 공간적 복원 정보는, 공간적 리샘플링 적용 여부, 해상도별 리샘플링 방법에 대한 리스트의 인덱스, 리샘 플링 방법에 대한 정보, 업샘플링 및 다운샘플링의 경우 해당 리샘플러에서 사용한 필터에 대한 정보, 크롭된 영역의 위치 정보, 및 인코딩 장치에서 공간적 리샘플링에 따라 제거된 영역을 복원하기 위해 참조하는 영상 정 보를 적어도 하나 포함할 수 있다. 상기 시간적 복원기는 상기 시간적 복원 정보에 기반하여 상기 입력 영상을 상기 입력 영상의 원본 영상에 대한 프레임율로 복원할 수 있다. 상기 시간적 복원 정보는, 시간적 리샘플링 적용 여부, 주기적 리샘플링 또는 비주기적 리샘플링인지 여부, 및 비주기적 리샘플링의 경우 프레임 주기 또는 리샘플링된 프레임의 인덱스 정보를 적어도 하나 포함할 수 있다. 본 개시의 또 다른 일 실시 예에 따른 명령어들을 기록하고 있는 비휘발성(non-volatile) 컴퓨터 판독가능 저장 매체로서, 상기 명령어들은, 하나 이상의 프로세서들에 의해 실행될 때, 상기 하나 이상의 프로세서들로 하여금: 입력 영상에 대한 프레임율을 변경하는 단계; 상기 입력 영상에 대한 해상도를 변경하는 단계; 상기 입 력 영상에 대한 부호화를 수행하는 단계; 및 상기 부호화된 영상과 함께 상기 시간적 리샘플링에 따라 변경된 입력 영상의 프레임율을 포함하는 시간적 복원 정보(temporal restoration data) 및 상기 공간적 리샘플링에 따 라 변경된 입력 영상의 해상도를 포함하는 공간적 복원 정보(spatial restoration data)를 디코딩 장치에 전송 하는 단계를 수행하도록 할 수 있다. 도 14는 본 개시의 일 예시에 따른 시간적 리샘플링 방법을 설명하기 위한 흐름도이다. S1410 단계에서, 인코딩 장치(10a) 또는 시간적 리샘플러는 부복호화 효율을 위해 최적의 리샘플링 간격을 계산하고 복호화기로 전송할 수 있다. 시간적 리샘플러는 시간적 리샘플링 간격에 해당하는 delta_frame_idx[i]를 계산할 수 있다. 시간적 리샘플러는 입력된 영상들 간의 프레임 변화량을 계산할 수 있다. 차분 변화량은 두 영상 간의 대응 위치 픽셀 간의 차분 또는 두 영상 간의 움직임 예측(Motion Estimation, ME)을 통한 MSE(mean square error)를 통해 계산된 수 있다. S1420 단계에서, 시간적 리샘플러는 기준 프레임을 선정할 수 있다. 시간적 리샘플러는 S1410 단계를 통해 각 프레임 간의 프레임 변화량을 계산하고 프레임 변화량이 일정 크기를 초과하는 구간 또는 이전 기준 프 레임에서 누적 프레임 변화량이 일정 크기를 초과하는 구간에 대한 정보를 바탕으로 기준 프레임을 결정할 수 있다. S1430 단계에서, 시간적 리샘플러는 현재 기준 프레임과 이전 기준 프레임 간의 간격을 delta_frame_idx[i]를 통해 복호화기로 전송할 수 있다. 도 15는 본 개시의 다른 예시에 따른 시간적 리샘플링 방법을 설명하기 위한 흐름도이다. S1510 단계에서, 인코딩 장치(10a) 또는 시간적 리샘플러는 부복호화 효율을 위해 최적의 리샘플링 간격을 계산하고 복호화기로 전송할 수 있다. 부호화기에서 시간적 리샘플링 간격에 해당하는 delta_frame_idx[i]를 계 산할 수 있다. 시간적 리샘플러는 입력된 영상들 간의 프레임 변화량을 계산한다. 차분 변화량은 두 영상 간의 대응 위치 픽셀 간의 차분 또는 두 영상 간의 움직임 예측을 통한 MSE를 통해 계산될 수 있다. S1520 단계에서, 시간적 리샘플러는 프레임 변화량이 일정 크기를 초과하는 구간 또는 이전 기준 프레임에 서 누적 프레임 변화량이 일정 크기를 초과하는 구간에 대한 정보를 바탕으로 기준 프리임에 대한 후보를 결정 한다. S1530 단계 내지 S1550 단계에서, 시간적 리샘플러는 상기 단계에서 후보로 결정된 기준 프레임을 이용하 여 복호화기에서 수행 가능한 다양한 방법의 복원을 시뮬레이션하여 최적의 restoration 방법을 선택할 수 있다. 시간적 리샘플러는 restoration을 통해 복원된 프레임과 시간적 리샘플링을 통해 리샘플링된 프레임 간의 에러를 계산하여 최적의 restoration 방법을 결정할 수 있다. 최적의 restoration 방법에 관련된 정보는 도 16a 및 16b에 따라 복호화기로 전송될 수 있다. 도 16a 및 16b는 본 개시의 일 실시 예에 따른 시간적 리샘 플링에 대한 신텍스 및 시멘틱의 일 예시이다. S1550 단계에서, 시간적 리샘플러는 시간적 restoration을 통해 복호화기에서 restoration을 통해 복원될 프레임의 복원 에러를 예측하고, 기준 프레임 후보가 적합하지 않을 경우 기준 프레임 후보와 시간적 restoration을 통한 검증을 반복적으로 수행하여 최적의 기준 프레임을 선정할 수 있다. S1560 단계에서, 시간적 리샘플러는 상기 단계에서 결정된 기준 프레임 간의 간격에 대한 정보 즉, 기준 프렐임 사이의 시간적으로 샘플링된 프레임의 숫자를 delta_frame_idx[i]로 복호화기로 전송할 수 있다. 실시 예에 따라 응용에 대한 최적의 프레임율(frame rate)를 정하고, 해당 프레임율 및 기준 프레임 간의 프레임 변 화량과 시간적 restoration에 대한 복원 오차를 반영하여 최적의 delta_frame_idx[i]를 계산할 수 있다. S1570 단계에서, 시간적 리샘플러는 delta_frame_idx[i]를 도 16a 및 16b에 따라 복호화기로 전송할 수 있다. 도 16a 및 16b는 시간적 리샘플러가 다양한 restoration을 시뮬레이션하여 선택한 최적의 restoration에 대응되도록 시간적 리샘플링을 수행한 정보를 나타내는 신텍스 및 시멘틱이다. 도 16a 및 16b는 본 개시의 일 실시 예에 따른 시간적 리샘플링에 대한 신텍스 및 시멘틱의 일 예시이다. 도 16a는 하기 신텍스를 포함한다. target_application_idx는 복호화기에서 사용할 머신비전 타겟 응용에 대한 정보 인덱스(idx)를 나타낸다. 특정 되지 않은 경우, 추적(tracking), 인식(recognition), 분류(classification), 또는 분할(segmentation) 등 타 겟 응용 리스트의 해당 인덱스에 대한 정보를 전송할 수 있다. 실시 예에서, idx 값이 0인 경우 특정되지 않음, 1인 경우 tracking, 2인 경우 recognition, 3인 경우 classification, 4인 경우 segmentation을 나타낼 수 있 다. temporal_restoration_flag는 시간적 리샘플링에 대한 적용 여부에 대한 플래그이다. 비주기적 리샘플링을 적용한 경우 temporal_resampling_rate_idx를 통해 frame의 숫자를 계산할 수 있다. 예를 들어 프레임 숫자가 30이고 리샘플링율이 1/2인 경우 frame_num은 15가 된다. 실시 예에 따라 응용에 대해 프레 임 숫자가 고정된 경우 고정된 숫자에 의해 frame_num이 결정될 수 있다. 프레임 숫자에 따라 이전 프레임 인덱 스와의 차분 값(delta_frame_idx[i])을 전송한다. 이전 인덱스와의 차분값이므로 프레임율로 계산된 frame_num 보다 1개 작은 개수를 전송하면 된다. restoration_method[i]는 복호화기와 부호화기 간에 약속된 restoration 방법에 대한 리스트의 인덱스를 나타낸 다. 예를 들어, 0은 temporal bilinear interpolation, 1은 디스플레이 시간에서 앞의 기준 프레임 copy, 2는 복호화 순서에서 직전 복원 영상을 copy, 3은 딥러닝 기반 영상 복원 등 복호화기와 부호화기 간에 약속된 restoration 방법에 대한 리스트의 인덱스를 전송하며, 해당 인덱스의 방법으로 delta_frame_idx[i]를 통해 시 간적으로 복원되는 프레임에 동일한 방법으로 restoration을 수행한다. 도 16b는 하기 신텍스를 포함한다. target_application_idx는 복호화기에서 사용할 머신비전 타겟 응용에 대한 정보 인덱스(idx)를 나타낸다. 특정 되지 않은 경우, 추적(tracking), 인식(recognition), 분류(classification), 또는 분할(segmentation) 등 타 겟 응용 리스트의 해당 인덱스에 대한 정보를 전송할 수 있다. 실시 예에서, idx 값이 0인 경우 특정되지 않음,1인 경우 tracking, 2인 경우 recognition, 3인 경우 classification, 4인 경우 segmentation을 나타낼 수 있 다. temporal_restoration_flag는 시간적 리샘플링에 대한 적용 여부에 대한 플래그이다. 비주기적 리샘플링을 적용한 경우 temporal_resampling_rate_idx를 통해 frame의 숫자를 계산할 수 있다. 예를 들어 프레임 숫자가 30이고 리샘플링율이 1/2인 경우 frame_num은 15가 된다. 실시 예에 따라 응용에 대해 프레 임 숫자가 고정된 경우 고정된 숫자에 의해 frame_num이 결정될 수 있다. 프레임 숫자에 따라 이전 프레임 인덱 스와의 차분 값(delta_frame_idx[i])을 전송한다. 이전 인덱스와의 차분값이므로 프레임율로 계산된 frame_num 보다 1개 작은 개수를 전송하면 된다. restoration_method[i][j]는 복호화기와 부호화기 간에 약속된 restoration 방법에 대한 리스트의 인덱스를 나 타낸다. 예를 들어, 0은 temporal bilinear interpolation, 1은 디스플레이 시간에서 앞의 기준 프레임 copy, 2는 복호화 순서에서 직전 복원 영상을 copy, 3은 딥러닝 기반 영상 복원 등 복호화기와 부호화기 간에 약속된 restoration 방법에 대한 리스트의 인덱스를 전송한다. 이때 delta_frame_idx[i]를 통해 시간적으로 복원되는 프레임들 각각에 개별적으로 restoration 방법에 대한 인덱스를 별도로 전송하며, 복호화기는 각 프레임별로 전 달된 restoration 방법으로 시간적 restoration을 수행할 수 있다. 본 명세서와 도면에 나타난 본 개시의 예시들은 본 개시의 기술 내용을 쉽게 설명하고 본 개시의 이해를 돕기 위해 특정 예를 제시한 것뿐이며, 본 명세서의 범위를 한정하고자 하는 것은 아니다. 지금까지 설명한 예시들 이외에도 다른 변형 예들이 실시 가능하다는 것은 본 개시가 속하는 기술 분야에서 통상의 지식을 가진 자에게 자명한 것이다. 본 명세서에 기재된 청구항들은 다양한 방식으로 조합될 수 있다. 예를 들어, 본 명세서의 방법 청구항의 기술 적 특징이 조합되어 장치로 구현될 수 있고, 본 명세서의 장치 청구항의 기술적 특징이 조합되어 방법으로 구현 될 수 있다. 또한, 본 명세서의 방법 청구항의 기술적 특징과 장치 청구항의 기술적 특징이 조합되어 장치로 구 현될 수 있고, 본 명세서의 방법 청구항의 기술적 특징과 장치 청구항의 기술적 특징이 조합되어 방법으로 구현 될 수 있다."}
{"patent_id": "10-2024-0036440", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 비디오/영상 코딩 시스템의 예를 개략적으로 나타낸다. 도 2는 비디오/영상 인코딩 장치의 구성을 개략적으로 설명하는 도면이다. 도 3은 비디오/영상 디코딩 장치의 구성을 개략적으로 설명하는 도면이다. 도 4a 내지 도 4d는 VCM 인코더와 VCM 디코더를 나타낸 예시도들이다. 도 5는 본 개시의 일 실시 예에 따른 머신 비전을 위한 인코딩 장치의 구성요소를 포함하는 블록도이다. 도 6은 본 개시의 일 실시 예의 시간적 리샘플링에 따라 해상도를 변경하는 일 예시이다. 도 7a, 7b 및 7c는 본 개시의 일 실시 예에 따른 시간적 리샘플링에 대한 신텍스(syntax) 및 시멘틱(semantic s)의 일 예시이다. 도 8은 본 개시의 일 실시 예의 공간적 리샘플링에 따라 해상도를 변경하는 일 예시이다. 도 9는 본 개시의 일 실시 예에 따라 공간적 리샘플링 이후 해상도별로 프레임을 재정렬하는 예시이다. 도 10은 본 개시의 일 실시 예에 따른 공간적 리샘플링에 따라 해상도를 변경하는 다른 일 예시이다. 도 11a, 11b 및 11c는 본 개시의 일 실시 예에 따른 공간적 리샘플링에 대한 신텍스 및 시멘틱의 일 예시이다. 도 12는 본 개시의 일 실시 예에 따른 머신 비전을 위한 인코딩 장치의 구성요소를 포함하는 블록도이다. 도 13은 본 개시의 일 실시 예에 따른 머신 비전을 위한 디코딩 장치의 구성요소를 포함하는 블록도이다. 도 14는 본 개시의 일 예시에 따른 시간적 리샘플링 방법을 설명하기 위한 흐름도이다. 도 15는 본 개시의 다른 예시에 따른 시간적 리샘플링 방법을 설명하기 위한 흐름도이다. 도 16a 및 16b는 본 개시의 일 실시 예에 따른 시간적 리샘플링에 대한 신텍스 및 시멘틱의 일 예시이다."}
