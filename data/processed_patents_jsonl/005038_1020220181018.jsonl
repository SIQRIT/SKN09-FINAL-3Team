{"patent_id": "10-2022-0181018", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0098865", "출원번호": "10-2022-0181018", "발명의 명칭": "3D 지도 생성을 위한 궤적 보정 방법 및 이를 실행시키기 위하여 기록매체에 기록된 컴퓨터", "출원인": "주식회사 모빌테크", "발명자": "김재승"}}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "지도 생성 장치가, 위치가 실시간으로 변화되는 라이다(LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상으로 상기 위치의 변화에 따른 오차를 보정하는 단계;상기 지도 생성 장치가, 상기 보정된 3D 점군 데이터를 기초로, 상기 위치의 변화와 관련된 예상 궤적(odometry)을 추정하는 단계;상기 지도 생성 장치가, 상기 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용하는 단계;상기 지도 생성 장치가, 상기 커브 피팅이 적용된 예상 궤적을 대상으로 상기 커브 피팅 전 예상 궤적을 맵핑(mapping)하는 단계를 포함하는 것을 특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1 항에 있어서, 상기 오차를 보정하는 단계는상기 3D 점군 데이터와 동시에 수집된 INS 및 GPS 데이터를 기반으로, 상기 위치의 변화에 따른 상기 3D 점군데이터의 오차를 보정하는 것을 특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2 항에 있어서, 상기 오차를 보정하는 단계는상기 INS 데이터에 포함된 상대위치를 GPS 데이터의 절대 위치로 보완한 융합 데이터를 생성하는 것을 특징으로하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3 항에 있어서, 상기 오차를 보정하는 단계는상기 라이다의 위치와 가장 가까운 융합 데이터를 탐색하고, 상기 3D 점군 데이터 및 상기 융합 데이터가 수집된 시간 정보를 기초로, 상기 위치의 변환에 따른 상기 3D 점군 데이터의 오차를 보정하는 것을 특징으로 하는,궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4 항에 있어서, 상기 예상 궤적을 추정하는 단계는상기 3D 점군 데이터 및 상기 융합 데이터를 복셀(voxel) 공간에 표현하고, 각 복셀에 포함된 포인트 그룹을 가우시안 분포로 근사화하여 상기 예상 궤적을 추정하는 것을 특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제5 항에 있어서, 상기 예상 궤적을 추정하는 단계는상기 추정된 예상 궤적의 좌표를 상기 융합 데이터의 좌표로 변환하는 것을 특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6 항에 있어서, 상기 예상 궤적을 추정하는 단계는상기 라이다의 자세에 대한 회전 행렬 및 이동 행렬을 통해 상기 추정된 예상 궤적의 좌표를 상기 융합 데이터의 좌표로 변환하는 것을 특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "공개특허 10-2024-0098865-3-제7 항에 있어서, 상기 커브 피팅을 적용하는 단계는베지어 커브 피팅(Bezier Curve Fitting) 알고리즘을 통해 상기 추정된 예상 궤적에 커브 피팅을 적용하는 것을특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8 항에 있어서, 상기 커브 피팅을 적용하는 단계는상기 커브 피팅 적용된 예상 궤적에 업 샘플링(up sampling)을 수행하고, 상기 업 샘플링 된 포인트에 타임 스탬프(time stamp)를 부여하는 것을 특징으로 하는, 궤적 보정 방법."}
{"patent_id": "10-2022-0181018", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "메모리(memory);송수신기(transceiver); 및상기 메모리에 상주된 명령어를 처리하는 프로세서(processor)를 포함하여 구성된 컴퓨팅 장치와 결합되어,상기 프로세서가, 설치된 위치가 실시간으로 변화되는 라이다(LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상으로 상기 위치의 변화에 따른 오차를 보정하는 단계;상기 프로세서가, 상기 보정된 3D 점군 데이터를 기초로, 상기 위치의 변화와 관련된 예상 궤적(odometry)을 추정하는 단계;상기 프로세서가, 상기 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용하는 단계;상기 프로세서가, 상기 커브 피팅이 적용된 예상 궤적을 대상으로 상기 커브 피팅 전 예상 궤적을 맵핑(mapping)하는 단계를 실행시키기 위하여, 기록매체에 기록된 컴퓨터 프로그램."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 궤적 보정 방법을 제안한다. 상기 방법은 지도 생성 장치가, 위치가 실시간으로 변화되는 라이다 (LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상으로 상기 위치의 변화에 따른 오차를 보정하는 단계, 상기 지도 생성 장치가, 상기 보정된 3D 점군 데이터를 기초로, 상기 위치의 변화와 관련된 예상 궤적(odometr y)을 추정하는 단계, 상기 지도 생성 장치가, 상기 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용하는 단 계, 상기 지도 생성 장치가, 상기 커브 피팅이 적용된 예상 궤적을 대상으로 상기 커브 피팅 전 예상 궤적을 맵 핑(mapping)하는 단계를 포함할 수 있다. 이를 통해, 본 발명은 라이다를 통해 수집한 3D 점군 데이터의 오차를 보정하고, 오차 보정된 3D 점군 데이터를 통해 추정된 예상 궤적에 커브 피팅을 적용하여 맵핑(mapping)한 궤적 을 통해 3D 지도를 생성함으로써, 3D 지도를 생성하는 과정에서 발생되는 오류를 최소화할 수 있다."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 위치 기반 서비스(Location Based Service, LBS)에 관한 것이다. 보다 상세하게는, 라이다(LiDAR) 데이터를 기반으로 3D 지도를 생성하는 과정에서 발생될 수 있는 오류를 최소화할 수 있는 궤적 보정 방법 및 이를 실행시키기 위하여 기록매체에 기록된 컴퓨터 프로그램에 관한 것이다."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "차량의 자율주행(automatic driving)은 차량 스스로 판단하여 주행할 수 있는 시스템을 의미한다. 이와 같은, 자율주행은 시스템이 주행에 관여하는 정도와 운전차가 차량을 제어하는 정도에 따라 비자동화부터 완전 자동화 까지 점진적인 단계로 구분될 수 있다. 일반적으로, 자율주행의 단계는 국제자동차기술자협회(SAE(Society of Automotive Engineers) International)에서 분류한 6단계의 레벨로 구분된다. 국제자동차기술자협회가 분류한 6단계에 따르면, 레벨 0단계는 비자동화, 레벨 1단계는 운전자 보조, 레벨 2단계는 부분 자동화, 레벨 3단계는 조건부 자동화, 레벨 4단계는 고도 자동화, 그리고 레벨 5단계는 완전 자동화 단계이다. 자율주행은 인지(perception), 측위(localization), 경로 계획(path planning) 및 제어(control)의 메커니즘을 통해 수행된다. 그리고, 다양한 기업체들은 자율주행 메커니즘에서 인지 및 경로 계획을 인공지능(AI)을 이용하 여 구현하기 위해 개발 중에 있다. 이와 같은, 자율주행을 위해서는 도로에 관한 다양한 정보가 선제적으로 수집되어야 한다. 그러나, 현실적으로 차량의 센서 만을 이용하여 방대한 정보를 실시간 수집하여 분석하는 것은 쉽지 않다. 이에 따라, 자율주행이 현실화되기 위해서는 실제 자율 주행에 필요한 각종 정보를 제공해 줄 수 있는 정밀도로지도가 필수적이다 여기서, 정밀도로지도는 도로와 주변 지형의 정보를 정확도 ±25㎝로 구축한 3차원 전자지도를 말한다. 이러한, 정밀도로지도는 일반적인 전자지도의 정보(길안내를 위해 필요한 노드 정보들과 링크 정보들)에 더하여, 도로의 폭, 도로의 곡률, 도로의 경사도, 차선 정보(점선, 실선, 정지선 등), 면형 정보(횡단보도, 과속방지턱, 갓길 등), 노면 마크 정보, 표지 판 정보, 시설물 정보(신호등, 연석, 맨홀 등) 등과 같은 정밀 정보를 포함하는 지도이다. 이러한, 정밀도로지도를 생성하기 위해서는 이동 지도제작 시스템(Mobile Mapping System, MMS), 항공사진 촬영 정보 및 다양한 관련 자료들이 요구된다. MMS는 차량에 장착되어 차량의 운행과 함께 도로 주변에 있는 지형지물의 위치측정 및 시각정보를 획득하도록 이루어진다. 즉, MMS는 차체의 위치와 자세정보를 취득하기 위한 GPS(Global Positioning System), 관성 항법 장치(Inertial Navigation System; INS), 관성 측정 장치(Inertial Measurement Unit; IMU), 지형지물의 형상 과 정보를 수집하기 위한 카메라, 라이다(Light Detection and Ranging, LiDAR) 센서 및 기타 센서에 의해 수 집된 정보들을 기반으로 생성될 수 있다. 이 중에서, 라이다(LiDAR)는 고출력 레이저 펄스를 발사해 레이저가 목표물에 반사되어 되돌아오는 시간을 측정 하여 사물로부터의 거리, 형태를 나타내는 3D 데이터를 획득할 수 있다. 그러나, MMS에 사용되는 라이다는 도로 상에서 이동하는 차량에 설치되어 실시간으로 3D 데이터를 획득하므로, 3D 데이터를 획득하는 과정에서 라이다의 위치가 변화됨에 따라 오차가 존재할 수 있다. 또한, MMS는 라이다에 의해 수집된 데이터와 다른 센서에 의해 수집된 데이터를 종합 반영하는 과정에서도, 센 서들의 설치 위치 및 이동에 따른 오차가 존재할 수 있다. 그리고, 이러한 오차들은 생성된 정밀도로지도의 정 확도를 감소시키는 문제점이 있었다. 선행기술문헌 특허문헌 (특허문헌 0001) 대한민국 공개특허공보 제10-2013-0123041호, ‘라이다 장치를 활용한 실내지도 자동 생성 방 법’, (2013.11.12. 공개)"}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명의 일 목적은 라이다 데이터를 기반으로 3D 지도를 생성하는 과정에서 발생될 수 있는 오류를 최소화할 수 있는 궤적 보정 방법을 제공하는 것이다. 본 발명의 다른 목적은 라이다 데이터를 기반으로 3D 지도를 생성하는 과정에서 발생될 수 있는 오류를 최소화 할 수 있는 궤적 보정 방법을 실행하기 위하여 기록매체에 기록된 컴퓨터 프로그램을 제공하는 것이다. 본 발명의 기술적 과제들은 이상에서 언급한 기술적 과제들로 제한되지 않으며, 언급되지 않은 또 다른 기술적 과제들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상술한 바와 같은 기술적 과제를 달성하기 위하여, 본 발명은 궤적 보정 방법을 제안한다. 상기 방법은 지도 생 성 장치가, 위치가 실시간으로 변화되는 라이다(LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상으로 상기 위치의 변화에 따른 오차를 보정하는 단계, 상기 지도 생성 장치가, 상기 보정된 3D 점군 데이터를 기초로, 상기 위치의 변화와 관련된 예상 궤적(odometry)을 추정하는 단계, 상기 지도 생성 장치가, 상기 추정 된 예상 궤적에 커브 피팅(curve fitting)을 적용하는 단계, 상기 지도 생성 장치가, 상기 커브 피팅이 적용된 예상 궤적을 대상으로 상기 커브 피팅 전 예상 궤적을 맵핑(mapping)하는 단계를 포함할 수 있다. 구체적으로, 상기 오차를 보정하는 단계는 상기 3D 점군 데이터와 동시에 수집된 INS 및 GPS 데이터를 기반으로, 상기 위치의 변화에 따른 상기 3D 점군 데이터의 오차를 보정할 수 있다. 상기 오차를 보정하는 단계는 상기 INS 데이터에 포함된 상대위치를 GPS 데이터의 절대 위치로 보완한 융합 데 이터를 생성할 수 있다. 상기 오차를 보정하는 단계는 상기 라이다의 위치와 가장 가까운 융합 데이터를 탐색하고, 상기 3D 점군 데이터 및 상기 융합 데이터가 수집된 시간 정보를 기초로, 상기 위치의 변환에 따른 상기 3D 점군 데이터의 오차를 보정할 수 있다. 상기 예상 궤적을 추정하는 단계는 상기 3D 점군 데이터 및 상기 융합 데이터를 복셀(voxel) 공간에 표현하고, 각 복셀에 포함된 포인트 그룹을 가우시안 분포로 근사화하여 상기 예상 궤적을 추정할 수 있다. 상기 예상 궤적을 추정하는 단계는 상기 추정된 예상 궤적의 좌표를 상기 융합 데이터의 좌표로 변환할 수 있다. 상기 예상 궤적을 추정하는 단계는 상기 라이다의 자세에 대한 회전 행렬 및 이동 행렬을 통해 상기 추정된 예 상 궤적의 좌표를 상기 융합 데이터의 좌표로 변환할 수 있다. 상기 커브 피팅을 적용하는 단계는 베지어 커브 피팅(Bezier Curve Fitting) 알고리즘을 통해 상기 추정된 예상 궤적에 커브 피팅을 적용할 수 있다. 상기 커브 피팅을 적용하는 단계는 상기 커브 피팅 적용된 예상 궤적에 업 샘플링(up sampling)을 수행하고, 상 기 업 샘플링 된 포인트에 타임 스탬프(time stamp)를 부여할 수 있다. 상기 커브 피팅을 적용하는 단계에서 상기 업 샘플링 된 포인트에 타임 스탬프를 사전 설정된 간격으로 균등하 게 부여할 수 있다. 상기 맵핑하는 단계는 상기 타임 스탬프를 기준으로 상기 커브 피팅 전 예상 궤적에 포함된 포인트를 상기 커브 피팅 적용된 예상 궤적에 포함된 포인트로 위치 좌표를 수정할 수 있다. 상기 맵핑하는 단계는 상기 커브 피팅 전 예상 궤적에 포함된 포인트를 상기 커브 피팅 적용된 예상 궤적에 포 함된 포인트로 위치 좌표만을 수정하고, 자세 및 속도 데이터는 유지할 수 있다. 상술한 바와 같은 기술적 과제를 달성하기 위하여, 본 발명은 상기 궤적 보정 방법을 실행시키기 위하여, 기록 매체에 기록된 컴퓨터 프로그램을 제안한다. 상기 프로그램은 메모리(memory), 송수신기(transceiver) 및 상기 메모리에 상주된 명령어를 처리하는 프로세서(processor)를 포함하여 구성된 컴퓨팅 장치와 결합되어, 상기 프 로세서가, 설치된 위치가 실시간으로 변화되는 라이다(LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상 으로 상기 위치의 변화에 따른 오차를 보정하는 단계, 상기 프로세서가, 상기 보정된 3D 점군 데이터를 기초로, 상기 위치의 변화와 관련된 예상 궤적(odometry)을 추정하는 단계, 상기 프로세서가, 상기 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용하는 단계, 상기 프로세서가, 상기 커브 피팅이 적용된 예상 궤적을 대상으로 상기 커브 피팅 전 예상 궤적을 맵핑(mapping)하는 단계를 실행시키기 위하여, 기록매체에 기록된 컴퓨터 프로 그램이 될 수 있다. 기타 실시 예들의 구체적인 사항들은 상세한 설명 및 도면들에 포함되어 있다."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명의 실시 예들에 따르면, 라이다를 통해 수집한 3D 점군 데이터의 오차를 보정하고, 오차 보정된 3D 점군 데이터를 통해 추정된 예상 궤적에 커브 피팅을 적용하여 맵핑(mapping)한 궤적을 통해 3D 지도를 생성함으로써, 3D 지도를 생성하는 과정에서 발생되는 오류를 최소화할 수 있다."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 2, "content": "본 발명의 효과들은 이상에서 언급한 효과로 제한되지 아니하며, 언급되지 않은 또 다른 효과들은 청구범위의"}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 3, "content": "기재로부터 본 발명이 속한 기술분야의 통상의 기술자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 명세서에서 사용되는 기술적 용어는 단지 특정한 실시 예를 설명하기 위해 사용된 것으로, 본 발명을 한정하 려는 의도가 아님을 유의해야 한다. 또한, 본명세서에서 사용되는 기술적 용어는 본 명세서에서 특별히 다른 의 미로 정의되지 않는 한, 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자에 의해 일반적으로 이해되는 의미로 해석되어야 하며, 과도하게 포괄적인 의미로 해석되거나, 과도하게 축소된 의미로 해석되지 않아야 한다. 또한, 본 명세서에서 사용되는 기술적인 용어가 본 발명의 사상을 정확하게 표현하지 못하는 잘못된 기술 적 용어일 때에는, 당업자가 올바르게 이해할 수 있는 기술적 용어로 대체되어 이해되어야 할 것이다. 또한, 본 발명에서 사용되는 일반적인 용어는 사전에 정의되어 있는 바에 따라, 또는 전후 문맥상에 따라 해석되어야 하 며, 과도하게 축소된 의미로 해석되지 않아야 한다. 또한, 본 명세서에서 사용되는 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, '구성된다' 또는 '가지다' 등의 용어는 명세서 상에 기재된 여러 구성 요소들, 또는 여 러 단계들을 반드시 모두 포함하는 것으로 해석되지 않아야 하며, 그 중 일부 구성 요소들 또는 일부 단계들은 포함되지 않을 수도 있고, 또는 추가적인 구성 요소 또는 단계들을 더 포함할 수 있는 것으로 해석되어야 한다. 또한, 본 명세서에서 사용되는 제1, 제2 등과 같이 서수를 포함하는 용어는 다양한 구성 요소들을 설명하는데 사용될 수 있지만, 상기 구성 요소들은 상기 용어들에 의해 한정되어서는 안 된다. 상기 용어들은 하나의 구성 요소를 다른 구성요소로부터 구별하는 목적으로만 사용된다. 예를 들어, 본 발명의 권리 범위를 벗어나지 않으 면서 제1 구성 요소는 제2 구성 요소로 명명될 수 있고, 유사하게 제2 구성 요소도 제1 구성 요소로 명명될 수 있다. 어떤 구성 요소가 다른 구성 요소에 '연결되어' 있다거나 '접속되어' 있다고 언급된 때에는, 그 다른 구성 요소 에 직접적으로 연결되어 있거나 또는 접속되어 있을 수도 있지만, 중간에 다른 구성 요소가 존재할 수도 있다. 반면에, 어떤 구성 요소가 다른 구성 요소에 \"'직접 연결되어' 있다거나 '직접 접속되어' 있다고 언급된 때에는, 중간에 다른 구성 요소가 존재하지 않는 것으로 이해되어야 할 것이다. 이하, 첨부된 도면을 참조하여 본 발명에 따른 바람직한 실시예를 상세히 설명하되, 도면 부호에 관계없이 동일 하거나 유사한 구성 요소는 동일한 참조 번호를 부여하고 이에 대한 중복되는 설명은 생략하기로 한다. 또한, 본 발명을 설명함에 있어서 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 흐릴 수 있다고 판단되 는 경우 그 상세한 설명을 생략한다. 또한, 첨부된 도면은 본 발명의 사상을 쉽게 이해할 수 있도록 하기 위한 것일 뿐, 첨부된 도면에 의해 본 발명의 사상이 제한되는 것으로 해석되어서는 아니 됨을 유의해야 한다. 본 발 명의 사상은 첨부된 도면 외에 모든 변경, 균등물 내지 대체물에 까지도 확장되는 것으로 해석되어야 한다. 한편 MMS는 차량에 장착되어 차량의 운행과 함께 도로 주변에 있는 지형지물의 위치측정 및 시각정보를 획득하 도록 이루어진다. 즉, MMS는 차체의 위치와 자세정보를 취득하기 위한 GPS(Global Positioning System), 관성 항법 장치(Inertial Navigation System; INS), 관성 측정 장치(Inertial Measurement Unit; IMU), 지형지물의 형상과 정보를 수집하기 위한 카메라, 라이다(Light Detection and Ranging, LiDAR) 센서 및 기타 센서에 의해 수집된 정보들을 기반으로 생성될 수 있다. 이 중에서, 라이다(LiDAR)는 고출력 레이저 펄스를 발사해 레이저가 목표물에 반사되어 되돌아오는 시간을 측정 하여 사물로부터의 거리, 형태를 나타내는 3D 데이터를 획득할 수 있다. 그러나, MMS에 사용되는 라이다는 도로 상에서 이동하는 차량에 설치되어 실시간으로 3차원 데이터를 획득하므 로, 3D 데이터를 획득하는 과정에서 라이다의 위치가 변화됨에 따라 오차가 존재할 수 있다. 또한, MMS는 라이다에 의해 수집된 데이터와 다른 센서에 의해 수집된 데이터를 종합 반영하는 과정에서도, 센 서들의 설치 위치 및 이동량에 따른 오차가 존재할 수 있다. 그리고, 이러한 오차들은 생성된 정밀도로지도의 정확도를 감소시키는 문제점이 있었다. 이러한 한계를 극복하고자, 본 발명은 라이다를 통해 수집한 3D 점군 데이터를 이용하여 3D 지도를 생성하는 과 정에서 발생되는 오류를 최소화할 수 있는 다양한 수단들을 제안하고자 한다. 이하, 상술한 바와 같은 특징을 가지는 본 발명의 다양한 실시예들에 대하여 보다 구체적으로 설명하기로 한다. 도 1은 본 발명의 일 실시예에 따른 지도 생성 시스템의 구성도이다. 도 1에 도시된 바와 같이, 본 발명의 일 실시예에 따른 지도 생성 시스템은 데이터 수집 장치 및 지도 생 성 장치를 포함하여 구성될 수 있다. 이와 같은, 일 실시예에 따른 지도 생성 시스템의 구성 요소들은 기능적으로 구분되는 요소들을 나타낸 것에 불 과하므로, 둘 이상의 구성 요소가 실제 물리적 환경에서는 서로 통합되어 구현되거나, 하나의 구성 요소가 실제 물리적 환경에서는 서로 분리되어 구현될 수 있을 것이다. 각각의 구성 요소에 대하여 설명하면, 데이터 수집 장치는 차량에 고정 설치되어, 3D 지도 생성에 사 용될 수 있는 데이터를 수집하기 위하여, 라이다(lidar, 110), INS(Inertial Navigation System, 120) 및 GPS(Global Positioning System, 130)를 포함할 수 있다. 여기서, 데이터 수집 장치에 포함된 라이다는 차량에 고정 설치되어, 차량의 주위로 레이저 펄스를 발사하고, 차량 주위에 위치하는 개체들에 의해 반사되어 돌아온 빛을 감지하여, 차량 주위에 대한 3차원 영상에 해당하는 3D 점군 데이터를 생성할 수 있다. 따라서, 라이다에 의해 획득된 3D 점군 데 이터는 라이다에 의해 3차원 공간으로 발사된 레이저 펄스를 반사시킨 점들(point)의 집합을 포함할 수 있 다. 한편, INS는 관성센서(IMU)인 자이로 센서와 가속도 센서로 측정되는 가속도와 각속도를 이용하여, 상대위 치, 실시간 속도 및 자세에 대한 정보를 계산하는 시스템이다. 이러한, INS는 가속도 센서와 자이로 센서 의 입력 값을 적분해 자세와 속도를 계산하기 때문에 시간이 지날수록 오차가 누적되는 단점이 있다. 반면에, GPS는 위성을 이용해 지구상의 절대적인 위치를 계산하는 전파 항법 시스템으로, INS와는 달리 단시간의 항법 오차는 크지만 시간이 지나도 오차가 누적되지 않는 장점을 가지고 있다. 이에 따라, 데이터 수집 장치는 INS로부터 상대위치, 자세 및 속도를 수집하고, GPS로부터 절대 위치를 수집하여, 지도 생성 장치에 전송할 수 있다. 이에 따라, 데이터 수집 장치는 지도 생성 장치 가가 INS로부터 수집한 상대위치를 GPS의 절대위치로 보완한 융합 데이터를 생성하도록 할 수 있다. 다음 구성으로, 지도 생성 장치는 데이터 수집 장치로부터 라이다, INS 및 GPS로부터 수집된 데이터를 수신하고, 수신된 데이터를 이용하여 3D 지도를 생성하는데 사용될 수 있는 장치이다. 이와 같은, 지도 생성 장치는 기본적으로 데이터 수집 장치와 구분되는 장치이나, 실제 물리적 환경 에서 데이터 수집 장치와 하나의 장치로 통합되어 구현될 수도 있다. 즉, 지도 생성 장치는 데이터 수집 장치와 통합되어, 3D 지도 생성을 위한 데이터를 수집하고, 자체적으로 수집된 데이터를 이용하여 3D 지도를 생성할 수 있다. 특징적으로, 본 발명의 실시예에 따른 지도 생성 장치는 위치가 실시간으로 변화되는 라이다(LiDAR)를 통 해 실시간으로 수집된 3D 점군 데이터를 대상으로 위치의 변화에 따른 오차를 보정하고, 보정된 3D 점군 데이터 를 기초로, 위치의 변화와 관련된 예상 궤적(odometry)을 추정하고, 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용하고, 커브 피팅이 적용된 예상 궤적을 대상으로 커브 피팅 전 예상 궤적을 맵핑(mapping)할 수 있다. 여기서, 커브 피팅은 추정된 예상 궤적을 표현할 수 있는 가장 이상적인 직선 또는 곡선으로 생성할 수 있는 알 고리즘이다. 즉, 본 발명의 실시예에 따른 지도 생성 장치는 수집된 3D 점군 데이터에 커브 피팅을 적용하 여, 3D 점군 데이터에 대하여 보간(interpolation) 및 평활(smoothing) 효과를 얻을 수 있다. 이와 같은, 지도 생성 장치는 데이터 수집 장치와 데이터를 송수신하고, 송수신된 데이터를 기초로 연산을 수행할 수 있는 장치라면 어떠한 장치라도 허용될 수 있다. 예를 들어, 지도 생성 장치는 데스크탑 (desktop), 워크스테이션(workstation) 또는 서버(server)와 같은 고정식 컴퓨팅 장치 중 어느 하나가 될 수 있 으나, 이에 한정되는 것은 아니다.지금까지 상술한 바와 같은, 데이터 수집 장치 및 지도 생성 장치는 장치들 사이를 직접 연결하는 보 안 회선, 공용 유선 통신망 또는 이동 통신망 중 하나 이상이 조합된 네트워크를 이용하여 데이터를 송수신할 수 있다. 예를 들어, 공용 유선 통신망에는 이더넷(ethernet), 디지털가입자선(x Digital Subscriber Line, xDSL), 광동 축 혼합망(Hybrid Fiber Coax, HFC), 광가입자망(Fiber To The Home, FTTH)가 포함될 수 있으나, 이에 한정되 는 것도 아니다. 그리고, 이동 통신망에는 코드 분할 다중 접속(Code Division Multiple Access, CDMA), 와이 드 밴드 코드 분할 다중 접속(Wideband CDMA, WCDMA), 고속 패킷 접속(High Speed Packet Access, HSPA), 롱텀 에볼루션(Long Term Evolution, LTE), 5세대 이동통신(5th generation mobile telecommunication)가 포함될 수 있으나, 이에 한정되는 것은 아니다. 이하, 본 발명의 일 실시예에 따른 지도 생성 장치의 논리적 구성에 대하여 상세히 설명하도록 한다. 도 2는 본 발명의 일 실시예에 따른 지도 생성 장치의 논리적 구성도이다. 도 2에 도시된 바와 같이, 본 발명의 일 실시예에 따른 지도 생성 장치는 통신부, 입출력부, 저 장부, 오차 보정부, 궤적 추정부, 궤적 보정부, 궤적 맵핑부 및 3D 지도 생성부 를 포함하여 구성될 수 있다. 이와 같은, 지도 생성 장치의 구성 요소들은 기능적으로 구분되는 요소들을 나타낸 것에 불과하므로, 둘 이상의 구성 요소가 실제 물리적 환경에서는 서로 통합되어 구현되거나, 하나의 구성 요소가 실제 물리적 환경 에서는 서로 분리되어 구현될 수 있을 것이다. 각각의 구성 요소에 대하여 설명하면, 통신부는 데이터 수집 장치로부터 라이다를 이용하여 생 성된 3D 점군 데이터, INS로부터 생성된 상대위치, 자세 및 속도 값, GPS로부터 생성된 절대위치 값 을 수신할 수 있다. 그리고, 통신부는 생성된 3D 지도 전체 또는 일부를 자율주행을 위한 복수의 차량에 전송할 수 있다. 다음 구성으로, 입출력부는 사용자 인터페이스(UI)를 통해 사용자로부터 신호를 입력 받거나, 연산 결과를 외부로 출력할 수 있다. 구체적으로, 입출력부는 사용자로부터 오차 보정, 궤적 추정, 궤적 보정, 궤적 매핑 및 3D 지도 생성을 위 한 제어 신호를 입력 받을 수 있다. 즉, 입출력부는 3D 점군 데이터의 오차를 보정하기 위한 제어 신호, 예상 궤적을 추정하기 위한 제어 신호, 추정된 예상 궤적에 커브 피팅을 적용하기 위한 제어 신호, 커브 피팅 적용된 예상 궤적과 매핑하기 위한 제어 신호 등을 입력 받을 수 있다. 다음 구성으로, 저장부는 통신부를 통해 수신된 3D 점군 데이터, INS 및 GPS의 위치, 자세 및 속도 값을 저장할 수 있다. 또한, 저장부는 3D 점군 데이터의 오차를 보정하기 위한 프로그램, 예상 궤 적을 추정하기 위한 프로그램, 추정된 예상 궤적에 커브 피팅을 적용하기 위한 프로그램, 커브 피팅 적용된 예 상 궤적과 매핑하기 위한 프로그램 등을 입력 받을 수 있다. 한편, 데이터 수집 장치는 차량을 통해 이동하면서, 라이다로부터 3D 점군 데이터를 수집하게 된 다. 이때, 수집되는 3D 점군 데이터는 각 지점의 상대 좌표를 기준으로 생성된다. 따라서, 복수의 3D 점군 데이 터들을 동일한 좌표계로 변환시키기 위해서는 라이다의 궤적(odometry)을 정확히 알아야 한다. 여기서, 라 이다의 궤적을 알기 위해서는 라이다의 위치 정보가 필요하다. 오차 보정부는 위치가 실시간으로 변화되는 라이다(LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대 상으로 위치의 변화에 따른 오차를 보정할 수 있다. 즉, 오차 보정부는 3D 점군 데이터와 동시에 수집된 INS 및 GPS 데이터를 기반으로, 위치의 변화에 따른 3D 점군 데이터의 오차를 보정할 수 있다. 구체적으로, 오차 보정부는 INS 데이터에 포함된 상대위치를 GPS 데이터의 절대 위치로 보완한 융합 데이터를 생성할 수 있다. 그리고, 오차 보정부는 라이다의 위치와 가장 가까운 융합 데이터를 탐색하고, 3D 점군 데이터 및 융합 데이터가 수집된 시간 정보를 기초로, 라이다의 위치 변환에 따른 3D 점군 데이터의 오차를 보정할 수 있다. 예를 들어, 오차 보정부는 하기의 의사 코드(pseudo code)를 이용하여, 3D 점군 데이터의 오차를 보정할 수 있다. 반복문(라이다 한 프레임에 해당하는 점에 대해서 반복) 현재 라이다 포인트와 가장 가까운 경로 데이터(INS/GPS) 탐색 timeDiff = (현재 라이다 포인트 데이터 시간) - (현재 INS/GPS 데이터 시간) pt_easting = INS_easting + INS_eastingVelocity * timeDiff pt_northing = INS_northing + INS_northingVelocity * timeDiff pt_up = INS_up + INS_upVelocity * timeDiff 여기서, INS/GPS는 융합 데이터를 의미하며, INS_접두사가 붙은 변수는 융합 데이터의 위치 및 속도 데이터가 될 수 있다. 다음 구성으로, 궤적 추정부는 오차 보정부에 의해 보정된 3D 점군 데이터의 예상 궤적(odometry)을 추정할 수 있다. 여기서, 예상 궤적은 각 프레임의 위치를 의미하는 포인트가 될 수 있다. 구체적으로, 궤적 추정부는 3D 점군 데이터 및 융합 데이터를 복셀(voxel) 공간에 표현하고, 각 복셀에 포 함된 포인트 그룹을 가우시안 분포로 근사화하여 예상 궤적을 추정할 수 있다. 즉, 궤적 추정부는 NDT(Normal Distribution Transform) 매칭 알고리즘을 이용하여 예상 궤적을 추정한다. 여기서, NDT 알고리즘은 3D 공간에서 복셀(voxel) 공간 인덱싱(indexing)을 처리하고, 각 복셀의 포인트 그룹을 3D 가우시안 분포로 근사하여 ICP(iterative closest points) 알고리즘과 대비하여 상대적으로 빠른 계산 속도 를 얻을 수 있다. 이후, 궤적 추정부는 추정된 예상 궤적의 좌표를 융합 데이터의 좌표로 변환할 수 있다. 즉, 추정된 예상 궤적은 월드 좌표계상의 라이다를 위치를 나타낸다. 따라서, 궤적 추정부는 월드 좌표계상의 라이다 의 위치를 융합 데이터의 위치로 변환할 수 있다. 이때, 궤적 추정부는 라이다의 자세에 대한 회전 행렬 및 이동 행렬을 통해 추정된 예상 궤적의 좌표 를 융합 데이터의 좌표로 변환할 수 있다. 예를 들어, 궤적 추정부는 하기의 수학식 1을 통해 라이다의 위치를 융합 데이터(INS/GPS)의 위치로 변환할 수 있다. 먼저 CurLiDARPose는 3x1 Matrix(roll, pitch, yaw)로, CurLiDARPosition는 3x1 Matrix(easting, northing, up)로 INS/GPS_Position은 3x1 Matrix(easting, northing, up)로 표현할 수 있다. [수학식 1] INS/GPSPosition = RotationMatrix(CurLiDARPoseroll, CurLiDARPosepitch, CuLiDARPoseyaw) * TL2I + CurLiDARPosition 여기서, TL2I는 3x1 matrix(LiDAR to IMU translation)가 될 수 있다. 이때, CurLiDARPose는 하기의 수학식 2와 같이, 오일러각(euler angle)을 이용한 Rotation Matrix로 표현할 수 있다. Z축 회전을 α, y축 회전을 β, z축 회전을 γ로 놓았을 때(α, β, γ: Radian) [수학식 2]"}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "다음 구성으로, 궤적 보정부는 궤적 추정부에 의해 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용할 수 있다.즉, 본 발명의 실시예에 따른 지도 생성 장치는 수집된 3D 점군 데이터에 커브 피팅을 적용하여, 3D 점군 데이터에 대하여 보간(interpolation) 및 평활(smoothing) 효과를 얻을 수 있다. 이때, 궤적 보정부는 베지어 커브 피팅(Bezier Curve Fitting) 알고리즘을 통해 추정된 예상 궤적에 커브 피팅을 적용할 수 있다. 즉, 궤적 보정부는 복수의 포인트를 포함하는 예상 궤적으로부터 곡선을 형성할 수 있다. 궤적 보정부는 하기의 수학식 3을 이용하여 곡선을 형성할 수 있다. [수학식 3]"}
{"patent_id": "10-2022-0181018", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "여기서, B(u)는 베지어 커브 함수를 의미하고, Pk는 예상 궤적의 각 포인트의 좌표를 의미하고, N은 포인트의 개수를 의미하고, u는 포인트 간의 상수비를 의미한다. 또한, 궤적 보정부는 커브 피팅 적용된 예상 궤적에 업 샘플링(up sampling)을 수행하고, 업 샘플링 된 포 인트에 타임 스탬프(time stamp)를 부여할 수 있다. 여기서, 궤적 보정부는 업 샘플링 된 포인트에 타임 스탬프를 사전 설정된 간격으로 균등하게 부여할 수 있다. 즉, 궤적 보정부는 커브 피팅 적용된 예상 궤적 에 시간을 기준으로 일정 간격으로 포인트를 생성하고, 생성된 포인트에 시간과 관련한 정보를 입력할 수 있다. 다음 구성으로, 궤적 맵핑부는 궤적 보정부에 의해 생성된 타임 스탬프를 기준으로, 커브 피팅 전 예 상 궤적에 포함된 포인트를 커브 피팅 적용된 예상 궤적에 포함된 포인트로 위치 좌표를 수정할 수 있다. 이때, 궤적 맵핑부는 커브 피팅 전 예상 궤적에 포함된 포인트를 커브 피팅 적용된 예상 궤적에 포함된 포인트로 위치 좌표를 수정할 수 있다. 즉, 궤적 맵핑부는 보정 전 궤적의 각 포인트를 순회하며 가장 가까운 타임 스탬프를 가진 포인트 위치의 easting, northing 및 up 값들을 읽어와 궤적의 위치좌표를 수정할 수 있다. 다음 구성으로, 3D 지도 생성부는 궤적 맵핑부에 의해 최종 생성된 궤적을 참조하여, 각 지점에서의 3D 점군 데이터를 표준 좌표계로 통일하고, 중첩시켜 3D 지도를 생성할 수 있다. 이하, 본 발명의 일 실시예에 따른 지도 생성 장치의 논리적 구성요소를 구현하기 위한 하드웨어에 대하여 보다 구체적으로 설명한다. 도 3은 본 발명의 일 실시예에 따른 지도 생성 장치의 하드웨어 구성도이다. 도 3에 도시된 바와 같이, 지도 생성 장치는 프로세서(Processor, 250), 메모리(Memory, 255), 송수신기 (Transceiver, 260), 입출력장치(Input/output device, 265), 데이터 버스(Bus, 270) 및 스토리지(Storage, 275)를 포함하여 구성될 수 있다. 프로세서는 메모리에 상주된 본 발명의 실시예들에 따른 방법이 구현된 소프트웨어(280a)에 따른 명 령어를 기초로, 지도 생성 장치의 동작 및 기능을 구현할 수 있다. 메모리에는 본 발명의 실시예들에 따른 방법이 구현된 소프트웨어(280a)가 상주(loading)될 수 있다. 송수신기는 데이터 수집 장치와 데이터를 송수신할 수 있다. 입출력장치는 지도 생성 장치의 동작에 필요한 데이터를 입력 받고, 수 집된 점군 데이터, 생성된 3D 지도 등을 출력할 수 있다. 데이터 버스는 프로세서, 메모리, 송 수신기, 입출력장치 및 스토리지와 연결되어, 각각의 구성 요소 사이가 서로 데이터를 전달하기 위한 이동 통로의 역할을 수행할 수 있다. 스토리지는 본 발명의 실시예들에 따른 방법이 구현된 소프트웨어(280a)의 실행을 위해 필요한 애플리케이 션 프로그래밍 인터페이스(Application Programming Interface, API), 라이브러리(library) 파일, 리소스 (resource) 파일 등을 저장할 수 있다. 스토리지는 본 발명의 실시예들에 따른 방법이 구현된 소프트웨어 (280b)를 저장할 수 있다. 또한, 스토리지는 본 발명의 실시예들에 따른 방법의 수행에 필요한 정보들을 저장할 수 있다. 본 발명의 일 실시예에 따르면, 메모리에 상주되거나 또는 스토리지에 저장된, 가이드 제공 방법을 구현하기 위한 소프트웨어(280a, 280b)는 프로세서가 위치가 실시간으로 변화되는 라이다(LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상으로 위치의 변화에 따른 오차를 보정하고, 보정된 3D 점군 데이터를 기초로, 위치의 변화와 관련된 예상 궤적을 추정하고, 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용하고, 커브 피팅이 적용된 예상 궤적을 대상으로 커브 피팅 전 예상 궤적을 맵핑(mapping)하는 단계를 실행시키기 위하여, 기록매체에 기록된 컴퓨터 프로그램이 될 수 있다. 보다 구체적으로, 프로세서는 ASIC(Application-Specific Integrated Circuit), 다른 칩셋(chipset), 논 리 회로 및/또는 데이터 처리 장치를 포함할 수 있다. 메모리는 ROM(Read-Only Memory), RAM(Random Access Memory), 플래쉬 메모리, 메모리 카드, 저장 매체 및/또는 다른 저장 장치를 포함할 수 있다. 송수신기 는 유무선 신호를 처리하기 위한 베이스밴드 회로를 포함할 수 있다. 입출력장치는 키보드 (keyboard), 마우스(mouse), 및/또는 조이스틱(joystick) 등과 같은 입력 장치 및 액정표시장치(Liquid Crystal Display, LCD), 유기 발광 다이오드(Organic LED, OLED) 및/또는 능동형 유기 발광 다이오드(Active Matrix OLED, AMOLED) 등과 같은 영상 출력 장치 프린터(printer), 플로터(plotter) 등과 같은 인쇄 장치를 포 함할 수 있다. 본 명세서에 포함된 실시 예가 소프트웨어로 구현될 경우, 상술한 방법은 상술한 기능을 수행하는 모듈(과정, 기능 등)로 구현될 수 있다. 모듈은 메모리에 상주되고, 프로세서에 의해 실행될 수 있다. 메모리 는 프로세서의 내부 또는 외부에 있을 수 있고, 잘 알려진 다양한 수단으로 프로세서와 연결될 수 있다. 도 3에 도시된 각 구성요소는 다양한 수단, 예를 들어, 하드웨어, 펌웨어(firmware), 소프트웨어 또는 그것들의 결합 등에 의해 구현될 수 있다. 하드웨어에 의한 구현의 경우, 본 발명의 일 실시예는 하나 또는 그 이상의 ASICs(Application Specific Integrated Circuits), DSPs(Digital Signal Processors), DSPDs(Digital Signal Processing Devices), PLDs(Programmable Logic Devices), FPGAs(Field Programmable Gate Arrays), 프로세서, 콘트롤러, 마이크로 콘트롤러, 마이크로 프로세서 등에 의해 구현될 수 있다. 또한, 펌웨어나 소프트웨어에 의한 구현의 경우, 본 발명의 일 실시예는 이상에서 설명된 기능 또는 동작들을 수행하는 모듈, 절차, 함수 등의 형태로 구현되어, 다양한 컴퓨터 수단을 통하여 판독 가능한 기록매체에 기록 될 수 있다. 여기서, 기록매체는 프로그램 명령, 데이터 파일, 데이터 구조 등을 단독으로 또는 조합하여 포함 할 수 있다. 기록매체에 기록되는 프로그램 명령은 본 발명을 위하여 특별히 설계되고 구성된 것들이거나 컴퓨 터 소프트웨어 당업자에게 공지되어 사용 가능한 것일 수도 있다. 예컨대 기록매체는 하드 디스크, 플로피 디스 크 및 자기 테이프와 같은 자기 매체(Magnetic Media), CD-ROM(Compact Disk Read Only Memory), DVD(Digital Video Disk)와 같은 광 기록 매체(Optical Media), 플롭티컬 디스크(Floptical Disk)와 같은 자기-광 매체 (Magneto-Optical Media), 및 롬(ROM), 램(RAM), 플래시 메모리 등과 같은 프로그램 명령을 저장하고 수행하도 록 특별히 구성된 하드웨어 장치를 포함한다. 프로그램 명령의 예에는 컴파일러에 의해 만들어지는 것과 같은 기계어 코드뿐만 아니라 인터프리터 등을 사용해서 컴퓨터에 의해서 실행될 수 있는 고급 언어 코드를 포함할 수 있다. 이러한, 하드웨어 장치는 본 발명의 동작을 수행하기 위해 하나 이상의 소프트웨어로서 작동하도록 구 성될 수 있으며, 그 역도 마찬가지이다. 이하, 본 발명의 일 실시예에 따른 지도 생성 방법에 대하여 구체적으로 설명하도록 한다. 도 4는 본 발명의 일 실시예에 따른 지도 생성 방법을 설명하기 위한 순서도이다. 도 4를 참조하면, 본 발명의 일 실시예에 따른 지도 생성 장치는 위치가 실시간으로 변화되는 라이다 (LiDAR)를 통해 실시간으로 수집된 3D 점군 데이터를 대상으로 상기 위치의 변화에 따른 오차를 보정할 수 있다 (S100). 즉, 지도 생성 장치는 3D 점군 데이터와 동시에 수집된 INS 및 GPS 데이터를 기반으로, 위치의 변화에 따른 3D 점군 데이터의 오차를 보정할 수 있다. 구체적으로, 지도 생성 장치는 INS 데이터에 포함된 상대위치를 GPS 데이터의 절대 위치로 보완한 융합 데 이터를 생성할 수 있다. 그리고, 지도 생성 장치는 라이다의 위치와 가장 가까운 융합 데이터를 탐색 하고, 3D 점군 데이터 및 융합 데이터가 수집된 시간 정보를 기초로, 위치의 변환에 따른 3D 점군 데이터의 오 차를 보정할 수 있다. 다음으로, 지도 생성 장치는 S100 단계에 의해 보정된 3D 점군 데이터의 예상 궤적(odometry)을 추정할 수 있다(S200). 구체적으로, 지도 생성 장치는 3D 점군 데이터 및 융합 데이터를 복셀(voxel) 공간에 표현하고, 각 복셀에 포함된 포인트 그룹을 가우시안 분포로 근사화하여 예상 궤적을 추정할 수 있다. 즉, 지도 생성 장치는NDT(Normal Distribution Transform) 매칭 알고리즘을 이용하여 예상 궤적을 추정한다. 이후, 지도 생성 장치는 추정된 예상 궤적의 좌표를 융합 데이터의 좌표로 변환할 수 있다. 즉, 추정된 예 상 궤적은 월드 좌표계상의 라이다를 위치를 나타낸다. 따라서, 지도 생성 장치는 융합 데이터와의 위치 관계를 이용하여 월드 좌표계상의 라이다의 위치에서 융합 데이터의 위치로 변환할 수 있다. 이때, 지도 생성 장치는 라이다의 자세에 대한 회전 행렬 및 이동 행렬을 통해 추정된 예상 궤적의 좌표를 융합 데이터의 좌표로 변환할 수 있다. 다음으로, 지도 생성 장치는 S200 단계에 의해 추정된 예상 궤적에 커브 피팅(curve fitting)을 적용할 수 있다(S300). 즉, 지도 생성 장치는 수집된 3D 점군 데이터에 커브 피팅을 적용하여, 3D 점군 데이터에 대 하여 보간(interpolation) 및 평활(smoothing) 효과를 얻을 수 있다. 이때, 지도 생성 장치는 베지어 커 브 피팅(Bezier Curve Fitting) 알고리즘을 통해 추정된 예상 궤적에 커브 피팅을 적용할 수 있다. 또한, 지도 생성 장치는 커브 피팅 적용된 예상 궤적에 업 샘플링(up sampling)을 수행하고, 업 샘플링 된 포인트에 타임 스탬프(time stamp)를 부여할 수 있다. 여기서, 지도 생성 장치는 업 샘플링 된 포인트에 타임 스탬프를 사전 설정된 간격으로 균등하게 부여할 수 있다. 즉, 지도 생성 장치는 커브 피팅 적용된 예상 궤적에 시간을 기준으로 일정 간격으로 포인트를 생성하고, 생성된 포인트에 시간과 관련한 정보를 입력할 수 있다. 다음으로, 지도 생성 장치는 S300 단계에 의해 생성된 타임 스탬프를 기준으로, 커브 피팅 전 예상 궤적에 포함된 포인트를 커브 피팅 적용된 예상 궤적에 포함된 포인트로 위치 좌표를 수정할 수 있다. 이때, 지도 생성 장치는 커브 피팅 전 예상 궤적에 포함된 포인트를 커브 피팅 적용된 예상 궤적에 포함된 포인트로 위치 좌표만을 수정하고, 자세 및 속도 데이터는 유지할 수 있다. 그리고, 지도 생성 장치는 S400 단계에 의해 최종 생성된 궤적을 참조하여, 각 지점에서의 3D 점군 데이터 를 표준 좌표계로 통일하고, 중첩시켜 3D 지도를 생성할 수 있다. 도 5 및 도 6은 본 발명의 일 실시예에 따른 라이다의 위치 변화에 의한 오차 보정을 수행하기 전과 후의 3D 점 군 데이터를 bird's eye view로 시각화한 도면이다. 한편, 본 발명의 일 실시예에 따른 데이터 수집 장치의 라이다는 차량에 탑재되어 이동하면서 3D 점군 데이터를 수집한다. 그러나, 데이터 처리 과정에서는 하나의 프레임을 동일한 위치에 있다는 가정 하에 처리를 수행하게 된다. 즉, 하나의 프레임 내에서는 라이다의 위치 변화를 고려하지 않고 포인트들이 배치된다. 이에 따라, 도 5의 a와 같이, 하나의 프레임 내에서 3D 점군 데이터는 시작되는 포인트와, 마지막 포인트가 일 치하는 것으로 나타난다. 그러나, 실질적으로 3D 점군 데이터는 위치 변화에 따라 시작되는 포인트와, 마지막 포인트가 일치하지 않는다. 이에 따라, 본 발명의 일 실시예에 따른 지도 생성 장치는 3D 점군 데이터와 동시에 수집된 INS 및 GPS 데이터를 기반으로, 라이다의 위치 변화에 따른 3D 점군 데이터의 오차를 보정할 수 있다. 구체적으로, 지도 생성 장치는 INS 데이터에 포함된 상대위치를 GPS 데이터의 절대위치로 보완 한 융합 데이터를 생성할 수 있다. 그리고, 지도 생성 장치는 라이다의 위치와 가장 가까운 융합 데 이터를 탐색하고, 3D 점군 데이터 및 융합 데이터가 수집된 시간 정보를 기초로, 위치의 변환에 따른 3D 점군 데이터의 오차를 보정할 수 있다. 즉, 도 6의 b와 같이, 지도 생성 장치는 오차 보정을 통하여 라이다의 위치 변화를 고려한 3D 점군 데이터를 얻을 수 있다. 도 7은 본 발명의 일 실시예에 따른 궤적 보정 방법을 설명하기 위한 예시도이다. 도 7을 참조하면, 지도 생성 장치는 추정된 예상 궤적(localizing result)에 커브 피팅(curve fitting)을 적용하여 커브 피팅 결과물인 곡선(curve fitting result)을 얻을 수 있다.즉, 지도 생성 장치는 수집된 3D 점군 형태의 예상 궤적(localizing result)에 커브 피팅을 적용하여, 3D 점군 데이터에 대하여 보간(interpolation) 및 평활(smoothing) 효과를 얻을 수 있다. 또한, 지도 생성 장치는 커브 피팅 적용된 예상 궤적(localizing result)에 업 샘플링(up sampling)을 수 행할 수 있다. 그리고, 지도 생성 장치는 업 샘플링 된 포인트(sampling point from curve)에 타임 스탬 프(time stamp)를 부여할 수 있다. 여기서, 지도 생성 장치는 업 샘플링 된 포인트(sampling point from curve)에 타임 스탬프를 사전 설정된 간격으로 균등하게 부여할 수 있다. 그리고, 지도 생성 장치는 생성된 타임 스탬프를 기준으로, 커브 피팅 전 예상 궤적에 포함된 포인트 (INS/GPS position point)를 커브 피팅 적용된 예상 궤적에 포함된 포인트(sampling point from curve)로 위치 좌표를 수정(position change)할 수 있다. 도 8은 본 발명의 일 실시예에 따른 궤적 보정 방법에 따른 효과를 설명하기 위한 예시도이다. 본 발명의 실시 예들에 따르면, 라이다를 통해 수집한 3D 점군 데이터의 오차를 보정하고, 오차 보정된 3D 점군 데이터를 통해 추정된 예상 궤적에 커브 피팅을 적용하여 맵핑(mapping)한 궤적을 통해 3D 지도를 생성함으로써, 3D 지도를 생성하는 과정에서 발생되는 오류를 최소화할 수 있다. 도 8은 본 발명의 일 실시예에 따른 궤적 보정 방법으로 3D 점군 지도를 생성하였을 때와, 이를 적용하지 않았 을 경우 결과를 side view로 시각화한 것이다. 즉, 도 8에 도시된 바와 같이, 지도 생성 장치는 궤적 보정 방법을 수행함에 따라, 측위 결과를 반영한 데 이터(b)를 얻을 수 있고, 보정 전 데이터(c)와 대비하여, 기준 데이터(a)와 상당히 유사한 결과를 얻을 수 있었 다. 이상과 같이, 본 명세서와 도면에는 본 발명의 바람직한 실시예에 대하여 개시하였으나, 여기에 개시된 실시예 외에도 본 발명의 기술적 사상에 바탕을 둔 다른 변형 예들이 실시 가능하다는 것은 본 발명이 속하는 기술 분 야에서 통상의 지식을 가진 자에게 자명한 것이다. 또한, 본 명세서와 도면에서 특정 용어들이 사용되었으나, 이는 단지 본 발명의 기술 내용을 쉽게 설명하고 발명의 이해를 돕기 위한 일반적인 의미에서 사용된 것이지, 본 발명의 범위를 한정하고자 하는 것은 아니다. 따라서, 상술한 상세한 설명은 모든 면에서 제한적으로 해석되 어서는 아니되고 예시적인 것으로 고려되어야 한다. 본 발명의 범위는 첨부된 청구항의 합리적해석에 의해 선정 되어야 하고, 본 발명의 등가적 범위 내에서의 모든 변경은 본 발명의 범위에 포함된다."}
{"patent_id": "10-2022-0181018", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 지도 생성 시스템의 구성도이다. 도 2는 본 발명의 일 실시예에 따른 지도 생성 장치의 논리적 구성도이다. 도 3은 본 발명의 일 실시예에 따른 지도 생성 장치의 하드웨어 구성도이다. 도 4는 본 발명의 일 실시예에 따른 지도 생성 방법을 설명하기 위한 순서도이다. 도 5는 본 발명의 일 실시예에 따른 라이다의 위치 변화에 의한 오차 보정을 수행 전 3D 점군 데이터를 bird's eye view로 시각화한 도면이다. 도 6은 본 발명의 일 실시예에 따른 라이다의 위치 변화에 의한 오차 보정을 수행 후 3D 점군 데이터를 bird'seye view로 시각화한 도면이다. 도 7은 본 발명의 일 실시예에 따른 궤적 보정 방법을 설명하기 위한 예시도이다. 도 8은 본 발명의 일 실시예에 따른 궤적 보정 방법에 따른 효과를 설명하기 위한 예시도이다."}
