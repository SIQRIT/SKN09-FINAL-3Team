{"patent_id": "10-2023-0037920", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0139344", "출원번호": "10-2023-0037920", "발명의 명칭": "초음파 이미징에서의 인공 신경망 기반 수신 빔포밍 방법, 그리고 이를 구현한 신호 처리 장", "출원인": "한국과학기술원", "발명자": "배현민"}}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "관심 영역의 음속도 분포를 나타내는 음속도 맵으로부터 상기 관심 영역에 대한 초음파 프로브의 트랜스듀서 요소별 시간 지연을 예측하는 시간 지연 예측기, 그리고상기 초음파 프로브에서 수신된 RF 신호들에 해당 트랜스듀서 요소에 대해 예측된 시간 지연을 적용해서 빔포밍된 RF 데이터를 출력하는 수신 빔포머를 포함하는 신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에서,상기 초음파 프로브에서 수신된 RF 신호들을 기초로 상기 관심 영역의 음속도 맵을 생성하는 음속도 분포 구축기를 더 포함하는 신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에서,상기 시간 지연 예측기는상기 음속도 맵으로부터 상기 트랜스듀서 요소별 시간 지연을 예측하도록 훈련된 인공 신경망을 포함하는, 신호처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제3항에서,상기 인공 신경망은상기 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 상기 압축된 특징 맵을 디코딩하여 상기 트랜스듀서요소별 시간 지연이 조합된 지연 행렬을 출력하는, 신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에서,상기 인공 신경망은전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터를 사용하여 상기 음속도 맵을 인코딩하는,신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에서,상기 빔포밍된 RF 데이터는 초음파 이미지를 생성하는데 사용되는, 신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "신호 처리 장치의 동작 방법으로서,인공 신경망을 이용하여, 관심 영역의 음속도 분포를 나타내는 음속도 맵으로부터 상기 관심 영역에 대한 초음파 프로브의 트랜스듀서 요소별 시간 지연을 예측하는 단계, 그리고공개특허 10-2023-0139344-3-상기 초음파 프로브에서 수신된 RF 신호들에 해당 트랜스듀서 요소에 대해 예측된 시간 지연을 적용해서 빔포밍된 RF 데이터를 출력하는 단계를 포함하는 동작 방법."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제7항에서,상기 초음파 프로브에서 수신된 RF 신호들을 기초로 상기 관심 영역의 음속도 맵을 생성하는 단계를 더 포함하는 동작 방법."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제7항에서,상기 인공 신경망은상기 음속도 맵으로부터 상기 트랜스듀서 요소별 시간 지연을 예측하도록 훈련된 인공지능 모델인, 동작 방법."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에서,상기 인공 신경망은상기 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 상기 압축된 특징 맵을 디코딩하여 상기 트랜스듀서요소별 시간 지연이 조합된 지연 행렬을 출력하는, 동작 방법."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제10항에서,상기 인공지능 모델은전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터를 사용하여 상기 음속도 맵을 인코딩하는,동작 방법."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제7항에서,상기 빔포밍된 RF 데이터는 초음파 이미지를 생성하는데 사용되는, 동작 방법."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "초음파 프로브에서 수신된 RF 신호들을 기초로 관심 영역의 음속도 분포를 나타내는 음속도 맵을 생성하는 제1인공 신경망, 상기 음속도 맵으로부터 상기 관심 영역에 대한 초음파 프로브의 트랜스듀서 요소별 시간 지연을 예측하는 제2인공 신경망, 그리고상기 제2 인공 신경망에서 예측된 시간 지연을, 상기 초음파 프로브에서 수신된 RF 신호들에 적용해서 빔포밍된RF 데이터를 출력하는 수신 빔포머를 포함하는 신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제13항에서,상기 제2 인공 신경망은상기 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 상기 압축된 특징 맵을 디코딩하여 상기 트랜스듀서공개특허 10-2023-0139344-4-요소별 시간 지연이 조합된 지연 행렬을 출력하는, 신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제14항에서,상기 제2 인공 신경망은전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터를 사용하여 상기 음속도 맵을 인코딩하는,신호 처리 장치."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "초음파 이미징에서의 인공 신경망 기반 수신 빔포밍 방법, 그리고 이를 구현한 신호 처리 장치에 관한 것이다. 신호 처리 장치는 관심 영역의 음속도 분포를 나타내는 음속도 맵으로부터 상기 관심 영역에 대한 초음파 프로브 의 트랜스듀서 요소별 시간 지연을 예측하는 시간 지연 예측기, 그리고 상기 초음파 프로브에서 수신된 RF 신호 들에 해당 트랜스듀서 요소에 대해 예측된 시간 지연을 적용해서 빔포밍된 RF 데이터를 출력하는 수신 빔포머를 포함한다."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 수신 빔포밍(Rx beamforming) 기술에 관한 것이다."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "현재 상용화되어 있는 초음파 영상 장비로서, B-모드(Brightness mode) 이미징 시스템이 있다. B-모드 이미징 방법은 초음파가 물체 표면에서 반사되어 돌아오는 시간과 세기를 통해 물체 위치와 크기를 파악하는 방법이다. 이는 실시간으로 병변의 위치를 찾아 주기 때문에, 사용자가 병변을 실시간으로 모니터링하면서 원하는 영상을 효율적으로 얻을 수 있고, 안전하고 비교적 저렴하여 접근성이 좋다. B-모드 이미지를 생성하기 위해, 지연-합(delay and sum, DAS) 빔포밍 방법이 사용된다. DAS 빔포밍은 조직의 음속도(Speed of Sound, SoS)가 균일하다는 가정에서, 초음파 프로브의 각 트랜스듀서 요소(transducer element)에서 수득된 RF(Radio Frequency) 신호에, 미리 정해진 시간 지연 및 가중치를 적용한 후, 순차적으로 더해서 출력한다. 하지만, 실제 조직의 음속도는 균일하지 않고, 어느 병변(lesion)은 조직의 평균 음속도보다 느리고, 어느 병변은 조직의 평균 음속도보다 빠를 수 있다. 즉, 조직의 음속도 분포에 따라 시간 지연이 다르 게 발생하는데, 기존 빔포밍은 조직마다의 시간 지연을 실시간으로 반영하지 못하므로, 결과적으로 B-모드 이미 지의 해상도를 높이지 못하는 한계가 있다."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시는, 초음파 이미징에서의 인공 신경망 기반 수신 빔포밍 방법, 그리고 이를 구현한 신호 처리 장치에 관 한 것이다. 구체적으로 본 개시는, 인공 신경망을 이용하여, 조직의 음속도(Speed of Sound, SoS) 분포로부터 관심 영역에 대한 트랜스듀서 요소(transducer element)별 시간 지연(time delay)을 예측하고, 이를 수신 RF 신호에 적용하 여 빔포밍된 데이터를 출력하는 방법 및 장치에 관한 것이다."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "한 실시예에 따른 신호 처리 장치로서, 관심 영역의 음속도 분포를 나타내는 음속도 맵으로부터 상기 관심 영역 에 대한 초음파 프로브의 트랜스듀서 요소별 시간 지연을 예측하는 시간 지연 예측기, 그리고 상기 초음파 프로 브에서 수신된 RF 신호들에 해당 트랜스듀서 요소에 대해 예측된 시간 지연을 적용해서 빔포밍된 RF 데이터를 출력하는 수신 빔포머를 포함한다. 상기 신호 처리 장치는 상기 초음파 프로브에서 수신된 RF 신호들을 기초로 상기 관심 영역의 음속도 맵을 생성 하는 음속도 분포 구축기를 더 포함할 수 있다. 상기 시간 지연 예측기는 상기 음속도 맵으로부터 상기 트랜스듀서 요소별 시간 지연을 예측하도록 훈련된 인공 신경망을 포함할 수 있다. 상기 인공 신경망은 상기 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 상기 압축된 특징 맵을 디코딩하 여 상기 트랜스듀서 요소별 시간 지연이 조합된 지연 행렬을 출력할 수 있다. 상기 인공 신경망은 전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터를 사용하여 상기 음속 도 맵을 인코딩할 수 있다. 상기 빔포밍된 RF 데이터는 초음파 이미지를 생성하는데 사용될 수 있다. 한 실시예에 따른 신호 처리 장치의 동작 방법으로서, 인공 신경망을 이용하여, 관심 영역의 음속도 분포를 나 타내는 음속도 맵으로부터 상기 관심 영역에 대한 초음파 프로브의 트랜스듀서 요소별 시간 지연을 예측하는 단 계, 그리고 상기 초음파 프로브에서 수신된 RF 신호들에 해당 트랜스듀서 요소에 대해 예측된 시간 지연을 적용 해서 빔포밍된 RF 데이터를 출력하는 단계를 포함한다. 상기 동작 방법은 상기 초음파 프로브에서 수신된 RF 신호들을 기초로 상기 관심 영역의 음속도 맵을 생성하는 단계를 더 포함할 수 있다. 상기 인공 신경망은 상기 음속도 맵으로부터 상기 트랜스듀서 요소별 시간 지연을 예측하도록 훈련된 인공지능 모델일 수 있다. 상기 인공 신경망은 상기 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 상기 압축된 특징 맵을 디코딩하 여 상기 트랜스듀서 요소별 시간 지연이 조합된 지연 행렬을 출력할 수 있다. 상기 인공지능 모델은 전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터를 사용하여 상기 음 속도 맵을 인코딩할 수 있다. 상기 빔포밍된 RF 데이터는 초음파 이미지를 생성하는데 사용될 수 있다. 한 실시예에 따른 신호 처리 장치는 초음파 프로브에서 수신된 RF 신호들을 기초로 관심 영역의 음속도 분포를 나타내는 음속도 맵을 생성하는 제1 인공 신경망, 상기 음속도 맵으로부터 상기 관심 영역에 대한 초음파 프로 브의 트랜스듀서 요소별 시간 지연을 예측하는 제2 인공 신경망, 그리고 상기 제2 인공 신경망에서 예측된 시간 지연을, 상기 초음파 프로브에서 수신된 RF 신호들에 적용해서 빔포밍된 RF 데이터를 출력하는 수신 빔포머를 포함한다. 상기 제2 인공 신경망은 상기 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 상기 압축된 특징 맵을 디코 딩하여 상기 트랜스듀서 요소별 시간 지연이 조합된 지연 행렬을 출력할 수 있다. 상기 제2 인공 신경망은 전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터를 사용하여 상기 음속도 맵을 인코딩할 수 있다."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "실시예에 따르면, 수신 RF 신호에 조직의 불균일한 음속도에 따른 시간 지연을 적응적으로 적용하므로, 이러한 적응적 수신 빔포밍을 통해 생성되는 B-모드 이미지의 해상도를 기존 빔포밍 방법보다 높일 수 있다. 실시예에 따르면, 수신 RF 신호들을 기초로 조직의 음속도 분포를 실시간으로 구성할 수 있고, 이를 통해 관심 영역에서의 정확한 지연 시간을 수신 RF 신호에 적용할 수 있다."}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래에서는 첨부한 도면을 참고로 하여 본 개시의 실시예에 대하여 본 개시가 속하는 기술 분야에서 통상의 지 식을 가진 자가 용이하게 실시할 수 있도록 상세히 설명한다. 그러나 본 개시는 여러 가지 상이한 형태로 구현 될 수 있으며 여기에서 설명하는 실시예에 한정되지 않는다. 그리고 도면에서 본 개시를 명확하게 설명하기 위 해서 설명과 관계없는 부분은 생략하였으며, 명세서 전체를 통하여 유사한 부분에 대해서는 유사한 도면 부호를 붙였다. 명세서 전체에서, 어떤 부분이 어떤 구성요소를 \"포함\"한다고 할 때, 이는 특별히 반대되는 기재가 없는 한 다 른 구성요소를 제외하는 것이 아니라 다른 구성요소를 더 포함할 수 있는 것을 의미한다. 또한, 명세서에 기재 된 \"…부\", \"…기\", \"모듈\" 등의 용어는 적어도 하나의 기능이나 동작을 처리하는 단위를 의미하며, 이는 하드 웨어나 소프트웨어 또는 하드웨어 및 소프트웨어의 결합으로 구현될 수 있다. 본 개시의 인공 신경망은 적어도 하나의 태스크를 학습하는 인공지능 모델로서, 컴퓨팅 장치에서 실행되는 소프 트웨어/프로그램으로 구현될 수 있다. 프로그램은 저장 매체(non-transitory storage media)에 저장되고, 프로 세서에 의해 본 개시의 동작을 실행하도록 기술된 명령들(instructions)을 포함한다. 프로그램은 네트워크를 통 해 다운로드되거나, 제품 형태로 판매될 수 있다. 도 1은 한 실시예에 따른 수신 빔포밍을 설명하는 도면이다. 도 1을 참고하면, 초음파 영상 장비에서, 초음파가 조직(tissue)에서 반사되거나 조직을 통과하여 돌아오는 시 간과 세기를 통해 병변 등의 대상(target) 위치와 크기를 파악하는 B-모드(Brightness mode) 이미징이 사용된다. 대상의 위치 및 형태는 초음파 신호가 조직에서 반사되어 돌아오는 에코의 진폭 및 시간 지연을 이용 하여 추정될 수 있다. B-모드 이미징은 실시간으로 병변의 위치를 찾아 주기 때문에, 사용자가 병변을 실시간으 로 모니터링하면서 원하는 영상을 제공한다. 초음파 프로브는 초음파 신호를 수신하는 초음파 트랜스듀서를 포함하는데, 트랜스듀서는 N개(예를 들면, 128개)의 트랜스듀서 요소들(transducer elements)(e1, e2, …, eN)이 배열되고, 각 트랜스듀서 요소에서 수신된 RF(Radio Frequency) 신호들 S1(t), S2(t), …, SN(t)을 이용하여 초음파 이미지가 실시간 생성된다. 이때, 수 신 RF 신호들로부터 생성되는 초음파 이미지의 해상도를 높이기 위해, 지연-합(Delay and Sum, DAS) 방식의 수 신 빔포머(Rx Beamformer)가 각 수신 RF 신호에 시간 지연 τ를 적용하고, 필요한 가중치(미도시)를 적용한 후, 보정된 RF 신호들이 더해진 데이터를 출력한다. 여기서, 각 트랜스듀서 요소를 신호 수신 채널로 볼 수 있 다. 시간 지연(τ)은 각 채널에서 수신된 신호의 비행 시간(Time of Flight, TOF)과 관련된다. 단일 프로브 측정을 예로 들면, 초음파 프로브는 평면파(plane waves)를 서로 다른 조향각(steering angles)으로 조직에 순차적으로 입사하고, 조직에서 반사되어 되돌아온 RF 신호들을 획득하게 된다. 예를 들어, 7개의 서로 다른 조향각들 -15°, -10°, -5°, 0°, 5°, 10°, 15°로 초음파 신호가 조직에 입사된 경우에, 트랜스듀서 요소들에서 수신된 RF 신호들을 나타내는 조향각마다의 RF 데이터(예를 들면, U1,, U2, …, U7)를 얻 을 수 있고, 이들을 이용하여 초음파 이미지가 구성될 수 있다. 여기서, RF 데이터 U1, U2, …, U7을 빔포밍된 데이터, 또는 빔포밍된 초음파 데이터(beamformed ultrasound data)라고 부를 수 있다. 한편, 종래의 빔포머는 조직의 음속도(Speed of Sound, SoS)가 균일하다는 가정에서, 수신 RF 신호들에 미리 정 해진 시간 지연을 적용한다. 하지만, 실제 조직의 음속도는 균일하지 않고, 조직의 음속도 분포에 따라 시간 지 연이 다르게 발생함에도 불구하고, 불균일한 음속도 분포를 실시간으로 반영하여 수신 RF 신호들을 빔포밍하는 것이 쉽지 않았다. 다음에서, 조직의 불균일한 음속도에 따른 시간 지연을 적응적으로 반영하여 수신 RF 데이터 를 빔포밍하는 방법에 대해 설명한다. 도 2는 한 실시예에 따른 인공 신경망 기반 신호 처리 장치의 구성도이다. 도 2를 참고하면, 신호 처리 장치는 수신 빔포머, 시간 지연 예측기, 그리고 음속도 분포 구축 기를 포함할 수 있다. 신호 처리 장치는 적어도 하나의 프로세서에 의해 동작하고, 프로세서는 본 개 시에서 설명하는 동작을 위한 컴퓨터 프로그램을 실행한다. 시간 지연 예측기, 그리고 음속도 분포 구축기 는 적어도 하나의 태스크에 따라 입력과 출력의 관계를 학습한 인공 신경망으로 구축될 수 있다. 한편, 본 개시에서는 주로 수신 빔포밍에 대해 설명하는데, 신호 처리 장치는 초음파 이미지를 생성 및 표시하는 구 성을 더 포함하거나, 초음파 이미지를 생성 및 표시하는 장치와 연동할 수 있다. 수신 빔포머는 초음파 프로브의 트랜스듀서 요소들(e1, e2, …, eN)에서 수신된 RF 신호들 S1(t), S2(t), …, SN(t)을 입력받고, 각 트랜스듀서 요소에 관련된 채널마다 예측된 시간 지연 τ1, τ2, …, τN을 수신 RF신호에 적용한 후 RF 신호들을 더해 빔포밍된 데이터를 출력한다. 여기서, 각 채널에서 예측된 시간 지연은 시 간 지연 예측기로부터 실시간으로 제공되고, 관심 영역 내 병변 등의 조직 구성에 따라 달라지는 초음파 신호의 비행 시간을 반영하여 적응적으로 가변될 수 있다. 시간 지연 예측기는 초음파 프로브에서 수신된 RF 신호들을 기초로 구축된 관심 영역의 음속도 맵를 사용하여, 관심 영역에 대한 초음파 프로브의 트랜스듀서 요소별 시간 지연을 예측할 수 있다. 음속도 분포는 음속도 맵으로 표현될 수 있다. 시간 지연 예측기는 해당 초음파 프로브의 각 트랜스듀서 요소와 관 심 영역 내 위치들 사이에서 발생하는 시간 지연 τ1, τ2, …, τN을 예측한다. 관심 영역 내 위치들은 관심 영 역을 나눈 그리드 또는 픽셀로 구분될 수 있다. 시간 지연 예측기는 트랜스듀서 요소별로 예측된 시간 지 연을 지연 행렬(delay matrix, DM)의 형태로 출력할 수 있다. 시간 지연 예측기는 조직의 음속도 맵 으로부터 트랜스듀서 요소별(채널별) 비행 시간을 예측하도록 훈련된 인공 신경망을 포함할 수 있고, DelayNet이라고 부를 수 있다. 시간 지연 예측기는 전파 방향의 반대 방향에 대한 가중치를 할당하지 않는 컨볼루션 필터를 사용할 수 있다. 이를 통해 시간 지연 예측기는 순방향으로 진행하는 초음파의 전파 특성 을 고려함으로써, 비행 시간 예측의 정확도를 높일 수 있다. 음속도 분포 구축기는 초음파 프로브에서 수신된 RF 신호들을 기초로 조직의 음속도 맵을 생성하도록 훈련된 인공 신경망을 포함할 수 있다. 음속도 분포 구축기는 정량적 이미징 네트워크(quantitative imaging network )라고 부를 수 있다. 음속도 분포 구축기는 조직의 음속도 분포뿐만 아니라, 조직의 정량 적 변수들인 감쇠 계수(Attenuation Coefficient, AC), 조직 내 밀도 분포를 나타내는 산란체 밀도(Effective Scatterer Concentration, ESC), 조직 내 세포 등의 크기를 나타내는 산란체 크기(Effective Scatterer Diameter, ESD) 등을 복원할 수 있다. 한편, 음속도 분포 구축기는 수신 빔포머에 의해 관심 영역의 지연 시간이 반영된 RF 데이터를 사용하여 고해상도의 음속도 맵을 복원할 수 있다 조직의 음속도 맵은 관심 영역의 음속도 맵 S ∈ RH×W으로 생성될 수 있다. 음속도 분포 구축기는 예 를 들면, 관심 영역의 높이 H와 너비 W가 154인 154x154의 크기의 음속도 맵을 생성할 수 있다. 시간 지연 예측기는 관심 영역의 음속도 맵으로부터, 트랜스듀서 요소별(채널별)로 관심 영역에서의 비행 시간을 예측하고, 관심 영역에서의 트랜스듀서 요소별 비행 시간의 집합인 지연 행렬(delay matrix, DM)을 출력 할 수 있다. 지연 행렬 DM은 D ∈ RH×W×N의 행렬로 생성되는데, H와 W는 관심 영역의 높이와 너비이며, N은 트랜 스듀서의 요소 수(예를 들면, 128)이다. 구체적으로 초음파가 경로 I와 경로 J를 통해 조직에 입사되고 반사된다고 가정하면, 초음파 이미지 생성을 위 해 수신 RF 신호에 적용되는 시간 지연 τI,J는 수학식 1과 같이 정의될 수 있다. 수학식 1"}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "수학식 1에서, τTx,I는 경로 I에 대한 전송 지연(transmission delay)이고, τRx,J는 경로 J에 대한 수신 지연 (reception delay)이며, τsteering은 조향에 의한 조향 지연(steering delay)이다. 전송 지연 및 수신 지연은, 초음파가 관심 영역의 한 그리드(grid)에서 전송/수신 트랜스듀서 요소까지 이동하 는데 소요된 시간으로서, 수학식 2 및 수학식 3과 같이 정의될 수 있다. 관심 영역은 픽셀 단위로 분할될 수 있 다. 수학식 2 수학식 3"}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "수학식 2에서, lI,i는 경로 I에 대한 그리드 i에서의 광선 길이(ray length)이고, si는 그리드 i의 단위 전파 지 연(unit propagation delay)으로서, 음속도의 역수이다. 마찬가지로 수학식 3에서, lJ,j는 경로 J에 대한 그리드 j에서의 광선 길이이고, sj는 그리드 j의 단위 전파 지연으로서, 음속도의 역수이다. 조향 지연은 지정된 전파 각도를 갖는 평면파 생성을 위해 각 채널에 적용되는 지연으로서, 수학식 4와 같이 정 의될 수 있다. 수학식 4"}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "수학식 4에서, 초음파는 t번째 트랜스듀서 요소에 의해 θ 각도로 전송되고, p는 트랜스듀서의 피치 크기, N은 트랜스듀서의 전체 요소 수, c는 기준 음속도(예를 들면, 1540m/s)이다. 도 3은 한 실시예에 따른 시간 지연 예측기의 네트워크 구조 예시이고, 도 4는 한 실시예에 따른 로컬 마스크 컨벌루션 필터의 예시이다. 도 3을 참고하면, 시간 지연 예측기는 관심 영역의 음속도 맵으로부터, 각 트랜스듀서 요소에서 수신 된 RF 신호의 비행 시간을 예측해서 트랜스듀서별 지연 시간을 출력하도록 훈련된 인공 신경망으로 구현될 수 있고, 인공 신경망은 다양한 네트워크 구조로 설계될 수 있다. 트랜스듀서별 지연 시간은 트랜스듀서 요소별 지 연 시간의 집합인 지연 행렬의 형태로 출력될 수 있다 예를 들면, 시간 지연 예측기는 인코딩 경로에서 추출된 특징을 디코딩 경로로 전달하기 위해, 스킵 연결 을 가진 UNet 기반으로 구현될 수 있다. 예를 들면, 트랜스듀서의 요소 수가 128이고, 관심 영역의 크기가 154x154인 경우, 154x154x1 크기의 음속도 맵은 컨볼루션① 및 맥스 풀링②을 거치면서 인코딩되어, 최종 적으로 9x9x512 크기의 압축된 특징 맵으로 변환되고, 9x9x512 크기의 특징 맵은 다시 컨볼루션①/③ 및 전치 컨볼루션(transposed convolution)④을 거치면서 공간 정보를 복원하면서 154x154x128 크기의 지연 행렬 로 복원될 수 있다. 이때, 시간 지연 예측기는 채널 단위로 결합되는 스킵 연결⑤를 통해 인코딩 경로의 다양한 해상도 수준에서 생략된 특징을 디코딩 경로에 병합하여 공간 정보를 복원할 수 있다. 시간 지연 예측기의 인코더는, 지역적으로 가중치를 할당하지 않는(마스크 처리된) 컨볼루션 필터를 사용 하여 특징 맵을 컨볼루션①할 수 있다. 예를 들면, 시간 지연 예측기의 인코더는, 도 4의 (a)와 같은 일반 적인 3x3 컨볼루션 필터 대신에, 도 4의 (b)와 같이 전파 방향의 반대 방향에 대한 가중치를 할당하지 않는 지 역적으로 마스크 처리된 컨볼루션 필터(locally masked convolutional filter)를 인코딩 경로의 컨볼루션에 사 용할 수 있다. 이렇게 초음파의 전파 특성을 고려한 컨볼루션 필터를 사용함으로써, 계산 효율을 33% 이상 높이 고, 예측 정확도를 높일 수 있다. 인코딩 경로는 지역적으로 마스크 처리된 컨볼루션 필터를 이용한 컨볼루션, 배치 정규화(batchNorm), ReLU, 그리고 2x2 맥스 풀링(max pooling) 단계로 진행될 수 있다. 시간 지연 예측기의 디코더는, 2×2 전치 컨볼루션 필터를 이용한 업샘플링④, 인코딩 경로의 특징 맵 연 결⑤, 3×3 컨볼루션- 배치 정규화-ReLU③의 디코딩 경로를 구성할 수 있다. 시간 지연 예측기의 훈련 데이터는 초음파 시뮬레이션 툴(예를 들면, Matlab의 k-wave toolbox)을 이용하 여 생성된 초음파 데이터로 구성될 수 있다. 훈련 데이터는 시뮬레이션된 음속도 맵과 지연 행렬로 구성될 수 있다. 예를 들면, 16k개의 시뮬레이션 팬텀을 생성하고, 장기와 병변은 1400m/s~1700m/s 음속도 범위의 타원들로 표현될 수 있다. 시간 지연 예측기는 시뮬레이션 팬텀을 통해 얻은 훈련 데이터로부터, 음속도 맵으로부터 지연 행렬을 출 력하도록 훈련될 수 있다. 훈련에 사용되는 목적 함수 G*는 수학식 5과 같은 손실 함수로 정의될 수 있다. 시간 지연 예측기는 목적 함수 G*를 이용하여, 출력 G(x)와 정답값 y의 차이를 최소화하는 훈련을 할 수 있다. 수학식 5"}
{"patent_id": "10-2023-0037920", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "수학식 5에서, 출력 G(x)와 정답값 y의 차이가 작기 때문에 γ를 일정 값, 예를 들면, 100으로 설정해서 훈련을 용이하게 할 수 있다. 도 5는 한 실시예에 따른 음속도 분포 구축기의 네트워크 구조 예시이다. 도 5를 참고하면, 음속도 분포 구축기는 초음파 프로브에서 수신된 RF 신호들을 기초로 조직의 음속도 맵 을 생성하도록 훈련된 인공 신경망으로 구현될 수 있고, 인공 신경망은 다양한 네트워크 구조로 설계될 수 있다. 예를 들면, 음속도 분포 구축기는 초음파 프로브의 트랜스듀서 요소들에서 수신된 RF 신호들을 기초로 생 성된 RF 데이터 U1,, U2, …, UN로부터 관심 영역의 음속도 맵을 생성하는 인코더 및 디코더를 포함할 수 있다. RF 데이터 U1,, U2, …, UN는 수신 빔포머에서 RF 신호들에 트랜스듀서 요소별 지연 시간 을 적응적으로 적용하여 생성될 수 있다. 인코더는 RF 데이터를 인코딩해 가면서 특징 맵을 추출하고, 디코더는 인코더에서 추출된 특징 맵을 복원해 가면서 관심 영역의 음속도 분포를 출력할 수 있다. 도 6은 한 실시예에 따른 인공 신경망 기반 신호 처리 장치의 동작 방법이다. 도 6을 참고하면, 신호 처리 장치는 인공 신경망을 통해 초음파 프로브에서 수신된 RF 신호들을 기초로 관 심 영역의 음속도 분포를 나타내는 음속도 맵을 생성한다(S110). 음속도 맵은 관심 영역에서 반사되어 돌아온 RF 신호들로부터 관심 영역의 음속도 분포를 생성하도록 훈련된 인공 신경망을 통해 실시간으로 획득될 수 있다. 여기서, 신호 처리 장치는 실시간으로 생성된 관심 영역의 음속도 맵을 입력받도록 구현될 수 있다. 신호 처리 장치는 인공 신경망을 이용하여, 관심 영역의 음속도 맵으로부터 관심 영역에 대한 트랜스듀서 요소별 시간 지연을 예측한다(S120). 신호 처리 장치는 음속도 맵을 기초로 초음파 프로브의 각 트랜스듀 서 요소와 관심 영역 내 위치들 사이에서 발생하는 시간 지연을 예측할 수 있다. 신호 처리 장치는 음속도 맵을 인코딩하여 압축된 특징 맵을 생성하고, 압축된 특징 맵을 디코딩하여 트랜스듀서 요소별 시간 지연이 조 합된 지연 행렬을 출력할 수 있다. 이때, 음속도 맵의 인코딩 경로에서, 전파 방향의 반대 방향으로는 가중치를 할당하지 않는 컨볼루션 필터가 사용될 수 있다. 디코딩 경로는 스킵 연결을 통해 인코딩 경로에서 추출된 특징 을 채널 단위로 결합하여 공간 정보를 복원할 수 있다. 신호 처리 장치는 초음파 프로브의 트랜스듀서 요소들에서 수신된 RF 신호마다, 해당 트랜스듀서 요소에 대해 예측된 시간 지연을 적용해서 빔포밍된 RF 데이터를 출력한다(S130). 신호 처리 장치는 예측된 시간 지연이 적용된 RF 신호들을 더해 빔포밍된 RF 데이터를 출력할 수 있다. 이와 같이, 관심 영역에서의 지연 시간이 실시간으로 반영된 RF 데이터를 이용하여 B-모드 이미지와 같은 초음 파 이미지를 생성하므로, 음속도가 균일하다고 가정한 기존 빔포밍 방식에 비해 초음파 이미지의 해상도를 높일 수 있다. 또한, 관심 영역의 지연 시간이 반영된 RF 데이터를 사용하여 음속도 맵을 생성할 수 있어서, 고해상 도의 음속도 맵 생성에 기여할 수 있다. 도 7과 도 8은 한 실시예에 따른 인공 신경망 기반 수신 빔포밍에 의해 개선된 성능을 설명하는 도면이다. 도 7은, 시뮬레이션 팬텀에 대해서, 기존 DAS 빔포밍 방법을 사용하여 생성한 B-모드 이미지들(conventional DAS에 해당하는 행의 이미지들), 그리고 음속도 분포를 반영하여 RF 신호에 시간 지연을 적용하는 본 개시의 적 응적 수신 빔포밍 방법을 사용하여 생성한 B-모드 이미지들(proposed에 해당하는 행의 이미지들)을 나타낸다. B-모드 이미지들을 비교하면, 본 개시의 수신 빔포밍 방법이 기존 DAS 빔포밍 방법에 비해 정확한 위치의 B-모 드 이미지를 생성하는 것을 알 수 있다. 흰색 화살표로 강조 표시된 것처럼 기존 DAS 빔포밍은 비균질 조직에서 의 정확도를 떨어뜨리는 것을 확인할 수 있고, 특히, 대상의 음속도가 기준(1540m/s)보다 느릴 때, 기존 DAS 빔 포밍 방법에 따르면, 대상까지의 거리 오차가 커지게 된다. 머는 대상까지의 거리를 과대 평가합니다. 또한, 본 개시의 적응적 수신 빔포밍 방법을 사용하는 경우, DICE 계수, 픽셀 정확도 등이 전체적으로 향상되었다. 도 8은 Ex-vivo 팬텀에 대해서, 기존 DAS 빔포밍 방법을 사용하여 생성한 B-모드 이미지(DAS에 해당하는 이미지), 그리고 본 개시의 적응적 수신 빔포밍 방법을 사용하여 생성한 B-모드 이미지(proposed에 해당하는 이 미지)를 나타낸다. B-모드 이미지들을 비교하면, 본 개시의 수신 빔포밍 방법이 기존 DAS 빔포밍 방법에 비해 B-모드 이미지의 측 면 해상도를 향상시키는 것을 알 수 있다. P1 및 P2는 삽입된 스레드 라인의 재구성된 이미지인데, 기존 DAS 빔 포밍 방법은 수신 RF 신호에 부정확한 시간 지연을 적용하여 산란된 이미지가 생성된니다. 이와 달리, 본 개시 의 적응적 수신 빔포밍 방법을 사용하는 경우, 반치전폭(full width at half maximum, FWHM)이 향상되는 것을 확인할 수 있다. 도 9는 한 실시예에 따른 컴퓨팅 장치의 구성도이다. 도 9를 참고하면, 신호 처리 장치는 적어도 하나의 프로세서에 의해 동작하는 컴퓨팅 장치일 수 있고, 초음파 프로브 또는 초음파 프로브에서 획득된 데이터를 제공하는 장치와 연결된다. 컴퓨팅 장치는 하나 이상의 프로세서, 프로세서에 의하여 수행되는 프로그램을 로드하는 메모리 , 프로그램 및 각종 데이터를 저장하는 스토리지, 통신 인터페이스, 그리고 이들을 연결하는 버 스를 포함할 수 있다. 이외에도, 컴퓨팅 장치는 다양한 구성 요소가 더 포함될 수 있다. 프로그램은 메모리에 로드될 때 프로세서로 하여금 본 개시의 다양한 실시예에 따른 방법/동작을 수행하도록 하 는 명령어들(instruction)을 포함할 수 있다. 즉, 프로세서는 명령어들을 실행함으로써, 본 개시의 다양한 실시예에 따른 방법/동작들을 수행할 수 있다. 명령어는 기능을 기준으로 묶인 일련의 컴퓨터 판독가능 명령어 들로서 컴퓨터 프로그램의 구성 요소이자 프로세서에 의해 실행되는 것을 가리킨다. 프로세서는 컴퓨팅 장치의 각 구성의 전반적인 동작을 제어한다. 프로세서는 CPU(Central Processing Unit), MPU(Micro Processor Unit), MCU(Micro Controller Unit), GPU(Graphic Processing Unit) 또는 본 개시의 기술 분야에 잘 알려진 임의의 형태의 프로세서 중 적어도 하나를 포함하여 구성될 수 있다. 또 한, 프로세서는 본 개시의 다양한 실시예들에 따른 방법/동작을 실행하기 위한 적어도 하나의 애플리케이 션 또는 프로그램에 대한 연산을 수행할 수 있다. 메모리는 각종 데이터, 명령 및/또는 정보를 저장한다. 메모리는 본 개시의 다양한 실시예들에 따른 방법/동작을 실행하기 위하여 스토리지로부터 하나 이상의 프로그램을 로드할 수 있다. 메모리는 RAM 과 같은 휘발성 메모리로 구현될 수 있을 것이나, 본 개시의 기술적 범위는 이에 한정되지 않는다. 스토리지는 프로그램을 비임시적으로 저장할 수 있다. 스토리지는 ROM(Read Only Memory), EPROM(Erasable Programmable ROM), EEPROM(Electrically Erasable Programmable ROM), 플래시 메모리 등과 같은 비휘발성 메모리, 하드 디스크, 착탈형 디스크, 또는 본 개시가 속하는 기술 분야에서 잘 알려진 임의의 형태의 컴퓨터로 읽을 수 있는 기록 매체를 포함하여 구성될 수 있다. 통신 인터페이스는 컴퓨팅 장치의 유무선 통신을 지원한다. 이를 위해, 통신 인터페이스는 본 개시의 기술 분야에 잘 알려진 통신 모듈을 포함하여 구성될 수 있다. 버스는 컴퓨팅 장치의 구성 요소 간 통신 기능을 제공한 다. 버스는 주소 버스(Address Bus), 데이터 버스(Data Bus) 및 제어 버스(Control Bus) 등 다양한 형태의 버스로 구현될 수 있다. 이와 같이, 실시예에 따르면, 수신 RF 신호에 조직의 불균일한 음속도에 따른 시간 지연을 적응적으로 적용하므 로, 이러한 적응적 수신 빔포밍을 통해 생성되는 B-모드 이미지의 해상도를 기존 빔포밍 방법보다 높일 수 있다. 실시예에 따르면, 수신 RF 신호들을 기초로 조직의 음속도 분포를 실시간으로 구성할 수 있고, 이를 통해 관심 영역에서의 정확한 지연 시간을 수신 RF 신호에 적용할 수 있다. 이상에서 설명한 본 개시의 실시예는 장치 및 방법을 통해서만 구현이 되는 것은 아니며, 본 개시의 실시예의 구성에 대응하는 기능을 실현하는 프로그램 또는 그 프로그램이 기록된 기록 매체를 통해 구현될 수도 있다. 이상에서 본 개시의 실시예에 대하여 상세하게 설명하였지만 본 개시의 권리범위는 이에 한정되는 것은 아니고 다음의 청구범위에서 정의하고 있는 본 개시의 기본 개념을 이용한 당업자의 여러 변형 및 개량 형태 또한 본 개시의 권리범위에 속하는 것이다."}
{"patent_id": "10-2023-0037920", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 한 실시예에 따른 수신 빔포밍을 설명하는 도면이다. 도 2는 한 실시예에 따른 인공 신경망 기반 신호 처리 장치의 구성도이다. 도 3은 한 실시예에 따른 시간 지연 예측기의 네트워크 구조 예시이다. 도 4는 한 실시예에 따른 로컬 마스크 컨벌루션 필터의 예시이다. 도 5는 한 실시예에 따른 음속도 분포 구축기의 네트워크 구조 예시이다. 도 6은 한 실시예에 따른 인공 신경망 기반 신호 처리 장치의 동작 방법이다. 도 7과 도 8은 한 실시예에 따른 인공 신경망 기반 수신 빔포밍에 의해 개선된 성능을 설명하는 도면이다. 도 9는 한 실시예에 따른 컴퓨팅 장치의 구성도이다."}
