{"patent_id": "10-2022-0157398", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0075429", "출원번호": "10-2022-0157398", "발명의 명칭": "IMU 좌표계를 차량 좌표계와 정렬하는 방법 및 장치", "출원인": "포티투닷 주식회사", "발명자": "강승은"}}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "차량의 IMU(inertial measurement unit)로부터 상기 차량의 가속도 및 각속도를 포함하는 IMU 데이터를 획득하고, GPS(global positioning system)로부터 상기 차량의 속도를 포함하는 GPS 데이터를 획득하는 단계;상기 IMU 데이터 및 상기 GPS 데이터에 기초하여 상기 차량이 등속운동 하는 것으로 추정되는 하나 이상의 등속운동 구간을 추출하는 단계;상기 하나 이상의 등속운동 구간에 기초하여 경사각 보정 행렬 및 중력방향 정렬 행렬을 도출하는 단계;상기 IMU 데이터 및 상기 중력방향 정렬 행렬에 기초하여 전진방향 정렬 행렬을 도출하는 단계;상기 중력방향 정렬 행렬, 상기 전진방향 정렬 행렬, 및 상기 경사각 보정 행렬로부터 최종 정렬 행렬을 도출하는 단계; 및상기 최종 정렬 행렬에 기초하여, IMU 좌표계를 차량 좌표계에 대응되도록 보정하는 단계;를 포함하는, 좌표계정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제 1 항에 있어서,상기 등속운동 구간을 추출하는 단계는,상기 가속도의 크기의 표준편차를 산출하는 단계; 및상기 GPS 데이터에 기초하여 산출된 상기 차량의 속력의 변화량이 제1 임계치 이하이고 상기 표준편차가 제2 임계치 이하인 하나 이상의 구간을 상기 등속운동 구간으로 추출하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제 1 항에 있어서,상기 경사각 보정 행렬을 도출하는 단계는,상기 GPS 데이터를 이용하여 상기 하나 이상의 등속운동 구간 각각의 구간 고도차 및 구간 이동거리를 획득하는단계;상기 구간 고도차 및 상기 구간 이동거리에 기초하여 상기 하나 이상의 등속운동 구간 전체에 대한 평균 경사각을 산출하는 단계; 및상기 평균 경사각에 기초하여 상기 경사각 보정 행렬을 도출하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제 3 항에 있어서,상기 구간 고도차는,상기 GPS 데이터로부터 추정된 고도 변화 직선에 대하여 상기 등속운동 구간 양끝 지점에서의 상기 고도 변화직선의 고도차에 해당하고,상기 구간 이동거리는,상기 속도를 시간에 따라 적분한 것이고,공개특허 10-2024-0075429-3-상기 경사각 보정 행렬은,상기 평균 경사각만큼 피치(Pitch) 방향으로 회전시키는 회전 행렬에 해당하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제 1 항에 있어서,상기 중력방향 정렬 행렬을 도출하는 단계는,상기 하나 이상의 등속운동 구간의 가속도 벡터를 획득하는 단계;상기 가속도 벡터의 가중평균에 기초하여 중력 벡터를 산출하는 단계; 및상기 중력 벡터를 상기 차량 좌표계의 수직 방향으로 회전시키는 회전 행렬을 상기 중력방향 정렬 행렬로 도출하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제 5 항에 있어서,상기 중력 벡터를 산출하는 단계는,상기 GPS 데이터가 일정한 시간 간격으로 측정되는 경우, 상기 속도를 가중치로 하여 상기 중력 벡터를 산출하고,상기 GPS 데이터가 일정하지 않은 시간 간격으로 측정되는 경우, 상기 차량의 이동거리를 가중치로 하여 상기중력 벡터를 산출하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제 1 항에 있어서,상기 전진방향 정렬 행렬을 도출하는 단계는,상기 IMU 데이터를 샘플링 하여 타겟 데이터를 획득하는 단계;상기 타겟 데이터로부터 공분산 행렬(Covariance Matrix)을 추출하는 단계; 및상기 공분산 행렬에 기초하여 상기 전진방향 정렬 행렬을 도출하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제 7 항에 있어서,상기 타겟 데이터를 획득하는 단계는,상기 IMU 데이터로부터 상기 가속도의 크기를 이용하여 제1 데이터를 추출하는 단계; 상기 제1 데이터로부터 상기 각속도의 크기를 이용하여 제2 데이터를 추출하는 단계; 및상기 제2 데이터를 샘플링 하여 상기 타겟 데이터를 획득하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제 8 항에 있어서,상기 제2 데이터를 샘플링 하여 상기 타겟 데이터를 획득하는 단계는,공개특허 10-2024-0075429-4-상기 제2 데이터를 상기 각속도의 부호에 따라 제1 그룹 및 제2 그룹으로 분할하는 단계; 및 상기 제1 그룹 및 상기 제2 그룹의 데이터를 소정의 방법에 따라 랜덤 비 복원 추출하여 상기 타겟 데이터를획득하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제 9 항에 있어서,상기 소정의 방법은,상기 제1 그룹 및 상기 제2 그룹에서 각각 기준 샘플개수 -상기 제1 그룹의 데이터 개수 및 상기 제2 그룹의 데이터 개수 중 더 작은 데이터 개수에 해당함- 만큼 샘플링 하는 것인,좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "제 7 항에 있어서,상기 공분산 행렬에 기초하여 상기 전진방향 정렬 행렬을 도출하는 단계는,상기 공분산 행렬을 특이 값 분해(Singular Value Decomposition)하여 유니터리 행렬(Unitary Matrix)을 추출하는 단계; 및상기 유니터리 행렬을 이용하여 후보 검증을 수행함으로써 상기 전진방향 정렬 행렬을 도출하는 단계;를 포함하는, 좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "제 11 항에 있어서,상기 후보 검증을 수행함으로써 전진방향 정렬 행렬을 도출하는 단계는,상기 유니터리 행렬의 행렬식을 계산하는 단계; 및상기 행렬식이 음수인 경우, 상기 유니터리 행렬을 변형하여 두 개의 후보 행렬을 생성하고 상기 두 개의 후보행렬 중 어느 하나의 행렬을 선택하되, 상기 행렬식이 양수인 경우, 상기 유니터리 행렬을 선택하는 단계;를 포함하고,상기 두 개의 후보 행렬은,상기 유니터리 행렬의 1행에 임의의 음수를 곱함으로써 생성된 제1 후보 행렬 및 상기 유니터리 행렬의 2행에임의의 음수를 곱함으로써 생성된 제2 후보 행렬인,좌표계 정렬 방법."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "적어도 하나의 프로그램이 저장된 메모리; 및상기 적어도 하나의 프로그램을 실행함으로써 연산을 수행하는 프로세서를 포함하고,상기 프로세서는,차량의 IMU로부터 상기 차량의 가속도 및 각속도를 포함하는 IMU 데이터를 획득하고, GPS로부터 상기 차량의 속도를 포함하는 GPS 데이터를 획득하고,상기 IMU 데이터 및 상기 GPS 데이터에 기초하여 상기 차량이 등속운동 하는 것으로 추정되는 하나 이상의 등속운동 구간을 추출하고,상기 하나 이상의 등속운동 구간에 기초하여 경사각 보정 행렬 및 중력방향 정렬 행렬을 도출하고,공개특허 10-2024-0075429-5-상기 IMU 데이터 및 상기 중력방향 정렬 행렬에 기초하여 전진방향 정렬 행렬을 도출하고,상기 중력방향 정렬 행렬, 상기 전진방향 정렬 행렬, 및 상기 경사각 보정 행렬로부터 최종 정렬 행렬을 도출하고,상기 최종 정렬 행렬에 기초하여, IMU 좌표계를 차량 좌표계에 대응되도록 보정하는, 좌표계 정렬 장치."}
{"patent_id": "10-2022-0157398", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제 1 항의 방법을 컴퓨터에서 실행시키기 위한 프로그램을 기록한 컴퓨터로 읽을 수 있는 기록매체."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 개시는 IMU 좌표계를 차량 좌표계와 정렬하는 방법 및 장치에 관한 것이다. 본 개시의 일 실시예는, 차량의 IMU(inertial measurement unit)로부터 상기 차량의 가속도 및 각속도를 포함하는 IMU 데이터를 획득하고, GPS(global positioning system)로부터 상기 차량의 속도를 포함하는 GPS 데이터를 획득하는 단계; 상기 IMU 데 (뒷면에 계속)"}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 개시는 IMU 좌표계를 차량 좌표계와 정렬하는 방법 및 장치를 제공한다."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "차량의 3축 직교 좌표계는 중심점의 위치와 각 축의 방향으로 구성되는데, 중심점의 위치는 관심 지점에 따라 달라질 수 있으며 각 축의 방향은 차량의 종축, 횡축 및 연직축으로 구성하는 것이 일반적이다. 차량에 장착된 IMU로 차량의 움직임을 측정하기 위해서는 정확도를 위해 IMU 좌표계와 차량 좌표계를 정렬함으 로써 일치시켜야 하는데 좌표계를 정렬하는 방법으로는 하드웨어적 방법과 소프트웨어적 방법이 있다. 하드웨어적 방법으로는, IMU 좌표계가 차량 좌표계와 일치하도록 설치하는 방법이 있으나 차량의 동체 좌표계와 센서 좌표계의 완벽한 정렬은 시간 및 비용적으로 매우 소모적이며 제조사 외에는 사용하기 어려운 방법이다. 소프트웨어적 방법으로는, IMU 좌표계에서 차량 좌표계로의 회전 행렬을 구하여 IMU에서 획득되는 값에 적용시 켜 정렬하는 방법이 있는데, 정확도 높은 행렬을 도출하는 방법이 문제가 된다."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 2, "content": "전술한 배경기술은 발명자가 본 발명의 도출을 위해 보유하고 있었거나, 본 발명의 도출 과정에서 습득한 기술 정보로서, 반드시 본 발명의 출원 전에 일반 공중에게 공개된 공지기술이라 할 수는 없다."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 개시의 목적은 IMU 좌표계를 차량 좌표계와 정렬하는 방법 및 장치를 제공하는 데 있다. 본 개시가 해결하고 자 하는 과제는 이상에서 언급한 과제에 한정되지 않으며, 언급되지 않은 본 개시의 다른 과제 및 장점들은 하 기의 설명에 의해서 이해될 수 있고, 본 개시의 실시예에 의해 보다 분명하게 이해될 것이다. 또한, 본 개시가 해결하고자 하는 과제 및 장점들은 특허 청구범위에 나타난 수단 및 그 조합에 의해 실현될 수 있음을 알 수 있 을 것이다."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "본 개시의 제 1 측면은, 차량의 IMU(inertial measurement unit)로부터 상기 차량의 가속도 및 각속도를 포함하 는 IMU 데이터를 획득하고, GPS(global positioning system)로부터 상기 차량의 속도를 포함하는 GPS 데이터를 획득하는 단계; 상기 IMU 데이터 및 상기 GPS 데이터에 기초하여 상기 차량이 등속운동 하는 것으로 추정되는 하나 이상의 등속운동 구간을 추출하는 단계; 상기 하나 이상의 등속운동 구간에 기초하여 경사 보정 행렬 및 중력방향 정렬 행렬을 도출하는 단계; 상기 IMU 데이터 및 상기 중력방향 정렬 행렬에 기초하여 전진방향 정렬 행렬을 도출하는 단계; 상기 중력방향 정렬 행렬, 상기 전진방향 정렬 행렬, 및 상기 경사각 보정 행렬로부터 최종 정렬 행렬을 도출하는 단계; 및 상기 최종 정렬 행렬에 기초하여, IMU 좌표계를 상기 차량 좌표계에 대응 되도록 보정하는 단계;를 포함하는 좌표계 정렬 방법을 제공할 수 있다. 본 개시의 제 2 측면은, 적어도 하나의 프로그램이 저장된 메모리; 및 상기 적어도 하나의 프로그램을 실행함으 로써 동작하는 프로세서;를 포함하되, 상기 프로세서는, 차량의 IMU(inertial measurement unit)로부터 상기 차 량의 가속도 및 각속도를 포함하는 IMU 데이터를 획득하고, GPS(global positioning system)로부터 상기 차량의 속도를 포함하는 GPS 데이터를 획득하고, 상기 IMU 데이터 및 상기 GPS 데이터에 기초하여 상기 차량이 등속운동 하는 것으로 추정되는 하나 이상의 등속운동 구간을 추출하고, 상기 하나 이상의 등속운동 구간에 기초하여 경사각 보정 행렬 및 중력방향 정렬 행렬을 도출하고, 상기 IMU 데이터 및 상기 중력방향 정렬 행렬에 기초하여 전진방향 정렬 행렬을 도출하고, 상기 중력방향 정렬 행렬, 상기 전진방향 정렬 행렬, 및 상기 경사각 보정 행 렬로부터 최종 정렬 행렬을 도출하고, 상기 최종 정렬 행렬에 기초하여, IMU 좌표계를 상기 차량 좌표계에 대응 되도록 보정하는, 좌표계 정렬 장치를 제공할 수 있다. 본 개시의 제 3 측면은, 제 1 측면의 방법을 컴퓨터에서 실행하기 위한 프로그램을 기록한 컴퓨터로 읽을 수 있 는 기록매체를 제공할 수 있다. 이 외에도, 본 발명을 구현하기 위한 다른 방법, 다른 장치 및 상기 방법을 실행하기 위한 프로그램을 기록한 컴퓨터로 읽을 수 있는 기록매체가 더 제공될 수 있다. 전술한 것 외의 다른 측면, 특징, 이점이 이하의 도면, 특허 청구범위 및 발명의 상세한 설명으로부터 명확해질 것이다."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "전술한 본 개시의 과제 해결 수단에 의하면, 소프트웨어적 방법으로 IMU와 차량의 축 정렬을 가능케 하여 시간 과 비용의 소모를 방지할 수 있다. 또한, 본 개시의 과제 해결 수단에 의하면, 차량이 평탄하지 않은 지면을 주행하는 경우에도 축 정렬이 가능한 좌표계 정렬 방법을 제공할 수 있다."}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명의 이점 및 특징, 그리고 그것들을 달성하는 방법은 첨부되는 도면과 함께 상세하게 설명되는 실시예들 을 참조하면 명확해질 것이다. 그러나 본 발명은 아래에서 제시되는 실시예들로 한정되는 것이 아니라, 서로 다 른 다양한 형태로 구현될 수 있고, 본 발명의 사상 및 기술 범위에 포함되는 모든 변환, 균등물 내지 대체물을 포함하는 것으로 이해되어야 한다. 아래에 제시되는 실시예들은 본 발명의 개시가 완전하도록 하며, 본 발명이"}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "속하는 기술분야에서 통상의 지식을 가진 자에게 발명의 범주를 완전하게 알려주기 위해 제공되는 것이다. 본 발명을 설명함에 있어서 관련된 공지 기술에 대한 구체적인 설명이 본 발명의 요지를 흐릴 수 있다고 판단되는 경우 그 상세한 설명을 생략한다. 본 출원에서 사용한 용어는 단지 특정한 실시예를 설명하기 위해 사용된 것으로, 본 발명을 한정하려는 의도가 아니다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, \"포함 하다\" 또는 \"가지다\" 등의 용어는 명세서 상에 기재된 특징, 숫자, 단계, 동작, 구성요소, 부품 또는 이들을 조 합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구성요소, 부 품 또는 이들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 본 개시의 일부 실시예는 기능적인 블록 구성들 및 다양한 처리 단계들로 나타내어질 수 있다. 이러한 기능 블 록들의 일부 또는 전부는, 특정 기능들을 실행하는 다양한 개수의 하드웨어 및/또는 소프트웨어 구성들로 구현될 수 있다. 예를 들어, 본 개시의 기능 블록들은 하나 이상의 마이크로프로세서들에 의해 구현되거나, 소정의 기능을 위한 회로 구성들에 의해 구현될 수 있다. 또한, 예를 들어, 본 개시의 기능 블록들은 다양한 프로그래 밍 또는 스크립팅 언어로 구현될 수 있다. 기능 블록들은 하나 이상의 프로세서들에서 실행되는 알고리즘으로 구현될 수 있다. 또한, 본 개시는 전자적인 환경 설정, 신호 처리, 및/또는 데이터 처리 등을 위하여 종래 기 술을 채용할 수 있다. \"매커니즘\", \"요소\", \"수단\" 및 \"구성\"등과 같은 용어는 넓게 사용될 수 있으며, 기계적 이고 물리적인 구성들로서 한정되는 것은 아니다. 또한, 도면에 도시된 구성 요소들 간의 연결 선 또는 연결 부재들은 기능적인 연결 및/또는 물리적 또는 회로적 연결들을 예시적으로 나타낸 것일 뿐이다. 실제 장치에서는 대체 가능하거나 추가된 다양한 기능적인 연결, 물 리적인 연결, 또는 회로 연결들에 의해 구성 요소들 간의 연결이 나타내어질 수 있다. 이하에서, '차량'은 자동차, 버스, 오토바이, 킥보드 또는 트럭과 같이 기관을 가지고 사람이나 물건을 이동시 키기 위해 이용되는 모든 종류의 운송 수단을 의미할 수 있다. 이하 첨부된 도면을 참고하여 본 개시를 상세히 설명하기로 한다. 도 1은 일 실시예에 따른 차량에 탑재된 장치를 개략적으로 도시하는 도면이다. 도 1을 참조하면, 차량에 탑재된 장치는 센서부, 프로세서 및 메모리 시스템 등을 포함할 수 있다. 차량에 탑재된 장치는 차체 제어 모듈(body control module, BCM)(미도시)을 더 포함할 수 있다. 센서부는 복수의 센서(카메라를 포함함)(42-45)를 포함하며, 복수의 센서들(42-45)은 이미지 센서, 이벤트 센서, 조도 센서, GPS 장치, 가속도 센서 등 차량 자체 또는 차량 주변 환경에 관한 정보를 수집하기 위한 센서 를 포함할 수 있다. 센서들(42-45)이 수집한 데이터는 프로세서로 전달될 수 있다. 프로세서는 센서들(42-45)이 수집한 데 이터를 메모리 시스템에 저장하고, 센서들(42-45)이 수집한 데이터에 기초하여 차체 제어 모듈을 제어하여 차량의 움직임을 결정할 수 있다. 메모리 시스템은 둘 이상의 메모리 장치들과, 메모리 장치들을 제어하기 위한 시스템 컨트롤러를 포함할 수 있다. 메모리 장치들 각각은 하나의 반도체 칩으로 제공될 수 있다. 메모리 시스템의 시스템 컨트롤러 외에, 메모리 시스템에 포함되는 메모리 장치들 각각은 메모리 컨트 롤러를 포함할 수 있으며, 메모리 컨트롤러는 신경망과 같은 인공지능(AI) 연산 회로를 포함할 수 있다. 메모리 컨트롤러는 센서들(42-45) 또는 프로세서로부터 수신한 데이터에 소정의 가중치를 부여하여 연산 데이터를 생성하고, 연산 데이터를 메모리 칩에 저장할 수 있다. 차량은 스마트폰, 태블릿 PC, PC, 스마트 TV, 휴대폰, 랩톱 및 기타 모바일 또는 비모바일 컴퓨팅 디바이스를 포함할 수 있다. 또한, 차량은 통신 기능 및 데이터 프로세싱 기능을 구비한 안경, 헤어 밴드 등의 웨어러블 디 바이스를 포함할 수 있다. 차량은 네트워크를 통해 다른 장치와 통신을 수행할 수 있는 모든 종류의 디바이스를 포함할 수 있다. 도 2 및 도 3은 일 실시예에 따른 IMU를 구성하는 센서의 예시도이다. 관성 측정 장치인 IMU(Inertial Measurement Unit)는 가속도 센서, 각속도 센서로 이루어져 있으며 일부는 지자 기 센서도 포함한다. IMU는 차량에 장착되어 차량의 항법정보 등을 생성하는 데 활용될 수 있다. 도 2를 참조하면, 일 실시예에 따른 IMU는 가속도 센서를 포함할 수 있다. 가속도 센서는 물체에 작용하는 가속력, 진동력, 충격력 등 동적 힘이 발생했을 때, 움직임의 변화에 따른 가속 도( )의 변화를 순간적으로 감지함으로써 가속도를 측정할 수 있다. 가속도 센서에서 출력되는 가속도를 적분하면 물체의 진행 방향에 대한 속도를 계산할 수 있으며 속도에 기초하여 물체의 변위를 추정할 수 있다. 다만, 짧은 시간에 기초하여 추정한 물체의 변위는 오차가 작을 수 있으나 물체의 변위는 가속도를 적분하여 추 정하게 되므로 시간에 따라 오차가 누적되는 단점이 있다. 따라서, GPS 데이터와 결합하여 변위 오차를 보정하 는 방법이 대중적으로 사용된다. 가속도 센서가 연속적인 위치 데이터를 제공하면 GPS는 절대적 위치 데이터를 제공하여 이를 보정하는 방법이다. 가속도 센서는 가속도를 측정하기 위하여 비중력(Specific force)을 측정하는데, 비중력이란 단위 질량 당 비중 력 힘(non-gravitational force)을 의미한다. 지상의 물체에는 수직 하방으로 중력 가속도만큼의 힘이 작용하는 데 물체의 기울기에 따라 x, y, z축 가속도계가 서로 영향을 미치며 측정 가속도 값이 변화한다.정지된 상태의 물체는 중력방향으로 작용하는 힘을 계산하여 각 축의 방향으로의 기울기 각도를 계산할 수 있으 나, 차량과 같은 이동 상태의 물체는 중력 외에 가속도에 의한 힘이 포함되어 있어 가속도 센서만으로는 각 축 의 방향으로의 정확한 기울기 각도를 계산할 수 없다. 따라서 이를 보정하기 위하여 각속도 센서(자이로스코프, Gyroscope)를 활용한다. 도 3을 참조하면, 일 실시예에 따른 IMU는 각속도 센서를 포함할 수 있다. 각속도 센서는 대표적인 관성 센서로 물체의 회전 변화량인 각속도( )를 측정한다. 각속도 센서는 중력이 가해질 때 진동 속도가 변하는 것을 이용하여 코리올리 힘(Coriolis force)을 검출한다. 코리올리 힘은 코리올리 효과(Coriolis effect)를 유발하는 힘으로, 코리올리 효과란 회전하고 있는 좌표계에 위치한 물체에 직선 방향으로 운동하도록 힘을 가했을 때 좌표계로 인해 물체가 회전하는 현상을 의미한다. 다 시 말해, 회전체의 표면 위에서 운동하는 물체에 대해 운동 속도 방향에 수직으로 작용하는 힘 또는 회전하는 계에서 느껴지는 관성력을 의미한다. 각속도 센서는 종류에 따라 정확도와 크기, 출력 형태가 다양한데 일반적으로 회전 각속도를 측정한다. 특정 샘 플링 시간에 기초하여 회전 각속도를 측정하는 경우, 회전 각은 각속도 측정값과 샘플링 시간의 곱에 해당하므 로 이 원리를 통해 회전 각을 구할 수 있다. 즉, 각속도를 통해 물체의 기울어진 각도를 추정하기 위하여는 각 속도를 측정 시간 전체에 대하여 적분해야 한다. 따라서, 가속도 센서와 마찬가지로 짧은 시간에 기초하여 추정한 물체의 기울기 각도는 오차가 작을 수 있으나 시간에 따라 오차가 누적되는 단점이 있다. 따라서, 지자기 센서 또는 온도 센서와 결합하여 각도 오차를 보정 하는 방법이 대중적으로 사용된다. 한편, 각속도 센서는 정밀도가 높아질수록 금액이 매우 높아지므로 타 센서와 융합하여 오차를 보정하는 경우가 일반적이다. 예를 들어, 각속도 센서는 짧은 시간 내에 변위 값을 측정하기 유리하나 적분 오차가 발생하고, 가 속도 센서는 느리지만 후술할 roll, pitch의 절대 각을 구할 수 있어, 가속도 센서 및 각속도 센서는 서로 보완 (Complementary) 관계라 할 수 있다. 센서 값의 융합 과정에서 칼만 필터(Kalman Filter) 또는 상호보완필터 (Complementary Filter)를 사용한다. 도 4는 일 실시예에 따른 물체의 6 자유도를 나타내는 도면이다. 6 자유도(6-Degrees of Freedom, 6-DOF)는 물체의 여섯 개의 운동 방향을 의미한다. 6 자유도 중 3 자유도는 위치(Position)이며 나머지 3 자유도는 자세(Orientation)라 한다. 6 자유도를 갖고 움직이는 물체는 위(+z), 아래(-z), 앞(+x), 뒤(-x), 왼쪽(+y), 오른쪽(-y)의 세 방향(x, y, z축)으로 이동할 수 있으므로 3 자유도를 가지며 좌우(Roll, \"롤\"), 앞뒤(Pitch, \"피치\"), 위아래(Yaw, \"요\")로 회전할 수 있으므로 3 자유도를 추가로 갖는다. IMU는 가속도 센서와 각속도 센서를 포함하므로, 3축의 가속도계와 3축의 각속도계를 가진다. 전술한 바와 같이, 각속도 센서를 이용하여 물체의 자세를 추정하고 물체가 움직임에 따라 자세 정보를 업데이트 하기 위해 서는 초기 물체의 롤, 피치, 요 각도에 각속도 센서로부터 계산된 회전각을 적분하여 누적해야 한다. 롤과 피치는 가속도 센서로부터 구할 수 있어 시간에 따라 적분할 필요가 없다. 그러나 요는 가속도 센서로부터 구할 수 없어 각속도 센서의 출력 값을 적분함으로써 구해야 하는데, 이 과정에서 누적 오차가 발생하게 된다. 도 5는 일 실시예에 따른 차량 좌표계 및 그 내부에 임의로 배향된 IMU를 개략적으로 도시한 예시도이다. 도 5를 참고하면, 차량의 움직임을 측정하기 위하여 차량 내부에 임의로 배향된 IMU는 가속도 센서 및 각속도 센서를 포함할 수 있다. 이 때, IMU 좌표계는 차량 좌표계와 일치하지 않을 수 있다. 전술한 IMU의 특징으로 인해 시간이 지남에 따라 차량 좌표계와 IMU 좌표계의 비 정렬 오차가 누적되는 문제 등을 해결하고 차량의 움직임을 정확하게 표현하기 위해서는 IMU 좌표계와 차량 좌표계를 정렬할 필요가 있다. IMU 좌표계와 차량 좌표계를 정렬하는 것은 각각의 좌표 시스템에 대응하는 좌표 축이 상호 평행하게 배향되도록 보정하는 것을 의미할 수 있다. 구체적으로, IMU 좌표계의 x축은 차량 좌표계의 x축에, IMU 좌표계의 y축은 차량 좌표계의 y축에, IMU 좌표계의 z축은 차량 좌표계의 z축에 평행 하게 배향되도록 보정하는 것을 의미할 수 있다.차량은 평탄한 지면만을 주행하지 않으므로 경사에 의한 중력 성분으로 인해 가속도 센서 값을 곧바로 중력방향 데이터로 간주할 수 없다. 이 때, 경사를 감지할 때마다 종방향 및 횡방향에 포함된 중력 가속도를 강제적으로 제거하면 차량 자체의 가속도(예를 들어, 엑셀 또는 브레이크 등에 의한 가속도)는 잘 설명할 수 있으나, 결과 적으로 IMU 좌표계와 차량 좌표계의 불일치를 야기하여 IMU 데이터를 이용한 추가적인 분석을 어렵게 한다는 문제가 있다. 또한, 차량은 우회전 및 좌회전 등 큰 각속도를 가지는 주행 환경에 놓이므로 회전하지 않는 전진방향 운동을 검출해야 하는데, GPS의 요 미분 값을 활용하는 경우 노이즈로 인해 오차가 커진다는 문제가 있다. 따라서 이하 도 6을 통해 경사면 주행 및 곡선 주행을 포함하는 일반적인 주행 환경에서도 IMU 좌표계 및 차량 좌표계를 정렬하는 방법을 상세히 서술하기로 한다. 도 6은 일 실시예에 따른 최종 정렬 행렬을 도출하는 방법의 흐름도이다. 본 발명의 일 실시예에 따른 좌표계 정렬 장치(이하, \"장치\"라 함)는 차량의 IMU 데이터 및 GPS 데이터를 획득 할 수 있다(단계 610). IMU 데이터는 차량에 부착 또는 구비된 IMU로부터 획득된 차량의 가속도 및 각속도를 포함하는 데이터일 수 있 다. 차량의 가속도는 IMU의 가속도 센서, 차량의 각속도는 IMU의 각속도 센서로부터 측정된 것일 수 있다. 이 때, IMU 데이터는 IMU 좌표계에 대응되는 데이터이며 이는 차량 좌표계와 정렬되지 않은 데이터일 수 있다. 또한, GPS 데이터는 차량 또는 차량에 탑재된 GPS로부터 획득된 차량의 속도를 포함하는 데이터일 수 있다. GPS 데이터는 위성과의 통신을 통해 차량의 위치를 계산하여 획득되는 것으로 지점, 경로, 궤적 등의 데이터를 포함 한다. 이동 중에 자동으로 저장된 위치들을 트랙 포인트라고 하는데, 트랙 포인트에 입력되는 속성은 좌표, 고 도, 시각이 있다. 경로를 구성하는 위치들은 지점이며 궤적을 구성하는 위치들은 트랙 포인트인 점에 상기 경로 와 궤적에 차이가 있다. 즉, GPS 데이터는 차량의 위치로부터 도출되는 차량의 속도, 트랙 포인트에 입력된 좌 표, 고도, 시각, 경로 및 궤적이 모두 포함될 수 있다. 일 실시예에서, 장치는 차량의 등속운동 구간을 추출할 수 있다(단계 620). 등속운동 구간이란 차량이 등속운동 하는 것으로 추정되는 구간으로, 장치는 IMU 데이터 및 GPS 데이터에 기초하여 차량의 등속운동 구간을 추출할 수 있다. 구체적으로, 장치는 GPS로부터 차량의 속도를 획득하여 속도의 크기의 변화량을 산출할 수 있다. 속도의 크기의 변화량, 즉 속력의 변화량은 GPS 데이터로부터 산출된 차량의 가속도일 수도 있으나 GPS를 통해 수집되는 속력 은 방향을 가지지 않는 1차원 값으로 수집되어 회전 운동을 구분하지 하므로, 장치는 속력의 변화량을 이용하여 등속운동 구간을 추출할 수 있다. 예를 들어, 3초당 속력이 1km/h 이하로 변화하면 가속도가 중력의 1% 미만이 므로, 장치는 속력의 변화량이 특정 임계치 이하인 구간을 등속운동 구간으로 추정할 수 있다. 한편, 회전 운동이 발생하면 측정되는 가속도에 중력 외의 원심력이 포함되므로, 장치는 회전 운동에 의한 원심 력을 제거하기 위하여 IMU로부터 획득되는 가속도를 참조할 수 있다. 예를 들어, 등속운동 중인 차량은 가속도 의 표준 편차가 일정하게 유지되는 경향이 있다. 따라서, 장치는 IMU로부터 차량의 가속도를 획득하고 가속도 크기의 표준편차를 이용하여 등속운동 구간을 추출할 수 있다. 일 실시예에서, 장치는 표준편차가 특정 임계치 이하인 구간을 등속운동 구간으로 추정할 수 있다. 이 때, 장치가 가속도 크기의 표준편차를 산출함에 있어 윈 도우 크기는 2초일 수 있다. 다른 실시예에서, 장치는 상기 속력의 변화량에 관한 조건과 상기 가속도 크기의 표준편차에 관한 조건을 모두 만족하는 구간을 등속운동 구간으로 추출할 수 있다. 예를 들어, 장치는 GPS 데이터에 기초하여 산출된 차량의 속력의 변화량이 제1 임계치 이하이고, 또한 IMU 데이터에 기초하여 산출된 가속도의 크기의 표준편차가 제2 임 계치 이하인 구간을 등속운동 구간으로 추출할 수 있다. 이 때, 등속운동 구간은 하나 또는 복수의 구간일 수 있으며 제1 임계치 및 제2 임계치는 도로 상태 등 차량의 주행 환경, IMU 성능, 차량의 특성 등에 의하여 조정 될 수 있다. 일 실시예에서, 장치는 등속운동 구간에 기초하여 경사각 보정 행렬을 도출할 수 있다(단계 630). 경사각 보정 행렬은 평균 경사각 만큼 피치 방향으로 회전시키는 행렬을 의미하는데, 이 때 평균 경사각은 GPS 데이터를 이 용하여 산출할 수 있다. 도 7은 일 실시예에 따른 차량의 평균 경사각을 구하는 방법을 설명하기 위한 도면이다. 도 7을 참조하면, 세 개의 등속운동 구간(710, 720, 730)이 도시되어 있다. 등속운동 구간(710, 720, 730)은 전 술한 바와 같이 장치가 IMU 데이터 및 GPS 데이터에 기초하여 추출한, 차량이 등속운동 하는 것으로 추정되는 구간으로, 등속운동 구간(710, 720, 730)의 데이터들은 가속도의 크기가 0에 근접한 값인 것을 확인할 수 있다. 일 실시예에서, 장치는 등속운동 구간 전체에 대한 평균 경사각을 산출할 수 있다. 예를 들어, 장치는 하나 이상의 등속운동 구간(710, 720, 730)을 하나의 시간 축에 연속된 데이터로 연결하여 등속운동 구간 전체의 고도 프로파일을 형성할 수 있다. IMU 데이터는 가속도에 관한 데이터를 포함하고 GPS 데이터는 고도에 관한 데이터도 포함하므로 IMU 데이터 및 GPS 데이터를 결합하여 이용하면 장치는 등속운 동 구간(710, 720, 730)에서 시간에 따른 고도 변화 그래프를 생성할 수 있다. 또는, 고도에 관한 데이터는 GPS 데이터가 아닌 기압계로부터 획득한 데이터일 수 있으므로 장치는 IMU 데이터, GPS 데이터 및 기압계 데이터 중 적어도 하나에 기초하여 등속운동 구간(710, 720, 730)에서 시간에 따른 고도 변화 그래프를 생성할 수 있다. 이 때, 장치는 등속운동 구간(710, 720, 730)의 마지막 데이터가 바로 다음 등속운동 구간(710, 720, 730)의 첫 번째 데이터와 일치하도록 모든 등속운동 구간(710, 720, 730)에 대한 그래프를 변형하여 등속운동 구간 전체의 고도 프로파일을 형성할 수 있다. 장치는 등속운동 구간 전체의 고도 프로파일의 첫 번째 데이터 값 과 마지막 데이터 값에 기초하여 등속운동 구간 전체에 대한 평균 경사각을 산출할 수 있다. 또는, 다른 예를 들어, 장치는 GPS 데이터를 이용하여 등속운동 구간(710, 720, 730) 각각의 구간 고도차 및 구 간 이동거리에 기초하여 등속운동 구간 전체에 대한 평균 경사각을 산출할 수 있다. 구간 고도차 및 구간 이동 거리란 해당 등속운동 구간(710, 720, 730)의 경사각 및 이동거리고, 구간 고도차는 고도가 높아지면 양수의 값, 고도가 낮아지면 음수의 값을 갖게 된다. GPS 데이터는 3차원 상의 벡터로 획득되므로 속도를 시간에 따라 적분하여 산출한 이동거리를 사용할 수 있다. 일 실시예에 따른 등속운동 구간(710, 720, 730)과 같이, 짧은 시간동안 측정한 속도를 이용하여 이동거리를 산 출하는 경우는 오차가 크게 발생하지 않기 때문에 장치는 GPS 데이터를 이용하여 구간 이동거리를 획득할 수 있 다. 또한, 장치는 GPS 데이터를 시간 축에 따라 고도를 나타내고, 최소 제곱법(Least Square) 방식으로 고도 변화 직선을 추정하여 구간 양 끝 지점의 차이를 구간 고도차로 사용할 수 있다. 최소 제곱법이란 예측 값과 실제 값 의 차이를 최소화하는 선형 모델을 도출하는 방법으로, 모든 포인트의 least square의 합을 구하는 것이 기본적 이다. 따라서, 장치는 GPS 데이터 중 시간에 따른 고도 데이터에 대하여, 차이의 제곱의 합이 가장 작은 선형 모델을 산출하여 이를 고도 변화 직선으로 획득 또는 추정할 수 있다. 이후, 장치는 고도 변화 직선의 양 끝 지 점에서의 고도 변화 직선의 고도차를 산출하여 구간 고도차를 획득할 수 있다. 또한, 장치는 획득한 구간 이동거리 및 구간 고도차에 기초하여 평균 경사각을 산출할 수 있다. 과정은 아래 수 학식 1과 같다. 수학식 1"}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "상기 수학식 1에서 는 평균 경사각, , 및 는 각각 k 번째 등속운동 구간(710, 720, 730)에서의 구 간 경사각, 구간 이동거리 및 구간 고도차에 해당한다. 일 실시예에서, 장치는 상기 수학식 1을 통해 산출한 에 대해 아크탄젠트(Arctangent) 값을 계산하여 평 균 경사각인 를 산출할 수 있으며, 평균 경사각에 기초하여 경사각 보정 행렬을 도출할 수 있다. 경사각 보정 행렬은 입력 데이터를 평균 경사각 만큼 피치 방향으로 회전시키는 회전 행렬일 수 있다. 일 실시예에서, 피치 방향은 차량이 급감/가속에 의해 앞 또는 뒤 방향으로 기울어지는 방향을 의미할 수 있다. 즉, 도 3을 참조하면, 경사각 보정 행렬은 차량의 전진방향이 y축인 경우에 \"Pitch\" 방향으로 만큼 회전시키는 회전 행렬을 의미할 수 있다. 다시 도 6으로 돌아와서, 일 실시예에서, 장치는 등속운동 구간에 기초하여 중력방향 정렬 행렬을 도출할 수 있 다(단계 640). 차량이 등속으로 전진운동 하는 중에는 중력방향의 가속도만 측정되므로 장치는 중력방향 정렬 행렬을 도출함에 있어 등속운동 구간에서의 가속도 데이터를 수집하여 사용할 수 있다. 일 실시예에서, 장치는 등속운동 구간의 가속도 벡터를 획득하고 가속도 벡터의 가중평균(Weighted Average)에 기초하여 중력 벡터를 산출할 수 있다. 가중평균은 파라미터에 중요도나 영향도에 해당하는 각각의 가중치를 곱 하여 구한 평균을 의미한다. 구체적으로, 장치는 GPS 데이터가 일정한 시간 간격으로 측정되는 경우 속도를 가중치로 하여 가속도 벡터의 가 중평균을 계산하고 GPS 데이터가 일정하지 않은 시간 간격으로 측정되는 경우 이동거리를 가중치로 하여 가속도 벡터의 가중평균을 계산할 수 있다. 이에 따라, 장치는 가속도 벡터의 평균을 계산함에 있어 국소 지역의 특성 이 과하게 반영되는 등 왜곡된 평균이 산출되는 상황을 방지할 수 있다. 예를 들어, 차량의 속도가 매우 낮은 환경에서 장치는 국소적인 지역에서의 GPS 데이터를 상대적으로 더 많이 수집하게 되므로 단순평균을 사용할 경 우 왜곡이 발생할 수 있다. 따라서, 상기 각 경우에 속도 또는 이동거리를 가중치로 하여 가중평균을 계산함에 따라 가속도 벡터의 평균의 왜곡을 최소화할 수 있다. 한편, 상기와 같은 실시예로 산출된 중력 벡터는 경사각 보정 행렬에 기초하여 경사 효과가 제거되지 않은 상태이므로 상기 중력 벡터에는 도로경사로 인한 영향이 반영되어 있을 수 있다. 일 실시예에서, 장치는 중력 벡터에 기초하여 중력방향 정렬 행렬을 도출할 수 있다. 예를 들어, 장치는 중력 벡터를 차량 좌표계의 수직 방향으로 회전시키는 회전 행렬을 중력방향 정렬 행렬로 도출할 수 있다. 다시 말해, 중력방향 정렬 행렬은 중력 벡터가 수직 축(차량 좌표계에서의 중력방향)과 일치하도록 회전하는 회전 행 렬에 해당할 수 있다. 일 실시예에 따른 중력방향 정렬 행렬에 기초하여 차량의 가속도 데이터 및 각속도 데이 터를 보정하는 경우 차량 좌표계와 중력방향으로 정렬된 데이터를 획득할 수 있다. 일 실시예에서, 장치는 등속운동 구간에 기초하여 전진방향 정렬 행렬을 도출할 수 있다(단계 650). 도 6을 참조하면, 전진방향 정렬은 상기 단계 640의 중력방향 정렬 행렬에 따라 중력방향으로 정렬된 데이터에 대해 이루어질 수 있다. 다만, 전진방향 정렬 행렬은 등속운동 구간이 아닌 IMU 데이터의 전체 구간에 기초하여 산출하게 된다. 일 실시예에서, 장치는 IMU 데이터를 샘플링 하여 타겟 데이터를 획득할 수 있다. 가속도의 크기가 작은 데이터 에는 경사 효과로 인한 노이즈가, 가속도의 크기가 큰 데이터에는 급감/가속으로 인한 노이즈가 반영되어 있을 수 있으며 각속도의 크기가 큰 데이터에는 급회전으로 인한 노이즈가 반영되어 있을 수 있다. 따라서 데이터 선 택 과정을 통해 IMU 데이터에 경사 효과, 급감/가속 및 급회전으로 인한 노이즈를 제거하여 전진방향 정렬 행렬 계산에 활용할 데이터를 획득하기 위함이다. 먼저, 장치는 IMU 데이터에서 중력방향(수직방향) 차원을 제외한 2차원 IMU 데이터를 생성하고 2차원 IMU 데이 터에 대하여 가속도의 크기를 계산할 수 있다. 또한, 장치는 2차원 IMU 데이터로부터 가속도의 크기를 이용하여 1차 샘플링을 수행할 수 있다. 예를 들어, 장 치는 2차원 IMU 데이터 중에서 가속도의 크기의 분위가 특정 비율범위 이내인 데이터를 추출할 수 있다. 이와 같이 가속도의 크기를 이용하여 추출된 데이터를 제1 데이터라고 한다. 구체적으로, 장치는 가속도의 크기의 분 위가 상위 20%인 데이터 및 하위 20%인 데이터를 제거한 제1 데이터를 추출할 수 있다. 한편, 상기 가속도의 크기의 분위 값은 조정될 수 있다. 예를 들어, 장치는 경사 효과 및 급감/가속으로 인한 노이즈를 충분히 제거하기 위하여 좁은 구간의 데이터만을 추출할 수 있으나 충분한 데이터 확보를 통해 수치적 안정성을 도모하기 위하여 넓은 구간의 데이터를 추출할 수도 있다. 이후, 장치는 제1 데이터로부터 각속도의 크기를 이용하여 2차 샘플링을 수행할 수 있다. 이하, 도 8을 참조하 여 2차 샘플링에 관하여 상세히 서술한다. 도 8은 일 실시예에 따른 전진방향 정렬 행렬을 도출하기 위한 샘플링 과정을 나타내는 도면이다. 도 8에 도시된 그래프는 전술한 제1 데이터(또는 2차원 IMU 데이터)를 의미할 수 있다. 일 실시예에서, 장치는 제1 데이터에 대하여 요 절대값을 이용한 기준 값을 설정할 수 있다. 구체적으로, 장치는 요 절대값이 하위 63% 또는 1 시그마(1-sigma)에 해당하는 분위 값을 기준 값으로 설정할 수 있다. 이후, 장치는 제1 데이터 중에서 상기 기준 값보다 작은 요 절대값을 갖는 데이터를 추출할 수 있다. 이와 같이 추출된 데이터를 제2 데이터라고 한다. 다만, 본 실시예에서 63% 또는 1 시그마는 급회전에 의해 횡방향 가속도가 크게 나타나는 구간을 제외하기 위하 여 설정한 기준 값으로, 상기 요 절대값 크기의 분위 값은 통계적 또는 경험적으로 운전자의 운전 특성, 차량 특성 등에 의해 조정될 수 있다. 이후, 장치는 제2 데이터를 샘플링 하여 타겟 데이터를 획득할 수 있다. 예를 들어, 장치는 각속도의 부호 에 따라 제2 데이터를 복수의 그룹으로 분할하고, 상기 복수의 그룹 각각의 데이터를 소정의 방법에 따라 샘플링 하여 타겟 데이터를 획득할 수 있다. 구체적으로, 장치는 제2 데이터를 요 값의 부호에 따라 제1 그룹 및 제2 그룹(예를 들어, 제1 그룹은 요 값이 양수인 그룹, 제2 그룹은 요 값이 음수 인 그룹)으로 분할하여, 제1 그룹 및 제2 그룹의 데이터를 소정의 방법에 따라 랜덤 비복원 추출할 수 있다. 예를 들어, 소정의 방법은 제1 그룹 및 제2 그룹에서 각각 제1 그룹의 데이터 개수 및 제2 그룹 의 데이터 개수 중 더 작은 데이터 개수만큼 샘플링 하는 것일 수 있다. 다시 말해, 제1 그룹 및 제2 그룹 중 데이터 개수가 더 많은 그룹을 다수 그룹, 데이터 개수가 더 적은 그룹을 소수 그룹이라고 정의할 때, 장치는 다수 그룹의 데이터를 소수 그룹의 데이터 개수만큼 랜덤 비복원 추출하고 추출된 데이터를 소수 그 룹의 데이터와 병합하는 방법에 따라 샘플링 할 수 있다. 본 실시예에 따른 소정의 방법에 의하면, 제1 그룹 및 제2 그룹에서 각각 동일한 개수의 데이터를 추출하여 타겟 데이터를 생성할 수 있다. 도 8에는 요 값이 음수인 그룹이 소수 그룹인 것으로 도시하였으나, 그래프는 획득되는 IMU 데이터에 따라 그 형태가 다양할 수 있으므로 요 값이 양수인 그룹이 소수 그룹이 될 수 있다. 또한, 제1 그룹과 제2 그룹 의 데이터 개수가 동일한 경우, 소정의 방법에 따른 샘플링 없이 제2 데이터가 상기 타겟 데이터가 될 수 있다. 이후, 장치는 타겟 데이터로부터 공분산 행렬(Covariance Matrix)을 추출할 수 있다. 공분산 행렬은 확률 벡터(Random vector, 각 원소가 각각 확률 변수인 벡터) 에 대해, 의 번째 원소와 번째 원소 사이의 공분산을 i행 j열의 원소로 갖는 행렬을 의미한다. 따라서, n개의 확률 변수를 원소로 갖 는 확률 벡터 의 공분산 행렬은 크기가 인 정방 행렬(square matrix)이 됨을 알 수 있다. 본 발명의 일 실시예에 따른 타겟 데이터는, 전술한 바와 같이 중력방향 차원을 제거한 2차원 IMU 데이터의 일부이므로 타 겟 데이터로부터 추출한 공분산 행렬은 크기가 인 정방 행렬이 된다. 이후, 장치는 공분산 행렬을 특이 값 분해(Singular Value Decomposition)하여 유니터리 행렬(Unitary Matri x)을 추출할 수 있다. 특이 값 분해란 행렬을 직교 행렬(Orthogonal Matrix)과 대각 행렬(Diagonal Matrix)로 분해하는 방법으로, 임의의 공분산 행렬 가 와 같이 특이 값 분해되는 경우 켤레 전치(Conjugate Transpose)가 역행렬과 같은 복소수 정사각 행렬이 유니터리 행렬( )이다. 이후, 장치는 유니터리 행렬을 이용하여 후보 검증을 수행함으로써 전진방향 정렬 행렬을 도출할 수 있다. 후보 검증이란, 상기 추출한 유니터리 행렬을 전진방향 정렬 행렬로 결정할지 또는 상기 추출한 유니터리 행렬을 변 형한 행렬을 전진방향 정렬 행렬로 결정할지 여부를 결정하는 과정일 수 있다. 예를 들어, 장치는 유니터리 행렬의 행렬식을 계산하여 유니터리 행렬이 반사행렬(Reflection Matrix)인지 여부 를 결정하여 행렬식의 부호에 따라 후보 검증을 수행할 수 있다. 행렬식이 음수인 경우 반사행렬에 해당하므로 장치는 거울 상 제거를 위해 유니터리 행렬을 변형하여 추가적인 후보 검증을 수행해야 하며, 행렬식이 양수인 경우 반사행렬에 해당하지 않으므로 장치는 유니터리 행렬을 전진방향 정렬 행렬로 결정할 수 있다. 이하 행렬 식이 음수인 경우 거울 상 제거 방법에 대하여 서술한다. 일 실시예에서, 장치는 유니터리 행렬의 1행에 임의의 음수를 곱함으로써 제1 후보 행렬을 생성하고, 유니터리 행렬의 2행에 임의의 양수를 곱함으로써 제2 후보 행렬을 생성할 수 있다. 또한, 장치는 상기 제1 및 제2 후보행렬 중에, 전진방향 데이터에 제1 후보 행렬 및 제2 후보 행렬을 각각 곱하여 전진방향 데이터를 정렬한 결과 가속도의 평균이 양수가 되도록 보정하는 후보 행렬을 전진방향 정렬 행렬로 결정할 수 있다. 이 때, 전진방향 데이터란 IMU 데이터로부터 가속도가 양수인 데이터를 추출한 것이다. 한편, 후보검증을 수행한 결과 도출된 전진방향 정렬 행렬은 크기의 유니터리 행렬로부터 도출된 것이므 로 마찬가지로 크기를 갖는다. 그러나 IMU에 의해 획득되는 3차원의 데이터를 전진방향으로 정렬하기 위 해서는 전진방향 정렬 행렬이 크기를 가져야 한다. 따라서, 일 실시예에서, 장치는 상기 행렬식이 양수인 유니터리 행렬, 제1 후보 행렬 및 제2 후보 행렬 중 후보 검증 결과 선택된 어느 하나의 행렬에 대하여 3행 3열을 추가하여 크기를 갖는 전진방향 정렬 행렬을 도 출할 수 있다. 이 때, 3행 1열, 3행 2열, 1행 3열 및 2행 3열에는 0을, 3행 3열에는 1을 부여함으로써, 행렬에 실질적인 의미 부여 없이 형식적으로 적절한 크기를 부여할 수 있다. 본 발명의 일 실시예에 따른 전진방향 정렬 행렬은 통계적 경험에 기반하여 도출된 것이다. 차량의 2차원 가속 도 데이터를 그래프로 나타내면 타원형 분포를 가진다. 이 때, 차량의 종방향 가속도보다 전진방향 가속도가 더 크다는 통계를 기반으로, 타원의 장축은 종방향을 의미한다고 추정할 수 있다. 따라서 상기 실시예에 따라 도출 한 전진방향 정렬 행렬은 타원의 장축을 차량의 종방향, 즉 차량 좌표계의 x축과 정렬시키는 회전 행렬이라고 이해할 수 있다. 다시 도 6으로 돌아와서, 일 실시예에서, 장치는 중력방향 정렬 행렬, 전진방향 정렬 행렬 빛 경사각 보정 행렬 로부터 최종 정렬 행렬을 도출할 수 있다(단계 660). 또한, 장치는 최종 정렬 행렬에 기초하여 IMU 좌표계를 차 량 좌표계에 대응되도록 보정할 수 있다. 일 실시예에서, 경사각 보정 행렬을 , 중력방향 정렬 행렬을 , 전진방향 정렬 행렬을 라고 할 때, 최 종 정렬 행렬 은 일 수 있다. 또는, 최종 정렬 행렬 은 일 수 있다. 따라서 장치는 IMU 로부터 획득되는 IMU 데이터에 최종 정렬 행렬 을 곱하여 IMU 좌표계를 차량 좌표계에 대응되도록 보정할 수 있다. 최종 정렬 행렬 이 인 경우, IMU 데이터에 을 곱하는 것은, 먼저 IMU 데이터에 를 곱하여 중력 방향으로 정렬하고, 중력 방향으로 정렬된 데이터에 를 곱하여 전진방향으로 정렬하고, 마지막으로 중력방향 및 전진방향으로 정렬된 데이터에 를 곱하여 경사각을 보정하는 것을 의미한다. 마찬가지로, 최종 정렬 행렬 이 인 경우, IMU 데이터에 을 곱하는 것은, 먼저 IMU 데이터에 를 곱하여 경사각을 보정하고, 경사각이 보정된 데이터에 를 곱하여 중력방향으로 정렬하고, 마지막으로 경사각 보정 및 중력방향으로 정렬 된 데이터에 를 곱하여 전진방향으로 정렬하는 것을 의미한다. 그러나, 장치가 최종 정렬 행렬을 도출하는 방법은 상술한 실시예에 제한되지 않는다. 따라서 장치는 IMU 데이터를 모두 차량 좌표계와 축 정렬시켜 차량 좌표계와 일치하는 IMU 데이터를 확보할 수 있다. 또한, 본 발명의 일 실시예에 따른 좌표계 정렬 방법에 따르면 차량이 평탄하지 않은 지면이나 곡선 도로 를 주행하는 경우 또는 회전 주행하는 경우에 획득된 데이터도 활용하여 정렬 행렬을 도출할 수 있으며, 통계적 방법을 활용하여 데이터가 많을수록 정확한 정렬 행렬을 도출할 수 있다. 도 9는 일 실시예에 따른 IMU 좌표계를 차량 좌표계와 정렬하는 방법의 흐름도이다. 단계 910에서, 장치는 차량의 IMU로부터 차량의 가속도 및 각속도를 포함하는 IMU 데이터를 획득하고, GPS로부 터 차량의 속도를 포함하는 GPS 데이터를 획득할 수 있다. 단계 920에서, 장치는 IMU 데이터 및 GPS 데이터에 기초하여 차량이 등속운동 하는 것으로 추정되는 하나 이상 의 등속운동 구간을 추출할 수 있다.일 실시예에서, 장치는 가속도의 크기의 표준편차를 산출할 수 있다. 일 실시예에서, 장치는 GPS 데이터에 기초하여 산출된 차량의 속력의 변화량이 제1 임계치 이하이고 표준편차가 제2 임계치 이하인 하나 이상의 구간을 등속운동 구간으로 추출할 수 있다. 단계 930에서, 장치는 하나 이상의 등속운동 구간에 기초하여 경사각 보정 행렬 및 중력방향 정렬 행렬을 도출 할 수 있다. 일 실시예에서, 장치는 GPS 데이터를 이용하여 하나 이상의 등속운동 구간 각각의 구간 고도차 및 구간 이동거 리를 획득할 수 있다. 일 실시예에서, 구간 고도차는 GPS 데이터로부터 추정된 고도 변화 직선에 대하여 등속운동 구간 양끝 지점에서 의 고도 변화 직선의 고도차에 해당할 수 있고, 구간 이동거리는 속도를 시간에 따라 적분한 것일 수 있고, 경 사각 보정 행렬은 평균 경사각만큼 피치 방향으로 회전시키는 회전 행렬일 수 있다. 일 실시예에서, 장치는 구간 고도차 및 구간 이동거리에 기초하여 하나 이상의 등속운동 구간 전체에 대한 평균 경사각을 산출할 수 있다. 일 실시예에서, 장치는 평균 경사각에 기초하여 경사각 보정 행렬을 도출할 수 있다. 일 실시예에서, 장치는 하나 이상의 등속운동 구간의 가속도 벡터를 획득하고 가속도 벡터의 가중평균에 기초하 여 중력 벡터를 산출할 수 있다. 일 실시예에서, 장치는 GPS 데이터가 일정한 시간 간격으로 측정되는 경우, 속도를 가중치로 하여 중력 벡터를 산출하고, GPS 데이터가 일정하지 않은 시간 간격으로 측정되는 경우, 차량의 이동거리를 가중치로 하여 중력 벡터를 산출할 수 있다. 일 실시예에서, 장치는 중력 벡터를 차량 좌표계의 수직 방향으로 회전시키는 회전 행렬을 중력방향 정렬 행렬 로 도출할 수 있다. 단계 940에서, 장치는 IMU 데이터 및 중력방향 정렬 행렬에 기초하여 전진방향 정렬 행렬을 도출할 수 있다. 일 실시예에서, 장치는 IMU 데이터를 샘플링 하여 타겟 데이터를 획득할 수 있다. 일 실시예에서, 장치는 IMU 데이터로부터 가속도의 크기를 이용하여 제1 데이터를 추출하고, 제1 데이터로부터 각속도의 크기를 이용하여 제2 데이터를 추출할 수 있다. 일 실시예에서, 장치는 제2 데이터를 샘플링 하여 타겟 데이터를 획득할 수 있다. 일 실시예에서, 장치는 제2 데이터를 각속도의 부호에 따라 제1 그룹 및 제2 그룹으로 분할하고, 제1 그룹 및 제2 그룹의 데이터를 소정의 방법에 따라 랜덤 비 복원 추출하여 타겟 데이터를 획득할 수 있다. 일 실시예에서, 소정의 방법은 제1 그룹 및 제2 그룹에서 각각 기준 샘플개수 만큼 샘플링 하는 것일 수 있다. 이 때, 기준 샘플개수는 제1 그룹의 데이터 개수 및 제2 그룹의 데이터 개수 중 더 작은 데이터 개수에 해당할 수 있다. 일 실시예에서, 장치는 타겟 데이터로부터 공분산 행렬을 추출하고, 공분산 행렬에 기초하여 전진방향 정렬 행 렬을 도출할 수 있다. 일 실시예에서, 장치는 공분산 행렬을 특이 값 분해하여 유니터리 행렬을 추출할 수 있다. 일 실시예에서, 장치는 유니터리 행렬을 이용하여 후보 검증을 수행함으로써 전진방향 정렬 행렬을 도출할 수 있다. 일 실시예에서, 장치는 유니터리 행렬의 행렬식을 계산하고, 행렬식이 음수인 경우, 유니터리 행렬을 변형하여 두 개의 후보 행렬을 생성하고 두 개의 후보 행렬 중 어느 하나의 행렬을 선택하되, 행렬식이 양수인 경우 유니 터리 행렬을 선택할 수 있다. 이 때, 두 개의 후보 행렬은 유니터리 행렬의 1행에 임의의 음수를 곱함으로써 생 성된 제1 후보 행렬 및 유니터리 행렬의 2행에 임의의 음수를 곱함으로써 생성된 제2 후보 행렬일 수 있다. 단계 950에서, 장치는 중력방향 정렬 행렬, 전진방향 정렬 행렬,및 경사각 보정 행렬로부터 최종 정렬 행렬을 도출할 수 있다. 단계 960에서, 장치는 최종 정렬 행렬에 기초하여, IMU 좌표계를 차량의 좌표계에 대응되도록 보정할 수 있다. 도 10은 일 실시예에 따른 IMU 좌표계를 차량 좌표계와 정렬하는 장치의 블록도이다. 도 10을 참조하면, 장치는 통신부, 프로세서 및 DB를 포함할 수 있다. 도 10의 장치 에는 실시예와 관련된 구성요소들만이 도시되어 있다. 따라서, 도 10에 도시된 구성요소들 외에 다른 범"}
{"patent_id": "10-2022-0157398", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "용적인 구성요소들이 더 포함될 수 있음을 당해 기술분야의 통상의 기술자라면 이해할 수 있다. 통신부는 외부 서버 또는 외부 장치와 유선/무선 통신을 하게 하는 하나 이상의 구성 요소를 포함할 수 있다. 예를 들어, 통신부는, 근거리 통신부(미도시), 이동 통신부(미도시) 및 방송 수신부(미도시) 중 적 어도 하나를 포함할 수 있다. 일 실시예에서, 통신부는 IMU로부터 차량의 가속도 및 각속도를 포함하는 IMU 데이터를 획득할 수 있다. 또는, 일 실시예에서, 통신부는 GPS로부터 차량의 속도를 포함하는 GPS 데 이터를 획득할 수 있다. DB는 장치 내에서 처리되는 각종 데이터들을 저장하는 하드웨어로서, 프로세서의 처리 및 제 어를 위한 프로그램을 저장할 수 있다. DB는 DRAM(dynamic random access memory), SRAM(static random access memory) 등과 같은 RAM(random access memory), ROM(read-only memory), EEPROM(electrically erasable programmable read-only memory), CD-ROM, 블루레이 또는 다른 광학 디스크 스토리지, HDD(hard disk drive), SSD(solid state drive), 또는 플 래시 메모리를 포함할 수 있다. 프로세서는 장치의 전반적인 동작을 제어한다. 예를 들어, 프로세서는 DB에 저장된 프 로그램들을 실행함으로써, 입력부(미도시), 디스플레이(미도시), 통신부, DB 등을 전반적으로 제어 할 수 있다. 프로세서는, DB에 저장된 프로그램들을 실행함으로써, 장치의 동작을 제어할 수 있다. 프로세서는 도 1 내지 도 9에서 상술한 장치의 동작 중 적어도 일부를 제어할 수 있다. 프로세서는 ASICs (application specific integrated circuits), DSPs(digital signal processors), DSPDs(digital signal processing devices), PLDs(programmable logic devices), FPGAs(field programmable gate arrays), 제어기(controllers), 마이크로 컨트롤러(micro-controllers), 마이크로 프로세서 (microprocessors), 기타 기능 수행을 위한 전기적 유닛 중 적어도 하나를 이용하여 구현될 수 있다. 일 실시예로, 장치는 이동성을 가지는 전자 장치일 수 있다. 예를 들어, 장치는 스마트폰, 태블릿 PC, PC, 스마트 TV, PDA(personal digital assistant), 랩톱, 미디어 플레이어, 네비게이션, 카메라가 탑재된 디바이스 및 기타 모바일 전자 장치로 구현될 수 있다. 또한, 장치는 통신 기능 및 데이터 프로세싱 기능 을 구비한 시계, 안경, 헤어 밴드 및 반지 등의 웨어러블 장치로 구현될 수 있다. 다른 실시예로, 장치는 차량 내에 임베디드되는 전자 장치일 수 있다. 예를 들어, 장치는 생산 과 정 이후 튜닝(tuning)을 통해 차량 내에 삽입되는 전자 장치일 수 있다. 이 경우, 장치 및 상술한 차량의 위치는 동일할 수 있다. 또 다른 실시예로, 장치는 차량 외부에 위치하는 서버일 수 있다. 서버는 네트워크를 통해 통신하여 명령, 코드, 파일, 컨텐츠, 서비스 등을 제공하는 컴퓨터 장치 또는 복수의 컴퓨터 장치들로 구현될 수 있다. 서버는 차량에 탑재된 장치들로부터 좌표계를 정렬하기 위해 필요한 데이터를 수신하고, 수신한 데이터에 기초 하여 좌표계를 정렬할 수 있다. 또 다른 실시예로, 장치에서 수행되는 프로세스는 이동성을 가지는 전자 장치, 차량 내에 임베디드 되는 전자 장치 및 차량 외부에 위치하는 서버 중 적어도 일부에 의해 수행될 수 있다. 본 발명에 따른 실시예는 컴퓨터 상에서 다양한 구성요소를 통하여 실행될 수 있는 컴퓨터 프로그램의 형태로 구현될 수 있으며, 이와 같은 컴퓨터 프로그램은 컴퓨터로 판독 가능한 매체에 기록될 수 있다. 이때, 매체는 하드 디스크, 플로피 디스크 및 자기 테이프와 같은 자기 매체, CD-ROM 및 DVD와 같은 광기록 매체, 플롭티컬 디스크(floptical disk)와 같은 자기-광 매체(magneto-optical medium), 및 ROM, RAM, 플래시 메모리 등과 같 은, 프로그램 명령어를 저장하고 실행하도록 특별히 구성된 하드웨어 장치를 포함할 수 있다. 한편, 상기 컴퓨터 프로그램은 본 발명을 위하여 특별히 설계되고 구성된 것이거나 컴퓨터 소프트웨어 분야의 당업자에게 공지되어 사용 가능한 것일 수 있다. 컴퓨터 프로그램의 예에는, 컴파일러에 의하여 만들어지는 것 과 같은 기계어 코드뿐만 아니라 인터프리터 등을 사용하여 컴퓨터에 의해서 실행될 수 있는 고급 언어 코드도포함될 수 있다. 일 실시예에 따르면, 본 개시의 다양한 실시예들에 따른 방법은 컴퓨터 프로그램 제품(computer program product)에 포함되어 제공될 수 있다. 컴퓨터 프로그램 제품은 상품으로서 판매자 및 구매자 간에 거래될 수 있 다. 컴퓨터 프로그램 제품은 기기로 읽을 수 있는 저장 매체(예: compact disc read only memory (CD-ROM))의 형태로 배포되거나, 또는 어플리케이션 스토어(예: 플레이 스토어TM)를 통해 또는 두 개의 사용자 장치들 간에 직접, 온라인으로 배포(예: 다운로드 또는 업로드)될 수 있다. 온라인 배포의 경우에, 컴퓨터 프로그램 제품의 적어도 일부는 제조사의 서버, 어플리케이션 스토어의 서버, 또는 중계 서버의 메모리와 같은 기기로 읽을 수 있는 저장 매체에 적어도 일시 저장되거나, 임시적으로 생성될 수 있다. 본 발명에 따른 방법을 구성하는 단계들에 대하여 명백하게 순서를 기재하거나 반하는 기재가 없다면, 상기 단 계들은 적당한 순서로 행해질 수 있다. 반드시 상기 단계들의 기재 순서에 따라 본 발명이 한정되는 것은 아니 다. 본 발명에서 모든 예들 또는 예시적인 용어의 사용은 단순히 본 발명을 상세히 설명하기 위한 것으로서 특 허청구범위에 의해 한정되지 않는 이상 상기 예들 또는 예시적인 용어로 인해 본 발명의 범위가 한정되는 것은 아니다. 또한, 당업자는 다양한 수정, 조합 및 변경이 부가된 특허청구범위 또는 그 균등물의 범주 내에서 설계 조건 및 팩터에 따라 구성될 수 있음을 알 수 있다. 따라서, 본 발명의 사상은 상기 설명된 실시 예에 국한되어 정해져서는 아니 되며, 후술하는 특허청구범위뿐만 아니라 이 특허청구범위와 균등한 또는 이로부터 등가적으로 변경된 모든 범위는 본 발명의 사상의 범주에 속한 다고 할 것이다."}
{"patent_id": "10-2022-0157398", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 일 실시예에 따른 차량에 탑재된 장치를 개략적으로 도시하는 도면이다. 도 2 및 도 3은 일 실시예에 따른 IMU를 구성하는 센서의 예시도이다. 도 4는 일 실시예에 따른 물체의 6 자유도를 나타내는 도면이다. 도 5는 일 실시예에 따른 차량 좌표계 및 그 내부에 임의로 배향된 IMU를 개략적으로 도시한 예시도이다. 도 6은 일 실시예에 따른 최종 정렬 행렬을 도출하는 방법의 흐름도이다. 도 7은 일 실시예에 따른 차량의 평균 경사각을 구하는 방법을 설명하기 위한 도면이다. 도 8은 일 실시예에 따른 전진방향 정렬 행렬을 도출하기 위한 샘플링 과정을 나타내는 도면이다. 도 9는 일 실시예에 따른 IMU 좌표계를 차량 좌표계와 정렬하는 방법의 흐름도이다. 도 10은 일 실시예에 따른 IMU 좌표계를 차량 좌표계와 정렬하는 장치의 블록도이다."}
