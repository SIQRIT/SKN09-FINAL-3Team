{"patent_id": "10-2005-0077508", "section": "특허_기본정보", "subsection": "특허정보", "content": {"출원번호": "10-2005-0077508", "출원인": "삼성중공업주식회사", "발명자": "이정환"}}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "곡가공공정수행시가스토치를검출하고추적하는영상처리부;공개특허10-2007-0023197-1-자연조명의변화,작업자의작업유무에관계없이게인벨류가자동조정되는자동게인처리부;곡가공공정수행시습득되는각종데이터를저장하는저장공간을자동으로생성하고,상기영상처리부를통하여인식되는곡가공공정의진행상황에따라작업데이터및작업이미지를상기저장공간에저장하는데이터처리부;를포함하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에있어서,상기영상처리부는캡쳐된이미지의이진화전처리하는단계와,컴퍼넌트레이블링단계및시공간필터를통과시키는단계를통해서현장에서이동되는가스토치를검출하고추적하는것을특징으로하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제1항에있어서,상기영상처리부를통하여가스토치가검출되는경우(작업자의가스토치작업할경우)시스템은정상모드로동작되어데이터저장루틴,이미지저장루틴이수행되며,가스토치를검출하지못하거나널이미지가입력되면(작업자의휴식/휴일경우)시스템은수면모드로동작되고,데이터저장루틴은정지하고,이미지저장루틴은지연되는것을특징으로하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제1항에있어서,상기영상처리부는시공간필터를적용하여추적하고자하는물체와배경물체를분리하게되고이때시간영역필터에사용되는가스토치의임계속도는0.5~12mm/sec로설정되고,공간영역(사이즈)에사용되는필터의임계값범위는4~11pixel로처리되는것을특징으로하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제1항에있어서,상기자동게인처리부는상기영상처리부가정상모드로작동하는경우게인값을변화시키지않으며,상기영상처리부가수면모드에서작동하는경우이전게인값을참조하여현재의조명조건에알맞은게인값을스캔해나가는게인값제어루프가수행되는것을특징으로하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에있어서,공개특허10-2007-0023197-2-상기데이터처리부는가열되는철판의위치,가열시간,가열속도,가열과정의영상,검출되는물체의크기,물체의질량중심,속도,면적,가스토치의검출시간을포함하는가스토치의검출및추적에관한정보,하나이상의카메라특성치중어느하나이상을저장하는것을특징으로하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제1항에있어서,상기데이터처리부는일자별,월별,년도별로데이터저장공간을매일자동생성시키고해당날짜의저장공간에데이터파일과이미지파일을저장하는것을특징으로하는곡가공작업의자동데이터수집을위한머신비젼시스템."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "곡가공공정의이미지를캡쳐하는제1단계;상기캡쳐된이미지를이진화전처리하는제2단계;상기이진화전처리를통하여인식되는컴퍼넌트를레이블링하는제3단계;상기레이블링된컴퍼넌트를시공간필터에통과시키는제4단계;상기제1내지제3단계를통하여가스토치를검출하는제5단계; 상기제5단계에서가스토치가검출되면,물체의질량중심,면적,크기중어느하나이상을계산하는제6단계;가열되는철판의위치,가열시간,가열속도,가열과정의영상,검출되는물체의크기,물체의질량중심,속도,면적,가스토치의검출시간을포함하는가스토치의검출및추적에관한정보,하나이상의카메라특성치중어느하나이상을저장하는제7단계;를포함하는 곡가공작업의자동데이터수집방법."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에있어서,상기컴퍼넌트를레이블링하는단계는이진화된영상을입력받는단계와,상기입력받은이진화영상을이미지스캔하는단계와,상기스캔된이미지영상에포함되는물체에라벨을부여하는단계와,동일물체에는동일라벨이부여되는단계가포함되는것을특징으로하는곡가공작업의자동데이터수집방법."}
{"patent_id": "10-2005-0077508", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제8항에있어서,상기곡가공공정의이미지를캡쳐하는단계는카메라조명의게인값을초기설정하는단계와,공개특허10-2007-0023197-3-상기초기값으로촬영된영상에검출된물체가없는경우게인값을증가시키는과정과,검출된물체의개수가복수인경우게인값을감소시키는과정과,검출된물체개수가한개이면게인값을고정시키는과정이수행되는단계가포함되는것을특징으로하는곡가공작업의자동데이터수집방법.명세서발명의상세한설명발명의목적발명이속하는기술및그분야의종래기술본발명은곡가공작업의자동데이터수집을위한머신비젼시스템및데이터수집방법에관한것이다.현재조선산업에있어,선체외판제작을위한곡가공공정은필수적이다.크게선박은프레스를이용한냉간가공과가스토치를이용한열간가공을통해서제조되는데,특히숙련된기능공의작업경험에의해전적으로의존하는열간가공공정에대한자동화요구가증대되어국내외적으로많은연구가진행되고있지만,아직까지도명확하게규명되거나완전한자동화를이루지는못하고있다.이처럼곡가공작업공정이거의대부분수작업으로이루어지고있는현재의상황에서자동화를위한첫걸음은반드시현장작업자의경험을지식화하는데있다.하지만현장에는너무나다양한조건들,예를들어가스토치의산소량,프로판가스에대한물성치,부재의형상이나,두께또는,사이즈,냉각방식등이존재하고,또한작업자들마다의능률또한달라서정형화된방법이부재한실정이다.보다상세히,강판의재질이나두께에따라거의대부분복수회의수작업으로곡가공공정이진행되고있으며,상기곡가공공정의자동화를이루는자가강판제작에보다높은생산성을기할수있으며고품질의강판을제작할수있다는것은자명한일이다.이에따라상기곡가공공정의자동화가필수적으로요구되며,이에선행하여열간가공에대한데이터수집과곡가공공정의노하우수집이필요하다.즉,곡가공공정의자동화를이루기위해서는곡가공작업공정중가장중요한데이터로인식되는가스토치에의한가열위치와가열속도,부재의형상,및이동궤적에대한데이터를수집할수있는현장데이터수집시스템이절대적으로요구된다.발명이이루고자하는기술적과제본발명은상기필요성을해결하기위하여관리자없이시스템스스로가곡가공작업의현장을모니터링하는동시에작업자와관련한중요데이터를수집할수있는곡가공작업의자동데이터수집을위한머신비젼시스템및데이터수집방법을개발하는것을목적으로한다.발명의구성상기목적을달성하기위한본발명은곡가공공정수행시가스토치를검출하고추적하는영상처리부,자연조명의변화에관계없이게인벨류를조정하여영상의그레이레벨을일정하게유지시키는자동게인처리부,곡가공공정수행시습득되는각종데이터를저장하는저장공간을자동으로생성하고,상기영상처리부를통하여인식되는곡가공공정의진행상황에따라작업데이터및작업이미지를상기저장공간에저장하는데이터처리부를포함하는곡가공작업의자동데이터수집을위한머신비젼시스템및데이터수집방법을제공할수있다.바람직한일실시예에따르면,상기영상처리부는캡쳐된이미지를이진화전처리하는단계와,컴퍼넌트를레이블링처리단계및시공간필터를통과시키는단계를통해서현장에서이동되는가스토치를검출하고추적하는것을특징으로한다.여기서,상기이진화전처리단계는수정컴퍼넌트레이블링알고리즘이사용되어수행되는것을특징으로한다.또한,상기영상처리부를통하여가스토치가검출되는경우시스템은정상모드로동작되어데이터저장루틴,이미지저장루틴이수행되며,가스토치를검출하지못하거나널이미지가입력되면시스템은수면모드로동작되고,데이터저장루틴은공개특허10-2007-0023197-4-정지하고,이미지저장루틴은지연되는것을특징으로한다.상기정상모드와수면모드로동작하는시스템상에서저장되는곡가공공정데이터는사용자의설정에따라서로다른속도로저장가능하다.또한,상기영상처리부는시공간필터를적용하여추적하고자하는물체를선정하고,상기선정된물체를촬영하는것을특징으로한다.한편,상기자동게인처리부는상기영상처리부가정상모드로작동하는경우게인값을변화시키지않으며,상기영상처리부가수면모드에서작동하는경우이전게인값을참조하여현재의조명조건에알맞은게인값을자동탐색하는게인값제어루프가수행되는것을특징으로한다.한편,상기데이터처리부는곡판성형작업을위해사용되는가스토치의중심위치,크기,면적,가열시간,가열속도,가열과정의부재영상을포함하는가스토치의검출및추적에관한정보,3가지의카메라특성치가저장되는것을특징으로한다.여기서,상기카메라특성치는자동으로변화되는게인값,밝기,셔터값중어느하나이상을포함한다.또한,상기카메라특성치는매시간저장되는파일의헤더부분에저장된다.또한,상기데이터처리부는일자별,월별,년도별로데이터저장공간을매일자동생성시키고해당날짜의저장공간에데이터파일과이미지파일을저장하는것을특징으로한다.또한,상기데이터처리부는CTimer클래스를이용하여데이터처리저장공간의생성,관리및저장루틴을수행한다.또한,본발명은곡가공공정의이미지를캡쳐하는제1단계,상기캡쳐된이미지를이진화전처리하는제2단계,상기이진화전처리를통하여오브젝트에대해넘버링하는컴퍼넌트레이블링하는제3단계,상기레이블링된컴퍼넌트를시공간필터에통과시키는제4단계,상기제1내지제3단계를통하여가스토치를검출하는제5단계,상기제5단계에서가스토치가검출되면,가스토치의중심위치,크기,면적,가열시간,가열속도,가열과정의부재영상을포함하는가스토치의검출및추적에관한정보영상을계산하는제6단계를포함하는 곡가공작업의자동데이터수집방법을제공할수있다.바람직한일실시예에따르면,상기컴퍼넌트를레이블링하는단계는이진화된영상을입력받는단계와,상기입력받은이진화영상을이미지스캔하는단계와,상기스캔된이미지영상에포함되는물체에라벨을부여하는단계와,동일물체에는동일라벨이부여되는단계가포함된다.또한,상기곡가공공정의이미지를캡쳐하는단계는카메라조명의게인값을초기설정하는단계와,상기초기값으로촬영된영상에검출된물체가없는경우게인값을증가시키는과정과,검출된물체의개수가복수인경우게인값을감소시키는과정과,검출된물체개수가한개이면게인값을고정시키는과정이수행되는단계가포함된다.본발명은관리자없이시스템스스로가곡가공작업의현장을모니터링하는동시에작업자와관련한중요데이터를수집할수있는곡가공작업의자동데이터수집을위한머신비젼시스템및데이터수집방법을개발하는효과가있다.보다상세히,상기본발명은오브젝트검출에서추적그리고데이터저장까지완전자동화가이루어지며,자연조명조건(아침/낮/저녁,봄/여름/가을/겨울)에상관없이오브젝트가자동검출/추적되어곡가공현장을모니터링할수있다.또한데이터저장관리를위해오브젝트의검출및추적유무에따라모드를변환하여저장공간을최소화시킬수있으며,추적되는오브젝트의특성치뿐만아니라각종환경변수를자동저장하여시스템의고장원인의진단이가능한효과가있다.이하,첨부된도면을참조하여본발명에따른실시예를상세히설명한다.본발명은이하제시되는실시예에한정되지않으며본발명이속하는기술분야에서통상의지식을가진자에게자명한범위내에서구성요소의부가,한정,삭제,추가등에의하여동일범위의발명이제시될수있을것이다.도1은곡가공작업의자동데이터수집을위한머신비젼알고리즘을구성하는모듈을도시한도면이다.상기머신비젼시스템은고속디지털방식(IEEE1394)카메라를이용하여영상을캡쳐하고,도1에도시된세가지주요모듈을통해서오퍼레이터의개입없이곡가공공정의무인모니터링및데이터수집을수행한다.즉,상기머신비젼시스템은자동으로물체의검출및추적그리고관련정보를저장하게되는전체자동모니터링(fullautomonitoring)시스템이다.도1을참조하면,머신비젼시스템은크게영상처리부(11),자동게인처리부(12),데이터처리부(13)3가지모듈로구성된다.도2를참조하여상기머신비젼시스템의작동과정을살펴보면아래와같다.상기영상처리부(11)는곡가공공정과정의이미지를캡쳐하고(S21),상기캡쳐된이미지를이진화전처리하는단계(S22),오브젝트를레이블링하는컴퍼넌트레이블링단계(S23)그리고가스토치만을검출하기위한시공간필터(Spatio-공개특허10-2007-0023197-5-Temporal)필터링단계(S24)를통해서현장에서작업자에이동되는가스토치(GasTorch)를검출과추적을수행하게된다. 보다상세히,상기영상처리부(11)는입력되는영상을전처리한후추적될오브젝트(가스토치)의특징점을찾아추적하게된다.현장에서곡가공작업이종료되거나작업을수행하지않게되면시스템은대기모드로동작하고각종데이터처리도잠시정지하게된다.이후작업자가재가열작업을하거나,토치를추적중이면정상작동모드로전환됨으로써상기두가지모드를자동으로수행하게된다.이를통하여불필요한전력소모를줄일수있으며,촬영되는데이터량의크기도대폭줄일수있어,상기데이터의전송및저장에고효율을기할수있다.상기자동게인처리부(12)는낮과밤,계절등에따른자연조명변화에상관없이물체를추적하기위해사용된다.현실적으로곡가공성형공장천정높이에고정설치된카메라에서촬상되는영상은조명의영향을크게받게된다.그렇다고상기곡가공성형공장전체를자연조명의변화에관계없이일정한밝기값으로유지시키는것은현실적으로불가능하며,인공조명환경을설정하는것역시불가능한실정이다.상기문제점을해결하기위해서자동게인처리부(12)를통하여아침,점심,저녁그리고흐린날씨,맑은날씨,여름,겨울에따른자연조명의변화에구애받지않고효율적으로물체를추적,촬영할수있도록한다.데이터처리부(13)는곡가공공정을구성하는각각의데이터를저장하는저장공간을자동생성하고,상기영상처리부(11)를통하여검출되는가스토치에의하여작업유무를스스로판단하여곡가공공정을구성하는모든데이터및작업이미지를기록하게된다.보다상세히,상기데이터처리부(13)는가열되는철판의위치,가열시간,가열속도,검출되는물체의사이즈,그리고가열과정의영상이저장된다.상기저장되는데이터의크기는상기영상처리부(11)설명부분에언급된정상/대기모드에따라저장되는빈도수를다르게설정함으로써PC의저장공간을그만큼간소화시킬수있다.상기머신비젼시스템은관리자의개입없이자동으로작동되는시스템으로현재작업자가곡가공작업을수행하고있는지의유무판단은물론작업자의가스토치의검출및추적까지도스스로알아서작동하게된다. 이러한자동프로세싱은곡가공공정이수행되는가스토치의위치와속도데이터,그리고작업영상을스스로저장할수있도록구현된다.이하도2내지도7을참조하여상기머신비젼시스템을보다상세히설명하도록한다.상기영상처리부(11)에서는캡쳐된이미지를이진화전처리하는단계(S22),컴퍼넌트레이블링처리단계(S23)그리고시공간필터를통과시키는단계(S24)가수행된다.상기이진화전처리단계(S22)는주변의다양한영상노이즈차단하기위해255의임계치로이진화처리를수행한다.가스토치의검출을위해도3에도시되어있는수정된컴퍼넌트레이블링알고리즘(ComponentLabelingAlgorithm)을사용한다.상기컴퍼넌트레이블링알고리즘은이진화처리가된영상을입력받는단계(S31)와,상기입력받은영상을이미지스캔하는단계(S32)와,스캔된이미지상에나타나는물체에라벨을부여하는단계(S33)와,상기라벨이부여된동일물체에는동일한라벨이부여되는단계(S34)를포함한다.이전의컴퍼넌트레이블링알고리즘과다른점은검출하고자하는물체를라벨링할때고려되는픽셀이1픽셀이아닌지름3픽셀을갖는원형템플릿을사용하는점이다르다.상기커렉티브컴퍼넌트레이블링알고리즘은소정의사이즈필터(SizeFilter)역할을수행한다.또한,상기영상처리부(11)는공간과시간영역에서필터로사용되는시공간필터를적용한다.일실시예로상기영상처리부(11)를통하여공간영역에서초기설정된범위내의픽셀에해당되는영상내의물체만촬영할수있도록사이즈필터를적용하고,시간영역에서[i-1]프레임과[i]프레임사이의상기공간영역에서검출된물체의위치를통하여상기물체의이동속도를계산하게된다.이어상기이동속도가초기설정된속도에해당되는물체만을검출하고,추적하게된다.정상적으로가스토치가검출되면시스템은정상모드로동작되고,데이터저장루틴,이미지저장루틴이정상적으로처리된다.이때데이터저장속도는사용자의설정에따라유동적으로변경될수있다.그러나만약영상내에서가스토치를검출하지못하거나널이미지가입력되면시스템은수면(Idle)모드로동작되고,데이터저장루틴은정지된다.이때,데이터의이미지는정상모드로동작하는경우에비하여느리게저장될수있다.한편,상기자동게인처리부(12)는자연조명의변화에상관없이물체를추적할수있도록한다.인공조명을사용할수없는환경에서는낮과밤,날씨의흐림,계절의변화에따라영상의그레이레벨값이다르게된다.이러한변화는이동하는가스토치의검출및추적의실패원인이될수있다.따라서,이러한자연조명변화에도불구하고정상적인물체의검출및추적을위하여자동게인처리부(12)가요구된다.도4에도시된알고리즘이수행되는자동게인처리부(12)는검출되공개특허10-2007-0023197-6-는물체의개수에따라게인벨류(GainValue)가변화되도록구현된다.이전프레임에서가스토치를검출하였다면게인값에는변화가없고,시스템이수면모드에서동작한다면게인값제어루프가수행된다.상기게인값제어루프는이전게인값을참조하여현재의조명조건에알맞은게인값을탐색하는방법을사용한다.상기도4는자동게인값제어가이루어지는단계를나타낸플로우차트이다.도4를참조하면,카메라를통하여곡가공공정을촬영하기위하여초기조명의게인값을설정하는단계(S41)와,상기초기조명값을통하여촬영된영상에검출된물체가없는경우게인값을증가시키는단계(S42),검출된물체의개수가2이상인경우조명의게인값을감소시키는단계(S43),검출된물체의개수가한개이변게인값이고정되는단계(S44)가수행된다.상기S42내지S44단계는조명의게인값을조정하는과정이므로,택일적으로어느한단계만수행될수있음은물론이다.한편,데이터처리부(13)는곡가공공정의각종데이터를저장하는저장공간을자동생성하고,가스토치에의한작업유무를판단하여데이터및작업이미지를상기저장공간에기록한다.보다상세히,도5에서도시된바와같이영상내에서가스토치를검출하게되면매프레임마다검출된물체를추적하고상기영상을통하여얻을수있는각종데이터를상기저장공간에저장한다.상기저장되는데이터의항목은물체의질량중심(MassCenter),속도,면적,검출된시간등이될수있다.먼저질량중심(MassCenter)은하기수학식1을이용하여계산되고,속도는수학식2에도시된바와같이프레임사이에서변화된물체의위치와프레임사이의시간차를나누어계산하게된다.검출되는토치의면적(Area)은수학식3을통하여계산된다.where,상기데이터처리부(13)에서는상기가스토치의검출및추적에관한정보뿐만아니라3개의카메라특성치(자동으로변화되는게인값,밝기(Brightness),셔터(Shutter))를매시간저장되는파일의헤더부분에저장되도록할수있다.상기머신비젼시스템은수년에걸쳐데이터를수집해야하는장기간운영시스템이기때문에이렇게저장되는각종정보들은시간및일자에따라관리되어야한다.따라서일자별/월별/년도별로데이터저장공간을매일자동생성시키고해당날짜의저장공간에데이터파일과작업중인곡가공부재이미지(도6참조)를저장하게된다.특히개발툴로사용된VISUALC++에서MFC를이용하여이러한데이터처리저장공간의생성및관리그리고저장루틴을수행할수있다.작업중인부재의영상은사용자의설정에의하여다양한사이즈로저장될수있으며,bmp파일로저장될수있다.도7은상기도5에도시된데이터가어떻게보여지는지를그래프화한실시예이다.본발명은조선,플랜트의곡가공작업자의자동(무인)데이터수집분야,변형물체(DeformableObject)의검출및추적을위한머신비젼시스템적용분야및자연조명조건에서의강건한물체검출및추적을위한머신비젼시스템에적용가능하다.발명의효과본발명은관리자없이시스템스스로가곡가공작업의현장을모니터링하는동시에작업자와관련한중요데이터를수집할수있는곡가공작업의자동데이터수집을위한머신비젼시스템및데이터수집방법을개발하는효과가있다.공개특허10-2007-0023197-7-보다상세히,상기본발명은오브젝트검출에서추적그리고데이터저장까지완전자동화가이루어지며,자연조명조건(아침/낮/저녁,봄/여름/가을/겨울)에상관없이오브젝트가자동검출/추적되어곡가공현장을모니터링할수있다.또한데이터저장관리를위해오브젝트의검출및추적유무에따라모드를변환하여저장공간을최소화시킬수있으며,추적되는오브젝트의특성치뿐만아니라각종환경변수를자동저장하여시스템의고장진단이가능한효과가있다.도면의간단한설명도1은본발명의사상에따른곡가공작업의자동데이터수집을위한머신비젼알고리즘을구성하는모듈을도시한도면.도2는본발명의사상에따른곡가공작업의자동데이터수집을위한머신비젼알고리즘을도시한플로우차트.도3은본발명의사상에따른컴퍼넌트레이블링알고리즘을도시한도면.도4는본발명의사상에따른자동게인값제어루틴을도시한도면.도5은본발명의사상에따른가스토치의검출및추적의결과파일정보를도시한도면.도6은본발명의사상에따른곡가공부재이미지를도시한도면.도7은본발명의사상에따른상기도5,도6에표현된데이터와이미지를도시한도면.<도면의주요부분에대한부호의설명>11:영상처리부 12:자동게인처리부13:데이터처리부도면도면1공개특허10-2007-0023197-8-도면2공개특허10-2007-0023197-9-도면3도면4공개특허10-2007-0023197-10-도면5도면6도면7공개특허10-2007-0023197-11-"}
{"patent_id": "10-2005-0077508", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본발명은곡가공공정수행시가스토치를검출하고추적하는영상처리부,자연조명의변화에관계없이게인벨류가조 정되어강건한가스토치추적이가능하게하는자동게인처리부,곡가공공정수행시습득되는각종데이터를저장하는 저장공간을자동으로생성하고,상기영상처리부를통하여인식되는곡가공공정의진행상황에따라작업데이터및작 업이미지를상기저장공간에저장하는데이터처리부를포함하는곡가공작업의자동데이터수집을위한머신비젼시 스템및데이터수집방법을제공할수있다. 본발명은관리자없이시스템스스로가곡가공작업의현장을모니터링하는동시에작업자와관련한중요데이터를수집 할수있는지능형시스템을개발하는효과가있다."}
{"patent_id": "10-2005-0077508", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "에서통상의지식을가진자에게자명한범위내에서구성요소의부가,한정,삭제,추가등 에의하여동일범위의발명이제시될수있을것이다. 도1은곡가공작업의자동데이터수집을위한머신비젼알고리즘을구성하는모듈을도시한도면이다. 상기머신비젼시스템은고속디지털방식(IEEE1394)카메라를이용하여영상을캡쳐하고,도1에도시된세가지주요 모듈을통해서오퍼레이터의개입없이곡가공공정의무인모니터링및데이터수집을수행한다.즉,상기머신비젼시스 템은자동으로물체의검출및추적그리고관련정보를저장하게되는전체자동모니터링(fullautomonitoring)시스템 이다. 도1을참조하면,머신비젼시스템은크게영상처리부,자동게인처리부,데이터처리부3가지모듈로구성 된다.도2를참조하여상기머신비젼시스템의작동과정을살펴보면아래와같다. 상기영상처리부는곡가공공정과정의이미지를캡쳐하고(S21),상기캡쳐된이미지를이진화전처리하는단계 (S22),오브젝트를레이블링하는컴퍼넌트레이블링단계(S23)그리고가스토치만을검출하기위한시공간필터(Spatio-공개특허10-2007-0023197 -5-Temporal)필터링단계(S24)를통해서현장에서작업자에이동되는가스토치(GasTorch)를검출과추적을수행하게된 다. 보다상세히,상기영상처리부는입력되는영상을전처리한후추적될오브젝트(가스토치)의특징점을찾아추 적하게된다.현장에서곡가공작업이종료되거나작업을수행하지않게되면시스템은대기모드로동작하고각종데이터 처리도잠시정지하게된다.이후작업자가재가열작업을하거나,토치를추적중이면정상작동모드로전환됨으로써상 기두가지모드를자동으로수행하게된다.이를통하여불필요한전력소모를줄일수있으며,촬영되는데이터량의크 기도대폭줄일수있어,상기데이터의전송및저장에고효율을기할수있다. 상기자동게인처리부는낮과밤,계절등에따른자연조명변화에상관없이물체를추적하기위해사용된다. 현실적으로곡가공성형공장천정높이에고정설치된카메라에서촬상되는영상은조명의영향을크게받게된다.그렇 다고상기곡가공성형공장전체를자연조명의변화에관계없이일정한밝기값으로유지시키는것은현실적으로불가능 하며,인공조명환경을설정하는것역시불가능한실정이다. 상기문제점을해결하기위해서자동게인처리부를통하여아침,점심,저녁그리고흐린날씨,맑은날씨,여름,겨울 에따른자연조명의변화에구애받지않고효율적으로물체를추적,촬영할수있도록한다. 데이터처리부는곡가공공정을구성하는각각의데이터를저장하는저장공간을자동생성하고,상기영상처리부 를통하여검출되는가스토치에의하여작업유무를스스로판단하여곡가공공정을구성하는모든데이터및작업 이미지를기록하게된다.보다상세히,상기데이터처리부는가열되는철판의위치,가열시간,가열속도,검출되는 물체의사이즈,그리고가열과정의영상이저장된다.상기저장되는데이터의크기는상기영상처리부설명부분에 언급된정상/대기모드에따라저장되는빈도수를다르게설정함으로써PC의저장공간을그만큼간소화시킬수있다. 상기머신비젼시스템은관리자의개입없이자동으로작동되는시스템으로현재작업자가곡가공작업을수행하고있는 지의유무판단은물론작업자의가스토치의검출및추적까지도스스로알아서작동하게된다. 이러한자동프로세싱 은곡가공공정이수행되는가스토치의위치와속도데이터,그리고작업영상을스스로저장할수있도록구현된다. 이하도2내지도7을참조하여상기머신비젼시스템을보다상세히설명하도록한다. 상기영상처리부에서는캡쳐된이미지를이진화전처리하는단계(S22),컴퍼넌트레이블링처리단계(S23)그리고 시공간필터를통과시키는단계(S24)가수행된다. 상기이진화전처리단계(S22)는주변의다양한영상노이즈차단하기위해255의임계치로이진화처리를수행한다.가 스토치의검출을위해도3에도시되어있는수정된컴퍼넌트레이블링알고리즘(ComponentLabelingAlgorithm)을 사용한다. 상기컴퍼넌트레이블링알고리즘은이진화처리가된영상을입력받는단계(S31)와,상기입력받은영상을이미지스캔 하는단계(S32)와,스캔된이미지상에나타나는물체에라벨을부여하는단계(S33)와,상기라벨이부여된동일물체에는 동일한라벨이부여되는단계(S34)를포함한다.이전의컴퍼넌트레이블링알고리즘과다른점은검출하고자하는물체를 라벨링할때고려되는픽셀이1픽셀이아닌지름3픽셀을갖는원형템플릿을사용하는점이다르다.상기커렉티브컴퍼 넌트레이블링알고리즘은소정의사이즈필터(SizeFilter)역할을수행한다. 또한,상기영상처리부는공간과시간영역에서필터로사용되는시공간필터를적용한다.일실시예로상기영상처 리부를통하여공간영역에서초기설정된범위내의픽셀에해당되는영상내의물체만촬영할수있도록사이즈필터 를적용하고,시간영역에서[i-1]프레임과[i]프레임사이의상기공간영역에서검출된물체의위치를통하여상기물 체의이동속도를계산하게된다.이어상기이동속도가초기설정된속도에해당되는물체만을검출하고,추적하게된다. 정상적으로가스토치가검출되면시스템은정상모드로동작되고,데이터저장루틴,이미지저장루틴이정상적으로처 리된다.이때데이터저장속도는사용자의설정에따라유동적으로변경될수있다.그러나만약영상내에서가스토치 를검출하지못하거나널이미지가입력되면시스템은수면(Idle)모드로동작되고,데이터저장루틴은정지된다.이때, 데이터의이미지는정상모드로동작하는경우에비하여느리게저장될수있다. 한편,상기자동게인처리부는자연조명의변화에상관없이물체를추적할수있도록한다.인공조명을사용할수없 는환경에서는낮과밤,날씨의흐림,계절의변화에따라영상의그레이레벨값이다르게된다.이러한변화는이동하는 가스토치의검출및추적의실패원인이될수있다.따라서,이러한자연조명변화에도불구하고정상적인물체의검출 및추적을위하여자동게인처리부가요구된다.도4에도시된알고리즘이수행되는자동게인처리부는검출되공개특허10-2007-0023197 -6-는물체의개수에따라게인벨류(GainValue)가변화되도록구현된다.이전프레임에서가스토치를검출하였다면게인 값에는변화가없고,시스템이수면모드에서동작한다면게인값제어루프가수행된다.상기게인값제어루프는이전 게인값을참조하여현재의조명조건에알맞은게인값을탐색하는방법을사용한다.상기도4는자동게인값제어가이 루어지는단계를나타낸플로우차트이다.도4를참조하면,카메라를통하여곡가공공정을촬영하기위하여초기조명의 게인값을설정하는단계(S41)와,상기초기조명값을통하여촬영된영상에검출된물체가없는경우게인값을증가시키 는단계(S42),검출된물체의개수가2이상인경우조명의게인값을감소시키는단계(S43),검출된물체의개수가한개 이변게인값이고정되는단계(S44)가수행된다.상기S42내지S44단계는조명의게인값을조정하는과정이므로,택일 적으로어느한단계만수행될수있음은물론이다. 한편,데이터처리부는곡가공공정의각종데이터를저장하는저장공간을자동생성하고,가스토치에의한작업유 무를판단하여데이터및작업이미지를상기저장공간에기록한다.보다상세히,도5에서도시된바와같이영상내에서 가스토치를검출하게되면매프레임마다검출된물체를추적하고상기영상을통하여얻을수있는각종데이터를상기 저장공간에저장한다.상기저장되는데이터의항목은물체의질량중심(MassCenter),속도,면적,검출된시간등이될 수있다.먼저질량중심(MassCenter)은하기수학식1을이용하여계산되고,속도는수학식2에도시된바와같이프레 임사이에서변화된물체의위치와프레임사이의시간차를나누어계산하게된다.검출되는토치의면적(Area)은수학식 3을통하여계산된다. where, 상기데이터처리부에서는상기가스토치의검출및추적에관한정보뿐만아니라3개의카메라특성치(자동으로변 화되는게인값,밝기(Brightness),셔터(Shutter))를매시간저장되는파일의헤더부분에저장되도록할수있다. 상기머신비젼시스템은수년에걸쳐데이터를수집해야하는장기간운영시스템이기때문에이렇게저장되는각종정보 들은시간및일자에따라관리되어야한다.따라서일자별/월별/년도별로데이터저장공간을매일자동생성시키고해 당날짜의저장공간에데이터파일과작업중인곡가공부재이미지(도6참조)를저장하게된다.특히개발툴로사용된 VISUALC++에서MFC를이용하여이러한데이터처리저장공간의생성및관리그리고저장루틴을수행할수있다. 작업중인부재의영상은사용자의설정에의하여다양한사이즈로저장될수있으며,bmp파일로저장될수있다.도7은 상기도5에도시된데이터가어떻게보여지는지를그래프화한실시예이다. 본발명은조선,플랜트의곡가공작업자의자동(무인)데이터수집분야,변형물체(DeformableObject)의검출및추적 을위한머신비젼시스템적용분야및자연조명조건에서의강건한물체검출및추적을위한머신비젼시스템에적용가 능하다."}
{"patent_id": "10-2005-0077508", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본발명은관리자없이시스템스스로가곡가공작업의현장을모니터링하는동시에작업자와관련한중요데이터를수집 할수있는곡가공작업의자동데이터수집을위한머신비젼시스템및데이터수집방법을개발하는효과가있다.공개특허10-2007-0023197 -7-보다상세히,상기본발명은오브젝트검출에서추적그리고데이터저장까지완전자동화가이루어지며,자연조명조건 (아침/낮/저녁,봄/여름/가을/겨울)에상관없이오브젝트가자동검출/추적되어곡가공현장을모니터링할수있다.또한 데이터저장관리를위해오브젝트의검출및추적유무에따라모드를변환하여저장공간을최소화시킬수있으며,추적 되는오브젝트의특성치뿐만아니라각종환경변수를자동저장하여시스템의고장진단이가능한효과가있다."}
