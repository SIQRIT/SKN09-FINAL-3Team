{"patent_id": "10-2021-0126652", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0044085", "출원번호": "10-2021-0126652", "발명의 명칭": "드론을 이용하여 매장을 관리하기 위한 장치 및 방법", "출원인": "롯데정보통신 주식회사", "발명자": "진수경"}}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "드론을 이용하여 매장을 관리하기 위한 제어 장치에 있어서,상기 매장의 매장 배치도와, 상기 드론이 촬영 대상 선반을 향하며 통로에 위치했을 때의 뒷편 선반과의 안전거리와, 상기 드론에 탑재된 카메라의 수직 화각 및 수평 화각과, 촬영 영역 오버랩 비율을 기초로, 상기 매장 내의 선반들을 촬영할 공중 이동 좌표를 계산하는 최적 경로 계획부;상기 공중 이동 좌표를 포함하는 비행 명령을 상기 드론으로 전송하고, 상기 공중 이동 좌표를 이동하여 상기선반들을 촬영한 선반 촬영 영상을 상기 드론으로부터 수신하는 프로세서; 및상기 선반 촬영 영상을 이용하여, 연속적으로 진열된 선반들에 대한 파노라마 이미지를 생성하고, 상기 파노라마 이미지를 기초로 재고 분석을 수행하는 영상 분석부를 포함하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 최적 경로 계획부는,상기 매장 배치도와, 상기 안전거리와, 상기 수직/수평 화각과, 상기 오버랩 비율을 기초로, 연속적으로 진열된선반들에 대한, 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/수평 촬영 거리의 1/2을 계산하고,상기 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/수평 촬영 거리의 1/2과, 상기 오버랩비율을 기초로, 공중 이동 좌표를 계산하는 것을 특징으로 하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 최적 경로 계획부는,상기 안전거리를 고려한 선반과 드론 간 최대 이격 거리와, 상기 오버랩 비율과, 상기 매장 배치도에서 확인한가장 높은 선반의 높이와, 상기 수직 화각을 기초로, 상기 수직 비행 횟수를 계산하는 것을 특징으로 하는 제어장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서,상기 최적 경로 계획부는,상기 매장 배치도에서 확인한 가장 높은 선반의 높이와, 상기 수직 비행 횟수와, 상기 오버랩 비율을 기초로 상기 수직 촬영 거리의 1/2를 계산하는 것을 특징으로 하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제2항에 있어서,상기 최적 경로 계획부는,상기 수직 촬영 거리의 1/2과, 상기 수직 화각을 기초로 상기 이격 거리를 계산하는 것을 특징으로 하는 제어장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "공개특허 10-2023-0044085-3-제2항에 있어서,상기 최적 경로 계획부는,상기 이격 거리와, 상기 수평 화각을 기초로 상기 수평 촬영 거리의 1/2를 계산하는 것을 특징으로 하는 제어장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제2항에 있어서,상기 최적 경로 계획부는,상기 매장 배치도에서 확인한 선반들의 전체 가로 길이와, 상기 수평 촬영 거리의 1/2과, 상기 오버랩 비율을기초로 상기 수평 비행 횟수를 계산하는 것을 특징으로 하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 선반 촬영 영상은, 각 공중 이동 좌표에서 촬영된 정지 영상이고,상기 영상 분석부는,상기 각 공중 이동 좌표에서 촬영된 정지 영상들을 이용하여 상기 파노라마 이미지를 생성하는 것을 특징으로하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제1항에 있어서,상기 선반 촬영 영상은, 상기 드론이 공중 이동 좌표들을 이동하며 촬영한 동영상이고,상기 영상 분석부는,상기 동영상에서, 각 공중 이동 좌표를 기준으로 해당 공중 이동 좌표에 도달하기 전 소정의 좌표부터 해당 공중 이동 좌표에 도달시까지의 프레임을 후보 프레임들로 추출하고, 각 공중 이동 좌표를 기준으로 후보 프레임들 중 키 프레임을 선택하며, 선택된 키 프레임들을 이용하여 상기 파노라마 이미지를 생성하는 것을 특징으로하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제9항에 있어서,상기 소정의 좌표는,상기 드론의 카메라로 선반을 한번에 촬영할 수 있는 수평 촬영 거리 또는 수직 촬영 거리에 추출 마진 비율을곱하여 계산된 거리에 대응하는 좌표이고,상기 추출 마진 비율은, 상기 오버랩 비율보다 작은 것을 특징으로 하는 제어 장치."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "드론을 이용하여 매장을 관리하는 방법에 있어서,상기 매장의 매장 배치도와, 상기 드론이 촬영 대상 선반을 향하며 통로에 위치했을 때의 뒷편 선반과의 안전거리와, 상기 드론에 탑재된 카메라의 수직 화각 및 수평 화각과, 촬영 영역 오버랩 비율을 기초로, 상기 매장 내의 선반들을 촬영할 공중 이동 좌표를 계산하는 단계;상기 공중 이동 좌표를 포함하는 비행 명령을 상기 드론으로 전송하고, 상기 공중 이동 좌표를 이동하여 상기선반들을 촬영한 선반 촬영 영상을 상기 드론으로부터 수신하는 단계; 및상기 선반 촬영 영상을 이용하여, 연속적으로 진열된 선반들에 대한 파노라마 이미지를 생성하고, 상기 파노라마 이미지를 기초로 재고 분석을 수행하는 단계를 포함하는 방법.공개특허 10-2023-0044085-4-청구항 12 제11항에 있어서,상기 계산하는 단계는,상기 매장 배치도와, 상기 안전거리와, 상기 수직/수평 화각과, 상기 오버랩 비율을 기초로, 연속적으로 진열된선반들에 대한, 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/수평 촬영 거리의 1/2을 계산하는 단계; 및상기 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/수평 촬영 거리의 1/2과, 상기 오버랩비율을 기초로, 공중 이동 좌표를 계산하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_13", "content": "제12항에 있어서,상기 수직 비행 횟수는,상기 안전거리를 고려한 선반과 드론 간 최대 이격 거리와, 상기 오버랩 비율과, 상기 매장 배치도에서 확인한가장 높은 선반의 높이와, 상기 수직 화각을 기초로 계산되는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_14", "content": "제12항에 있어서,상기 수직 촬영 거리의 1/2은,상기 매장 배치도에서 확인한 가장 높은 선반의 높이와, 상기 수직 비행 횟수와, 상기 오버랩 비율을 기초로 계산되는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_15", "content": "제12항에 있어서,상기 이격 거리는,상기 수직 촬영 거리의 1/2과, 상기 수직 화각을 기초로 계산되는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_16", "content": "제12항에 있어서,상기 수평 촬영 거리의 1/2은,상기 이격 거리와, 상기 수평 화각을 기초로 계산되는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_17", "content": "제12항에 있어서,상기 수평 비행 횟수는,상기 매장 배치도에서 확인한 선반들의 전체 가로 길이와, 상기 수평 촬영 거리의 1/2과, 상기 오버랩 비율을기초로 계산되는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_18", "content": "제11항에 있어서,상기 선반 촬영 영상은, 각 공중 이동 좌표에서 촬영된 정지 영상이고,상기 재고 분석을 수행하는 단계는,상기 각 공중 이동 좌표에서 촬영된 정지 영상들을 이용하여 상기 파노라마 이미지를 생성하는 것을 특징으로공개특허 10-2023-0044085-5-하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_19", "content": "제11항에 있어서,상기 선반 촬영 영상은, 상기 드론이 공중 이동 좌표들을 이동하며 촬영한 동영상이고,상기 재고 분석을 수행하는 단계는,상기 동영상에서, 각 공중 이동 좌표를 기준으로 해당 공중 이동 좌표에 도달하기 전 소정의 좌표부터 해당 공중 이동 좌표에 도달시까지의 프레임을 후보 프레임들로 추출하는 단계;각 공중 이동 좌표를 기준으로 후보 프레임들 중 키 프레임을 선택하는 단계; 및선택된 키 프레임들을 이용하여 상기 파노라마 이미지를 생성하는 단계를 포함하는 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_20", "content": "제19항에 있어서,상기 소정의 좌표는,상기 드론의 카메라로 선반을 한번에 촬영할 수 있는 수평 촬영 거리 또는 수직 촬영 거리에 추출 마진 비율을곱하여 계산된 거리에 대응하는 좌표이고,상기 추출 마진 비율은, 상기 오버랩 비율보다 작은 것을 특징으로 하는 방법."}
{"patent_id": "10-2021-0126652", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_21", "content": "제11항 내지 제20항 중 어느 한 항에 따른 방법을 컴퓨터 시스템을 통해 실행하는 컴퓨터 프로그램으로서 컴퓨터로 판독 가능한 기록매체에 저장된 컴퓨터 프로그램."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "매장 내의 드론의 비행을 원격 제어하여 드론이 촬영한 영상을 기반으로 매장 내의 재고 상황을 관리하기 위한 장치 및 방법이 개시된다. 일 측면에 따른, 드론을 이용하여 매장을 관리하기 위한 제어 장치는, 상기 매장의 매 장 배치도와, 상기 드론이 촬영 대상 선반을 향하며 통로에 위치했을 때의 뒷편 선반과의 안전거리와, 상기 드론 에 탑재된 카메라의 수직 화각 및 수평 화각과, 촬영 영역 오버랩 비율을 기초로, 상기 매장 내의 선반들을 촬영 할 공중 이동 좌표를 계산하는 최적 경로 계획부; 상기 공중 이동 좌표를 포함하는 비행 명령을 상기 드론으로 전송하고, 상기 공중 이동 좌표를 이동하여 상기 선반들을 촬영한 선반 촬영 영상을 상기 드론으로부터 수신하는 프로세서; 및 상기 선반 촬영 영상을 이용하여, 연속적으로 진열된 선반들에 대한 파노라마 이미지를 생성하고, 상기 파노라마 이미지를 기초로 재고 분석을 수행하는 영상 분석부를 포함한다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 매장을 관리하기 위한 장치 및 방법에 관한 것으로, 보다 구체적으로 드론을 이용하여 매장을 관리하 기 위한 장치 및 방법에 관한 것이다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "대형마트, 슈퍼, 편의점에서는 상품 진열 선반에 상품을 진열하고 작업자가 수시로 매장을 돌아다니며 상품의 결품이나 훼손 등의 재고 상황을 확인하고, 결품을 채워 넣거나 훼손된 상품을 교체하는 등의 재고 관리를 하는 것이 일반적이다. 따라서, 결품이나 상품 훼손이 생겼을 때 빠른 확인이 어려워 즉각적으로 상품의 보충, 교환 진열을 하지 못하 여 필요한 고객에게 상품이 제때 판매되지 못하는 경우가 빈번히 발생한다. 이와 유사한 문제로는 물류 창고에 입출고 되는 물류품에 대해서 정확한 재고 파악이 어렵고, 재고 조사를 위해서는 많은 시간이 소요된다는 문제 가 발생한다. 전술한 문제들을 해결하기 위해 상품 표면에 RFID와 같은 전자 태그(혹은 바코드)를 부착한 뒤, 드론에 태그 리 더기를 장착하여 상품이 적재된 곳을 비행하며 재고 조사를 진행하는 연구가 진행되고 있다. 이는 상품마다 태 그를 부착하여야 하며. 바코드와 같은 경우 드론 비행 경로에 대응하는 위치에 태그가 위치하지 않으면 인식이 안 되는 문제가 있다. 또한, 실내에서는 GPS 사용이 어렵기 때문에 지형 지물을 감지할 수 있는 센서(라이다, 레이더, 적외선 센서 등)를 드론에 장착하여 실내에서 비행하는 연구가 진행 중이나 이는 센서가 무겁고 비싸다는 단점이 있고, 3D 지도 생성을 위해 비행해야 하는 거리가 늘어나기 때문에 한정된 드론 배터리로는 재고 조사가 원활하게 이루어 지지 않는 문제가 있다. 또한, 종래에는 선반에 카메라를 장착하여 결품 위치를 파악하는 영상 기반 매장 관리 시스템도 연구가 진행 중 이나 이는 선반의 층마다 카메라와 센서를 장착하여야 하고, 실시간 영상 전송을 위한 인프라 구축에 많은 비용 이 소요되는 문제가 있다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명은 상술한 문제점을 해결하기 위해 제안된 것으로, 매장 내의 드론의 비행을 원격 제어하여 드론이 촬영 한 영상을 기반으로 매장 내의 재고 상황을 관리하기 위한 장치 및 방법을 제공하는데 그 목적이 있다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "일 측면에 따른, 드론을 이용하여 매장을 관리하기 위한 제어 장치는, 상기 매장의 매장 배치도와, 상기 드론이 촬영 대상 선반을 향하며 통로에 위치했을 때의 뒷편 선반과의 안전거리와, 상기 드론에 탑재된 카메라의 수직 화각 및 수평 화각과, 촬영 영역 오버랩 비율을 기초로, 상기 매장 내의 선반들을 촬영할 공중 이동 좌표를 계 산하는 최적 경로 계획부; 상기 공중 이동 좌표를 포함하는 비행 명령을 상기 드론으로 전송하고, 상기 공중 이 동 좌표를 이동하여 상기 선반들을 촬영한 선반 촬영 영상을 상기 드론으로부터 수신하는 프로세서; 및 상기 선 반 촬영 영상을 이용하여, 연속적으로 진열된 선반들에 대한 파노라마 이미지를 생성하고, 상기 파노라마 이미 지를 기초로 재고 분석을 수행하는 영상 분석부를 포함한다. 상기 최적 경로 계획부는, 상기 매장 배치도와, 상기 안전거리와, 상기 수직/수평 화각과, 상기 오버랩 비율을 기초로, 연속적으로 진열된 선반들에 대한, 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/ 수평 촬영 거리의 1/2을 계산하고, 상기 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/수 평 촬영 거리의 1/2과, 상기 오버랩 비율을 기초로, 공중 이동 좌표를 계산할 수 있다. 상기 최적 경로 계획부는, 상기 안전거리를 고려한 선반과 드론 간 최대 이격 거리와, 상기 오버랩 비율과, 상 기 매장 배치도에서 확인한 가장 높은 선반의 높이와, 상기 수직 화각을 기초로, 상기 수직 비행 횟수를 계산할 수 있다. 상기 최적 경로 계획부는, 상기 매장 배치도에서 확인한 가장 높은 선반의 높이와, 상기 수직 비행 횟수와, 상 기 오버랩 비율을 기초로 상기 수직 촬영 거리의 1/2를 계산할 수 있다. 상기 최적 경로 계획부는, 상기 수직 촬영 거리의 1/2과, 상기 수직 화각을 기초로 상기 이격 거리를 계산할 수 있다. 상기 최적 경로 계획부는, 상기 이격 거리와, 상기 수평 화각을 기초로 상기 수평 촬영 거리의 1/2를 계산할 수 있다. 상기 최적 경로 계획부는, 상기 매장 배치도에서 확인한 선반들의 전체 가로 길이와, 상기 수평 촬영 거리의 1/2과, 상기 오버랩 비율을 기초로 상기 수평 비행 횟수를 계산할 수 있다. 상기 선반 촬영 영상은, 각 공중 이동 좌표에서 촬영된 정지 영상이고, 상기 영상 분석부는, 상기 각 공중 이동 좌표에서 촬영된 정지 영상들을 이용하여 상기 파노라마 이미지를 생성할 수 있다. 상기 선반 촬영 영상은, 상기 드론이 공중 이동 좌표들을 이동하며 촬영한 동영상이고, 상기 영상 분석부는, 상 기 동영상에서, 각 공중 이동 좌표를 기준으로 해당 공중 이동 좌표에 도달하기 전 소정의 좌표부터 해당 공중 이동 좌표에 도달시까지의 프레임을 후보 프레임들로 추출하고, 각 공중 이동 좌표를 기준으로 후보 프레임들 중 키 프레임을 선택하며, 선택된 키 프레임들을 이용하여 상기 파노라마 이미지를 생성할 수 있다. 상기 소정의 좌표는, 상기 드론의 카메라로 선반을 한번에 촬영할 수 있는 수평 촬영 거리 또는 수직 촬영 거리 에 추출 마진 비율을 곱하여 계산된 거리에 대응하는 좌표이고, 상기 추출 마진 비율은, 상기 오버랩 비율보다 작을 수 있다. 다른 측면에 따른, 드론을 이용하여 매장을 관리하는 방법은, 상기 매장의 매장 배치도와, 상기 드론이 촬영 대 상 선반을 향하며 통로에 위치했을 때의 뒷편 선반과의 안전거리와, 상기 드론에 탑재된 카메라의 수직 화각 및 수평 화각과, 촬영 영역 오버랩 비율을 기초로, 상기 매장 내의 선반들을 촬영할 공중 이동 좌표를 계산하는 단 계; 상기 공중 이동 좌표를 포함하는 비행 명령을 상기 드론으로 전송하고, 상기 공중 이동 좌표를 이동하여 상 기 선반들을 촬영한 선반 촬영 영상을 상기 드론으로부터 수신하는 단계; 및 상기 선반 촬영 영상을 이용하여,연속적으로 진열된 선반들에 대한 파노라마 이미지를 생성하고, 상기 파노라마 이미지를 기초로 재고 분석을 수 행하는 단계를 포함한다. 상기 계산하는 단계는, 상기 매장 배치도와, 상기 안전거리와, 상기 수직/수평 화각과, 상기 오버랩 비율을 기 초로, 연속적으로 진열된 선반들에 대한, 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수직/수 평 촬영 거리의 1/2을 계산하는 단계; 및 상기 수직/수평 비행 횟수와, 선반과 상기 드론 간의 이격 거리와, 수 직/수평 촬영 거리의 1/2과, 상기 오버랩 비율을 기초로, 공중 이동 좌표를 계산하는 단계를 포함할 수 있다. 상기 수직 비행 횟수는, 상기 안전거리를 고려한 선반과 드론 간 최대 이격 거리와, 상기 오버랩 비율과, 상기 매장 배치도에서 확인한 가장 높은 선반의 높이와, 상기 수직 화각을 기초로 계산될 수 있다. 상기 수직 촬영 거리의 1/2은, 상기 매장 배치도에서 확인한 가장 높은 선반의 높이와, 상기 수직 비행 횟수와, 상기 오버랩 비율을 기초로 계산될 수 있다. 상기 이격 거리는, 상기 수직 촬영 거리의 1/2과, 상기 수직 화각을 기초로 계산될 수 있다. 상기 수평 촬영 거리의 1/2은, 상기 이격 거리와, 상기 수평 화각을 기초로 계산될 수 있다. 상기 수평 비행 횟수는, 상기 매장 배치도에서 확인한 선반들의 전체 가로 길이와, 상기 수평 촬영 거리의 1/2 과, 상기 오버랩 비율을 기초로 계산될 수 있다. 상기 선반 촬영 영상은, 각 공중 이동 좌표에서 촬영된 정지 영상이고, 상기 재고 분석을 수행하는 단계는, 상 기 각 공중 이동 좌표에서 촬영된 정지 영상들을 이용하여 상기 파노라마 이미지를 생성할 수 있다. 상기 선반 촬영 영상은, 상기 드론이 공중 이동 좌표들을 이동하며 촬영한 동영상이고, 상기 재고 분석을 수행 하는 단계는, 상기 동영상에서, 각 공중 이동 좌표를 기준으로 해당 공중 이동 좌표에 도달하기 전 소정의 좌표 부터 해당 공중 이동 좌표에 도달시까지의 프레임을 후보 프레임들로 추출하는 단계; 각 공중 이동 좌표를 기준 으로 후보 프레임들 중 키 프레임을 선택하는 단계; 및 선택된 키 프레임들을 이용하여 상기 파노라마 이미지를 생성하는 단계를 포함할 수 있다. 상기 소정의 좌표는, 상기 드론의 카메라로 선반을 한번에 촬영할 수 있는 수평 촬영 거리 또는 수직 촬영 거리 에 추출 마진 비율을 곱하여 계산된 거리에 대응하는 좌표이고, 상기 추출 마진 비율은, 상기 오버랩 비율보다 작을 수 있다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은, 매장 내 재고 분석에 소요되는 인건비와 시간을 최소화할 수 있고, 종래와 같이 전자 태그를 이용하 지 않고 드론에 장착된 카메라를 이용하여 재고 분석을 수행함으로써, 인프라 구축에 소요되는 비용을 줄일 수 있다. 본 발명은, 드론의 카메라에서 촬영한 영상을 이용하여 파노라마 이미지를 생성하여 재고 분석을 수행함으로써 적은 데이터 용량과 비용으로 효과적으로 매장 내 재고 분석을 할 수 있다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이하, 첨부된 도면을 참조하여 본 명세서에 개시된 실시예를 상세히 설명하되, 도면 부호에 관계없이 동일하거 나 유사한 구성요소는 동일한 참조 번호를 부여하고 이에 대한 중복되는 설명은 생략하기로 한다. 이하의 설명 에서 사용되는 구성요소에 대한 접미사 \"부\"는 명세서 작성의 용이함만이 고려되어 부여되거나 혼용되는 것으로 서, 그 자체로 서로 구별되는 의미 또는 역할을 갖는 것은 아니다. 또한, 본 명세서에 개시된 실시예를 설명함 에 있어서 관련된 공지 기술에 대한 구체적인 설명이 본 명세서에 개시된 실시예의 요지를 흐릴 수 있다고 판단 되는 경우 그 상세한 설명을 생략한다. 또한, 첨부된 도면은 본 명세서에 개시된 실시예를 쉽게 이해할 수 있도 록 하기 위한 것일 뿐, 첨부된 도면에 의해 본 명세서에 개시된 기술적 사상이 제한되지 않으며, 본 발명의 사 상 및 기술 범위에 포함되는 모든 변경, 균등물 내지 대체물을 포함하는 것으로 이해되어야 한다. 제1, 제2 등과 같이 서수를 포함하는 용어는 다양한 구성요소들을 설명하는데 사용될 수 있지만, 상기 구성요소 들은 상기 용어들에 의해 한정되지는 않는다. 상기 용어들은 하나의 구성요소를 다른 구성요소로부터 구별하는 목적으로만 사용된다. 단수의 표현은 문맥상 명백하게 다르게 뜻하지 않는 한, 복수의 표현을 포함한다. 본 출원에서, \"포함한다\" 또 는 \"가지다\" 등의 용어는 명세서상에 기재된 특징, 숫자, 단계, 동작, 구성요소, 부품 또는 이들을 조합한 것이 존재함을 지정하려는 것이지, 하나 또는 그 이상의 다른 특징들이나 숫자, 단계, 동작, 구성요소, 부품 또는 이 들을 조합한 것들의 존재 또는 부가 가능성을 미리 배제하지 않는 것으로 이해되어야 한다. 본 발명을 구현함에 있어서 설명의 편의를 위하여 구성요소를 세분화하여 설명할 수 있으나, 이들 구성요소가 하나의 장치 또는 모듈 내에 구현될 수도 있고, 혹은 하나의 구성요소가 다수의 장치 또는 모듈들에 나뉘어져서 구현될 수도 있다. 도 1은 본 발명의 일 실시예에 따른 매장 관리 시스템을 설명하는 도면이다. 도 1은 매장의 평면도를 나타내고, 도 1을 참조하면, 본 실시예에 따른 매장 관리 시스템은, 제어 장치 및 드론을 포함한다. 여기서 매 장은 실내 매장일 수 있고, 또는 실외 매장일 수도 있다. 매장은 소정의 높이를 갖는 다수의 선반들이 배 치되어 있고, 선반 내에는 다양한 물품들이 배치된다. 제어 장치는, 드론과 무선 통신하여 드론을 제어하는 장치로서, 스마트폰 등의 휴대용 단말이나, 또는 퍼스널 컴퓨터 등의 고정형 단말, 또는 드론을 제어하기 위한 전용 단말일 수 있다. 제어 장치는, 사용자의 입력에 따라, 드론이 매장 내부에서 비행할 비행 경로를 생성하고 비행 경로를 포 함하는 비행 명령을 드론으로 전송한다. 제어 장치는, 드론으로부터 상기 비행 경로를 따라 공중 이동하며 촬영된 선반 촬영 영상을 수신하고, 수신된 선반 촬영 영상을 분석하여 매장 내 선반의 결품, 또는 상품 파손 등의 재고 분석을 수행할 수 있다. 바람직하게, 제어 장치는, 드론으로부터 수신되는 선반 촬영 영상을 단일 파노라마 이미지 형태로 생성한 후 분석하고, 분석 결과를 디스플레이 장치 등을 통해 사용자에게 출력할 수 있다. 여기서 선반 촬영 영상은 정지 영상일 수 있고, 또는 동영상일 수 있다. 제어 장치는, 드론으로부터 수신되는 선반 촬영 영상을 미리 학습된 인공지능 모델을 통해 분석할 수 있다. 인공지능 모델의 아키텍처로는, CNN(convolutional neural network), RNN(recurrent neural network), RVM(relevance vector machine), GAN(generative adversarial network) 등이 사용될 수 있으나 반드시 여기에 제한되는 것은 아니다. 드론은, 제어 장치로부터 수신되는 비행 명령에 포함된 비행 경로를 따라 매장 내에서 공중 이동하여 매장 내의 할당된 선반을 카메라로 촬영하고 선반 촬영 영상을 무선 통신으로 제어 장치로 전송한다. 바람 직하게, 드론은, 제어 장치와 근거리 통신으로 통신할 수 있다. 드론은 위치 측위 기능을 포함 하여 자신의 위치를 실시간으로 측정할 수 있다. 위치 측위는, GPS 위치 측위, 기지국 기반 위치 측위, 와이파 이 기반 위치 측위, UWB 기반 위치 측위 등 다양한 방식이 사용될 수 있다. 근거리 통신은, 예를 들어, 블루투스 통신, 적외선 통신, RFID(Radio Frequency Identification) 통신, WLAN(Wireless Local Access Network) 통신, NFC 통신, 직비(Zigbee) 통신 등을 포함할 수 있으나, 여기에 제 한되는 것은 아니다. 또한 드론은 제어 장치와 4G, 5G 등의 이동통신망 또는 향후 개발된 차세대 이 동통신기술을 이용하여 통신할 수 있다. 매장 내에는 하나의 드론 또는 복수의 드론이 배치될 수 있다. 매장의 크기에 따라 적절한 수의 드론 이 배치될 수 있다. 매장 내에 복수의 드론이 배치되어 있는 경우, 제어 장치는 각 드론마 다 임무를 할당하여 제어할 수 있다. 도 2는 본 발명의 일 실시예에 따른 제어 장치의 블록도이다. 도 2를 참조하면, 제어 장치는, 사용자 인터 페이스부, 통신부, 제어부 및 데이터베이스를 포함한다. 사용자 인터페이스부는, 사용자와 상호작용하여 사용자로부터 입력을 수신할 수 있다. 사용자 인터페이스 부는, 매장 배치도를 디스플레이 장치를 통해 출력할 수 있고 이를 바탕으로 사용자로부터 드론에 대 한 임무 지시 입력을 수신할 수 있다. 예를 들어, 드론이 촬영해야 할 선반에 대한 선택 입력 또는 드론 의 비행 경로에 대한 입력을 수신할 수 있다. 사용자 인터페이스부는, 매장 배치도에 선반 혹은 장애물을 추가/제거할 수 있는 사용자 입력을 수신하여, 매장 배치도를 편집할 수 있다. 또한, 사용자 인터페이스부는, 드론의 실시간 비행 경로 및 상태 정 보, 임무 수행 결과, 그리고 드론의 촬영 영상의 분석 결과인 재고 정보를 디스플레이 장치를 통해 표시할 수 있다. 통신부는, 근거리 통신 모듈을 통해 드론과 통신한다. 근거리 통신 모듈은, 예를 들어, 블루투스 통 신 모듈, 적외선 통신 모듈, RFID 통신 모듈, WLAN 통신 모듈, NFC 통신 모듈, 직비(Zigbee) 통신 모듈 등을 포 함할 수 있다. 또한 통신부는, LTE 모뎀, 또는 5G 모뎀을 통해 드론과 통신할 수 있다. 제어부는, 상기 사용자 인터페이스부를 통한 사용자의 입력에 기초하여, 드론이 매장 내부에서 비행할 최적 비행 경로를 생성하고 비행 경로를 포함하는 비행 명령을 상기 통신부를 통해 드론으로 전송하고, 드론으로부터 수신되는 선반 촬영 영상을 분석하여 매장 내 선반의 결품, 또는 상품 파손 등의 재고 분석을 수행한다. 제어부는, 재고 분석 결과와, 드론의 실시간 비행 경로 및 상태 정보, 그리고 드론의 임무 수행 결과 등을 상기 사용자 인터페이스부를 통해 디스플레이 장치에 표시할 수 있다. 제어부는, 드론 으로부터 수신되는 선반 촬영 영상을 미리 학습된 인공지능 모델을 통해 분석할 수 있다. 데이터베이스는, 매장 내 배치된 각각의 선반 정보(크기, 3차원 위치 좌표, 배치 방향, 진열 상품의 대분 류 등)와 장애물 정보, 매장 지형 정보(선반 배치도, UWB 앵커 위치 등) 등의 정보를 포함한 매장 배치도와, 학 습된 인공지능 모델을 포함하여 구성된다. 상기 학습된 인공지능 모델은, 결품, 상품 파손 등의 검출을 위한 모 델, 장애물 인식 모델, 사람 탐지 모델을 포함하는 것이 바람직하다. 도 2에 도시된 바와 같이, 제어부는, 프로세서, 최적 경로 계획부 및 영상 분석부를 포함 한다. 최적 경로 계획부 및 영상 분석부는, 프로그램으로 구현되어 메모리에 저장되고 프로세서(13 1)에 의해 실행될 수 있고, 또는 하드웨어와 소프트웨어의 조합으로 구현되어 동작할 수 있다. 프로세서는, 제어 장치의 전체적인 동작을 관리한다. 더욱 상세하게는, 프로세서는, 사용자 인 터페이스부를 통해 사용자의 입력이 수신되면, 최적 경로 계획부에서 생성한 드론의 현재 위치 를 기반으로 한 최적 비행 경로를 포함하는 비행 명령을 통신부를 통해 드론에게 전송한다. 또한, 프 로세서는, 드론의 실시간 상태 정보와 위치 정보를 전달받아 사용자 인터페이스부를 통해 디스 플레이 장치에 표시하고, 드론으로부터 수신되는 선반 촬영 영상을 영상 분석부로 전달한다. 최적 경로 계획부는, 드론이 매장 내 선반을 촬영하기 위한 최적 비행 경로를 생성한다. 최적 경로 계획부는, 드론이 촬영할 선반들을 할당하고, 선반 촬영을 위한 비행 좌표를 계산하며, 계산된 비행 좌표를 포함하는 최적 비행 경로를 생성한다. 영상 분석부는, 드론에서 촬영하여 전송한 선반 촬영 영상을 기초로 파노라마 이미지를 생성하고, 데 이터베이스에 저장된 인공지능 모델을 이용하여 상기 파노라마 이미지를 분석하여, 결품이나 상품 훼손 등 의 재고 분석을 수행한다. 도 3은 도 2의 최적 경로 계획부 및 영상 분석부의 구체적인 구성을 나타낸 블록도이다. 도 3을 참조하면, 최적 경로 계획부는, 배치 최적화부(132a) 및 경로 생성부(132b)를 포함하고, 영상 분석부는, 영상 수집부 (133a), 파노라마 이미지 생성부(133b) 및 검출부(133c)를 포함한다. 배치 최적화부(132a)는, 드론에 대한 목적지가 주어지면, 데이터베이스에 저장된 매장 배치도의 선반 정보, 장애물 정보 등을 참조하여, 드론의 현재 위치에서 목적지까지 이동할 수 있는 최단 거리 노드를 반 복 계산하여 드론이 촬영할 선반들을 할당한다. 이때, 배치 최적화부(132a)는, 드론의 배터리 잔여량, 총 비행 가능 시간, 드론들 간의 충돌 회피를 함께 고려하여 선반들을 할당한다. 바람직하게, 배치 최 적화부(132a)는, 다익스트라(Dijkstra) 알고리즘, A*알고리즘 등을 사용하여 선반들을 할당할 수 있다. 경로 생성부(132b)는, 상기 배치 최적화부(132a)에서 할당한 선반들의 크기 정보, 통로 폭 정보, 드론의 카메라의 수직/수평 화각, 수직/수평 촬영 영역의 오버랩 비율을 기초로 선반들을 촬영할 비행 좌표를 계산하고, 계산된 비행 좌표를 포함하는 비행 경로를 생성한다. 경로 생성부(132b)는, 드론 간의 충돌 회피 등 을 고려하여, 비행 좌표에 비행 시각을 매칭하여 비행 경로를 생성할 수 있다. 구체적으로, 경로 생성부(132b)는, 일련의 연속적으로 진열된 선반들에 대해 선반 촬영을 위한 비행 좌표들을 계산한다. 비행 좌표들은, 연속적으로 진열된 선반들의 부분 영상들을 촬영하기 위한 공중 이동 좌표들로 구성 된다. 도면을 참조하여 공중 이동 좌표를 설명하면 다음과 같다. 도 4는 연속적으로 진열된 선반들을 측면에서 바라본 도면이고, 도 5는 연속적으로 진열된 선반들을 정면에서 바라본 도면이며, 도 6은 일 실시예에 따른 드 론의 공중 이동 방향을 설명하는 도면이다. 도 4 및 도 5를 참조하면, 연속적으로 진열된 선반들은 높이가 서로 다르다. 따라서, 연속적으로 진열된 선반들 을 드론이 모두 촬영하기 위해서는, 높이가 가장 높은 선반의 높이(Sv)를 고려해야 한다. 도 6에 도시된 바와 같이, 드론은 지그재그로 이동하면서 선반들을 촬영한다. 도 4에 도시된 바와 같이, 드론은, 선반들을 촬영할 때, 선반으로부터 Tb 거리만큼 이격된 위치에서 상하 및 좌우로 이동한다. 도 5를 참조하면, 드론은, 왼쪽의 최초의 공중 이동 좌표에서 한번 선반들을 촬영하 고, 오른쪽으로 2*Tha*(1-Oc) 거리만큼 이동하여 정지한 상태에서 두번째 촬영을 할 수 있다. 또는 드론은, 왼쪽의 최초의 공중 이동 좌표부터 동영상 촬영을 시작하고, 오른쪽으로 2*Tha*(1-Oc) 거리에 해당하는 공중 이 동 좌표로 이동한다. 여기서 Tha는 선반으로부터 Tb 거리만큼 이격된 드론의 선반에 대한 수평 촬영 거리의 1/2이며, Oc는 촬영 영역의 오버랩 비율이다. 촬영 영역이 오버랩되도록 하는 이유는, 전체 선반들에 대한 파노 라마 이미지를 획득하기 위함이다. 이와 같은 방식으로 드론은, 기 결정된 수평 비행 횟수만큼, 촬영 후 오른쪽으로 2*Tha*(1-Oc) 거리만큼씩 이동하여 정지한 상태에서 촬영을 하거나, 동영상을 촬영하면서 오른쪽으로 2*Tha*(1-Oc) 거리씩에 해당하는 공중 이동 좌표로 수평 이동한다. 이와 같이 수평 방향으로 촬영을 모두 완료한 후, 도 4에 도시된 바와 같이, 드론은 수직 방향 아래로 2*Tva*(1-Oc) 거리에 해당하는 공중 이동 좌표로 수직 이동하며 동영상을 계속 촬영하거나, 또는 수직 방향 아래 로 2*Tva*(1-Oc) 거리만큼 이동하여 정지한 상태에서 촬영을 한다. 여기서 Tva는 선반으로부터 Tb 거리만큼 이격 된 드론의 수직 촬영 거리의 1/2이다. 그리고 수평 방향 왼쪽으로 2*Tha*(1-Oc) 거리에 해당하는 공중 이동 좌표로 수평 이동하며 동영상을 계속 촬영하거나, 수평 방향 왼쪽으로 2*Tha*(1-Oc) 거리만큼 이동하여 정지한 상태에서 다시 촬영을 한다. 수평 방향으로 촬영을 모두 완료한 후, 더 촬영할 영역이 있는 경우, 동일한 방식 으로, 도 6의 예와 같이 지그재그로 이동하면서 연속적으로 진열된 선반들의 부분 영상을 모두 촬영한다. 수직 방향의 이동은, 기 결정된 수직 비행 횟수만큼 이루어진다. 매장 내의 공간을 xyz 직교 좌표계로 표현하고, 연속적으로 진열된 선반들의 좌측 하단의 좌표를 (Spx, Spy, Sp z)라 할 때, 해당 선반들을 촬영할 최초의 공중 이동 좌표는 다음과 같이 표현할 수 있다. 드론의 공중 이 동시 흔들림 등을 고려하여, 최초의 공중 이동 좌표에 소정의 여유분을 추가할 수도 있다. 예를 들어, Dx = Spx + Tb - E과 같이, 여유분(E)를 반영할 수 있다. y, z 좌표도 마찬가지다.최초의 공중 이동 좌표"}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "그리고, 최초의 공중 이동 좌표 이후의 드론이 이동할 공중 이동 좌표는 다음과 같이 정의할 수 있다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "위 예에서, 최초의 공중 이동 좌표는 연속적으로 진열된 선반들의 좌측 하단의 좌표이므로, 상기 Dy(t) 식의 ±에 서 +는 오른쪽으로 이동을 의미하고, -는 왼쪽으로 이동을 의미한다. 그리고 위 예에서, 드론은 상단부터 하단으로 내려오며 촬영을 하므로, Dz(t)는 이전 Dz(t)에서 2*Tva*(1-Oc)를 뺀 값이다. 다만, 드론이 수평으로 이동할 때는, Dz(t)=Dz(t-1)이고, 수직 방향 아래로 이동할 때만, 가 된다. 만약, 최 초의 공중 이동 좌표가 연속적으로 진열된 선반들의 우측 또는 좌측 상단의 좌표인 경우에, Dz(t)는 이전 Dz(t)에 서 2*Tva*(1-Oc)를 더한 값이 될 수 있다. 연속적으로 진열된 선반들을 촬영하기 위한 x축 좌표 Dx(t)는 드론 의 이동과 상관없이 일정하다. 상기 공중 이동 좌표들에서의 파라미터들 Tb, Tva, Tha는 다음과 같이 결정된다. 먼저, Tva를 결정하고, Tva를 기 초로 Tb를 결정하며, Tva를 기초로 Tha를 결정한다. 구체적으로, Tva는, 공중 이동 좌표의 z 좌표를 구하는데 활용되는 값으로서, 다음과 같이 계산된다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "여기서, Pvf는 드론의 수직 비행 횟수 즉, z축 비행 횟수이고, max_Tb는 선반 촬영시 드론의 뒷편에 있는 선반과의 안전거리 유지를 위한 선반과 드론 간의 최대 이격 거리이다. 도 4를 참조하면, La는 통로 의 폭이고, Ls는 안전거리이므로, max_Tb는 La에서 Ls을 뺀 값이다. Fv는 드론에 탑재된 카메라의 수직 화각 이다. Sv는 연속적으로 진열된 선반들 중 높이가 가장 높은 선반의 높이이다. 상기 Pvf를 구하는데 있어서 올림 함수인 cell을 사용하여 미촬영 영역이 없도록 한다. 선반으로부터 최대 이격 거리 max_Tb만큼 떨어진 드론이, 예를 들어, 제1위치에서 수직 방향으로 제2위치로 한번 이동을 하였을 때, 제1위치에서의 카메라의 수직 촬영 범위와 제2위치에서의 카메라의 수직 촬영 범위는 Oc의 비율만큼 오버랩 되고, 따라서 제1, 2위치에서 촬영한 수직 촬영 거리는 2*(2*max_Tva - max_Tva*Oc)이다. 즉, 1회 수직 비행당 수직 촬영 거리는 2*(2*max_Tva-max_Tva*Oc)=2*max_Tva*(2-Oc)이므로, 가장 높은 선반의 높이 Sv를 1회 수직 비행 당 수직 촬영 거리로 나눈 값을 올림하여 수직(z축) 비행 횟수를 구한다. 이때, 안전 마진 확보를 위해, 가장 높은 선반의 높이 Sv를 1회 수직 비행당 수직 촬영 거리로 나눈 값에 1을 더한다. 즉, 드론의 뒷편 선반과의 안전거리, 드론의 카메라의 수직 화각, 가장 높은 선반의 높이를 기초로 수직 비행 횟수가 구해지고, 그 구해진 수직 비행 횟수와, 수직 방향 오버랩 비율을 기초로, Tva가 구해진다. 이 Tva는 앞서 설명한 바와 같이 최초 공중 이동 좌표에 참조되고, 이후에는 해당 Tva와 수직 방향 오버랩 비율, 그 리고 수직 비행 횟수가 참조되어, 다음번 공중 이동 좌표의 z축 좌표가 결정된다. 다음으로, Tb는, 촬영 대상인 선반으로부터 드론까지의 이격거리로서 공중 이동 좌표의 x축 좌표에 참조된 다. Tb는, 다음과 같이, Tva 및 카메라의 수직 화각을 이용하여 계산된다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "다음으로, Tha는, 드론의 공중 이동 좌표의 y 좌표를 구하는데 활용되는 값으로서, 상기 촬영 대상인 선반 으로부터 드론까지의 이격거리인 Tb와, 드론의 카메라의 수평 화각 Fh를 이용하여 다음과 같이 계산된 다. 이 Tha는 앞서 설명한 바와 같이 최초 공중 이동 좌표에 참조되고, 이후에는 해당 Tha와 수평 방향 오버랩 비 율, 그리고 수평 비행 횟수가 참조되어, 다음번 공중 이동 좌표의 y축 좌표가 결정된다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 6, "content": "수평 비행 횟수(Phf)는 다음과 같이, 연속적으로 진열된 선반들의 전체 가로 길이(Sh), 상기 Tha, 수평 방향 오버 랩 비율(Oc)를 이용하여 계산된다. 본 실시예에서는, 수평 방향 오버랩 비율과 수직 방향 오버랩 비율이 동일한 것으로 설명하나, 서로 다를 수 있다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 7, "content": "다시 도 3을 참조하면, 영상 분석부는, 영상 수집부(133a), 파노라마 이미지 생성부(133b) 및 검출부 (133c)를 포함한다. 영상 수집부(133a)는, 프로세서로부터 드론이 공중 이동 좌표들을 따라 이동하며 촬영한 선반 촬영 영상을 수신한다. 선반 촬영 영상은, 정지 영상 또는 동영상일 수 있고, 영상이 촬영된 공중 이동 좌표, 시간 정보를 포함한다. 파노라마 이미지 생성부(133b)는, 상기 영상 수집부(133a)에서 수신된 선반 촬영 영상을 이용하여 파노라마 이 미지를 생성한다. 예를 들어, 파노라마 이미지 생성부(133b)는, 연속적으로 진열된 선반들에 대한 파노라마 이 미지를 생성한다. 파노라마 이미지는, 정지 영상을 이용하여 생성될 수 있고, 또는 동영상을 이용하여 생성될 수 있다. 파노라마 이미지 생성부(133b)는, 상시 수신된 선반 촬영 영상이 정지 영상인 경우, 해당 정지 영상이 촬용된 공중 이동 좌표, 시간 정보를 이용하여, 상호 인접한 공중 이동 좌표에서 촬영된 정지 영상들을 이용하여, 연속 적으로 진열된 선반들에 대한 파노라마 이미지를 생성한다. 바람직하게, 파노라마 이미지 생성부(133b)는, 파노 라마 이미지에 대해 영상 품질을 저하시키는 방사 왜곡이나 접선 왜곡 등을 보정하여 품질을 향상시킬 수 있다. 파노라마 이미지 생성부(133b)는, 상시 수신된 선반 촬영 영상이 동영상인 경우, 동영상에서 상술한 각 공중 이 동 좌표를 기준으로 해당 공중 이동 좌표에 도달하기 소정 시간 전부터 해당 공중 이동 좌표에 도달할 때까지 촬영한 동영상 프레임들을 후보 프레임들로서 추출하고, 추출한 동영상 프레임들 중 흐림(블러, blurred) 정도 가 가장 작은 프레임을 키 프레임으로 선택하고, 선택된 키 프레임들을 이용하여 파노라마 이미지를 생성한다. 흐림 정보를 분석하는 방법으로서, 예를 들어, 라플라시안 분산, 가우시안 블러 등의 블러 탐지 기술을 적용할수 있다. 드론의 성능이 개선되었다고 해도, 내/외부 요인으로 인해 드론이 등속도를 유지하지 못할 수도 있고, 흔들림 등에 의해 영상의 초점이 맞지 않을 수 있으므로, 선반 촬영 영상이 동영상인 경우에는, 후보 프 레임들을 추출한 후 이중에서 가장 선명한 프레임을 선택하여 파노라마 이미지를 생성하는 것이다. 상기 공중 이동 좌표에 도달하기 소정 시간 전은 좌표로서 정의될 수 있다. 예를 들어, 수평 이동하며 촬영된 동영상의 경우, 어느 한 공중 이동 좌표의 y축 좌표 Dy(t)를 기준으로 후보 프레임으로서 추출되는 동영상 프레 임은 다음과 같은 좌표 구간으로 정의할 수 있다. 즉, 드론이 Dy(t-1)에서 Dy(t)로 수평 이동하는 과정에서 촬영한 동영상에서 아래 좌표 구간으로 정의되는 복수의 동영상 프레임들이 후보 프레임으로 선택된다. 이때, 추출 마진 비율인 Er은 오버랩 비율(Oc)보다 작아야 한다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 8, "content": "이를 도면을 이용하여 설명하면 다음과 같다. 도 7은 본 발명의 일 실시예에 따른 드론이 제1 공중 이동 좌표에서 제2 공중 이동 좌표로 수평 이동할 때를 나 타낸 도면으로, 도 7에 도시된 바와 같이, 드론은 제1위치인 Dy(t-1)에서 Dy(t)로 수평 이동하면서, 카메라 로 선반을 동영상으로 촬영한다. 영상 수집부(133a)는 그 동영상을 수신하고, 파노라마 이미지 생성부 (133b)는, 수신된 동영상의 프레임들 중에서, Dy(t)-2*Tha*Er에 해당하는 공중 이동 좌표에서 촬영된 프레임부터, Dy(t)에 해당하는 공중 이동 좌표에서 촬영된 프레임까지를, 후보 프레임으로 추출한다. 추출 마진 비율인 Er은 오버랩 비율(Oc)보다 작으므로, 다른 번 수평 이동한 후인 Dy(t+1)을 기준으로 추출되는 후보 프레 임들과, 상기 Dy(t)를 기준으로 추출되는 후보 프레임들은 모두 오버랩될 수 있다. 다시 도 3을 참조하면, 검출부(133c)는, 데이터베이스에 저장된 인공지능 모델을 이용하여 상기 파노라마 이미지 생성부(133b)에서 생성된 파노라마 이미지를 분석하여, 결품이나 상품 훼손 등의 재고 분석을 수행하고, 분석 결과를 사용자 인터페이스로 출력한다. 도 8은 도 1의 드론의 구성을 나타낸 블록도이다. 도 8을 참조하면, 드론은, 제어부, 구동부, 통신부, 측위부 및 영상 촬영부를 포함한다. 구동부는, 프로펠러, 모터 및 배터리를 포함하여 드론을 공중으로 부양하고 공중 이동시킨다. 프로펠 러는 복수 개 포함할 수 있고, 모터에 의해 회전하여 양력을 제공한다. 모터는 제어부의 제어에 따라 배터 리로부터 전원을 공급받아 회전력을 프로펠러로 제공한다. 통신부는, 제어 장치와 무선 통신을 한다. 통신부는, 제어 장치로부터 비행 명령을 수신하 고, 영상 촬영부에서 촬영된 선반 촬영 영상을 제어 장치로 전송한다. 측위부는, GPS 수신기, 실내 위치 측위 모듈 등을 포함하여, 드론의 현재 위치를 측위한다. 영상 촬영부는, 카메라를 포함하고, 제어부의 제어에 따라 카메라를 이용하여 매장 내 선반을 촬영한 다. 영상 촬영부는, 정지 영상을 촬영하거나, 또는 동영상을 촬영한다. 제어부는, 드론의 전체적인 동작을 제어한다. 제어부는, 제어 장치로부터 수신된 비행 명 령에 포함된 비행 경로를 기초로, 상기 구동부를 제어하여 공중 이동을 제어하고, 상기 영상 촬영부 를 제어하여 선반을 촬영한다. 구체적으로, 제어부는, 상기 측위부에서 측정된 현재 위치와, 상기 비행 경로에 포함된 공중 이동 좌 표들을 이용하여, 드론을 공중 이동 좌표로 이동시키면서, 상기 영상 촬영부를 제어하여 카메라로 선 반을 촬영하고, 촬영된 선반 촬영 영상을 상기 통신부를 통해 제어 장치로 전송한다. 제어부는, 선반 촬영 영상에 촬영 좌표와 촬영 시간 정보를 포함하여 제어 장치로 전송한다. 도 9는 본 발명의 일 실시예에 따른 드론을 이용하여 매장을 관리하는 방법을 설명하는 흐름도이다. 도 9를 참조하면, 단계 S901에서, 제어 장치는, 드론에 대한 목적지가 주어지면, 데이터베이스 에 저장된 매장 배치도의 선반 정보, 장애물 정보 등을 참조하여, 드론의 현재 위치에서 목적지까지 이동할 수 있는 최단 거리 노드를 반복 계산하여 드론이 촬영할 선반들을 할당한다. 이때, 제어 장치는, 드론의 배터리 잔여량, 총 비행 가능 시간, 드론들 간의 충돌 회피를 함께 고려하여 선반들을 할당한다. 바람직하게, 다익스트라(Dijkstra) 알고리즘, A*알고리즘 등을 사용하여 선반들을 할당할 수 있다. 단계 S902에서, 제어 장치는, 매장 배치도에서 확인되는 상기 할당한 선반들의 크기 정보와, 통로 폭 정보, 그리고 드론의 카메라의 수직/수평 화각, 드론이 통로에 위치했을 때 촬영 대상 선반의 뒷편 선반과의 안전거리와, 수직/수평 촬영 영역의 오버랩 비율을 기초로 선반들을 촬영할 비행 좌표를 계산한다. 단계 S903에서, 제어 장치는, 단계 S902에서 계산된 비행 좌표를 포함하는 비행 명령을 무선 통신으로 드 론으로 전송한다. 복수의 드론에 비행 임무를 할당하는 경우, 제어 장치는, 드론 간의 충돌 회피 등 을 고려하여, 비행 좌표에 비행 시각을 매칭하여 비행 명령을 생성할 수 있다. 단계 S904에서, 제어 장치는, 드론이 상기 비행 좌표를 이동하여 선반들을 촬영한 선반 촬영 영상을 드론으로부터 수신한다. 선반 촬영 영상은 정지 영상이거나 동영상일 수 있다. 단계 S905에서, 제어 장치는, 수신된 선반 촬영 영상을 이용하여, 파노라마 이미지를 생성한다. 제어 장치 는, 연속적으로 진열된 선반들 마다 파노라마 이미지를 생성한다. 단계 S906에서, 제어 장치는, 상기 파노라마 이미지를 분석하여, 결품이나 상품 훼손 등의 재고 분석을 수 행하고, 분석된 결과를 화면에 출력할 수 있다. 바람직하게, 제어 장치는, 인공지능 모델을 이용하여 파노 라마 이미지를 분석할 수 있다. 도 10은 본 발명의 일 실시예에 따른 선반들을 촬영한 비행 좌표를 계산하는 방법을 설명하는 흐름도이다. 도 10을 참조하여 설명하는 비행 좌표는, 연속적으로 진열된 선반들을 촬영하기 위한 비행 좌표이다. 매장 내에 이 러한 연속적으로 진열된 선반들의 배열이 여러 개일 경우, 각 배열마다 비행 좌표가 계산된다. 도 10을 참조하면, 단계 S1001에서, 제어 장치는, 매장 배치도를 참조하여 확인한 선반 사이의 통로의 폭 과, 드론이 통로에 위치했을 때 촬영 대상 선반의 뒷편 선반과의 안전거리를 고려하여 촬영 대상 선반과 드론 간의 최대 이격 거리를 산출하고, 그 최대 이격 거리와, 촬영 영역의 오버랩 비율과, 매장 배치도에 서 확인한 높이가 가장 높은 선반의 높이와, 그리고 드론의 카메라의 수직 화각을 기초로, 수직 비행 횟수 를 계산한다. 단계 S1002에서, 제어 장치는, 상기 가장 높은 선반의 높이와, 상기 수직 비행 횟수와, 상기 촬영 영역의 오버랩 비율을 기초로, 드론의 카메라로 촬영 대상 선반에 대해 한번에 촬영할 수 있는 수직 촬영 거리의 1/2을 계산한다. 단계 S1003에서, 제어 장치는, 상기 수직 촬영 거리의 1/2과, 드론의 카메라의 수직 화각을 기초로, 촬영 대상 선반과 드론 간의 이격 거리를 계산한다. 단계 S1004에서, 제어 장치는, 상기 단계 S1003에서 계산한 이격 거리와, 드론의 카메라의 수평 화각 을 기초로 드론의 카메라로 촬영 대상 선반에 대해 한번에 촬영할 수 있는 수평 촬영 거리의 1/2을 계산한 다. 단계 S1005에서, 제어 장치는, 매장 배치도를 참조하여 확인한 연속적으로 진열된 선반들의 전체 가로 길 이와, 상기 단계 S1004에서 계산한 수평 촬영 거리의 1/2과, 상기 촬영 영역의 오버랩 비율을 기초로 수평 비행 횟수를 계산한다. 단계 S1006에서, 제어 장치는, 연속적으로 진열된 선반들의 기준 좌표(예를 들어, 좌측 하단의 좌표)를 기 준으로, 상기 단계 S1001 내지 단계 S1005에서 계산된, 촬영 대상 선반과 드론 간의 이격 거리와, 수평/수 직 비행 횟수와, 수평/수직 촬영 거리의 1/2과, 촬영 영역의 오버랩 비율을 기초하여 해당 연속적으로 진열된 선반들을 촬영하기 위한 공중 이동 좌표들을 계산한다. 도 11은 본 발명의 일 실시예에 따른 드론에서 촬영한 동영상으로부터 파노라마 이미지를 생성하는 방법을 설명 하는 흐름도이다. 도 11을 참조하면, 단계 S1101에서, 제어 장치는, 드론으로부터 수신된 동영상인 선반 촬영 영상에서, 각 공중 이동 좌표를 기준으로 해당 공중 이동 좌표에 도달하기 소정 시간 전부터 해당 공중 이동 좌 표에 도달할 때까지 촬영한 동영상 프레임들을 후보 프레임들로서 추출한다. 상기 공중 이동 좌표에 도달하기 소정 시간 전은 좌표로서 정의될 수 있다. 즉, 소정 시간 전은, 드론의 카메라로 선반을 한번에 촬영할 수있는 수평 촬영 거리 또는 수직 촬영 거리에 추출 마진 비율(Er)을 곱하여 계산된 거리의 좌표이다. 이때, 추출 마진 비율인 Er은 오버랩 비율(Oc)보다 작아야 한다. 단계 S1102에서, 제어 장치는, 각 공중 이동 좌표에 대해 각 공중 이동 좌표를 기준으로 추출한 후보 프레 임들 중에서 키 프레임을 선택한다. 제어 장치는, 흐림(블러, blurred) 정도가 가장 작은 프레임, 즉 가장 선명한 프레임을 키 프레임으로 선택한다. 흐림 정보를 분석하는 방법으로서, 예를 들어, 라플라시안 분산, Crete at al. 등의 블러 탐지 기술을 적용할 수 있다. 단계 S1003에서, 제어 장치는, 각 공중 이동 좌표에 대해 선택한 키 프레임을 이용하여 파노라마 이미지를 생성한다. 즉, 제어 장치는, 인접한 공중 이동 좌표들의 키 프레임을 이어 파노라마 이미지를 생성한다. 복수의 프레임을 이용하여 파노라마 이미지를 생성하는 방법은 특별히 제한되지 않는다. 본 명세서는 많은 특징을 포함하는 반면, 그러한 특징은 본 발명의 범위 또는 특허청구범위를 제한하는 것으로 해석되어서는 안 된다. 또한, 본 명세서에서 개별적인 실시예에서 설명된 특징들은 단일 실시예에서 결합되어 구현될 수 있다. 반대로, 본 명세서에서 단일 실시예에서 설명된 다양한 특징들은 개별적으로 다양한 실시예에 서 구현되거나, 적절히 결합되어 구현될 수 있다. 도면에서 동작들이 특정한 순서로 설명되었으나, 그러한 동작들이 도시된 바와 같은 특정한 순서로 수행되는 것으로, 또는 일련의 연속된 순서, 또는 원하는 결과를 얻기 위해 모든 설명된 동작이 수행되는 것으로 이해되어 서는 안 된다. 특정 환경에서 멀티태스킹 및 병렬 프로세싱이 유리할 수 있다. 아울러, 상술한 실시예에서 다양 한 시스템 구성요소의 구분은 모든 실시예에서 그러한 구분을 요구하지 않는 것으로 이해되어야 한다. 상술한 프로그램 구성요소 및 시스템은 일반적으로 단일 소프트웨어 제품 또는 멀티플 소프트웨어 제품에 패키지로 구 현될 수 있다. 상술한 바와 같은 본 발명의 방법은 프로그램으로 구현되어 컴퓨터로 읽을 수 있는 형태로 기록매체(시디롬, 램, 롬, 플로피 디스크, 하드 디스크, 광자기 디스크 등)에 저장될 수 있다. 이러한 과정은 본 발명이 속하는 기술 분야에서 통상의 지식을 가진 자가 용이하게 실시할 수 있으므로 더 이상 상세히 설명하지 않기로 한다."}
{"patent_id": "10-2021-0126652", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 9, "content": "이상에서 설명한 본 발명은, 본 발명이 속하는 기술분야에서 통상의 지식을 가진 자에게 있어 본 발명의 기술적 사상을 벗어나지 않는 범위 내에서 여러 가지 치환, 변형 및 변경이 가능하므로 전술한 실시예 및 첨부된 도면 에 의해 한정되는 것이 아니다."}
{"patent_id": "10-2021-0126652", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 매장 관리 시스템을 설명하는 도면이다. 도 2는 본 발명의 일 실시예에 따른 제어 장치의 블록도이다. 도 3은 도 2의 최적 경로 계획부 및 영상 분석부의 구체적인 구성을 나타낸 블록도이다. 도 4는 연속적으로 진열된 선반들을 측면에서 바라본 도면이다. 도 5는 연속적으로 진열된 선반들을 정면에서 바라본 도면이다. 도 6은 일 실시예에 따른 드론의 공중 이동 방향을 설명하는 도면이다. 도 7은 본 발명의 일 실시예에 따른 드론이 제1 공중 이동 좌표에서 제2 공중 이동 좌표로 수평 이동할 때를 나 타낸 도면이다. 도 8은 도 1의 드론의 구성을 나타낸 블록도이다. 도 9는 본 발명의 일 실시예에 따른 드론을 이용하여 매장을 관리하는 방법을 설명하는 흐름도이다.도 10은 본 발명의 일 실시예에 따른 선반들을 촬영한 비행 좌표를 계산하는 방법을 설명하는 흐름도이다. 도 11은 본 발명의 일 실시예에 따른 드론에서 촬영한 동영상으로부터 파노라마 이미지를 생성하는 방법을 설명 하는 흐름도이다."}
