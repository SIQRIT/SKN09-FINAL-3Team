{"patent_id": "10-2021-0093128", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2023-0012363", "출원번호": "10-2021-0093128", "발명의 명칭": "뇌 혈관 모델링을 이용한 병변 분석 방법 및 그 장치", "출원인": "사회복지법인 삼성생명공익재단", "발명자": "서우근"}}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "뇌 혈관 모델링을 이용한 병변 분석 장치에서 수행되는 병변 분석 방법에 있어서,상기 병변 분석 장치가 뇌 혈관 영상을 수신하는 단계;상기 병변 분석 장치가 상기 뇌 혈관 영상으로부터 뇌 혈관 영역을 추출하는 단계;상기 병변 분석 장치가 추출된 상기 뇌 혈관 영역을 기초로, 연속 공간(Continuous Space)에서 뇌 혈관 모델을생성하는 단계;상기 병변 분석 장치가 상기 뇌 혈관 모델로부터 복수의 뇌 혈관 특성들을 산출하는 단계;상기 병변 분석 장치가 인공지능 알고리즘을 이용하여, 상기 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를도출하는 단계;를 포함하는, 뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 병변 분석 장치가 상기 뇌 혈관 모델을 생성하는 단계는,상기 뇌 혈관 영역의 표면을 등가곡면(isosurface)들로 분할하여 뇌 혈관 표면 모델을 생성하는 단계;3차원 연속공간을 상기 등가곡면의 각 꼭지점들을 기준으로 복수의 셀들로 균등하게 분할하는 단계; 및각 셀들의 경계면으로부터 뇌 혈관의 중심선을 추출하는 단계를 포함하는, 뇌 혈관 모델링을 이용한 병변 분석방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,복수의 셀들로 균등하게 분할하는 단계는,상기 등가곡면의 각 꼭지점들 중 가장 가까운 꼭지점이 동일한 공간 좌표들의 집합을 하나의 셀로 설정하는 단계를 포함하는, 뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "제2항에 있어서,상기 뇌 혈관의 중심선을 추출하는 단계는,상기 뇌 혈관 영역의 하부 슬라이스로부터 상기 중심선의 시작점을 결정하는 단계;상기 뇌 혈관 영역, 또는 상기 뇌 혈관 표면 모델로부터 골격 구조를 생성하고, 상기 골격 구조를 정제하여 상기 중심선의 끝점들을 결정하는 단계; 및상기 시작점과 상기 끝점들을 잇는 상기 각 셀들의 경계면을 트랙킹하여 중심선을 추출하는 단계;를 포함하는,뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 중심선의 끝점들을 결정하는 단계는,상기 뇌 혈관 영역, 또는 상기 뇌 혈관 표면 모델을 골격화하여 골격 구조를 생성하는 단계;공개특허 10-2023-0012363-4-상기 골격 구조로부터 일정 길이 이하의 가지들을 프루닝(Pruning)하여 정제하는 단계;정제된 골격 구조를 기초로 트리(Tree) 구조의 연결 리스트(Linked list)를 생성하는 단계; 및상기 연결 리스트로부터 리프 노드(Leaf node)들을 특정하여 끝점들을 결정하는 단계를 포함하는, 뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 병변 분석 장치가 상기 복수의 뇌 혈관 특성들을 산출하는 단계는,상기 뇌 혈관 모델의 중심선의 분기점을 기준으로 뇌 혈관을 복수의 그룹들로 그룹화하는 단계; 및상기 그룹들 각각에 대하여 상기 복수의 뇌 혈관 특성을 산출하는 단계;를 포함하는 뇌 혈관 모델링을 이용한병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 복수의 뇌 혈관 특성은,뇌 혈관 단면적, 최대 내접구 반경, 최대 반경, 최소 반경, 최대-최소 반경 비율, 표면 둘레, 뒤틀림, 곡률, 환상성(circularity), 분기각 및 이들을 기초로 산출되는 계산 값 중 적어도 하나를 포함하는, 뇌 혈관 모델링을이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 질병의 상태 및 예후를 도출하는 단계는,상기 인공지능 알고리즘이 상기 뇌 혈관 특성들로부터 특징 선별(feature extraction)을 통하여 질환 연계 속성들을 추출하는 단계; 및상기 인공지능 알고리즘이 추출된 질환 연계 속성들을 기초로 피검사자의 질병의 상태 및 예후를 도출하는단계;를 포함하는, 뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_9", "content": "제8항에 있어서,상기 인공지능 알고리즘은, 콕스-라소 모델(Cox-Lasso model)을 이용하여 상기 질병의 상태 및 예후를도출하는, 뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_10", "content": "제1항에 있어서,상기 인공지능 알고리즘은, 상기 뇌 혈관 특성들을 포함하는 복수의 학습 데이터 셋들을 반복 학습하여, 질환 연계 속성들을 추출하고, 추출된 상기 질환 연계 속성들을 기초로, 학습 데이터 셋들 각각의 질병의 상태 및 예후를 도출하고, 그 도출된결과에 대한 품질을 상기 학습 데이터 셋에 포함되는 정답 데이터와 비교 평가하여, 미리 설정된 기준 값 이상의 품질을 가지도록 학습되는, 뇌 혈관 모델링을 이용한 병변 분석 방법."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_11", "content": "뇌 혈관 영상들, 뇌 혈관 모델링 및 병변 분석을 위한 소프트웨어, 및 데이터들을 저장하는 메모리; 및뇌 혈관 영상으로부터 뇌 혈관 영역을 추출하고,공개특허 10-2023-0012363-5-추출된 상기 뇌 혈관 영역을 기초로, 연속 공간에서 뇌 혈관 모델을 생성하고,상기 뇌 혈관 모델로부터 복수의 뇌 혈관 특성들을 산출하고,상기 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를 도출하도록 구성되는 적어도 하나의 프로세서를포함하는, 뇌 혈관 모델링을 이용한 병변 분석 장치."}
{"patent_id": "10-2021-0093128", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_12", "content": "컴퓨팅 장치를 이용하여 제1항 내지 제10항 중 어느 한 항의 방법을 실행시키기 위하여 매체에 저장된 컴퓨터프로그램."}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 뇌 혈관 모델링을 이용한 병변 분석 방법 및 그 장치에 관한 것으로, 본 발명의 일 실시예는, 상기 병 변 분석 장치가 뇌 혈관 영상을 수신하는 단계, 상기 병변 분석 장치가 상기 뇌 혈관 영상으로부터 뇌 혈관 영역 을 추출하는 단계, 상기 병변 분석 장치가 상기 추출된 뇌 혈관 영역을 기초로, 연속 공간(Continuous Space)에 서 뇌 혈관 모델을 생성하는 단계, 상기 병변 분석 장치가 상기 뇌 혈관 모델로부터 복수의 뇌 혈관 특성들을 산 출하는 단계, 상기 병변 분석 장치가 인공지능 알고리즘을 이용하여, 상기 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를 도출하는 단계를 포함하는 뇌 혈관 모델링을 이용한 병변 분석 방법을 제공한다."}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 뇌 혈관 모델링을 이용한 병변 분석 방법 및 그 장치에 관한 것으로, 보다 상세하게는 뇌 혈관 모델 링을 이용하여 연속 공간(Continuous space) 상에서 뇌 혈관 특성들을 산출하고, 이를 기초로 질병의 상태 및 예후를 도출하는 병변 분석 방법 및 그 장치에 관한 것이다."}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "뇌 혈관 구조는 뇌 질환을 사전 진단 하거나, 뇌 질환의 경과를 추적하는 데 중요한 요소로 사용된다. 다만, 자기공명혈관조영술(Magnetic Resonance Angiography, MRA)와 같은 종래의 의료 영상 기술은 뇌의 해부 학적 구조를 이산공간(Discrete space) 상에 변환하여 나타내므로, 뇌 혈관과 같은 미세한 구조를 정량화 함에 있어 큰 오차를 유발할 수 있다. 따라서, 연속공간에서의 뇌 혈관 구조를 모델링하여 이를 정량화 할 수 있는 기술의 개발이 요구되고 있다. 한국 등록특허공보 등록번호 10-2095731(2020.03.26. 등록)호는 딥러닝 기반의 보조 진단 시스템의 MRA 영상 학 습 방법 및 혈관 병변 보조 진단 방법에 관한 것으로, MRA 영상으로부터 혈관 영역이 추출되는 혈관 추출 단계 와; 상기 보조 진단 시스템에 의해 상기 혈관 영역을 따라 기 설정된 사이즈의 복수의 3차원 큐브 영역이 추출 되는 큐브 추출 단계와; 상기 보조 진단 시스템에 의해 상기 MRA 영상의 레이블에 기초하여, 복수의 상기 3차원 큐브 영역이 양성 큐브와 음성 큐브로 분류되는 학습 데이터 추출 단계와; 상기 보조 진단 시스템에 의해 상기 양성 큐브와 상기 음성 큐브가 학습 데이터로 하여 학습되어 학습 모델이 생성되는 모델 생성 단계를 포함하는 것을 특징으로 한다. 이러한 방법은, 이산공간 상에 변환되어 나타난 뇌의 해부학적 구조를 세그멘테이션하여 혈관을 추출하므로, 뇌 혈관과 같이 매우 미세한 구조의 진단에 적용할 경우 큰 오차가 발생할 수 있다. 선행기술문헌 특허문헌 (특허문헌 0001) 1. 한국 등록특허공보 등록번호 10-2095731(2020.03.26. 등록)호"}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "본 발명이 해결하고자 하는 기술적 과제는 뇌 혈관 모델링을 이용하여 연속 공간 상에서 뇌 혈관 특성들을 산출 하고, 이를 기초로 질병의 상태 및 예후를 도출하는 병변 분석 방법 및 그 장치를 제공하는 것이다."}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "상술한 기술적 과제를 해결하기 위하여 본 발명의 일 실시예는, 뇌 혈관 모델링을 이용한 병변 분석 장치에서 수행되는 병변 분석 방법을 제공한다.뇌 혈관 모델링을 이용한 병변 분석 방법은, 상기 병변 분석 장치가 뇌 혈관 영상을 수신하는 단계, 상기 병변 분석 장치가 상기 뇌 혈관 영상으로부터 뇌 혈관 영역을 추출하는 단계, 상기 병변 분석 장치가 상기 추출된 뇌 혈관 영역을 기초로, 연속 공간(Continuous Space)에서 뇌 혈관 모델을 생성하는 단계, 상기 병변 분석 장치가 상기 뇌 혈관 모델로부터 복수의 뇌 혈관 특성들을 산출하는 단계, 상기 병변 분석 장치가 인공지능 알고리즘을 이용하여, 상기 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를 도출하는 단계를 포함할 수 있다. 본 발명의 일 실시예에 따른, 상기 병변 분석 장치가 상기 뇌 혈관 모델을 생성하는 단계는, 상기 추출된 뇌 혈 관 영역의 표면을 등가곡면(isosurface)들로 분할하여 뇌 혈관 표면 모델을 생성하는 단계, 3차원 연속공간을 상기 등가곡면의 각 꼭지점들을 기준으로 복수의 셀들로 균등하게 분할하는 단계, 및 각 셀들의 경계면으로부터 뇌 혈관의 중심선을 추출하는 단계를 포함할 수 있다. 본 발명의 일 실시예에 따른, 복수의 셀들로 균등하게 분할하는 단계는, 상기 등가곡면의 각 꼭지점들 중 가장 가까운 꼭지점이 동일한 공간 좌표들의 집합을 하나의 셀로 설정하는 단계를 포함할 수 있다. 본 발명의 일 실시예에 따른, 상기 뇌 혈관의 중심선을 추출하는 단계는, 상기 뇌 혈관 영역의 하부 슬라이스로 부터 상기 중심선의 시작점을 결정하는 단계, 상기 뇌 혈관 영역, 또는 상기 뇌 혈관 표면 모델로부터 골격 구 조를 생성하고, 상기 골격 구조를 정제하여 상기 중심선의 끝점들을 결정하는 단계, 및 상기 시작점과 상기 끝 점들을 잇는 상기 각 셀들의 경계면을 트랙킹하여 중심선을 추출하는 단계를 포함할 수 있다. 본 발명의 일 실시예에 따른, 상기 중심선의 끝점들을 결정하는 단계는, 상기 뇌 혈관 영역, 또는 상기 뇌 혈관 표면 모델을 골격화하여 골격 구조를 생성하는 단계, 상기 골격 구조로부터 일정 길이 이하의 가지들을 프루닝 (Pruning)하여 정제하는 단계, 상기 정제된 골격 구조를 기초로 트리(Tree) 구조의 연결 리스트(Linked list)를 생성하는 단계, 및 상기 연결 리스트로부터 리프 노드(Leaf node)들을 특정하여 끝점들을 결정하는 단계를 포함 할 수 있다. 본 발명의 일 실시예에 따른 상기 병변 분석 장치가 상기 복수의 뇌 혈관 특성들을 산출하는 단계는, 상기 뇌 혈관 모델의 중심선의 분기점을 기준으로 뇌 혈관을 복수의 그룹들로 그룹화하는 단계, 및 상기 그룹들 각각에 대하여 상기 복수의 뇌 혈관 특성을 산출하는 단계를 포함할 수 있다. 본 발명의 일 실시예에 따르면, 상기 복수의 뇌 혈관 특성은, 뇌 혈관 단면적, 최대 내접구 반경, 최대 반경, 최소 반경, 최대-최소 반경 비율, 표면 둘레, 뒤틀림, 곡률, 환상성(circularity), 분기각 및 이들을 기초로 산 출되는 계산 값 중 적어도 하나를 포함할 수 있다. 본 발명의 일 실시예에 따른, 상기 질병의 상태 및 예후를 도출하는 단계는, 상기 인공지능 알고리즘이 상기 뇌 혈관 특성들로부터 특징 선별(feature extraction)을 통하여 질환 연계 속성들을 추출하는 단계, 및 상기 인공 지능 알고리즘이 추출된 질환 연계 속성들을 기초로 피검사자의 질병의 상태 및 예후를 도출하는 단계를 포함할 수 있다. 본 발명의 일 실시예에 따르면, 인공지능 알고리즘은, 콕스-라소 모델(Cox-Lasso model)을 이용하여 상기 질병 의 상태 및 예후를 도출할 수 있다. 본 발명의 일 실시예에 따른, 상기 인공지능 알고리즘은, 상기 뇌 혈관 특성들을 포함하는 복수의 학습 데이터 셋들을 반복 학습하여, 질환 연계 속성들을 추출하고, 추출된 상기 질환 연계 속성들을 기초로, 학습 데이터 셋 들 각각의 질병의 상태 및 예후를 도출하고, 그 도출된 결과에 대한 품질을 상기 학습 데이터 셋에 포함되는 정 답 데이터와 비교 평가하여, 미리 설정된 기준 값 이상의 품질을 가지도록 학습되는 것일 수 있다. 본 발명의 일 실시예는, 뇌 혈관 영상들, 뇌 혈관 모델링 및 병변 분석을 위한 소프트웨어, 및 데이터들을 저장 하는 메모리, 및 뇌 혈관 영상으로부터 뇌 혈관 영역을 추출하고, 추출된 상기 뇌 혈관 영역을 기초로, 연속 공 간에서 뇌 혈관 모델을 생성하고, 상기 뇌 혈관 모델로부터 복수의 뇌 혈관 특성들을 산출하고, 상기 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를 도출하도록 구성되는 적어도 하나의 프로세서를 포함하는, 뇌 혈관 모 델링을 이용한 병변 분석 장치를 제공한다. 본 발명의 일 실시예는, 컴퓨팅 장치를 이용하여 상술한 방법들 중 어느 하나의 방법을 실행시키기 위하여 매체 에 저장된 컴퓨터 프로그램을 제공한다."}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명은 연속 공간에서 생성된 뇌 혈관 모델로부터 뇌 혈관의 기하학적 특성들을 도출하고, 인공지능 알고리 즘을 이용하여, 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를 도출할 수 있다. 따라서, 뇌 혈관 구조를 비침습적, 자동적으로 정량화하여 종래의 육안 판단 방식으로 수행하기 어려웠던 미세 구조의 병변 분석을 보다 정밀하게 수행할 수 있다. 또한, 이산 공간에서 미세 구조의 기하 분석을 할 경우 일 어날 수 있는 오류들을 최소화할 수 있다. 본 발명의 기술적 효과들은 이상에서 언급한 것들로 제한되지 않으며, 언급되지 않은 또 다른 기술적 효과들은 아래의 기재로부터 당업자에게 명확하게 이해될 수 있을 것이다."}
{"patent_id": "10-2021-0093128", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "본 발명이 여러 가지 수정 및 변형을 허용하면서도, 그 특정 실시예들이 도면들로 예시되어 나타내어지며, 이하 에서 상세히 설명될 것이다. 그러나 본 발명을 개시된 특별한 형태로 한정하려는 의도는 아니며, 오히려 본 발 명은 청구항들에 의해 정의된 본 발명의 사상과 합치되는 모든 수정, 균등 및 대용을 포함한다. 층, 영역 또는 기판과 같은 요소가 다른 구성요소 \"상(on)\"에 존재하는 것으로 언급될 때, 이것은 직접적으로 다른 요소 상에 존재하거나 또는 그 사이에 중간 요소가 존재할 수도 있다는 것을 이해할 수 있을 것이다. 본 발명은 기능적인 블록 구성들 및 다양한 처리 단계들로 나타내어질 수 있다. 이러한 기능 블록들은 특정 기 능들을 실행하는 다양한 개수의 하드웨어 또는/및 소프트웨어 구성들로 구현될 수 있다. 예를 들어, 본 발명은 하나 이상의 마이크로프로세서의 제어 또는 다른 제어 장치에 의해서 다양한 기능들을 실행할 수 있는, 메모리, 프로세싱, 로직(logic), 룩 업 테이블(look-up table) 등과 같은 직접 회로 구성들을 채용할 수 있다. 본 발명 에의 구성 요소들이 소프트웨어 프로그래밍 또는 소프트웨어 요소들로 실행될 수 있는 것과 유사하게, 본 발명 은 데이터 구조, 프로세스들, 루틴들 또는 다른 프로그래밍 구성들의 조합으로 구현되는 다양한 알고리즘을 포 함하여, C, C++, 자바(Java), 어셈블러(assembler) 등과 같은 프로그래밍 또는 스크립팅 언어로 구현될 수 있다. 또한, 본 발명은 전자적인 환경 설정, 신호 처리, 및/또는 데이터 처리 등을 위하여 종래 기술을 채용할 수 있 다. \"부\", \"요소\", \"수단\", \"구성\"과 같은 용어는 넓게 사용될 수 있으며, 본 발명의 구성요소들이 기계적이고 물리적인 구성들로서 한정되는 것은 아니다. 상기 용어는 프로세서 등과 연계하여 소프트웨어의 일련의 처리들 (routines)의 의미를 포함할 수 있다. 비록 제1, 제2 등의 용어가 여러 가지 요소들, 성분들, 영역들, 층들, 단계들 및/또는 지역들을 설명하기 위해 사용될 수 있지만, 이러한 요소들, 성분들, 영역들, 층들, 단계들 및/또는 지역들은 이러한 용어에 의해 한정되 어서는 안 된다는 것을 이해할 것이다. 도 1은 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 방법을 설명하는 순서도이다. 도 1을 참조하면, 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 방법은, 뇌 혈관 영상을 수 신하는 단계(S110), 뇌 혈관 영역을 추출하는 단계(S120), 뇌 혈관 모델을 생성하는 단계(S130), 뇌 혈관 특성 들을 추출하는 단계(S140), 및 질병의 상태 및 예후를 도출하는 단계(S150)를 포함한다.뇌 혈관 영상을 수신하는 단계(S110)에서, 병변 분석 장치는 피검자의 뇌 혈관 영상을 수신한다. 상기 뇌 혈관 영상은 뇌 자기 공명 영상(Magnetic Resonance Imaging, MRI), 뇌 자기 공명 혈관 조영술(Magnetic Resonance Angiography, MRA) 또는 TOF-뇌 자기 공명 혈관 조영술(Time-of-flight MRA)을 이용하여 획득한 영상일 수 있 다. 상기 병변 분석 장치는 뇌 혈관 영상 촬영 장치로부터 뇌 혈관 영상을 획득하거나, 의료 데이터 시스템을 통하여 뇌 혈관 영상을 획득할 수 있다. 상기 의료 데이터 시스템은, 통합의료정보시스템 (Hospital Information System), 전자의무기록(Electronic Medical Record), 검사 정보 시스템(Laboratory Information System), 데이터 웨어하우스(Data Warehouse), 임상연구지원 시스템(Clinical Device Information System) 등 과 같이 의료 서비스와 연구에 필요한 시스템일 수 있으며, 이에 한정되는 것은 아니다. 뇌 혈관 영역을 추출하는 단계(S120)에서, 병변 분석 장치는 수신한 뇌 혈관 영상으로부터 뇌 혈관 영역을 추출 한다. 여기서, 뇌 혈관 영역 추출은 상기 뇌 혈관 영상의 배경 및 노이즈를 제거하고, 뇌 혈관에 대응하는 픽셀 을 추출하는 과정일 수 있다. 일 실시예로, 병변 분석 장치는, 뇌 혈관 영상의 픽셀들의 밝기를 기초로, 미리 설정된 문턱 값 이상의 픽셀을 선택하고, 선택된 픽셀들과 인접한 픽셀들 중 특정한 조건을 만족하는 픽셀들을 선택하여 뇌 혈관에 대응하는 픽셀들을 추출할 수 있다. 또한, 병변 분석 장치는, 영역 기반 영상 분할 방법, 경계 기반 영상 분할 방법 또는 이들의 조합을 이용하여 뇌 혈관 영역을 추출할 수 있다. 여기서, 영역 기반 영상 분할 방법은 워터쉐드 (Watershed) 알고리즘을 포함할 수 있다. 뇌 혈관 모델을 생성하는 단계(S130)에서, 병변 분석 장치는 추출된 뇌 혈관 영역을 기초로 연속 공간에서 뇌 혈관 모델을 생성한다. 여기서 연속 공간에서의 뇌 혈관 모델이란, 종래의 고립된 좌표 지점들을 기초로 생성된 뇌 혈관 모델이 아닌, 좌표 지점들 사이의 연속적인 관계를 기초로 생성된 뇌 혈관 모델을 의미한다. 종래의 뇌 혈관 모델들이 고립된 좌표 지점들을 기초로 생성됨에 따라, 미세 구조의 끊어짐, 뒤틀림, 또는 잘못된 연결 등 으로 인하여 기하학적 뇌 혈관 특성을 산출하는 것이 어려웠다. 반면, 본 발명에서는 연속 공간에서 생성된 뇌 혈관 모델을 이용하므로, 미세 구조의 단면, 진행방향, 뒤틀림 등의 기하학적 뇌 혈관의 특성을 보다 정확하게 산출할 수 있다. 뇌 혈관 모델을 생성하는 단계(S130)는 도 2의 설명에서 보다 자세하게 서술한다. 뇌 혈관 특성들을 추출하는 단계(S140)에서, 병변 분석 장치는 생성된 뇌 혈관 모델을 이용하여 복수의 뇌 혈관 특성들을 산출한다. 이 때, 복수의 뇌 혈관 특성들은 뇌 혈관 단면적, 최대 내접구 반경, 최대 반경, 최소 반경, 최대-최소 반경 비율, 표면 둘레, 뒤틀림, 곡률, 환상성(circularity), 분기각 및 이들을 기초로 산출되 는 계산 값 중 적어도 하나를 포함할 수 있다. 이 때, 병변 분석 장치는 뇌 혈관 모델의 뇌 혈관을 마디별로 그 룹화하여, 그룹화 된 뇌 혈관들에 대하여 특성을 도출할 수 있다. 질병의 상태 및 예후를 도출하는 단계(S150)에서, 병변 분석 장치는 인공지능 알고리즘을 이용하여, 뇌 혈관 특 성들을 기초로 질병의 상태 및 예후를 도출할 수 있다. 여기서, 인공지능 알고리즘은 뇌 혈관 특성들을 포함하는 복수의 학습 데이터 셋들을 반복 학습한 것일 수 있다. 여기서 복수의 학습 데이터 셋들은 뇌 혈관 영상 또는 뇌 혈관 영상으로부터 산출된 뇌 혈관 특성들을 포 함할 수 있으며, 각 뇌 혈관 영상에 대응하는 질병의 상태 및 예후에 대한 정답 데이터를 포함하는 것일 수 있 다. 인공지능 알고리즘은 복수의 학습 데이터 셋들을 학습하여, 질환 연계 속성들을 추출하고, 추출된 질환 연계 속 성들을 기초로 학습 데이터 셋들 각각의 질병의 상태 및 예후를 도출하고, 그 도출된 결과에 대한 품질을 학습 데이터 셋에 포함되는 정답 데이터와 비교 평가하여, 그 비교 값이 미리 설정된 기준 값 이상이 되도록 반복하 여 학습된 것일 수 있다. 또한, 인공지능 알고리즘은 새로운 뇌 혈관 영상 또는 이로부터 산출된 뇌 혈관 특성들을 입력 받고, 이를 기초 로 질환 연계 속성들을 추출하고, 추출된 질환 연계 속성들을 기초로 각각의 질병의 상태 및 예후를 도출하고, 그 결과를 이용하여 학습할 수 있다. 질병의 상태 및 예후를 도출하는 단계(S150)는, 인공지능 알고리즘이 뇌 혈관 특성들로부터 특징 선별(feature extraction)을 통하여 질환 연계 속성들을 추출하는 단계, 및 인공지능 알고리즘이 추출된 질환 연계 속성들을 기초로 피검사자의 질병의 상태 및 예후를 도출하는 단계를 포함할 수 있다. 상기 인공지능 알고리즘은, 콕스-라소 모델(Cox-Lasso model)을 생존 위험도 모델로 이용할 수 있다. 다른 실시 예로, 인공지능 알고리즘이 도출하고자 하는 결과 값이 이진 값일 경우, 로지스틱 라소 모델(Logistic lassomodel)을 생존 위험도 모델로 이용할 수 있다. 상기 인공지능 알고리즘은, 질병 표지 및 질병의 상태 분류를 위하여, 공지의 기계 학습 분류 모델을 이용할 수 있다. 예를 들어, 인공지능 알고리즘은 서포트 벡터 머신(Support vector machine), 랜덤 포레스트(Random forest) 알고리즘, 인공 신경망 또는 이들의 조합을 이용할 수 있다. 도 2는 도 1에 도시된 뇌 혈관 모델을 생성하는 단계를 보다 상세하게 설명하는 순서도이다. 도 2를 참조하면, 뇌 혈관 모델을 생성하는 단계(S130)는, 뇌 혈관 영역의 표면을 등가곡면들로 분할하는 단계 (S210), 등가곡면의 꼭지점들을 기준으로 복수의 셀들로 분할하는 단계(S220), 및 뇌 혈관의 중심선을 추출하는 단계(S230)을 포함할 수 있다. 뇌 혈관 영역의 표면을 등가곡면들로 분할하는 단계(S210)는, 추출된 뇌 혈관 영역의 표면을 등가곡면 (isosurface)들로 분할하는 단계이다. 병변 분석 장치는, 볼륨 데이터 셋의 형태를 갖는 뇌 혈관 영역의 표면을 마칭 큐브 알고리즘(marching cubes)을 이용하여, 삼각형 메시 구조의 등가곡면들로 변환한다. 여기서 등가곡면 들은 꼭지점을 공유하는 연속함수의 레벨 셋일 수 있다. 병변 분석 장치는 지나치게 가깝거나 중복되는 꼭지점들을 삭제하고, 각 등가곡면들이 정삼각형에 가깝도록 꼭 지점들을 재배치할 수 있다. 등가곡면들의 꼭지점들 및 꼭지점들의 연결 관계 정보는 뇌 혈관 영역의 표면 모델 을 구성할 수 있다. 등가곡면의 꼭지점들을 기준으로 복수의 셀들로 분할하는 단계(S220)에서, 병변 분석 장치는 3차원 연속공간을 상기 등가곡면의 각 꼭지점들을 기준으로 복수의 셀들로 균등하게 분할한다. 여기서, 복수의 셀들로 균등하게 분할하는 것은, 등가곡면의 각 꼭지점들 중 가장 가까운 꼭지점이 동일한 공간 좌표들의 집합을 하나의 셀로 설 정하는 것을 의미한다. 일 실시예로, 복수의 셀들은 3차원 보로노이 셀(Voronoi Cell)일 수 있다. 뇌 혈관의 중심선을 추출하는 단계(S230)에서, 병변 분석 장치는 각 셀들의 경계면으로부터 뇌 혈관의 중심선을 추출할 수 있다. 이하 도 3의 설명에서 뇌 혈관의 중심선을 추출하는 단계를 보다 상세하게 설명한다. 도 3은 도 2에 도시된 뇌 혈관의 중심선을 추출하는 단계를 보다 상세하게 설명하는 순서도이다. 도 3을 참조하면, 뇌 혈관의 중심선을 추출하는 단계(S230)는, 시작점 결정 단계(S310), 끝점 결정 단계(S320), 및 셀들의 경계면을 트랙킹하여 중심선을 추출하는 단계(S330)를 포함할 수 있다. 시작점 결정 단계(S310)는, 상기 뇌 혈관 영역의 하부 슬라이스로부터 상기 중심선의 시작점을 결정하는 단계일 수 있다. 병변 분석 장치는 뇌 혈관 영역의 최하부를 포함하는 슬라이스에 나타난 클러스터(cluster)들의 무게 중심으로부터 중심선의 시작점을 결정할 수 있다. 일 실시예로, 병변 분석 장치는 최하부 슬라이스 또는 최하부 슬라이스를 포함하는 연속하는 복수의 슬라이스를 선택하여, 혈관 하부의 횡단면 프로파일(Profile)을 생성할 수 있다. 세그멘테이션 알고리즘 또는 탐색 알고리즘을 이용하여 생성된 혈관 하부 횡단면 프로파일의 모든 영 역에 그룹 인덱스를 부여할 수 있다. 일 실시예로, 세그멘테이션 알고리즘은 Region Growing 알고리즘일 수 있 다. 일 실시예로, 탐색 알고리즘은 Breadth First Search 알고리즘일 수 있다. 생성된 각 그룹들의 무게 중심을 산출하고, 산출된 무게 중심들을 시작점으로 결정할 수 있다. 끝점 결정 단계(S320)에서, 병변 분석 장치는 등가곡면들의 집합이 구성하는 뇌 혈관 표면 모델을 골격화하여 골격 구조를 생성하고, 생성된 골격 구조를 자료 구조로 변환하여, 리프 노드들을 특정하여 끝점을 결정한다. 끝점을 결정하는 각 단계에 대하여 도 4에서 상세하게 설명하도록 한다. 셀들의 경계면을 트랙킹하여 중심선을 추출하는 단계(S330)에서, 병변 분석 장치가 시작점으로부터 끝점까지, 등가곡면들의 꼭지점들을 기준으로 생성된 복수의 셀들의 경계(edge)를 트랙킹하여 중심선을 추출할 수 있다. 또한, 병변 분석 장치는 경계면을 트랙킹하며, 중심선의 접선 벡터(Tangent vector), 법선 벡터(Normal vector) 및 이중법벡터(Binormal vector)를 구할 수 있다. 도 4는 도 3에 도시된 끝점 결정 단계를 보다 상세하게 설명하는 순서도이다. 도 4를 참조하면, 끝점 결정 단계(S320)는, 골격 구조 생성 단계(S410), 골격 구조를 정제하는 단계(S420), 골 격 구조를 기초로 연결 리스트를 생성하는 단계(S430), 및 리프 노드들을 특정하여 끝점들을 결정하는 단계 (S440)을 포함할 수 있다. 골격 구조 생성 단계(S410)는, 뇌 혈관 영역, 또는 뇌 혈관 영역의 표면 모델을 골격화하여 골격 구조를 생성하 는 단계일 수 있다. 골격 구조를 정제하는 단계(S420)에서, 병변 분석 장치는 상기 골격 구조를 이루는 혈관 가지(Branch)들 중 일 정 길이 이하의 가지들을 프루닝(Pruning)하여 골격 구조를 정제할 수 있다. 골격 구조를 기초로 연결 리스트를 생성하는 단계(S430)에서, 병변 분석 장치는 골격 구조를 기초로 트리 구조 의 연결 리스트를 생성할 수 있다. 리프 노드들을 특정하여 끝점들을 결정하는 단계(S440)에서, 병변 분석 장치는 자식 노드(Child node)를 갖지 않는 리프 노드(Leaf node)들을 특정하고, 리프 노드에 대응하는 끝점을 결정할 수 있다. 본 발명의 실시예에 따른 병변 분석 장치는 중심선의 시작점과 끝점을 자동으로 추출하여, 사용자의 임의의 선 택으로 인한 오차를 감소시킬 수 있다. 도 5는 도 1에 도시된 뇌 혈관 특성들을 추출하는 단계를 보다 상세하게 설명하는 순서도이다. 도 5를 참조하면, 뇌 혈관 특성들을 추출하는 단계(S140)는, 분기점을 기준으로 그룹화하는 단계(S510), 및 각 각의 그룹들에 대하여 뇌 혈관 특성을 산출하는 단계(S520)을 포함한다. 분기점을 기준으로 그룹화하는 단계(S510)는, 병변 분석 장치가 뇌 혈관 모델의 중심선의 분기점을 기준으로, 뇌 혈관들을 복수의 그룹들로 그룹화하는 단계일 수 있다. 여기서, 분기점은 뇌 혈관의 골격 구조에서, 하나의 혈관이 하나 이상의 혈관으로 분기(bifurcation)되는 지점일 수 있다. S230 단계에서 추출된 중심선들은 각 분기점에 따라 그룹화가 되어 있지 않다. 따라서, 각 위치의 기하학적 특 성 및 마디 별 특성을 계산하기 위하여, 분기점을 기준으로 혈관들을 그룹화 또는 구간화 할 수 있다. 그룹화된 뇌 혈관의 구간들은 서로 연결된 형태의 자료 구조인 연결 리스트(Linked list)로 구현될 수 있다. 각각의 그룹들에 대하여 뇌 혈관 특성을 산출하는 단계(S520)에서, 병변 분석 장치는 상기 그룹들 각각에 대하 여 상기 복수의 뇌 혈관 특성을 산출할 수 있다. 병변 분석 장치는 뇌 혈관 모델을 기초로 혈관 그룹들에 기초 하여, 모든 위치 및 각 그룹에서의 복수의 뇌 혈관 특성을 산출할 수 있다. 여기서, 뇌 혈관 모델은 상술한 뇌 혈관 표면 모델, 중심선 모델 및 그룹화 연결 리스트를 포함할 수 있다. 복수의 뇌 혈관 특성은, 뇌 혈관 단면적, 최대 내접구 반경, 최대 반경, 최소 반경, 최대-최소 반경 비율, 표면 둘레, 뒤틀림, 곡률, 환상성(circularity), 분기각 및 이들을 기초로 산출되는 계산 값 중 적어도 하나를 포함 할 수 있다. 뇌 혈관 특성은 상술한 중심선의 접선 벡터, 법선 벡터 및 이중법 벡터를 기초로 계산되는 것일 수 있다. 따라서, 이산 공간의 볼륨 데이터 셋을 기초로 뇌 혈관 모델을 생성하고, 이를 바탕으로 기하학적 특성을 산출하는 종래의 병변 분석 방법에 비하여, 본 발명의 일 실시예에 따른 병변 분석 방법은, 뇌 혈관 말단의 미 세한 구조까지 보다 정확한 뇌 혈관 특성을 산출할 수 있다. 도 6은 본 발명의 일 실시예에 따라 생성된 뇌 혈관 모델을 도시하는 도면이다. 도 6을 참조하면, 뇌 혈관 모델은 뇌 혈관 표면 모델 및 중심선을 포함한다. 뇌 혈관 표면 모델은 볼륨 데이터 셋으로 이루어진 뇌 혈관 영역을 마칭 큐브 알고리즘을 이용하여 등가곡 면들의 집합으로 변환하고, 등가곡면들의 꼭지점들과, 꼭지점들의 연결 관계 정보를 이용하여 생성된 연속된 공 간 상의 모델이다. 중심선은 등가곡면들의 각 꼭지점들 중 가장 가까운 꼭지점이 동일한 공간 좌표들의 집합을 하나의 셀로 설 정하고, 시작점(S)과 끝점(E)을 잇는 셀의 경계면을 따라 트래킹하여 추출하여 생성된 연속된 공간 상의 모델이 다. 하나의 중심선이 복수의 중심선들로 분기하는 지점에 분기점(P)이 위치한다. 분기점을 기준으로, 뇌 혈 관들은 그룹화 될 수 있다. 일 예로, 분기점(P)을 기준으로 뇌 혈관은 구간으로 분할될 수 있으며, 각 뇌 혈관 구간들의 위치적 관계는 연결 리스트(Linked list)로 저장될 수 있다. 이상의 본 발명의 다양한 실시예에 따른 병변 분석 방법은 컴퓨터에서 실행될 수 있는 프로그램으로 작성할 수 있고, 컴퓨터로 읽을 수 있는 기록매체를 이용하여 상기 프로그램을 동작시키는 범용 디지털 컴퓨터에서 구현될 수 있다. 상기 컴퓨터로 읽을 수 있는 기록매체는 마그네틱 저장매체(예를 들면, 롬, 플로피 디스크, 하드 디스 크 등), 광학적 판독 매체(예를 들면, 시디롬, 디브이디 등)와 같은 저장매체를 포함한다.도 7은 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 장치를 설명하는 블럭도이다. 도 7을 참조하면, 병변 분석 장치는 메모리 및 프로세서를 포함한다. 메모리는 뇌 혈관 영상들, 뇌 혈관 모델링 및 병변 분석을 위한 소프트웨어, 및 데이터들을 저장할 수 있 다. 메모리는 프로세서의 처리 또는 제어를 위한 프로그램 등 병변 분석 장치의 전반적인 동작 을 위한 다양한 데이터를 더 저장할 수 있다. 일 예로, 병변 분석 장치의 구동을 위한 OS, 데이터들, 명령 어들을 저장할 수 있다. 이러한 데이터 및 응용 프로그램 중 적어도 일부는 통신부를 통하여 외부 서버로부터 다운로드 된 것일 수 있다. 메모리는 프로세서에 포함된 롬(ROM), 램(RAM)과 같은 내부 메모리로 구현되거나, 프로세서와 별도의 장치로 구현될 수 있다. 도면에 도시 되지 아니하였으나, 병변 분석 장치는 통신부를 더 포함할 수 있다. 통신부는 뇌 혈관 영상들, 뇌 혈관 모델링 및 병변 분석을 위한 소프트웨어, 및 데이터들을 병변 분석 장치로 전송하기 위한 유선 통신 장치 또는 무선 통신 장치일 수 있다. 통신부가 와이파이 칩이나 블루투스 칩을 이용하는 경우에는 SSID 및 세션 키 등과 같은 각종 연결 정보를 먼저 송수신하여, 이를 이용하여 통신 연결한 후 각종 정보들을 송수신할 수 있다. 무선통신 칩은 IEEE, Zigbee, 3G(3rd Generation), 3GPP(3rd Generation Partnership Project), LTE(Long Term Evolution) 등과 같은 다양한 통신 규격에 따라 통신을 수행하는 칩을 의미한다. NFC 칩은 135kHz, 13.56MHz, 433MHz, 860~960MHz, 2.45GHz 등과 같은 다양한 RF-ID 주파수 대역들 중에서 13.56MHz 대역을 사용하는 NFC(Near Field Communication) 방식으로 동작하는 칩을 의미한다. 프로세서는 병변 분석 장치를 전반적으로 제어하기 위한 구성이다. 구체적으로, 프로세서는 병 변 분석 장치의 메모리에 저장된 각종 프로그램을 이용하여 병변 분석 장치의 전반적인 동작을 제어한다. 예를 들어, 프로세서는 CPU, 램(RAM), 롬(ROM), 시스템 버스를 포함할 수 있다. 본 발명의 일 실시예에 따라, 프로세서는 디지털 신호를 처리하는 디지털 시그널 프로세서(digital signal processor(DSP), 마이크로프로세서(microprocessor), TCON(Time controller)으로 구현될 수 있다. 다만, 이에 한정되는 것은 아니며, 중앙처리장치(central processing unit(CPU)), MCU(Micro Controller Unit), MPU(micro processing unit), 컨트롤러(controller), 어플리케이션 프로세서(application processor(AP)), 또는 커뮤니케 이션 프로세서(communication processor(CP)), ARM 프로세서 중 하나 또는 그 이상을 포함하거나, 해당 용어로 정의될 수 있다. 또한, 프로세서는 프로세싱 알고리즘이 내장된 SoC(System on Chip), LSI(large scale integration)로 구현될 수도 있고, FPGA(Field Programmable gate array) 형태로 구현될 수도 있다. 프로세서는 뇌 혈관 영상으로부터 뇌 혈관 영역을 추출하고, 추출된 뇌 혈관 영역을 기초로, 연속 공간에 서 뇌 혈관 모델을 생성하고, 뇌 혈관 모델로부터 복수의 뇌 혈관 특성들을 산출하고, 뇌 혈관 특성들을 기초로 질병의 상태 및 예후를 도출하도록 구성되는 것일 수 있다. 병변 분석 장치는 외부 장치로부터 뇌 혈관 영상을 수신하고, 이를 분석하여 질병의 상태 및 예후를 도출한 결과 값을 외부 장치로 송신할 수 있다. 여기서 외부 장치는 뇌 혈관 영상 획득 장치, 개인용 컴퓨터, 개인용 단말기 및 병원 및 연구 기관의 의료 데이터 저장소일 수 있으며, 이에 한정되는 것은 아니다. 도 8은 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 시스템을 설명하는 개념도이다. 도 8을 참조하면, 병변 분석 장치는 네트워크에 연결되어, 복수의 외부 장치들에 병변 분석 서비스를 제공할 수 있다. 병변 분석 장치는 서버의 형태로 운영될 수 있으며, 병원, 회사 또는 연구 기간이 제공하는 서버일 수 있 으나, 이에 한정되는 것은 아니다. 여기서 외부 장치들은 뇌 혈관 영상 획득 장치, 개인용 컴퓨터, 개인용 단말기 및 의료 데이터 저장소일 수 있다. 일 실시예로, 외부 장치들은 서로 다른 의료 서비스 제공 기관의 서버들일 수 있으며, 각각의 서 버들은 다시 개인용 컴퓨터, 개인용 단말기 등에 연결되어 서비스를 제공하는 것일 수 있다. 병변 분석 장치는 외부 장치들로부터 환자의 뇌 혈관 영상을 입력 받고, 이를 분석하여, 환자의 질병 의 상태 및 예후를 도출한 결과값을 외부 장치들에 제공할 수 있다. 따라서, 본 실시예에 따른 병변 분석 장치는 인공지능 알고리즘 및 영상 분석을 위한 고속의 컴퓨팅 장치가 없는 개인 병원, 회사 또는 개인 사 용자에게 병변 분석 서비스를 제공할 수 있다.도 9는 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 프로그램의 화면을 나타내는 도면이다. 도 9를 참조하면, 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 방법은 도시된 바와 같이 네 트워크 상에서 실행되는 어플리케이션일 수 있다. 사용자들은 뇌 혈관 영상을 업로드 하여, 뇌 혈관 모델 또는, 이를 기초로 도출한 질병의 상태 및 예후 결과 값 을 제공받을 수 있다. 이하 첨부한 도면들을 참조하여, 본 발명의 바람직한 실시예를 보다 상세하게 설명하고자 한다. 이하 도면 상의 동일한 구성 요소에 대하여는 동일한 참조 부호를 사용하고, 동일한 구성 요소에 대해서 중복된 설명은 생략한 다."}
{"patent_id": "10-2021-0093128", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 방법을 설명하는 순서도이다. 도 2는 도 1에 도시된 뇌 혈관 모델을 생성하는 단계를 보다 상세하게 설명하는 순서도이다. 도 3은 도 2에 도시된 뇌 혈관의 중심선을 추출하는 단계를 보다 상세하게 설명하는 순서도이다. 도 4는 도 3에 도시된 끝점 결정 단계를 보다 상세하게 설명하는 순서도이다. 도 5는 도 1에 도시된 뇌 혈관 특성들을 추출하는 단계를 보다 상세하게 설명하는 순서도이다. 도 6은 본 발명의 일 실시예에 따라 생성된 뇌 혈관 모델을 도시하는 도면이다. 도 7은 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 장치를 설명하는 블럭도이다. 도 8은 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 시스템을 설명하는 개념도이다. 도 9는 본 발명의 일 실시예에 따른 뇌 혈관 모델링을 이용한 병변 분석 프로그램의 화면을 나타내는 도면이다."}
