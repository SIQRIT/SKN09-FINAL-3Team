{"patent_id": "10-2022-0183464", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2024-0101123", "출원번호": "10-2022-0183464", "발명의 명칭": "머신러닝 기반 임신성 당뇨 예측 장치 및 그 방법", "출원인": "가톨릭대학교 산학협력단", "발명자": "고현선"}}
{"patent_id": "10-2022-0183464", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리를 수행하는 임신성 당뇨 예측용 데이터 전처리부(10)와;상기 임신성 당뇨 예측용 데이터 전처리부(10)에서 전처리한 특징지표의 데이터에 대해 의사결정트리 머신러닝모델을 이용하여 적합한 예측모델을 설정하는 머신러닝 예측모델 설정부(20)와;상기 머신러닝 예측모델 설정부(20)에서 설정한 의사결정트리 머신러닝 모델을 이용하여 임신성 당뇨의 발생가능성을 예측하는 머신러닝 임신성 당뇨 예측부(30)와;상기 머신러닝 임신성 당뇨 예측부(30)의 결과에 대해 성능 평가를 수행하는 예측모델 성능 평가부(40);를 포함하여 구성된 것을 특징으로 하는 머신러닝 기반 임신성 당뇨 예측 장치."}
{"patent_id": "10-2022-0183464", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "청구항 1에 있어서,상기 머신러닝 예측모델 설정부(20)는,XGBoost를 예측모델로 사용하는 것을 특징으로 하는 머신러닝 기반 임신성 당뇨 예측 장치."}
{"patent_id": "10-2022-0183464", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "청구항 1에 있어서,상기 머신러닝 예측모델 설정부(20)는,임신 초기와 임신 중기를 구분하고, 초산모와 경산모로 구분하여 예측모델을 설정하는 것을 특징으로 하는 머신러닝 기반 임신성 당뇨 예측 장치."}
{"patent_id": "10-2022-0183464", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "청구항 1에 있어서,상기 머신러닝 예측모델 설정부(20)는,임신 초기 초산모의 특징지표의 경우, 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤,HDL-콜레스테롤)이고,임신 초기 경산모의 특징지표의 경우, 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤,HDL-콜레스테롤),, 임신횟수, 출산횟수(경산모), 생존아수, 이전 임신 당뇨병 과거력, 제왕절개 수술횟수, 조산력, 거대아분만력이고,임신 중기 초산모의 특징지표의 경우, 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤,HDL-콜레스테롤), 당화혈색소, PAPPA, hcg, 50g 당부하 검사 결과이고,임신 중기 경산모의 특징지표의 경우, 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈공개특허 10-2024-0101123-3-증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤,HDL-콜레스테롤), 당화혈색소, PAPPA, hcg, 50g 당부하 검사 결과, 임신횟수, 출산횟수(경산모), 생존아수, 이전 임신 당뇨병 과거력, 제왕절개 수술횟수, 조산력, 거대아분만력인 것을 특징으로 하는 머신러닝 기반 임신성당뇨 예측 장치."}
{"patent_id": "10-2022-0183464", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리를 수행하는 임신성 당뇨 예측용 데이터 전처리단계(ST1)와;상기 임신성 당뇨 예측용 데이터 전처리 단계에서 전처리한 특징지표의 데이터에 대해 의사결정트리 머신러닝모델을 이용하여 적합한 예측모델을 설정하는 머신러닝 예측모델 설정 단계(ST2)와;상기 머신러닝 예측모델 설정 단계에서 설정한 의사결정트리 머신러닝 모델을 이용하여 임신성 당뇨의 발생가능성을 예측하는 머신러닝 임신성 당뇨 예측 단계(ST3)와;상기 머신러닝 임신성 당뇨 예측 단계의 결과에 대해 성능 평가를 수행하는 예측모델 성능 평가 단계(ST4);를 포함하여 수행하는 것을 특징으로 하는 머신러닝 기반 임신성 당뇨 예측 방법."}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "본 발명은 머신러닝 기반 임신성 당뇨 예측 장치 및 방법을 제공하기 위한 것으로, 임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리를 수행하는 임신성 당뇨 예측용 데이터 전처리부와; 상기 임신성 당뇨 예측용 데이터 전처리부에서 전처리한 특징지표의 데이터에 대해 의사결정트리 머신러닝 모델을 이용하여 적 (뒷면에 계속)"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 임신성 당뇨 예측에 관한 것으로, 특히 임상 현장에서 획득할 수 있는 임신성 당뇨의 특징지표를 적 용하고, 머신러닝의 트리 계열 모델 중에서 GBM(Gradient Boosting Machine, 그라디언트 부스팅 머신)을 구현한 XGBoost(eXtreme Gradient Boosting, 익스트림 그라디언트 부스팅)와 같은 의사결정트리 머신러닝을 이용하여 임신성 당뇨를 예측하기에 적당하도록 한 머신러닝 기반 임신성 당뇨 예측 장치 및 그 방법에 관한 것이다."}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "일반적으로 임신성 당뇨병은 임신 이전에 이미 당뇨병이 있던 경우와 달리, 임신에 의해 유발되는 질환이다. 임 신 중에 당대사의 생리학적인 변화가 과장되어 나타난 결과이다. 임신 중 처음으로 발생한 당대사 장애로 정의 할 수 있다. 임신 전 기간 동안 임산부의 대사 이상으로 인해 태아 손상이 생길 수 있다. 임신 초기에는 태아 손상 및 자연 유산이 발생할 수 있고, 임신 중기와 말기에는 거대아, 양수과다, 양수과소, 조산, 사산 등이 발생할 수 있고, 자간전증의 동반율이 높아진다. 분만 후 신생아 저혈당, 호흡곤란, 신생아 황달 등이 발생할 수 있다. 임신성 당뇨병에서 가장 중요한 관심은 태아가 과도하게 커져 이로 인해 분만 손상이 생길 수 있다. 또한 향후 출생아 가 성장시 비만이 될 가능성이 높아져 임신중 조기 진단 및 적절한 치료가 필요한 질병이다. 종래기술에는 한국공개특허 제10-2013-0015413호의 ‘임신성 당뇨 조기 진단 정보를 제공하는 방법 및 임신성 당뇨 조기 진단 정보를 제공하는데 사용되는 임신성 당뇨 모니터링, 진단 및 스크리닝용 키트’ 기술이 공개된 바 있다. 이러한 종래기술은 임신 16주에서 20주 사이의 임신부에 적용될 수 있는 임신성 당뇨 조기 진단 방법, 임신성 당뇨의 진단을 위한 바이오마커로 사용되는 apolipoprotein C3 단백질, 임신성 당뇨의 진단을 위하여 apolipoprotein C3를 바이오마커로 사용하는 방법, 임신성 당뇨 조기 진단 정보 처리 방법, 임신성 당뇨 모니터 링, 진단 및 스크리닝용 키트에 관한 것이다. 또한 임신 16주 내지 20주에 있는 임신부들을 대상으로 apolipoprotein C3를 정량함으로써 임신성 당뇨의 발병 가능성을 미리 예측하거나, 조기 진단할 수 있어, 발병 에 효과적으로 조기에 대처하는데 활용될 수 있다. 그러나 종래기술은 바이오마커 측정이 필요한 제한점이 있고, 머신러닝을 이용하여 임신성 당뇨를 예측하는데 적용되기 어렵다.선행기술문헌 특허문헌 (특허문헌 0001) KR 10-2013-0015413 A"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "이에 본 발명은 상기와 같은 종래의 제반 문제점을 해결하기 위해 제안된 것으로, 본 발명의 목적은 임상 현장 에서 획득할 수 있는 임신성 당뇨의 특징지표를 적용하고, 머신러닝의 트리 계열 모델 중에서 GBM을 구현한 XGBoost와 같은 의사결정트리 머신러닝을 이용하여 임신성 당뇨를 예측할 수 있는 머신러닝 기반 임신성 당뇨 예측 장치 및 그 방법을 제공하는 데 있다."}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "과제의해결수단", "item": 1, "content": "도 1은 본 발명의 일 실시예에 의한 머신러닝 기반 임신성 당뇨 예측 장치의 블록구성도이다. 이에 도시된 바와 같이, 임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리를 수행하는 임신성 당 뇨 예측용 데이터 전처리부와; 상기 임신성 당뇨 예측용 데이터 전처리부에서 전처리한 특징지표의 데 이터에 대해 의사결정트리 머신러닝 모델을 이용하여 적합한 예측모델을 설정하는 머신러닝 예측모델 설정부 와; 상기 머신러닝 예측모델 설정부에서 설정한 의사결정트리 머신러닝 모델을 이용하여 임신성 당뇨의 발생가능성을 예측하는 머신러닝 임신성 당뇨 예측부와; 상기 머신러닝 임신성 당뇨 예측부의 결과에 대해 성능 평가를 수행하는 예측모델 성능 평가부;를 포함하여 구성된 것을 특징으로 한다. 도 2는 본 발명의 일 실시예에 의한 머신러닝 기반 임신성 당뇨 예측 방법의 흐름도이다. 이에 도시된 바와 같이, 임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리를 수행하는 임신성 당 뇨 예측용 데이터 전처리 단계(ST1)와; 상기 임신성 당뇨 예측용 데이터 전처리 단계에서 전처리한 특징지표의 데이터에 대해 의사결정트리 머신러닝 모델을 이용하여 적합한 예측모델을 설정하는 머신러닝 예측모델 설정 단 계(ST2)와; 상기 머신러닝 예측모델 설정 단계에서 설정한 의사결정트리 머신러닝 모델을 이용하여 임신성 당뇨 의 발생가능성을 예측하는 머신러닝 임신성 당뇨 예측 단계(ST3)와; 상기 머신러닝 임신성 당뇨 예측 단계의 결 과에 대해 성능 평가를 수행하는 예측모델 성능 평가 단계(ST4);를 포함하여 수행하는 것을 특징으로 한다."}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명의효과", "paragraph": 1, "content": "본 발명에 의한 머신러닝 기반 임신성 당뇨 예측 장치 및 그 방법은 임상 현장에서 획득할 수 있는 임신성 당뇨 의 특징지표를 적용하고, 머신러닝의 트리 계열 모델 중에서 GBM을 구현한 XGBoost와 같은 의사결정트리 머신러 닝을 이용하여 임신성 당뇨를 예측할 수 있는 효과가 있다."}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "이와 같이 구성된 본 발명에 의한 머신러닝 기반 임신성 당뇨 예측 장치 및 그 방법의 바람직한 실시예를 첨부 한 도면에 의거하여 상세히 설명하면 다음과 같다. 하기에서 본 발명을 설명함에 있어 관련된 공지 기능 또는 구성에 대한 구체적인 설명이 본 발명의 요지를 불필요하게 흐릴 수 있다고 판단되는 경우에는 그 상세한 설명 을 생략할 것이다. 그리고 후술되는 용어들은 본 발명에서의 기능을 고려하여 정의된 용어들로서, 이는 사용자, 운용자의 의도 또는 판례 등에 따라 달라질 수 있으며, 이에 따라 각 용어의 의미는 본 명세서 전반에 걸친 내 용을 토대로 해석되어야 할 것이다. 먼저 본 발명은 임신성 당뇨의 특징지표를 적용한 통계모델을 이용하여 임신성 당뇨를 예측하고자 한 것이다. 도 1은 본 발명의 일 실시예에 의한 머신러닝 기반 임신성 당뇨 예측 장치의 블록구성도이다. 임신성 당뇨 예측용 데이터 전처리부는 임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리를 수행한다. 머신러닝 예측모델 설정부는 임신성 당뇨 예측용 데이터 전처리부에서 전처리한 특징지표의 데이터에 대해 의사결정트리 머신러닝 모델을 이용하여 적합한 예측모델을 설정한다. 머신러닝 임신성 당뇨 예측부는 머신러닝 예측모델 설정부에서 설정한 의사결정트리 머신러닝 모델을 이용하여 임신성 당뇨의 발생가능성을 예측한다. 예측모델 성능 평가부는 머신러닝 임신성 당뇨 예측부의 결과에 대해 성능 평가를 수행한다. 도 2는 본 발명의 일 실시예에 의한 머신러닝 기반 임신성 당뇨 예측 방법의 흐름도이다. 임신성 당뇨 예측용 데이터 전처리 단계(ST1)는 임신성 당뇨의 예측을 위한 특징지표의 정보를 전달받아 전처리 를 수행한다. 머신러닝 예측모델 설정 단계(ST2)는 임신성 당뇨 예측용 데이터 전처리 단계에서 전처리한 특징지표의 데이터 에 대해 의사결정트리 머신러닝 모델을 이용하여 적합한 예측모델을 설정한다. 머신러닝 임신성 당뇨 예측 단계(ST3)는 머신러닝 예측모델 설정 단계에서 설정한 의사결정트리 머신러닝 모델 을 이용하여 임신성 당뇨의 발생가능성을 예측한다. 예측모델 성능 평가 단계(ST4)는 머신러닝 임신성 당뇨 예측 단계의 결과에 대해 성능 평가를 수행한다. 이러한 본 발명에 대해 좀더 상세히 설명하면 다음과 같다. 먼저 임신성 당뇨병은 임상적으로 중요하고 문제가 되는 질병으로, 그 발생 위험도를 예측함으로써 위험도가 높 은 환자에서는 위험도나 낮은 환자보다 더 주의를 기울여 관찰하고 식사, 운동 관리 및 체중 모니터링을 통해 가능한 발생 가능성을 낮추고, 진단 시기를 놓치지 않고 빠르게 진단하여 치료적 중재가 개입될 수 있도록 할 수 있다. 종래에는 고전적인 임상적 위험 요인(비만, 당뇨병 가족력, 연령, 과거 임신성당뇨병 병력, 거대아 출산력, 다 낭성 난소 증후군, 전당뇨, 고혈압 등)들이 있는 경우 임신성 당뇨병이 발생할 가능성이 높을 것으로 예상하는 수준으로 진료를 행했다면, 본 발명에서 제시한 머시러닝 기반 예측 모델을 통해 임신성 당뇨병의 발생가능성을 수치화하여 예측할 수 있게 된다. 이를 위해 본 발명에서는 고전적인 임상적인 위험요인들을 포함하여 의료기관에서 기록되는 전자의무기록으로부 터 추출할 수 있는 다양한 정보들을 기반으로 머신 러닝 기술로 학습시켜 예측하는 모델을 개발하였다. 여기서 고전적인 임상적인 위험요인은 본 발명에서 특징지표로 설정하였다. 기존의 고전적인 위험요인들은 임신시에 이미 결정되어 있는 것이므로, 임신 중에 발생하는 변수들을 포함하지 않는다. 그러나 임신 중에 추가적으로 발생하는 변수들을 포함하면 임신 시기가 진행할수록 좀 더 정확한 예측 모델을 얻을 수 있을 것으로 가정한다. 따라서 임진 중의 추가적으로 발생하는 변수들에 대해서도 본 발명에서 는 특징지표로 추가하여 설정하였다. 따라서 임신 시작 시점~ 임신 초기(14주)는 임신 초기에 획득할 수 있는 변수들을 활용한 모델을 만들고, 임신 중기(24주)는 임신 초기 이후 이 시점까지 획득할 수 있는 변수들을 추가하여 활용한 모델을 만들어 가능한 예 측 모델의 성능을 향상시켰다. 또한 과거에 임신을 했던 경우(경산모)는 초산모에 비해 과거 임신 정보를 획득 할 수 있으므로, 이 변수를 추가하여 경산모의 모델을 추가로 개발하였다.1. 데이터 전처리 및 변수 선정 임신성 당뇨 예측용 데이터 전처리부에서는 의료기관 전자의무기록으로부터 추출한 데이터 컬럼들을 정제하 고 전처리한다. 전체 데이터셋에서 결측치, 이상치와 변환이 필요한 부분을 정리한다. 임상적으로 기존 연구에서 의미 있다고 검증된 변수는 이용한다. 2. 예측알고리즘 모델 선정 머신러닝 예측 모델 설정부에서는 의사결정트리 머신러닝 모델을 이용하여 적합한 예측모델을 설정한다. 본 발명에서는 Tree 계열 모델 중 XGBoost 모델을 최종적으로 채택하여 개발에 활용하였다. Python AutoML 라이브러리 중 하나인 LazyPredict는 scikit-learn 패키지에서 지원하는 알고리즘들의 성능을 비교하는 기능을 지원한다. GBM(Gradient Boosting Machine)의 E0, E1, M1 각 예측시점별로 만들어진 데이터를 바탕으로 LazyPredict의 성능 비교를 수행하여, auPR(Area Under Precision Recall)과 AUC(Area Under the Curve) 기준 성능평가의 상위권 알고리즘인 다음의 4가지 알고리즘을 선별하였다. XGBoost(eXtreme Gradient Boosting, LGBM(Light Gradient Boosting Machine), AdaBoost(adaptive boosting), 로지스틱 회귀(Logistic Regression). 이 중 부스팅(Boosting) 계열이 아닌 로지스틱 회귀(Logistic Regression)의 경우 데이터가 다중 공선성의 관점에서 무결하지 않으므로 제외시켰으며, 세 모델 중 가장 안정적인 성능을 보인 XGBoost를 최종적 으로 채택하여 개발하였다. XGBoost에서 사용하는 Boosting이란 예측모형 개발의 앙상블 방법론 중 하나로, 분류상 약한 분류기로서 의사결 정트리를 복수 사용하여 강한 분류기를 만들어내는 방법을 가리킨다. 이때 의사결정트리를 조합하는 방식에 따 라 Boosting을 AdaBoosting과 GBM(Gradient Boosting Machine)으로 다시 한 번 분류할 수 있다. 부스팅 중에서 GBM은 의사결정트리를 활용한 분류의 잔차를 계산하고, 이 잔차를 최소화시키는 방향으로 다음 모델을 만들어 추가하는 방법이며 구체적인 최적화의 방식은 다음과 같다. 먼저 개별 의사결정트리의 예측값인 를 다음의 수학식 1 및 2와 같이 정의한다. 수학식 1"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "여기서 는 임신성 당뇨의 예측값이다. 또한 는 예측값이다. 는 트리의 숫자이다. 는 기능 공간 (functional space) 의 함수이다. 는 가능한 모든 CART(classification and regression trees, 분류 및 회귀 트리)의 집합이다. 수학식 2"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 3, "content": "여기서 는 번째의 예측값이다. 이때 예측값과 실제 값의 차이인 Loss Function 은 다음의 수학식 3과 같이 정의될 수 있다. 수학식 3"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 4, "content": "여기서 는 예측값과 실제 값의 차이인 Loss Function이다. 번째 iteration의 Loss Function을 다음의 수학식 4와 같이 도출한다. 수학식 4"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 5, "content": "최적화를 위해 수학식 4를 테일러 확장하여 다음의 수학식 5 및 6과 같이 2차 근사식으로 변환한다. 수학식 5"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 6, "content": "수학식 6"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 7, "content": "수학식 6에서 상수항을 모두 제거하여, 번째 iteration의 Loss Function을 다음의 수학식 7과 같이 얻는다. 수학식 7"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 8, "content": "의사결정트리의 모든 leaf 에 대하여, 새로운 집합 를 정의하고, 이를 위 수학식 7에 대입하면 다음의 수학식 8과 같이 된다. 수학식 8"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 9, "content": "수학식 8을 에 대해 미분하여 손실함수 값을 최소화하는 를 다음의 수학식 9와 같이 구한다. 수학식 9"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 10, "content": "를 위의 식에 대입하여 손실함수의 최적값을 구하고, 이를 바탕으로 새로운 트리를 다음의 수학식 10과 같이 생성한다. 수학식 10"}
{"patent_id": "10-2022-0183464", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 11, "content": "수학식 10과 같은 GBM을 구현한 패키지가 XGBoost다. XGBoost는 가장 기본적인 GBM의 구현 이외에도 모델 성능 향상을 위한 다양한 옵션들을 제공하고 있다. - 결손값 자체 처리 - Early Stopping : iteration 중 성능이 더 이상 향상되지 않을 경우 반복을 멈춤 - 과적합 규제(Regularization) - Cross Validation 또한 XGBoost는 같은 GBM을 구현한 패키지들 중에서도 불균형 데이터에 대해 안정적인 성능을 보이는데, 이는 잔차의 계산 후 트리를 확장할 때 leaf-wise 구조가 아닌 level-wise 구조를 사용함으로써, Positive/Negative 데이터의 불균형이 심할 경우 쉽게 발생하는 과적합의 위험을 상대적으로 완화시킨다. 그리고 XGBoost 에 선택한 데이터 정리된 변수 컬럼들을 적용하여 모델을 학습시켰다. 모델 학습은 K-fold Cross Validation 방법으로 진행하였다. 3. 모델 예측에 기여한 feature 확인 머신러닝 임신성 당뇨 예측부에서는 의사결정트리 머신러닝 모델을 이용하여 임신성 당뇨의 발생가능성을 예측한다. 이를 위해 먼저 예측모델에 기여한 특징지표(feature)들을 확인한다. Shapley Value(섀플리 가치, 한계 기여도의 가중치 평균)를 기반으로 모델에 사용할 최종 변수를 추출하기 위해 보루타(BORUTA) 알고리즘을 사용하였다. 보루타 알고리즘은 랜덤포레스트(RandomForest)를 기반으로 하는 변수 선택기법이다. 고차원 데이터는 다양한 정보의 제공으로 모델의 성능을 제고하기도 하지만, 오히려 복잡성을 높여 모델의 성능 을 역으로 저하시키기도 한다. 그렇기 때문에 인공지능 모델 개발 시 변수들의 중요도를 확인하고 이를 바탕으 로 최소한의 변수만을 사용하여 복잡도를 낮추는 방법론이 필요하다. 이때 변수들의 중요도를 확인하는 방법 중 하나는 각 feature의 Shapley Value를 확인하는 것이다. Shapley Value란, 특정한 변수와 관련하여 모든 변수 조합들을 입력시켰을 때의 결과값들을 비교하며 전체 성능에 대한 해당 변수의 기여도를 계산하는 사후분석 방 식이다. 본 발명은 Shapley Value를 기반으로 모델에 사용할 최종 변수를 추출하기 위해 BORUTA 알고리즘을 사용하였다. BORUTA 알고리즘은 다음과 같은 프로세스를 반복하며 변수들의 중요도를 파악한다: 1) 모든 변수들을 복사한다. 2) 복사한 변수를 랜덤하게 섞어 shadow features를 만든다. 3) shadow features를 원래의 데이터셋에 병합한다. 4) 해당 데이터셋으로 모델을 학습시킨 후 각 변수들의 Shapley Value를 계산한다. 5) Shadow features의 Shapley Value 중 가장 큰 값을 임계치로 설정하고, 이보다 낮은 중요도를 가진 feature 를 중요하지 않은 것으로 제외한다. 위와 같은 변수 선택 알고리즘을 통해 모델은 최소한의 복잡도로 최대의 성능을 끌어낼 수 있도록 최적화된다. 그리고 임신성 당뇨를 예측하기 위한 특징지표들을 중요도 순으로 확인하였다. 머신러닝 예측모델에 활용된 특징지표(feature)들은 다음의 표 1과 같다. 표 1 시기 초산여부 특징지표 임신 초기 초산모 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마 토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤, HDL-콜레스테롤) 임신 초기 경산모 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마 토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤, HDL-콜레스테롤), 임신횟수, 출산횟수(경산모), 생존아수, 이전 임신 당뇨병 과거력, 제왕절개 수술횟수, 조산력, 거대아분만력 임신 중기 초산모 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마 토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤, HDL-콜레스테롤), 당화혈색소, PAPPA, hcg, 50g 당부하 검사 결과 임신 중기 경산모 나이, BMI, 혈압, 당뇨병 가족력, 고혈압 병력, 내당능장애 병력, 고지혈증 병력, 기타 내분비질환병력, 자궁근종갯수, 혈당치, 헤마 토크릿, 백혈구, 혈소판, 혈중 지질(콜레스테롤, HDL-콜레스테롤), 당화혈색소, PAPPA, hcg, 50g 당부하 검사 결과, 임신횟수, 출산 횟수(경산모), 생존아수, 이전 임신 당뇨병 과거력, 제왕절개 수술 횟수, 조산력, 거대아분만력 4. 예측 모델 성능평가 예측모델 성능 평가부는 임신성 당뇨 예측 결과에 대해 성능 평가를 수행한다. 이는 학습시킨 예측모델로 검증한 데이터의 AUC 와 AUpre로 성능을 평가하였다. 또한 Stratified K-fold Cross Validation (k-겹 교차검증)을 이용하여 성능을 평가하였다. K-fold Cross Validation은 기계학습을 위해 학습용 데이터를 trainset, validation-set, testset으로 나누는 과정에서 최대한 많은 데이터를 학습하기 위해 적용되는 기법이다. 일반적인 경우 데이터셋은 trainset, testset으로 먼저 나뉜 후, train set은 학습 결과를 평가하기 위한 validation set과 실제 학습용 데이터로 다 시 한 번 나뉜다. 이 경우 모델이 실제로 학습할 수 있는 데이터는 trainset에서 validation-set을 제외한 만큼 의 데이터뿐이다. 그러나 K-fold Cross Validation은 trainset과 validation-set을 한 번 분할하여 사용하는 대신, trainset의 만큼을 validation-set으로 설정한 후 나머지를 학습시키는 과정을 K번 반복한 후 각 반복에서의 성능평가 의 평균을 최종 성능으로 한다. 이렇게 모델의 학습을 평가할 경우 반복된 실험의 결과를 모두 고려하기 때문에 최종 성능평가는 1회만 수행한 성능평가에 비해 알고리즘의 일반화 정도가 높다고 볼 수 있으며, 실질적으로 trainset 전체를 학습하기 때문에 일반적인 데이터 분할을 적용하는 경우보다 향상된 성능을 기대해볼 수 있다. 본 발명은 이와 같은 K-fold Cross Validation을 사용하여 모델의 학습 결과를 평가하였으며, K-fold Cross Validation의 하위 분류 중에서 trainset과 validation-set에 라벨이 균일하게 분포할 수 있게 하는 Stratified K-fold를 적용하였다. 도 3은 본 발명의 예측 모델을 Stratified K-fold를 이용하여 검증한 예시를 보인 도면이다. 이처럼 본 발명은 임신성 당뇨의 특징지표를 적용한 통계모델을 이용하여 임신성 당뇨를 예측하게 된다. 이상에서 실시예를 들어 본 발명을 더욱 상세하게 설명하였으나, 본 발명은 반드시 이러한 실시예로 국한되는 것은 아니고, 본 발명의 기술사상을 벗어나지 않는 범위 내에서 다양하게 변형실시될 수 있다. 따라서 본 발명 에 개시된 실시예들은 본 발명의 기술적 사상을 한정하기 위한 것이 아니라 설명하기 위한 것이고, 이러한 실시 예에 의하여 본 발명의 기술적 사상의 범위가 한정되는 것은 아니다. 본 발명의 보호범위는 청구범위에 의하여 해석되어야 하며, 그와 동등한 범위 내에 있는 모든 기술적 사상은 본 발명의 권리범위에 포함되는 것으로 해석 되어야 할 것이다."}
{"patent_id": "10-2022-0183464", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 본 발명의 일 실시예에 의한 머신러닝 기반 임신성 당뇨 예측 장치의 블록구성도이다. 도 2는 본 발명의 일 실시예에 의한 머신러닝 기반 임신성 당뇨 예측 방법의 흐름도이다. 도 3은 본 발명의 예측 모델을 Stratified K-fold를 이용하여 검증한 예시를 보인 도면이다."}
