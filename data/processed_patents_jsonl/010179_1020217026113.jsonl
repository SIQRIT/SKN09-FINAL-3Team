{"patent_id": "10-2021-7026113", "section": "특허_기본정보", "subsection": "특허정보", "content": {"공개번호": "10-2021-0116576", "출원번호": "10-2021-7026113", "발명의 명칭": "시각적 로봇 기반의 과거 지도 이용 방법", "출원인": "아미크로 세미컨덕터 씨오., 엘티디.", "발명자": "리 밍"}}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_1", "content": "시각적 로봇 기반의 과거 지도 이용 방법에 있어서,상기 과거 지도 이용 방법은 현재 지도 기반의 제1 지도 포지셔닝 시스템과 과거 지도 기반의 제2 지도 포지셔닝 시스템이 서로 독립적으로 작업하도록 제어하기 위한 것이고,상기 과거 지도 이용 방법은,시각적 로봇이 기설정 작업 영역의 기설정 도로 표지의 이미지를 연속적으로 수집하고, 이로부터 기설정 도로표지의 도로 표지 정보를 획득하도록 제어하는 단계 1;단계 1에서 획득된 도로 표지 정보를 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔닝 시스템에 동시에 전송하는 단계 2;제1 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 도로 표지 정보를 처리하여 제1 위치 및 배향 정보를 획득하도록 제어하고, 동시에 제2 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 도로 표지 정보를 처리하여 제2 위치 및 배향 정보를 획득하도록 제어하는 단계 3;동일한 기설정 도로 표지에서의 제1 위치 및 배향 정보와 제2 위치 및 배향 정보를 선택하고, 제1 위치 및 배향정보와 제2 위치 및 배향 정보의 변환 관계식을 계산하는 단계 4; 및변환 관계식에 따라 과거 지도가 대응되는 변환 동작을 실행하도록 제어하고, 변환된 후의 과거 지도를 참조로서 이용하여 후속 운동을 제어하는 단계 5를 포함하되; 과거 지도는 미리 구축되어 지도 저장 매체에 저장된 기설정 작업 영역에 대응되는 환경지도이고; 현재 지도는 기설정 작업 영역 내에서 실시간으로 구축된 환경 지도이며; 지도 저장 매체는 시각적로봇의 시스템 내부의 하나의 저장 유닛인 것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_2", "content": "제1항에 있어서,상기 단계 3은,상기 제1 위치 및 배향 정보가 상기 제1 지도 포지셔닝 시스템으로부터 상기 현재 지도의 지도 속성 정보가 실시간으로 캐싱된 제1 버퍼 메모리 공간으로 출력되어 포지셔닝을 위해 판독되기를 기다리는 단계; 및상기 제2 위치 및 배향 정보가 상기 제2 지도 포지셔닝 시스템으로부터 상기 과거 지도에 대응되는 지도 속성정보가 저장된 제2 버퍼 메모리 공간으로 출력되어 판독되기를 기다리는 단계를 더 포함하고; 지도 속성 정보는 지도 저장 매체의 지도 데이터를 마킹하기 위한 지도 식별자, 도로 표지 개수, 이차원 격자 지도, 시각적 포지셔닝을 위한 도로 표지 정보, 도로 표지 정보가 전환되어 출력된 위치 및 배향 정보, 및 상기 데이터의 검사값을 포함하며, 위치 및 배향 정보는 위치 좌표 및 방위 각도를 포함하는 것을특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_3", "content": "제2항에 있어서,상기 시각적 로봇이 작동되는 초기 시점, 또는 상기 기설정 작업 영역이 매번 트래버싱하기 시작되는 시점에서,상기 지도 저장 매체로부터 상기 과거 지도에 대응되는 상기 지도 속성 정보를 한 번 판독하여 상기 제2 버퍼메모리 공간에 기록하는 것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_4", "content": "공개특허 10-2021-0116576-3-제3항에 있어서,상기 단계 3과 상기 단계 4 사이에,상기 과거 지도의 상기 지도 속성 정보를 판독하여 상기 과거 지도에 대응되는 상기 도로 표지 개수를 획득하는단계; 및상기 단계 1에서 획득된 기설정 도로 표지의 상기 도로 표지 개수와 판독된 상기 도로 표지 개수의 차이값이 하나의 기설정 개수 임계값보다 큰지 여부를 판단하되, 크면, 상기 지도 저장 매체로부터 상기 과거 지도의 상기지도 속성 정보를 판독하여 상기 제2 버퍼 메모리 공간에 기록한 다음, 상기 단계 1로 되돌아가고, 아니면, 상기 단계 4에 진입하는 단계를 더 포함하는 것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_5", "content": "제4항에 있어서,상기 과거 지도의 상기 지도 속성 정보를 판독하는 제어 방법은,상기 지도 식별자에 따라, 상기 지도 저장 매체에 상기 과거 지도가 존재하는지 여부를 판단하되, 존재하면, 단계 402에 진입하고, 아니면, 단계 406에 진입하는 단계 401;상기 지도 저장 매체 내에서 대응되는 상기 도로 표지 개수가 기설정 개수 임계값보다 큰지 여부를 판단하되,크면, 단계 403에 진입하고, 아니면, 단계 406에 진입하는 단계 402;상기 지도 저장 매체 내에서 대응되는 상기 도로 표지 개수가 상기 제2 버퍼 메모리 공간에서 대응되는 상기 도로 표지 개수보다 큰지 여부를 판단하되, 크면, 단계 404에 진입하고, 아니면, 단계 406에 진입하는 단계 403;상기 제2 버퍼 메모리 공간 내에 저장된 상기 지도 속성 정보를 제거하고, 상기 지도 저장 매체로부터 대응되는상기 지도 속성 정보를 판독하여 상기 제2 버퍼 메모리 공간에 캐싱한 다음, 단계 405에 진입하는 단계 404;상기 제2 버퍼 메모리 공간에 캐싱된 상기 지도 속성 정보에 대응되는 데이터의 검사값을 계산하고, 상기 지도저장 매체로부터 서로 매칭되는 상기 검사값을 판독하여 비교하되, 같으면, 상기 지도 저장 매체로부터 판독된데이터가 정확한 것으로 결정한 다음, 상기 제2 지도 포지셔닝 시스템이 상기 제2 버퍼 메모리 공간 내의 상기지도 속성 정보를 처리하여 새로운 상기 제2 위치 및 배향 정보를 획득하도록 제어한 다음, 단계 406에 진입하며, 아니면, 상기 지도 저장 매체로부터 판독된 데이터가 오류인 것으로 결정하는 단계 405; 및상기 제2 버퍼 메모리 공간으로부터 상기 제2 위치 및 배향 정보를 판독한 다음, 상기 단계 4에 진입하는 단계406을 포함하는 것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_6", "content": "제1항에 있어서,상기 단계 4는,상기 제2 지도 포지셔닝 시스템이 동일한 상기 기설정 도로 표지의 한 그룹의 도로 표지 이미지를 처리하여 기설정 개수의 위치 및 배향 정보를 획득하도록 제어한 다음, 최댓값과 최솟값을 제거하고, 나머지 데이터의 평균값을 취하여 포지셔닝 작용을 하는 하나의 상기 제2 위치 및 배향 정보로 사용하는 단계; 및동시에, 상기 제1 지도 포지셔닝 시스템이 동일한 상기 기설정 도로 표지의 한 그룹의 도로 표지 이미지를 처리하여 기설정 개수의 위치 및 배향 정보를 획득하도록 제어한 다음, 최댓값과 최솟값을 제거하고, 나머지 데이터의 평균값을 취하여 포지셔닝 작용을 하는 하나의 상기 제1 위치 및 배향 정보로 사용하는 단계를 더 포함하는것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_7", "content": "제6항에 있어서,상기 제1 지도 포지셔닝 시스템과 상기 제2 지도 포지셔닝 시스템은 서로 독립적으로 작업하고, 내부에 상기 도공개특허 10-2021-0116576-4-로 표지 정보 처리를 구동하기 위한 상기 기설정 매칭 알고리즘이 설정되어 있는 것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "청구범위", "subsection": "청구항", "claim_number": "청구항_8", "content": "제1항에 있어서,상기 단계 4에서, 상기 변환 관계식은 회전 매트릭스와 병진 벡터로 구성된 변환 관계식을 포함하고; 상기 변환동작은 상기 과거 지도의 회전 및 병진을 제어하는 동작을 포함하는 것을 특징으로 하는 시각적 로봇 기반의 과거 지도 이용 방법."}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "요약", "paragraph": 1, "content": "시각적 로봇 기반의 과거 지도 이용 방법은, 시각적 로봇이 기설정 작업 영역의 기설정 도로 표지의 이미지를 연 속적으로 수집하고, 기설정 도로 표지의 도로 표지 정보를 획득하도록 제어하는 단계 1; 획득된 도로 표지 정보 를 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔닝 시스템에 동시에 전송하는 단계 2; 제1 지도 포지셔닝 시스 (뒷면에 계속)"}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "기술분야", "paragraph": 1, "content": "본 발명은 지능형 제어 기술 분야에 속하는 것으로, 특히 시각적 로봇 기반의 과거 지도 이용 방법에 관한 것이다."}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "배경기술", "paragraph": 1, "content": "동일한 작업 영역 내에서 한 번의 트래버싱을 완성할 때마다 로봇은 항상 지도를 다시 구축하거나 지도를 점진 적으로 구축하는 방식으로 업데이트하지만, 업데이트된 후 새로운 지도가 생성된 것으로 변경되어 원래 지도에 대한 동작도 지도의 변화에 따라 무효로 된다. 예를 들어, 지도가 변화되면, 이전에 완성하지 못한 청소 기록도 이에 따라 무효로 되므로, 로봇은 중단점에서 계속하여 청소하는 등 작업을 진행할 수 없기에, 청소기의 작업 효율을 저하시키고, 매번 동일한 작업 영역 내에서 다시 작동되어 작업할 경우, 시각적 로봇이 위치한 물리적 위치, 운동 방향은 이전의 작업 종료 때에 비해 변화될 수 있거나, 현재 위치 및 이와 매칭된 지도에서 대응되 는 장면점(scene point)은 대체적으로 동일한 위치에 위치하지만, 시각적 센서는 두 번의 수집 과정에서 동일한 위치 및 배향을 완전히 유지할 수 없음으로써, 판독된 미리 구축된 과거 지도가 가리키는 방향과 시각적 로봇 현재 위치의 방향이 대응되지 않게 된다. 따라서, 과거 지도와 실제 물리적 환경을 매칭시키기 위해 어떻게 동 일한 작업 영역 내에 미리 보존된 과거 지도를 이용하여 경로 계획을 진행할 것인가는 선행기술에서 시급히 해 결해야 할 문제이다."}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "해결하려는과제", "paragraph": 1, "content": "상기 기술 결함을 극복하기 위해, 본 발명은 시각적 시스템에 의존하여 기계의 본체를 과거 지도의 좌표 및 방 향에서 다시 포지셔닝시켜 과거 지도를 실제 물리적 환경과 매칭시킨다."}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "과제의해결수단", "paragraph": 1, "content": "시각적 로봇 기반의 과거 지도 이용 방법에 있어서, 상기 과거 지도 이용 방법은 현재 지도 기반의 제1 지도 포 지셔닝 시스템과 과거 지도 기반의 제2 지도 포지셔닝 시스템이 서로 독립적으로 작업하도록 제어하기 위한 것 이고, 상기 과거 지도 이용 방법은, 시각적 로봇이 기설정 작업 영역의 기설정 도로 표지의 이미지를 연속적으 로 수집하고, 이로부터 기설정 도로 표지의 도로 표지 정보를 획득하도록 제어하는 단계 1; 단계 1에서 획득된 도로 표지 정보를 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔닝 시스템에 동시에 전송하는 단계 2; 제1 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 도로 표지 정보를 처리하여 제1 위치 및 배향 정보를 획득하도록 제어하고, 동시에 제2 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 도로 표지 정 보를 처리하여 제2 위치 및 배향 정보를 획득하도록 제어하는 단계 3; 동일한 기설정 도로 표지에서의 제1 위치 및 배향 정보와 제2 위치 및 배향 정보를 선택하고, 제1 위치 및 배향 정보와 제2 위치 및 배향 정보의 변환 관 계식을 계산하는 단계 4; 변환 관계식에 따라 과거 지도가 대응되는 변환 동작을 실행하도록 제어하고, 변환된 후의 과거 지도를 참조로서 이용하여 후속 운동을 제어하는 단계 5를 포함하며; 여기서, 과거 지도는 미리 구축 되어 지도 저장 매체에 저장된 기설정 작업 영역에 대응되는 환경 지도이고; 현재 지도는 기설정 작업 영역 내 에서 실시간으로 구축된 환경 지도이다. 지도 저장 매체는 시각적 로봇의 시스템 내부의 하나의 저장 유닛이다. 상기 기술적 해결수단은 로봇의 과거 지도의 유효함을 유지하는 전제 하에, 주변 환경에 대한 상기 시각적 로봇 의 학습 능력을 강화시켜 경로 계획의 지능화 정도를 향상시킨다.또한, 상기 단계 3은, 상기 제1 위치 및 배향 정보가 상기 제1 지도 포지셔닝 시스템으로부터 상기 현재 지도의 지도 속성 정보가 실시간으로 캐싱된 제1 버퍼 메모리 공간으로 출력되어 포지셔닝을 위해 판독되기를 기다리는 단계; 상기 제2 위치 및 배향 정보가 상기 제2 지도 포지셔닝 시스템으로부터 상기 과거 지도에 대응되는 지도 속성 정보가 저장된 제2 버퍼 메모리 공간으로 출력되어 판독되기를 기다리는 단계를 더 포함하고; 여기서, 지 도 속성 정보는 지도 저장 매체의 지도 데이터를 마킹하기 위한 지도 식별자, 도로 표지 개수, 이차원 격자 지 도, 시각적 포지셔닝을 위한 도로 표지 정보, 도로 표지 정보가 전환되어 출력된 위치 및 배향 정보, 및 상기 데이터의 검사값을 포함하며, 위치 및 배향 정보는 위치 좌표 및 방위 각도를 포함한다. 상기 기술적 해결수단 은 상기 제2 지도 포지셔닝 시스템 및 상기 제1 지도 포지셔닝 시스템이 각각 상이한 지도 시스템의 데이터를 처리하도록 제어하고, 처리된 데이터의 동적 변화를 지원한다. 또한, 상기 시각적 로봇이 작동되는 초기 시점, 또는 상기 기설정 작업 영역이 매번 트래버싱하기 시작되는 시 점에서, 상기 지도 저장 매체로부터 상기 과거 지도에 대응되는 상기 지도 속성 정보를 한 번 판독하여 상기 제 2 버퍼 메모리 공간에 기록한다. 상기 기술적 해결수단은 상기 지도 저장 매체에 미리 구축된 과거 지도 데이터 를 판독하여 상기 제2 버퍼 메모리 공간 내에 저장하고, 상기 제2 지도 포지셔닝 시스템이 데이터를 처리하는 속도를 높임으로써, 데이터를 최대한 빨리 판독하여 지도 포지셔닝 시스템이 사용하도록 제공하는 기술적 효과 를 달성한다. 또한, 상기 단계 3과 상기 단계 4 사이에, 상기 과거 지도의 상기 지도 속성 정보를 판독하여 상기 과거 지도에 대응되는 상기 도로 표지 개수를 획득하는 단계; 상기 단계 1에서 획득된 기설정 도로 표지의 상기 도로 표지 개수와 판독된 상기 도로 표지 개수의 차이값이 하나의 기설정 개수 임계값보다 큰지 여부를 판단하되, 크면, 상기 지도 저장 매체로부터 상기 과거 지도의 상기 지도 속성 정보를 판독하여 상기 제2 버퍼 메모리 공간에 기 록한 다음, 상기 단계 1로 되돌아가고, 아니면, 상기 단계 4에 진입하는 단계를 더 포함한다. 상기 기술적 해결 수단은 상기 과거 지도 기반의 상기 제2 위치 및 배향 정보의 유효성을 판단하여, 과거 지도의 좌표계에서 처리 된 포지셔닝 정보가 상기 시각적 로봇의 위치 정보를 나타낼 수 있도록 확보한다. 또한, 상기 과거 지도의 상기 지도 속성 정보를 판독하는 제어 방법은, 상기 지도 식별자에 따라, 상기 지도 저 장 매체에 상기 과거 지도가 존재하는지 여부를 판단하되, 존재하면, 단계 402에 진입하고, 아니면, 단계 406에 진입하는 단계 401; 상기 지도 저장 매체 내에서 대응되는 상기 도로 표지 개수가 기설정 개수 임계값보다 큰지 여부를 판단하되, 크면, 단계 403에 진입하고, 아니면, 단계 406에 진입하는 단계 402; 상기 지도 저장 매체 내 에서 대응되는 상기 도로 표지 개수가 상기 제2 버퍼 메모리 공간에서 대응되는 상기 도로 표지 개수보다 큰지 여부를 판단하되, 크면, 단계 404에 진입하고, 아니면, 단계 406에 진입하는 단계 403; 상기 제2 버퍼 메모리 공간 내에 저장된 상기 지도 속성 정보를 제거하고, 상기 지도 저장 매체로부터 대응되는 상기 지도 속성 정보 를 판독하여 상기 제2 버퍼 메모리 공간에 캐싱한 다음, 단계 405에 진입하는 단계 404; 상기 제2 버퍼 메모리 공간에 캐싱된 상기 지도 속성 정보에 대응되는 데이터의 검사값을 계산하고, 상기 지도 저장 매체로부터 서로 매칭되는 상기 검사값을 판독하여 비교하되, 같으면, 상기 지도 저장 매체로부터 판독된 데이터가 정확한 것으 로 결정한 다음, 상기 제2 지도 포지셔닝 시스템이 상기 제2 버퍼 메모리 공간 내의 상기 지도 속성 정보를 처 리하여 새로운 상기 제2 위치 및 배향 정보를 획득하도록 제어한 다음, 단계 406에 진입하며; 아니면, 상기 지 도 저장 매체로부터 판독된 데이터가 오류인 것으로 결정하는 단계 405; 상기 제2 버퍼 메모리 공간으로부터 상 기 제2 위치 및 배향 정보를 판독한 다음, 상기 단계 4에 진입하는 단계 406을 포함한다. 상기 기술적 해결수단 은 버퍼 메모리 공간과 상기 지도 저장 매체의 차이를 판단하여 과거 지도의 지도 속성 정보의 판독 방식을 결 정함으로써, 지도 판독의 효율을 향상시킨다. 또한, 상기 제1 버퍼 메모리 공간과 상기 제2 버퍼 메모리 공간은 상기 시각적 로봇 내부의 시스템에 의해 개척 요청된 캐싱 공간으로, 선형 리스트이고; 여기서, 상기 제1 위치 및 배향 정보는 C++ 연관 컨테이너의 방식으로 상기 제1 버퍼 메모리 공간에 저장되며, 상기 제2 위치 및 배향 정보는 C++ 연관 컨테이너의 방식으로 상기 제2 버퍼 메모리 공간에 저장되고, 메모리 공간에서 상기 제1 위치 및 배향 정보 및 상기 제2 위치 및 배향 정보에 대응되는 key 값은 상기 도로 표지 정보의 id 번호에 대응되며; 여기서, key 값 및 id 번호는 C++ 연관 컨테이 너에 구성된다. 상기 기술적 해결수단은 메모리 관리 위치 및 배향 정보의 유연성을 향상시키고, 버퍼 메모리를 판독하는 효율을 향상시킨다. 또한, 상기 단계 4는, 상기 제2 지도 포지셔닝 시스템이 동일한 상기 기설정 도로 표지의 한 그룹의 도로 표지 이미지를 처리하여 기설정 개수의 위치 및 배향 정보를 획득하도록 제어한 다음, 최댓값과 최솟값을 제거하고, 나머지 데이터의 평균값을 취하여 포지셔닝 작용을 하는 하나의 상기 제2 위치 및 배향 정보로 사용하는 단계; 동시에, 상기 제1 지도 포지셔닝 시스템이 동일한 상기 기설정 도로 표지의 한 그룹의 도로 표지 이미지를 처리하여 기설정 개수의 위치 및 배향 정보를 획득하도록 제어한 다음, 최댓값과 최솟값을 제거하고, 나머지 데이터 의 평균값을 취하여 포지셔닝 작용을 하는 하나의 상기 제1 위치 및 배향 정보로 사용하는 단계를 더 포함한다. 포지셔닝 데이터에 의한 오차 간섭을 감소시킨다. 또한, 상기 제1 지도 포지셔닝 시스템과 상기 제2 지도 포지셔닝 시스템은 서로 독립적으로 작업하고, 내부에 상기 도로 표지 정보 처리를 구동하기 위한 상기 기설정 매칭 알고리즘이 설정되어 있다. 상기 기술적 해결수단 은 소프트웨어에서 과거 지도의 포지셔닝과 현재 지도의 포지셔닝이 독립적이도록 제어하여, 서로 커플링되지 않도록 한다. 또한, 상기 단계 4에서, 상기 변환 관계식은 회전 매트릭스와 병진 벡터로 구성된 변환 관계식을 포함하고; 상 기 변환 동작은 상기 과거 지도의 회전 및 병진을 제어하는 동작을 포함한다. 상기 기술적 해결수단은 회전 매 트릭스와 병진 벡터의 제약 관계를 통해 현재 지도와 과거 지도의 좌표를 통일시켜 상기 과거 지도가 회전 및 병진하여 변환된 후 상기 시각적 로봇 현재 위치 방향과 매칭되도록 제어한다."}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 1, "content": "아래, 본 발명의 실시예에서의 도면과 결부시켜 본 발명의 실시예에 따른 기술적 해결수단을 상세하게 설명한다. 본 발명의 실시예는 시각적 로봇 기반의 과거 지도 이용 방법을 제공하되, 상기 과거 지도 이용 방법은 현재 지 도 기반의 제1 지도 포지셔닝 시스템과 과거 지도 기반의 제2 지도 포지셔닝 시스템이 서로 독립적으로 작업하 도록 제어하기 위한 것이고, 지도 포지셔닝 시스템의 선단에서 도로 표지 정보를 생성한 후 과거 지도의 포지셔 닝 시스템 및 현재 지도의 포지셔닝 시스템에 각각 송신하여 환산 처리하며, 상기 시각적 로봇의 포지셔닝 정보 는 전술한 지도 포지셔닝 시스템에 의해 생성된다. 구체적으로, 과거 지도의 도로 표지 정보에 따라, 과거 지도 에서의 상기 시각적 로봇의 현재 좌표 및 현재 방향을 포지셔닝하고, 지도 유효성 판단을 거친 후 과거 지도를 회전 및 병진시키기 위해 최종 포지셔닝 결과를 송신하며, 회전 및 병진된 후의 과거 지도를 참조 지도로 사용 하여 운동을 제어하여, 상기 시각적 로봇의 경로 계획을 더 지능화시킨다. 본 발명의 실시예에 의해 제공되는 상기 과거 지도 이용 방법의 기본적인 구상은 하기와 같은 단계를 포함하되, 단계 1에서, 시각적 로봇이 기설정 작업 영역의 기설정 도로 표지의 이미지를 수집하고, 이로부터 기설정 도로 표지의 도로 표지 정보를 획득하도록 제어한다. 여기서, 상기 기설정 도로 표지는 상기 기설정 작업 영역 내의 모든 시각적 도로 표지일 수 있고, 부분 영역 내의 시각적 도로 표지일 수도 있으며, 획득된 기설정 도로 표지 의 도로 표지 정보는 완전성 및 합리성을 가진다. 설명해야 할 것은, 도로 표지는 환경에서 인공적으로 설치된 표지물을 설명한다. 단계 2에서, 단계 1에서 획득된 도로 표지 정보를 과거 지도의 포지셔닝 시스템 및 현재 지도의 포지셔닝 시스 템에 동시에 전송한다. 본 발명의 실시예에서, 상기 지도 포지셔닝 시스템은 과거 지도 정보를 처리하기 위한 제1 지도 포지셔닝 시스템 및 현재 지도 정보를 처리하기 위한 제2 지도 포지셔닝 시스템으로 구분될 수 있다. 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔닝 시스템은 모두 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔 닝 시스템에 각각 현재 수집된 도로 표지 이미지를 송신하기 위한 이미지 수집 센서에 연결된다. 여기서, 지도 포지셔닝 시스템은 시각적 도로 표지 정보에 의존하여 로봇 포지셔닝을 완성하고, 이미지 수집 센서와 신호 연 결 관계를 가지며, 상기 도로 표지 정보는 상기 이미지 수집 센서에 의해 수집된 도로 표지 이미지로부터 추출 된 특징점 정보 및 깊이 정보이다. 단계 3에서, 제1 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 도로 표지 정보를 처리하여 상 기 현재 지도 좌표계에서의 제1 위치 및 배향 정보를 획득하도록 제어하고, 동시에 제2 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 지도 속성 정보를 처리하여 상기 과거 지도 좌표계에서의 제2 위치 및 배향 정보를 획득하도록 제어한다. 본 실시예에서, 상기 기설정 매칭 알고리즘은 현재 수집된 도로 표지 이미지 와 도로 표지 데이터베이스 중의 도로 표지 이미지에 대한 특징 매칭을 완성하기 위한 도로 표지 포지셔닝 매칭 알고리즘이고, 본 발명의 실시예에서 사용된 특징 매칭 알고리즘은 통상적인 특징점 매칭 알고리즘이며, 다음,상기 지도 포지셔닝 시스템은 매칭 결과에 따라, 기하학적 관계를 통해 상기 시각적 로봇의 위치 좌표 및 방위 각도를 계산하여 위치 및 배향 정보로 결정한다. 이로써, 제1 지도 포지셔닝 시스템은 제1 좌표 및 제1 방향각 을 포함하는 현재 지도의 좌표계에서의 제1 위치 및 배향 정보를 출력하고; 제2 지도 포지셔닝 시스템은 제2 좌 표 및 제2 방향각을 포함하는 과거 지도의 좌표계에서의 제2 위치 및 배향 정보를 출력하며; 여기서, 제1 지도 포지셔닝 시스템의 도로 표지 데이터베이스 및 제2 지도 포지셔닝 시스템의 도로 표지 데이터베이스 모두에 동 일한 기설정 도로 표지를 여러 번 탐색하고 방문하여 획득한 한 그룹의 도로 표지 이미지가 저장되어 있으며; 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔닝 시스템은 독립적으로 연산하여 각각 기설정 도로 표지의 이미 지 및 도로 표지 정보를 입력하고, 2개의 시스템 사이에 커플링 관계가 존재하지 않는다. 전술한 과거 지도 및 현재 지도는 일련의 도로 표지 환경 추상화되어 구성된 지도를 포함하고, 여기서, 도로 표 지는 실내 환경에서의 장면점을 의미한다. 상기 도로 표지 데이터베이스 중의 도로 표지 이미지는 상이한 지면 매체, 일조 등 조건에서 동일한 물리적 위치를 여러 번 탐색하고 방문하여 획득한 한 그룹의 도로 표지 이미지 를 포함한다. 바람직하게, 상기 현재 지도 및 상기 과거 지도는 지도 저장 매체의 지도 데이터를 마킹하기 위한 지도 식별자, 도로 표지 개수, 이차원 격자 지도, 시각적 포지셔닝을 위한 도로 표지 정보, 도로 표지 정보가 전환되어 출력 된 위치 및 배향 정보, 및 상기 데이터의 검사값을 포함하고, 위치 및 배향 정보는 위치 좌표 및 방위 각도의 지도 속성 정보의 혼합 환경 지도를 포함한다. 여기서, 이차원 격자 지도는 전역 격자 지도이므로, 그 중심점 (w/2, h/2)은 상기 시각적 로봇이 작동되는 원점(origin)이고, w는 격자 지도의 폭이며, h는 격자 지도의 높이 이다. 상기 지도 저장 매체는 시각적 로봇의 시스템 내부의 하나의 저장 유닛으로, 특별히 상기 시각적 로봇의 동기적 동선과 즉각적 지도 구축 과정에서 생성된 지도 데이터, 특히 상기 지도 속성 정보를 저장하는데 사용된 다. 단계 4에서, 동일한 기설정 도로 표지에서의 제1 위치 및 배향 정보와 제2 위치 및 배향 정보를 선택하고, 제1 위치 및 배향 정보와 제2 위치 및 배향 정보의 변환 관계식을 계산한다. 바람직하게, 상기 변환 관계식은 상기 현재 지도와 상기 과거 지도 사이의 회전 매트릭스 R 및 병진 벡터 T를 포함하고, 상기 현재 지도에서의 동일한 상기 기설정 도로 표지의 위치 및 배향과 상기 과거 지도에서의 동일한 상기 기설정 도로 표지의 위치 및 배향 의 변환 관계로 표현된다. 단계 5에서, 변환 관계식에 따라 상기 과거 지도가 대응되는 변환 동작을 실행하도록 제어하고, 변환된 후의 상 기 과거 지도를 참조로서 이용하여 후속 운동을 제어하고, 여기서, 상기 과거 지도는 상기 지도 저장 매체로부 터 판독되어 버퍼 공간 내에 기록되어 변환 동작을 실행하는 동시에, 상기 과거 지도는 상기 지도 저장 매체에 서 상기 현재 지도에 의해 업데이트되며, 변환된 후의 상기 과거 지도는 상기 시각적 로봇에 의해 후속 운동 경 로 계획을 진행하기 위해 사용되고, 상기 지도 저장 매체에서 업데이트된 상기 과거 지도는 유사도 판단 또는 전술한 변환 관계식 계산에 참여되기를 기다린다. 다음, 변환 동작이 실행된 후의 과거 지도는 업데이트되어 클 라이언트에 디스플레이된다. 본 실시예에서, 상기 과거 지도가 위치한 좌표계가 단계 4에서 계산하여 얻은 회전 각도(angle) 만큼 회전하도 록 제어한 다음, 좌표계를 단계 4에서 계산하여 얻은 병진 벡터 T의 크기 및 방향을 따라 병진시키면, 상기 과 거 지도의 회전 및 병진 동작을 구현할 수 있다. 다음, 휴대폰의 앱(app) 등 사용자 기기 측에 업로드하고, 변 환된 후의 상기 과거 지도를 업데이트하여 디스플레이하며, 그 다음, 직접 휴대폰에서 상기 시각적 로봇 이 특 정된 방으로 네비게이션되도록 제어할 수 있는데, 즉 상기 방 영역이 현재 상태에서 청소한 적으로 표기되지 않 아도 무관하다. 변환된 후의 상기 과거 지도에 따라, 사용자는 장애물의 위치를 예지한 다음, 지형과 결부하여 상이한 청소 순서 및 방향을 선택할 수 있음으로써, 상기 과거 지도를 이용하여 상기 시각적 로봇이 지능형 운 동 계획을 진행하도록 제어한다. 이로써, 사용자가 클라이언트 인터페이스에서의 상기 과거 지도에 따라 경로 계획을 진행하는데 유리하다. 여기서, 과거 지도는 미리 구축되어 지도 저장 매체에 저장된 기설정 작업 영역에 대응되는 환경 지도이고; 현재 지도는 실시간으로 구축되어 캐싱된 기설정 작업 영역에 대응되는 환경 지도이다. 본 발명의 실시예는 로봇의 과거 지도의 유효성을 유지할 수 있는데, 즉 상기 시각적 로봇이 상기 과거 지도에 의존하여 상기 기설정 작업 영역의 환경 특징을 미리 획득하도록 제어하여 상기 시각적 로봇이 주변 환경에 대 해 학습 능력을 가지도록 함으로써, 경로 계획의 지능화 정도를 향상시킨다. 동시에, 더 정확한 네비게이션 지 도를 구축하므로, 지도의 안정성을 증가시킨다. 일 실시예로서, 상기 시각적 로봇이 상기 기설정 작업 영역에서 한 번의 트래버싱을 완성한 후, 상기 과거 지도 는 다음 번에 직접 판독되어 사용되도록 저장되지만, 로봇이 매번 작동되는 물리적 위치, 작동되는 방향이 자주 변화될 수 있으므로, 판독된 과거 지도에서 표기된 위치가 가리키는 방향이 로봇 현재 위치의 방향과 대응되지 않게 된다. 따라서, 반드시 시각적 시스템에 의존하여 로봇을 과거 지도의 위치, 방향에서 다시 포지셔닝해야 하는데, 이러면 과거 지도와 실제 물리적 환경은 매칭된다. 미리 저장된 지도와 비교해야 하는데, 이는 주로 현 재 위치가 미리 저장된 지도에 이미 기재된 위치에 위치하는지 여부를 판단하기 위함이고, 판단 결과에 따라 상 기 과거 지도를 업데이트할지 여부를 결정하는 근거이다. 도 1에 도시된 바와 같이, 상기 과거 지도 이용 방법은 현재 지도 기반의 제1 지도 포지셔닝 시스템과 과거 지 도 기반의 제2 지도 포지셔닝 시스템이 서로 독립적으로 작업하도록 제어하기 위한 것이고, 본 발명의 실시예에 의해 제공되는 상기 과거 지도 이용 방법은 하기와 같은 단계를 포함한다. 단계 S1에서, 시각적 로봇이 기설정 작업 영역의 기설정 도로 표지의 이미지를 연속적으로 수집하고, 이로부터 기설정 도로 표지의 도로 표지 정보를 획득하도록 제어한 다음, 단계 S2에 진입한다. 단계 S2에서, 단계 S1에서 획득된 도로 표지 정보를 제1 지도 포지셔닝 시스템 및 제2 지도 포지셔닝 시스템에 동시에 전송한다. 단계 S3에서, 제1 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따라 대응되는 도로 표지 정보를 처리하여 제1 위치 및 배향 정보를 획득하도록 제어하고, 동시에 제2 지도 포지셔닝 시스템이 기설정 매칭 알고리즘에 따 라 대응되는 도로 표지 정보를 처리하여 제2 위치 및 배향 정보를 획득하도록 제어한다. 다음, 단계 S4에 진입 한다. 단계 S4에서, 상기 단계 S1에서 획득된 기설정 도로 표지의 상기 도로 표지 개수와 상기 과거 지도의 상기 도로 표지 개수의 차이값이 하나의 기설정 개수 임계값보다 큰지 여부를 판단하는데, 즉 상기 제2 위치 및 배향 정보 가 상기 과거 지도에 대응되는 상기 지도 속성 정보의 기설정 매칭 조건을 만족시키는지 여부를 판단하되, 만족 시키면, 상기 지도 저장 매체로부터 상기 과거 지도의 상기 지도 속성 정보를 판독하여 상기 제2 버퍼 메모리 공간에 기록한 다음, 단계 S1로 되돌아가고, 아니면, 상기 단계 S5에 진입한다. 특별히, 2가지 도로 표지 개수의 차이가 현저할 경우, 상기 과거 지도가 새로 기록된 상기 현재 지도에 의해 업 데이트되어 대체되고, 상기 지도 저장 매체에 기록된 지도 속성 정보가 변화됨을 설명하는데, 이때 상기 지도 저장 매체로부터 데이터를 다시 판독하여 버퍼 메모리 공간에 기록하여 지도 포지셔닝 시스템에 사용하도록 제 공하고, 아니면, 직접 버퍼 메모리 공간으로부터 판독하여 지도 포지셔닝 시스템에 사용하도록 제공한다. 여기서, 기설정 개수 임계값은 상기 제2 위치 및 배향 정보에 대응되는 상기 기설정 도로 표지의 개수와 상기 과거 지도에서 동일한 도로 표지 정보를 구비하는 도로 표지의 매칭 정도를 판단하기 위한 것이고, 기설정 개수 임계값 수치가 작을 수록, 현재 수집된 모든 도로 표지에서, 상기 과거 지도 중의 모든 도로 표지와 매칭된 개 수가 더 많음을 설명하며, 상기 단계는 현재 구축된 지도와 과거 지도를 매칭하여 로봇이 상기 기설정 작업 영 역 내에서 과거 환경에 위치하는지 아니면 새로운 환경에 위치하는지를 결정하기 위한 것이다. 상기 시각적 로 봇이 금방 상기 기설정 작업 영역에 진입하여 작업할 때, 상기 지도 저장 매체에 상기 과거 지도에 대응되는 상 기 지도 속성 정보가 아직 저장되어 있지 않으면, 상기 과거 지도에서 대응되는 도로 표지 개수는 0이므로, 본 실시예는 상기 시각적 로봇이 이미 상기 기설정 작업 영역 내에서 적어도 한 번의 트래버싱을 완성한 장면에 적 용됨으로써, 상기 과거 지도 이용 방법은 상기 기설정 작업 영역에 대한 상기 시각적 로봇의 숙지 정도를 향상 시킨다. 단계 S5에서, 동일한 기설정 도로 표지에서의 제1 위치 및 배향 정보 및 제2 위치 및 배향 정보를 선택하고, 제 1 위치 및 배향 정보와 제2 위치 및 배향 정보의 변환 관계식을 계산하며, 구체적으로 제1 위치 및 배향 정보와 제2 위치 및 배향 정보의 각도, 및 제1 위치 및 배향 정보와 제2 위치 및 배향 정보의 좌표 변화량을 계산한다. 상기 제1 지도 포지셔닝 시스템은 복수 개의 도로 표지에서 대응되는 제1 위치 및 배향 정보를 출력할 수 있고, 상기 제2 지도 포지셔닝 시스템은 복수 개의 도로 표지에서 대응되는 제2 위치 및 배향 정보를 출력할 수 있음 으로써, 상기 시각적 로봇이 상이한 도로 표지를 수집할 시 위치한 위치 정보를 획득한다. 단계 S6에서, 단계 S5에서 획득된 변환 관계식에 따라 상기 과거 지도가 대응되는 변환 동작을 실행하도록 제어 하고, 변환된 후의 상기 과거 지도를 참조로서 이용하여 후속 운동을 제어한 다음, 변환 동작이 실행된 후의 과 거 지도를 업데이트하여 사용자 측에 디스플레이한다. 변환된 후의 상기 과거 지도에 따라, 사용자 측에서 장애 물의 위치를 표기할 수 있고, 다음, 현재 환경의 지형과 결부하여 합리적인 청소 순서 및 방향을 계획함으로써, 상기 과거 지도를 이용하여 상기 시각적 로봇이 운동 계획을 진행하도록 제어하고, 상기 시각적 로봇은 운동 과정에서 주변에서 트래버싱하였던 환경을 숙지할 수 있으므로, 로봇의 학습 능력을 끊임없이 향상시킨다. 완전한 지도를 구축한 후, 과거 지도와 새로 구축된 지도를 매칭하여 유사도를 획득함을 이해할 수 있다. 유사 도가 일정한 임계값보다 높으면, 여전히 이전의 지도인 것으로 인정하고; 유사도가 일정한 임계값보다 낮으면, 환경이 변경되어 상기 지도 저장 매체 중의 지도를 대체할 수 있는 것으로 인정하며, 상기 과거 지도를 메모리 공간에 버퍼링한다. 각각의 지도를 하나의 과거 작업 및 인터랙션 데이터에 대응시키는 것은, 동기적 동선과 즉 각적 지도 구축을 구현하기 위해 반복적으로 교체되는 과정이다. 설명해야 할 것은, 전술한 개수 임계값은 실제 상황에 따라 설정될 수 있다. 상기 지도 속성 정보는 지도 저장 매체의 지도 데이터를 마킹하기 위한 지도 식별 자, 도로 표지 개수, 이차원 격자 지도, 시각적 포지셔닝을 위한 도로 표지 정보, 도로 표지 정보가 전환되어 출력된 위치 및 배향 정보, 및 상기 데이터의 검사값을 포함하고, 위치 및 배향 정보는 위치 좌표 및 방위 각도 를 포함한다. 본 발명의 실시예는 상기 과거 지도 기반의 상기 제2 위치 및 배향 정보의 유효성을 판단하여, 과 거 지도의 좌표계에서 처리된 포지셔닝 정보가 상기 시각적 로봇의 위치 정보를 나타낼 수 있도록 확보한다. 바람직하게, 상기 단계 S3에서, 상기 제1 위치 및 배향 정보는 상기 제1 지도 포지셔닝 시스템으로부터 제1 버 퍼 메모리 공간으로 출력되어 포지셔닝을 위해 판독되기를 기다리거나, 또는 상기 지도 저장 매체에 기록되고; 여기서, 제1 버퍼 메모리 공간에는 상기 현재 지도에 대응되는 상기 지도 속성 정보가 저장되어 있으며; 상기 제2 위치 및 배향 정보는 상기 제2 지도 포지셔닝 시스템으로부터 제2 버퍼 메모리 공간으로 출력되어 판독되기 를 기다리고; 여기서, 제2 버퍼 메모리 공간에는 상기 과거 지도에 대응되는 상기 지도 속성 정보가 저장되어 있으며, 동일한 상기 기설정 작업 영역 내에서, 상기 시각적 로봇이 위치한 환경이 변화된 것으로 검출될 경우, 상기 과거 지도는 상기 현재 지도에 의해 업데이트된다. 상기 제2 버퍼 메모리 공간은 상기 지도 저장 매체로부 터 판독하여 업데이트해야 한다. 상기 제1 버퍼 메모리 공간과 상기 제2 버퍼 메모리 공간은 상기 시각적 로봇 내부의 시스템에 의해 개척 요청된 캐싱 공간이다. 따라서, 상기 단계 S1에서 획득된 기설정 도로 표지의 상기 도로 표지 개수와 상기 제2 버퍼 메모리 공간에서 판독된 상기 도로 표지 개수의 차이값이 비교적 클 경우, 먼 저 상기 제1 버퍼 메모리 공간으로부터 상기 제1 위치 및 배향 정보를 판독한 다음, 단계 S5에 진입한다. 본 발 명의 실시예는 상기 제2 지도 포지셔닝 시스템 및 상기 제1 지도 포지셔닝 시스템이 각각 상이한 지도 시스템의 데이터를 처리하도록 제어하고, 처리된 데이터의 동적 변화를 지원한다. 바람직하게, 상기 시각적 로봇이 작동되는 초기 시점, 또는 또는 상기 기설정 작업 영역이 매번 트래버싱하기 시작되는 시점에서, 먼저 상기 지도 저장 매체로부터 상기 과거 지도에 대응되는 상기 지도 속성 정보를 한 번 판독하고, 상기 지도 저장 매체에 미리 구축된 과거 지도 데이터를 판독하여 상기 제2 버퍼 메모리 공간 내에 저장하므로, 후속적으로 상기 과거 지도의 지도 속성 정보의 유효성 판단에 유리하고, 데이터를 최대한 빨리 판 독하여 상기 제2 지도 포지셔닝 시스템이 사용하도록 제공하는 기술적 효과를 달성하며, 상기 과거 지도에 대한 업데이트 및 포지셔닝 처리 속도를 높인다. 일 실시예로서, 전술한 단계 S4 전에, 상기 과거 지도의 상기 지도 속성 정보를 판독해야 하는데, 상기 지도 저 장 매체로부터 상기 과거 지도에 대응되는 상기 지도 속성 정보를 판독할 수 있음으로써, 상기 과거 지도에 대 응되는 상기 도로 표지 개수를 획득하고; 상기 제2 버퍼 메모리 공간 내로부터 상기 과거 지도에 대응되는 상기 지도 속성 정보를 판독할 수도 있음으로써, 상기 과거 지도에 대응되는 상기 도로 표지 개수를 획득한다. 구체 적으로 어떤 판독 방법을 사용할 것인지는 도 2에 도시된 상기 과거 지도의 상기 지도 속성 정보를 판독하는 제 어 방법을 참조할 수 있고, 상기 방법은 하기와 같은 단계를 포함한다. 단계 S401에서, 상기 지도 식별자에 따라, 상기 지도 저장 매체에 상기 과거 지도가 존재하는지 여부를 판단하 되, 존재하면, 단계 402에 진입하고, 아니면, 단계 408에 진입하며; 상기 지도 식별자는 지도 데이터의 식별자 이다. 단계 S402에서, 상기 지도 저장 매체 내에서 대응되는 상기 도로 표지 개수가 기설정 개수 임계값보다 큰지 여 부를 판단하되, 크면, 단계 403에 진입하고, 아니면, 단계 408에 진입하며; 본 실시예에서, 상기 기설정 개수 임계값의 수치는 적어도 2보다 크다. 판독된 도로 표지 정보를 양자화(quantization)하고, 지도의 합리성 및 완 전성을 향상시킨다. 단계 S403에서, 상기 지도 저장 매체 내에서 대응되는 상기 도로 표지 개수가 상기 제2 버퍼 메모리 공간에서 대응되는 상기 도로 표지 개수보다 큰지 여부를 판단하되, 크면, 단계 404에 진입하고, 아니면, 단계 408에 진 입한다. 특히, 동일한 상기 기설정 작업 영역에서, 현재 실시간으로 버퍼 저장 공간에 저장된 도로 표지 개수와 원래 저장된 도로 표지 개수의 차이가 현저할 경우, 상기 과거 지도와 새로 구축된 지도가 매칭지되 않는 것으 로 결정하고, 상기 기설정 작업 영역 내에서, 상기 시각적 로봇이 실제 물리적 환경이 변화된 것으로 탐측해내면, 현재 수집된 지도 속성 정보가 상기 지도 저장 매체 중의 상기 과거 지도에 비해 변화된 것으로 결정하는데, 이때, 현재 수집된 지도 속성 정보는 상기 과거 지도를 업데이트하기 위해 상기 지도 저장 매체에 기록될 수 있고, 현재 수집된 지도도 실시간으로 업데이트될 수 있는데, 이는 후속의 과거 지도에서의 위치 및 배향 환산을 위해 데이터를 저장하여 비축하기 위해서이며, 상기 지도 저장 매체로부터 다시 데이터를 판독하여 상기 제2 버퍼 메모리 공간에 기록해야 하는데, 이 데이터는 상기 제2 위치 및 배향 정보로 사용됨으로써, 상기 변환 관계식의 연산에 참여하기 위해 판독되기를 기다리며, 다음, 계산된 상기 변환 관계식과 결부하여 지도 좌 표계에 대해 변환 동작을 실행하고, 나아가, 상기 과거 지도를 조정하여, 상기 시각적 로봇이 변환된 후의 상기 과거 지도에 따라 실제 환경에 더 적응되는 작업 경로를 계획하도록 한다. 단계 S404에서, 상기 제2 버퍼 메모리 공간 내에 저장된 상기 지도 속성 정보를 제거한 다음, 단계 405에 진입 한다. 단계 S404에서 상기 시각적 로봇이 탐측한 실제 물리적 환경 변경 전의 지도 데이터의 영향을 제거함으로 써, 상기 제2 버퍼 메모리 공간은 업데이트된 상기 과거 지도에 의해 제공된 대응되는 저장 공간이다. 이때, 상 기 현재 지도의 상기 지도 속성 정보는 상기 지도 저장 매체에 기록되어, 상기 지도 저장 매체 중의 상기 과거 지도의 상기 지도 속성 정보가 이미 상기 현재 지도의 상기 지도 속성 정보에 의해 대체되도록 하였다. 단계 S405에서, 상기 지도 저장 매체로부터 대응되는 상기 지도 속성 정보를 판독하고 상기 제2 버퍼 메모리 공 간에 캐싱하여 새로운 상기 제2 위치 및 배향 정보로 결정하며, 상기 현재 지도에 대응되는 상기 제1 위치 및 배향 정보는 실시간으로 업데이트되는 중이며, 양자의 위치 및 배향의 변환 관계와 결부하여 상기 과거 지도를 조정하여, 상기 시각적 로봇에 의해 획득된 지도를 실제 환경과 매칭시키고, 특히 지도에서 상기 시각적 로봇에 대응되는 현재 위치 정보와 실제 환경을 매칭시킨다. 단계 S406에서, 상기 제2 버퍼 메모리 공간에 캐싱된 상기 지도 속성 정보에 대응되는 데이터의 검사값을 계산 한 다음, 단계 S407에 진입한다. 단계 S407에서, 단계 S406에서 계산하여 얻은 검사값과 상기 지도 저장 매체로부터 판독된 서로 매칭되는 상기 검사값이 같은지 여부를 판단하되, 상기 지도 저장 매체로부터 판독된 데이터가 정확한 것으로 결정한 다음, 단 계 S408에 진입하고, 아니면, 단계 S409에 진입한다. 본 발명의 실시예에서, 상기 지도 속성 정보에 대응되는 지도 데이터에 모두 대응되는 검사값을 구성하고, 데이터를 상기 지도 저장 매체에 기록할 경우, 대응되는 검사 값은 이에 따라 저장된다. 상기 지도 저장 매체 내로부터 상기 지도 속성 정보에 대응되는 데이터를 판독할 경 우, 판독된 데이터에 따라 하나의 검사값을 다시 계산하되, 상기 지도 저장 매체에 미리 저장된 검사값과 같으 면, 판독된 데이터가 정확한 것을 증명하고, 아니면, 데이터 판독 오류이다. 단계 S408에서, 상기 제2 지도 포지셔닝 시스템이 상기 제2 버퍼 메모리 공간 내의 상기 지도 속성 정보를 처리 하여 새로운 제2 위치 및 배향 정보를 획득하도록 제어하고, 상기 단계는 상기 제2 지도 포지셔닝 시스템이 상 기 기설정 매칭 알고리즘에 따라 상기 제2 버퍼 메모리 공간의 상기 도로 표지 정보를 처리하도록 제어하기도 한다. 또는, 상기 지도 저장 매체로부터 판독된 상기 위치 및 배향 정보를 상기 제2 위치 및 배향 정보로 하여 상기 제2 버퍼 메모리 공간에 버퍼링한 다음, 단계 S410에 진입한다. 단계 S409에서, 상기 지도 저장 매체로부터 판독된 데이터가 오류인 것으로 결정하는데, 즉 상기 지도 저장 매 체 내부에 저장된 상기 지도 속성 정보에 대응되는 데이터가 무효이다. 단계 S410에서, 상기 제2 버퍼 메모리 공간으로부터 상기 제2 위치 및 배향 정보를 판독하여 후속 상기 변환 관 계식의 계산에 참여되기를 기다린 다음, 상기 단계 S4에 진입한다. 본 발명의 실시예는 버퍼 메모리 공간과 상기 지도 저장 매체의 지도 속성 정보를 판단하여 과거 지도의 지도 속성 정보의 판독 방식을 결정함으로써, 지도 판독의 효율을 향상시킨다. 로봇의 과거 지도의 유효성을 유지할 수 있고, 지도에 대한 시각적 로봇의 학습 능력을 효과적으로 향상시킨다. 바람직하게, 상기 제1 버퍼 메모리 공간과 상기 제2 버퍼 메모리 공간은 상기 시각적 로봇 내부의 시스템에 의 해 개척 요청된 캐싱 공간으로, 특수한 선형 리스트이고, 여기서, 상기 제1 위치 및 배향 정보는 C++ 연관 컨테 이너의 방식으로 상기 제1 버퍼 메모리 공간에 저장되며, 상기 제2 위치 및 배향 정보는 C++ 연관 컨테이너의 방식으로 상기 제2 버퍼 메모리 공간에 저장되고, 메모리 공간에서 상기 제1 위치 및 배향 정보 및 상기 제2 위 치 및 배향 정보에 대응되는 key 값은 상기 도로 표지 정보의 id 번호에 대응되므로, 각각의 도로 표지 좌표 및 도로 표지 방향각에 대응되는 키는 도로 표지 정보의 id 번호이고, 상기 컨테이너 중의 키는 유일한 것이다. 상 기 기술적 해결수단은 메모리 관리 위치 및 배향 정보의 유연성을 향상시키고, 버퍼 메모리를 판독하는 효율을 향상시킨다. 여기서, 도로 표지 정보는 C++ 연관 컨테이너의 방식으로 메모리에 저장된다. 연관 컨테이너 중의요소는 키워드에 따라 저장 및 방문된다. 연관 컨테이너는 효율적인 키워드 조회 및 방문을 지원한다. 상기 도 로 표지 정보는 C++ 순차 컨테이너의 방식으로 순차적으로 버퍼 영역에 저장되고, 상기 도로 표지 위치 및 배향 정보는 C++ 연관 컨테이너의 방식으로 저장되며, 설명해야 할 것은, 연관 컨테이너와 순차 컨테이너의 본질적인 구별점은, 연관 컨테이너는 키(key)를 통해 요소를 저장 및 판독하지만, 순차 컨테이너는 컨테이너에서의 요소 의 위치 순서를 통해 요소를 저장 및 판독하는 것이다. 본 발명의 실시예는 지도 플래시 메모리에 저장된 저장 순서에 따라 도로 표지 정보를 저장하고 방문한 다음, 도로 표지 정보의 id 번호를 검색하고 방문하여 메모리로 부터 대응되는 상기 도로 표지 위치 및 배향 정보를 판독할 수 있다. 바람직하게, 상기 단계 S5에서, 상기 제2 위치 및 배향 정보 및 상기 제1 위치 및 배향 정보는 모두 동일한 상 기 기설정 도로 표지에 대해 획득된 기설정 개수의 위치 및 배향 정보이고; 기설정 개수의 상기 제2 위치 및 배 향 정보에 대해, 상기 제2 지도 포지셔닝 시스템이 동일한 상기 기설정 도로 표지의 한 그룹의 도로 표지 이미 지를 처리하도록 제어함으로써, 기설정 개수의 위치 및 배향 정보를 획득한 다음, 최댓값과 최솟값을 제거하고, 나머지 데이터의 평균값을 취하여 포지셔닝 작용을 하는 하나의 상기 제2 위치 및 배향 정보로 사용하며; 동시 에, 기설정 개수의 상기 제1 위치 및 배향 정보에 대해, 상기 제1 지도 포지셔닝 시스템이 동일한 상기 기설정 도로 표지의 한 그룹의 도로 표지 이미지를 매칭 처리하도록 제어함으로써, 기설정 개수의 위치 및 배향 정보를 획득한 다음, 최댓값과 최솟값을 제거하고, 나머지 데이터의 평균값을 취하여 포지셔닝 작용을 하는 하나의 상 기 제1 위치 및 배향 정보로 사용한다. 이로써, 지도에 정확한 도로 표지 포지셔닝 특징을 제공하여, 포지셔닝 데이터에 의한 오차 간섭을 감소시킨다. 설명해야 할 것은, 전술한 실시예에서, 상기 제1 지도 포지셔닝 시스템과 상기 제2 지도 포지셔닝 시스템은 서 로 독립적으로 작업하고, 내부에 상기 도로 표지 정보 처리를 구동하기 위한 상기 기설정 매칭 알고리즘이 설정 되어 있다. 상기 기술적 해결수단은 소프트웨어에서 과거 지도의 포지셔닝과 현재 지도의 포지셔닝이 독립적이 도록 제어하여, 서로 커플링되지 않도록 한다. 바람직하게, 상기 단계 S5에서, 상기 변환 관계식은 회전 매트릭스 R 및 병진 벡터 T를 포함하고; 상기 변환 동 작은 상기 과거 지도의 회전 및 병진을 제어하는 동작을 포함한다. 상기 기술적 해결수단은 회전 매트릭스와 병 진 벡터의 제약 관계를 통해 현재 지도의 좌표계와 과거 지도의 좌표계를 통일시켜 상기 과거 지도가 회전 및 병진하여 변환된 후 상기 시각적 로봇 현재 위치 방향과 매칭되도록 제어한다. 병진 거리 및 회전 각도를 계산 한다. 구체적으로, 상기 도로 표지 위치 및 배향 정보(상기 제1 위치 및 배향 정보 및 상기 제2 위치 및 배향 정보)는 모두 C++ 연관 컨테이너의 방식으로 저장되므로, 상기 제1 위치 및 배향 정보 pose_new는 상기 제1 지 도 포지셔닝 시스템에서 상기 현재 지도 타입의 하나의 객체 요소로 사용되고, 제1 좌표(pose new.x, pose_new.y) 및 제1 방향각 pose_new.angle을 포함하며; 상기 제2 위치 및 배향 정보 pose_old는 상기 제2 지 도 포지셔닝 시스템에서 상기 현재 지도 타입의 하나의 객체 요소로 사용되고, 제2 좌표(pose_old.x, pose_old.y) 및 제2 방향각 pose_old.angle을 포함하며; 전술한 변환 관계식에 포함된 상기 현재 지도와 상기 과거 지도 사이의 회전 매트릭스 R 및 병진 벡터 T는 하기와 같다. 회전 매트릭스 및 병진 벡터 T=(x,y)에 기반하여 하기와 같은 등식을 유추할 수 있다. angle = pose_old.angle - pose_new.angle, x = pose_new.x - (pose_old.x * cos(angle) + pose_old.y * sin(angle)), y = pose_new.y - (pose_old.y * cos(angle) - pose_old.x * sin(angle)). 여기서, angle은 상기 과거 지도를 회전시킬 각도를 나타내고, x는 상기 과거 지도가 x축에서 발생한 오프셋을 나타내며, y는 상기 과거 지도가 y축에서 발생한 오프셋을 나타내고, 전술한 각도 및 오프셋에 따라 상기 과거 지도가 먼저 angle 각도만큼 회전하도록 제어한 다음, x축 방향을 따라 x를 병진시키고, 다음 y축 방향을 따라 y를 병진시켜, 상기 과거 지도가 업데이트되어 상기 사용자 측 인터페이스에 디스플레이되도록 한다. 바람직하 게, 본 발명의 실시예의 상기 시각적 로봇은 변환된 후의 상기 과거 지도를 클라우드 서버 또는 휴대폰 등 이동 기기에 업로드하기 위한 업로드 모듈을 더 포함한다. 동일한 작업 영역 내에서 매번 작업할 때마다 상기 사용자 측에서 한 장의 새로운 지도를 구축하는 선행기술의 로봇 청소기에 비해, 본 발명의 실시예에서 미리 구축된 과거 지도는 작업 주기에서 여전히 상기 사용자 측에 보존되고, 상기 현재 지도와 상기 과거 지도가 변경될 경우, 전술한 변환 관계식에 따라 상기 과거 지도를 변환 시켜, 상기 시각적 로봇이 상기 영역 내의 평면 분포를 기억하고 상기 사용자 측 중의 상기 과거 지도를 어떻게조정하여 변환시킬 지를 학습하도록 하여, 다음 번 작업 시 이 계획에 따라 경로를 청소하도록 한다. 전술한 단계 S6에서, 변환된 후의 상기 과거 지도를 참조로서 이용하여 후속 운동을 제어하는 것을 언급하였는 데, 예를 들어, 평면도 제작을 완성하고 상기 사용자 측에 상기 과거 지도를 전송한 후, 상기 사용자 측을 통해 상이한 방을 서재, 침실, 오락실 등으로 분류하여 표기할 수 있음으로써, 상기 시각적 로봇이 로봇 청소기일 경 우, 방을 청소할 때 매번 전체 방을 청소하는 것이 아니라 계획된 방 영역에 따라 목적성 있게 청소한다. 이 밖 에, 상기 과거 지도에 따라 방 내에서 영역을 나눌 수 있는데, 예를 들어, 서재 중간의 일부분 영역만 청소하고 자 할 경우, 상기 사용자 측에서 대응되는 공간을 그려낸 다음, 상기 시각적 로봇이 목적성 있게 청소하도록 제 어한다. 상기 시각적 로봇이 후속의 운동 제어를 받는 과정에서, 트래버싱하였던 주변 환경을 점차적으로 숙지 할 수 있으므로, 로봇의 학습 능력을 끊임없이 강화시킨다. 상기 후속의 운동 제어는, 변환된 후의 상기 과거 지도에 따라, 상기 사용자 측에서 장애물의 위치를 표기할 수 있고, 다음, 현재 환경의 지형과 결부하여 합리적 인 청소 순서 및 방향을 계획함으로써, 상기 과거 지도를 이용하여 상기 시각적 로봇이 운동 계획을 진행하도록 제어하는 것을 더 포함할 수 있고, 상기 시각적 로봇은 운동 과정에서 주변에서 트래버싱하였던 환경을 숙지할 수 있으므로, 로봇의 학습 능력을 끊임없이 향상시킨다. 마지막으로 설명해야 할 것은, 이상의 실시예는 단지 본 발명의 기술적 해결수단을 설명하기 위한 것일 뿐, 이"}
{"patent_id": "10-2021-7026113", "section": "발명의_설명", "subsection": "발명을실시하기위한구체적인내용", "paragraph": 2, "content": "를 한정하려는 것이 아니며, 바람직한 실시예를 참조하여 본 발명을 상세하게 설명하였지만, 본 기술분야의 통 상의 기술자는, 여전히 본 발명의 구체적인 실시형태를 수정할 수 있거나 일부 기술특징에 대해 등가적 대체를 진행할 수 있으며, 본 발명의 기술적 해결수단의 사상을 벗어나지 않는 전제 하에 이들은 모두 본 발명이 보호 하고자 하는 기술적 해결수단 범위에 속해야 한다.도면 도면1 도면2"}
{"patent_id": "10-2021-7026113", "section": "도면", "subsection": "도면설명", "item": 1, "content": "도 1은 시각적 로봇 기반의 과거 지도 이용 방법의 흐름도이다. 도 2는 상기 과거 지도의 상기 지도 속성 정보를 판독하는 제어 방법의 흐름도이다."}
