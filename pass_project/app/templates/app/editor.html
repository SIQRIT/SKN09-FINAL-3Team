<!DOCTYPE html>
<html>
<head>
  <title>Patent Draft Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/app/editor.css">
</head>
<body>
  <!-- 브라우저 상단 바 제거됨 -->
  
  <!-- 헤더 영역 -->
  <header class="header">
    <div class="logo-section">
      <img src="/static/app/images/logo.png" alt="PASS 로고" class="logo-image">
      <h1 class="brand-title">특허 AI 지원 서비스</h1>
    </div>
    
    <div class="nav-tabs">
      <div class="nav-tab active">AI assistant</div>
      <div class="nav-tab">Chat bot</div>
    </div>
    
    <div class="user-section">
      <div class="user-avatar">
        <!-- 사람 이미지 추가 -->
        <img src="/static/app/images/user-avatar.png" alt="사용자 아바타" class="avatar-image">
      </div>
      <div class="user-links">
        <span>rornfl02 님</span> | 
        <a href="#">로그아웃</a> | 
        <a href="#">MY PASS</a>
      </div>
    </div>
  </header>
  
  <!-- 메인 콘텐츠 영역 -->
  <div class="main-content">
    
    <div class="panel-container">
      <!-- 왼쪽 패널: 템플릿 작성 -->
      <div class="panel">
        <div class="panel-header">템플릿 작성 목록</div>
        <div class="panel-body">
          <div class="input-guidelines">
            <h3>입력 가이드라인</h3>
            <ul>
              <li><strong>필수 입력 항목:</strong> 기술 설명, 해결 문제, 기술 차별성, 구성 요소 및 기능, 구현 방식 예, 출원인 정보, 발명자 정보</li>
              <li><strong>선택 입력 항목:</strong> 기술명, 활용 분야, 도면 설명</li>
              <li><strong>글자 수 제한:</strong> 텍스트 영역은 모두 3000자 이하로 입력해주세요.</li>
              <li><strong>허용 문자:</strong> 한국어, 영어, 특수문자(`, ~, !, @, #, $, %, ^, &, *, (, ), _, -, +, =, {, }, [, ], \, |, <, >, ?, /, ,, .)</li>
            </ul>
          </div>
          
          <form id="templateForm" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">01</div>
                <div class="section-title">기술명 입력</div>
                <div class="optional">선택 사항</div>
              </div>
              <div class="input-help">기술명에 대하여 작성하세요.</div>
              <input type="text" name="tech_name" class="text-input" placeholder="빅데이터 기반 광고 업체 검색 스마트 시스템" maxlength="200">
              <div class="char-counter"><span class="current-count">0</span>/200</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">02</div>
                <div class="section-title">기술 설명 입력</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">기술 설명에 대하여 작성하세요.</div>
              <textarea name="tech_description" class="textarea-input" placeholder="이 기술은 빅데이터를 활용하여 광고 업체를 검색하고 ..." required maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">03</div>
                <div class="section-title">해결하고자 하는 문제</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">해결하고자 하는 문제에 대하여 작성하세요.</div>
              <textarea name="problem_solved" class="textarea-input" placeholder="기존 광고 업체 비교의 번거로움을 줄이기 위해 자동 ..." required maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">04</div>
                <div class="section-title">기술 차별성</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">기술의 차별성에 대하여 작성하세요.</div>
              <textarea name="tech_differentiation" class="textarea-input" placeholder="AI와 블록체인을 결합해 맞춤형 추천과 정보 신뢰성을 ..." required maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">05</div>
                <div class="section-title">활용 분야</div>
                <div class="optional">선택 사항</div>
              </div>
              <div class="input-help">기술의 활용 분야에 대하여 작성하세요. (선택사항)</div>
              <textarea name="application_field" class="textarea-input" placeholder="중소기업, 스타트업, 대기업의 마케팅 전략 수립에 활..." maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">06</div>
                <div class="section-title">구성 요소 및 기능</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">기술의 구성 요소 및 기능에 대하여 작성하세요.</div>
              <textarea name="components_functions" class="textarea-input" placeholder="시스템은 사용자 단말, 서버, 통신/제어 모듈 등으로 ..." required maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">07</div>
                <div class="section-title">구현 방식 예</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">기술의 구현 방식 예를 작성하세요.</div>
              <textarea name="implementation_example" class="textarea-input" placeholder="사용자가 업종과 목적을 입력하면, 빅데이터 분석을 통..." required maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">08</div>
                <div class="section-title">도면 설명</div>
                <div class="optional">선택 사항</div>
              </div>
              <div class="input-help">도면에 대한 설명을 작성하세요. (선택사항)</div>
              <div class="file-upload-container">
                <label for="drawing-upload" class="file-upload-label">
                  <div class="upload-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="17 8 12 3 7 8"></polyline>
                      <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                  </div>
                  <span>PDF 또는 이미지 파일 업로드하기</span>
                </label>
                <input type="file" id="drawing-upload" name="drawing_file" accept=".pdf,.jpg,.jpeg,.png">
                <div class="file-info"></div>
              </div>
              <textarea name="drawing_description" class="textarea-input" placeholder="표 1에 대한 그림을 나타낸다면..." maxlength="3000"></textarea>
              <div class="char-counter"><span class="current-count">0</span>/3000</div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">09</div>
                <div class="section-title">출원자 정보 입력</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">출원자 정보를 작성하세요.</div>
              
              <div class="person-info-container">
                <div class="person-info-row">
                  <label>이름</label>
                  <input type="text" name="applicant_name" class="text-input" placeholder="특허를 출원하는 개인(들)의 정보를 작성해주세요." required maxlength="100">
                </div>
                
                <div class="person-info-row">
                  <label>국적</label>
                  <div class="select-wrapper">
                    <select name="applicant_nationality" class="select-input" required>
                      <option value="대한민국">대한민국</option>
                      <option value="미국">미국</option>
                      <option value="일본">일본</option>
                      <option value="중국">중국</option>
                      <option value="기타">기타</option>
                    </select>
                  </div>
                </div>
                
                <div class="person-info-row">
                  <label>주소</label>
                  <input type="text" name="applicant_address" class="text-input" placeholder="특허를 출원하는 개인(들)의 주소를 작성해주세요." required maxlength="200">
                </div>
              </div>
            </div>
            
            <div class="input-section">
              <div class="input-header">
                <div class="section-number">10</div>
                <div class="section-title">발명자 정보 입력</div>
                <div class="required">* 필수 입력</div>
              </div>
              <div class="input-help">발명자 정보를 작성하세요.</div>
              
              <div class="person-info-container">
                <div class="person-info-row">
                  <label>이름</label>
                  <input type="text" name="inventor_name" class="text-input" placeholder="개인(들)의 정보를 작성해주세요." required maxlength="100">
                </div>
                
                <div class="person-info-row">
                  <label>국적</label>
                  <div class="select-wrapper">
                    <select name="inventor_nationality" class="select-input" required>
                      <option value="대한민국">대한민국</option>
                      <option value="미국">미국</option>
                      <option value="일본">일본</option>
                      <option value="중국">중국</option>
                      <option value="기타">기타</option>
                    </select>
                  </div>
                </div>
                
                <div class="person-info-row">
                  <label>주소</label>
                  <input type="text" name="inventor_address" class="text-input" placeholder="개인(들)의 주소를 작성해주세요" required maxlength="200">
                </div>
              </div>
            </div>
            
            <div class="button-row">
              <button type="submit" name="submit_template" class="btn btn-submit">확인</button>
              <button type="reset" class="btn btn-cancel">취소</button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- 오른쪽 패널: 생성된 특허 초안 -->
      <div class="panel result-panel">
        <div class="panel-header">생성된 특허 초안</div>
        <div class="panel-body">
          {% if draft %}
            <form method="post">
              {% csrf_token %}
              <input type="hidden" name="draft_id" value="{{ draft.draft_id }}">
              <textarea name="draft_text" id="draft_text" class="textarea-input" readonly>{{ draft.create_draft }}</textarea>
              
              <div class="button-row">
                <button type="button" onclick="enableEdit()" class="btn btn-secondary">직접 수정</button>
                <button type="submit" name="save_draft" class="btn btn-primary">저장</button>
              </div>
            </form>
            
            <div class="additional-section">
              <h3>AI 수정</h3>
              <form method="post" class="action-form">
                {% csrf_token %}
                <input type="hidden" name="draft_id" value="{{ draft.draft_id }}">
                <input type="text" name="prompt" class="text-input" placeholder="수정 프롬프트 입력...">
                <div class="button-row">
                  <button type="submit" name="ai_edit" class="btn btn-primary">AI 수정</button>
                </div>
              </form>
            </div>
            
            <div class="additional-section">
              <h3>AI 평가</h3>
              <form method="post">
                {% csrf_token %}
                <input type="hidden" name="draft_id" value="{{ draft.draft_id }}">
                <button type="submit" name="ai_evaluate" class="btn btn-primary">AI 평가</button>
              </form>
              
              {% if feedback %}
                <div class="feedback-box">
                  <p>{{ feedback }}</p>
                </div>
              {% endif %}
            </div>
            
            <div class="additional-section">
              <h3>파일 다운로드</h3>
              <div class="button-row">
                <a href="{% url 'download_pdf' draft.draft_id %}" class="btn btn-primary">PDF</a>
                <a href="{% url 'download_docx' draft.draft_id %}" class="btn btn-primary">DOCX</a>
              </div>
            </div>
            
          {% else %}
            <div class="no-draft-message">
              <p>템플릿을 작성하여 특허 초안을 생성하세요.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  
  <script src="/static/app/editor.js"></script>
</body>
</html>